"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@stream-io";
exports.ids = ["vendor-chunks/@stream-io"];
exports.modules = {

/***/ "(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js":
/*!***************************************************************!*\
  !*** ./node_modules/@stream-io/video-client/dist/index.es.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioSettingsRequestDefaultDeviceEnum: () => (/* binding */ AudioSettingsRequestDefaultDeviceEnum),\n/* harmony export */   AudioSettingsResponseDefaultDeviceEnum: () => (/* binding */ AudioSettingsResponseDefaultDeviceEnum),\n/* harmony export */   AxiosError: () => (/* reexport safe */ axios__WEBPACK_IMPORTED_MODULE_1__.AxiosError),\n/* harmony export */   BlockListOptionsBehaviorEnum: () => (/* binding */ BlockListOptionsBehaviorEnum),\n/* harmony export */   Browsers: () => (/* binding */ browsers),\n/* harmony export */   Call: () => (/* binding */ Call),\n/* harmony export */   CallState: () => (/* binding */ CallState),\n/* harmony export */   CallType: () => (/* binding */ CallType),\n/* harmony export */   CallTypes: () => (/* binding */ CallTypes),\n/* harmony export */   CallingState: () => (/* binding */ CallingState),\n/* harmony export */   CameraManager: () => (/* binding */ CameraManager),\n/* harmony export */   CameraManagerState: () => (/* binding */ CameraManagerState),\n/* harmony export */   ChannelConfigWithInfoAutomodBehaviorEnum: () => (/* binding */ ChannelConfigWithInfoAutomodBehaviorEnum),\n/* harmony export */   ChannelConfigWithInfoAutomodEnum: () => (/* binding */ ChannelConfigWithInfoAutomodEnum),\n/* harmony export */   ChannelConfigWithInfoBlocklistBehaviorEnum: () => (/* binding */ ChannelConfigWithInfoBlocklistBehaviorEnum),\n/* harmony export */   CreateDeviceRequestPushProviderEnum: () => (/* binding */ CreateDeviceRequestPushProviderEnum),\n/* harmony export */   DebounceType: () => (/* binding */ DebounceType),\n/* harmony export */   DynascaleManager: () => (/* binding */ DynascaleManager),\n/* harmony export */   ErrorFromResponse: () => (/* binding */ ErrorFromResponse),\n/* harmony export */   InputMediaDeviceManager: () => (/* binding */ InputMediaDeviceManager),\n/* harmony export */   InputMediaDeviceManagerState: () => (/* binding */ InputMediaDeviceManagerState),\n/* harmony export */   MicrophoneManager: () => (/* binding */ MicrophoneManager),\n/* harmony export */   MicrophoneManagerState: () => (/* binding */ MicrophoneManagerState),\n/* harmony export */   NoiseCancellationSettingsModeEnum: () => (/* binding */ NoiseCancellationSettingsModeEnum),\n/* harmony export */   OwnCapability: () => (/* binding */ OwnCapability),\n/* harmony export */   RecordSettingsRequestModeEnum: () => (/* binding */ RecordSettingsRequestModeEnum),\n/* harmony export */   RecordSettingsRequestQualityEnum: () => (/* binding */ RecordSettingsRequestQualityEnum),\n/* harmony export */   RxUtils: () => (/* binding */ rxUtils),\n/* harmony export */   ScreenShareManager: () => (/* binding */ ScreenShareManager),\n/* harmony export */   ScreenShareState: () => (/* binding */ ScreenShareState),\n/* harmony export */   SfuEvents: () => (/* binding */ events),\n/* harmony export */   SfuModels: () => (/* binding */ models),\n/* harmony export */   SpeakerManager: () => (/* binding */ SpeakerManager),\n/* harmony export */   SpeakerState: () => (/* binding */ SpeakerState),\n/* harmony export */   StreamSfuClient: () => (/* binding */ StreamSfuClient),\n/* harmony export */   StreamVideoClient: () => (/* binding */ StreamVideoClient),\n/* harmony export */   StreamVideoReadOnlyStateStore: () => (/* binding */ StreamVideoReadOnlyStateStore),\n/* harmony export */   StreamVideoWriteableStateStore: () => (/* binding */ StreamVideoWriteableStateStore),\n/* harmony export */   TranscriptionSettingsRequestModeEnum: () => (/* binding */ TranscriptionSettingsRequestModeEnum),\n/* harmony export */   TranscriptionSettingsResponseModeEnum: () => (/* binding */ TranscriptionSettingsResponseModeEnum),\n/* harmony export */   VideoSettingsRequestCameraFacingEnum: () => (/* binding */ VideoSettingsRequestCameraFacingEnum),\n/* harmony export */   VideoSettingsResponseCameraFacingEnum: () => (/* binding */ VideoSettingsResponseCameraFacingEnum),\n/* harmony export */   ViewportTracker: () => (/* binding */ ViewportTracker),\n/* harmony export */   VisibilityState: () => (/* binding */ VisibilityState),\n/* harmony export */   checkIfAudioOutputChangeSupported: () => (/* binding */ checkIfAudioOutputChangeSupported),\n/* harmony export */   combineComparators: () => (/* binding */ combineComparators),\n/* harmony export */   conditional: () => (/* binding */ conditional),\n/* harmony export */   createSoundDetector: () => (/* binding */ createSoundDetector),\n/* harmony export */   defaultSortPreset: () => (/* binding */ defaultSortPreset),\n/* harmony export */   descending: () => (/* binding */ descending),\n/* harmony export */   deviceIds$: () => (/* binding */ deviceIds$),\n/* harmony export */   disposeOfMediaStream: () => (/* binding */ disposeOfMediaStream),\n/* harmony export */   dominantSpeaker: () => (/* binding */ dominantSpeaker),\n/* harmony export */   getAudioBrowserPermission: () => (/* binding */ getAudioBrowserPermission),\n/* harmony export */   getAudioDevices: () => (/* binding */ getAudioDevices),\n/* harmony export */   getAudioOutputDevices: () => (/* binding */ getAudioOutputDevices),\n/* harmony export */   getAudioStream: () => (/* binding */ getAudioStream),\n/* harmony export */   getClientDetails: () => (/* binding */ getClientDetails),\n/* harmony export */   getDeviceInfo: () => (/* binding */ getDeviceInfo),\n/* harmony export */   getLogLevel: () => (/* binding */ getLogLevel),\n/* harmony export */   getLogger: () => (/* binding */ getLogger),\n/* harmony export */   getOSInfo: () => (/* binding */ getOSInfo),\n/* harmony export */   getScreenShareStream: () => (/* binding */ getScreenShareStream),\n/* harmony export */   getSdkInfo: () => (/* binding */ getSdkInfo),\n/* harmony export */   getVideoBrowserPermission: () => (/* binding */ getVideoBrowserPermission),\n/* harmony export */   getVideoDevices: () => (/* binding */ getVideoDevices),\n/* harmony export */   getVideoStream: () => (/* binding */ getVideoStream),\n/* harmony export */   getWebRTCInfo: () => (/* binding */ getWebRTCInfo),\n/* harmony export */   hasAudio: () => (/* binding */ hasAudio),\n/* harmony export */   hasScreenShare: () => (/* binding */ hasScreenShare),\n/* harmony export */   hasScreenShareAudio: () => (/* binding */ hasScreenShareAudio),\n/* harmony export */   hasVideo: () => (/* binding */ hasVideo),\n/* harmony export */   isPinned: () => (/* binding */ isPinned),\n/* harmony export */   livestreamOrAudioRoomSortPreset: () => (/* binding */ livestreamOrAudioRoomSortPreset),\n/* harmony export */   logLevels: () => (/* binding */ logLevels),\n/* harmony export */   logToConsole: () => (/* binding */ logToConsole),\n/* harmony export */   name: () => (/* binding */ name),\n/* harmony export */   noopComparator: () => (/* binding */ noopComparator),\n/* harmony export */   paginatedLayoutSortPreset: () => (/* binding */ paginatedLayoutSortPreset),\n/* harmony export */   pinned: () => (/* binding */ pinned),\n/* harmony export */   publishingAudio: () => (/* binding */ publishingAudio),\n/* harmony export */   publishingVideo: () => (/* binding */ publishingVideo),\n/* harmony export */   reactionType: () => (/* binding */ reactionType),\n/* harmony export */   role: () => (/* binding */ role),\n/* harmony export */   screenSharing: () => (/* binding */ screenSharing),\n/* harmony export */   setDeviceInfo: () => (/* binding */ setDeviceInfo),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel),\n/* harmony export */   setLogger: () => (/* binding */ setLogger),\n/* harmony export */   setOSInfo: () => (/* binding */ setOSInfo),\n/* harmony export */   setSdkInfo: () => (/* binding */ setSdkInfo),\n/* harmony export */   setWebRTCInfo: () => (/* binding */ setWebRTCInfo),\n/* harmony export */   speakerLayoutSortPreset: () => (/* binding */ speakerLayoutSortPreset),\n/* harmony export */   speaking: () => (/* binding */ speaking)\n/* harmony export */ });\n/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ \"(ssr)/./node_modules/webrtc-adapter/src/js/adapter_core.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/message-type.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/json-typings.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/pb-long.js\");\n/* harmony import */ var _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @protobuf-ts/runtime-rpc */ \"(ssr)/./node_modules/@protobuf-ts/runtime-rpc/build/es2015/service-type.js\");\n/* harmony import */ var _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @protobuf-ts/runtime-rpc */ \"(ssr)/./node_modules/@protobuf-ts/runtime-rpc/build/es2015/rpc-interceptor.js\");\n/* harmony import */ var _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @protobuf-ts/runtime-rpc */ \"(ssr)/./node_modules/@protobuf-ts/runtime-rpc/build/es2015/rpc-error.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/index.js\");\n/* harmony import */ var _protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @protobuf-ts/twirp-transport */ \"(ssr)/./node_modules/@protobuf-ts/twirp-transport/build/es2015/twirp-transport.js\");\n/* harmony import */ var _protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @protobuf-ts/twirp-transport */ \"(ssr)/./node_modules/@protobuf-ts/twirp-transport/build/es2015/twitch-twirp-error-code.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ua-parser-js */ \"(ssr)/./node_modules/ua-parser-js/src/ua-parser.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilKeyChanged.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/fromEventPattern.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/startWith.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/concatMap.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/debounce.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,from,fromEvent,fromEventPattern,map,merge,of,pairwise,shareReplay,startWith,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/timer.js\");\n/* harmony import */ var sdp_transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sdp-transform */ \"(ssr)/./node_modules/sdp-transform/lib/index.js\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var isomorphic_ws__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! isomorphic-ws */ \"(ssr)/./node_modules/isomorphic-ws/node.js\");\n/* harmony import */ var isomorphic_ws__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(isomorphic_ws__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var base64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! base64-js */ \"(ssr)/./node_modules/base64-js/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @export\n */ const AudioSettingsRequestDefaultDeviceEnum = {\n    SPEAKER: \"speaker\",\n    EARPIECE: \"earpiece\"\n};\n/**\n * @export\n */ const AudioSettingsResponseDefaultDeviceEnum = {\n    SPEAKER: \"speaker\",\n    EARPIECE: \"earpiece\"\n};\n/**\n * @export\n */ const BlockListOptionsBehaviorEnum = {\n    FLAG: \"flag\",\n    BLOCK: \"block\",\n    SHADOW_BLOCK: \"shadow_block\"\n};\n/**\n * @export\n */ const ChannelConfigWithInfoAutomodEnum = {\n    DISABLED: \"disabled\",\n    SIMPLE: \"simple\",\n    AI: \"AI\"\n};\n/**\n * @export\n */ const ChannelConfigWithInfoAutomodBehaviorEnum = {\n    FLAG: \"flag\",\n    BLOCK: \"block\",\n    SHADOW_BLOCK: \"shadow_block\"\n};\n/**\n * @export\n */ const ChannelConfigWithInfoBlocklistBehaviorEnum = {\n    FLAG: \"flag\",\n    BLOCK: \"block\",\n    SHADOW_BLOCK: \"shadow_block\"\n};\n/**\n * @export\n */ const CreateDeviceRequestPushProviderEnum = {\n    FIREBASE: \"firebase\",\n    APN: \"apn\",\n    HUAWEI: \"huawei\",\n    XIAOMI: \"xiaomi\"\n};\n/**\n * @export\n */ const NoiseCancellationSettingsModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * All possibility of string to use\n * @export\n */ const OwnCapability = {\n    BLOCK_USERS: \"block-users\",\n    CHANGE_MAX_DURATION: \"change-max-duration\",\n    CREATE_CALL: \"create-call\",\n    CREATE_REACTION: \"create-reaction\",\n    ENABLE_NOISE_CANCELLATION: \"enable-noise-cancellation\",\n    END_CALL: \"end-call\",\n    JOIN_BACKSTAGE: \"join-backstage\",\n    JOIN_CALL: \"join-call\",\n    JOIN_ENDED_CALL: \"join-ended-call\",\n    MUTE_USERS: \"mute-users\",\n    PIN_FOR_EVERYONE: \"pin-for-everyone\",\n    READ_CALL: \"read-call\",\n    REMOVE_CALL_MEMBER: \"remove-call-member\",\n    SCREENSHARE: \"screenshare\",\n    SEND_AUDIO: \"send-audio\",\n    SEND_VIDEO: \"send-video\",\n    START_BROADCAST_CALL: \"start-broadcast-call\",\n    START_RECORD_CALL: \"start-record-call\",\n    START_TRANSCRIPTION_CALL: \"start-transcription-call\",\n    STOP_BROADCAST_CALL: \"stop-broadcast-call\",\n    STOP_RECORD_CALL: \"stop-record-call\",\n    STOP_TRANSCRIPTION_CALL: \"stop-transcription-call\",\n    UPDATE_CALL: \"update-call\",\n    UPDATE_CALL_MEMBER: \"update-call-member\",\n    UPDATE_CALL_PERMISSIONS: \"update-call-permissions\",\n    UPDATE_CALL_SETTINGS: \"update-call-settings\"\n};\n/**\n * @export\n */ const RecordSettingsRequestModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * @export\n */ const RecordSettingsRequestQualityEnum = {\n    _360P: \"360p\",\n    _480P: \"480p\",\n    _720P: \"720p\",\n    _1080P: \"1080p\",\n    _1440P: \"1440p\",\n    PORTRAIT_360X640: \"portrait-360x640\",\n    PORTRAIT_480X854: \"portrait-480x854\",\n    PORTRAIT_720X1280: \"portrait-720x1280\",\n    PORTRAIT_1080X1920: \"portrait-1080x1920\",\n    PORTRAIT_1440X2560: \"portrait-1440x2560\"\n};\n/**\n * @export\n */ const TranscriptionSettingsRequestModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * @export\n */ const TranscriptionSettingsResponseModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * @export\n */ const VideoSettingsRequestCameraFacingEnum = {\n    FRONT: \"front\",\n    BACK: \"back\",\n    EXTERNAL: \"external\"\n};\n/**\n * @export\n */ const VideoSettingsResponseCameraFacingEnum = {\n    FRONT: \"front\",\n    BACK: \"back\",\n    EXTERNAL: \"external\"\n};\nclass ErrorFromResponse extends Error {\n}\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n *  The JSON representation for `NullValue` is JSON `null`.\n *\n * @generated from protobuf enum google.protobuf.NullValue\n */ var NullValue;\n(function(NullValue) {\n    /**\n     * Null value.\n     *\n     * @generated from protobuf enum value: NULL_VALUE = 0;\n     */ NullValue[NullValue[\"NULL_VALUE\"] = 0] = \"NULL_VALUE\";\n})(NullValue || (NullValue = {}));\n// @generated message type with reflection information, may provide speed optimized methods\nclass Struct$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"google.protobuf.Struct\", [\n            {\n                no: 1,\n                name: \"fields\",\n                kind: \"map\",\n                K: 9 /*ScalarType.STRING*/ ,\n                V: {\n                    kind: \"message\",\n                    T: ()=>Value\n                }\n            }\n        ]);\n    }\n    /**\n     * Encode `Struct` to JSON object.\n     */ internalJsonWrite(message, options) {\n        let json = {};\n        for (let [k, v] of Object.entries(message.fields)){\n            json[k] = Value.toJson(v);\n        }\n        return json;\n    }\n    /**\n     * Decode `Struct` from JSON object.\n     */ internalJsonRead(json, options, target) {\n        if (!(0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_8__.isJsonObject)(json)) throw new globalThis.Error(\"Unable to parse message \" + this.typeName + \" from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_8__.typeofJsonValue)(json) + \".\");\n        if (!target) target = this.create();\n        for (let [k, v] of globalThis.Object.entries(json)){\n            target.fields[k] = Value.fromJson(v);\n        }\n        return target;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Struct\n */ const Struct = new Struct$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Value$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"google.protobuf.Value\", [\n            {\n                no: 1,\n                name: \"null_value\",\n                kind: \"enum\",\n                oneof: \"kind\",\n                T: ()=>[\n                        \"google.protobuf.NullValue\",\n                        NullValue\n                    ]\n            },\n            {\n                no: 2,\n                name: \"number_value\",\n                kind: \"scalar\",\n                oneof: \"kind\",\n                T: 1 /*ScalarType.DOUBLE*/ \n            },\n            {\n                no: 3,\n                name: \"string_value\",\n                kind: \"scalar\",\n                oneof: \"kind\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"bool_value\",\n                kind: \"scalar\",\n                oneof: \"kind\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 5,\n                name: \"struct_value\",\n                kind: \"message\",\n                oneof: \"kind\",\n                T: ()=>Struct\n            },\n            {\n                no: 6,\n                name: \"list_value\",\n                kind: \"message\",\n                oneof: \"kind\",\n                T: ()=>ListValue\n            }\n        ]);\n    }\n    /**\n     * Encode `Value` to JSON value.\n     */ internalJsonWrite(message, options) {\n        if (message.kind.oneofKind === undefined) throw new globalThis.Error();\n        switch(message.kind.oneofKind){\n            case undefined:\n                throw new globalThis.Error();\n            case \"boolValue\":\n                return message.kind.boolValue;\n            case \"nullValue\":\n                return null;\n            case \"numberValue\":\n                let numberValue = message.kind.numberValue;\n                if (typeof numberValue == \"number\" && !Number.isFinite(numberValue)) throw new globalThis.Error();\n                return numberValue;\n            case \"stringValue\":\n                return message.kind.stringValue;\n            case \"listValue\":\n                let listValueField = this.fields.find((f)=>f.no === 6);\n                if (listValueField?.kind !== \"message\") throw new globalThis.Error();\n                return listValueField.T().toJson(message.kind.listValue);\n            case \"structValue\":\n                let structValueField = this.fields.find((f)=>f.no === 5);\n                if (structValueField?.kind !== \"message\") throw new globalThis.Error();\n                return structValueField.T().toJson(message.kind.structValue);\n        }\n    }\n    /**\n     * Decode `Value` from JSON value.\n     */ internalJsonRead(json, options, target) {\n        if (!target) target = this.create();\n        switch(typeof json){\n            case \"number\":\n                target.kind = {\n                    oneofKind: \"numberValue\",\n                    numberValue: json\n                };\n                break;\n            case \"string\":\n                target.kind = {\n                    oneofKind: \"stringValue\",\n                    stringValue: json\n                };\n                break;\n            case \"boolean\":\n                target.kind = {\n                    oneofKind: \"boolValue\",\n                    boolValue: json\n                };\n                break;\n            case \"object\":\n                if (json === null) {\n                    target.kind = {\n                        oneofKind: \"nullValue\",\n                        nullValue: NullValue.NULL_VALUE\n                    };\n                } else if (globalThis.Array.isArray(json)) {\n                    target.kind = {\n                        oneofKind: \"listValue\",\n                        listValue: ListValue.fromJson(json)\n                    };\n                } else {\n                    target.kind = {\n                        oneofKind: \"structValue\",\n                        structValue: Struct.fromJson(json)\n                    };\n                }\n                break;\n            default:\n                throw new globalThis.Error(\"Unable to parse \" + this.typeName + \" from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_8__.typeofJsonValue)(json));\n        }\n        return target;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Value\n */ const Value = new Value$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ListValue$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"google.protobuf.ListValue\", [\n            {\n                no: 1,\n                name: \"values\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Value\n            }\n        ]);\n    }\n    /**\n     * Encode `ListValue` to JSON array.\n     */ internalJsonWrite(message, options) {\n        return message.values.map((v)=>Value.toJson(v));\n    }\n    /**\n     * Decode `ListValue` from JSON array.\n     */ internalJsonRead(json, options, target) {\n        if (!globalThis.Array.isArray(json)) throw new globalThis.Error(\"Unable to parse \" + this.typeName + \" from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_8__.typeofJsonValue)(json));\n        if (!target) target = this.create();\n        let values = json.map((v)=>Value.fromJson(v));\n        target.values.push(...values);\n        return target;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.ListValue\n */ const ListValue = new ListValue$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Timestamp$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"google.protobuf.Timestamp\", [\n            {\n                no: 1,\n                name: \"seconds\",\n                kind: \"scalar\",\n                T: 3 /*ScalarType.INT64*/ \n            },\n            {\n                no: 2,\n                name: \"nanos\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n    /**\n     * Creates a new `Timestamp` for the current time.\n     */ now() {\n        const msg = this.create();\n        const ms = Date.now();\n        msg.seconds = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.PbLong.from(Math.floor(ms / 1000)).toString();\n        msg.nanos = ms % 1000 * 1000000;\n        return msg;\n    }\n    /**\n     * Converts a `Timestamp` to a JavaScript Date.\n     */ toDate(message) {\n        return new Date(_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.PbLong.from(message.seconds).toNumber() * 1000 + Math.ceil(message.nanos / 1000000));\n    }\n    /**\n     * Converts a JavaScript Date to a `Timestamp`.\n     */ fromDate(date) {\n        const msg = this.create();\n        const ms = date.getTime();\n        msg.seconds = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.PbLong.from(Math.floor(ms / 1000)).toString();\n        msg.nanos = ms % 1000 * 1000000;\n        return msg;\n    }\n    /**\n     * In JSON format, the `Timestamp` type is encoded as a string\n     * in the RFC 3339 format.\n     */ internalJsonWrite(message, options) {\n        let ms = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.PbLong.from(message.seconds).toNumber() * 1000;\n        if (ms < Date.parse(\"0001-01-01T00:00:00Z\") || ms > Date.parse(\"9999-12-31T23:59:59Z\")) throw new Error(\"Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.\");\n        if (message.nanos < 0) throw new Error(\"Unable to encode invalid Timestamp to JSON. Nanos must not be negative.\");\n        let z = \"Z\";\n        if (message.nanos > 0) {\n            let nanosStr = (message.nanos + 1000000000).toString().substring(1);\n            if (nanosStr.substring(3) === \"000000\") z = \".\" + nanosStr.substring(0, 3) + \"Z\";\n            else if (nanosStr.substring(6) === \"000\") z = \".\" + nanosStr.substring(0, 6) + \"Z\";\n            else z = \".\" + nanosStr + \"Z\";\n        }\n        return new Date(ms).toISOString().replace(\".000Z\", z);\n    }\n    /**\n     * In JSON format, the `Timestamp` type is encoded as a string\n     * in the RFC 3339 format.\n     */ internalJsonRead(json, options, target) {\n        if (typeof json !== \"string\") throw new Error(\"Unable to parse Timestamp from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_8__.typeofJsonValue)(json) + \".\");\n        let matches = json.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);\n        if (!matches) throw new Error(\"Unable to parse Timestamp from JSON. Invalid format.\");\n        let ms = Date.parse(matches[1] + \"-\" + matches[2] + \"-\" + matches[3] + \"T\" + matches[4] + \":\" + matches[5] + \":\" + matches[6] + (matches[8] ? matches[8] : \"Z\"));\n        if (Number.isNaN(ms)) throw new Error(\"Unable to parse Timestamp from JSON. Invalid value.\");\n        if (ms < Date.parse(\"0001-01-01T00:00:00Z\") || ms > Date.parse(\"9999-12-31T23:59:59Z\")) throw new globalThis.Error(\"Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.\");\n        if (!target) target = this.create();\n        target.seconds = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.PbLong.from(ms / 1000).toString();\n        target.nanos = 0;\n        if (matches[7]) target.nanos = parseInt(\"1\" + matches[7] + \"0\".repeat(9 - matches[7].length)) - 1000000000;\n        return target;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Timestamp\n */ const Timestamp = new Timestamp$Type();\n/* eslint-disable */ // @generated by protobuf-ts 2.9.4 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/models/models.proto\" (package \"stream.video.sfu.models\", syntax proto3)\n// tslint:disable\n/**\n * @generated from protobuf enum stream.video.sfu.models.PeerType\n */ var PeerType;\n(function(PeerType) {\n    /**\n     * todo fix me (marcelo)\n     *\n     * @generated from protobuf enum value: PEER_TYPE_PUBLISHER_UNSPECIFIED = 0;\n     */ PeerType[PeerType[\"PUBLISHER_UNSPECIFIED\"] = 0] = \"PUBLISHER_UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: PEER_TYPE_SUBSCRIBER = 1;\n     */ PeerType[PeerType[\"SUBSCRIBER\"] = 1] = \"SUBSCRIBER\";\n})(PeerType || (PeerType = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.ConnectionQuality\n */ var ConnectionQuality;\n(function(ConnectionQuality) {\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_UNSPECIFIED = 0;\n     */ ConnectionQuality[ConnectionQuality[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_POOR = 1;\n     */ ConnectionQuality[ConnectionQuality[\"POOR\"] = 1] = \"POOR\";\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_GOOD = 2;\n     */ ConnectionQuality[ConnectionQuality[\"GOOD\"] = 2] = \"GOOD\";\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_EXCELLENT = 3;\n     */ ConnectionQuality[ConnectionQuality[\"EXCELLENT\"] = 3] = \"EXCELLENT\";\n})(ConnectionQuality || (ConnectionQuality = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.VideoQuality\n */ var VideoQuality;\n(function(VideoQuality) {\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_LOW_UNSPECIFIED = 0;\n     */ VideoQuality[VideoQuality[\"LOW_UNSPECIFIED\"] = 0] = \"LOW_UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_MID = 1;\n     */ VideoQuality[VideoQuality[\"MID\"] = 1] = \"MID\";\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_HIGH = 2;\n     */ VideoQuality[VideoQuality[\"HIGH\"] = 2] = \"HIGH\";\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_OFF = 3;\n     */ VideoQuality[VideoQuality[\"OFF\"] = 3] = \"OFF\";\n})(VideoQuality || (VideoQuality = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackType\n */ var TrackType;\n(function(TrackType) {\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_UNSPECIFIED = 0;\n     */ TrackType[TrackType[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_AUDIO = 1;\n     */ TrackType[TrackType[\"AUDIO\"] = 1] = \"AUDIO\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_VIDEO = 2;\n     */ TrackType[TrackType[\"VIDEO\"] = 2] = \"VIDEO\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE = 3;\n     */ TrackType[TrackType[\"SCREEN_SHARE\"] = 3] = \"SCREEN_SHARE\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE_AUDIO = 4;\n     */ TrackType[TrackType[\"SCREEN_SHARE_AUDIO\"] = 4] = \"SCREEN_SHARE_AUDIO\";\n})(TrackType || (TrackType = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.ErrorCode\n */ var ErrorCode;\n(function(ErrorCode) {\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_UNSPECIFIED = 0;\n     */ ErrorCode[ErrorCode[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_NOT_FOUND = 100;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACK_NOT_FOUND\"] = 100] = \"PUBLISH_TRACK_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACKS_MISMATCH = 101;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACKS_MISMATCH\"] = 101] = \"PUBLISH_TRACKS_MISMATCH\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_OUT_OF_ORDER = 102;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACK_OUT_OF_ORDER\"] = 102] = \"PUBLISH_TRACK_OUT_OF_ORDER\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND\"] = 103] = \"PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_LIVE_ENDED = 104;\n     */ ErrorCode[ErrorCode[\"LIVE_ENDED\"] = 104] = \"LIVE_ENDED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_NOT_FOUND = 200;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_NOT_FOUND\"] = 200] = \"PARTICIPANT_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING_OUT = 201;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MIGRATING_OUT\"] = 201] = \"PARTICIPANT_MIGRATING_OUT\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATION_FAILED = 202;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MIGRATION_FAILED\"] = 202] = \"PARTICIPANT_MIGRATION_FAILED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING = 203;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MIGRATING\"] = 203] = \"PARTICIPANT_MIGRATING\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_RECONNECT_FAILED = 204;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_RECONNECT_FAILED\"] = 204] = \"PARTICIPANT_RECONNECT_FAILED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MEDIA_TRANSPORT_FAILURE\"] = 205] = \"PARTICIPANT_MEDIA_TRANSPORT_FAILURE\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_CALL_NOT_FOUND = 300;\n     */ ErrorCode[ErrorCode[\"CALL_NOT_FOUND\"] = 300] = \"CALL_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_REQUEST_VALIDATION_FAILED = 400;\n     */ ErrorCode[ErrorCode[\"REQUEST_VALIDATION_FAILED\"] = 400] = \"REQUEST_VALIDATION_FAILED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_UNAUTHENTICATED = 401;\n     */ ErrorCode[ErrorCode[\"UNAUTHENTICATED\"] = 401] = \"UNAUTHENTICATED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PERMISSION_DENIED = 403;\n     */ ErrorCode[ErrorCode[\"PERMISSION_DENIED\"] = 403] = \"PERMISSION_DENIED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_TOO_MANY_REQUESTS = 429;\n     */ ErrorCode[ErrorCode[\"TOO_MANY_REQUESTS\"] = 429] = \"TOO_MANY_REQUESTS\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_INTERNAL_SERVER_ERROR = 500;\n     */ ErrorCode[ErrorCode[\"INTERNAL_SERVER_ERROR\"] = 500] = \"INTERNAL_SERVER_ERROR\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_SFU_SHUTTING_DOWN = 600;\n     */ ErrorCode[ErrorCode[\"SFU_SHUTTING_DOWN\"] = 600] = \"SFU_SHUTTING_DOWN\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_SFU_FULL = 700;\n     */ ErrorCode[ErrorCode[\"SFU_FULL\"] = 700] = \"SFU_FULL\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.SdkType\n */ var SdkType;\n(function(SdkType) {\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_UNSPECIFIED = 0;\n     */ SdkType[SdkType[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_REACT = 1;\n     */ SdkType[SdkType[\"REACT\"] = 1] = \"REACT\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_ANGULAR = 2;\n     */ SdkType[SdkType[\"ANGULAR\"] = 2] = \"ANGULAR\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_ANDROID = 3;\n     */ SdkType[SdkType[\"ANDROID\"] = 3] = \"ANDROID\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_IOS = 4;\n     */ SdkType[SdkType[\"IOS\"] = 4] = \"IOS\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_FLUTTER = 5;\n     */ SdkType[SdkType[\"FLUTTER\"] = 5] = \"FLUTTER\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_REACT_NATIVE = 6;\n     */ SdkType[SdkType[\"REACT_NATIVE\"] = 6] = \"REACT_NATIVE\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_UNITY = 7;\n     */ SdkType[SdkType[\"UNITY\"] = 7] = \"UNITY\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_GO = 8;\n     */ SdkType[SdkType[\"GO\"] = 8] = \"GO\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_PLAIN_JAVASCRIPT = 9;\n     */ SdkType[SdkType[\"PLAIN_JAVASCRIPT\"] = 9] = \"PLAIN_JAVASCRIPT\";\n})(SdkType || (SdkType = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackUnpublishReason\n */ var TrackUnpublishReason;\n(function(TrackUnpublishReason) {\n    /**\n     * Default value which is used when the specific reason\n     * for muting the track is not known.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_UNSPECIFIED = 0;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * Represents user muting their tracks.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_USER_MUTED = 1;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"USER_MUTED\"] = 1] = \"USER_MUTED\";\n    /**\n     * Represents muting the track because the permission to\n     * publish the track has been revoked.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_PERMISSION_REVOKED = 2;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"PERMISSION_REVOKED\"] = 2] = \"PERMISSION_REVOKED\";\n    /**\n     * Represents muting the track due to moderation actions.\n     * This is different from permission revoked because the\n     * participant can unmute themselves here whereas in case\n     * of \"permission revoke\" it is not possible until the\n     * call permissions are updated.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_MODERATION = 3;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"MODERATION\"] = 3] = \"MODERATION\";\n})(TrackUnpublishReason || (TrackUnpublishReason = {}));\n/**\n * GoAwayReason represents the reason for the SFU to\n * disconnect the client.\n *\n * @generated from protobuf enum stream.video.sfu.models.GoAwayReason\n */ var GoAwayReason;\n(function(GoAwayReason) {\n    /**\n     * @generated from protobuf enum value: GO_AWAY_REASON_UNSPECIFIED = 0;\n     */ GoAwayReason[GoAwayReason[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: GO_AWAY_REASON_SHUTTING_DOWN = 1;\n     */ GoAwayReason[GoAwayReason[\"SHUTTING_DOWN\"] = 1] = \"SHUTTING_DOWN\";\n    /**\n     * @generated from protobuf enum value: GO_AWAY_REASON_REBALANCE = 2;\n     */ GoAwayReason[GoAwayReason[\"REBALANCE\"] = 2] = \"REBALANCE\";\n})(GoAwayReason || (GoAwayReason = {}));\n/**\n * CallEndedReason represents the reason for the call to end.\n *\n * @generated from protobuf enum stream.video.sfu.models.CallEndedReason\n */ var CallEndedReason;\n(function(CallEndedReason) {\n    /**\n     * @generated from protobuf enum value: CALL_ENDED_REASON_UNSPECIFIED = 0;\n     */ CallEndedReason[CallEndedReason[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: CALL_ENDED_REASON_ENDED = 1;\n     */ CallEndedReason[CallEndedReason[\"ENDED\"] = 1] = \"ENDED\";\n    /**\n     * @generated from protobuf enum value: CALL_ENDED_REASON_LIVE_ENDED = 2;\n     */ CallEndedReason[CallEndedReason[\"LIVE_ENDED\"] = 2] = \"LIVE_ENDED\";\n    /**\n     * @generated from protobuf enum value: CALL_ENDED_REASON_KICKED = 3;\n     */ CallEndedReason[CallEndedReason[\"KICKED\"] = 3] = \"KICKED\";\n    /**\n     * @generated from protobuf enum value: CALL_ENDED_REASON_SESSION_ENDED = 4;\n     */ CallEndedReason[CallEndedReason[\"SESSION_ENDED\"] = 4] = \"SESSION_ENDED\";\n})(CallEndedReason || (CallEndedReason = {}));\n/**\n * WebsocketReconnectStrategy defines the ws strategies available for handling reconnections.\n *\n * @generated from protobuf enum stream.video.sfu.models.WebsocketReconnectStrategy\n */ var WebsocketReconnectStrategy;\n(function(WebsocketReconnectStrategy) {\n    /**\n     * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_UNSPECIFIED = 0;\n     */ WebsocketReconnectStrategy[WebsocketReconnectStrategy[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * Sent after reaching the maximum reconnection attempts, or any other unrecoverable error leading to permanent disconnect.\n     *\n     * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_DISCONNECT = 1;\n     */ WebsocketReconnectStrategy[WebsocketReconnectStrategy[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    /**\n     * SDK should maintaining existing publisher/subscriber pc instances\n     * and establish a new WebSocket connection.\n     *\n     * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_FAST = 2;\n     */ WebsocketReconnectStrategy[WebsocketReconnectStrategy[\"FAST\"] = 2] = \"FAST\";\n    /**\n     * SDK should obtain new credentials from the coordinator, drops existing pc instances, set a new session_id and initializes\n     * a completely new WebSocket connection, ensuring a comprehensive reset.\n     *\n     * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_REJOIN = 3;\n     */ WebsocketReconnectStrategy[WebsocketReconnectStrategy[\"REJOIN\"] = 3] = \"REJOIN\";\n    /**\n     * SDK should migrate to a new SFU instance\n     *\n     * @generated from protobuf enum value: WEBSOCKET_RECONNECT_STRATEGY_MIGRATE = 4;\n     */ WebsocketReconnectStrategy[WebsocketReconnectStrategy[\"MIGRATE\"] = 4] = \"MIGRATE\";\n})(WebsocketReconnectStrategy || (WebsocketReconnectStrategy = {}));\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallState$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.CallState\", [\n            {\n                no: 1,\n                name: \"participants\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Participant\n            },\n            {\n                no: 2,\n                name: \"started_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            },\n            {\n                no: 3,\n                name: \"participant_count\",\n                kind: \"message\",\n                T: ()=>ParticipantCount\n            },\n            {\n                no: 4,\n                name: \"pins\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Pin\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallState\n */ const CallState$1 = new CallState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantCount$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.ParticipantCount\", [\n            {\n                no: 1,\n                name: \"total\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 2,\n                name: \"anonymous\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ParticipantCount\n */ const ParticipantCount = new ParticipantCount$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Pin$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Pin\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Pin\n */ const Pin = new Pin$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Participant$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Participant\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"published_tracks\",\n                kind: \"enum\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"joined_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            },\n            {\n                no: 5,\n                name: \"track_lookup_prefix\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 6,\n                name: \"connection_quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.ConnectionQuality\",\n                        ConnectionQuality,\n                        \"CONNECTION_QUALITY_\"\n                    ]\n            },\n            {\n                no: 7,\n                name: \"is_speaking\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 8,\n                name: \"is_dominant_speaker\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 9,\n                name: \"audio_level\",\n                kind: \"scalar\",\n                T: 2 /*ScalarType.FLOAT*/ \n            },\n            {\n                no: 10,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 11,\n                name: \"image\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 12,\n                name: \"custom\",\n                kind: \"message\",\n                T: ()=>Struct\n            },\n            {\n                no: 13,\n                name: \"roles\",\n                kind: \"scalar\",\n                repeat: 2 /*RepeatType.UNPACKED*/ ,\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Participant\n */ const Participant = new Participant$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StreamQuality$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.StreamQuality\", [\n            {\n                no: 1,\n                name: \"video_quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.VideoQuality\",\n                        VideoQuality,\n                        \"VIDEO_QUALITY_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.StreamQuality\n */ const StreamQuality = new StreamQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoDimension$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.VideoDimension\", [\n            {\n                no: 1,\n                name: \"width\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 2,\n                name: \"height\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoDimension\n */ const VideoDimension = new VideoDimension$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayer$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.VideoLayer\", [\n            {\n                no: 1,\n                name: \"rid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"video_dimension\",\n                kind: \"message\",\n                T: ()=>VideoDimension\n            },\n            {\n                no: 4,\n                name: \"bitrate\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 5,\n                name: \"fps\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 6,\n                name: \"quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.VideoQuality\",\n                        VideoQuality,\n                        \"VIDEO_QUALITY_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoLayer\n */ const VideoLayer = new VideoLayer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Codec$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Codec\", [\n            {\n                no: 1,\n                name: \"payload_type\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 2,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"fmtp_line\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"clock_rate\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 5,\n                name: \"encoding_parameters\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 6,\n                name: \"feedbacks\",\n                kind: \"scalar\",\n                repeat: 2 /*RepeatType.UNPACKED*/ ,\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Codec\n */ const Codec = new Codec$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nlet ICETrickle$Type$1 = class ICETrickle$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.ICETrickle\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"ice_candidate\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n};\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ICETrickle\n */ const ICETrickle$1 = new ICETrickle$Type$1();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackInfo$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.TrackInfo\", [\n            {\n                no: 1,\n                name: \"track_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"track_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 5,\n                name: \"layers\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>VideoLayer\n            },\n            {\n                no: 6,\n                name: \"mid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 7,\n                name: \"dtx\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 8,\n                name: \"stereo\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 9,\n                name: \"red\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 10,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.TrackInfo\n */ const TrackInfo = new TrackInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nlet Error$Type$1 = class Error$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Error\", [\n            {\n                no: 1,\n                name: \"code\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.ErrorCode\",\n                        ErrorCode,\n                        \"ERROR_CODE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"message\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"should_retry\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n};\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Error\n */ const Error$2 = new Error$Type$1();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ClientDetails$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.ClientDetails\", [\n            {\n                no: 1,\n                name: \"sdk\",\n                kind: \"message\",\n                T: ()=>Sdk\n            },\n            {\n                no: 2,\n                name: \"os\",\n                kind: \"message\",\n                T: ()=>OS\n            },\n            {\n                no: 3,\n                name: \"browser\",\n                kind: \"message\",\n                T: ()=>Browser\n            },\n            {\n                no: 4,\n                name: \"device\",\n                kind: \"message\",\n                T: ()=>Device\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ClientDetails\n */ const ClientDetails = new ClientDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Sdk$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Sdk\", [\n            {\n                no: 1,\n                name: \"type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.SdkType\",\n                        SdkType,\n                        \"SDK_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"major\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"minor\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"patch\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Sdk\n */ const Sdk = new Sdk$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass OS$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.OS\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"architecture\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.OS\n */ const OS = new OS$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Browser$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Browser\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Browser\n */ const Browser = new Browser$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Device$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Device\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Device\n */ const Device = new Device$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Call$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Call\", [\n            {\n                no: 1,\n                name: \"type\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"created_by_user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"host_user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 5,\n                name: \"custom\",\n                kind: \"message\",\n                T: ()=>Struct\n            },\n            {\n                no: 6,\n                name: \"created_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            },\n            {\n                no: 7,\n                name: \"updated_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Call\n */ const Call$1 = new Call$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrants$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.CallGrants\", [\n            {\n                no: 1,\n                name: \"can_publish_audio\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 2,\n                name: \"can_publish_video\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 3,\n                name: \"can_screenshare\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallGrants\n */ const CallGrants = new CallGrants$Type();\nvar models = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    Browser: Browser,\n    Call: Call$1,\n    get CallEndedReason () {\n        return CallEndedReason;\n    },\n    CallGrants: CallGrants,\n    CallState: CallState$1,\n    ClientDetails: ClientDetails,\n    Codec: Codec,\n    get ConnectionQuality () {\n        return ConnectionQuality;\n    },\n    Device: Device,\n    Error: Error$2,\n    get ErrorCode () {\n        return ErrorCode;\n    },\n    get GoAwayReason () {\n        return GoAwayReason;\n    },\n    ICETrickle: ICETrickle$1,\n    OS: OS,\n    Participant: Participant,\n    ParticipantCount: ParticipantCount,\n    get PeerType () {\n        return PeerType;\n    },\n    Pin: Pin,\n    Sdk: Sdk,\n    get SdkType () {\n        return SdkType;\n    },\n    StreamQuality: StreamQuality,\n    TrackInfo: TrackInfo,\n    get TrackType () {\n        return TrackType;\n    },\n    get TrackUnpublishReason () {\n        return TrackUnpublishReason;\n    },\n    VideoDimension: VideoDimension,\n    VideoLayer: VideoLayer,\n    get VideoQuality () {\n        return VideoQuality;\n    },\n    get WebsocketReconnectStrategy () {\n        return WebsocketReconnectStrategy;\n    }\n});\n/* eslint-disable */ // @generated by protobuf-ts 2.9.4 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.StartNoiseCancellationRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationRequest\n */ const StartNoiseCancellationRequest = new StartNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StartNoiseCancellationResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.StartNoiseCancellationResponse\", [\n            {\n                no: 1,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StartNoiseCancellationResponse\n */ const StartNoiseCancellationResponse = new StartNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.StopNoiseCancellationRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationRequest\n */ const StopNoiseCancellationRequest = new StopNoiseCancellationRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StopNoiseCancellationResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.StopNoiseCancellationResponse\", [\n            {\n                no: 1,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.StopNoiseCancellationResponse\n */ const StopNoiseCancellationResponse = new StopNoiseCancellationResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SendStatsRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"subscriber_stats\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"publisher_stats\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"webrtc_version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 5,\n                name: \"sdk\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 6,\n                name: \"sdk_version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsRequest\n */ const SendStatsRequest = new SendStatsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendStatsResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SendStatsResponse\", [\n            {\n                no: 1,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendStatsResponse\n */ const SendStatsResponse = new SendStatsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.ICERestartRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartRequest\n */ const ICERestartRequest = new ICERestartRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.ICERestartResponse\", [\n            {\n                no: 1,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartResponse\n */ const ICERestartResponse = new ICERestartResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateMuteStatesRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"mute_states\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackMuteState\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */ const UpdateMuteStatesRequest = new UpdateMuteStatesRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateMuteStatesResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */ const UpdateMuteStatesResponse = new UpdateMuteStatesResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackMuteState$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.TrackMuteState\", [\n            {\n                no: 1,\n                name: \"track_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackMuteState\n */ const TrackMuteState = new TrackMuteState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMuteChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.AudioMuteChanged\", [\n            {\n                no: 1,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.AudioMuteChanged\n */ new AudioMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMuteChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.VideoMuteChanged\", [\n            {\n                no: 2,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.VideoMuteChanged\n */ new VideoMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateSubscriptionsRequest\", [\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackSubscriptionDetails\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */ const UpdateSubscriptionsRequest = new UpdateSubscriptionsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateSubscriptionsResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */ const UpdateSubscriptionsResponse = new UpdateSubscriptionsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackSubscriptionDetails$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.TrackSubscriptionDetails\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"track_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"dimension\",\n                kind: \"message\",\n                T: ()=>VideoDimension\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */ const TrackSubscriptionDetails = new TrackSubscriptionDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SendAnswerRequest\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerRequest\n */ const SendAnswerRequest = new SendAnswerRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SendAnswerResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerResponse\n */ const SendAnswerResponse = new SendAnswerResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickleResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.ICETrickleResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICETrickleResponse\n */ const ICETrickleResponse = new ICETrickleResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SetPublisherRequest\", [\n            {\n                no: 1,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackInfo\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherRequest\n */ const SetPublisherRequest = new SetPublisherRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SetPublisherResponse\", [\n            {\n                no: 1,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"ice_restart\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherResponse\n */ const SetPublisherResponse = new SetPublisherResponse$Type();\n/**\n * @generated ServiceType for protobuf service stream.video.sfu.signal.SignalServer\n */ const SignalServer = new _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_10__.ServiceType(\"stream.video.sfu.signal.SignalServer\", [\n    {\n        name: \"SetPublisher\",\n        options: {},\n        I: SetPublisherRequest,\n        O: SetPublisherResponse\n    },\n    {\n        name: \"SendAnswer\",\n        options: {},\n        I: SendAnswerRequest,\n        O: SendAnswerResponse\n    },\n    {\n        name: \"IceTrickle\",\n        options: {},\n        I: ICETrickle$1,\n        O: ICETrickleResponse\n    },\n    {\n        name: \"UpdateSubscriptions\",\n        options: {},\n        I: UpdateSubscriptionsRequest,\n        O: UpdateSubscriptionsResponse\n    },\n    {\n        name: \"UpdateMuteStates\",\n        options: {},\n        I: UpdateMuteStatesRequest,\n        O: UpdateMuteStatesResponse\n    },\n    {\n        name: \"IceRestart\",\n        options: {},\n        I: ICERestartRequest,\n        O: ICERestartResponse\n    },\n    {\n        name: \"SendStats\",\n        options: {},\n        I: SendStatsRequest,\n        O: SendStatsResponse\n    },\n    {\n        name: \"StartNoiseCancellation\",\n        options: {},\n        I: StartNoiseCancellationRequest,\n        O: StartNoiseCancellationResponse\n    },\n    {\n        name: \"StopNoiseCancellation\",\n        options: {},\n        I: StopNoiseCancellationRequest,\n        O: StopNoiseCancellationResponse\n    }\n]);\n/* eslint-disable */ // @generated by protobuf-ts 2.9.4 with parameter long_type_string,client_generic,server_none,eslint_disable,optimize_code_size\n// @generated from protobuf file \"video/sfu/event/events.proto\" (package \"stream.video.sfu.event\", syntax proto3)\n// tslint:disable\n/**\n * @generated from protobuf enum stream.video.sfu.event.VideoLayerSetting.Priority\n */ var VideoLayerSetting_Priority;\n(function(VideoLayerSetting_Priority) {\n    /**\n     * @generated from protobuf enum value: PRIORITY_HIGH_UNSPECIFIED = 0;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"HIGH_UNSPECIFIED\"] = 0] = \"HIGH_UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: PRIORITY_LOW = 1;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"LOW\"] = 1] = \"LOW\";\n    /**\n     * @generated from protobuf enum value: PRIORITY_MEDIUM = 2;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"MEDIUM\"] = 2] = \"MEDIUM\";\n    /**\n     * @generated from protobuf enum value: PRIORITY_VERY_LOW = 3;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"VERY_LOW\"] = 3] = \"VERY_LOW\";\n})(VideoLayerSetting_Priority || (VideoLayerSetting_Priority = {}));\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuEvent$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.SfuEvent\", [\n            {\n                no: 1,\n                name: \"subscriber_offer\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>SubscriberOffer\n            },\n            {\n                no: 2,\n                name: \"publisher_answer\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>PublisherAnswer\n            },\n            {\n                no: 3,\n                name: \"connection_quality_changed\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ConnectionQualityChanged\n            },\n            {\n                no: 4,\n                name: \"audio_level_changed\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>AudioLevelChanged\n            },\n            {\n                no: 5,\n                name: \"ice_trickle\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ICETrickle$1\n            },\n            {\n                no: 6,\n                name: \"change_publish_quality\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ChangePublishQuality\n            },\n            {\n                no: 10,\n                name: \"participant_joined\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ParticipantJoined\n            },\n            {\n                no: 11,\n                name: \"participant_left\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ParticipantLeft\n            },\n            {\n                no: 12,\n                name: \"dominant_speaker_changed\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>DominantSpeakerChanged\n            },\n            {\n                no: 13,\n                name: \"join_response\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>JoinResponse\n            },\n            {\n                no: 14,\n                name: \"health_check_response\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>HealthCheckResponse\n            },\n            {\n                no: 16,\n                name: \"track_published\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>TrackPublished\n            },\n            {\n                no: 17,\n                name: \"track_unpublished\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>TrackUnpublished\n            },\n            {\n                no: 18,\n                name: \"error\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>Error$1\n            },\n            {\n                no: 19,\n                name: \"call_grants_updated\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>CallGrantsUpdated\n            },\n            {\n                no: 20,\n                name: \"go_away\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>GoAway\n            },\n            {\n                no: 21,\n                name: \"ice_restart\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ICERestart\n            },\n            {\n                no: 22,\n                name: \"pins_updated\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>PinsChanged\n            },\n            {\n                no: 23,\n                name: \"call_ended\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>CallEnded\n            },\n            {\n                no: 24,\n                name: \"participant_updated\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ParticipantUpdated\n            },\n            {\n                no: 25,\n                name: \"participant_migration_complete\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ParticipantMigrationComplete\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuEvent\n */ const SfuEvent = new SfuEvent$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantMigrationComplete$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ParticipantMigrationComplete\", []);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantMigrationComplete\n */ const ParticipantMigrationComplete = new ParticipantMigrationComplete$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PinsChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.PinsChanged\", [\n            {\n                no: 1,\n                name: \"pins\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Pin\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PinsChanged\n */ const PinsChanged = new PinsChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.Error\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            },\n            {\n                no: 5,\n                name: \"reconnect_strategy\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.WebsocketReconnectStrategy\",\n                        WebsocketReconnectStrategy,\n                        \"WEBSOCKET_RECONNECT_STRATEGY_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Error\n */ const Error$1 = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ICETrickle\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"ice_candidate\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICETrickle\n */ const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestart$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ICERestart\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICERestart\n */ const ICERestart = new ICERestart$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.SfuRequest\", [\n            {\n                no: 1,\n                name: \"join_request\",\n                kind: \"message\",\n                oneof: \"requestPayload\",\n                T: ()=>JoinRequest\n            },\n            {\n                no: 2,\n                name: \"health_check_request\",\n                kind: \"message\",\n                oneof: \"requestPayload\",\n                T: ()=>HealthCheckRequest\n            },\n            {\n                no: 3,\n                name: \"leave_call_request\",\n                kind: \"message\",\n                oneof: \"requestPayload\",\n                T: ()=>LeaveCallRequest\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuRequest\n */ const SfuRequest = new SfuRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass LeaveCallRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.LeaveCallRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"reason\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.LeaveCallRequest\n */ const LeaveCallRequest = new LeaveCallRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.HealthCheckRequest\", []);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckRequest\n */ const HealthCheckRequest = new HealthCheckRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.HealthCheckResponse\", [\n            {\n                no: 1,\n                name: \"participant_count\",\n                kind: \"message\",\n                T: ()=>ParticipantCount\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckResponse\n */ const HealthCheckResponse = new HealthCheckResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackPublished$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.TrackPublished\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackPublished\n */ const TrackPublished = new TrackPublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackUnpublished$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.TrackUnpublished\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"cause\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackUnpublishReason\",\n                        TrackUnpublishReason,\n                        \"TRACK_UNPUBLISH_REASON_\"\n                    ]\n            },\n            {\n                no: 5,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackUnpublished\n */ const TrackUnpublished = new TrackUnpublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.JoinRequest\", [\n            {\n                no: 1,\n                name: \"token\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"subscriber_sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"client_details\",\n                kind: \"message\",\n                T: ()=>ClientDetails\n            },\n            {\n                no: 5,\n                name: \"migration\",\n                kind: \"message\",\n                T: ()=>Migration\n            },\n            {\n                no: 6,\n                name: \"fast_reconnect\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 7,\n                name: \"reconnect_details\",\n                kind: \"message\",\n                T: ()=>ReconnectDetails\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinRequest\n */ const JoinRequest = new JoinRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ReconnectDetails$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ReconnectDetails\", [\n            {\n                no: 1,\n                name: \"strategy\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.WebsocketReconnectStrategy\",\n                        WebsocketReconnectStrategy,\n                        \"WEBSOCKET_RECONNECT_STRATEGY_\"\n                    ]\n            },\n            {\n                no: 3,\n                name: \"announced_tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackInfo\n            },\n            {\n                no: 4,\n                name: \"subscriptions\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackSubscriptionDetails\n            },\n            {\n                no: 5,\n                name: \"reconnect_attempt\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 6,\n                name: \"from_sfu_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 7,\n                name: \"previous_session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ReconnectDetails\n */ const ReconnectDetails = new ReconnectDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Migration$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.Migration\", [\n            {\n                no: 1,\n                name: \"from_sfu_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"announced_tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackInfo\n            },\n            {\n                no: 3,\n                name: \"subscriptions\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackSubscriptionDetails\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Migration\n */ const Migration = new Migration$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.JoinResponse\", [\n            {\n                no: 1,\n                name: \"call_state\",\n                kind: \"message\",\n                T: ()=>CallState$1\n            },\n            {\n                no: 2,\n                name: \"reconnected\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 3,\n                name: \"fast_reconnect_deadline_seconds\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinResponse\n */ const JoinResponse = new JoinResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantJoined$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ParticipantJoined\", [\n            {\n                no: 1,\n                name: \"call_cid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantJoined\n */ const ParticipantJoined = new ParticipantJoined$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantLeft$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ParticipantLeft\", [\n            {\n                no: 1,\n                name: \"call_cid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantLeft\n */ const ParticipantLeft = new ParticipantLeft$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantUpdated$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ParticipantUpdated\", [\n            {\n                no: 1,\n                name: \"call_cid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantUpdated\n */ const ParticipantUpdated = new ParticipantUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscriberOffer$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.SubscriberOffer\", [\n            {\n                no: 1,\n                name: \"ice_restart\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 2,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SubscriberOffer\n */ const SubscriberOffer = new SubscriberOffer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublisherAnswer$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.PublisherAnswer\", [\n            {\n                no: 1,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PublisherAnswer\n */ const PublisherAnswer = new PublisherAnswer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ConnectionQualityChanged\", [\n            {\n                no: 1,\n                name: \"connection_quality_updates\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>ConnectionQualityInfo\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */ const ConnectionQualityChanged = new ConnectionQualityChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityInfo$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ConnectionQualityInfo\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"connection_quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.ConnectionQuality\",\n                        ConnectionQuality,\n                        \"CONNECTION_QUALITY_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */ const ConnectionQualityInfo = new ConnectionQualityInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass DominantSpeakerChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.DominantSpeakerChanged\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */ const DominantSpeakerChanged = new DominantSpeakerChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevel$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioLevel\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"level\",\n                kind: \"scalar\",\n                T: 2 /*ScalarType.FLOAT*/ \n            },\n            {\n                no: 4,\n                name: \"is_speaking\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevel\n */ const AudioLevel = new AudioLevel$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevelChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioLevelChanged\", [\n            {\n                no: 1,\n                name: \"audio_levels\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>AudioLevel\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevelChanged\n */ const AudioLevelChanged = new AudioLevelChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMediaRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioMediaRequest\", [\n            {\n                no: 1,\n                name: \"channel_count\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioMediaRequest\n */ const AudioMediaRequest = new AudioMediaRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioSender$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioSender\", [\n            {\n                no: 1,\n                name: \"media_request\",\n                kind: \"message\",\n                T: ()=>AudioMediaRequest\n            },\n            {\n                no: 2,\n                name: \"codec\",\n                kind: \"message\",\n                T: ()=>Codec\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioSender\n */ const AudioSender = new AudioSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMediaRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.VideoMediaRequest\", [\n            {\n                no: 1,\n                name: \"ideal_height\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            },\n            {\n                no: 2,\n                name: \"ideal_width\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            },\n            {\n                no: 3,\n                name: \"ideal_frame_rate\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoMediaRequest\n */ const VideoMediaRequest = new VideoMediaRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayerSetting$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.VideoLayerSetting\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"active\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 3,\n                name: \"max_bitrate\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            },\n            {\n                no: 4,\n                name: \"scale_resolution_down_by\",\n                kind: \"scalar\",\n                T: 2 /*ScalarType.FLOAT*/ \n            },\n            {\n                no: 5,\n                name: \"priority\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.event.VideoLayerSetting.Priority\",\n                        VideoLayerSetting_Priority,\n                        \"PRIORITY_\"\n                    ]\n            },\n            {\n                no: 6,\n                name: \"codec\",\n                kind: \"message\",\n                T: ()=>Codec\n            },\n            {\n                no: 7,\n                name: \"max_framerate\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoLayerSetting\n */ const VideoLayerSetting = new VideoLayerSetting$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoSender$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.VideoSender\", [\n            {\n                no: 1,\n                name: \"media_request\",\n                kind: \"message\",\n                T: ()=>VideoMediaRequest\n            },\n            {\n                no: 2,\n                name: \"codec\",\n                kind: \"message\",\n                T: ()=>Codec\n            },\n            {\n                no: 3,\n                name: \"layers\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>VideoLayerSetting\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoSender\n */ const VideoSender = new VideoSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishQuality$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ChangePublishQuality\", [\n            {\n                no: 1,\n                name: \"audio_senders\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>AudioSender\n            },\n            {\n                no: 2,\n                name: \"video_senders\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>VideoSender\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishQuality\n */ const ChangePublishQuality = new ChangePublishQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrantsUpdated$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.CallGrantsUpdated\", [\n            {\n                no: 1,\n                name: \"current_grants\",\n                kind: \"message\",\n                T: ()=>CallGrants\n            },\n            {\n                no: 2,\n                name: \"message\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallGrantsUpdated\n */ const CallGrantsUpdated = new CallGrantsUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass GoAway$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.GoAway\", [\n            {\n                no: 1,\n                name: \"reason\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.GoAwayReason\",\n                        GoAwayReason,\n                        \"GO_AWAY_REASON_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.GoAway\n */ const GoAway = new GoAway$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallEnded$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_7__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.CallEnded\", [\n            {\n                no: 1,\n                name: \"reason\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.CallEndedReason\",\n                        CallEndedReason,\n                        \"CALL_ENDED_REASON_\"\n                    ]\n            }\n        ]);\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallEnded\n */ const CallEnded = new CallEnded$Type();\nvar events = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    AudioLevel: AudioLevel,\n    AudioLevelChanged: AudioLevelChanged,\n    AudioMediaRequest: AudioMediaRequest,\n    AudioSender: AudioSender,\n    CallEnded: CallEnded,\n    CallGrantsUpdated: CallGrantsUpdated,\n    ChangePublishQuality: ChangePublishQuality,\n    ConnectionQualityChanged: ConnectionQualityChanged,\n    ConnectionQualityInfo: ConnectionQualityInfo,\n    DominantSpeakerChanged: DominantSpeakerChanged,\n    Error: Error$1,\n    GoAway: GoAway,\n    HealthCheckRequest: HealthCheckRequest,\n    HealthCheckResponse: HealthCheckResponse,\n    ICERestart: ICERestart,\n    ICETrickle: ICETrickle,\n    JoinRequest: JoinRequest,\n    JoinResponse: JoinResponse,\n    LeaveCallRequest: LeaveCallRequest,\n    Migration: Migration,\n    ParticipantJoined: ParticipantJoined,\n    ParticipantLeft: ParticipantLeft,\n    ParticipantMigrationComplete: ParticipantMigrationComplete,\n    ParticipantUpdated: ParticipantUpdated,\n    PinsChanged: PinsChanged,\n    PublisherAnswer: PublisherAnswer,\n    ReconnectDetails: ReconnectDetails,\n    SfuEvent: SfuEvent,\n    SfuRequest: SfuRequest,\n    SubscriberOffer: SubscriberOffer,\n    TrackPublished: TrackPublished,\n    TrackUnpublished: TrackUnpublished,\n    VideoLayerSetting: VideoLayerSetting,\n    get VideoLayerSetting_Priority () {\n        return VideoLayerSetting_Priority;\n    },\n    VideoMediaRequest: VideoMediaRequest,\n    VideoSender: VideoSender\n});\nvar VisibilityState;\n(function(VisibilityState) {\n    VisibilityState[\"UNKNOWN\"] = \"UNKNOWN\";\n    VisibilityState[\"VISIBLE\"] = \"VISIBLE\";\n    VisibilityState[\"INVISIBLE\"] = \"INVISIBLE\";\n})(VisibilityState || (VisibilityState = {}));\nvar DebounceType;\n(function(DebounceType) {\n    DebounceType[DebounceType[\"IMMEDIATE\"] = 20] = \"IMMEDIATE\";\n    DebounceType[DebounceType[\"FAST\"] = 100] = \"FAST\";\n    DebounceType[DebounceType[\"MEDIUM\"] = 600] = \"MEDIUM\";\n    DebounceType[DebounceType[\"SLOW\"] = 1200] = \"SLOW\";\n})(DebounceType || (DebounceType = {}));\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */ class SignalServerClient {\n    constructor(_transport){\n        this._transport = _transport;\n        this.typeName = SignalServer.typeName;\n        this.methods = SignalServer.methods;\n        this.options = SignalServer.options;\n    }\n    /**\n     * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n     *\n     * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n     */ setPublisher(input, options) {\n        const method = this.methods[0], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * answer is sent by the client to the SFU after receiving a subscriber_offer.\n     *\n     * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n     */ sendAnswer(input, options) {\n        const method = this.methods[1], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * SendICECandidate sends an ICE candidate to the client\n     *\n     * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n     */ iceTrickle(input, options) {\n        const method = this.methods[2], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n     * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n     *\n     * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n     */ updateSubscriptions(input, options) {\n        const method = this.methods[3], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n     */ updateMuteStates(input, options) {\n        const method = this.methods[4], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n     */ iceRestart(input, options) {\n        const method = this.methods[5], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: SendStats(stream.video.sfu.signal.SendStatsRequest) returns (stream.video.sfu.signal.SendStatsResponse);\n     */ sendStats(input, options) {\n        const method = this.methods[6], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: StartNoiseCancellation(stream.video.sfu.signal.StartNoiseCancellationRequest) returns (stream.video.sfu.signal.StartNoiseCancellationResponse);\n     */ startNoiseCancellation(input, options) {\n        const method = this.methods[7], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: StopNoiseCancellation(stream.video.sfu.signal.StopNoiseCancellationRequest) returns (stream.video.sfu.signal.StopNoiseCancellationResponse);\n     */ stopNoiseCancellation(input, options) {\n        const method = this.methods[8], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_11__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n}\nconst defaultOptions = {\n    baseUrl: \"\",\n    sendJson: true,\n    timeout: 5 * 1000,\n    jsonOptions: {\n        ignoreUnknownFields: true\n    }\n};\nconst withHeaders = (headers)=>{\n    return {\n        interceptUnary (next, method, input, options) {\n            options.meta = {\n                ...options.meta,\n                ...headers\n            };\n            return next(method, input, options);\n        }\n    };\n};\nconst withRequestLogger = (logger, level)=>{\n    return {\n        interceptUnary: (next, method, input, options)=>{\n            logger(level, `Calling SFU RPC method ${method.name}`, {\n                input,\n                options\n            });\n            return next(method, input, options);\n        }\n    };\n};\n/**\n * Creates new SignalServerClient instance.\n *\n * @param options the twirp options.\n */ const createSignalClient = (options)=>{\n    const transport = new _protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_12__.TwirpFetchTransport({\n        ...defaultOptions,\n        ...options\n    });\n    return new SignalServerClient(transport);\n};\nconst sleep = (m)=>new Promise((r)=>setTimeout(r, m));\nfunction isFunction(value) {\n    return value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\n}\n/**\n * A map of known error codes.\n */ const KnownCodes = {\n    TOKEN_EXPIRED: 40,\n    WS_CLOSED_SUCCESS: 1000,\n    WS_CLOSED_ABRUPTLY: 1006,\n    WS_POLICY_VIOLATION: 1008\n};\n/**\n * retryInterval - A retry interval which increases acc to number of failures\n *\n * @return {number} Duration to wait in milliseconds\n */ function retryInterval(numberOfFailures) {\n    // try to reconnect in 0.25-5 seconds (random to spread out the load from failures)\n    const max = Math.min(500 + numberOfFailures * 2000, 5000);\n    const min = Math.min(Math.max(250, (numberOfFailures - 1) * 2000), 5000);\n    return Math.floor(Math.random() * (max - min) + min);\n}\nfunction randomId() {\n    return generateUUIDv4();\n}\nfunction hex(bytes) {\n    let s = \"\";\n    for(let i = 0; i < bytes.length; i++){\n        s += bytes[i].toString(16).padStart(2, \"0\");\n    }\n    return s;\n}\n// https://tools.ietf.org/html/rfc4122\nfunction generateUUIDv4() {\n    const bytes = getRandomBytes(16);\n    bytes[6] = bytes[6] & 0x0f | 0x40; // version\n    bytes[8] = bytes[8] & 0xbf | 0x80; // variant\n    return hex(bytes.subarray(0, 4)) + \"-\" + hex(bytes.subarray(4, 6)) + \"-\" + hex(bytes.subarray(6, 8)) + \"-\" + hex(bytes.subarray(8, 10)) + \"-\" + hex(bytes.subarray(10, 16));\n}\nfunction getRandomValuesWithMathRandom(bytes) {\n    const max = Math.pow(2, 8 * bytes.byteLength / bytes.length);\n    for(let i = 0; i < bytes.length; i++){\n        bytes[i] = Math.random() * max;\n    }\n}\nconst getRandomValues = (()=>{\n    if (typeof crypto !== \"undefined\" && typeof crypto?.getRandomValues !== \"undefined\") {\n        return crypto.getRandomValues.bind(crypto);\n    } else if (typeof msCrypto !== \"undefined\") {\n        return msCrypto.getRandomValues.bind(msCrypto);\n    } else {\n        return getRandomValuesWithMathRandom;\n    }\n})();\nfunction getRandomBytes(length) {\n    const bytes = new Uint8Array(length);\n    getRandomValues(bytes);\n    return bytes;\n}\nfunction convertErrorToJson(err) {\n    const jsonObj = {};\n    if (!err) return jsonObj;\n    try {\n        Object.getOwnPropertyNames(err).forEach((key)=>{\n            jsonObj[key] = Object.getOwnPropertyDescriptor(err, key);\n        });\n    } catch (_) {\n        return {\n            error: \"failed to serialize the error\"\n        };\n    }\n    return jsonObj;\n}\n/**\n * Informs if a promise is yet to be resolved or rejected\n */ async function isPromisePending(promise) {\n    const emptyObj = {};\n    return Promise.race([\n        promise,\n        emptyObj\n    ]).then((value)=>value === emptyObj ? true : false, ()=>false);\n}\n/**\n * isOnline safely return the navigator.online value for browser env\n * if navigator is not in global object, it always return true\n */ function isOnline(logger) {\n    const nav = typeof navigator !== \"undefined\" ? navigator :  false ? 0 : undefined;\n    if (!nav) {\n        logger(\"warn\", \"isOnline failed to access window.navigator and assume browser is online\");\n        return true;\n    }\n    // RN navigator has undefined for onLine\n    if (typeof nav.onLine !== \"boolean\") {\n        return true;\n    }\n    return nav.onLine;\n}\n/**\n * listenForConnectionChanges - Adds an event listener fired on browser going online or offline\n */ function addConnectionEventListeners(cb) {\n    if (false) {}\n}\nfunction removeConnectionEventListeners(cb) {\n    if (false) {}\n}\n/**\n * Checks whether we are using React Native\n */ const isReactNative = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return navigator.product?.toLowerCase() === \"reactnative\";\n};\n// log levels, sorted by verbosity\nconst logLevels = Object.freeze({\n    trace: 0,\n    debug: 1,\n    info: 2,\n    warn: 3,\n    error: 4\n});\nlet logger$1;\nlet level = \"info\";\nconst logToConsole = (logLevel, message, ...args)=>{\n    let logMethod;\n    switch(logLevel){\n        case \"error\":\n            if (isReactNative()) {\n                message = `ERROR: ${message}`;\n                logMethod = console.info;\n                break;\n            }\n            logMethod = console.error;\n            break;\n        case \"warn\":\n            if (isReactNative()) {\n                message = `WARN: ${message}`;\n                logMethod = console.info;\n                break;\n            }\n            logMethod = console.warn;\n            break;\n        case \"info\":\n            logMethod = console.info;\n            break;\n        case \"trace\":\n            logMethod = console.trace;\n            break;\n        default:\n            logMethod = console.log;\n            break;\n    }\n    logMethod(message, ...args);\n};\nconst setLogger = (l, lvl)=>{\n    logger$1 = l;\n    if (lvl) {\n        setLogLevel(lvl);\n    }\n};\nconst setLogLevel = (l)=>{\n    level = l;\n};\nconst getLogLevel = ()=>level;\nconst getLogger = (withTags)=>{\n    const loggerMethod = logger$1 || logToConsole;\n    const tags = (withTags || []).filter(Boolean).join(\":\");\n    const result = (logLevel, message, ...args)=>{\n        if (logLevels[logLevel] >= logLevels[level]) {\n            loggerMethod(logLevel, `[${tags}]: ${message}`, ...args);\n        }\n    };\n    return result;\n};\n/**\n * Creates a closure which wraps the given RPC call and retries invoking\n * the RPC until it succeeds or the maximum number of retries is reached.\n *\n * For each retry, there would be a delay to avoid request bursts toward the SFU.\n *\n * @param rpc the closure around the RPC call to execute.\n * @param signal the signal to abort the RPC call and retries loop.\n */ const retryable = async (rpc, signal)=>{\n    let attempt = 0;\n    let result = undefined;\n    do {\n        if (attempt > 0) await sleep(retryInterval(attempt));\n        try {\n            result = await rpc();\n        } catch (err) {\n            const isRequestCancelled = err instanceof _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_13__.RpcError && err.code === _protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_14__.TwirpErrorCode[_protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_14__.TwirpErrorCode.cancelled];\n            const isAborted = signal?.aborted ?? false;\n            if (isRequestCancelled || isAborted) throw err;\n            getLogger([\n                \"sfu-client\",\n                \"rpc\"\n            ])(\"debug\", `rpc failed (${attempt})`, err);\n            attempt++;\n        }\n    }while (!result || result.response.error?.shouldRetry);\n    return result;\n};\nconst version = \"1.7.3\";\nconst [major, minor, patch] = version.split(\".\");\nlet sdkInfo = {\n    type: SdkType.PLAIN_JAVASCRIPT,\n    major,\n    minor,\n    patch\n};\nlet osInfo;\nlet deviceInfo;\nlet webRtcInfo;\nconst setSdkInfo = (info)=>{\n    sdkInfo = info;\n};\nconst getSdkInfo = ()=>{\n    return sdkInfo;\n};\nconst setOSInfo = (info)=>{\n    osInfo = info;\n};\nconst getOSInfo = ()=>{\n    return osInfo;\n};\nconst setDeviceInfo = (info)=>{\n    deviceInfo = info;\n};\nconst getDeviceInfo = ()=>{\n    return deviceInfo;\n};\nconst getWebRTCInfo = ()=>{\n    return webRtcInfo;\n};\nconst setWebRTCInfo = (info)=>{\n    webRtcInfo = info;\n};\nconst getClientDetails = ()=>{\n    if (isReactNative()) {\n        // Since RN doesn't support web, sharing browser info is not required\n        return {\n            sdk: getSdkInfo(),\n            os: getOSInfo(),\n            device: getDeviceInfo()\n        };\n    }\n    const userAgent = new ua_parser_js__WEBPACK_IMPORTED_MODULE_2__.UAParser(navigator.userAgent);\n    const { browser, os, device, cpu } = userAgent.getResult();\n    return {\n        sdk: getSdkInfo(),\n        browser: {\n            name: browser.name || navigator.userAgent,\n            version: browser.version || \"\"\n        },\n        os: {\n            name: os.name || \"\",\n            version: os.version || \"\",\n            architecture: cpu.architecture || \"\"\n        },\n        device: {\n            name: [\n                device.vendor,\n                device.model,\n                device.type\n            ].filter(Boolean).join(\" \"),\n            version: \"\"\n        }\n    };\n};\n/**\n * Returns back a list of sorted codecs, with the preferred codec first.\n *\n * @param kind the kind of codec to get.\n * @param preferredCodec the codec to prioritize (vp8, h264, vp9, av1...).\n * @param codecToRemove the codec to exclude from the list.\n */ const getPreferredCodecs = (kind, preferredCodec, codecToRemove)=>{\n    if (!(\"getCapabilities\" in RTCRtpReceiver)) return;\n    const capabilities = RTCRtpReceiver.getCapabilities(kind);\n    if (!capabilities) return;\n    const preferred = [];\n    const partiallyPreferred = [];\n    const unpreferred = [];\n    const preferredCodecMimeType = `${kind}/${preferredCodec.toLowerCase()}`;\n    const codecToRemoveMimeType = codecToRemove && `${kind}/${codecToRemove.toLowerCase()}`;\n    for (const codec of capabilities.codecs){\n        const codecMimeType = codec.mimeType.toLowerCase();\n        const shouldRemoveCodec = codecMimeType === codecToRemoveMimeType;\n        if (shouldRemoveCodec) continue; // skip this codec\n        const isPreferredCodec = codecMimeType === preferredCodecMimeType;\n        if (!isPreferredCodec) {\n            unpreferred.push(codec);\n            continue;\n        }\n        // h264 is a special case, we want to prioritize the baseline codec with\n        // profile-level-id is 42e01f and packetization-mode=0 for maximum\n        // cross-browser compatibility.\n        // this branch covers the other cases, such as vp8.\n        if (codecMimeType !== \"video/h264\") {\n            preferred.push(codec);\n            continue;\n        }\n        const sdpFmtpLine = codec.sdpFmtpLine;\n        if (!sdpFmtpLine || !sdpFmtpLine.includes(\"profile-level-id=42e01f\")) {\n            // this is not the baseline h264 codec, prioritize it lower\n            partiallyPreferred.push(codec);\n            continue;\n        }\n        // packetization-mode mode is optional; when not present it defaults to 0:\n        // https://datatracker.ietf.org/doc/html/rfc6184#section-6.2\n        if (sdpFmtpLine.includes(\"packetization-mode=0\") || !sdpFmtpLine.includes(\"packetization-mode\")) {\n            preferred.unshift(codec);\n        } else {\n            preferred.push(codec);\n        }\n    }\n    // return a sorted list of codecs, with the preferred codecs first\n    return [\n        ...preferred,\n        ...partiallyPreferred,\n        ...unpreferred\n    ];\n};\n/**\n * Returns a generic SDP for the given direction.\n * We use this SDP to send it as part of our JoinRequest so that the SFU\n * can use it to determine client's codec capabilities.\n *\n * @param direction the direction of the transceiver.\n */ const getGenericSdp = async (direction)=>{\n    const tempPc = new RTCPeerConnection();\n    tempPc.addTransceiver(\"video\", {\n        direction\n    });\n    tempPc.addTransceiver(\"audio\", {\n        direction\n    });\n    const offer = await tempPc.createOffer();\n    const sdp = offer.sdp ?? \"\";\n    tempPc.getTransceivers().forEach((t)=>{\n        t.stop?.();\n    });\n    tempPc.close();\n    return sdp;\n};\n/**\n * Returns the optimal codec for RN.\n */ const getRNOptimalCodec = ()=>{\n    const osName = getOSInfo()?.name.toLowerCase();\n    // in ipads it was noticed that if vp8 codec is used\n    // then the bytes sent is 0 in the outbound-rtp\n    // so we are forcing h264 codec for ipads\n    if (osName === \"ipados\") return \"h264\";\n    if (osName === \"android\") return \"vp8\";\n    return undefined;\n};\nconst sfuEventKinds = {\n    subscriberOffer: undefined,\n    publisherAnswer: undefined,\n    connectionQualityChanged: undefined,\n    audioLevelChanged: undefined,\n    iceTrickle: undefined,\n    changePublishQuality: undefined,\n    participantJoined: undefined,\n    participantLeft: undefined,\n    dominantSpeakerChanged: undefined,\n    joinResponse: undefined,\n    healthCheckResponse: undefined,\n    trackPublished: undefined,\n    trackUnpublished: undefined,\n    error: undefined,\n    callGrantsUpdated: undefined,\n    goAway: undefined,\n    iceRestart: undefined,\n    pinsUpdated: undefined,\n    callEnded: undefined,\n    participantUpdated: undefined,\n    participantMigrationComplete: undefined\n};\nconst isSfuEvent = (eventName)=>{\n    return Object.prototype.hasOwnProperty.call(sfuEventKinds, eventName);\n};\nclass Dispatcher {\n    constructor(){\n        this.logger = getLogger([\n            \"Dispatcher\"\n        ]);\n        this.subscribers = {};\n        this.dispatch = (message, logTag = \"0\")=>{\n            const eventKind = message.eventPayload.oneofKind;\n            if (!eventKind) return;\n            const payload = message.eventPayload[eventKind];\n            this.logger(\"debug\", `Dispatching ${eventKind}, tag=${logTag}`, payload);\n            const listeners = this.subscribers[eventKind];\n            if (!listeners) return;\n            for (const fn of listeners){\n                try {\n                    fn(payload);\n                } catch (e) {\n                    this.logger(\"warn\", \"Listener failed with error\", e);\n                }\n            }\n        };\n        this.on = (eventName, fn)=>{\n            var _a;\n            ((_a = this.subscribers)[eventName] ?? (_a[eventName] = [])).push(fn);\n            return ()=>{\n                this.off(eventName, fn);\n            };\n        };\n        this.off = (eventName, fn)=>{\n            this.subscribers[eventName] = (this.subscribers[eventName] || []).filter((f)=>f !== fn);\n        };\n        this.offAll = (eventName)=>{\n            if (eventName) {\n                this.subscribers[eventName] = [];\n            } else {\n                this.subscribers = {};\n            }\n        };\n    }\n}\n/**\n * A buffer for ICE Candidates. Used for ICE Trickle:\n * - https://bloggeek.me/webrtcglossary/trickle-ice/\n */ class IceTrickleBuffer {\n    constructor(){\n        this.subscriberCandidates = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_15__.ReplaySubject();\n        this.publisherCandidates = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_15__.ReplaySubject();\n        this.push = (iceTrickle)=>{\n            if (iceTrickle.peerType === PeerType.SUBSCRIBER) {\n                this.subscriberCandidates.next(iceTrickle);\n            } else if (iceTrickle.peerType === PeerType.PUBLISHER_UNSPECIFIED) {\n                this.publisherCandidates.next(iceTrickle);\n            } else {\n                const logger = getLogger([\n                    \"sfu-client\"\n                ]);\n                logger(\"warn\", `ICETrickle, Unknown peer type`, iceTrickle);\n            }\n        };\n    }\n}\nfunction getIceCandidate(candidate) {\n    if (!candidate.usernameFragment) {\n        // react-native-webrtc doesn't include usernameFragment in the candidate\n        const splittedCandidate = candidate.candidate.split(\" \");\n        const ufragIndex = splittedCandidate.findIndex((s)=>s === \"ufrag\") + 1;\n        const usernameFragment = splittedCandidate[ufragIndex];\n        return JSON.stringify({\n            ...candidate,\n            usernameFragment\n        });\n    } else {\n        return JSON.stringify(candidate.toJSON());\n    }\n}\nconst DEFAULT_BITRATE = 1250000;\nconst defaultTargetResolution = {\n    bitrate: DEFAULT_BITRATE,\n    width: 1280,\n    height: 720\n};\nconst defaultBitratePerRid = {\n    q: 300000,\n    h: 750000,\n    f: DEFAULT_BITRATE\n};\n/**\n * Determines the most optimal video layers for simulcasting\n * for the given track.\n *\n * @param videoTrack the video track to find optimal layers for.\n * @param targetResolution the expected target resolution.\n * @param publishOptions the publish options for the track.\n */ const findOptimalVideoLayers = (videoTrack, targetResolution = defaultTargetResolution, publishOptions)=>{\n    const optimalVideoLayers = [];\n    const settings = videoTrack.getSettings();\n    const { width: w = 0, height: h = 0 } = settings;\n    const { preferredBitrate, bitrateDownscaleFactor = 2 } = publishOptions || {};\n    const maxBitrate = getComputedMaxBitrate(targetResolution, w, h, preferredBitrate);\n    let downscaleFactor = 1;\n    let bitrateFactor = 1;\n    [\n        \"f\",\n        \"h\",\n        \"q\"\n    ].forEach((rid)=>{\n        // Reversing the order [f, h, q] to [q, h, f] as Chrome uses encoding index\n        // when deciding which layer to disable when CPU or bandwidth is constrained.\n        // Encodings should be ordered in increasing spatial resolution order.\n        optimalVideoLayers.unshift({\n            active: true,\n            rid,\n            width: Math.round(w / downscaleFactor),\n            height: Math.round(h / downscaleFactor),\n            maxBitrate: Math.round(maxBitrate / bitrateFactor) || defaultBitratePerRid[rid],\n            scaleResolutionDownBy: downscaleFactor,\n            maxFramerate: 30\n        });\n        downscaleFactor *= 2;\n        bitrateFactor *= bitrateDownscaleFactor;\n    });\n    // for simplicity, we start with all layers enabled, then this function\n    // will clear/reassign the layers that are not needed\n    return withSimulcastConstraints(settings, optimalVideoLayers);\n};\n/**\n * Computes the maximum bitrate for a given resolution.\n * If the current resolution is lower than the target resolution,\n * we want to proportionally reduce the target bitrate.\n * If the current resolution is higher than the target resolution,\n * we want to use the target bitrate.\n *\n * @param targetResolution the target resolution.\n * @param currentWidth the current width of the track.\n * @param currentHeight the current height of the track.\n * @param preferredBitrate the preferred bitrate for the track.\n */ const getComputedMaxBitrate = (targetResolution, currentWidth, currentHeight, preferredBitrate)=>{\n    // if the current resolution is lower than the target resolution,\n    // we want to proportionally reduce the target bitrate\n    const { width: targetWidth, height: targetHeight, bitrate: targetBitrate } = targetResolution;\n    const bitrate = preferredBitrate || targetBitrate;\n    if (currentWidth < targetWidth || currentHeight < targetHeight) {\n        const currentPixels = currentWidth * currentHeight;\n        const targetPixels = targetWidth * targetHeight;\n        const reductionFactor = currentPixels / targetPixels;\n        return Math.round(bitrate * reductionFactor);\n    }\n    return bitrate;\n};\n/**\n * Browsers have different simulcast constraints for different video resolutions.\n *\n * This function modifies the provided list of video layers according to the\n * current implementation of simulcast constraints in the Chromium based browsers.\n *\n * https://chromium.googlesource.com/external/webrtc/+/refs/heads/main/media/engine/simulcast.cc#90\n */ const withSimulcastConstraints = (settings, optimalVideoLayers)=>{\n    let layers;\n    const size = Math.max(settings.width || 0, settings.height || 0);\n    if (size <= 320) {\n        // provide only one layer 320x240 (q), the one with the highest quality\n        layers = optimalVideoLayers.filter((layer)=>layer.rid === \"f\");\n    } else if (size <= 640) {\n        // provide two layers, 160x120 (q) and 640x480 (h)\n        layers = optimalVideoLayers.filter((layer)=>layer.rid !== \"h\");\n    } else {\n        // provide three layers for sizes > 640x480\n        layers = optimalVideoLayers;\n    }\n    const ridMapping = [\n        \"q\",\n        \"h\",\n        \"f\"\n    ];\n    return layers.map((layer, index)=>({\n            ...layer,\n            rid: ridMapping[index]\n        }));\n};\nconst findOptimalScreenSharingLayers = (videoTrack, publishOptions, defaultMaxBitrate = 3000000)=>{\n    const { screenShareSettings: preferences } = publishOptions || {};\n    const settings = videoTrack.getSettings();\n    return [\n        {\n            active: true,\n            rid: \"q\",\n            width: settings.width || 0,\n            height: settings.height || 0,\n            scaleResolutionDownBy: 1,\n            maxBitrate: preferences?.maxBitrate ?? defaultMaxBitrate,\n            maxFramerate: preferences?.maxFramerate ?? 30\n        }\n    ];\n};\nconst ensureExhausted = (x, message)=>{\n    getLogger([\n        \"helpers\"\n    ])(\"warn\", message, x);\n};\nconst trackTypeToParticipantStreamKey = (trackType)=>{\n    switch(trackType){\n        case TrackType.SCREEN_SHARE:\n            return \"screenShareStream\";\n        case TrackType.SCREEN_SHARE_AUDIO:\n            return \"screenShareAudioStream\";\n        case TrackType.VIDEO:\n            return \"videoStream\";\n        case TrackType.AUDIO:\n            return \"audioStream\";\n        case TrackType.UNSPECIFIED:\n            throw new Error(\"Track type is unspecified\");\n        default:\n            ensureExhausted(trackType, \"Unknown track type\");\n    }\n};\nconst muteTypeToTrackType = (muteType)=>{\n    switch(muteType){\n        case \"audio\":\n            return TrackType.AUDIO;\n        case \"video\":\n            return TrackType.VIDEO;\n        case \"screenshare\":\n            return TrackType.SCREEN_SHARE;\n        case \"screenshare_audio\":\n            return TrackType.SCREEN_SHARE_AUDIO;\n        default:\n            ensureExhausted(muteType, \"Unknown mute type\");\n    }\n};\nconst toTrackType = (trackType)=>{\n    switch(trackType){\n        case \"TRACK_TYPE_AUDIO\":\n            return TrackType.AUDIO;\n        case \"TRACK_TYPE_VIDEO\":\n            return TrackType.VIDEO;\n        case \"TRACK_TYPE_SCREEN_SHARE\":\n            return TrackType.SCREEN_SHARE;\n        case \"TRACK_TYPE_SCREEN_SHARE_AUDIO\":\n            return TrackType.SCREEN_SHARE_AUDIO;\n        default:\n            return undefined;\n    }\n};\n/**\n * Runs async functions serially. Useful for wrapping async actions that\n * should never run simultaneously: if marked with the same tag, functions\n * will run one after another.\n *\n * @param tag Async functions with the same tag will run serially. Async functions\n * with different tags can run in parallel.\n * @param cb Async function to run.\n * @returns Promise that resolves when async functions returns.\n */ const withoutConcurrency = createRunner(wrapWithContinuationTracking);\n/**\n * Runs async functions serially, and cancels all other actions with the same tag\n * when a new action is scheduled. Useful for wrapping async actions that override\n * each other (e.g. enabling and disabling camera).\n *\n * If an async function hasn't started yet and was canceled, it will never run.\n * If an async function is already running and was canceled, it will be notified\n * via an abort signal passed as an argument.\n *\n * @param tag Async functions with the same tag will run serially and are canceled\n * when a new action with the same tag is scheduled.\n * @param cb Async function to run. Receives AbortSignal as the only argument.\n * @returns Promise that resolves when async functions returns. If the function didn't\n * start and was canceled, will resolve with 'canceled'. If the function started to run,\n * it's up to the function to decide how to react to cancelation.\n */ const withCancellation = createRunner(wrapWithCancellation);\nconst pendingPromises = new Map();\nasync function settled(tag) {\n    await pendingPromises.get(tag)?.promise;\n}\n/**\n * Implements common functionality of running async functions serially, by chaining\n * their promises one after another.\n *\n * Before running, async function is \"wrapped\" using the provided wrapper. This wrapper\n * can add additional steps to run before or after the function.\n *\n * When async function is scheduled to run, the previous function is notified\n * by calling the associated onContinued callback. This behavior of this callback\n * is defined by the wrapper.\n */ function createRunner(wrapper) {\n    return function run(tag, cb) {\n        const { cb: wrapped, onContinued } = wrapper(tag, cb);\n        const pending = pendingPromises.get(tag);\n        pending?.onContinued();\n        const promise = pending ? pending.promise.then(wrapped, wrapped) : wrapped();\n        pendingPromises.set(tag, {\n            promise,\n            onContinued\n        });\n        return promise;\n    };\n}\n/**\n * Wraps an async function with an additional step run after the function:\n * if the function is the last in the queue, it cleans up the whole chain\n * of promises after finishing.\n */ function wrapWithContinuationTracking(tag, cb) {\n    let hasContinuation = false;\n    const wrapped = ()=>cb().finally(()=>{\n            if (!hasContinuation) {\n                pendingPromises.delete(tag);\n            }\n        });\n    const onContinued = ()=>hasContinuation = true;\n    return {\n        cb: wrapped,\n        onContinued\n    };\n}\n/**\n * Wraps an async function with additional functionalilty:\n * 1. Associates an abort signal with every function, that is passed to it\n *    as an argument. When a new function is scheduled to run after the current\n *    one, current signal is aborted.\n * 2. If current function didn't start and was aborted, in will never start.\n * 3. If the function is the last in the queue, it cleans up the whole chain\n *    of promises after finishing.\n */ function wrapWithCancellation(tag, cb) {\n    const ac = new AbortController();\n    const wrapped = ()=>{\n        if (ac.signal.aborted) {\n            return Promise.resolve(\"canceled\");\n        }\n        return cb(ac.signal).finally(()=>{\n            if (!ac.signal.aborted) {\n                pendingPromises.delete(tag);\n            }\n        });\n    };\n    const onContinued = ()=>ac.abort();\n    return {\n        cb: wrapped,\n        onContinued\n    };\n}\n/**\n * Checks if the provided update is a function patch.\n *\n * @param update the value to check.\n */ const isFunctionPatch = (update)=>typeof update === \"function\";\n/**\n * Gets the current value of an observable, or undefined if the observable has\n * not emitted a value yet.\n *\n * @param observable$ the observable to get the value from.\n */ const getCurrentValue = (observable$)=>{\n    let value;\n    let err = undefined;\n    (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([\n        observable$\n    ]).subscribe({\n        next: ([v])=>{\n            value = v;\n        },\n        error: (e)=>{\n            err = e;\n        }\n    }).unsubscribe();\n    if (err) throw err;\n    return value;\n};\n/**\n * Updates the value of the provided Subject.\n * An `update` can either be a new value or a function which takes\n * the current value and returns a new value.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n * @return the updated value.\n */ const setCurrentValue = (subject, update)=>{\n    const next = isFunctionPatch(update) ? update(getCurrentValue(subject)) : update;\n    subject.next(next);\n    return next;\n};\n/**\n * Creates a subscription and returns a function to unsubscribe.\n *\n * @param observable the observable to subscribe to.\n * @param handler the handler to call when the observable emits a value.\n */ const createSubscription = (observable, handler)=>{\n    const subscription = observable.subscribe(handler);\n    return ()=>{\n        subscription.unsubscribe();\n    };\n};\n/**\n * Creates a subscription and returns a function to unsubscribe. Makes sure that\n * only one async handler runs at the same time. If updates come in quicker than\n * it takes for the current handler to finish, other handlers will wait.\n *\n * @param observable the observable to subscribe to.\n * @param handler the async handler to call when the observable emits a value.\n */ const createSafeAsyncSubscription = (observable, handler)=>{\n    const tag = Symbol();\n    const subscription = observable.subscribe((value)=>{\n        withoutConcurrency(tag, ()=>handler(value));\n    });\n    return ()=>{\n        subscription.unsubscribe();\n    };\n};\nvar rxUtils = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    createSafeAsyncSubscription: createSafeAsyncSubscription,\n    createSubscription: createSubscription,\n    getCurrentValue: getCurrentValue,\n    setCurrentValue: setCurrentValue\n});\n/**\n * Represents the state of the current call.\n */ var CallingState;\n(function(CallingState) {\n    /**\n     * The call is in an unknown state.\n     */ CallingState[\"UNKNOWN\"] = \"unknown\";\n    /**\n     * The call is in an idle state.\n     */ CallingState[\"IDLE\"] = \"idle\";\n    /**\n     * The call is in the process of ringing.\n     * (User hasn't accepted nor rejected the call yet.)\n     */ CallingState[\"RINGING\"] = \"ringing\";\n    /**\n     * The call is in the process of joining.\n     */ CallingState[\"JOINING\"] = \"joining\";\n    /**\n     * The call is currently active.\n     */ CallingState[\"JOINED\"] = \"joined\";\n    /**\n     * The call has been left.\n     */ CallingState[\"LEFT\"] = \"left\";\n    /**\n     * The call is in the process of reconnecting.\n     */ CallingState[\"RECONNECTING\"] = \"reconnecting\";\n    /**\n     * The call is in the process of migrating from one node to another.\n     */ CallingState[\"MIGRATING\"] = \"migrating\";\n    /**\n     * The call has failed to reconnect.\n     */ CallingState[\"RECONNECTING_FAILED\"] = \"reconnecting-failed\";\n    /**\n     * The call is in offline mode.\n     */ CallingState[\"OFFLINE\"] = \"offline\";\n})(CallingState || (CallingState = {}));\nclass StreamVideoWriteableStateStore {\n    constructor(){\n        /**\n         * A store keeping data of a successfully connected user over WS to the coordinator server.\n         */ this.connectedUserSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        /**\n         * A list of {@link Call} objects created/tracked by this client.\n         */ this.callsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject([]);\n        /**\n         * Sets the currently connected user.\n         *\n         * @internal\n         * @param user the user to set as connected.\n         */ this.setConnectedUser = (user)=>{\n            return setCurrentValue(this.connectedUserSubject, user);\n        };\n        /**\n         * Sets the list of {@link Call} objects created/tracked by this client.\n         * @param calls\n         */ this.setCalls = (calls)=>{\n            return setCurrentValue(this.callsSubject, calls);\n        };\n        /**\n         * Adds a {@link Call} object to the list of {@link Call} objects created/tracked by this client.\n         *\n         * @param call the call to add.\n         */ this.registerCall = (call)=>{\n            if (!this.calls.find((c)=>c.cid === call.cid)) {\n                this.setCalls((calls)=>[\n                        ...calls,\n                        call\n                    ]);\n            }\n        };\n        /**\n         * Removes a {@link Call} object from the list of {@link Call} objects created/tracked by this client.\n         *\n         * @param call the call to remove\n         */ this.unregisterCall = (call)=>{\n            return this.setCalls((calls)=>calls.filter((c)=>c !== call));\n        };\n        /**\n         * Finds a {@link Call} object in the list of {@link Call} objects created/tracked by this client.\n         *\n         * @param type the type of call to find.\n         * @param id the id of the call to find.\n         */ this.findCall = (type, id)=>{\n            return this.calls.find((c)=>c.type === type && c.id === id);\n        };\n        this.connectedUserSubject.subscribe(async (user)=>{\n            // leave all calls when the user disconnects.\n            if (!user) {\n                const logger = getLogger([\n                    \"client-state\"\n                ]);\n                for (const call of this.calls){\n                    if (call.state.callingState === CallingState.LEFT) continue;\n                    logger(\"info\", `User disconnected, leaving call: ${call.cid}`);\n                    await call.leave({\n                        reason: \"client.disconnectUser() called\"\n                    }).catch((err)=>{\n                        logger(\"error\", `Error leaving call: ${call.cid}`, err);\n                    });\n                }\n            }\n        });\n    }\n    /**\n     * The currently connected user.\n     */ get connectedUser() {\n        return getCurrentValue(this.connectedUserSubject);\n    }\n    /**\n     * A list of {@link Call} objects created/tracked by this client.\n     */ get calls() {\n        return getCurrentValue(this.callsSubject);\n    }\n}\n/**\n * A reactive store that exposes state variables in a reactive manner.\n * You can subscribe to changes of the different state variables.\n * This central store contains all the state variables related to [`StreamVideoClient`](./StreamVideClient.md) and [`Call`](./Call.md).\n */ class StreamVideoReadOnlyStateStore {\n    constructor(store){\n        /**\n         * This method allows you the get the current value of a state variable.\n         *\n         * @param observable the observable to get the current value of.\n         * @returns the current value of the observable.\n         */ this.getCurrentValue = getCurrentValue;\n        // convert and expose subjects as observables\n        this.connectedUser$ = store.connectedUserSubject.asObservable();\n        this.calls$ = store.callsSubject.asObservable();\n    }\n    /**\n     * The current user connected over WS to the backend.\n     */ get connectedUser() {\n        return getCurrentValue(this.connectedUser$);\n    }\n    /**\n     * A list of {@link Call} objects created/tracked by this client.\n     */ get calls() {\n        return getCurrentValue(this.calls$);\n    }\n}\n/**\n * Creates a new combined {@link Comparator<T>} which sorts items by the given comparators.\n * The comparators are applied in the order they are given (left -> right).\n *\n * @param comparators the comparators to use for sorting.\n * @returns a combined {@link Comparator<T>}.\n */ const combineComparators = (...comparators)=>{\n    return (a, b)=>{\n        for (const comparator of comparators){\n            const result = comparator(a, b);\n            if (result !== 0) return result;\n        }\n        return 0;\n    };\n};\n/**\n * Creates a new comparator which sorts items in descending order.\n *\n * @example\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const byValueDesc = descending(byValue);\n *\n * @param comparator the comparator to wrap.\n */ const descending = (comparator)=>{\n    return (a, b)=>comparator(b, a);\n};\n/**\n * Creates a new comparator which conditionally applies the given comparator.\n *\n * @example\n * const shouldSortByValue = (a, b) => a % 2 === 0; // return false to turn it off\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const comparator = conditional(shouldSortByValue)(byValue);\n *\n * @param predicate the predicate to use for determining whether to apply the comparator.\n */ const conditional = (predicate)=>{\n    return (comparator)=>{\n        return (a, b)=>{\n            if (!predicate(a, b)) return 0;\n            return comparator(a, b);\n        };\n    };\n};\n/**\n * A no-op comparator which always returns 0.\n */ const noopComparator = ()=>{\n    return ()=>0;\n};\n/**\n * Check if a participant has a video.\n *\n * @param p the participant to check.\n */ const hasVideo = (p)=>p.publishedTracks.includes(TrackType.VIDEO);\n/**\n * Check if a participant has audio.\n *\n * @param p the participant to check.\n */ const hasAudio = (p)=>p.publishedTracks.includes(TrackType.AUDIO);\n/**\n * Check if a participant is screen sharing.\n *\n * @param p the participant to check.\n */ const hasScreenShare = (p)=>p.publishedTracks.includes(TrackType.SCREEN_SHARE);\n/**\n * Check if a participant is screen sharing audio.\n *\n * @param p the participant to check.\n */ const hasScreenShareAudio = (p)=>p.publishedTracks.includes(TrackType.SCREEN_SHARE_AUDIO);\n/**\n * Check if the participant is pinned.\n *\n * @param p the participant.\n */ const isPinned = (p)=>!!p.pin && (p.pin.isLocalPin || p.pin.pinnedAt > 0);\n/**\n * A comparator which sorts participants by the fact that they are the dominant speaker or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const dominantSpeaker = (a, b)=>{\n    if (a.isDominantSpeaker && !b.isDominantSpeaker) return -1;\n    if (!a.isDominantSpeaker && b.isDominantSpeaker) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by the fact that they are speaking or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const speaking = (a, b)=>{\n    if (a.isSpeaking && !b.isSpeaking) return -1;\n    if (!a.isSpeaking && b.isSpeaking) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by screen sharing status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const screenSharing = (a, b)=>{\n    if (hasScreenShare(a) && !hasScreenShare(b)) return -1;\n    if (!hasScreenShare(a) && hasScreenShare(b)) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by video status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const publishingVideo = (a, b)=>{\n    if (hasVideo(a) && !hasVideo(b)) return -1;\n    if (!hasVideo(a) && hasVideo(b)) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by audio status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const publishingAudio = (a, b)=>{\n    if (hasAudio(a) && !hasAudio(b)) return -1;\n    if (!hasAudio(a) && hasAudio(b)) return 1;\n    return 0;\n};\n/**\n * A comparator which prioritizes participants who are pinned.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const pinned = (a, b)=>{\n    if (a.pin && b.pin) {\n        if (!a.pin.isLocalPin && b.pin.isLocalPin) return -1;\n        if (a.pin.isLocalPin && !b.pin.isLocalPin) return 1;\n        if (a.pin.pinnedAt > b.pin.pinnedAt) return -1;\n        if (a.pin.pinnedAt < b.pin.pinnedAt) return 1;\n    }\n    if (a.pin && !b.pin) return -1;\n    if (!a.pin && b.pin) return 1;\n    return 0;\n};\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific reaction.\n *\n * @param type the reaction type.\n */ const reactionType = (type)=>{\n    return (a, b)=>{\n        if (a.reaction?.type === type && b.reaction?.type !== type) return -1;\n        if (a.reaction?.type !== type && b.reaction?.type === type) return 1;\n        return 0;\n    };\n};\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific role.\n *\n * @param roles the roles to prioritize.\n */ const role = (...roles)=>(a, b)=>{\n        if (hasAnyRole(a, roles) && !hasAnyRole(b, roles)) return -1;\n        if (!hasAnyRole(a, roles) && hasAnyRole(b, roles)) return 1;\n        return 0;\n    };\n/**\n * A comparator which sorts participants by name.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const name = (a, b)=>{\n    if (a.name < b.name) return -1;\n    if (a.name > b.name) return 1;\n    return 0;\n};\nconst hasAnyRole = (p, roles)=>(p.roles || []).some((r)=>roles.includes(r));\n// a comparator decorator which applies the decorated comparator only if the\n// participant is invisible.\n// This ensures stable sorting when all participants are visible.\nconst ifInvisibleBy = conditional((a, b)=>a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE || b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE);\n/**\n * A comparator that applies the decorated comparator when a participant is\n * either invisible or its visibility state isn't known.\n * For visible participants, it ensures stable sorting.\n */ const ifInvisibleOrUnknownBy = conditional((a, b)=>a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE || a.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN || b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE || b.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN);\n/**\n * The default sorting preset.\n */ const defaultSortPreset = combineComparators(pinned, screenSharing, ifInvisibleBy(combineComparators(dominantSpeaker, speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)));\n/**\n * The sorting preset for speaker layout.\n */ const speakerLayoutSortPreset = combineComparators(pinned, screenSharing, dominantSpeaker, ifInvisibleBy(combineComparators(speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)));\n/**\n * The sorting preset for layouts that don't render all participants but\n * instead, render them in pages.\n */ const paginatedLayoutSortPreset = combineComparators(pinned, ifInvisibleOrUnknownBy(combineComparators(dominantSpeaker, speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)));\n/**\n * The sorting preset for livestreams and audio rooms.\n */ const livestreamOrAudioRoomSortPreset = combineComparators(ifInvisibleBy(combineComparators(dominantSpeaker, speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)), role(\"admin\", \"host\", \"speaker\"));\n/**\n * Returns the default egress object - when no egress data is available.\n */ const defaultEgress = {\n    broadcasting: false,\n    hls: {\n        playlist_url: \"\"\n    },\n    rtmps: []\n};\n/**\n * Holds the state of the current call.\n * @react You don't have to use this class directly, as we are exposing the state through Hooks.\n */ class CallState {\n    /**\n     * Creates a new instance of the CallState class.\n     *\n     */ constructor(){\n        this.backstageSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(true);\n        this.blockedUserIdsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject([]);\n        this.createdAtSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(new Date());\n        this.endedAtSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.startsAtSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.updatedAtSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(new Date());\n        this.createdBySubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.customSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject({});\n        this.egressSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.ingressSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.recordingSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(false);\n        this.sessionSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.settingsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.transcribingSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(false);\n        this.endedBySubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.thumbnailsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.membersSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject([]);\n        this.ownCapabilitiesSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject([]);\n        this.callingStateSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(CallingState.UNKNOWN);\n        this.startedAtSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.participantCountSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(0);\n        this.anonymousParticipantCountSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(0);\n        this.participantsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject([]);\n        this.callStatsReportSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        // These are tracks that were delivered to the Subscriber's onTrack event\n        // that we couldn't associate with a participant yet.\n        // This happens when the participantJoined event hasn't been received yet.\n        // We keep these tracks around until we can associate them with a participant.\n        this.orphanedTracks = [];\n        this.logger = getLogger([\n            \"CallState\"\n        ]);\n        /**\n         * A list of comparators that are used to sort the participants.\n         *\n         * @private\n         */ this.sortParticipantsBy = defaultSortPreset;\n        /**\n         * Sets the list of criteria that are used to sort the participants.\n         * To disable sorting, you can pass `noopComparator()`.\n         *\n         * @param comparator the comparator to use to sort the participants.\n         */ this.setSortParticipantsBy = (comparator)=>{\n            this.sortParticipantsBy = comparator;\n            // trigger re-sorting of participants\n            this.setCurrentValue(this.participantsSubject, (ps)=>ps);\n        };\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @internal\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n        /**\n         * Sets the number of participants in the current call.\n         *\n         * @internal\n         * @param count the number of participants.\n         */ this.setParticipantCount = (count)=>{\n            return this.setCurrentValue(this.participantCountSubject, count);\n        };\n        /**\n         * Sets the time the call session actually started.\n         *\n         * @internal\n         * @param startedAt the time the call session actually started.\n         */ this.setStartedAt = (startedAt)=>{\n            return this.setCurrentValue(this.startedAtSubject, startedAt);\n        };\n        /**\n         * Sets the number of anonymous participants in the current call.\n         *\n         * @internal\n         * @param count the number of anonymous participants.\n         */ this.setAnonymousParticipantCount = (count)=>{\n            return this.setCurrentValue(this.anonymousParticipantCountSubject, count);\n        };\n        /**\n         * Sets the list of participants in the current call.\n         *\n         * @internal\n         *\n         * @param participants the list of participants.\n         */ this.setParticipants = (participants)=>{\n            return this.setCurrentValue(this.participantsSubject, participants);\n        };\n        /**\n         * Sets the calling state.\n         *\n         * @internal\n         * @param state the new calling state.\n         */ this.setCallingState = (state)=>{\n            return this.setCurrentValue(this.callingStateSubject, state);\n        };\n        /**\n         * Sets the call stats report.\n         *\n         * @internal\n         * @param report the report to set.\n         */ this.setCallStatsReport = (report)=>{\n            return this.setCurrentValue(this.callStatsReportSubject, report);\n        };\n        /**\n         * Sets the members of the current call.\n         *\n         * @internal\n         * @param members the members to set.\n         */ this.setMembers = (members)=>{\n            this.setCurrentValue(this.membersSubject, members);\n        };\n        /**\n         * Sets the own capabilities.\n         *\n         * @internal\n         * @param capabilities the capabilities to set.\n         */ this.setOwnCapabilities = (capabilities)=>{\n            return this.setCurrentValue(this.ownCapabilitiesSubject, capabilities);\n        };\n        /**\n         * Sets the time when this call has been ended.\n         * @param endedAt the time when this call has been ended.\n         */ this.setEndedAt = (endedAt)=>{\n            return this.setCurrentValue(this.endedAtSubject, endedAt);\n        };\n        /**\n         * Will try to find the participant with the given sessionId in the current call.\n         *\n         * @param sessionId the sessionId of the participant to find.\n         * @returns the participant with the given sessionId or undefined if not found.\n         */ this.findParticipantBySessionId = (sessionId)=>{\n            return this.participants.find((p)=>p.sessionId === sessionId);\n        };\n        /**\n         * Returns a new lookup table of participants indexed by their session ID.\n         */ this.getParticipantLookupBySessionId = ()=>{\n            return this.participants.reduce((lookupTable, participant)=>{\n                lookupTable[participant.sessionId] = participant;\n                return lookupTable;\n            }, {});\n        };\n        /**\n         * Updates a participant in the current call identified by the given `sessionId`.\n         * If the participant can't be found, this operation is no-op.\n         *\n         * @internal\n         *\n         * @param sessionId the session ID of the participant to update.\n         * @param patch the patch to apply to the participant.\n         * @returns the updated participant or `undefined` if the participant couldn't be found.\n         */ this.updateParticipant = (sessionId, patch)=>{\n            const participant = this.findParticipantBySessionId(sessionId);\n            if (!participant) {\n                this.logger(\"warn\", `Participant with sessionId ${sessionId} not found`);\n                return;\n            }\n            const thePatch = typeof patch === \"function\" ? patch(participant) : patch;\n            const updatedParticipant = {\n                // FIXME OL: this is not a deep merge, we might want to revisit this\n                ...participant,\n                ...thePatch\n            };\n            return this.setParticipants((participants)=>participants.map((p)=>p.sessionId === sessionId ? updatedParticipant : p));\n        };\n        /**\n         * Updates a participant in the current call identified by the given `sessionId`.\n         * If a participant with matching `sessionId` can't be found, the provided\n         * `participant` is added to the list of participants.\n         *\n         * @param sessionId the session ID of the participant to update.\n         * @param participant the participant to update or add.\n         */ this.updateOrAddParticipant = (sessionId, participant)=>{\n            return this.setParticipants((participants)=>{\n                let add = true;\n                const nextParticipants = participants.map((p)=>{\n                    if (p.sessionId === sessionId) {\n                        add = false;\n                        return {\n                            ...p,\n                            ...participant\n                        };\n                    }\n                    return p;\n                });\n                if (add) nextParticipants.push(participant);\n                return nextParticipants;\n            });\n        };\n        /**\n         * Updates all participants in the current call whose session ID is in the given `sessionIds`.\n         * If no patches are provided, this operation is no-op.\n         *\n         * @internal\n         *\n         * @param patch the patch to apply to the participants.\n         * @returns all participants, with all patch applied.\n         */ this.updateParticipants = (patch)=>{\n            if (Object.keys(patch).length === 0) return this.participants;\n            return this.setParticipants((participants)=>participants.map((p)=>{\n                    const thePatch = patch[p.sessionId];\n                    if (thePatch) {\n                        return {\n                            ...p,\n                            ...thePatch\n                        };\n                    }\n                    return p;\n                }));\n        };\n        /**\n         * Updates the call state with the data received from the server.\n         *\n         * @internal\n         *\n         * @param event the video event that our backend sent us.\n         */ this.updateFromEvent = (event)=>{\n            const update = this.eventHandlers[event.type];\n            if (update) {\n                update(event);\n            }\n        };\n        /**\n         * Updates the participant pinned state with server side pinning data.\n         *\n         * @param pins the latest pins from the server.\n         */ this.setServerSidePins = (pins)=>{\n            const pinsLookup = pins.reduce((lookup, pin)=>{\n                lookup[pin.sessionId] = Date.now();\n                return lookup;\n            }, {});\n            return this.setParticipants((participants)=>participants.map((participant)=>{\n                    const serverSidePinnedAt = pinsLookup[participant.sessionId];\n                    // the participant is newly pinned\n                    if (serverSidePinnedAt) {\n                        return {\n                            ...participant,\n                            pin: {\n                                isLocalPin: false,\n                                pinnedAt: serverSidePinnedAt\n                            }\n                        };\n                    }\n                    // the participant is no longer pinned server side\n                    // we need to reset the pin\n                    if (participant.pin && !participant.pin.isLocalPin) {\n                        return {\n                            ...participant,\n                            pin: undefined\n                        };\n                    }\n                    // no changes to be applied\n                    return participant;\n                }));\n        };\n        /**\n         * Adds an orphaned track to the call state.\n         *\n         * @internal\n         *\n         * @param orphanedTrack the orphaned track to add.\n         */ this.registerOrphanedTrack = (orphanedTrack)=>{\n            this.orphanedTracks.push(orphanedTrack);\n        };\n        /**\n         * Removes an orphaned track from the call state.\n         *\n         * @internal\n         *\n         * @param id the ID of the orphaned track to remove.\n         */ this.removeOrphanedTrack = (id)=>{\n            this.orphanedTracks = this.orphanedTracks.filter((o)=>o.id !== id);\n        };\n        /**\n         * Takes all orphaned tracks with the given track lookup prefix.\n         * All orphaned tracks with the given track lookup prefix are removed from the call state.\n         *\n         * @internal\n         *\n         * @param trackLookupPrefix the track lookup prefix to match the orphaned tracks by.\n         */ this.takeOrphanedTracks = (trackLookupPrefix)=>{\n            const orphans = this.orphanedTracks.filter((orphan)=>orphan.trackLookupPrefix === trackLookupPrefix);\n            if (orphans.length > 0) {\n                this.orphanedTracks = this.orphanedTracks.filter((orphan)=>orphan.trackLookupPrefix !== trackLookupPrefix);\n            }\n            return orphans;\n        };\n        /**\n         * Updates the call state with the data received from the server.\n         *\n         * @internal\n         *\n         * @param call the call response from the server.\n         */ this.updateFromCallResponse = (call)=>{\n            this.setCurrentValue(this.backstageSubject, call.backstage);\n            this.setCurrentValue(this.blockedUserIdsSubject, call.blocked_user_ids);\n            this.setCurrentValue(this.createdAtSubject, new Date(call.created_at));\n            this.setCurrentValue(this.updatedAtSubject, new Date(call.updated_at));\n            this.setCurrentValue(this.startsAtSubject, call.starts_at ? new Date(call.starts_at) : undefined);\n            this.setEndedAt(call.ended_at ? new Date(call.ended_at) : undefined);\n            this.setCurrentValue(this.createdBySubject, call.created_by);\n            this.setCurrentValue(this.customSubject, call.custom);\n            this.setCurrentValue(this.egressSubject, call.egress);\n            this.setCurrentValue(this.ingressSubject, call.ingress);\n            this.setCurrentValue(this.recordingSubject, call.recording);\n            const s = this.setCurrentValue(this.sessionSubject, call.session);\n            this.updateParticipantCountFromSession(s);\n            this.setCurrentValue(this.settingsSubject, call.settings);\n            this.setCurrentValue(this.transcribingSubject, call.transcribing);\n            this.setCurrentValue(this.thumbnailsSubject, call.thumbnails);\n        };\n        /**\n         * Updates the call state with the data received from the SFU server.\n         *\n         * @internal\n         *\n         * @param callState the call state from the SFU server.\n         * @param currentSessionId the session ID of the current user.\n         * @param reconnectDetails optional reconnect details.\n         */ this.updateFromSfuCallState = (callState, currentSessionId, reconnectDetails)=>{\n            const { participants, participantCount, startedAt, pins } = callState;\n            const localPublishedTracks = reconnectDetails?.announcedTracks.map((t)=>t.trackType) ?? [];\n            this.setParticipants(()=>{\n                const participantLookup = this.getParticipantLookupBySessionId();\n                return participants.map((p)=>{\n                    // We need to preserve the local state of the participant\n                    // (e.g. videoDimension, visibilityState, pinnedAt, etc.)\n                    // as it doesn't exist on the server.\n                    const existingParticipant = participantLookup[p.sessionId];\n                    const isLocalParticipant = p.sessionId === currentSessionId;\n                    return Object.assign({}, existingParticipant, p, {\n                        isLocalParticipant,\n                        publishedTracks: isLocalParticipant ? localPublishedTracks : p.publishedTracks,\n                        viewportVisibilityState: existingParticipant?.viewportVisibilityState ?? {\n                            videoTrack: VisibilityState.UNKNOWN,\n                            screenShareTrack: VisibilityState.UNKNOWN\n                        }\n                    });\n                });\n            });\n            this.setParticipantCount(participantCount?.total || 0);\n            this.setAnonymousParticipantCount(participantCount?.anonymous || 0);\n            this.setStartedAt(startedAt ? Timestamp.toDate(startedAt) : new Date());\n            this.setServerSidePins(pins);\n        };\n        this.updateFromMemberRemoved = (event)=>{\n            this.updateFromCallResponse(event.call);\n            this.setCurrentValue(this.membersSubject, (members)=>members.filter((m)=>event.members.indexOf(m.user_id) === -1));\n        };\n        this.updateFromMemberAdded = (event)=>{\n            this.updateFromCallResponse(event.call);\n            this.setCurrentValue(this.membersSubject, (members)=>[\n                    ...members,\n                    ...event.members\n                ]);\n        };\n        this.updateFromHLSBroadcastStopped = ()=>{\n            this.setCurrentValue(this.egressSubject, (egress = defaultEgress)=>({\n                    ...egress,\n                    broadcasting: false\n                }));\n        };\n        this.updateFromHLSBroadcastingFailed = ()=>{\n            this.setCurrentValue(this.egressSubject, (egress = defaultEgress)=>({\n                    ...egress,\n                    broadcasting: false\n                }));\n        };\n        this.updateFromHLSBroadcastStarted = (event)=>{\n            this.setCurrentValue(this.egressSubject, (egress = defaultEgress)=>({\n                    ...egress,\n                    broadcasting: true,\n                    hls: {\n                        ...egress.hls,\n                        playlist_url: event.hls_playlist_url\n                    }\n                }));\n        };\n        this.updateParticipantCountFromSession = (session)=>{\n            // when in JOINED state, we should use the participant count coming through\n            // the SFU healthcheck event, as it's more accurate.\n            if (!session || this.callingState === CallingState.JOINED) return;\n            const byRoleCount = Object.values(session.participants_count_by_role).reduce((total, countByRole)=>total + countByRole, 0);\n            const participantCount = Math.max(byRoleCount, session.participants.length);\n            this.setParticipantCount(participantCount);\n            this.setAnonymousParticipantCount(session.anonymous_participant_count || 0);\n        };\n        this.updateFromSessionParticipantCountUpdate = (event)=>{\n            const s = this.setCurrentValue(this.sessionSubject, (session)=>{\n                if (!session) return session;\n                return {\n                    ...session,\n                    anonymous_participant_count: event.anonymous_participant_count,\n                    participants_count_by_role: event.participants_count_by_role\n                };\n            });\n            this.updateParticipantCountFromSession(s);\n        };\n        this.updateFromSessionParticipantLeft = (event)=>{\n            const s = this.setCurrentValue(this.sessionSubject, (session)=>{\n                if (!session) return session;\n                const { participants, participants_count_by_role } = session;\n                const { user, user_session_id } = event.participant;\n                return {\n                    ...session,\n                    participants: participants.filter((p)=>p.user_session_id !== user_session_id),\n                    participants_count_by_role: {\n                        ...participants_count_by_role,\n                        [user.role]: Math.max(0, (participants_count_by_role[user.role] || 0) - 1)\n                    }\n                };\n            });\n            this.updateParticipantCountFromSession(s);\n        };\n        this.updateFromSessionParticipantJoined = (event)=>{\n            const s = this.setCurrentValue(this.sessionSubject, (session)=>{\n                if (!session) return session;\n                const { participants, participants_count_by_role } = session;\n                const { user, user_session_id } = event.participant;\n                // It could happen that the backend delivers the same participant more than once.\n                // Once with the call.session_started event and once again with the\n                // call.session_participant_joined event. In this case,\n                // we should update the existing participant and prevent duplicating it.\n                let shouldInsertParticipant = true;\n                const updatedParticipants = participants.map((p)=>{\n                    if (p.user_session_id === user_session_id) {\n                        shouldInsertParticipant = false;\n                        return event.participant;\n                    }\n                    return p;\n                });\n                if (shouldInsertParticipant) {\n                    // this is a new array, we can safely push the new participant\n                    updatedParticipants.push(event.participant);\n                }\n                // If we are updating an existing participant, we don't want to increment\n                // the participant_by_role count.\n                const increment = shouldInsertParticipant ? 1 : 0;\n                return {\n                    ...session,\n                    participants: updatedParticipants,\n                    participants_count_by_role: {\n                        ...participants_count_by_role,\n                        [user.role]: (participants_count_by_role[user.role] || 0) + increment\n                    }\n                };\n            });\n            this.updateParticipantCountFromSession(s);\n        };\n        this.updateMembers = (event)=>{\n            this.updateFromCallResponse(event.call);\n            this.setCurrentValue(this.membersSubject, (members)=>members.map((member)=>{\n                    const memberUpdate = event.members.find((m)=>m.user_id === member.user_id);\n                    return memberUpdate ? memberUpdate : member;\n                }));\n        };\n        this.updateParticipantReaction = (event)=>{\n            const { user, custom, type, emoji_code } = event.reaction;\n            this.setParticipants((participants)=>{\n                return participants.map((p)=>{\n                    // skip if the reaction is not for this participant\n                    if (p.userId !== user.id) return p;\n                    // update the participant with the new reaction\n                    return {\n                        ...p,\n                        reaction: {\n                            type,\n                            emoji_code,\n                            custom\n                        }\n                    };\n                });\n            });\n        };\n        this.unblockUser = (event)=>{\n            this.setCurrentValue(this.blockedUserIdsSubject, (current)=>{\n                if (!current) return current;\n                return current.filter((id)=>id !== event.user.id);\n            });\n        };\n        this.blockUser = (event)=>{\n            this.setCurrentValue(this.blockedUserIdsSubject, (current)=>[\n                    ...current || [],\n                    event.user.id\n                ]);\n        };\n        this.updateOwnCapabilities = (event)=>{\n            if (event.user.id === this.localParticipant?.userId) {\n                this.setCurrentValue(this.ownCapabilitiesSubject, event.own_capabilities);\n            }\n        };\n        this.participants$ = this.participantsSubject.asObservable().pipe(// maintain stable-sort by mutating the participants stored\n        // in the original subject\n        (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((ps)=>ps.sort(this.sortParticipantsBy)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.localParticipant$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.find((p)=>p.isLocalParticipant)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.remoteParticipants$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.filter((p)=>!p.isLocalParticipant)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.pinnedParticipants$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.filter((p)=>!!p.pin)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.dominantSpeaker$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.find((p)=>p.isDominantSpeaker)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.hasOngoingScreenShare$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.some((p)=>hasScreenShare(p))), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)(), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        // dates\n        this.createdAt$ = this.createdAtSubject.asObservable();\n        this.endedAt$ = this.endedAtSubject.asObservable();\n        this.startsAt$ = this.startsAtSubject.asObservable();\n        this.startedAt$ = this.startedAtSubject.asObservable();\n        this.updatedAt$ = this.updatedAtSubject.asObservable();\n        this.callStatsReport$ = this.callStatsReportSubject.asObservable();\n        this.members$ = this.membersSubject.asObservable();\n        // complex objects should work as streams of data\n        this.createdBy$ = this.createdBySubject.asObservable();\n        this.custom$ = this.customSubject.asObservable();\n        this.egress$ = this.egressSubject.asObservable();\n        this.ingress$ = this.ingressSubject.asObservable();\n        this.session$ = this.sessionSubject.asObservable();\n        this.settings$ = this.settingsSubject.asObservable();\n        this.endedBy$ = this.endedBySubject.asObservable();\n        this.thumbnails$ = this.thumbnailsSubject.asObservable();\n        /**\n         * Performs shallow comparison of two arrays.\n         * Expects primitive values: [1, 2, 3] is equal to [2, 1, 3].\n         */ const isShallowEqual = (a, b)=>{\n            if (a.length !== b.length) return false;\n            for (const item of a)if (!b.includes(item)) return false;\n            for (const item of b)if (!a.includes(item)) return false;\n            return true;\n        };\n        /**\n         * Creates an Observable from the given subject by piping to the\n         * `distinctUntilChanged()` operator.\n         */ const duc = (subject, comparator)=>subject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)(comparator));\n        // primitive values should only emit once the value they hold changes\n        this.anonymousParticipantCount$ = duc(this.anonymousParticipantCountSubject);\n        this.blockedUserIds$ = duc(this.blockedUserIdsSubject, isShallowEqual);\n        this.backstage$ = duc(this.backstageSubject);\n        this.callingState$ = duc(this.callingStateSubject);\n        this.ownCapabilities$ = duc(this.ownCapabilitiesSubject, isShallowEqual);\n        this.participantCount$ = duc(this.participantCountSubject);\n        this.recording$ = duc(this.recordingSubject);\n        this.transcribing$ = duc(this.transcribingSubject);\n        this.eventHandlers = {\n            // these events are not updating the call state:\n            \"call.closed_caption\": undefined,\n            \"call.deleted\": undefined,\n            \"call.permission_request\": undefined,\n            \"call.recording_ready\": undefined,\n            \"call.transcription_ready\": undefined,\n            \"call.user_muted\": undefined,\n            \"connection.error\": undefined,\n            \"connection.ok\": undefined,\n            \"health.check\": undefined,\n            \"user.banned\": undefined,\n            \"user.deactivated\": undefined,\n            \"user.deleted\": undefined,\n            \"user.muted\": undefined,\n            \"user.presence.changed\": undefined,\n            \"user.reactivated\": undefined,\n            \"user.unbanned\": undefined,\n            \"user.updated\": undefined,\n            custom: undefined,\n            // events that update call state:\n            \"call.accepted\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.blocked_user\": this.blockUser,\n            \"call.created\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.ended\": (e)=>{\n                this.updateFromCallResponse(e.call);\n                this.setCurrentValue(this.endedBySubject, e.user);\n            },\n            \"call.hls_broadcasting_failed\": this.updateFromHLSBroadcastingFailed,\n            \"call.hls_broadcasting_started\": this.updateFromHLSBroadcastStarted,\n            \"call.hls_broadcasting_stopped\": this.updateFromHLSBroadcastStopped,\n            \"call.live_started\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.member_added\": this.updateFromMemberAdded,\n            \"call.member_removed\": this.updateFromMemberRemoved,\n            \"call.member_updated_permission\": this.updateMembers,\n            \"call.member_updated\": this.updateMembers,\n            \"call.notification\": (e)=>{\n                this.updateFromCallResponse(e.call);\n                this.setMembers(e.members);\n            },\n            \"call.permissions_updated\": this.updateOwnCapabilities,\n            \"call.reaction_new\": this.updateParticipantReaction,\n            \"call.recording_started\": ()=>this.setCurrentValue(this.recordingSubject, true),\n            \"call.recording_stopped\": ()=>this.setCurrentValue(this.recordingSubject, false),\n            \"call.recording_failed\": ()=>this.setCurrentValue(this.recordingSubject, false),\n            \"call.rejected\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.ring\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.missed\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.session_ended\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.session_participant_count_updated\": this.updateFromSessionParticipantCountUpdate,\n            \"call.session_participant_joined\": this.updateFromSessionParticipantJoined,\n            \"call.session_participant_left\": this.updateFromSessionParticipantLeft,\n            \"call.session_started\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.transcription_started\": ()=>{\n                this.setCurrentValue(this.transcribingSubject, true);\n            },\n            \"call.transcription_stopped\": ()=>{\n                this.setCurrentValue(this.transcribingSubject, false);\n            },\n            \"call.transcription_failed\": ()=>{\n                this.setCurrentValue(this.transcribingSubject, false);\n            },\n            \"call.unblocked_user\": this.unblockUser,\n            \"call.updated\": (e)=>this.updateFromCallResponse(e.call)\n        };\n    }\n    /**\n     * The server-side counted number of participants connected to the current call.\n     * This number includes the anonymous participants as well.\n     */ get participantCount() {\n        return this.getCurrentValue(this.participantCount$);\n    }\n    /**\n     * The time the call session actually started.\n     * Useful for displaying the call duration.\n     */ get startedAt() {\n        return this.getCurrentValue(this.startedAt$);\n    }\n    /**\n     * The server-side counted number of anonymous participants connected to the current call.\n     * This number includes the anonymous participants as well.\n     */ get anonymousParticipantCount() {\n        return this.getCurrentValue(this.anonymousParticipantCount$);\n    }\n    /**\n     * The list of participants in the current call.\n     */ get participants() {\n        return this.getCurrentValue(this.participants$);\n    }\n    /**\n     * The local participant in the current call.\n     */ get localParticipant() {\n        return this.getCurrentValue(this.localParticipant$);\n    }\n    /**\n     * The list of remote participants in the current call.\n     */ get remoteParticipants() {\n        return this.getCurrentValue(this.remoteParticipants$);\n    }\n    /**\n     * The dominant speaker in the current call.\n     */ get dominantSpeaker() {\n        return this.getCurrentValue(this.dominantSpeaker$);\n    }\n    /**\n     * The list of pinned participants in the current call.\n     */ get pinnedParticipants() {\n        return this.getCurrentValue(this.pinnedParticipants$);\n    }\n    /**\n     * Tell if there is an ongoing screen share in this call.\n     */ get hasOngoingScreenShare() {\n        return this.getCurrentValue(this.hasOngoingScreenShare$);\n    }\n    /**\n     * The calling state.\n     */ get callingState() {\n        return this.getCurrentValue(this.callingState$);\n    }\n    /**\n     * The call stats report.\n     */ get callStatsReport() {\n        return this.getCurrentValue(this.callStatsReport$);\n    }\n    /**\n     * The members of the current call.\n     */ get members() {\n        return this.getCurrentValue(this.members$);\n    }\n    /**\n     * The capabilities of the current user for the current call.\n     */ get ownCapabilities() {\n        return this.getCurrentValue(this.ownCapabilities$);\n    }\n    /**\n     * The backstage state.\n     */ get backstage() {\n        return this.getCurrentValue(this.backstage$);\n    }\n    /**\n     * Will provide the list of blocked user IDs.\n     */ get blockedUserIds() {\n        return this.getCurrentValue(this.blockedUserIds$);\n    }\n    /**\n     * Will provide the time when this call has been created.\n     */ get createdAt() {\n        return this.getCurrentValue(this.createdAt$);\n    }\n    /**\n     * Will provide the time when this call has been ended.\n     */ get endedAt() {\n        return this.getCurrentValue(this.endedAt$);\n    }\n    /**\n     * Will provide the time when this call has been scheduled to start.\n     */ get startsAt() {\n        return this.getCurrentValue(this.startsAt$);\n    }\n    /**\n     * Will provide the time when this call has been updated.\n     */ get updatedAt() {\n        return this.getCurrentValue(this.updatedAt$);\n    }\n    /**\n     * Will provide the user who created this call.\n     */ get createdBy() {\n        return this.getCurrentValue(this.createdBy$);\n    }\n    /**\n     * Will provide the custom data of this call.\n     */ get custom() {\n        return this.getCurrentValue(this.custom$);\n    }\n    /**\n     * Will provide the egress data of this call.\n     */ get egress() {\n        return this.getCurrentValue(this.egress$);\n    }\n    /**\n     * Will provide the ingress data of this call.\n     */ get ingress() {\n        return this.getCurrentValue(this.ingress$);\n    }\n    /**\n     * Will provide the recording state of this call.\n     */ get recording() {\n        return this.getCurrentValue(this.recording$);\n    }\n    /**\n     * Will provide the session data of this call.\n     */ get session() {\n        return this.getCurrentValue(this.session$);\n    }\n    /**\n     * Will provide the settings of this call.\n     */ get settings() {\n        return this.getCurrentValue(this.settings$);\n    }\n    /**\n     * Will provide the transcribing state of this call.\n     */ get transcribing() {\n        return this.getCurrentValue(this.transcribing$);\n    }\n    /**\n     * Will provide the user who ended this call.\n     */ get endedBy() {\n        return this.getCurrentValue(this.endedBy$);\n    }\n    /**\n     * Will provide the thumbnails of this call, if enabled in the call settings.\n     */ get thumbnails() {\n        return this.getCurrentValue(this.thumbnails$);\n    }\n}\nconst getRtpMap = (line)=>{\n    // Example: a=rtpmap:110 opus/48000/2\n    const rtpRegex = /^a=rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/;\n    // The first captured group is the payload type number, the second captured group is the encoding name, the third captured group is the clock rate, and the fourth captured group is any additional parameters.\n    const rtpMatch = rtpRegex.exec(line);\n    if (rtpMatch) {\n        return {\n            original: rtpMatch[0],\n            payload: rtpMatch[1],\n            codec: rtpMatch[2]\n        };\n    }\n};\nconst getFmtp = (line)=>{\n    // Example: a=fmtp:111 minptime=10; useinbandfec=1\n    const fmtpRegex = /^a=fmtp:(\\d*) (.*)/;\n    const fmtpMatch = fmtpRegex.exec(line);\n    // The first captured group is the payload type number, the second captured group is any additional parameters.\n    if (fmtpMatch) {\n        return {\n            original: fmtpMatch[0],\n            payload: fmtpMatch[1],\n            config: fmtpMatch[2]\n        };\n    }\n};\n/**\n * gets the media section for the specified media type.\n * The media section contains the media type, port, codec, and payload type.\n * Example: m=video 9 UDP/TLS/RTP/SAVPF 100 101 96 97 35 36 102 125 127\n */ const getMedia = (line, mediaType)=>{\n    const regex = new RegExp(`(m=${mediaType} \\\\d+ [\\\\w/]+) ([\\\\d\\\\s]+)`);\n    const match = regex.exec(line);\n    if (match) {\n        return {\n            original: match[0],\n            mediaWithPorts: match[1],\n            codecOrder: match[2]\n        };\n    }\n};\nconst getMediaSection = (sdp, mediaType)=>{\n    let media;\n    const rtpMap = [];\n    const fmtp = [];\n    let isTheRequiredMediaSection = false;\n    sdp.split(/(\\r\\n|\\r|\\n)/).forEach((line)=>{\n        const isValidLine = /^([a-z])=(.*)/.test(line);\n        if (!isValidLine) return;\n        /*\n          NOTE: according to https://www.rfc-editor.org/rfc/rfc8866.pdf\n          Each media description starts with an \"m=\" line and continues to the next media description or the end of the whole session description, whichever comes first\n        */ const type = line[0];\n        if (type === \"m\") {\n            const _media = getMedia(line, mediaType);\n            isTheRequiredMediaSection = !!_media;\n            if (_media) {\n                media = _media;\n            }\n        } else if (isTheRequiredMediaSection && type === \"a\") {\n            const rtpMapLine = getRtpMap(line);\n            const fmtpLine = getFmtp(line);\n            if (rtpMapLine) {\n                rtpMap.push(rtpMapLine);\n            } else if (fmtpLine) {\n                fmtp.push(fmtpLine);\n            }\n        }\n    });\n    if (media) {\n        return {\n            media,\n            rtpMap,\n            fmtp\n        };\n    }\n};\n/**\n * Gets the fmtp line corresponding to opus\n */ const getOpusFmtp = (sdp)=>{\n    const section = getMediaSection(sdp, \"audio\");\n    const rtpMap = section?.rtpMap.find((r)=>r.codec.toLowerCase() === \"opus\");\n    const codecId = rtpMap?.payload;\n    if (codecId) {\n        return section?.fmtp.find((f)=>f.payload === codecId);\n    }\n};\n/**\n * Returns an SDP with DTX enabled or disabled.\n */ const toggleDtx = (sdp, enable)=>{\n    const opusFmtp = getOpusFmtp(sdp);\n    if (opusFmtp) {\n        const matchDtx = /usedtx=(\\d)/.exec(opusFmtp.config);\n        const requiredDtxConfig = `usedtx=${enable ? \"1\" : \"0\"}`;\n        if (matchDtx) {\n            const newFmtp = opusFmtp.original.replace(/usedtx=(\\d)/, requiredDtxConfig);\n            return sdp.replace(opusFmtp.original, newFmtp);\n        } else {\n            const newFmtp = `${opusFmtp.original};${requiredDtxConfig}`;\n            return sdp.replace(opusFmtp.original, newFmtp);\n        }\n    }\n    return sdp;\n};\n/**\n * Enables high-quality audio through SDP munging for the given trackMid.\n *\n * @param sdp the SDP to munge.\n * @param trackMid the trackMid.\n * @param maxBitrate the max bitrate to set.\n */ const enableHighQualityAudio = (sdp, trackMid, maxBitrate = 510000)=>{\n    maxBitrate = Math.max(Math.min(maxBitrate, 510000), 96000);\n    const parsedSdp = sdp_transform__WEBPACK_IMPORTED_MODULE_3__.parse(sdp);\n    const audioMedia = parsedSdp.media.find((m)=>m.type === \"audio\" && String(m.mid) === trackMid);\n    if (!audioMedia) return sdp;\n    const opusRtp = audioMedia.rtp.find((r)=>r.codec === \"opus\");\n    if (!opusRtp) return sdp;\n    const opusFmtp = audioMedia.fmtp.find((f)=>f.payload === opusRtp.payload);\n    if (!opusFmtp) return sdp;\n    // enable stereo, if not already enabled\n    if (opusFmtp.config.match(/stereo=(\\d)/)) {\n        opusFmtp.config = opusFmtp.config.replace(/stereo=(\\d)/, \"stereo=1\");\n    } else {\n        opusFmtp.config = `${opusFmtp.config};stereo=1`;\n    }\n    // set maxaveragebitrate, to the given value\n    if (opusFmtp.config.match(/maxaveragebitrate=(\\d*)/)) {\n        opusFmtp.config = opusFmtp.config.replace(/maxaveragebitrate=(\\d*)/, `maxaveragebitrate=${maxBitrate}`);\n    } else {\n        opusFmtp.config = `${opusFmtp.config};maxaveragebitrate=${maxBitrate}`;\n    }\n    return sdp_transform__WEBPACK_IMPORTED_MODULE_3__.write(parsedSdp);\n};\n/**\n * The `Publisher` is responsible for publishing/unpublishing media streams to/from the SFU\n *\n * @internal\n */ class Publisher {\n    /**\n     * Constructs a new `Publisher` instance.\n     *\n     * @param connectionConfig the connection configuration to use.\n     * @param sfuClient the SFU client to use.\n     * @param state the call state to use.\n     * @param dispatcher the dispatcher to use.\n     * @param isDtxEnabled whether DTX is enabled.\n     * @param isRedEnabled whether RED is enabled.\n     * @param iceRestartDelay the delay in milliseconds to wait before restarting ICE once connection goes to `disconnected` state.\n     * @param onUnrecoverableError a callback to call when an unrecoverable error occurs.\n     * @param logTag the log tag to use.\n     */ constructor({ connectionConfig, sfuClient, dispatcher, state, isDtxEnabled, isRedEnabled, onUnrecoverableError, logTag }){\n        this.transceiverRegistry = {\n            [TrackType.AUDIO]: undefined,\n            [TrackType.VIDEO]: undefined,\n            [TrackType.SCREEN_SHARE]: undefined,\n            [TrackType.SCREEN_SHARE_AUDIO]: undefined,\n            [TrackType.UNSPECIFIED]: undefined\n        };\n        this.publishOptionsPerTrackType = new Map();\n        /**\n         * An array maintaining the order how transceivers were added to the peer connection.\n         * This is needed because some browsers (Firefox) don't reliably report\n         * trackId and `mid` parameters.\n         *\n         * @internal\n         */ this.transceiverInitOrder = [];\n        this.trackKindMapping = {\n            [TrackType.AUDIO]: \"audio\",\n            [TrackType.VIDEO]: \"video\",\n            [TrackType.SCREEN_SHARE]: \"video\",\n            [TrackType.SCREEN_SHARE_AUDIO]: \"audio\",\n            [TrackType.UNSPECIFIED]: undefined\n        };\n        this.trackLayersCache = {\n            [TrackType.AUDIO]: undefined,\n            [TrackType.VIDEO]: undefined,\n            [TrackType.SCREEN_SHARE]: undefined,\n            [TrackType.SCREEN_SHARE_AUDIO]: undefined,\n            [TrackType.UNSPECIFIED]: undefined\n        };\n        this.isIceRestarting = false;\n        this.createPeerConnection = (connectionConfig)=>{\n            const pc = new RTCPeerConnection(connectionConfig);\n            pc.addEventListener(\"icecandidate\", this.onIceCandidate);\n            pc.addEventListener(\"negotiationneeded\", this.onNegotiationNeeded);\n            pc.addEventListener(\"icecandidateerror\", this.onIceCandidateError);\n            pc.addEventListener(\"iceconnectionstatechange\", this.onIceConnectionStateChange);\n            pc.addEventListener(\"icegatheringstatechange\", this.onIceGatheringStateChange);\n            pc.addEventListener(\"signalingstatechange\", this.onSignalingStateChange);\n            return pc;\n        };\n        /**\n         * Closes the publisher PeerConnection and cleans up the resources.\n         */ this.close = ({ stopTracks })=>{\n            if (stopTracks) {\n                this.stopPublishing();\n                Object.keys(this.transceiverRegistry).forEach((trackType)=>{\n                    // @ts-ignore\n                    this.transceiverRegistry[trackType] = undefined;\n                });\n                Object.keys(this.trackLayersCache).forEach((trackType)=>{\n                    // @ts-ignore\n                    this.trackLayersCache[trackType] = undefined;\n                });\n            }\n            this.detachEventHandlers();\n            this.pc.close();\n        };\n        /**\n         * Detaches the event handlers from the `RTCPeerConnection`.\n         * This is useful when we want to replace the `RTCPeerConnection`\n         * instance with a new one (in case of migration).\n         */ this.detachEventHandlers = ()=>{\n            this.unsubscribeOnIceRestart();\n            this.pc.removeEventListener(\"icecandidate\", this.onIceCandidate);\n            this.pc.removeEventListener(\"negotiationneeded\", this.onNegotiationNeeded);\n            this.pc.removeEventListener(\"icecandidateerror\", this.onIceCandidateError);\n            this.pc.removeEventListener(\"iceconnectionstatechange\", this.onIceConnectionStateChange);\n            this.pc.removeEventListener(\"icegatheringstatechange\", this.onIceGatheringStateChange);\n            this.pc.removeEventListener(\"signalingstatechange\", this.onSignalingStateChange);\n        };\n        /**\n         * Starts publishing the given track of the given media stream.\n         *\n         * Consecutive calls to this method will replace the stream.\n         * The previous stream will be stopped.\n         *\n         * @param mediaStream the media stream to publish.\n         * @param track the track to publish.\n         * @param trackType the track type to publish.\n         * @param opts the optional publish options to use.\n         */ this.publishStream = async (mediaStream, track, trackType, opts = {})=>{\n            if (track.readyState === \"ended\") {\n                throw new Error(`Can't publish a track that has ended already.`);\n            }\n            let transceiver = this.pc.getTransceivers().find((t)=>t === this.transceiverRegistry[trackType] && t.sender.track && t.sender.track?.kind === this.trackKindMapping[trackType]);\n            /**\n             * An event handler which listens for the 'ended' event on the track.\n             * Once the track has ended, it will notify the SFU and update the state.\n             */ const handleTrackEnded = ()=>{\n                this.logger(\"info\", `Track ${TrackType[trackType]} has ended abruptly, notifying the SFU`);\n                // cleanup, this event listener needs to run only once.\n                track.removeEventListener(\"ended\", handleTrackEnded);\n                this.notifyTrackMuteStateChanged(mediaStream, trackType, true).catch((err)=>this.logger(\"warn\", `Couldn't notify track mute state`, err));\n            };\n            if (!transceiver) {\n                const { settings } = this.state;\n                const targetResolution = settings?.video.target_resolution;\n                const screenShareBitrate = settings?.screensharing.target_resolution?.bitrate;\n                const videoEncodings = trackType === TrackType.VIDEO ? findOptimalVideoLayers(track, targetResolution, opts) : trackType === TrackType.SCREEN_SHARE ? findOptimalScreenSharingLayers(track, opts, screenShareBitrate) : undefined;\n                // listen for 'ended' event on the track as it might be ended abruptly\n                // by an external factor as permission revokes, device disconnected, etc.\n                // keep in mind that `track.stop()` doesn't trigger this event.\n                track.addEventListener(\"ended\", handleTrackEnded);\n                if (!track.enabled) {\n                    track.enabled = true;\n                }\n                transceiver = this.pc.addTransceiver(track, {\n                    direction: \"sendonly\",\n                    streams: trackType === TrackType.VIDEO || trackType === TrackType.SCREEN_SHARE ? [\n                        mediaStream\n                    ] : undefined,\n                    sendEncodings: videoEncodings\n                });\n                this.logger(\"debug\", `Added ${TrackType[trackType]} transceiver`);\n                this.transceiverInitOrder.push(trackType);\n                this.transceiverRegistry[trackType] = transceiver;\n                this.publishOptionsPerTrackType.set(trackType, opts);\n                const { preferredCodec } = opts;\n                const codec = isReactNative() && trackType === TrackType.VIDEO && !preferredCodec ? getRNOptimalCodec() : preferredCodec;\n                const codecPreferences = \"setCodecPreferences\" in transceiver ? this.getCodecPreferences(trackType, codec) : undefined;\n                if (codecPreferences) {\n                    this.logger(\"info\", `Setting ${TrackType[trackType]} codec preferences`, codecPreferences);\n                    try {\n                        transceiver.setCodecPreferences(codecPreferences);\n                    } catch (err) {\n                        this.logger(\"warn\", `Couldn't set codec preferences`, err);\n                    }\n                }\n            } else {\n                const previousTrack = transceiver.sender.track;\n                // don't stop the track if we are re-publishing the same track\n                if (previousTrack && previousTrack !== track) {\n                    previousTrack.stop();\n                    previousTrack.removeEventListener(\"ended\", handleTrackEnded);\n                    track.addEventListener(\"ended\", handleTrackEnded);\n                }\n                if (!track.enabled) {\n                    track.enabled = true;\n                }\n                await transceiver.sender.replaceTrack(track);\n            }\n            await this.notifyTrackMuteStateChanged(mediaStream, trackType, false);\n        };\n        /**\n         * Stops publishing the given track type to the SFU, if it is currently being published.\n         * Underlying track will be stopped and removed from the publisher.\n         * @param trackType the track type to unpublish.\n         * @param stopTrack specifies whether track should be stopped or just disabled\n         */ this.unpublishStream = async (trackType, stopTrack)=>{\n            const transceiver = this.pc.getTransceivers().find((t)=>t === this.transceiverRegistry[trackType] && t.sender.track);\n            if (transceiver && transceiver.sender.track && (stopTrack ? transceiver.sender.track.readyState === \"live\" : transceiver.sender.track.enabled)) {\n                stopTrack ? transceiver.sender.track.stop() : transceiver.sender.track.enabled = false;\n                // We don't need to notify SFU if unpublishing in response to remote soft mute\n                if (this.state.localParticipant?.publishedTracks.includes(trackType)) {\n                    await this.notifyTrackMuteStateChanged(undefined, trackType, true);\n                }\n            }\n        };\n        /**\n         * Returns true if the given track type is currently being published to the SFU.\n         *\n         * @param trackType the track type to check.\n         */ this.isPublishing = (trackType)=>{\n            const transceiver = this.transceiverRegistry[trackType];\n            if (!transceiver || !transceiver.sender) return false;\n            const track = transceiver.sender.track;\n            return !!track && track.readyState === \"live\" && track.enabled;\n        };\n        this.notifyTrackMuteStateChanged = async (mediaStream, trackType, isMuted)=>{\n            await this.sfuClient.updateMuteState(trackType, isMuted);\n            const audioOrVideoOrScreenShareStream = trackTypeToParticipantStreamKey(trackType);\n            if (!audioOrVideoOrScreenShareStream) return;\n            if (isMuted) {\n                this.state.updateParticipant(this.sfuClient.sessionId, (p)=>({\n                        publishedTracks: p.publishedTracks.filter((t)=>t !== trackType),\n                        [audioOrVideoOrScreenShareStream]: undefined\n                    }));\n            } else {\n                this.state.updateParticipant(this.sfuClient.sessionId, (p)=>{\n                    return {\n                        publishedTracks: p.publishedTracks.includes(trackType) ? p.publishedTracks : [\n                            ...p.publishedTracks,\n                            trackType\n                        ],\n                        [audioOrVideoOrScreenShareStream]: mediaStream\n                    };\n                });\n            }\n        };\n        /**\n         * Stops publishing all tracks and stop all tracks.\n         */ this.stopPublishing = ()=>{\n            this.logger(\"debug\", \"Stopping publishing all tracks\");\n            this.pc.getSenders().forEach((s)=>{\n                s.track?.stop();\n                if (this.pc.signalingState !== \"closed\") {\n                    this.pc.removeTrack(s);\n                }\n            });\n        };\n        this.updateVideoPublishQuality = async (enabledLayers)=>{\n            this.logger(\"info\", \"Update publish quality, requested layers by SFU:\", enabledLayers);\n            const videoSender = this.transceiverRegistry[TrackType.VIDEO]?.sender;\n            if (!videoSender) {\n                this.logger(\"warn\", \"Update publish quality, no video sender found.\");\n                return;\n            }\n            const params = videoSender.getParameters();\n            if (params.encodings.length === 0) {\n                this.logger(\"warn\", \"Update publish quality, No suitable video encoding quality found\");\n                return;\n            }\n            let changed = false;\n            let enabledRids = enabledLayers.filter((ly)=>ly.active).map((ly)=>ly.name);\n            params.encodings.forEach((enc)=>{\n                // flip 'active' flag only when necessary\n                const shouldEnable = enabledRids.includes(enc.rid);\n                if (shouldEnable !== enc.active) {\n                    enc.active = shouldEnable;\n                    changed = true;\n                }\n                if (shouldEnable) {\n                    let layer = enabledLayers.find((vls)=>vls.name === enc.rid);\n                    if (layer !== undefined) {\n                        if (layer.scaleResolutionDownBy >= 1 && layer.scaleResolutionDownBy !== enc.scaleResolutionDownBy) {\n                            this.logger(\"debug\", \"[dynascale]: setting scaleResolutionDownBy from server\", \"layer\", layer.name, \"scale-resolution-down-by\", layer.scaleResolutionDownBy);\n                            enc.scaleResolutionDownBy = layer.scaleResolutionDownBy;\n                            changed = true;\n                        }\n                        if (layer.maxBitrate > 0 && layer.maxBitrate !== enc.maxBitrate) {\n                            this.logger(\"debug\", \"[dynascale] setting max-bitrate from the server\", \"layer\", layer.name, \"max-bitrate\", layer.maxBitrate);\n                            enc.maxBitrate = layer.maxBitrate;\n                            changed = true;\n                        }\n                        if (layer.maxFramerate > 0 && layer.maxFramerate !== enc.maxFramerate) {\n                            this.logger(\"debug\", \"[dynascale]: setting maxFramerate from server\", \"layer\", layer.name, \"max-framerate\", layer.maxFramerate);\n                            enc.maxFramerate = layer.maxFramerate;\n                            changed = true;\n                        }\n                    }\n                }\n            });\n            const activeLayers = params.encodings.filter((e)=>e.active);\n            if (changed) {\n                await videoSender.setParameters(params);\n                this.logger(\"info\", `Update publish quality, enabled rids: `, activeLayers);\n            } else {\n                this.logger(\"info\", `Update publish quality, no change: `, activeLayers);\n            }\n        };\n        /**\n         * Returns the result of the `RTCPeerConnection.getStats()` method\n         * @param selector\n         * @returns\n         */ this.getStats = (selector)=>{\n            return this.pc.getStats(selector);\n        };\n        this.getCodecPreferences = (trackType, preferredCodec)=>{\n            if (trackType === TrackType.VIDEO) {\n                return getPreferredCodecs(\"video\", preferredCodec || \"vp8\");\n            }\n            if (trackType === TrackType.AUDIO) {\n                const defaultAudioCodec = this.isRedEnabled ? \"red\" : \"opus\";\n                const codecToRemove = !this.isRedEnabled ? \"red\" : undefined;\n                return getPreferredCodecs(\"audio\", preferredCodec ?? defaultAudioCodec, codecToRemove);\n            }\n        };\n        this.onIceCandidate = (e)=>{\n            const { candidate } = e;\n            if (!candidate) {\n                this.logger(\"debug\", \"null ice candidate\");\n                return;\n            }\n            this.sfuClient.iceTrickle({\n                iceCandidate: getIceCandidate(candidate),\n                peerType: PeerType.PUBLISHER_UNSPECIFIED\n            }).catch((err)=>{\n                this.logger(\"warn\", `ICETrickle failed`, err);\n            });\n        };\n        /**\n         * Sets the SFU client to use.\n         *\n         * @param sfuClient the SFU client to use.\n         */ this.setSfuClient = (sfuClient)=>{\n            this.sfuClient = sfuClient;\n        };\n        /**\n         * Restarts the ICE connection and renegotiates with the SFU.\n         */ this.restartIce = async ()=>{\n            this.logger(\"debug\", \"Restarting ICE connection\");\n            const signalingState = this.pc.signalingState;\n            if (this.isIceRestarting || signalingState === \"have-local-offer\") {\n                this.logger(\"debug\", \"ICE restart is already in progress\");\n                return;\n            }\n            await this.negotiate({\n                iceRestart: true\n            });\n        };\n        this.onNegotiationNeeded = ()=>{\n            this.negotiate().catch((err)=>{\n                this.logger(\"error\", `Negotiation failed.`, err);\n                this.onUnrecoverableError?.();\n            });\n        };\n        /**\n         * Initiates a new offer/answer exchange with the currently connected SFU.\n         *\n         * @param options the optional offer options to use.\n         */ this.negotiate = async (options)=>{\n            const offer = await this.pc.createOffer(options);\n            let sdp = this.mungeCodecs(offer.sdp);\n            if (sdp && this.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n                sdp = this.enableHighQualityAudio(sdp);\n            }\n            // set the munged SDP back to the offer\n            offer.sdp = sdp;\n            const trackInfos = this.getAnnouncedTracks(offer.sdp);\n            if (trackInfos.length === 0) {\n                throw new Error(`Can't negotiate without announcing any tracks`);\n            }\n            this.isIceRestarting = options?.iceRestart ?? false;\n            await this.pc.setLocalDescription(offer);\n            try {\n                const { response } = await this.sfuClient.setPublisher({\n                    sdp: offer.sdp || \"\",\n                    tracks: trackInfos\n                });\n                if (response.error) throw new Error(response.error.message);\n                await this.pc.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: response.sdp\n                });\n            } finally{\n                this.isIceRestarting = false;\n            }\n            this.sfuClient.iceTrickleBuffer.publisherCandidates.subscribe(async (candidate)=>{\n                try {\n                    const iceCandidate = JSON.parse(candidate.iceCandidate);\n                    await this.pc.addIceCandidate(iceCandidate);\n                } catch (e) {\n                    this.logger(\"warn\", `ICE candidate error`, e, candidate);\n                }\n            });\n        };\n        this.enableHighQualityAudio = (sdp)=>{\n            const transceiver = this.transceiverRegistry[TrackType.SCREEN_SHARE_AUDIO];\n            if (!transceiver) return sdp;\n            const mid = this.extractMid(transceiver, sdp, TrackType.SCREEN_SHARE_AUDIO);\n            return enableHighQualityAudio(sdp, mid);\n        };\n        this.mungeCodecs = (sdp)=>{\n            if (sdp) {\n                sdp = toggleDtx(sdp, this.isDtxEnabled);\n            }\n            return sdp;\n        };\n        this.extractMid = (transceiver, sdp, trackType)=>{\n            if (transceiver.mid) return transceiver.mid;\n            if (!sdp) {\n                this.logger(\"warn\", \"No SDP found. Returning empty mid\");\n                return \"\";\n            }\n            this.logger(\"debug\", `No 'mid' found for track. Trying to find it from the Offer SDP`);\n            const track = transceiver.sender.track;\n            const parsedSdp = sdp_transform__WEBPACK_IMPORTED_MODULE_3__.parse(sdp);\n            const media = parsedSdp.media.find((m)=>{\n                return m.type === track.kind && // if `msid` is not present, we assume that the track is the first one\n                (m.msid?.includes(track.id) ?? true);\n            });\n            if (typeof media?.mid === \"undefined\") {\n                this.logger(\"debug\", `No mid found in SDP for track type ${track.kind} and id ${track.id}. Attempting to find it heuristically`);\n                const heuristicMid = this.transceiverInitOrder.indexOf(trackType);\n                if (heuristicMid !== -1) {\n                    return String(heuristicMid);\n                }\n                this.logger(\"debug\", \"No heuristic mid found. Returning empty mid\");\n                return \"\";\n            }\n            return String(media.mid);\n        };\n        /**\n         * Returns a list of tracks that are currently being published.\n         *\n         * @internal\n         * @param sdp an optional SDP to extract the `mid` from.\n         */ this.getAnnouncedTracks = (sdp)=>{\n            sdp = sdp || this.pc.localDescription?.sdp;\n            const { settings } = this.state;\n            const targetResolution = settings?.video.target_resolution;\n            return this.pc.getTransceivers().filter((t)=>t.direction === \"sendonly\" && t.sender.track).map((transceiver)=>{\n                const trackType = Number(Object.keys(this.transceiverRegistry).find((key)=>this.transceiverRegistry[key] === transceiver));\n                const track = transceiver.sender.track;\n                let optimalLayers;\n                const isTrackLive = track.readyState === \"live\";\n                if (isTrackLive) {\n                    const publishOpts = this.publishOptionsPerTrackType.get(trackType);\n                    optimalLayers = trackType === TrackType.VIDEO ? findOptimalVideoLayers(track, targetResolution, publishOpts) : trackType === TrackType.SCREEN_SHARE ? findOptimalScreenSharingLayers(track, publishOpts) : [];\n                    this.trackLayersCache[trackType] = optimalLayers;\n                } else {\n                    // we report the last known optimal layers for ended tracks\n                    optimalLayers = this.trackLayersCache[trackType] || [];\n                    this.logger(\"debug\", `Track ${TrackType[trackType]} is ended. Announcing last known optimal layers`, optimalLayers);\n                }\n                const layers = optimalLayers.map((optimalLayer)=>({\n                        rid: optimalLayer.rid || \"\",\n                        bitrate: optimalLayer.maxBitrate || 0,\n                        fps: optimalLayer.maxFramerate || 0,\n                        quality: this.ridToVideoQuality(optimalLayer.rid || \"\"),\n                        videoDimension: {\n                            width: optimalLayer.width,\n                            height: optimalLayer.height\n                        }\n                    }));\n                const isAudioTrack = [\n                    TrackType.AUDIO,\n                    TrackType.SCREEN_SHARE_AUDIO\n                ].includes(trackType);\n                const trackSettings = track.getSettings();\n                const isStereo = isAudioTrack && trackSettings.channelCount === 2;\n                return {\n                    trackId: track.id,\n                    layers: layers,\n                    trackType,\n                    mid: this.extractMid(transceiver, sdp, trackType),\n                    stereo: isStereo,\n                    dtx: isAudioTrack && this.isDtxEnabled,\n                    red: isAudioTrack && this.isRedEnabled,\n                    muted: !isTrackLive\n                };\n            });\n        };\n        this.onIceCandidateError = (e)=>{\n            const errorMessage = e instanceof RTCPeerConnectionIceErrorEvent && `${e.errorCode}: ${e.errorText}`;\n            const iceState = this.pc.iceConnectionState;\n            const logLevel = iceState === \"connected\" || iceState === \"checking\" ? \"debug\" : \"warn\";\n            this.logger(logLevel, `ICE Candidate error`, errorMessage);\n        };\n        this.onIceConnectionStateChange = ()=>{\n            const state = this.pc.iceConnectionState;\n            this.logger(\"debug\", `ICE Connection state changed to`, state);\n            if (this.state.callingState === CallingState.RECONNECTING) return;\n            if (state === \"failed\" || state === \"disconnected\") {\n                this.logger(\"debug\", `Attempting to restart ICE`);\n                this.restartIce().catch((e)=>{\n                    this.logger(\"error\", `ICE restart error`, e);\n                    this.onUnrecoverableError?.();\n                });\n            }\n        };\n        this.onIceGatheringStateChange = ()=>{\n            this.logger(\"debug\", `ICE Gathering State`, this.pc.iceGatheringState);\n        };\n        this.onSignalingStateChange = ()=>{\n            this.logger(\"debug\", `Signaling state changed`, this.pc.signalingState);\n        };\n        this.ridToVideoQuality = (rid)=>{\n            return rid === \"q\" ? VideoQuality.LOW_UNSPECIFIED : rid === \"h\" ? VideoQuality.MID : VideoQuality.HIGH; // default to HIGH\n        };\n        this.logger = getLogger([\n            \"Publisher\",\n            logTag\n        ]);\n        this.pc = this.createPeerConnection(connectionConfig);\n        this.sfuClient = sfuClient;\n        this.state = state;\n        this.isDtxEnabled = isDtxEnabled;\n        this.isRedEnabled = isRedEnabled;\n        this.onUnrecoverableError = onUnrecoverableError;\n        this.unsubscribeOnIceRestart = dispatcher.on(\"iceRestart\", (iceRestart)=>{\n            if (iceRestart.peerType !== PeerType.PUBLISHER_UNSPECIFIED) return;\n            this.restartIce().catch((err)=>{\n                this.logger(\"warn\", `ICERestart failed`, err);\n                this.onUnrecoverableError?.();\n            });\n        });\n    }\n}\n/**\n * A wrapper around the `RTCPeerConnection` that handles the incoming\n * media streams from the SFU.\n *\n * @internal\n */ class Subscriber {\n    /**\n     * Constructs a new `Subscriber` instance.\n     *\n     * @param sfuClient the SFU client to use.\n     * @param dispatcher the dispatcher to use.\n     * @param state the state of the call.\n     * @param connectionConfig the connection configuration to use.\n     * @param iceRestartDelay the delay in milliseconds to wait before restarting ICE when connection goes to `disconnected` state.\n     * @param onUnrecoverableError a callback to call when an unrecoverable error occurs.\n     * @param logTag a tag to use for logging.\n     */ constructor({ sfuClient, dispatcher, state, connectionConfig, onUnrecoverableError, logTag }){\n        this.isIceRestarting = false;\n        /**\n         * Creates a new `RTCPeerConnection` instance with the given configuration.\n         *\n         * @param connectionConfig the connection configuration to use.\n         */ this.createPeerConnection = (connectionConfig)=>{\n            const pc = new RTCPeerConnection(connectionConfig);\n            pc.addEventListener(\"icecandidate\", this.onIceCandidate);\n            pc.addEventListener(\"track\", this.handleOnTrack);\n            pc.addEventListener(\"icecandidateerror\", this.onIceCandidateError);\n            pc.addEventListener(\"iceconnectionstatechange\", this.onIceConnectionStateChange);\n            pc.addEventListener(\"icegatheringstatechange\", this.onIceGatheringStateChange);\n            return pc;\n        };\n        /**\n         * Closes the `RTCPeerConnection` and unsubscribes from the dispatcher.\n         */ this.close = ()=>{\n            this.detachEventHandlers();\n            this.pc.close();\n        };\n        /**\n         * Detaches the event handlers from the `RTCPeerConnection`.\n         * This is useful when we want to replace the `RTCPeerConnection`\n         * instance with a new one (in case of migration).\n         */ this.detachEventHandlers = ()=>{\n            this.unregisterOnSubscriberOffer();\n            this.unregisterOnIceRestart();\n            this.pc.removeEventListener(\"icecandidate\", this.onIceCandidate);\n            this.pc.removeEventListener(\"track\", this.handleOnTrack);\n            this.pc.removeEventListener(\"icecandidateerror\", this.onIceCandidateError);\n            this.pc.removeEventListener(\"iceconnectionstatechange\", this.onIceConnectionStateChange);\n            this.pc.removeEventListener(\"icegatheringstatechange\", this.onIceGatheringStateChange);\n        };\n        /**\n         * Returns the result of the `RTCPeerConnection.getStats()` method\n         * @param selector\n         * @returns\n         */ this.getStats = (selector)=>{\n            return this.pc.getStats(selector);\n        };\n        /**\n         * Sets the SFU client to use.\n         *\n         * @param sfuClient the SFU client to use.\n         */ this.setSfuClient = (sfuClient)=>{\n            this.sfuClient = sfuClient;\n        };\n        /**\n         * Restarts the ICE connection and renegotiates with the SFU.\n         */ this.restartIce = async ()=>{\n            this.logger(\"debug\", \"Restarting ICE connection\");\n            if (this.pc.signalingState === \"have-remote-offer\") {\n                this.logger(\"debug\", \"ICE restart is already in progress\");\n                return;\n            }\n            if (this.pc.connectionState === \"new\") {\n                this.logger(\"debug\", `ICE connection is not yet established, skipping restart.`);\n                return;\n            }\n            const previousIsIceRestarting = this.isIceRestarting;\n            try {\n                this.isIceRestarting = true;\n                await this.sfuClient.iceRestart({\n                    peerType: PeerType.SUBSCRIBER\n                });\n            } catch (e) {\n                // restore the previous state, as our intent for restarting ICE failed\n                this.isIceRestarting = previousIsIceRestarting;\n                throw e;\n            }\n        };\n        this.handleOnTrack = (e)=>{\n            const [primaryStream] = e.streams;\n            // example: `e3f6aaf8-b03d-4911-be36-83f47d37a76a:TRACK_TYPE_VIDEO`\n            const [trackId, rawTrackType] = primaryStream.id.split(\":\");\n            const participantToUpdate = this.state.participants.find((p)=>p.trackLookupPrefix === trackId);\n            this.logger(\"debug\", `[onTrack]: Got remote ${rawTrackType} track for userId: ${participantToUpdate?.userId}`, e.track.id, e.track);\n            const trackDebugInfo = `${participantToUpdate?.userId} ${rawTrackType}:${trackId}`;\n            e.track.addEventListener(\"mute\", ()=>{\n                this.logger(\"info\", `[onTrack]: Track muted: ${trackDebugInfo}`);\n            });\n            e.track.addEventListener(\"unmute\", ()=>{\n                this.logger(\"info\", `[onTrack]: Track unmuted: ${trackDebugInfo}`);\n            });\n            e.track.addEventListener(\"ended\", ()=>{\n                this.logger(\"info\", `[onTrack]: Track ended: ${trackDebugInfo}`);\n                this.state.removeOrphanedTrack(primaryStream.id);\n            });\n            const trackType = toTrackType(rawTrackType);\n            if (!trackType) {\n                return this.logger(\"error\", `Unknown track type: ${rawTrackType}`);\n            }\n            if (!participantToUpdate) {\n                this.logger(\"warn\", `[onTrack]: Received track for unknown participant: ${trackId}`, e);\n                this.state.registerOrphanedTrack({\n                    id: primaryStream.id,\n                    trackLookupPrefix: trackId,\n                    track: primaryStream,\n                    trackType\n                });\n                return;\n            }\n            const streamKindProp = trackTypeToParticipantStreamKey(trackType);\n            if (!streamKindProp) {\n                this.logger(\"error\", `Unknown track type: ${rawTrackType}`);\n                return;\n            }\n            const previousStream = participantToUpdate[streamKindProp];\n            if (previousStream) {\n                this.logger(\"info\", `[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${participantToUpdate.userId}`);\n                previousStream.getTracks().forEach((t)=>{\n                    t.stop();\n                    previousStream.removeTrack(t);\n                });\n            }\n            this.state.updateParticipant(participantToUpdate.sessionId, {\n                [streamKindProp]: primaryStream\n            });\n        };\n        this.onIceCandidate = (e)=>{\n            const { candidate } = e;\n            if (!candidate) {\n                this.logger(\"debug\", \"null ice candidate\");\n                return;\n            }\n            this.sfuClient.iceTrickle({\n                iceCandidate: getIceCandidate(candidate),\n                peerType: PeerType.SUBSCRIBER\n            }).catch((err)=>{\n                this.logger(\"warn\", `ICETrickle failed`, err);\n            });\n        };\n        this.negotiate = async (subscriberOffer)=>{\n            this.logger(\"info\", `Received subscriberOffer`, subscriberOffer);\n            await this.pc.setRemoteDescription({\n                type: \"offer\",\n                sdp: subscriberOffer.sdp\n            });\n            this.sfuClient.iceTrickleBuffer.subscriberCandidates.subscribe(async (candidate)=>{\n                try {\n                    const iceCandidate = JSON.parse(candidate.iceCandidate);\n                    await this.pc.addIceCandidate(iceCandidate);\n                } catch (e) {\n                    this.logger(\"warn\", `ICE candidate error`, [\n                        e,\n                        candidate\n                    ]);\n                }\n            });\n            const answer = await this.pc.createAnswer();\n            await this.pc.setLocalDescription(answer);\n            await this.sfuClient.sendAnswer({\n                peerType: PeerType.SUBSCRIBER,\n                sdp: answer.sdp || \"\"\n            });\n            this.isIceRestarting = false;\n        };\n        this.onIceConnectionStateChange = ()=>{\n            const state = this.pc.iceConnectionState;\n            this.logger(\"debug\", `ICE connection state changed`, state);\n            if (this.state.callingState === CallingState.RECONNECTING) return;\n            // do nothing when ICE is restarting\n            if (this.isIceRestarting) return;\n            if (state === \"failed\" || state === \"disconnected\") {\n                this.logger(\"debug\", `Attempting to restart ICE`);\n                this.restartIce().catch((e)=>{\n                    this.logger(\"error\", `ICE restart failed`, e);\n                    this.onUnrecoverableError?.();\n                });\n            }\n        };\n        this.onIceGatheringStateChange = ()=>{\n            this.logger(\"debug\", `ICE gathering state changed`, this.pc.iceGatheringState);\n        };\n        this.onIceCandidateError = (e)=>{\n            const errorMessage = e instanceof RTCPeerConnectionIceErrorEvent && `${e.errorCode}: ${e.errorText}`;\n            const iceState = this.pc.iceConnectionState;\n            const logLevel = iceState === \"connected\" || iceState === \"checking\" ? \"debug\" : \"warn\";\n            this.logger(logLevel, `ICE Candidate error`, errorMessage);\n        };\n        this.logger = getLogger([\n            \"Subscriber\",\n            logTag\n        ]);\n        this.sfuClient = sfuClient;\n        this.state = state;\n        this.onUnrecoverableError = onUnrecoverableError;\n        this.pc = this.createPeerConnection(connectionConfig);\n        const subscriberOfferConcurrencyTag = Symbol(\"subscriberOffer\");\n        this.unregisterOnSubscriberOffer = dispatcher.on(\"subscriberOffer\", (subscriberOffer)=>{\n            withoutConcurrency(subscriberOfferConcurrencyTag, ()=>{\n                return this.negotiate(subscriberOffer);\n            }).catch((err)=>{\n                this.logger(\"error\", `Negotiation failed.`, err);\n            });\n        });\n        const iceRestartConcurrencyTag = Symbol(\"iceRestart\");\n        this.unregisterOnIceRestart = dispatcher.on(\"iceRestart\", (iceRestart)=>{\n            withoutConcurrency(iceRestartConcurrencyTag, async ()=>{\n                if (iceRestart.peerType !== PeerType.SUBSCRIBER) return;\n                await this.restartIce();\n            }).catch((err)=>{\n                this.logger(\"error\", `ICERestart failed`, err);\n                this.onUnrecoverableError?.();\n            });\n        });\n    }\n}\nconst createWebSocketSignalChannel = (opts)=>{\n    const { endpoint, onMessage, logTag } = opts;\n    const logger = getLogger([\n        \"SfuClientWS\",\n        logTag\n    ]);\n    const ws = new WebSocket(endpoint);\n    ws.binaryType = \"arraybuffer\"; // do we need this?\n    ws.addEventListener(\"error\", (e)=>{\n        logger(\"error\", \"Signaling WS channel error\", e);\n    });\n    ws.addEventListener(\"close\", (e)=>{\n        logger(\"info\", \"Signaling WS channel is closed\", e);\n    });\n    ws.addEventListener(\"open\", (e)=>{\n        logger(\"info\", \"Signaling WS channel is open\", e);\n    });\n    ws.addEventListener(\"message\", (e)=>{\n        try {\n            const message = e.data instanceof ArrayBuffer ? SfuEvent.fromBinary(new Uint8Array(e.data)) : SfuEvent.fromJsonString(e.data.toString());\n            onMessage(message);\n        } catch (err) {\n            logger(\"error\", \"Failed to decode a message. Check whether the Proto models match.\", {\n                event: e,\n                error: err\n            });\n        }\n    });\n    return ws;\n};\n/**\n * Creates a new promise with resolvers.\n *\n * Based on:\n * - https://github.com/tc39/proposal-promise-with-resolvers/blob/main/polyfills.js\n */ const promiseWithResolvers = ()=>{\n    let resolve;\n    let reject;\n    const promise = new Promise((_resolve, _reject)=>{\n        resolve = _resolve;\n        reject = _reject;\n    });\n    let isResolved = false;\n    let isRejected = false;\n    const resolver = (value)=>{\n        isResolved = true;\n        resolve(value);\n    };\n    const rejecter = (reason)=>{\n        isRejected = true;\n        reject(reason);\n    };\n    return {\n        promise,\n        resolve: resolver,\n        reject: rejecter,\n        isResolved,\n        isRejected\n    };\n};\n/**\n * The client used for exchanging information with the SFU.\n */ class StreamSfuClient {\n    /**\n     * Constructs a new SFU client.\n     */ constructor({ dispatcher, credentials, sessionId, logTag, joinResponseTimeout = 5000, onSignalClose, streamClient }){\n        /**\n         * A buffer for ICE Candidates that are received before\n         * the Publisher and Subscriber Peer Connections are ready to handle them.\n         */ this.iceTrickleBuffer = new IceTrickleBuffer();\n        /**\n         * Flag to indicate if the client is in the process of leaving the call.\n         * This is set to `true` when the user initiates the leave process.\n         */ this.isLeaving = false;\n        this.pingIntervalInMs = 10 * 1000;\n        this.unhealthyTimeoutInMs = this.pingIntervalInMs + 5 * 1000;\n        this.restoreWebSocketConcurrencyTag = Symbol(\"recoverWebSocket\");\n        /**\n         * Promise that resolves when the JoinResponse is received.\n         * Rejects after a certain threshold if the response is not received.\n         */ this.joinResponseTask = promiseWithResolvers();\n        /**\n         * A controller to abort the current requests.\n         */ this.abortController = new AbortController();\n        this.createWebSocket = ()=>{\n            this.signalWs = createWebSocketSignalChannel({\n                logTag: this.logTag,\n                endpoint: `${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,\n                onMessage: (message)=>{\n                    this.lastMessageTimestamp = new Date();\n                    this.scheduleConnectionCheck();\n                    this.dispatcher.dispatch(message, this.logTag);\n                }\n            });\n            this.signalWs.addEventListener(\"close\", this.handleWebSocketClose);\n            this.signalWs.addEventListener(\"error\", this.restoreWebSocket);\n            this.signalReady = new Promise((resolve)=>{\n                const onOpen = ()=>{\n                    this.signalWs.removeEventListener(\"open\", onOpen);\n                    resolve(this.signalWs);\n                };\n                this.signalWs.addEventListener(\"open\", onOpen);\n            });\n        };\n        this.cleanUpWebSocket = ()=>{\n            this.signalWs.removeEventListener(\"error\", this.restoreWebSocket);\n            this.signalWs.removeEventListener(\"close\", this.handleWebSocketClose);\n        };\n        this.restoreWebSocket = ()=>{\n            withoutConcurrency(this.restoreWebSocketConcurrencyTag, async ()=>{\n                await this.networkAvailableTask?.promise;\n                this.logger(\"debug\", \"Restoring SFU WS connection\");\n                this.cleanUpWebSocket();\n                await sleep(500);\n                this.createWebSocket();\n            }).catch((err)=>this.logger(\"debug\", `Can't restore WS connection`, err));\n        };\n        this.handleWebSocketClose = ()=>{\n            this.signalWs.removeEventListener(\"close\", this.handleWebSocketClose);\n            clearInterval(this.keepAliveInterval);\n            clearTimeout(this.connectionCheckTimeout);\n            this.onSignalClose?.();\n        };\n        this.close = (code = StreamSfuClient.NORMAL_CLOSURE, reason)=>{\n            if (this.signalWs.readyState === WebSocket.OPEN) {\n                this.logger(\"debug\", `Closing SFU WS connection: ${code} - ${reason}`);\n                this.signalWs.close(code, `js-client: ${reason}`);\n                this.cleanUpWebSocket();\n            }\n            this.dispose();\n        };\n        this.dispose = ()=>{\n            this.logger(\"debug\", \"Disposing SFU client\");\n            this.unsubscribeIceTrickle();\n            this.unsubscribeNetworkChanged();\n            clearInterval(this.keepAliveInterval);\n            clearTimeout(this.connectionCheckTimeout);\n            clearTimeout(this.migrateAwayTimeout);\n            this.abortController.abort();\n            this.migrationTask?.resolve();\n        };\n        this.leaveAndClose = async (reason)=>{\n            await this.joinTask;\n            try {\n                this.isLeaving = true;\n                await this.notifyLeave(reason);\n            } catch (err) {\n                this.logger(\"debug\", \"Error notifying SFU about leaving call\", err);\n            }\n            this.close(StreamSfuClient.NORMAL_CLOSURE, reason.substring(0, 115));\n        };\n        this.updateSubscriptions = async (tracks)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.updateSubscriptions({\n                    sessionId: this.sessionId,\n                    tracks\n                }), this.abortController.signal);\n        };\n        this.setPublisher = async (data)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.setPublisher({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.sendAnswer = async (data)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.sendAnswer({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.iceTrickle = async (data)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.iceTrickle({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.iceRestart = async (data)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.iceRestart({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.updateMuteState = async (trackType, muted)=>{\n            await this.joinTask;\n            return this.updateMuteStates({\n                muteStates: [\n                    {\n                        trackType,\n                        muted\n                    }\n                ]\n            });\n        };\n        this.updateMuteStates = async (data)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.updateMuteStates({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.sendStats = async (stats)=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.sendStats({\n                    ...stats,\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.startNoiseCancellation = async ()=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.startNoiseCancellation({\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.stopNoiseCancellation = async ()=>{\n            await this.joinTask;\n            return retryable(()=>this.rpc.stopNoiseCancellation({\n                    sessionId: this.sessionId\n                }), this.abortController.signal);\n        };\n        this.enterMigration = async (opts = {})=>{\n            this.isLeaving = true;\n            const { timeout = 7 * 1000 } = opts;\n            this.migrationTask?.reject(new Error(\"Cancelled previous migration\"));\n            const task = this.migrationTask = promiseWithResolvers();\n            const unsubscribe = this.dispatcher.on(\"participantMigrationComplete\", ()=>{\n                unsubscribe();\n                clearTimeout(this.migrateAwayTimeout);\n                task.resolve();\n            });\n            this.migrateAwayTimeout = setTimeout(()=>{\n                unsubscribe();\n                task.reject(new Error(`Migration (${this.logTag}) failed to complete in ${timeout}ms`));\n            }, timeout);\n            return task.promise;\n        };\n        this.join = async (data)=>{\n            // wait for the signal web socket to be ready before sending \"joinRequest\"\n            await this.signalReady;\n            if (this.joinResponseTask.isResolved || this.joinResponseTask.isRejected) {\n                // we need to lock the RPC requests until we receive a JoinResponse.\n                // that's why we have this primitive lock mechanism.\n                // the client starts with already initialized joinResponseTask,\n                // and this code creates a new one for the next join request.\n                this.joinResponseTask = promiseWithResolvers();\n            }\n            // capture a reference to the current joinResponseTask as it might\n            // be replaced with a new one in case a second join request is made\n            const current = this.joinResponseTask;\n            let timeoutId;\n            const unsubscribe = this.dispatcher.on(\"joinResponse\", (joinResponse)=>{\n                this.logger(\"debug\", \"Received joinResponse\", joinResponse);\n                clearTimeout(timeoutId);\n                unsubscribe();\n                this.keepAlive();\n                current.resolve(joinResponse);\n            });\n            timeoutId = setTimeout(()=>{\n                unsubscribe();\n                current.reject(new Error('Waiting for \"joinResponse\" has timed out'));\n            }, this.joinResponseTimeout);\n            await this.send(SfuRequest.create({\n                requestPayload: {\n                    oneofKind: \"joinRequest\",\n                    joinRequest: JoinRequest.create({\n                        ...data,\n                        sessionId: this.sessionId,\n                        token: this.credentials.token\n                    })\n                }\n            }));\n            return current.promise;\n        };\n        this.ping = async ()=>{\n            return this.send(SfuRequest.create({\n                requestPayload: {\n                    oneofKind: \"healthCheckRequest\",\n                    healthCheckRequest: {}\n                }\n            }));\n        };\n        this.notifyLeave = async (reason)=>{\n            return this.send(SfuRequest.create({\n                requestPayload: {\n                    oneofKind: \"leaveCallRequest\",\n                    leaveCallRequest: {\n                        sessionId: this.sessionId,\n                        reason\n                    }\n                }\n            }));\n        };\n        this.send = async (message)=>{\n            await this.signalReady; // wait for the signal ws to be open\n            const msgJson = SfuRequest.toJson(message);\n            if (this.signalWs.readyState !== WebSocket.OPEN) {\n                this.logger(\"debug\", \"Signal WS is not open. Skipping message\", msgJson);\n                return;\n            }\n            this.logger(\"debug\", `Sending message to: ${this.edgeName}`, msgJson);\n            this.signalWs.send(SfuRequest.toBinary(message));\n        };\n        this.keepAlive = ()=>{\n            clearInterval(this.keepAliveInterval);\n            this.keepAliveInterval = setInterval(()=>{\n                this.ping().catch((e)=>{\n                    this.logger(\"error\", \"Error sending healthCheckRequest to SFU\", e);\n                });\n            }, this.pingIntervalInMs);\n        };\n        this.scheduleConnectionCheck = ()=>{\n            clearTimeout(this.connectionCheckTimeout);\n            this.connectionCheckTimeout = setTimeout(()=>{\n                if (this.lastMessageTimestamp) {\n                    const timeSinceLastMessage = new Date().getTime() - this.lastMessageTimestamp.getTime();\n                    if (timeSinceLastMessage > this.unhealthyTimeoutInMs) {\n                        this.close(StreamSfuClient.ERROR_CONNECTION_UNHEALTHY, `SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`);\n                    }\n                }\n            }, this.unhealthyTimeoutInMs);\n        };\n        this.dispatcher = dispatcher;\n        this.sessionId = sessionId || generateUUIDv4();\n        this.onSignalClose = onSignalClose;\n        this.credentials = credentials;\n        const { server, token } = credentials;\n        this.edgeName = server.edge_name;\n        this.joinResponseTimeout = joinResponseTimeout;\n        this.logTag = logTag;\n        this.logger = getLogger([\n            \"SfuClient\",\n            logTag\n        ]);\n        this.rpc = createSignalClient({\n            baseUrl: server.url,\n            interceptors: [\n                withHeaders({\n                    Authorization: `Bearer ${token}`\n                }),\n                getLogLevel() === \"trace\" && withRequestLogger(this.logger, \"trace\")\n            ].filter((v)=>!!v)\n        });\n        // Special handling for the ICETrickle kind of events.\n        // The SFU might trigger these events before the initial RTC\n        // connection is established or \"JoinResponse\" received.\n        // In that case, those events (ICE candidates) need to be buffered\n        // and later added to the appropriate PeerConnection\n        // once the remoteDescription is known and set.\n        this.unsubscribeIceTrickle = dispatcher.on(\"iceTrickle\", (iceTrickle)=>{\n            this.iceTrickleBuffer.push(iceTrickle);\n        });\n        // listen to network changes to handle offline state\n        // we shouldn't attempt to recover websocket connection when offline\n        this.unsubscribeNetworkChanged = streamClient.on(\"network.changed\", (e)=>{\n            if (!e.online) {\n                this.networkAvailableTask = promiseWithResolvers();\n            } else {\n                this.networkAvailableTask?.resolve();\n            }\n        });\n        this.createWebSocket();\n    }\n    get isHealthy() {\n        return this.signalWs.readyState === WebSocket.OPEN;\n    }\n    get joinTask() {\n        return this.joinResponseTask.promise;\n    }\n}\n/**\n * The normal closure code. Used for controlled shutdowns.\n */ StreamSfuClient.NORMAL_CLOSURE = 1000;\n/**\n * The error code used when the SFU connection is unhealthy.\n * Usually, this means that no message has been received from the SFU for\n * a certain amount of time (`connectionCheckTimeout`).\n */ StreamSfuClient.ERROR_CONNECTION_UNHEALTHY = 4001;\n/**\n * The error code used when the SFU connection is disposed because a new\n * connection is established or is about to be established.\n * Here, we don't use 1000 (normal closure) because we don't want the\n * SFU to clean up the resources associated with the current participant.\n */ StreamSfuClient.DISPOSE_OLD_SOCKET = 4002;\nconst toRtcConfiguration = (config)=>{\n    return {\n        iceServers: config.map((ice)=>({\n                urls: ice.urls,\n                username: ice.username,\n                credential: ice.password\n            }))\n    };\n};\n/**\n * Event handler that watched the delivery of `call.accepted`.\n * Once the event is received, the call is joined.\n */ const watchCallAccepted = (call)=>{\n    return async function onCallAccepted(event) {\n        // We want to discard the event if it's from the current user\n        if (event.user.id === call.currentUserId) return;\n        const { state } = call;\n        if (event.call.created_by.id === call.currentUserId && state.callingState === CallingState.RINGING) {\n            await call.join();\n        }\n    };\n};\n/**\n * Event handler that watches delivery of `call.rejected` Websocket event.\n * Once the event is received, the call is left.\n */ const watchCallRejected = (call)=>{\n    return async function onCallRejected(event) {\n        // We want to discard the event if it's from the current user\n        if (event.user.id === call.currentUserId) return;\n        const { call: eventCall } = event;\n        const { session: callSession } = eventCall;\n        if (!callSession) {\n            call.logger(\"warn\", \"No call session provided. Ignoring call.rejected event.\", event);\n            return;\n        }\n        const rejectedBy = callSession.rejected_by;\n        const { members, callingState } = call.state;\n        if (callingState !== CallingState.RINGING) {\n            call.logger(\"info\", \"Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.\", event);\n            return;\n        }\n        if (call.isCreatedByMe) {\n            const everyoneElseRejected = members.filter((m)=>m.user_id !== call.currentUserId).every((m)=>rejectedBy[m.user_id]);\n            if (everyoneElseRejected) {\n                call.logger(\"info\", \"everyone rejected, leaving the call\");\n                await call.leave({\n                    reason: \"ring: everyone rejected\"\n                });\n            }\n        } else {\n            if (rejectedBy[eventCall.created_by.id]) {\n                call.logger(\"info\", \"call creator rejected, leaving call\");\n                await call.leave({\n                    reason: \"ring: creator rejected\"\n                });\n            }\n        }\n    };\n};\n/**\n * Event handler that watches the delivery of `call.ended` Websocket event.\n */ const watchCallEnded = (call)=>{\n    return function onCallEnded() {\n        const { callingState } = call.state;\n        if (callingState === CallingState.RINGING || callingState === CallingState.JOINED || callingState === CallingState.JOINING) {\n            call.leave({\n                reason: \"call.ended event received\"\n            }).catch((err)=>{\n                call.logger(\"error\", \"Failed to leave call after call.ended \", err);\n            });\n        }\n    };\n};\n/**\n * Watches for `callEnded` events.\n */ const watchSfuCallEnded = (call)=>{\n    return call.on(\"callEnded\", async (e)=>{\n        if (call.state.callingState === CallingState.LEFT) return;\n        try {\n            // `call.ended` event arrived after the call is already left\n            // and all event handlers are detached. We need to manually\n            // update the call state to reflect the call has ended.\n            call.state.setEndedAt(new Date());\n            const reason = CallEndedReason[e.reason];\n            await call.leave({\n                reason: `callEnded received: ${reason}`\n            });\n        } catch (err) {\n            call.logger(\"error\", \"Failed to leave call after being ended by the SFU\", err);\n        }\n    });\n};\n/**\n * Event handler that watches for `callGrantsUpdated` events.\n *\n * @param state the call state to update.\n */ const watchCallGrantsUpdated = (state)=>{\n    return function onCallGrantsUpdated(event) {\n        const { currentGrants } = event;\n        if (currentGrants) {\n            const { canPublishAudio, canPublishVideo, canScreenshare } = currentGrants;\n            const update = {\n                [OwnCapability.SEND_AUDIO]: canPublishAudio,\n                [OwnCapability.SEND_VIDEO]: canPublishVideo,\n                [OwnCapability.SCREENSHARE]: canScreenshare\n            };\n            const nextCapabilities = state.ownCapabilities.filter((capability)=>update[capability] !== false);\n            Object.entries(update).forEach(([capability, value])=>{\n                if (value && !nextCapabilities.includes(capability)) {\n                    nextCapabilities.push(capability);\n                }\n            });\n            state.setOwnCapabilities(nextCapabilities);\n        }\n    };\n};\n/**\n * An event responder which handles the `changePublishQuality` event.\n */ const watchChangePublishQuality = (dispatcher, call)=>{\n    return dispatcher.on(\"changePublishQuality\", (e)=>{\n        const { videoSenders } = e;\n        videoSenders.forEach((videoSender)=>{\n            const { layers } = videoSender;\n            call.updatePublishQuality(layers.filter((l)=>l.active));\n        });\n    });\n};\nconst watchConnectionQualityChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"connectionQualityChanged\", (e)=>{\n        const { connectionQualityUpdates } = e;\n        if (!connectionQualityUpdates) return;\n        state.updateParticipants(connectionQualityUpdates.reduce((patches, update)=>{\n            const { sessionId, connectionQuality } = update;\n            patches[sessionId] = {\n                connectionQuality\n            };\n            return patches;\n        }, {}));\n    });\n};\n/**\n * Updates the approximate number of participants in the call by peeking at the\n * health check events that our SFU sends.\n */ const watchParticipantCountChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"healthCheckResponse\", (e)=>{\n        const { participantCount } = e;\n        if (participantCount) {\n            state.setParticipantCount(participantCount.total);\n            state.setAnonymousParticipantCount(participantCount.anonymous);\n        }\n    });\n};\nconst watchLiveEnded = (dispatcher, call)=>{\n    return dispatcher.on(\"error\", (e)=>{\n        if (e.error && e.error.code !== ErrorCode.LIVE_ENDED) return;\n        if (!call.permissionsContext.hasPermission(OwnCapability.JOIN_BACKSTAGE)) {\n            call.leave({\n                reason: \"live ended\"\n            }).catch((err)=>{\n                call.logger(\"error\", \"Failed to leave call after live ended\", err);\n            });\n        }\n    });\n};\n/**\n * Watches and logs the errors reported by the currently connected SFU.\n */ const watchSfuErrorReports = (dispatcher)=>{\n    return dispatcher.on(\"error\", (e)=>{\n        if (!e.error) return;\n        const logger = getLogger([\n            \"SfuClient\"\n        ]);\n        const { error, reconnectStrategy } = e;\n        logger(\"error\", \"SFU reported error\", {\n            code: ErrorCode[error.code],\n            reconnectStrategy: WebsocketReconnectStrategy[reconnectStrategy],\n            message: error.message,\n            shouldRetry: error.shouldRetry\n        });\n    });\n};\n/**\n * Watches for `pinsUpdated` events and updates the pinned state of participants\n * in the call.\n */ const watchPinsUpdated = (state)=>{\n    return function onPinsUpdated(e) {\n        const { pins } = e;\n        state.setServerSidePins(pins);\n    };\n};\n/**\n * An event handler that handles soft mutes.\n *\n * @param call the call.\n */ const handleRemoteSoftMute = (call)=>{\n    return call.on(\"trackUnpublished\", async (event)=>{\n        const { cause, type, sessionId } = event;\n        const { localParticipant } = call.state;\n        if (cause === TrackUnpublishReason.MODERATION && sessionId === localParticipant?.sessionId) {\n            const logger = call.logger;\n            logger(\"info\", `Local participant's ${TrackType[type]} track is muted remotely`);\n            try {\n                if (type === TrackType.VIDEO) {\n                    await call.camera.disable();\n                } else if (type === TrackType.AUDIO) {\n                    await call.microphone.disable();\n                } else if (type === TrackType.SCREEN_SHARE || type === TrackType.SCREEN_SHARE_AUDIO) {\n                    await call.screenShare.disable();\n                } else {\n                    logger(\"warn\", \"Unsupported track type to soft mute\", TrackType[type]);\n                }\n            } catch (error) {\n                logger(\"error\", \"Failed to stop publishing\", error);\n            }\n        }\n    });\n};\n/**\n * An event responder which handles the `participantJoined` event.\n */ const watchParticipantJoined = (state)=>{\n    return function onParticipantJoined(e) {\n        const { participant } = e;\n        if (!participant) return;\n        // `state.updateOrAddParticipant` acts as a safeguard against\n        // potential duplicate events from the SFU.\n        //\n        // Although the SFU should not send duplicate events, we have seen\n        // some race conditions in the past during the `join-flow`.\n        // The SFU would send participant info as part of the `join`\n        // response and then follow up with a `participantJoined` event for\n        // already announced participants.\n        const orphanedTracks = reconcileOrphanedTracks(state, participant);\n        state.updateOrAddParticipant(participant.sessionId, Object.assign(participant, orphanedTracks, {\n            viewportVisibilityState: {\n                videoTrack: VisibilityState.UNKNOWN,\n                screenShareTrack: VisibilityState.UNKNOWN\n            }\n        }));\n    };\n};\n/**\n * An event responder which handles the `participantLeft` event.\n */ const watchParticipantLeft = (state)=>{\n    return function onParticipantLeft(e) {\n        const { participant } = e;\n        if (!participant) return;\n        state.setParticipants((participants)=>participants.filter((p)=>p.sessionId !== participant.sessionId));\n    };\n};\n/**\n * An event responder which handles the `participantUpdated` event.\n */ const watchParticipantUpdated = (state)=>{\n    return function onParticipantUpdated(e) {\n        const { participant } = e;\n        if (!participant) return;\n        state.updateParticipant(participant.sessionId, participant);\n    };\n};\n/**\n * An event responder which handles the `trackPublished` event.\n * The SFU will send this event when a participant publishes a track.\n */ const watchTrackPublished = (state)=>{\n    return function onTrackPublished(e) {\n        const { type, sessionId } = e;\n        // An optimization for large calls.\n        // After a certain threshold, the SFU would stop emitting `participantJoined`\n        // events, and instead, it would only provide the participant's information\n        // once they start publishing a track.\n        if (e.participant) {\n            const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n            const participant = Object.assign(e.participant, orphanedTracks);\n            state.updateOrAddParticipant(sessionId, participant);\n        } else {\n            state.updateParticipant(sessionId, (p)=>({\n                    publishedTracks: [\n                        ...p.publishedTracks,\n                        type\n                    ].filter(unique)\n                }));\n        }\n    };\n};\n/**\n * An event responder which handles the `trackUnpublished` event.\n * The SFU will send this event when a participant unpublishes a track.\n */ const watchTrackUnpublished = (state)=>{\n    return function onTrackUnpublished(e) {\n        const { type, sessionId } = e;\n        // An optimization for large calls. See `watchTrackPublished`.\n        if (e.participant) {\n            const orphanedTracks = reconcileOrphanedTracks(state, e.participant);\n            const participant = Object.assign(e.participant, orphanedTracks);\n            state.updateOrAddParticipant(sessionId, participant);\n        } else {\n            state.updateParticipant(sessionId, (p)=>({\n                    publishedTracks: p.publishedTracks.filter((t)=>t !== type)\n                }));\n        }\n    };\n};\nconst unique = (v, i, arr)=>arr.indexOf(v) === i;\n/**\n * Reconciles orphaned tracks (if any) for the given participant.\n *\n * @param state the call state.\n * @param participant the participant.\n */ const reconcileOrphanedTracks = (state, participant)=>{\n    const orphanTracks = state.takeOrphanedTracks(participant.trackLookupPrefix);\n    if (!orphanTracks.length) return;\n    const reconciledTracks = {};\n    for (const orphan of orphanTracks){\n        const key = trackTypeToParticipantStreamKey(orphan.trackType);\n        if (!key) continue;\n        reconciledTracks[key] = orphan.track;\n    }\n    return reconciledTracks;\n};\n/**\n * Watches for `dominantSpeakerChanged` events.\n */ const watchDominantSpeakerChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"dominantSpeakerChanged\", (e)=>{\n        const { sessionId } = e;\n        if (sessionId === state.dominantSpeaker?.sessionId) return;\n        state.setParticipants((participants)=>participants.map((participant)=>{\n                // mark the new dominant speaker\n                if (participant.sessionId === sessionId) {\n                    return {\n                        ...participant,\n                        isDominantSpeaker: true\n                    };\n                }\n                // unmark the old dominant speaker\n                if (participant.isDominantSpeaker) {\n                    return {\n                        ...participant,\n                        isDominantSpeaker: false\n                    };\n                }\n                return participant; // no change\n            }));\n    });\n};\n/**\n * Watches for `audioLevelChanged` events.\n */ const watchAudioLevelChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"audioLevelChanged\", (e)=>{\n        const { audioLevels } = e;\n        state.updateParticipants(audioLevels.reduce((patches, current)=>{\n            patches[current.sessionId] = {\n                audioLevel: current.level,\n                isSpeaking: current.isSpeaking\n            };\n            return patches;\n        }, {}));\n    });\n};\n/**\n * Registers the default event handlers for a call during its lifecycle.\n *\n * @param call the call to register event handlers for.\n * @param dispatcher the dispatcher.\n */ const registerEventHandlers = (call, dispatcher)=>{\n    const state = call.state;\n    const eventHandlers = [\n        call.on(\"call.ended\", watchCallEnded(call)),\n        watchSfuCallEnded(call),\n        watchLiveEnded(dispatcher, call),\n        watchSfuErrorReports(dispatcher),\n        watchChangePublishQuality(dispatcher, call),\n        watchConnectionQualityChanged(dispatcher, state),\n        watchParticipantCountChanged(dispatcher, state),\n        call.on(\"participantJoined\", watchParticipantJoined(state)),\n        call.on(\"participantLeft\", watchParticipantLeft(state)),\n        call.on(\"participantUpdated\", watchParticipantUpdated(state)),\n        call.on(\"trackPublished\", watchTrackPublished(state)),\n        call.on(\"trackUnpublished\", watchTrackUnpublished(state)),\n        watchAudioLevelChanged(dispatcher, state),\n        watchDominantSpeakerChanged(dispatcher, state),\n        call.on(\"callGrantsUpdated\", watchCallGrantsUpdated(state)),\n        call.on(\"pinsUpdated\", watchPinsUpdated(state)),\n        handleRemoteSoftMute(call)\n    ];\n    if (call.ringing) {\n        // these events are only relevant when the call is ringing\n        eventHandlers.push(registerRingingCallEventHandlers(call));\n    }\n    return ()=>{\n        eventHandlers.forEach((unsubscribe)=>unsubscribe());\n    };\n};\n/**\n * Registers event handlers for a call that is of ringing type.\n *\n * @param call the call to register event handlers for.\n */ const registerRingingCallEventHandlers = (call)=>{\n    const coordinatorRingEvents = {\n        \"call.accepted\": watchCallAccepted(call),\n        \"call.rejected\": watchCallRejected(call)\n    };\n    const eventHandlers = Object.keys(coordinatorRingEvents).map((event)=>{\n        const eventName = event;\n        return call.on(eventName, coordinatorRingEvents[eventName]);\n    });\n    return ()=>{\n        eventHandlers.forEach((unsubscribe)=>unsubscribe());\n    };\n};\n/**\n * Flatten the stats report into an array of stats objects.\n *\n * @param report the report to flatten.\n */ const flatten = (report)=>{\n    const stats = [];\n    report.forEach((s)=>{\n        stats.push(s);\n    });\n    return stats;\n};\nconst getSdkSignature = (clientDetails)=>{\n    const { sdk, ...platform } = clientDetails;\n    const sdkName = getSdkName(sdk);\n    const sdkVersion = getSdkVersion(sdk);\n    return {\n        sdkName,\n        sdkVersion,\n        ...platform\n    };\n};\nconst getSdkName = (sdk)=>{\n    return sdk && sdk.type === SdkType.REACT ? \"stream-react\" : sdk && sdk.type === SdkType.REACT_NATIVE ? \"stream-react-native\" : \"stream-js\";\n};\nconst getSdkVersion = (sdk)=>{\n    return sdk ? `${sdk.major}.${sdk.minor}.${sdk.patch}` : \"0.0.0-development\";\n};\n/**\n * Creates a new StatsReporter instance that collects metrics about the ongoing call and reports them to the state store\n */ const createStatsReporter = ({ subscriber, publisher, state, datacenter, pollingIntervalInMs = 2000 })=>{\n    const logger = getLogger([\n        \"stats\"\n    ]);\n    const getRawStatsForTrack = async (kind, selector)=>{\n        if (kind === \"subscriber\" && subscriber) {\n            return subscriber.getStats(selector);\n        } else if (kind === \"publisher\" && publisher) {\n            return publisher.getStats(selector);\n        } else {\n            return undefined;\n        }\n    };\n    const getStatsForStream = async (kind, mediaStream)=>{\n        const pc = kind === \"subscriber\" ? subscriber : publisher;\n        if (!pc) return [];\n        const statsForStream = [];\n        for (let track of mediaStream.getTracks()){\n            const report = await pc.getStats(track);\n            const stats = transform(report, {\n                // @ts-ignore\n                trackKind: track.kind,\n                kind\n            });\n            statsForStream.push(stats);\n        }\n        return statsForStream;\n    };\n    const startReportingStatsFor = (sessionId)=>{\n        sessionIdsToTrack.add(sessionId);\n        void run();\n    };\n    const stopReportingStatsFor = (sessionId)=>{\n        sessionIdsToTrack.delete(sessionId);\n        void run();\n    };\n    const sessionIdsToTrack = new Set();\n    /**\n     * The main stats reporting loop.\n     */ const run = async ()=>{\n        const participantStats = {};\n        const sessionIds = new Set(sessionIdsToTrack);\n        if (sessionIds.size > 0) {\n            for (let participant of state.participants){\n                if (!sessionIds.has(participant.sessionId)) continue;\n                const kind = participant.isLocalParticipant ? \"publisher\" : \"subscriber\";\n                try {\n                    const mergedStream = new MediaStream([\n                        ...participant.videoStream?.getVideoTracks() || [],\n                        ...participant.audioStream?.getAudioTracks() || []\n                    ]);\n                    participantStats[participant.sessionId] = await getStatsForStream(kind, mergedStream);\n                    mergedStream.getTracks().forEach((t)=>{\n                        mergedStream.removeTrack(t);\n                    });\n                } catch (e) {\n                    logger(\"error\", `Failed to collect stats for ${kind} of ${participant.userId}`, e);\n                }\n            }\n        }\n        const [subscriberStats, publisherStats] = await Promise.all([\n            subscriber.getStats().then((report)=>transform(report, {\n                    kind: \"subscriber\",\n                    trackKind: \"video\"\n                })).then(aggregate),\n            publisher ? publisher.getStats().then((report)=>transform(report, {\n                    kind: \"publisher\",\n                    trackKind: \"video\"\n                })).then(aggregate) : getEmptyStats()\n        ]);\n        const [subscriberRawStats, publisherRawStats] = await Promise.all([\n            getRawStatsForTrack(\"subscriber\"),\n            publisher ? getRawStatsForTrack(\"publisher\") : undefined\n        ]);\n        state.setCallStatsReport({\n            datacenter,\n            publisherStats,\n            subscriberStats,\n            subscriberRawStats,\n            publisherRawStats,\n            participants: participantStats,\n            timestamp: Date.now()\n        });\n    };\n    let timeoutId;\n    if (pollingIntervalInMs > 0) {\n        const loop = async ()=>{\n            await run().catch((e)=>{\n                logger(\"debug\", \"Failed to collect stats\", e);\n            });\n            timeoutId = setTimeout(loop, pollingIntervalInMs);\n        };\n        void loop();\n    }\n    const stop = ()=>{\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n    };\n    return {\n        getRawStatsForTrack,\n        getStatsForStream,\n        startReportingStatsFor,\n        stopReportingStatsFor,\n        stop\n    };\n};\n/**\n * Transforms raw RTC stats into a slimmer and uniform across browsers format.\n *\n * @param report the report to transform.\n * @param opts the transform options.\n */ const transform = (report, opts)=>{\n    const { trackKind, kind } = opts;\n    const direction = kind === \"subscriber\" ? \"inbound-rtp\" : \"outbound-rtp\";\n    const stats = flatten(report);\n    const streams = stats.filter((stat)=>stat.type === direction && stat.kind === trackKind).map((stat)=>{\n        const rtcStreamStats = stat;\n        const codec = stats.find((s)=>s.type === \"codec\" && s.id === rtcStreamStats.codecId);\n        const transport = stats.find((s)=>s.type === \"transport\" && s.id === rtcStreamStats.transportId);\n        let roundTripTime;\n        if (transport && transport.dtlsState === \"connected\") {\n            const candidatePair = stats.find((s)=>s.type === \"candidate-pair\" && s.id === transport.selectedCandidatePairId);\n            roundTripTime = candidatePair?.currentRoundTripTime;\n        }\n        return {\n            bytesSent: rtcStreamStats.bytesSent,\n            bytesReceived: rtcStreamStats.bytesReceived,\n            codec: codec?.mimeType,\n            currentRoundTripTime: roundTripTime,\n            frameHeight: rtcStreamStats.frameHeight,\n            frameWidth: rtcStreamStats.frameWidth,\n            framesPerSecond: rtcStreamStats.framesPerSecond,\n            jitter: rtcStreamStats.jitter,\n            kind: rtcStreamStats.kind,\n            // @ts-ignore: available in Chrome only, TS doesn't recognize this\n            qualityLimitationReason: rtcStreamStats.qualityLimitationReason,\n            rid: rtcStreamStats.rid,\n            ssrc: rtcStreamStats.ssrc\n        };\n    });\n    return {\n        rawStats: report,\n        streams,\n        timestamp: Date.now()\n    };\n};\nconst getEmptyStats = (stats)=>{\n    return {\n        rawReport: stats ?? {\n            streams: [],\n            timestamp: Date.now()\n        },\n        totalBytesSent: 0,\n        totalBytesReceived: 0,\n        averageJitterInMs: 0,\n        averageRoundTripTimeInMs: 0,\n        qualityLimitationReasons: \"none\",\n        highestFrameWidth: 0,\n        highestFrameHeight: 0,\n        highestFramesPerSecond: 0,\n        codec: \"\",\n        timestamp: Date.now()\n    };\n};\n/**\n * Aggregates generic stats.\n *\n * @param stats the stats to aggregate.\n */ const aggregate = (stats)=>{\n    const aggregatedStats = getEmptyStats(stats);\n    let maxArea = -1;\n    const area = (w, h)=>w * h;\n    const qualityLimitationReasons = new Set();\n    const streams = stats.streams;\n    const report = streams.reduce((acc, stream)=>{\n        acc.totalBytesSent += stream.bytesSent || 0;\n        acc.totalBytesReceived += stream.bytesReceived || 0;\n        acc.averageJitterInMs += stream.jitter || 0;\n        acc.averageRoundTripTimeInMs += stream.currentRoundTripTime || 0;\n        // naive calculation of the highest resolution\n        const streamArea = area(stream.frameWidth || 0, stream.frameHeight || 0);\n        if (streamArea > maxArea) {\n            acc.highestFrameWidth = stream.frameWidth || 0;\n            acc.highestFrameHeight = stream.frameHeight || 0;\n            acc.highestFramesPerSecond = stream.framesPerSecond || 0;\n            maxArea = streamArea;\n        }\n        qualityLimitationReasons.add(stream.qualityLimitationReason || \"\");\n        return acc;\n    }, aggregatedStats);\n    if (streams.length > 0) {\n        report.averageJitterInMs = Math.round(report.averageJitterInMs / streams.length * 1000);\n        report.averageRoundTripTimeInMs = Math.round(report.averageRoundTripTimeInMs / streams.length * 1000);\n        // we take the first codec we find, as it should be the same for all streams\n        report.codec = streams[0].codec || \"\";\n    }\n    const qualityLimitationReason = [\n        qualityLimitationReasons.has(\"cpu\") && \"cpu\",\n        qualityLimitationReasons.has(\"bandwidth\") && \"bandwidth\",\n        qualityLimitationReasons.has(\"other\") && \"other\"\n    ].filter(Boolean).join(\", \");\n    if (qualityLimitationReason) {\n        report.qualityLimitationReasons = qualityLimitationReason;\n    }\n    return report;\n};\nclass SfuStatsReporter {\n    constructor(sfuClient, { options, clientDetails, subscriber, publisher }){\n        this.logger = getLogger([\n            \"SfuStatsReporter\"\n        ]);\n        this.run = async ()=>{\n            const [subscriberStats, publisherStats] = await Promise.all([\n                this.subscriber.getStats().then(flatten).then(JSON.stringify),\n                this.publisher?.getStats().then(flatten).then(JSON.stringify) ?? \"[]\"\n            ]);\n            await this.sfuClient.sendStats({\n                sdk: this.sdkName,\n                sdkVersion: this.sdkVersion,\n                webrtcVersion: this.webRTCVersion,\n                subscriberStats,\n                publisherStats\n            });\n        };\n        this.start = ()=>{\n            if (this.options.reporting_interval_ms <= 0) return;\n            clearInterval(this.intervalId);\n            this.intervalId = setInterval(()=>{\n                this.run().catch((err)=>{\n                    this.logger(\"warn\", \"Failed to report stats\", err);\n                });\n            }, this.options.reporting_interval_ms);\n        };\n        this.stop = ()=>{\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        };\n        this.sfuClient = sfuClient;\n        this.options = options;\n        this.subscriber = subscriber;\n        this.publisher = publisher;\n        const webRTCInfo = getWebRTCInfo();\n        const { sdk, browser } = clientDetails;\n        this.sdkName = getSdkName(sdk);\n        this.sdkVersion = getSdkVersion(sdk);\n        // The WebRTC version if passed from the SDK, it is taken else the browser info is sent.\n        this.webRTCVersion = webRTCInfo?.version || `${browser?.name || \"\"}-${browser?.version || \"\"}` || \"N/A\";\n    }\n}\nconst DEFAULT_THRESHOLD = 0.35;\nclass ViewportTracker {\n    constructor(){\n        /**\n         * @private\n         */ this.elementHandlerMap = new Map();\n        /**\n         * @private\n         */ this.observer = null;\n        // in React children render before viewport is set, add\n        // them to the queue and observe them once the observer is ready\n        /**\n         * @private\n         */ this.queueSet = new Set();\n        /**\n         * Method to set scrollable viewport as root for the IntersectionObserver, returns\n         * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n         *\n         * @param viewportElement\n         * @param options\n         * @returns Unobserve\n         */ this.setViewport = (viewportElement, options)=>{\n            const cleanup = ()=>{\n                this.observer?.disconnect();\n                this.observer = null;\n                this.elementHandlerMap.clear();\n            };\n            this.observer = new IntersectionObserver((entries)=>{\n                entries.forEach((entry)=>{\n                    const handler = this.elementHandlerMap.get(entry.target);\n                    handler?.(entry);\n                });\n            }, {\n                root: viewportElement,\n                ...options,\n                threshold: options?.threshold ?? DEFAULT_THRESHOLD\n            });\n            if (this.queueSet.size) {\n                this.queueSet.forEach(([queueElement, queueHandler])=>{\n                    // check if element which requested observation is\n                    // a child of a viewport element, skip if isn't\n                    if (!viewportElement.contains(queueElement)) return;\n                    this.observer.observe(queueElement);\n                    this.elementHandlerMap.set(queueElement, queueHandler);\n                });\n                this.queueSet.clear();\n            }\n            return cleanup;\n        };\n        /**\n         * Method to set element to observe and handler to be triggered whenever IntersectionObserver\n         * detects a possible change in element's visibility within specified viewport, returns\n         * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n         *\n         * @param element\n         * @param handler\n         * @returns Unobserve\n         */ this.observe = (element, handler)=>{\n            const queueItem = [\n                element,\n                handler\n            ];\n            const cleanup = ()=>{\n                this.elementHandlerMap.delete(element);\n                this.observer?.unobserve(element);\n                this.queueSet.delete(queueItem);\n            };\n            if (this.elementHandlerMap.has(element)) return cleanup;\n            if (!this.observer) {\n                this.queueSet.add(queueItem);\n                return cleanup;\n            }\n            if (this.observer.root.contains(element)) {\n                this.elementHandlerMap.set(element, handler);\n                this.observer.observe(element);\n            }\n            return cleanup;\n        };\n    }\n}\n/**\n * Checks whether the current browser is Safari.\n */ const isSafari = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return /^((?!chrome|android).)*safari/i.test(navigator.userAgent || \"\");\n};\n/**\n * Checks whether the current browser is Firefox.\n */ const isFirefox = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return navigator.userAgent?.includes(\"Firefox\");\n};\n/**\n * Checks whether the current browser is Google Chrome.\n */ const isChrome = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return navigator.userAgent?.includes(\"Chrome\");\n};\nvar browsers = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    isChrome: isChrome,\n    isFirefox: isFirefox,\n    isSafari: isSafari\n});\nconst DEFAULT_VIEWPORT_VISIBILITY_STATE = {\n    videoTrack: VisibilityState.UNKNOWN,\n    screenShareTrack: VisibilityState.UNKNOWN\n};\n/**\n * A manager class that handles dynascale related tasks like:\n *\n * - binding video elements to session ids\n * - binding audio elements to session ids\n * - tracking element visibility\n * - updating subscriptions based on viewport visibility\n * - updating subscriptions based on video element dimensions\n * - updating subscriptions based on published tracks\n */ class DynascaleManager {\n    /**\n     * Creates a new DynascaleManager instance.\n     *\n     * @param call the call to manage.\n     */ constructor(call){\n        /**\n         * The viewport tracker instance.\n         */ this.viewportTracker = new ViewportTracker();\n        this.logger = getLogger([\n            \"DynascaleManager\"\n        ]);\n        /**\n         * Will begin tracking the given element for visibility changes within the\n         * configured viewport element (`call.setViewport`).\n         *\n         * @param element the element to track.\n         * @param sessionId the session id.\n         * @param trackType the kind of video.\n         * @returns Untrack.\n         */ this.trackElementVisibility = (element, sessionId, trackType)=>{\n            const cleanup = this.viewportTracker.observe(element, (entry)=>{\n                this.call.state.updateParticipant(sessionId, (participant)=>{\n                    const previousVisibilityState = participant.viewportVisibilityState ?? DEFAULT_VIEWPORT_VISIBILITY_STATE;\n                    // observer triggers when the element is \"moved\" to be a fullscreen element\n                    // keep it VISIBLE if that happens to prevent fullscreen with placeholder\n                    const isVisible = entry.isIntersecting || document.fullscreenElement === element ? VisibilityState.VISIBLE : VisibilityState.INVISIBLE;\n                    return {\n                        ...participant,\n                        viewportVisibilityState: {\n                            ...previousVisibilityState,\n                            [trackType]: isVisible\n                        }\n                    };\n                });\n            });\n            return ()=>{\n                cleanup();\n                // reset visibility state to UNKNOWN upon cleanup\n                // so that the layouts that are not actively observed\n                // can still function normally (runtime layout switching)\n                this.call.state.updateParticipant(sessionId, (participant)=>{\n                    const previousVisibilityState = participant.viewportVisibilityState ?? DEFAULT_VIEWPORT_VISIBILITY_STATE;\n                    return {\n                        ...participant,\n                        viewportVisibilityState: {\n                            ...previousVisibilityState,\n                            [trackType]: VisibilityState.UNKNOWN\n                        }\n                    };\n                });\n            };\n        };\n        /**\n         * Sets the viewport element to track bound video elements for visibility.\n         *\n         * @param element the viewport element.\n         */ this.setViewport = (element)=>{\n            return this.viewportTracker.setViewport(element);\n        };\n        /**\n         * Binds a DOM <video> element to the given session id.\n         * This method will make sure that the video element will play\n         * the correct video stream for the given session id.\n         *\n         * Under the hood, it would also keep track of the video element dimensions\n         * and update the subscription accordingly in order to optimize the bandwidth.\n         *\n         * If a \"viewport\" is configured, the video element will be automatically\n         * tracked for visibility and the subscription will be updated accordingly.\n         *\n         * @param videoElement the video element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of video.\n         */ this.bindVideoElement = (videoElement, sessionId, trackType)=>{\n            const boundParticipant = this.call.state.findParticipantBySessionId(sessionId);\n            if (!boundParticipant) return;\n            const requestTrackWithDimensions = (debounceType, dimension)=>{\n                if (dimension && (dimension.width === 0 || dimension.height === 0)) {\n                    // ignore 0x0 dimensions. this can happen when the video element\n                    // is not visible (e.g., has display: none).\n                    // we treat this as \"unsubscription\" as we don't want to keep\n                    // consuming bandwidth for a video that is not visible on the screen.\n                    this.logger(\"debug\", `Ignoring 0x0 dimension`, boundParticipant);\n                    dimension = undefined;\n                }\n                this.call.updateSubscriptionsPartial(trackType, {\n                    [sessionId]: {\n                        dimension\n                    }\n                }, debounceType);\n            };\n            const participant$ = this.call.state.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.find((participant)=>participant.sessionId === sessionId)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.takeWhile)((participant)=>!!participant), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)(), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n                bufferSize: 1,\n                refCount: true\n            }));\n            /**\n             * Since the video elements are now being removed from the DOM (React SDK) upon\n             * visibility change, this subscription is not in use an stays here only for the\n             * plain JS integrations where integrators might choose not to remove the video\n             * elements from the DOM.\n             */ // keep copy for resize observer handler\n            let viewportVisibilityState;\n            const viewportVisibilityStateSubscription = boundParticipant.isLocalParticipant ? null : participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((p)=>p.viewportVisibilityState?.[trackType]), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)()).subscribe((nextViewportVisibilityState)=>{\n                // skip initial trigger\n                if (!viewportVisibilityState) {\n                    viewportVisibilityState = nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                    return;\n                }\n                viewportVisibilityState = nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                if (nextViewportVisibilityState === VisibilityState.INVISIBLE) {\n                    return requestTrackWithDimensions(DebounceType.MEDIUM, undefined);\n                }\n                requestTrackWithDimensions(DebounceType.MEDIUM, {\n                    width: videoElement.clientWidth,\n                    height: videoElement.clientHeight\n                });\n            });\n            let lastDimensions;\n            const resizeObserver = boundParticipant.isLocalParticipant ? null : new ResizeObserver(()=>{\n                const currentDimensions = `${videoElement.clientWidth},${videoElement.clientHeight}`;\n                // skip initial trigger\n                if (!lastDimensions) {\n                    lastDimensions = currentDimensions;\n                    return;\n                }\n                if (lastDimensions === currentDimensions || viewportVisibilityState === VisibilityState.INVISIBLE) {\n                    return;\n                }\n                requestTrackWithDimensions(DebounceType.SLOW, {\n                    width: videoElement.clientWidth,\n                    height: videoElement.clientHeight\n                });\n                lastDimensions = currentDimensions;\n            });\n            resizeObserver?.observe(videoElement);\n            // element renders and gets bound - track subscription gets\n            // triggered first other ones get skipped on initial subscriptions\n            const publishedTracksSubscription = boundParticipant.isLocalParticipant ? null : participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilKeyChanged)(\"publishedTracks\"), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((p)=>trackType === \"videoTrack\" ? hasVideo(p) : hasScreenShare(p)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)()).subscribe((isPublishing)=>{\n                if (isPublishing) {\n                    // the participant just started to publish a track\n                    requestTrackWithDimensions(DebounceType.FAST, {\n                        width: videoElement.clientWidth,\n                        height: videoElement.clientHeight\n                    });\n                } else {\n                    // the participant just stopped publishing a track\n                    requestTrackWithDimensions(DebounceType.FAST, undefined);\n                }\n            });\n            videoElement.autoplay = true;\n            videoElement.playsInline = true;\n            // explicitly marking the element as muted will allow autoplay to work\n            // without prior user interaction:\n            // https://developer.mozilla.org/en-US/docs/Web/Media/Autoplay_guide\n            videoElement.muted = true;\n            const streamSubscription = participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilKeyChanged)(trackType === \"videoTrack\" ? \"videoStream\" : \"screenShareStream\")).subscribe((p)=>{\n                const source = trackType === \"videoTrack\" ? p.videoStream : p.screenShareStream;\n                if (videoElement.srcObject === source) return;\n                videoElement.srcObject = source ?? null;\n                if (isSafari() || isFirefox()) {\n                    setTimeout(()=>{\n                        videoElement.srcObject = source ?? null;\n                        videoElement.play().catch((e)=>{\n                            this.logger(\"warn\", `Failed to play stream`, e);\n                        });\n                    // we add extra delay until we attempt to force-play\n                    // the participant's media stream in Firefox and Safari,\n                    // as they seem to have some timing issues\n                    }, 25);\n                }\n            });\n            return ()=>{\n                requestTrackWithDimensions(DebounceType.FAST, undefined);\n                viewportVisibilityStateSubscription?.unsubscribe();\n                publishedTracksSubscription?.unsubscribe();\n                streamSubscription.unsubscribe();\n                resizeObserver?.disconnect();\n            };\n        };\n        /**\n         * Binds a DOM <audio> element to the given session id.\n         *\n         * This method will make sure that the audio element will\n         * play the correct audio stream for the given session id.\n         *\n         * @param audioElement the audio element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of audio.\n         * @returns a cleanup function that will unbind the audio element.\n         */ this.bindAudioElement = (audioElement, sessionId, trackType)=>{\n            const participant = this.call.state.findParticipantBySessionId(sessionId);\n            if (!participant || participant.isLocalParticipant) return;\n            const participant$ = this.call.state.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((participants)=>participants.find((p)=>p.sessionId === sessionId)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.takeWhile)((p)=>!!p), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)(), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)({\n                bufferSize: 1,\n                refCount: true\n            }));\n            const updateMediaStreamSubscription = participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilKeyChanged)(trackType === \"screenShareAudioTrack\" ? \"screenShareAudioStream\" : \"audioStream\")).subscribe((p)=>{\n                const source = trackType === \"screenShareAudioTrack\" ? p.screenShareAudioStream : p.audioStream;\n                if (audioElement.srcObject === source) return;\n                setTimeout(()=>{\n                    audioElement.srcObject = source ?? null;\n                    if (audioElement.srcObject) {\n                        audioElement.play().catch((e)=>{\n                            this.logger(\"warn\", `Failed to play stream`, e);\n                        });\n                        // audio output device shall be set after the audio element is played\n                        // otherwise, the browser will not pick it up, and will always\n                        // play audio through the system's default device\n                        const { selectedDevice } = this.call.speaker.state;\n                        if (selectedDevice && \"setSinkId\" in audioElement) {\n                            audioElement.setSinkId(selectedDevice);\n                        }\n                    }\n                });\n            });\n            const sinkIdSubscription = !(\"setSinkId\" in audioElement) ? null : this.call.speaker.state.selectedDevice$.subscribe((deviceId)=>{\n                if (deviceId) {\n                    audioElement.setSinkId(deviceId);\n                }\n            });\n            const volumeSubscription = (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([\n                this.call.speaker.state.volume$,\n                participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilKeyChanged)(\"audioVolume\"))\n            ]).subscribe(([volume, p])=>{\n                audioElement.volume = p.audioVolume ?? volume;\n            });\n            audioElement.autoplay = true;\n            return ()=>{\n                sinkIdSubscription?.unsubscribe();\n                volumeSubscription.unsubscribe();\n                updateMediaStreamSubscription.unsubscribe();\n            };\n        };\n        this.call = call;\n    }\n}\n/**\n * Stores the permissions for the current user and exposes\n * a few helper methods which make it easier to work with permissions.\n *\n * This is an internal class meant to be used in combination with\n * a {@link Call} instance.\n *\n * @internal\n */ class PermissionsContext {\n    constructor(){\n        this.permissions = [];\n        /**\n         * Sets the permissions for the current user.\n         *\n         * @param permissions the permissions to set.\n         */ this.setPermissions = (permissions)=>{\n            this.permissions = permissions || [];\n        };\n        /**\n         * Sets the settings for the bound call.\n         * @param settings\n         */ this.setCallSettings = (settings)=>{\n            this.settings = settings;\n        };\n        /**\n         * Checks if the current user has a specific permission.\n         *\n         * @param permission the permission to check for.\n         */ this.hasPermission = (permission)=>{\n            return this.permissions.includes(permission);\n        };\n        /**\n         * Checks if the current user can request a specific permission\n         * within the call.\n         *\n         * @param permission the permission to check for.\n         * @param settings the call settings to check against (optional).\n         */ this.canRequest = (permission, settings = this.settings)=>{\n            if (!settings) return false;\n            const { audio, video, screensharing } = settings;\n            switch(permission){\n                case OwnCapability.SEND_AUDIO:\n                    return audio.access_request_enabled;\n                case OwnCapability.SEND_VIDEO:\n                    return video.access_request_enabled;\n                case OwnCapability.SCREENSHARE:\n                    return screensharing.access_request_enabled;\n                default:\n                    return false;\n            }\n        };\n    }\n}\n/**\n * Represents a call type.\n */ class CallType {\n    /**\n     * Constructs a new CallType.\n     *\n     * @param name the name of the call type.\n     * @param options the options for the call type.\n     */ constructor(name, options = {\n        sortParticipantsBy: defaultSortPreset\n    }){\n        this.name = name;\n        this.options = options;\n    }\n}\n/**\n * A registry of {@link CallType}s.\n * You can register and unregister call types.\n */ class CallTypesRegistry {\n    /**\n     * Constructs a new CallTypesRegistry.\n     *\n     * @param callTypes the initial call types to register.\n     */ constructor(callTypes){\n        /**\n         * Registers a new call type.\n         *\n         * @param callType the call type to register.\n         */ this.register = (callType)=>{\n            this.callTypes[callType.name] = callType;\n        };\n        /**\n         * Unregisters a call type.\n         *\n         * @param name the name of the call type to unregister.\n         */ this.unregister = (name)=>{\n            delete this.callTypes[name];\n        };\n        /**\n         * Gets a call type by name.\n         *\n         * @param name the name of the call type to get.\n         */ this.get = (name)=>{\n            if (!this.callTypes[name]) {\n                this.register(new CallType(name));\n            }\n            return this.callTypes[name];\n        };\n        this.callTypes = callTypes.reduce((acc, callType)=>{\n            acc[callType.name] = callType;\n            return acc;\n        }, {});\n    }\n}\n/**\n * The default call types registry.\n * You can use this instance to dynamically register and unregister call types.\n */ const CallTypes = new CallTypesRegistry([\n    new CallType(\"default\", {\n        sortParticipantsBy: defaultSortPreset\n    }),\n    new CallType(\"development\", {\n        sortParticipantsBy: defaultSortPreset\n    }),\n    new CallType(\"livestream\", {\n        sortParticipantsBy: livestreamOrAudioRoomSortPreset\n    }),\n    new CallType(\"audio_room\", {\n        sortParticipantsBy: livestreamOrAudioRoomSortPreset\n    })\n]);\nclass BrowserPermission {\n    constructor(permission){\n        this.permission = permission;\n        this.disposeController = new AbortController();\n        this.wasPrompted = false;\n        this.listeners = new Set();\n        this.logger = getLogger([\n            \"permissions\"\n        ]);\n        const signal = this.disposeController.signal;\n        this.ready = (async ()=>{\n            const assumeGranted = (error)=>{\n                this.setState(\"granted\");\n            };\n            if (!canQueryPermissions()) {\n                return assumeGranted();\n            }\n            try {\n                const status = await navigator.permissions.query({\n                    name: permission.queryName\n                });\n                if (!signal.aborted) {\n                    this.setState(status.state);\n                    status.addEventListener(\"change\", ()=>this.setState(status.state), {\n                        signal\n                    });\n                }\n            } catch (err) {\n                assumeGranted();\n            }\n        })();\n    }\n    dispose() {\n        this.state = undefined;\n        this.disposeController.abort();\n    }\n    async getState() {\n        await this.ready;\n        if (!this.state) {\n            throw new Error(\"BrowserPermission instance possibly disposed\");\n        }\n        return this.state;\n    }\n    async prompt({ forcePrompt = false, throwOnNotAllowed = false } = {}) {\n        await withoutConcurrency(`permission-prompt-${this.permission.queryName}`, async ()=>{\n            if (await this.getState() !== \"prompt\" || this.wasPrompted && !forcePrompt) {\n                const isGranted = this.state === \"granted\";\n                if (!isGranted && throwOnNotAllowed) {\n                    throw new DOMException(\"Permission was not granted previously, and prompting again is not allowed\", \"NotAllowedError\");\n                }\n                return isGranted;\n            }\n            try {\n                this.wasPrompted = true;\n                const stream = await navigator.mediaDevices.getUserMedia(this.permission.constraints);\n                disposeOfMediaStream(stream);\n                return true;\n            } catch (e) {\n                if (e instanceof DOMException && e.name === \"NotAllowedError\") {\n                    this.logger(\"info\", \"Browser permission was not granted\", {\n                        permission: this.permission\n                    });\n                    if (throwOnNotAllowed) {\n                        throw e;\n                    }\n                    return false;\n                }\n                this.logger(\"error\", `Failed to getUserMedia`, {\n                    error: e,\n                    permission: this.permission\n                });\n                throw e;\n            }\n        });\n    }\n    listen(cb) {\n        this.listeners.add(cb);\n        if (this.state) cb(this.state);\n        return ()=>this.listeners.delete(cb);\n    }\n    asObservable() {\n        return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_23__.fromEventPattern)((handler)=>this.listen(handler), (handler, unlisten)=>unlisten()).pipe(// In some browsers, the 'change' event doesn't reliably emit and hence,\n        // permissionState stays in 'prompt' state forever.\n        // Typically, this happens when a user grants one-time permission.\n        // Instead of checking if a permission is granted, we check if it isn't denied\n        (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((state)=>state !== \"denied\"));\n    }\n    setState(state) {\n        if (this.state !== state) {\n            this.state = state;\n            this.listeners.forEach((listener)=>listener(state));\n        }\n    }\n}\nfunction canQueryPermissions() {\n    return !isReactNative() && typeof navigator !== \"undefined\" && !!navigator.permissions?.query;\n}\nconst uninitialized = Symbol(\"uninitialized\");\n/**\n * Lazily creates a value using a provided factory\n */ function lazy(factory) {\n    let value = uninitialized;\n    return ()=>{\n        if (value === uninitialized) {\n            value = factory();\n        }\n        return value;\n    };\n}\n/**\n * Returns an Observable that emits the list of available devices\n * that meet the given constraints.\n *\n * @param permission a BrowserPermission instance.\n * @param kind the kind of devices to enumerate.\n */ const getDevices = (permission, kind)=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__.from)((async ()=>{\n        let devices = await navigator.mediaDevices.enumerateDevices();\n        // for privacy reasons, most browsers don't give you device labels\n        // unless you have a corresponding camera or microphone permission\n        const shouldPromptForBrowserPermission = devices.some((device)=>device.kind === kind && device.label === \"\");\n        if (shouldPromptForBrowserPermission) {\n            await permission.prompt({\n                throwOnNotAllowed: true\n            });\n            devices = await navigator.mediaDevices.enumerateDevices();\n        }\n        return devices.filter((d)=>d.kind === kind);\n    })());\n};\n/**\n * Tells if the browser supports audio output change on 'audio' elements,\n * see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId.\n */ const checkIfAudioOutputChangeSupported = ()=>{\n    if (typeof document === \"undefined\") return false;\n    const element = document.createElement(\"audio\");\n    return \"setSinkId\" in element;\n};\n/**\n * The default constraints used to request audio devices.\n */ const audioDeviceConstraints = {\n    audio: {\n        autoGainControl: true,\n        noiseSuppression: true,\n        echoCancellation: true\n    }\n};\n/**\n * The default constraints used to request video devices.\n */ const videoDeviceConstraints = {\n    video: {\n        width: 1280,\n        height: 720\n    }\n};\n/**\n * Keeps track of the browser permission to use microphone. This permission also\n * affects an ability to enumerate audio devices.\n */ const getAudioBrowserPermission = lazy(()=>new BrowserPermission({\n        constraints: audioDeviceConstraints,\n        queryName: \"microphone\"\n    }));\n/**\n * Keeps track of the browser permission to use camera. This permission also\n * affects an ability to enumerate video devices.\n */ const getVideoBrowserPermission = lazy(()=>new BrowserPermission({\n        constraints: videoDeviceConstraints,\n        queryName: \"camera\"\n    }));\nconst getDeviceChangeObserver = lazy(()=>{\n    // 'addEventListener' is not available in React Native, returning\n    // an observable that will never fire\n    if (!navigator.mediaDevices.addEventListener) return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__.from)([]);\n    return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_25__.fromEvent)(navigator.mediaDevices, \"devicechange\").pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)(()=>undefined), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_26__.debounceTime)(500));\n});\n/**\n * Prompts the user for a permission to use audio devices (if not already granted\n * and was not prompted before) and lists the available 'audioinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */ const getAudioDevices = lazy(()=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_27__.merge)(getDeviceChangeObserver(), getAudioBrowserPermission().asObservable()).pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__.startWith)(undefined), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.concatMap)(()=>getDevices(getAudioBrowserPermission(), \"audioinput\")), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)(1));\n});\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'videoinput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */ const getVideoDevices = ()=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_27__.merge)(getDeviceChangeObserver(), getVideoBrowserPermission().asObservable()).pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__.startWith)(undefined), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.concatMap)(()=>getDevices(getVideoBrowserPermission(), \"videoinput\")), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)(1));\n};\n/**\n * Prompts the user for a permission to use video devices (if not already granted\n * and was not prompted before) and lists the available 'audiooutput' devices,\n * if devices are added/removed the list is updated, and if the permission is revoked,\n * the observable errors.\n */ const getAudioOutputDevices = ()=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_27__.merge)(getDeviceChangeObserver(), getAudioBrowserPermission().asObservable()).pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__.startWith)(undefined), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.concatMap)(()=>getDevices(getAudioBrowserPermission(), \"audiooutput\")), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)(1));\n};\nconst getStream = async (constraints)=>{\n    return await navigator.mediaDevices.getUserMedia(constraints);\n};\n/**\n * Returns an audio media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @angular It's recommended to use the [`DeviceManagerService`](./DeviceManagerService.md) for a higher level API, use this low-level method only if the `DeviceManagerService` doesn't suit your requirements.\n * @param trackConstraints the constraints to use when requesting the stream.\n * @returns the new `MediaStream` fulfilling the given constraints.\n */ const getAudioStream = async (trackConstraints)=>{\n    const constraints = {\n        audio: {\n            ...audioDeviceConstraints.audio,\n            ...trackConstraints\n        }\n    };\n    try {\n        await getAudioBrowserPermission().prompt({\n            throwOnNotAllowed: true,\n            forcePrompt: true\n        });\n        return getStream(constraints);\n    } catch (e) {\n        getLogger([\n            \"devices\"\n        ])(\"error\", \"Failed to get audio stream\", {\n            error: e,\n            constraints: constraints\n        });\n        throw e;\n    }\n};\n/**\n * Returns a video media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @angular It's recommended to use the [`DeviceManagerService`](./DeviceManagerService.md) for a higher level API, use this low-level method only if the `DeviceManagerService` doesn't suit your requirements.\n * @param trackConstraints the constraints to use when requesting the stream.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */ const getVideoStream = async (trackConstraints)=>{\n    const constraints = {\n        video: {\n            ...videoDeviceConstraints.video,\n            ...trackConstraints\n        }\n    };\n    try {\n        await getVideoBrowserPermission().prompt({\n            throwOnNotAllowed: true,\n            forcePrompt: true\n        });\n        return getStream(constraints);\n    } catch (e) {\n        getLogger([\n            \"devices\"\n        ])(\"error\", \"Failed to get video stream\", {\n            error: e,\n            constraints: constraints\n        });\n        throw e;\n    }\n};\n/**\n * Prompts the user for a permission to share a screen.\n * If the user grants the permission, a screen sharing stream is returned. Throws otherwise.\n *\n * The callers of this API are responsible to handle the possible errors.\n *\n * @angular It's recommended to use the [`DeviceManagerService`](./DeviceManagerService.md) for a higher level API, use this low-level method only if the `DeviceManagerService` doesn't suit your requirements.\n *\n * @param options any additional options to pass to the [`getDisplayMedia`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) API.\n */ const getScreenShareStream = async (options)=>{\n    try {\n        return await navigator.mediaDevices.getDisplayMedia({\n            video: true,\n            audio: {\n                channelCount: {\n                    ideal: 2\n                },\n                echoCancellation: false,\n                autoGainControl: false,\n                noiseSuppression: false\n            },\n            // @ts-expect-error - not present in types yet\n            systemAudio: \"include\",\n            ...options\n        });\n    } catch (e) {\n        getLogger([\n            \"devices\"\n        ])(\"error\", \"Failed to get screen share stream\", e);\n        throw e;\n    }\n};\nconst deviceIds$ = typeof navigator !== \"undefined\" && typeof navigator.mediaDevices !== \"undefined\" ? getDeviceChangeObserver().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__.startWith)(undefined), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.concatMap)(()=>navigator.mediaDevices.enumerateDevices()), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)(1)) : undefined;\n/**\n * Deactivates MediaStream (stops and removes tracks) to be later garbage collected\n *\n * @param stream MediaStream\n * @returns void\n */ const disposeOfMediaStream = (stream)=>{\n    if (!stream.active) return;\n    stream.getTracks().forEach((track)=>{\n        track.stop();\n        stream.removeTrack(track);\n    });\n    // @ts-expect-error release() is present in react-native-webrtc and must be called to dispose the stream\n    if (typeof stream.release === \"function\") {\n        // @ts-expect-error\n        stream.release();\n    }\n};\nclass InputMediaDeviceManager {\n    constructor(call, state, trackType){\n        this.call = call;\n        this.state = state;\n        this.trackType = trackType;\n        /**\n         * if true, stops the media stream when call is left\n         */ this.stopOnLeave = true;\n        this.subscriptions = [];\n        this.isTrackStoppedDueToTrackEnd = false;\n        this.filters = [];\n        this.statusChangeConcurrencyTag = Symbol(\"statusChangeConcurrencyTag\");\n        this.filterRegistrationConcurrencyTag = Symbol(\"filterRegistrationConcurrencyTag\");\n        /**\n         * Disposes the manager.\n         *\n         * @internal\n         */ this.dispose = ()=>{\n            this.subscriptions.forEach((s)=>s());\n        };\n        this.logger = getLogger([\n            `${TrackType[trackType].toLowerCase()} manager`\n        ]);\n        if (deviceIds$ && !isReactNative() && (this.trackType === TrackType.AUDIO || this.trackType === TrackType.VIDEO)) {\n            this.handleDisconnectedOrReplacedDevices();\n        }\n    }\n    /**\n     * Lists the available audio/video devices\n     *\n     * Note: It prompts the user for a permission to use devices (if not already granted)\n     *\n     * @returns an Observable that will be updated if a device is connected or disconnected\n     */ listDevices() {\n        return this.getDevices();\n    }\n    /**\n     * Returns `true` when this device is in enabled state.\n     */ get enabled() {\n        return this.state.status === \"enabled\";\n    }\n    /**\n     * Starts stream.\n     */ async enable() {\n        if (this.state.optimisticStatus === \"enabled\") {\n            return;\n        }\n        this.state.setPendingStatus(\"enabled\");\n        await withCancellation(this.statusChangeConcurrencyTag, async (signal)=>{\n            try {\n                await this.unmuteStream();\n                this.state.setStatus(\"enabled\");\n            } finally{\n                if (!signal.aborted) {\n                    this.state.setPendingStatus(this.state.status);\n                }\n            }\n        });\n    }\n    /**\n     * Stops or pauses the stream based on state.disableMode\n     * @param {boolean} [forceStop=false] when true, stops the tracks regardless of the state.disableMode\n     */ async disable(forceStop = false) {\n        this.state.prevStatus = this.state.status;\n        if (!forceStop && this.state.optimisticStatus === \"disabled\") {\n            return;\n        }\n        this.state.setPendingStatus(\"disabled\");\n        await withCancellation(this.statusChangeConcurrencyTag, async (signal)=>{\n            try {\n                const stopTracks = forceStop || this.state.disableMode === \"stop-tracks\";\n                await this.muteStream(stopTracks);\n                this.state.setStatus(\"disabled\");\n            } finally{\n                if (!signal.aborted) {\n                    this.state.setPendingStatus(this.state.status);\n                }\n            }\n        });\n    }\n    /**\n     * Returns a promise that resolves when all pe\n     */ async statusChangeSettled() {\n        await settled(this.statusChangeConcurrencyTag);\n    }\n    /**\n     * If status was previously enabled, it will re-enable the device.\n     */ async resume() {\n        if (this.state.prevStatus === \"enabled\" && this.state.status === \"disabled\") {\n            await this.enable();\n        }\n    }\n    /**\n     * If the current device status is disabled, it will enable the device,\n     * else it will disable it.\n     */ async toggle() {\n        if (this.state.optimisticStatus === \"enabled\") {\n            return await this.disable();\n        } else {\n            return await this.enable();\n        }\n    }\n    /**\n     * Registers a filter that will be applied to the stream.\n     *\n     * The registered filter will get the existing stream, and it should return\n     * a new stream with the applied filter.\n     *\n     * @param filter the filter to register.\n     * @returns MediaStreamFilterRegistrationResult\n     */ registerFilter(filter) {\n        const entry = {\n            start: filter,\n            stop: undefined\n        };\n        const registered = withoutConcurrency(this.filterRegistrationConcurrencyTag, async ()=>{\n            this.filters.push(entry);\n            await this.applySettingsToStream();\n        });\n        return {\n            registered,\n            unregister: ()=>withoutConcurrency(this.filterRegistrationConcurrencyTag, async ()=>{\n                    entry.stop?.();\n                    this.filters = this.filters.filter((f)=>f !== entry);\n                    await this.applySettingsToStream();\n                })\n        };\n    }\n    /**\n     * Will set the default constraints for the device.\n     *\n     * @param constraints the constraints to set.\n     */ setDefaultConstraints(constraints) {\n        this.state.setDefaultConstraints(constraints);\n    }\n    /**\n     * Selects a device.\n     *\n     * Note: This method is not supported in React Native\n     * @param deviceId the device id to select.\n     */ async select(deviceId) {\n        if (isReactNative()) {\n            throw new Error(\"This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.\");\n        }\n        if (deviceId === this.state.selectedDevice) {\n            return;\n        }\n        this.state.setDevice(deviceId);\n        await this.applySettingsToStream();\n    }\n    async applySettingsToStream() {\n        await withCancellation(this.statusChangeConcurrencyTag, async ()=>{\n            if (this.enabled) {\n                await this.muteStream();\n                await this.unmuteStream();\n            }\n        });\n    }\n    getTracks() {\n        return this.state.mediaStream?.getTracks() ?? [];\n    }\n    async muteStream(stopTracks = true) {\n        if (!this.state.mediaStream) return;\n        this.logger(\"debug\", `${stopTracks ? \"Stopping\" : \"Disabling\"} stream`);\n        if (this.call.state.callingState === CallingState.JOINED) {\n            await this.stopPublishStream(stopTracks);\n        }\n        this.muteLocalStream(stopTracks);\n        const allEnded = this.getTracks().every((t)=>t.readyState === \"ended\");\n        if (allEnded) {\n            if (this.state.mediaStream && // @ts-expect-error release() is present in react-native-webrtc\n            typeof this.state.mediaStream.release === \"function\") {\n                // @ts-expect-error called to dispose the stream in RN\n                this.state.mediaStream.release();\n            }\n            this.state.setMediaStream(undefined, undefined);\n            this.filters.forEach((entry)=>entry.stop?.());\n        }\n    }\n    muteTracks() {\n        this.getTracks().forEach((track)=>{\n            if (track.enabled) track.enabled = false;\n        });\n    }\n    unmuteTracks() {\n        this.getTracks().forEach((track)=>{\n            if (!track.enabled) track.enabled = true;\n        });\n    }\n    stopTracks() {\n        this.getTracks().forEach((track)=>{\n            if (track.readyState === \"live\") track.stop();\n        });\n    }\n    muteLocalStream(stopTracks) {\n        if (!this.state.mediaStream) {\n            return;\n        }\n        if (stopTracks) {\n            this.stopTracks();\n        } else {\n            this.muteTracks();\n        }\n    }\n    async unmuteStream() {\n        this.logger(\"debug\", \"Starting stream\");\n        let stream;\n        let rootStream;\n        if (this.state.mediaStream && this.getTracks().every((t)=>t.readyState === \"live\")) {\n            stream = this.state.mediaStream;\n            this.unmuteTracks();\n        } else {\n            const defaultConstraints = this.state.defaultConstraints;\n            const constraints = {\n                ...defaultConstraints,\n                deviceId: this.state.selectedDevice\n            };\n            /**\n             * Chains two media streams together.\n             *\n             * In our case, filters MediaStreams are derived from their parent MediaStream.\n             * However, once a child filter's track is stopped,\n             * the tracks of the parent MediaStream aren't automatically stopped.\n             * This leads to a situation where the camera indicator light is still on\n             * even though the user stopped publishing video.\n             *\n             * This function works around this issue by stopping the parent MediaStream's tracks\n             * as well once the child filter's tracks are stopped.\n             *\n             * It works by patching the stop() method of the child filter's tracks to also stop\n             * the parent MediaStream's tracks of the same type. Here we assume that\n             * the parent MediaStream has only one track of each type.\n             *\n             * @param parentStream the parent MediaStream. Omit for the root stream.\n             */ const chainWith = (parentStream)=>async (filterStream)=>{\n                    if (!parentStream) return filterStream;\n                    // TODO OL: take care of track.enabled property as well\n                    const parent = await parentStream;\n                    filterStream.getTracks().forEach((track)=>{\n                        const originalStop = track.stop;\n                        track.stop = function stop() {\n                            originalStop.call(track);\n                            parent.getTracks().forEach((parentTrack)=>{\n                                if (parentTrack.kind === track.kind) {\n                                    parentTrack.stop();\n                                }\n                            });\n                        };\n                    });\n                    parent.getTracks().forEach((parentTrack)=>{\n                        // When the parent stream abruptly ends, we propagate the event\n                        // to the filter stream.\n                        // This usually happens when the camera/microphone permissions\n                        // are revoked or when the device is disconnected.\n                        const handleParentTrackEnded = ()=>{\n                            filterStream.getTracks().forEach((track)=>{\n                                if (parentTrack.kind !== track.kind) return;\n                                track.stop();\n                                track.dispatchEvent(new Event(\"ended\")); // propagate the event\n                            });\n                        };\n                        parentTrack.addEventListener(\"ended\", handleParentTrackEnded);\n                        this.subscriptions.push(()=>{\n                            parentTrack.removeEventListener(\"ended\", handleParentTrackEnded);\n                        });\n                    });\n                    return filterStream;\n                };\n            // the rootStream represents the stream coming from the actual device\n            // e.g. camera or microphone stream\n            rootStream = this.getStream(constraints);\n            // we publish the last MediaStream of the chain\n            stream = await this.filters.reduce((parent, entry)=>parent.then((inputStream)=>{\n                    const { stop, output } = entry.start(inputStream);\n                    entry.stop = stop;\n                    return output;\n                }).then(chainWith(parent), (error)=>{\n                    this.logger(\"warn\", \"Filter failed to start and will be ignored\", error);\n                    return parent;\n                }), rootStream);\n        }\n        if (this.call.state.callingState === CallingState.JOINED) {\n            await this.publishStream(stream);\n        }\n        if (this.state.mediaStream !== stream) {\n            this.state.setMediaStream(stream, await rootStream);\n            const handleTrackEnded = async ()=>{\n                await this.statusChangeSettled();\n                if (this.enabled) {\n                    this.isTrackStoppedDueToTrackEnd = true;\n                    setTimeout(()=>{\n                        this.isTrackStoppedDueToTrackEnd = false;\n                    }, 2000);\n                    await this.disable();\n                }\n            };\n            this.getTracks().forEach((track)=>{\n                track.addEventListener(\"ended\", handleTrackEnded);\n                this.subscriptions.push(()=>track.removeEventListener(\"ended\", handleTrackEnded));\n            });\n        }\n    }\n    get mediaDeviceKind() {\n        if (this.trackType === TrackType.AUDIO) {\n            return \"audioinput\";\n        }\n        if (this.trackType === TrackType.VIDEO) {\n            return \"videoinput\";\n        }\n        return \"\";\n    }\n    handleDisconnectedOrReplacedDevices() {\n        this.subscriptions.push(createSubscription((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([\n            deviceIds$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_30__.pairwise)()),\n            this.state.selectedDevice$\n        ]), async ([[prevDevices, currentDevices], deviceId])=>{\n            try {\n                if (!deviceId) return;\n                await this.statusChangeSettled();\n                let isDeviceDisconnected = false;\n                let isDeviceReplaced = false;\n                const currentDevice = this.findDeviceInList(currentDevices, deviceId);\n                const prevDevice = this.findDeviceInList(prevDevices, deviceId);\n                if (!currentDevice && prevDevice) {\n                    isDeviceDisconnected = true;\n                } else if (currentDevice && prevDevice && currentDevice.deviceId === prevDevice.deviceId && currentDevice.groupId !== prevDevice.groupId) {\n                    isDeviceReplaced = true;\n                }\n                if (isDeviceDisconnected) {\n                    await this.disable();\n                    await this.select(undefined);\n                }\n                if (isDeviceReplaced) {\n                    if (this.isTrackStoppedDueToTrackEnd && this.state.status === \"disabled\") {\n                        await this.enable();\n                        this.isTrackStoppedDueToTrackEnd = false;\n                    } else {\n                        await this.applySettingsToStream();\n                    }\n                }\n            } catch (err) {\n                this.logger(\"warn\", \"Unexpected error while handling disconnected or replaced device\", err);\n            }\n        }));\n    }\n    findDeviceInList(devices, deviceId) {\n        return devices.find((d)=>d.deviceId === deviceId && d.kind === this.mediaDeviceKind);\n    }\n}\nclass InputMediaDeviceManagerState {\n    /**\n     * Constructs new InputMediaDeviceManagerState instance.\n     *\n     * @param disableMode the disable mode to use.\n     * @param permission the BrowserPermission to use for querying.\n     * `undefined` means no permission is required.\n     */ constructor(disableMode = \"stop-tracks\", permission){\n        this.disableMode = disableMode;\n        this.statusSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.optimisticStatusSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.mediaStreamSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.selectedDeviceSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.defaultConstraintsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        /**\n         * An Observable that emits the current media stream, or `undefined` if the device is currently disabled.\n         *\n         */ this.mediaStream$ = this.mediaStreamSubject.asObservable();\n        /**\n         * An Observable that emits the currently selected device\n         */ this.selectedDevice$ = this.selectedDeviceSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n        /**\n         * An Observable that emits the device status\n         */ this.status$ = this.statusSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n        /**\n         * An Observable the reflects the requested device status. Useful for optimistic UIs\n         */ this.optimisticStatus$ = this.optimisticStatusSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n        /**\n         * The default constraints for the device.\n         */ this.defaultConstraints$ = this.defaultConstraintsSubject.asObservable();\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @internal\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n        this.hasBrowserPermission$ = permission ? permission.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.shareReplay)(1)) : (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_31__.of)(true);\n    }\n    /**\n     * The device status\n     */ get status() {\n        return this.getCurrentValue(this.status$);\n    }\n    /**\n     * The requested device status. Useful for optimistic UIs\n     */ get optimisticStatus() {\n        return this.getCurrentValue(this.optimisticStatus$);\n    }\n    /**\n     * The currently selected device\n     */ get selectedDevice() {\n        return this.getCurrentValue(this.selectedDevice$);\n    }\n    /**\n     * The current media stream, or `undefined` if the device is currently disabled.\n     */ get mediaStream() {\n        return this.getCurrentValue(this.mediaStream$);\n    }\n    /**\n     * @internal\n     * @param status\n     */ setStatus(status) {\n        this.setCurrentValue(this.statusSubject, status);\n    }\n    /**\n     * @internal\n     * @param pendingStatus\n     */ setPendingStatus(pendingStatus) {\n        this.setCurrentValue(this.optimisticStatusSubject, pendingStatus);\n    }\n    /**\n     * Updates the `mediaStream` state variable.\n     *\n     * @internal\n     * @param stream the stream to set.\n     * @param rootStream the root stream, applicable when filters are used\n     * as this is the stream that holds the actual deviceId information.\n     */ setMediaStream(stream, rootStream) {\n        this.setCurrentValue(this.mediaStreamSubject, stream);\n        if (rootStream) {\n            this.setDevice(this.getDeviceIdFromStream(rootStream));\n        }\n    }\n    /**\n     * @internal\n     * @param deviceId the device id to set.\n     */ setDevice(deviceId) {\n        this.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    }\n    /**\n     * Gets the default constraints for the device.\n     */ get defaultConstraints() {\n        return this.getCurrentValue(this.defaultConstraints$);\n    }\n    /**\n     * Sets the default constraints for the device.\n     *\n     * @internal\n     * @param constraints the constraints to set.\n     */ setDefaultConstraints(constraints) {\n        this.setCurrentValue(this.defaultConstraintsSubject, constraints);\n    }\n}\nclass CameraManagerState extends InputMediaDeviceManagerState {\n    constructor(){\n        super(\"stop-tracks\", getVideoBrowserPermission());\n        this.directionSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        this.direction$ = this.directionSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n    }\n    /**\n     * The preferred camera direction\n     * front - means the camera facing the user\n     * back - means the camera facing the environment\n     */ get direction() {\n        return this.getCurrentValue(this.direction$);\n    }\n    /**\n     * @internal\n     */ setDirection(direction) {\n        this.setCurrentValue(this.directionSubject, direction);\n    }\n    /**\n     * @internal\n     */ setMediaStream(stream, rootStream) {\n        super.setMediaStream(stream, rootStream);\n        if (stream) {\n            // RN getSettings() doesn't return facingMode, so we don't verify camera direction\n            const direction = isReactNative() ? this.direction : stream.getVideoTracks()[0]?.getSettings().facingMode === \"environment\" ? \"back\" : \"front\";\n            this.setDirection(direction);\n        }\n    }\n    getDeviceIdFromStream(stream) {\n        const [track] = stream.getVideoTracks();\n        return track?.getSettings().deviceId;\n    }\n}\nclass CameraManager extends InputMediaDeviceManager {\n    /**\n     * Constructs a new CameraManager.\n     *\n     * @param call the call instance.\n     */ constructor(call){\n        super(call, new CameraManagerState(), TrackType.VIDEO);\n        this.targetResolution = {\n            width: 1280,\n            height: 720\n        };\n    }\n    /**\n     * Select the camera direction.\n     *\n     * @param direction the direction of the camera to select.\n     */ async selectDirection(direction) {\n        this.state.setDirection(direction);\n        // Providing both device id and direction doesn't work, so we deselect the device\n        this.state.setDevice(undefined);\n        await this.applySettingsToStream();\n    }\n    /**\n     * Flips the camera direction: if it's front it will change to back, if it's back, it will change to front.\n     *\n     * Note: if there is no available camera with the desired direction, this method will do nothing.\n     * @returns\n     */ async flip() {\n        const newDirection = this.state.direction === \"front\" ? \"back\" : \"front\";\n        await this.selectDirection(newDirection);\n    }\n    /**\n     * @internal\n     */ async selectTargetResolution(resolution) {\n        this.targetResolution.height = resolution.height;\n        this.targetResolution.width = resolution.width;\n        if (this.state.optimisticStatus === \"enabled\") {\n            try {\n                await this.statusChangeSettled();\n            } catch (error) {\n                // couldn't enable device, target resolution will be applied the next time user attempts to start the device\n                this.logger(\"warn\", \"could not apply target resolution\", error);\n            }\n        }\n        if (this.enabled) {\n            const { width, height } = this.state.mediaStream.getVideoTracks()[0]?.getSettings();\n            if (width !== this.targetResolution.width || height !== this.targetResolution.height) {\n                await this.applySettingsToStream();\n                this.logger(\"debug\", `${width}x${height} target resolution applied to media stream`);\n            }\n        }\n    }\n    /**\n     * Sets the preferred codec for encoding the video.\n     *\n     * @internal internal use only, not part of the public API.\n     * @param codec the codec to use for encoding the video.\n     */ setPreferredCodec(codec) {\n        this.updatePublishOptions({\n            preferredCodec: codec\n        });\n    }\n    /**\n     * Updates the preferred publish options for the video stream.\n     *\n     * @internal\n     * @param options the options to use.\n     */ updatePublishOptions(options) {\n        this.publishOptions = {\n            ...this.publishOptions,\n            ...options\n        };\n    }\n    /**\n     * Returns the capture resolution of the camera.\n     */ getCaptureResolution() {\n        const { mediaStream } = this.state;\n        if (!mediaStream) return;\n        const [videoTrack] = mediaStream.getVideoTracks();\n        if (!videoTrack) return;\n        const settings = videoTrack.getSettings();\n        return {\n            width: settings.width,\n            height: settings.height,\n            frameRate: settings.frameRate\n        };\n    }\n    getDevices() {\n        return getVideoDevices();\n    }\n    getStream(constraints) {\n        constraints.width = this.targetResolution.width;\n        constraints.height = this.targetResolution.height;\n        // We can't set both device id and facing mode\n        // Device id has higher priority\n        if (!constraints.deviceId && this.state.direction) {\n            constraints.facingMode = this.state.direction === \"front\" ? \"user\" : \"environment\";\n        }\n        return getVideoStream(constraints);\n    }\n    publishStream(stream) {\n        return this.call.publishVideoStream(stream, this.publishOptions);\n    }\n    stopPublishStream(stopTracks) {\n        return this.call.stopPublish(TrackType.VIDEO, stopTracks);\n    }\n}\nclass MicrophoneManagerState extends InputMediaDeviceManagerState {\n    constructor(disableMode){\n        super(disableMode, getAudioBrowserPermission());\n        this.speakingWhileMutedSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(false);\n        this.speakingWhileMuted$ = this.speakingWhileMutedSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n    }\n    /**\n     * `true` if the user's microphone is muted but they'are speaking.\n     *\n     * This feature is not available in the React Native SDK.\n     */ get speakingWhileMuted() {\n        return this.getCurrentValue(this.speakingWhileMuted$);\n    }\n    /**\n     * @internal\n     */ setSpeakingWhileMuted(isSpeaking) {\n        this.setCurrentValue(this.speakingWhileMutedSubject, isSpeaking);\n    }\n    getDeviceIdFromStream(stream) {\n        const [track] = stream.getAudioTracks();\n        return track?.getSettings().deviceId;\n    }\n}\nconst DETECTION_FREQUENCY_IN_MS = 500;\nconst AUDIO_LEVEL_THRESHOLD$1 = 150;\nconst FFT_SIZE = 128;\n/**\n * Creates a new sound detector.\n *\n * @param audioStream the audio stream to observe. Depending on the provided configuration, this stream might be destroyed when the sound detector is stopped.\n * @param onSoundDetectedStateChanged a callback which is called when the sound state changes.\n * @param options custom options for the sound detector.\n * @returns a clean-up function which once invoked stops the sound detector.\n */ const createSoundDetector = (audioStream, onSoundDetectedStateChanged, options = {})=>{\n    const { detectionFrequencyInMs = DETECTION_FREQUENCY_IN_MS, audioLevelThreshold = AUDIO_LEVEL_THRESHOLD$1, fftSize = FFT_SIZE, destroyStreamOnStop = true } = options;\n    const audioContext = new AudioContext();\n    const analyser = audioContext.createAnalyser();\n    analyser.fftSize = fftSize;\n    const microphone = audioContext.createMediaStreamSource(audioStream);\n    microphone.connect(analyser);\n    const intervalId = setInterval(()=>{\n        const data = new Uint8Array(analyser.frequencyBinCount);\n        analyser.getByteFrequencyData(data);\n        const isSoundDetected = data.some((value)=>value >= audioLevelThreshold);\n        const averagedDataValue = data.reduce((pv, cv)=>pv + cv, 0) / data.length;\n        const percentage = averagedDataValue > audioLevelThreshold ? 100 : Math.round(averagedDataValue / audioLevelThreshold * 100);\n        // When the track is disabled, it takes time for the buffer to empty\n        // This check will ensure that we don't send anything if the track is disabled\n        if (audioStream.getAudioTracks()[0]?.enabled) {\n            onSoundDetectedStateChanged({\n                isSoundDetected,\n                audioLevel: percentage\n            });\n        } else {\n            onSoundDetectedStateChanged({\n                isSoundDetected: false,\n                audioLevel: 0\n            });\n        }\n    }, detectionFrequencyInMs);\n    return async function stop() {\n        clearInterval(intervalId);\n        // clean-up the AudioContext elements\n        microphone.disconnect();\n        analyser.disconnect();\n        if (audioContext.state !== \"closed\") {\n            await audioContext.close();\n        }\n        // stop the stream\n        if (destroyStreamOnStop) {\n            audioStream.getTracks().forEach((track)=>{\n                track.stop();\n                audioStream.removeTrack(track);\n            });\n        }\n    };\n};\nconst AUDIO_LEVEL_THRESHOLD = 0.2;\nclass RNSpeechDetector {\n    constructor(){\n        this.pc1 = new RTCPeerConnection({});\n        this.pc2 = new RTCPeerConnection({});\n    }\n    /**\n     * Starts the speech detection.\n     */ async start() {\n        try {\n            const audioStream = await navigator.mediaDevices.getUserMedia({\n                audio: true\n            });\n            this.pc1.addEventListener(\"icecandidate\", async (e)=>{\n                await this.pc2.addIceCandidate(e.candidate);\n            });\n            this.pc2.addEventListener(\"icecandidate\", async (e)=>{\n                await this.pc1.addIceCandidate(e.candidate);\n            });\n            audioStream.getTracks().forEach((track)=>this.pc1.addTrack(track, audioStream));\n            const offer = await this.pc1.createOffer({});\n            await this.pc2.setRemoteDescription(offer);\n            await this.pc1.setLocalDescription(offer);\n            const answer = await this.pc2.createAnswer();\n            await this.pc1.setRemoteDescription(answer);\n            await this.pc2.setLocalDescription(answer);\n            const audioTracks = audioStream.getAudioTracks();\n            // We need to mute the audio track for this temporary stream, or else you will hear yourself twice while in the call.\n            audioTracks.forEach((track)=>track.enabled = false);\n        } catch (error) {\n            console.error(\"Error connecting and negotiating between PeerConnections:\", error);\n        }\n    }\n    /**\n     * Stops the speech detection and releases all allocated resources.\n     */ stop() {\n        this.pc1.close();\n        this.pc2.close();\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n        }\n    }\n    /**\n     * Public method that detects the audio levels and returns the status.\n     */ onSpeakingDetectedStateChange(onSoundDetectedStateChanged) {\n        this.intervalId = setInterval(async ()=>{\n            const stats = await this.pc1.getStats();\n            const report = flatten(stats);\n            // Audio levels are present inside stats of type `media-source` and of kind `audio`\n            const audioMediaSourceStats = report.find((stat)=>stat.type === \"media-source\" && stat.kind === \"audio\");\n            if (audioMediaSourceStats) {\n                const { audioLevel } = audioMediaSourceStats;\n                if (audioLevel) {\n                    if (audioLevel >= AUDIO_LEVEL_THRESHOLD) {\n                        onSoundDetectedStateChanged({\n                            isSoundDetected: true,\n                            audioLevel\n                        });\n                    } else {\n                        onSoundDetectedStateChanged({\n                            isSoundDetected: false,\n                            audioLevel: 0\n                        });\n                    }\n                }\n            }\n        }, 1000);\n        return ()=>{\n            clearInterval(this.intervalId);\n        };\n    }\n}\nclass MicrophoneManager extends InputMediaDeviceManager {\n    constructor(call, disableMode = isReactNative() ? \"disable-tracks\" : \"stop-tracks\"){\n        super(call, new MicrophoneManagerState(disableMode), TrackType.AUDIO);\n        this.speakingWhileMutedNotificationEnabled = true;\n        this.soundDetectorConcurrencyTag = Symbol(\"soundDetectorConcurrencyTag\");\n        this.subscriptions.push(createSubscription((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([\n            this.call.state.callingState$,\n            this.call.state.ownCapabilities$,\n            this.state.selectedDevice$,\n            this.state.status$\n        ]), async ([callingState, ownCapabilities, deviceId, status])=>{\n            try {\n                if (callingState === CallingState.LEFT) {\n                    await this.stopSpeakingWhileMutedDetection();\n                }\n                if (callingState !== CallingState.JOINED) return;\n                if (!this.speakingWhileMutedNotificationEnabled) return;\n                if (ownCapabilities.includes(OwnCapability.SEND_AUDIO)) {\n                    if (status === \"disabled\") {\n                        await this.startSpeakingWhileMutedDetection(deviceId);\n                    } else {\n                        await this.stopSpeakingWhileMutedDetection();\n                    }\n                } else {\n                    await this.stopSpeakingWhileMutedDetection();\n                }\n            } catch (err) {\n                this.logger(\"warn\", \"Could not enable speaking while muted\", err);\n            }\n        }));\n        this.subscriptions.push(createSubscription(this.call.state.callingState$, (callingState)=>{\n            // do nothing when noise filtering isn't turned on\n            if (!this.noiseCancellationRegistration || !this.noiseCancellation) return;\n            const autoOn = this.call.state.settings?.audio.noise_cancellation?.mode === NoiseCancellationSettingsModeEnum.AUTO_ON;\n            if (autoOn && callingState === CallingState.JOINED) {\n                this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.enable()).catch((err)=>{\n                    this.logger(\"warn\", `Failed to enable noise cancellation`, err);\n                    return this.call.notifyNoiseCancellationStopped();\n                });\n            } else if (callingState === CallingState.LEFT) {\n                this.noiseCancellationRegistration.then(()=>this.noiseCancellation?.disable()).catch((err)=>{\n                    this.logger(\"warn\", `Failed to disable noise cancellation`, err);\n                });\n            }\n        }));\n    }\n    /**\n     * Enables noise cancellation for the microphone.\n     *\n     * Note: not supported in React Native.\n     * @param noiseCancellation - a noise cancellation instance to use.\n     */ async enableNoiseCancellation(noiseCancellation) {\n        if (isReactNative()) {\n            throw new Error(\"Noise cancellation is not supported in React Native\");\n        }\n        const { ownCapabilities, settings } = this.call.state;\n        const hasNoiseCancellationCapability = ownCapabilities.includes(OwnCapability.ENABLE_NOISE_CANCELLATION);\n        if (!hasNoiseCancellationCapability) {\n            throw new Error(\"Noise cancellation is not available.\");\n        }\n        const noiseCancellationSettings = settings?.audio.noise_cancellation;\n        if (!noiseCancellationSettings || noiseCancellationSettings.mode === NoiseCancellationSettingsModeEnum.DISABLED) {\n            throw new Error(\"Noise cancellation is disabled for this call type.\");\n        }\n        try {\n            this.noiseCancellation = noiseCancellation;\n            // listen for change events and notify the SFU\n            this.noiseCancellationChangeUnsubscribe = this.noiseCancellation.on(\"change\", (enabled)=>{\n                if (enabled) {\n                    this.call.notifyNoiseCancellationStarting().catch((err)=>{\n                        this.logger(\"warn\", `notifyNoiseCancellationStart failed`, err);\n                    });\n                } else {\n                    this.call.notifyNoiseCancellationStopped().catch((err)=>{\n                        this.logger(\"warn\", `notifyNoiseCancellationStop failed`, err);\n                    });\n                }\n            });\n            const registrationResult = this.registerFilter(noiseCancellation.toFilter());\n            this.noiseCancellationRegistration = registrationResult.registered;\n            this.unregisterNoiseCancellation = registrationResult.unregister;\n            await this.noiseCancellationRegistration;\n            // handles an edge case where a noise cancellation is enabled after\n            // the participant as joined the call -> we immediately enable NC\n            if (noiseCancellationSettings.mode === NoiseCancellationSettingsModeEnum.AUTO_ON && this.call.state.callingState === CallingState.JOINED) {\n                noiseCancellation.enable();\n            }\n        } catch (e) {\n            this.logger(\"warn\", \"Failed to enable noise cancellation\", e);\n            await this.disableNoiseCancellation().catch((err)=>{\n                this.logger(\"warn\", \"Failed to disable noise cancellation\", err);\n            });\n        }\n    }\n    /**\n     * Disables noise cancellation for the microphone.\n     *\n     * Note: not supported in React Native.\n     */ async disableNoiseCancellation() {\n        if (isReactNative()) {\n            throw new Error(\"Noise cancellation is not supported in React Native\");\n        }\n        await (this.unregisterNoiseCancellation?.() ?? Promise.resolve()).then(()=>this.noiseCancellation?.disable()).then(()=>this.noiseCancellationChangeUnsubscribe?.()).catch((err)=>{\n            this.logger(\"warn\", \"Failed to unregister noise cancellation\", err);\n        });\n        await this.call.notifyNoiseCancellationStopped();\n    }\n    /**\n     * Enables speaking while muted notification.\n     */ async enableSpeakingWhileMutedNotification() {\n        this.speakingWhileMutedNotificationEnabled = true;\n        if (this.state.status === \"disabled\") {\n            await this.startSpeakingWhileMutedDetection(this.state.selectedDevice);\n        }\n    }\n    /**\n     * Disables speaking while muted notification.\n     */ async disableSpeakingWhileMutedNotification() {\n        this.speakingWhileMutedNotificationEnabled = false;\n        await this.stopSpeakingWhileMutedDetection();\n    }\n    getDevices() {\n        return getAudioDevices();\n    }\n    getStream(constraints) {\n        return getAudioStream(constraints);\n    }\n    publishStream(stream) {\n        return this.call.publishAudioStream(stream);\n    }\n    stopPublishStream(stopTracks) {\n        return this.call.stopPublish(TrackType.AUDIO, stopTracks);\n    }\n    async startSpeakingWhileMutedDetection(deviceId) {\n        await withoutConcurrency(this.soundDetectorConcurrencyTag, async ()=>{\n            await this.stopSpeakingWhileMutedDetection();\n            if (isReactNative()) {\n                this.rnSpeechDetector = new RNSpeechDetector();\n                await this.rnSpeechDetector.start();\n                const unsubscribe = this.rnSpeechDetector?.onSpeakingDetectedStateChange((event)=>{\n                    this.state.setSpeakingWhileMuted(event.isSoundDetected);\n                });\n                this.soundDetectorCleanup = ()=>{\n                    unsubscribe();\n                    this.rnSpeechDetector?.stop();\n                    this.rnSpeechDetector = undefined;\n                };\n            } else {\n                // Need to start a new stream that's not connected to publisher\n                const stream = await this.getStream({\n                    deviceId\n                });\n                this.soundDetectorCleanup = createSoundDetector(stream, (event)=>{\n                    this.state.setSpeakingWhileMuted(event.isSoundDetected);\n                });\n            }\n        });\n    }\n    async stopSpeakingWhileMutedDetection() {\n        await withoutConcurrency(this.soundDetectorConcurrencyTag, async ()=>{\n            if (!this.soundDetectorCleanup) return;\n            const soundDetectorCleanup = this.soundDetectorCleanup;\n            this.soundDetectorCleanup = undefined;\n            this.state.setSpeakingWhileMuted(false);\n            await soundDetectorCleanup();\n        });\n    }\n}\nclass ScreenShareState extends InputMediaDeviceManagerState {\n    constructor(){\n        super(...arguments);\n        this.audioEnabledSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(true);\n        this.settingsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(undefined);\n        /**\n         * An Observable that emits the current screen share audio status.\n         */ this.audioEnabled$ = this.audioEnabledSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n        /**\n         * An Observable that emits the current screen share settings.\n         */ this.settings$ = this.settingsSubject.asObservable();\n        /**\n         * @internal\n         */ this.getDeviceIdFromStream = (stream)=>{\n            const [track] = stream.getTracks();\n            return track?.getSettings().deviceId;\n        };\n    }\n    /**\n     * The current screen share audio status.\n     */ get audioEnabled() {\n        return this.getCurrentValue(this.audioEnabled$);\n    }\n    /**\n     * Set the current screen share audio status.\n     */ setAudioEnabled(isEnabled) {\n        this.setCurrentValue(this.audioEnabledSubject, isEnabled);\n    }\n    /**\n     * The current screen share settings.\n     */ get settings() {\n        return this.getCurrentValue(this.settings$);\n    }\n    /**\n     * Set the current screen share settings.\n     *\n     * @param settings the screen share settings to set.\n     */ setSettings(settings) {\n        this.setCurrentValue(this.settingsSubject, settings);\n    }\n}\nclass ScreenShareManager extends InputMediaDeviceManager {\n    constructor(call){\n        super(call, new ScreenShareState(), TrackType.SCREEN_SHARE);\n        this.subscriptions.push(createSubscription(call.state.settings$, (settings)=>{\n            const maybeTargetResolution = settings?.screensharing.target_resolution;\n            if (maybeTargetResolution) {\n                this.setDefaultConstraints({\n                    video: {\n                        width: maybeTargetResolution.width,\n                        height: maybeTargetResolution.height\n                    }\n                });\n            }\n        }));\n    }\n    /**\n     * Will enable screen share audio options on supported platforms.\n     *\n     * Note: for ongoing screen share, audio won't be enabled until you\n     * re-publish the screen share stream.\n     */ enableScreenShareAudio() {\n        this.state.setAudioEnabled(true);\n    }\n    /**\n     * Will disable screen share audio options on supported platforms.\n     */ async disableScreenShareAudio() {\n        this.state.setAudioEnabled(false);\n        if (this.call.publisher?.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n            await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO, true);\n        }\n    }\n    /**\n     * Returns the current screen share settings.\n     */ getSettings() {\n        return this.state.settings;\n    }\n    /**\n     * Sets the current screen share settings.\n     *\n     * @param settings the settings to set.\n     */ setSettings(settings) {\n        this.state.setSettings(settings);\n    }\n    getDevices() {\n        return (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_31__.of)([]); // there are no devices to be listed for Screen Share\n    }\n    getStream(constraints) {\n        if (!this.state.audioEnabled) {\n            constraints.audio = false;\n        }\n        return getScreenShareStream(constraints);\n    }\n    publishStream(stream) {\n        return this.call.publishScreenShareStream(stream, {\n            screenShareSettings: this.state.settings\n        });\n    }\n    async stopPublishStream(stopTracks) {\n        await this.call.stopPublish(TrackType.SCREEN_SHARE, stopTracks);\n        await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO, stopTracks);\n    }\n    /**\n     * Overrides the default `select` method to throw an error.\n     *\n     * @param deviceId ignored.\n     */ async select(deviceId) {\n        throw new Error(\"This method is not supported in for Screen Share\");\n    }\n}\nclass SpeakerState {\n    constructor(){\n        this.selectedDeviceSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(\"\");\n        this.volumeSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(1);\n        /**\n         * [Tells if the browser supports audio output change on 'audio' elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId).\n         */ this.isDeviceSelectionSupported = checkIfAudioOutputChangeSupported();\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @internal\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n        this.selectedDevice$ = this.selectedDeviceSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n        this.volume$ = this.volumeSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.distinctUntilChanged)());\n    }\n    /**\n     * The currently selected device\n     *\n     * Note: this feature is not supported in React Native\n     */ get selectedDevice() {\n        return this.getCurrentValue(this.selectedDevice$);\n    }\n    /**\n     * The currently selected volume\n     *\n     * Note: this feature is not supported in React Native\n     */ get volume() {\n        return this.getCurrentValue(this.volume$);\n    }\n    /**\n     * @internal\n     * @param deviceId\n     */ setDevice(deviceId) {\n        this.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    }\n    /**\n     * @internal\n     * @param volume\n     */ setVolume(volume) {\n        this.setCurrentValue(this.volumeSubject, volume);\n    }\n}\nclass SpeakerManager {\n    constructor(call){\n        this.state = new SpeakerState();\n        this.subscriptions = [];\n        /**\n         * Disposes the manager.\n         *\n         * @internal\n         */ this.dispose = ()=>{\n            this.subscriptions.forEach((s)=>s.unsubscribe());\n        };\n        this.call = call;\n        if (deviceIds$ && !isReactNative()) {\n            this.subscriptions.push((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([\n                deviceIds$,\n                this.state.selectedDevice$\n            ]).subscribe(([devices, deviceId])=>{\n                if (!deviceId) {\n                    return;\n                }\n                const device = devices.find((d)=>d.deviceId === deviceId && d.kind === \"audiooutput\");\n                if (!device) {\n                    this.select(\"\");\n                }\n            }));\n        }\n    }\n    /**\n     * Lists the available audio output devices\n     *\n     * Note: It prompts the user for a permission to use devices (if not already granted)\n     * Note: This method is not supported in React Native\n     *\n     * @returns an Observable that will be updated if a device is connected or disconnected\n     */ listDevices() {\n        if (isReactNative()) {\n            throw new Error(\"This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details\");\n        }\n        return getAudioOutputDevices();\n    }\n    /**\n     * Select a device.\n     *\n     * Note: This method is not supported in React Native\n     *\n     * @param deviceId empty string means the system default\n     */ select(deviceId) {\n        if (isReactNative()) {\n            throw new Error(\"This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details\");\n        }\n        this.state.setDevice(deviceId);\n    }\n    /**\n     * Set the volume of the audio elements\n     * @param volume a number between 0 and 1.\n     *\n     * Note: This method is not supported in React Native\n     */ setVolume(volume) {\n        if (isReactNative()) {\n            throw new Error(\"This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details\");\n        }\n        if (volume && (volume < 0 || volume > 1)) {\n            throw new Error(\"Volume must be between 0 and 1\");\n        }\n        this.state.setVolume(volume);\n    }\n    /**\n     * Set the volume of a participant.\n     *\n     * Note: This method is not supported in React Native.\n     *\n     * @param sessionId the participant's session id.\n     * @param volume a number between 0 and 1. Set it to `undefined` to use the default volume.\n     */ setParticipantVolume(sessionId, volume) {\n        if (isReactNative()) {\n            throw new Error(\"This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details\");\n        }\n        if (volume && (volume < 0 || volume > 1)) {\n            throw new Error(\"Volume must be between 0 and 1, or undefined\");\n        }\n        this.call.state.updateParticipant(sessionId, {\n            audioVolume: volume\n        });\n    }\n}\n/**\n * An object representation of a `Call`.\n */ class Call {\n    /**\n     * Constructs a new `Call` instance.\n     *\n     * NOTE: Don't call the constructor directly, instead\n     * Use the [`StreamVideoClient.call`](./StreamVideoClient.md/#call)\n     * method to construct a `Call` instance.\n     */ constructor({ type, id, streamClient, members, ownCapabilities, sortParticipantsBy, clientStore, ringing = false, watching = false }){\n        /**\n         * The state of this call.\n         */ this.state = new CallState();\n        /**\n         * The DynascaleManager instance.\n         */ this.dynascaleManager = new DynascaleManager(this);\n        /**\n         * The permissions context of this call.\n         */ this.permissionsContext = new PermissionsContext();\n        /**\n         * The event dispatcher instance dedicated to this Call instance.\n         * @private\n         */ this.dispatcher = new Dispatcher();\n        this.trackSubscriptionsSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject({\n            type: DebounceType.MEDIUM,\n            data: []\n        });\n        this.sfuClientTag = 0;\n        this.reconnectConcurrencyTag = Symbol(\"reconnectConcurrencyTag\");\n        this.reconnectAttempts = 0;\n        this.reconnectStrategy = WebsocketReconnectStrategy.UNSPECIFIED;\n        this.fastReconnectDeadlineSeconds = 0;\n        this.lastOfflineTimestamp = 0;\n        // maintain the order of publishing tracks to restore them after a reconnection\n        // it shouldn't contain duplicates\n        this.trackPublishOrder = [];\n        this.hasJoinedOnce = false;\n        this.deviceSettingsAppliedOnce = false;\n        this.initialized = false;\n        this.joinLeaveConcurrencyTag = Symbol(\"joinLeaveConcurrencyTag\");\n        /**\n         * A list hooks/functions to invoke when the call is left.\n         * A typical use case is to clean up some global event handlers.\n         * @private\n         */ this.leaveCallHooks = new Set();\n        this.streamClientEventHandlers = new Map();\n        this.handleOwnCapabilitiesUpdated = async (ownCapabilities)=>{\n            // update the permission context.\n            this.permissionsContext.setPermissions(ownCapabilities);\n            if (!this.publisher) return;\n            // check if the user still has publishing permissions and stop publishing if not.\n            const permissionToTrackType = {\n                [OwnCapability.SEND_AUDIO]: TrackType.AUDIO,\n                [OwnCapability.SEND_VIDEO]: TrackType.VIDEO,\n                [OwnCapability.SCREENSHARE]: TrackType.SCREEN_SHARE\n            };\n            for (const [permission, trackType] of Object.entries(permissionToTrackType)){\n                const hasPermission = this.permissionsContext.hasPermission(permission);\n                if (hasPermission) continue;\n                try {\n                    switch(trackType){\n                        case TrackType.AUDIO:\n                            if (this.microphone.enabled) await this.microphone.disable();\n                            break;\n                        case TrackType.VIDEO:\n                            if (this.camera.enabled) await this.camera.disable();\n                            break;\n                        case TrackType.SCREEN_SHARE:\n                            if (this.screenShare.enabled) await this.screenShare.disable();\n                            break;\n                    }\n                } catch (err) {\n                    this.logger(\"error\", `Can't disable mic/camera/screenshare after revoked permissions`, err);\n                }\n            }\n        };\n        /**\n         * You can subscribe to WebSocket events provided by the API. To remove a subscription, call the `off` method.\n         * Please note that subscribing to WebSocket events is an advanced use-case.\n         * For most use-cases, it should be enough to watch for state changes.\n         *\n         * @param eventName the event name.\n         * @param fn the event handler.\n         */ this.on = (eventName, fn)=>{\n            if (isSfuEvent(eventName)) {\n                return this.dispatcher.on(eventName, fn);\n            }\n            const offHandler = this.streamClient.on(eventName, (e)=>{\n                const event = e;\n                if (event.call_cid && event.call_cid === this.cid) {\n                    fn(event);\n                }\n            });\n            // keep the 'off' reference returned by the stream client\n            this.streamClientEventHandlers.set(fn, offHandler);\n            return ()=>{\n                this.off(eventName, fn);\n            };\n        };\n        /**\n         * Remove subscription for WebSocket events that were created by the `on` method.\n         *\n         * @param eventName the event name.\n         * @param fn the event handler.\n         */ this.off = (eventName, fn)=>{\n            if (isSfuEvent(eventName)) {\n                return this.dispatcher.off(eventName, fn);\n            }\n            // unsubscribe from the stream client event by using the 'off' reference\n            const registeredOffHandler = this.streamClientEventHandlers.get(fn);\n            if (registeredOffHandler) {\n                registeredOffHandler();\n            }\n        };\n        /**\n         * Leave the call and stop the media streams that were published by the call.\n         */ this.leave = async ({ reject = false, reason = \"user is leaving the call\" } = {})=>{\n            await withoutConcurrency(this.joinLeaveConcurrencyTag, async ()=>{\n                const callingState = this.state.callingState;\n                if (callingState === CallingState.LEFT) {\n                    throw new Error(\"Cannot leave call that has already been left.\");\n                }\n                if (callingState === CallingState.JOINING) {\n                    const waitUntilCallJoined = ()=>{\n                        return new Promise((resolve)=>{\n                            this.state.callingState$.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.takeWhile)((state)=>state !== CallingState.JOINED, true)).subscribe(()=>resolve());\n                        });\n                    };\n                    await waitUntilCallJoined();\n                }\n                if (this.ringing) {\n                    // I'm the one who started the call, so I should cancel it.\n                    const hasOtherParticipants = this.state.remoteParticipants.length > 0;\n                    if (this.isCreatedByMe && !hasOtherParticipants && callingState === CallingState.RINGING) {\n                        // Signals other users that I have cancelled my call to them\n                        // before they accepted it.\n                        await this.reject();\n                    } else if (reject && callingState === CallingState.RINGING) {\n                        // Signals other users that I have rejected the incoming call.\n                        await this.reject();\n                    }\n                }\n                this.statsReporter?.stop();\n                this.statsReporter = undefined;\n                this.sfuStatsReporter?.stop();\n                this.sfuStatsReporter = undefined;\n                this.subscriber?.close();\n                this.subscriber = undefined;\n                this.publisher?.close({\n                    stopTracks: true\n                });\n                this.publisher = undefined;\n                await this.sfuClient?.leaveAndClose(reason);\n                this.sfuClient = undefined;\n                this.state.setCallingState(CallingState.LEFT);\n                // Call all leave call hooks, e.g. to clean up global event handlers\n                this.leaveCallHooks.forEach((hook)=>hook());\n                this.initialized = false;\n                this.hasJoinedOnce = false;\n                this.clientStore.unregisterCall(this);\n                this.camera.dispose();\n                this.microphone.dispose();\n                this.screenShare.dispose();\n                this.speaker.dispose();\n                const stopOnLeavePromises = [];\n                if (this.camera.stopOnLeave) {\n                    stopOnLeavePromises.push(this.camera.disable(true));\n                }\n                if (this.microphone.stopOnLeave) {\n                    stopOnLeavePromises.push(this.microphone.disable(true));\n                }\n                if (this.screenShare.stopOnLeave) {\n                    stopOnLeavePromises.push(this.screenShare.disable(true));\n                }\n                await Promise.all(stopOnLeavePromises);\n            });\n        };\n        /**\n         * Loads the information about the call.\n         *\n         * @param params.ring if set to true, a `call.ring` event will be sent to the call members.\n         * @param params.notify if set to true, a `call.notification` event will be sent to the call members.\n         * @param params.members_limit the total number of members to return as part of the response.\n         */ this.get = async (params)=>{\n            await this.setup();\n            const response = await this.streamClient.get(this.streamClientBasePath, params);\n            this.state.updateFromCallResponse(response.call);\n            this.state.setMembers(response.members);\n            this.state.setOwnCapabilities(response.own_capabilities);\n            if (params?.ring || this.ringing) {\n                // the call response can indicate where the call is still ringing or not\n                this.ringingSubject.next(true);\n            }\n            if (this.streamClient._hasConnectionID()) {\n                this.watching = true;\n                this.clientStore.registerCall(this);\n            }\n            await this.applyDeviceConfig(false);\n            return response;\n        };\n        /**\n         * Loads the information about the call and creates it if it doesn't exist.\n         *\n         * @param data the data to create the call with.\n         */ this.getOrCreate = async (data)=>{\n            await this.setup();\n            const response = await this.streamClient.post(this.streamClientBasePath, data);\n            this.state.updateFromCallResponse(response.call);\n            this.state.setMembers(response.members);\n            this.state.setOwnCapabilities(response.own_capabilities);\n            if (data?.ring || this.ringing) {\n                // the call response can indicate where the call is still ringing or not\n                this.ringingSubject.next(true);\n            }\n            if (this.streamClient._hasConnectionID()) {\n                this.watching = true;\n                this.clientStore.registerCall(this);\n            }\n            await this.applyDeviceConfig(false);\n            return response;\n        };\n        /**\n         * Creates a call\n         *\n         * @param data the data to create the call with.\n         */ this.create = async (data)=>{\n            return this.getOrCreate(data);\n        };\n        /**\n         * A shortcut for {@link Call.get} with `ring` parameter set to `true`.\n         * Will send a `call.ring` event to the call members.\n         */ this.ring = async ()=>{\n            return await this.get({\n                ring: true\n            });\n        };\n        /**\n         * A shortcut for {@link Call.get} with `notify` parameter set to `true`.\n         * Will send a `call.notification` event to the call members.\n         */ this.notify = async ()=>{\n            return await this.get({\n                notify: true\n            });\n        };\n        /**\n         * Marks the incoming call as accepted.\n         *\n         * This method should be used only for \"ringing\" call flows.\n         * {@link Call.join} invokes this method automatically for you when joining a call.\n         * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n         */ this.accept = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/accept`);\n        };\n        /**\n         * Marks the incoming call as rejected.\n         *\n         * This method should be used only for \"ringing\" call flows.\n         * {@link Call.leave} invokes this method automatically for you when you leave or reject this call.\n         * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n         *\n         * @param reason the reason for rejecting the call.\n         */ this.reject = async (reason)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/reject`, {\n                reason: reason\n            });\n        };\n        /**\n         * Will start to watch for call related WebSocket events and initiate a call session with the server.\n         *\n         * @returns a promise which resolves once the call join-flow has finished.\n         */ this.join = async (data)=>{\n            await this.setup();\n            const callingState = this.state.callingState;\n            if ([\n                CallingState.JOINED,\n                CallingState.JOINING\n            ].includes(callingState)) {\n                throw new Error(`Illegal State: call.join() shall be called only once`);\n            }\n            this.joinCallData = data;\n            this.logger(\"debug\", \"Starting join flow\");\n            this.state.setCallingState(CallingState.JOINING);\n            const performingMigration = this.reconnectStrategy === WebsocketReconnectStrategy.MIGRATE;\n            const performingRejoin = this.reconnectStrategy === WebsocketReconnectStrategy.REJOIN;\n            const performingFastReconnect = this.reconnectStrategy === WebsocketReconnectStrategy.FAST;\n            let statsOptions = this.sfuStatsReporter?.options;\n            if (!this.credentials || !statsOptions || performingRejoin || performingMigration) {\n                try {\n                    const joinResponse = await this.doJoinRequest(data);\n                    this.credentials = joinResponse.credentials;\n                    statsOptions = joinResponse.stats_options;\n                } catch (error) {\n                    // restore the previous call state if the join-flow fails\n                    this.state.setCallingState(callingState);\n                    throw error;\n                }\n            }\n            const previousSfuClient = this.sfuClient;\n            const previousSessionId = previousSfuClient?.sessionId;\n            const isWsHealthy = !!previousSfuClient?.isHealthy;\n            const sfuClient = performingRejoin || performingMigration || !isWsHealthy ? new StreamSfuClient({\n                logTag: String(this.sfuClientTag++),\n                dispatcher: this.dispatcher,\n                credentials: this.credentials,\n                streamClient: this.streamClient,\n                // a new session_id is necessary for the REJOIN strategy.\n                // we use the previous session_id if available\n                sessionId: performingRejoin ? undefined : previousSessionId,\n                onSignalClose: ()=>this.handleSfuSignalClose(sfuClient)\n            }) : previousSfuClient;\n            this.sfuClient = sfuClient;\n            const clientDetails = getClientDetails();\n            // we don't need to send JoinRequest if we are re-using an existing healthy SFU client\n            if (previousSfuClient !== sfuClient) {\n                // prepare a generic SDP and send it to the SFU.\n                // this is a throw-away SDP that the SFU will use to determine\n                // the capabilities of the client (codec support, etc.)\n                const receivingCapabilitiesSdp = await getGenericSdp(\"recvonly\");\n                const reconnectDetails = this.reconnectStrategy !== WebsocketReconnectStrategy.UNSPECIFIED ? this.getReconnectDetails(data?.migrating_from, previousSessionId) : undefined;\n                const { callState, fastReconnectDeadlineSeconds } = await sfuClient.join({\n                    subscriberSdp: receivingCapabilitiesSdp,\n                    clientDetails,\n                    fastReconnect: performingFastReconnect,\n                    reconnectDetails\n                });\n                this.fastReconnectDeadlineSeconds = fastReconnectDeadlineSeconds;\n                if (callState) {\n                    this.state.updateFromSfuCallState(callState, sfuClient.sessionId, reconnectDetails);\n                }\n            }\n            if (!performingMigration) {\n                // in MIGRATION, `JOINED` state is set in `this.reconnectMigrate()`\n                this.state.setCallingState(CallingState.JOINED);\n            }\n            this.hasJoinedOnce = true;\n            // when performing fast reconnect, or when we reuse the same SFU client,\n            // (ws remained healthy), we just need to restore the ICE connection\n            if (performingFastReconnect) {\n                // the SFU automatically issues an ICE restart on the subscriber\n                // we don't have to do it ourselves\n                await this.restoreICE(sfuClient, {\n                    includeSubscriber: false\n                });\n            } else {\n                const connectionConfig = toRtcConfiguration(this.credentials.ice_servers);\n                this.initPublisherAndSubscriber({\n                    sfuClient,\n                    connectionConfig,\n                    clientDetails,\n                    statsOptions,\n                    closePreviousInstances: !performingMigration\n                });\n            }\n            if (performingRejoin) {\n                const strategy = WebsocketReconnectStrategy[this.reconnectStrategy];\n                await previousSfuClient?.leaveAndClose(`Closing previous WS after reconnect with strategy: ${strategy}`);\n            } else if (!isWsHealthy) {\n                previousSfuClient?.close(StreamSfuClient.DISPOSE_OLD_SOCKET, \"Closing unhealthy WS after reconnect\");\n            }\n            // device settings should be applied only once, we don't have to\n            // re-apply them on later reconnections or server-side data fetches\n            if (!this.deviceSettingsAppliedOnce) {\n                await this.applyDeviceConfig(true);\n                this.deviceSettingsAppliedOnce = true;\n            }\n            // We shouldn't persist the `ring` and `notify` state after joining the call\n            // as it's a one-time event and clashes with the potential reconnection attempts.\n            // When reconnecting, if provided with `ring: true` or `notify: true`,\n            // we will spam the other participants with push notifications and `call.ring` events.\n            delete this.joinCallData?.ring;\n            delete this.joinCallData?.notify;\n            this.logger(\"info\", `Joined call ${this.cid}`);\n        };\n        /**\n         * Prepares Reconnect Details object.\n         * @internal\n         */ this.getReconnectDetails = (migratingFromSfuId, previousSessionId)=>{\n            const strategy = this.reconnectStrategy;\n            const performingRejoin = strategy === WebsocketReconnectStrategy.REJOIN;\n            const announcedTracks = this.publisher?.getAnnouncedTracks() || [];\n            const subscribedTracks = getCurrentValue(this.trackSubscriptionsSubject);\n            return {\n                strategy,\n                announcedTracks,\n                subscriptions: subscribedTracks.data || [],\n                reconnectAttempt: this.reconnectAttempts,\n                fromSfuId: migratingFromSfuId || \"\",\n                previousSessionId: performingRejoin ? previousSessionId || \"\" : \"\"\n            };\n        };\n        /**\n         * Performs an ICE restart on both the Publisher and Subscriber Peer Connections.\n         * Uses the provided SFU client to restore the ICE connection.\n         *\n         * This method can throw an error if the ICE restart fails.\n         * This error should be handled by the reconnect loop,\n         * and a new reconnection shall be attempted.\n         *\n         * @internal\n         */ this.restoreICE = async (nextSfuClient, opts = {})=>{\n            const { includeSubscriber = true, includePublisher = true } = opts;\n            if (this.subscriber) {\n                this.subscriber.setSfuClient(nextSfuClient);\n                if (includeSubscriber) {\n                    await this.subscriber.restartIce();\n                }\n            }\n            if (this.publisher) {\n                this.publisher.setSfuClient(nextSfuClient);\n                if (includePublisher) {\n                    await this.publisher.restartIce();\n                }\n            }\n        };\n        /**\n         * Initializes the Publisher and Subscriber Peer Connections.\n         * @internal\n         */ this.initPublisherAndSubscriber = (opts)=>{\n            const { sfuClient, connectionConfig, clientDetails, statsOptions, closePreviousInstances } = opts;\n            if (closePreviousInstances && this.subscriber) {\n                this.subscriber.close();\n            }\n            this.subscriber = new Subscriber({\n                sfuClient,\n                dispatcher: this.dispatcher,\n                state: this.state,\n                connectionConfig,\n                logTag: String(this.sfuClientTag),\n                onUnrecoverableError: ()=>{\n                    this.reconnect(WebsocketReconnectStrategy.REJOIN).catch((err)=>{\n                        this.logger(\"warn\", \"[Reconnect] Error reconnecting after a subscriber error\", err);\n                    });\n                }\n            });\n            // anonymous users can't publish anything hence, there is no need\n            // to create Publisher Peer Connection for them\n            const isAnonymous = this.streamClient.user?.type === \"anonymous\";\n            if (!isAnonymous) {\n                if (closePreviousInstances && this.publisher) {\n                    this.publisher.close({\n                        stopTracks: false\n                    });\n                }\n                const audioSettings = this.state.settings?.audio;\n                const isDtxEnabled = !!audioSettings?.opus_dtx_enabled;\n                const isRedEnabled = !!audioSettings?.redundant_coding_enabled;\n                this.publisher = new Publisher({\n                    sfuClient,\n                    dispatcher: this.dispatcher,\n                    state: this.state,\n                    connectionConfig,\n                    isDtxEnabled,\n                    isRedEnabled,\n                    logTag: String(this.sfuClientTag),\n                    onUnrecoverableError: ()=>{\n                        this.reconnect(WebsocketReconnectStrategy.REJOIN).catch((err)=>{\n                            this.logger(\"warn\", \"[Reconnect] Error reconnecting after a publisher error\", err);\n                        });\n                    }\n                });\n            }\n            this.statsReporter?.stop();\n            this.statsReporter = createStatsReporter({\n                subscriber: this.subscriber,\n                publisher: this.publisher,\n                state: this.state,\n                datacenter: sfuClient.edgeName\n            });\n            this.sfuStatsReporter?.stop();\n            if (statsOptions?.reporting_interval_ms > 0) {\n                this.sfuStatsReporter = new SfuStatsReporter(sfuClient, {\n                    clientDetails,\n                    options: statsOptions,\n                    subscriber: this.subscriber,\n                    publisher: this.publisher\n                });\n                this.sfuStatsReporter.start();\n            }\n        };\n        /**\n         * Retrieves credentials for joining the call.\n         *\n         * @internal\n         *\n         * @param data the join call data.\n         */ this.doJoinRequest = async (data)=>{\n            const location = await this.streamClient.getLocationHint();\n            const request = {\n                ...data,\n                location\n            };\n            const joinResponse = await this.streamClient.post(`${this.streamClientBasePath}/join`, request);\n            this.state.updateFromCallResponse(joinResponse.call);\n            this.state.setMembers(joinResponse.members);\n            this.state.setOwnCapabilities(joinResponse.own_capabilities);\n            if (data?.ring && !this.ringing) {\n                this.ringingSubject.next(true);\n            }\n            if (this.ringing && !this.isCreatedByMe) {\n                // signals other users that I have accepted the incoming call.\n                await this.accept();\n            }\n            if (this.streamClient._hasConnectionID()) {\n                this.watching = true;\n                this.clientStore.registerCall(this);\n            }\n            return joinResponse;\n        };\n        /**\n         * Handles the closing of the SFU signal connection.\n         *\n         * @internal\n         * @param sfuClient the SFU client instance that was closed.\n         */ this.handleSfuSignalClose = (sfuClient)=>{\n            this.logger(\"debug\", \"[Reconnect] SFU signal connection closed\");\n            // normal close, no need to reconnect\n            if (sfuClient.isLeaving) return;\n            this.reconnect(WebsocketReconnectStrategy.REJOIN).catch((err)=>{\n                this.logger(\"warn\", \"[Reconnect] Error reconnecting\", err);\n            });\n        };\n        /**\n         * Handles the reconnection flow.\n         *\n         * @internal\n         *\n         * @param strategy the reconnection strategy to use.\n         */ this.reconnect = async (strategy)=>{\n            return withoutConcurrency(this.reconnectConcurrencyTag, async ()=>{\n                this.logger(\"info\", `[Reconnect] Reconnecting with strategy ${WebsocketReconnectStrategy[strategy]}`);\n                this.reconnectStrategy = strategy;\n                do {\n                    // we don't increment reconnect attempts for the FAST strategy.\n                    if (this.reconnectStrategy !== WebsocketReconnectStrategy.FAST) {\n                        this.reconnectAttempts++;\n                    }\n                    const current = WebsocketReconnectStrategy[this.reconnectStrategy];\n                    try {\n                        // wait until the network is available\n                        await this.networkAvailableTask?.promise;\n                        switch(this.reconnectStrategy){\n                            case WebsocketReconnectStrategy.UNSPECIFIED:\n                            case WebsocketReconnectStrategy.DISCONNECT:\n                                this.logger(\"debug\", `[Reconnect] No-op strategy ${current}`);\n                                break;\n                            case WebsocketReconnectStrategy.FAST:\n                                await this.reconnectFast();\n                                break;\n                            case WebsocketReconnectStrategy.REJOIN:\n                                await this.reconnectRejoin();\n                                break;\n                            case WebsocketReconnectStrategy.MIGRATE:\n                                await this.reconnectMigrate();\n                                break;\n                            default:\n                                ensureExhausted(this.reconnectStrategy, \"Unknown reconnection strategy\");\n                                break;\n                        }\n                        break; // do-while loop, reconnection worked, exit the loop\n                    } catch (error) {\n                        if (error instanceof ErrorFromResponse && error.unrecoverable) {\n                            this.logger(\"warn\", `[Reconnect] Can't reconnect due to coordinator unrecoverable error`, error);\n                            this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n                            return;\n                        }\n                        this.logger(\"warn\", `[Reconnect] ${current} (${this.reconnectAttempts}) failed. Attempting with REJOIN`, error);\n                        await sleep(500);\n                        this.reconnectStrategy = WebsocketReconnectStrategy.REJOIN;\n                    }\n                }while (this.state.callingState !== CallingState.JOINED && this.state.callingState !== CallingState.RECONNECTING_FAILED && this.state.callingState !== CallingState.LEFT);\n            });\n        };\n        /**\n         * Initiates the reconnection flow with the \"fast\" strategy.\n         * @internal\n         */ this.reconnectFast = async ()=>{\n            this.reconnectStrategy = WebsocketReconnectStrategy.FAST;\n            this.state.setCallingState(CallingState.RECONNECTING);\n            return this.join(this.joinCallData);\n        };\n        /**\n         * Initiates the reconnection flow with the \"rejoin\" strategy.\n         * @internal\n         */ this.reconnectRejoin = async ()=>{\n            this.reconnectStrategy = WebsocketReconnectStrategy.REJOIN;\n            this.state.setCallingState(CallingState.RECONNECTING);\n            await this.join(this.joinCallData);\n            await this.restorePublishedTracks();\n            this.restoreSubscribedTracks();\n        };\n        /**\n         * Initiates the reconnection flow with the \"migrate\" strategy.\n         * @internal\n         */ this.reconnectMigrate = async ()=>{\n            const currentSfuClient = this.sfuClient;\n            if (!currentSfuClient) {\n                throw new Error(\"Cannot migrate without an active SFU client\");\n            }\n            this.reconnectStrategy = WebsocketReconnectStrategy.MIGRATE;\n            this.state.setCallingState(CallingState.MIGRATING);\n            const currentSubscriber = this.subscriber;\n            const currentPublisher = this.publisher;\n            currentSubscriber?.detachEventHandlers();\n            currentPublisher?.detachEventHandlers();\n            const migrationTask = currentSfuClient.enterMigration();\n            try {\n                const currentSfu = currentSfuClient.edgeName;\n                await this.join({\n                    ...this.joinCallData,\n                    migrating_from: currentSfu\n                });\n            } finally{\n                // cleanup the migration_from field after the migration is complete or failed\n                // as we don't want to keep dirty data in the join call data\n                delete this.joinCallData?.migrating_from;\n            }\n            await this.restorePublishedTracks();\n            this.restoreSubscribedTracks();\n            try {\n                // Wait for the migration to complete, then close the previous SFU client\n                // and the peer connection instances. In case of failure, the migration\n                // task would throw an error and REJOIN would be attempted.\n                await migrationTask;\n                // in MIGRATE, we can consider the call as joined only after\n                // `participantMigrationComplete` event is received, signaled by\n                // the `migrationTask`\n                this.state.setCallingState(CallingState.JOINED);\n            } finally{\n                currentSubscriber?.close();\n                currentPublisher?.close({\n                    stopTracks: false\n                });\n                // and close the previous SFU client, without specifying close code\n                currentSfuClient.close();\n            }\n        };\n        /**\n         * Registers the various event handlers for reconnection.\n         *\n         * @internal\n         */ this.registerReconnectHandlers = ()=>{\n            // handles the legacy \"goAway\" event\n            const unregisterGoAway = this.on(\"goAway\", ()=>{\n                this.reconnect(WebsocketReconnectStrategy.MIGRATE).catch((err)=>{\n                    this.logger(\"warn\", \"[Reconnect] Error reconnecting\", err);\n                });\n            });\n            // handles the \"error\" event, through which the SFU can request a reconnect\n            const unregisterOnError = this.on(\"error\", (e)=>{\n                const { reconnectStrategy: strategy } = e;\n                if (strategy === WebsocketReconnectStrategy.UNSPECIFIED) return;\n                if (strategy === WebsocketReconnectStrategy.DISCONNECT) {\n                    this.leave({\n                        reason: \"SFU instructed to disconnect\"\n                    }).catch((err)=>{\n                        this.logger(\"warn\", `Can't leave call after disconnect request`, err);\n                    });\n                } else {\n                    this.reconnect(strategy).catch((err)=>{\n                        this.logger(\"warn\", \"[Reconnect] Error reconnecting\", err);\n                    });\n                }\n            });\n            const unregisterNetworkChanged = this.streamClient.on(\"network.changed\", (e)=>{\n                if (!e.online) {\n                    this.logger(\"debug\", \"[Reconnect] Going offline\");\n                    if (!this.hasJoinedOnce) return;\n                    this.lastOfflineTimestamp = Date.now();\n                    // create a new task that would resolve when the network is available\n                    const networkAvailableTask = promiseWithResolvers();\n                    networkAvailableTask.promise.then(()=>{\n                        let strategy = WebsocketReconnectStrategy.FAST;\n                        if (this.lastOfflineTimestamp) {\n                            const offline = (Date.now() - this.lastOfflineTimestamp) / 1000;\n                            if (offline > this.fastReconnectDeadlineSeconds) {\n                                // We shouldn't attempt FAST if we have exceeded the deadline.\n                                // The SFU would have already wiped out the session.\n                                strategy = WebsocketReconnectStrategy.REJOIN;\n                            }\n                        }\n                        this.reconnect(strategy).catch((err)=>{\n                            this.logger(\"warn\", \"[Reconnect] Error reconnecting after going online\", err);\n                        });\n                    });\n                    this.networkAvailableTask = networkAvailableTask;\n                    this.sfuStatsReporter?.stop();\n                    this.state.setCallingState(CallingState.OFFLINE);\n                } else {\n                    this.logger(\"debug\", \"[Reconnect] Going online\");\n                    this.sfuClient?.close(StreamSfuClient.DISPOSE_OLD_SOCKET, \"Closing WS to reconnect after going online\");\n                    // we went online, release the previous waiters and reset the state\n                    this.networkAvailableTask?.resolve();\n                    this.networkAvailableTask = undefined;\n                    this.sfuStatsReporter?.start();\n                }\n            });\n            this.leaveCallHooks.add(unregisterGoAway);\n            this.leaveCallHooks.add(unregisterOnError);\n            this.leaveCallHooks.add(unregisterNetworkChanged);\n        };\n        /**\n         * Restores the published tracks after a reconnection.\n         * @internal\n         */ this.restorePublishedTracks = async ()=>{\n            // the tracks need to be restored in their original order of publishing\n            // otherwise, we might get `m-lines order mismatch` errors\n            for (const trackType of this.trackPublishOrder){\n                switch(trackType){\n                    case TrackType.AUDIO:\n                        const audioStream = this.microphone.state.mediaStream;\n                        if (audioStream) {\n                            await this.publishAudioStream(audioStream);\n                        }\n                        break;\n                    case TrackType.VIDEO:\n                        const videoStream = this.camera.state.mediaStream;\n                        if (videoStream) {\n                            await this.publishVideoStream(videoStream, this.camera.publishOptions);\n                        }\n                        break;\n                    case TrackType.SCREEN_SHARE:\n                        const screenShareStream = this.screenShare.state.mediaStream;\n                        if (screenShareStream) {\n                            await this.publishScreenShareStream(screenShareStream, {\n                                screenShareSettings: this.screenShare.getSettings()\n                            });\n                        }\n                        break;\n                    // screen share audio can't exist without a screen share, so we handle it there\n                    case TrackType.SCREEN_SHARE_AUDIO:\n                    case TrackType.UNSPECIFIED:\n                        break;\n                    default:\n                        ensureExhausted(trackType, \"Unknown track type\");\n                        break;\n                }\n            }\n        };\n        /**\n         * Restores the subscribed tracks after a reconnection.\n         * @internal\n         */ this.restoreSubscribedTracks = ()=>{\n            const { remoteParticipants } = this.state;\n            if (remoteParticipants.length <= 0) return;\n            this.updateSubscriptions(remoteParticipants, DebounceType.FAST);\n        };\n        /**\n         * Starts publishing the given video stream to the call.\n         * The stream will be stopped if the user changes an input device, or if the user leaves the call.\n         *\n         * Consecutive calls to this method will replace the previously published stream.\n         * The previous video stream will be stopped.\n         *\n         * @param videoStream the video stream to publish.\n         * @param opts the options to use when publishing the stream.\n         */ this.publishVideoStream = async (videoStream, opts = {})=>{\n            if (!this.sfuClient) throw new Error(`Call not joined yet.`);\n            // joining is in progress, and we should wait until the client is ready\n            await this.sfuClient.joinTask;\n            if (!this.permissionsContext.hasPermission(OwnCapability.SEND_VIDEO)) {\n                throw new Error(\"No permission to publish video\");\n            }\n            if (!this.publisher) throw new Error(\"Publisher is not initialized\");\n            const [videoTrack] = videoStream.getVideoTracks();\n            if (!videoTrack) throw new Error(\"There is no video track in the stream\");\n            if (!this.trackPublishOrder.includes(TrackType.VIDEO)) {\n                this.trackPublishOrder.push(TrackType.VIDEO);\n            }\n            await this.publisher.publishStream(videoStream, videoTrack, TrackType.VIDEO, opts);\n        };\n        /**\n         * Starts publishing the given audio stream to the call.\n         * The stream will be stopped if the user changes an input device, or if the user leaves the call.\n         *\n         * Consecutive calls to this method will replace the audio stream that is currently being published.\n         * The previous audio stream will be stopped.\n         *\n         * @param audioStream the audio stream to publish.\n         */ this.publishAudioStream = async (audioStream)=>{\n            if (!this.sfuClient) throw new Error(`Call not joined yet.`);\n            // joining is in progress, and we should wait until the client is ready\n            await this.sfuClient.joinTask;\n            if (!this.permissionsContext.hasPermission(OwnCapability.SEND_AUDIO)) {\n                throw new Error(\"No permission to publish audio\");\n            }\n            if (!this.publisher) throw new Error(\"Publisher is not initialized\");\n            const [audioTrack] = audioStream.getAudioTracks();\n            if (!audioTrack) throw new Error(\"There is no audio track in the stream\");\n            if (!this.trackPublishOrder.includes(TrackType.AUDIO)) {\n                this.trackPublishOrder.push(TrackType.AUDIO);\n            }\n            await this.publisher.publishStream(audioStream, audioTrack, TrackType.AUDIO);\n        };\n        /**\n         * Starts publishing the given screen-share stream to the call.\n         *\n         * Consecutive calls to this method will replace the previous screen-share stream.\n         * The previous screen-share stream will be stopped.\n         *\n         * @param screenShareStream the screen-share stream to publish.\n         * @param opts the options to use when publishing the stream.\n         */ this.publishScreenShareStream = async (screenShareStream, opts = {})=>{\n            if (!this.sfuClient) throw new Error(`Call not joined yet.`);\n            // joining is in progress, and we should wait until the client is ready\n            await this.sfuClient.joinTask;\n            if (!this.permissionsContext.hasPermission(OwnCapability.SCREENSHARE)) {\n                throw new Error(\"No permission to publish screen share\");\n            }\n            if (!this.publisher) throw new Error(\"Publisher is not initialized\");\n            const [screenShareTrack] = screenShareStream.getVideoTracks();\n            if (!screenShareTrack) {\n                throw new Error(\"There is no screen share track in the stream\");\n            }\n            if (!this.trackPublishOrder.includes(TrackType.SCREEN_SHARE)) {\n                this.trackPublishOrder.push(TrackType.SCREEN_SHARE);\n            }\n            await this.publisher.publishStream(screenShareStream, screenShareTrack, TrackType.SCREEN_SHARE, opts);\n            const [screenShareAudioTrack] = screenShareStream.getAudioTracks();\n            if (screenShareAudioTrack) {\n                if (!this.trackPublishOrder.includes(TrackType.SCREEN_SHARE_AUDIO)) {\n                    this.trackPublishOrder.push(TrackType.SCREEN_SHARE_AUDIO);\n                }\n                await this.publisher.publishStream(screenShareStream, screenShareAudioTrack, TrackType.SCREEN_SHARE_AUDIO, opts);\n            }\n        };\n        /**\n         * Stops publishing the given track type to the call, if it is currently being published.\n         * Underlying track will be stopped and removed from the publisher.\n         *\n         * @param trackType the track type to stop publishing.\n         * @param stopTrack if `true` the track will be stopped, else it will be just disabled\n         */ this.stopPublish = async (trackType, stopTrack = true)=>{\n            this.logger(\"info\", `stopPublish ${TrackType[trackType]}, stop tracks: ${stopTrack}`);\n            await this.publisher?.unpublishStream(trackType, stopTrack);\n        };\n        /**\n         * Notifies the SFU that a noise cancellation process has started.\n         *\n         * @internal\n         */ this.notifyNoiseCancellationStarting = async ()=>{\n            return this.sfuClient?.startNoiseCancellation().catch((err)=>{\n                this.logger(\"warn\", \"Failed to notify start of noise cancellation\", err);\n            });\n        };\n        /**\n         * Notifies the SFU that a noise cancellation process has stopped.\n         *\n         * @internal\n         */ this.notifyNoiseCancellationStopped = async ()=>{\n            return this.sfuClient?.stopNoiseCancellation().catch((err)=>{\n                this.logger(\"warn\", \"Failed to notify stop of noise cancellation\", err);\n            });\n        };\n        /**\n         * Update track subscription configuration for one or more participants.\n         * You have to create a subscription for each participant for all the different kinds of tracks you want to receive.\n         * You can only subscribe for tracks after the participant started publishing the given kind of track.\n         *\n         * @param trackType the kind of subscription to update.\n         * @param changes the list of subscription changes to do.\n         * @param type the debounce type to use for the update.\n         */ this.updateSubscriptionsPartial = (trackType, changes, type = DebounceType.SLOW)=>{\n            const participants = this.state.updateParticipants(Object.entries(changes).reduce((acc, [sessionId, change])=>{\n                if (change.dimension) {\n                    change.dimension.height = Math.ceil(change.dimension.height);\n                    change.dimension.width = Math.ceil(change.dimension.width);\n                }\n                const prop = trackType === \"videoTrack\" ? \"videoDimension\" : trackType === \"screenShareTrack\" ? \"screenShareDimension\" : undefined;\n                if (prop) {\n                    acc[sessionId] = {\n                        [prop]: change.dimension\n                    };\n                }\n                return acc;\n            }, {}));\n            this.updateSubscriptions(participants, type);\n        };\n        this.updateSubscriptions = (participants, type = DebounceType.SLOW)=>{\n            const subscriptions = [];\n            for (const p of participants){\n                // we don't want to subscribe to our own tracks\n                if (p.isLocalParticipant) continue;\n                // NOTE: audio tracks don't have to be requested explicitly\n                // as the SFU will implicitly subscribe us to all of them,\n                // once they become available.\n                if (p.videoDimension && hasVideo(p)) {\n                    subscriptions.push({\n                        userId: p.userId,\n                        sessionId: p.sessionId,\n                        trackType: TrackType.VIDEO,\n                        dimension: p.videoDimension\n                    });\n                }\n                if (p.screenShareDimension && hasScreenShare(p)) {\n                    subscriptions.push({\n                        userId: p.userId,\n                        sessionId: p.sessionId,\n                        trackType: TrackType.SCREEN_SHARE,\n                        dimension: p.screenShareDimension\n                    });\n                }\n                if (hasScreenShareAudio(p)) {\n                    subscriptions.push({\n                        userId: p.userId,\n                        sessionId: p.sessionId,\n                        trackType: TrackType.SCREEN_SHARE_AUDIO\n                    });\n                }\n            }\n            // schedule update\n            this.trackSubscriptionsSubject.next({\n                type,\n                data: subscriptions\n            });\n        };\n        /**\n         * Will enhance the reported stats with additional participant-specific information (`callStatsReport$` state [store variable](./StreamVideoClient.md/#readonlystatestore)).\n         * This is usually helpful when detailed stats for a specific participant are needed.\n         *\n         * @param sessionId the sessionId to start reporting for.\n         */ this.startReportingStatsFor = (sessionId)=>{\n            return this.statsReporter?.startReportingStatsFor(sessionId);\n        };\n        /**\n         * Opposite of `startReportingStatsFor`.\n         * Will turn off stats reporting for a specific participant.\n         *\n         * @param sessionId the sessionId to stop reporting for.\n         */ this.stopReportingStatsFor = (sessionId)=>{\n            return this.statsReporter?.stopReportingStatsFor(sessionId);\n        };\n        /**\n         * Resets the last sent reaction for the user holding the given `sessionId`. This is a local action, it won't reset the reaction on the backend.\n         *\n         * @param sessionId the session id.\n         */ this.resetReaction = (sessionId)=>{\n            this.state.updateParticipant(sessionId, {\n                reaction: undefined\n            });\n        };\n        /**\n         * Sets the list of criteria to sort the participants by.\n         *\n         * @param criteria the list of criteria to sort the participants by.\n         */ this.setSortParticipantsBy = (criteria)=>{\n            return this.state.setSortParticipantsBy(criteria);\n        };\n        /**\n         * Updates the list of video layers to publish.\n         *\n         * @internal\n         * @param enabledLayers the list of layers to enable.\n         */ this.updatePublishQuality = async (enabledLayers)=>{\n            return this.publisher?.updateVideoPublishQuality(enabledLayers);\n        };\n        /**\n         * Sends a reaction to the other call participants.\n         *\n         * @param reaction the reaction to send.\n         */ this.sendReaction = async (reaction)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/reaction`, reaction);\n        };\n        /**\n         * Blocks the user with the given `userId`.\n         *\n         * @param userId the id of the user to block.\n         */ this.blockUser = async (userId)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/block`, {\n                user_id: userId\n            });\n        };\n        /**\n         * Unblocks the user with the given `userId`.\n         *\n         * @param userId the id of the user to unblock.\n         */ this.unblockUser = async (userId)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/unblock`, {\n                user_id: userId\n            });\n        };\n        /**\n         * Mutes the current user.\n         *\n         * @param type the type of the mute operation.\n         */ this.muteSelf = (type)=>{\n            const myUserId = this.currentUserId;\n            if (myUserId) {\n                return this.muteUser(myUserId, type);\n            }\n        };\n        /**\n         * Mutes all the other participants.\n         *\n         * @param type the type of the mute operation.\n         */ this.muteOthers = (type)=>{\n            const trackType = muteTypeToTrackType(type);\n            if (!trackType) return;\n            const userIdsToMute = [];\n            for (const participant of this.state.remoteParticipants){\n                if (participant.publishedTracks.includes(trackType)) {\n                    userIdsToMute.push(participant.userId);\n                }\n            }\n            if (userIdsToMute.length > 0) {\n                return this.muteUser(userIdsToMute, type);\n            }\n        };\n        /**\n         * Mutes the user with the given `userId`.\n         *\n         * @param userId the id of the user to mute.\n         * @param type the type of the mute operation.\n         */ this.muteUser = (userId, type)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/mute_users`, {\n                user_ids: Array.isArray(userId) ? userId : [\n                    userId\n                ],\n                [type]: true\n            });\n        };\n        /**\n         * Will mute all users in the call.\n         *\n         * @param type the type of the mute operation.\n         */ this.muteAllUsers = (type)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/mute_users`, {\n                mute_all_users: true,\n                [type]: true\n            });\n        };\n        /**\n         * Starts recording the call\n         */ this.startRecording = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/start_recording`, request ? request : {});\n        };\n        /**\n         * Stops recording the call\n         */ this.stopRecording = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_recording`, {});\n        };\n        /**\n         * Starts the transcription of the call.\n         *\n         * @param request the request data.\n         */ this.startTranscription = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/start_transcription`, request);\n        };\n        /**\n         * Stops the transcription of the call.\n         */ this.stopTranscription = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`);\n        };\n        /**\n         * Sends a `call.permission_request` event to all users connected to the call. The call settings object contains infomration about which permissions can be requested during a call (for example a user might be allowed to request permission to publish audio, but not video).\n         */ this.requestPermissions = async (data)=>{\n            const { permissions } = data;\n            const canRequestPermissions = permissions.every((permission)=>this.permissionsContext.canRequest(permission));\n            if (!canRequestPermissions) {\n                throw new Error(`You are not allowed to request permissions: ${permissions.join(\", \")}`);\n            }\n            return this.streamClient.post(`${this.streamClientBasePath}/request_permission`, data);\n        };\n        /**\n         * Allows you to grant certain permissions to a user in a call.\n         * The permissions are specific to the call experience and do not survive the call itself.\n         *\n         * Supported permissions that can be granted are:\n         * - `send-audio`\n         * - `send-video`\n         * - `screenshare`\n         *\n         * @param userId the id of the user to grant permissions to.\n         * @param permissions the permissions to grant.\n         */ this.grantPermissions = async (userId, permissions)=>{\n            return this.updateUserPermissions({\n                user_id: userId,\n                grant_permissions: permissions\n            });\n        };\n        /**\n         * Allows you to revoke certain permissions from a user in a call.\n         * The permissions are specific to the call experience and do not survive the call itself.\n         *\n         * Supported permissions that can be revoked are:\n         * - `send-audio`\n         * - `send-video`\n         * - `screenshare`\n         *\n         * @param userId the id of the user to revoke permissions from.\n         * @param permissions the permissions to revoke.\n         */ this.revokePermissions = async (userId, permissions)=>{\n            return this.updateUserPermissions({\n                user_id: userId,\n                revoke_permissions: permissions\n            });\n        };\n        /**\n         * Allows you to grant or revoke a specific permission to a user in a call. The permissions are specific to the call experience and do not survive the call itself.\n         *\n         * When revoking a permission, this endpoint will also mute the relevant track from the user. This is similar to muting a user with the difference that the user will not be able to unmute afterwards.\n         *\n         * Supported permissions that can be granted or revoked: `send-audio`, `send-video` and `screenshare`.\n         *\n         * `call.permissions_updated` event is sent to all members of the call.\n         *\n         */ this.updateUserPermissions = async (data)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/user_permissions`, data);\n        };\n        /**\n         * Starts the livestreaming of the call.\n         *\n         * @param data the request data.\n         * @param params the request params.\n         */ this.goLive = async (data = {}, params)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/go_live`, data, params);\n        };\n        /**\n         * Stops the livestreaming of the call.\n         */ this.stopLive = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_live`, {});\n        };\n        /**\n         * Starts the broadcasting of the call.\n         */ this.startHLS = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`, {});\n        };\n        /**\n         * Stops the broadcasting of the call.\n         */ this.stopHLS = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`, {});\n        };\n        /**\n         * Updates the call settings or custom data.\n         *\n         * @param updates the updates to apply to the call.\n         */ this.update = async (updates)=>{\n            const response = await this.streamClient.patch(`${this.streamClientBasePath}`, updates);\n            const { call, members, own_capabilities } = response;\n            this.state.updateFromCallResponse(call);\n            this.state.setMembers(members);\n            this.state.setOwnCapabilities(own_capabilities);\n            return response;\n        };\n        /**\n         * Ends the call. Once the call is ended, it cannot be re-joined.\n         */ this.endCall = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/mark_ended`);\n        };\n        /**\n         * Pins the given session to the top of the participants list.\n         *\n         * @param sessionId the sessionId to pin.\n         */ this.pin = (sessionId)=>{\n            this.state.updateParticipant(sessionId, {\n                pin: {\n                    isLocalPin: true,\n                    pinnedAt: Date.now()\n                }\n            });\n        };\n        /**\n         * Unpins the given session from the top of the participants list.\n         *\n         * @param sessionId the sessionId to unpin.\n         */ this.unpin = (sessionId)=>{\n            this.state.updateParticipant(sessionId, {\n                pin: undefined\n            });\n        };\n        /**\n         * Pins the given session to the top of the participants list for everyone\n         * in the call.\n         * You can execute this method only if you have the `pin-for-everyone` capability.\n         *\n         * @param request the request object.\n         */ this.pinForEveryone = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/pin`, request);\n        };\n        /**\n         * Unpins the given session from the top of the participants list for everyone\n         * in the call.\n         * You can execute this method only if you have the `pin-for-everyone` capability.\n         *\n         * @param request the request object.\n         */ this.unpinForEveryone = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/unpin`, request);\n        };\n        /**\n         * Query call members with filter query. The result won't be stored in call state.\n         * @param request\n         * @returns\n         */ this.queryMembers = (request)=>{\n            return this.streamClient.post(\"/call/members\", {\n                ...request || {},\n                id: this.id,\n                type: this.type\n            });\n        };\n        /**\n         * Will update the call members.\n         *\n         * @param data the request data.\n         */ this.updateCallMembers = async (data)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/members`, data);\n        };\n        /**\n         * Schedules an auto-drop timeout based on the call settings.\n         * Applicable only for ringing calls.\n         */ this.scheduleAutoDrop = ()=>{\n            clearTimeout(this.dropTimeout);\n            this.leaveCallHooks.add(createSubscription(this.state.settings$, (settings)=>{\n                if (!settings) return;\n                // ignore if the call is not ringing\n                if (this.state.callingState !== CallingState.RINGING) return;\n                const timeoutInMs = settings.ring.auto_cancel_timeout_ms;\n                // 0 means no auto-drop\n                if (timeoutInMs <= 0) return;\n                clearTimeout(this.dropTimeout);\n                this.dropTimeout = setTimeout(()=>{\n                    this.leave({\n                        reason: \"ring: timeout\"\n                    }).catch((err)=>{\n                        this.logger(\"error\", \"Failed to drop call\", err);\n                    });\n                }, timeoutInMs);\n            }));\n        };\n        /**\n         * Retrieves the list of recordings for the current call or call session.\n         *\n         * If `callSessionId` is provided, it will return the recordings for that call session.\n         * Otherwise, all recordings for the current call will be returned.\n         *\n         * @param callSessionId the call session id to retrieve recordings for.\n         */ this.queryRecordings = async (callSessionId)=>{\n            let endpoint = this.streamClientBasePath;\n            if (callSessionId) {\n                endpoint = `${endpoint}/${callSessionId}`;\n            }\n            return this.streamClient.get(`${endpoint}/recordings`);\n        };\n        /**\n         * Retrieves the list of transcriptions for the current call.\n         *\n         * @returns the list of transcriptions.\n         */ this.queryTranscriptions = async ()=>{\n            return this.streamClient.get(`${this.streamClientBasePath}/transcriptions`);\n        };\n        /**\n         * Retrieve call statistics for a particular call session (historical).\n         * Here `callSessionID` is mandatory.\n         *\n         * @param callSessionID the call session ID to retrieve statistics for.\n         * @returns The call stats.\n         */ this.getCallStats = async (callSessionID)=>{\n            const endpoint = `${this.streamClientBasePath}/stats/${callSessionID}`;\n            return this.streamClient.get(endpoint);\n        };\n        /**\n         * Submit user feedback for the call\n         *\n         * @param rating Rating between 1 and 5 denoting the experience of the user in the call\n         * @param reason The reason/description for the rating\n         * @param custom Custom data\n         * @returns\n         */ this.submitFeedback = async (rating, { reason, custom } = {})=>{\n            if (rating < 1 || rating > 5) {\n                throw new Error(\"Rating must be between 1 and 5\");\n            }\n            const callSessionId = this.state.session?.id;\n            if (!callSessionId) {\n                throw new Error(\"Feedback can be submitted only in the context of a call session\");\n            }\n            const { sdkName, sdkVersion, ...platform } = getSdkSignature(getClientDetails());\n            // user sessionId is not available once the call has been left\n            // until we relax the backend validation, we'll send N/A\n            const userSessionId = this.sfuClient?.sessionId ?? \"N/A\";\n            const endpoint = `${this.streamClientBasePath}/feedback/${callSessionId}`;\n            return this.streamClient.post(endpoint, {\n                rating,\n                reason,\n                user_session_id: userSessionId,\n                sdk: sdkName,\n                sdk_version: sdkVersion,\n                custom: {\n                    ...custom,\n                    \"x-stream-platform-data\": platform\n                }\n            });\n        };\n        /**\n         * Sends a custom event to all call participants.\n         *\n         * @param payload the payload to send.\n         */ this.sendCustomEvent = async (payload)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/event`, {\n                custom: payload\n            });\n        };\n        /**\n         * Applies the device configuration from the backend.\n         *\n         * @internal\n         */ this.applyDeviceConfig = async (status)=>{\n            await this.initCamera({\n                setStatus: status\n            }).catch((err)=>{\n                this.logger(\"warn\", \"Camera init failed\", err);\n            });\n            await this.initMic({\n                setStatus: status\n            }).catch((err)=>{\n                this.logger(\"warn\", \"Mic init failed\", err);\n            });\n        };\n        this.initCamera = async (options)=>{\n            // Wait for any in progress camera operation\n            await this.camera.statusChangeSettled();\n            if (this.state.localParticipant?.videoStream || !this.permissionsContext.hasPermission(\"send-video\")) {\n                return;\n            }\n            // Set camera direction if it's not yet set\n            if (!this.camera.state.direction && !this.camera.state.selectedDevice) {\n                let defaultDirection = \"front\";\n                const backendSetting = this.state.settings?.video.camera_facing;\n                if (backendSetting) {\n                    defaultDirection = backendSetting === \"front\" ? \"front\" : \"back\";\n                }\n                this.camera.state.setDirection(defaultDirection);\n            }\n            // Set target resolution\n            const targetResolution = this.state.settings?.video.target_resolution;\n            if (targetResolution) {\n                await this.camera.selectTargetResolution(targetResolution);\n            }\n            if (options.setStatus) {\n                // Publish already that was set before we joined\n                if (this.camera.enabled && this.camera.state.mediaStream && !this.publisher?.isPublishing(TrackType.VIDEO)) {\n                    await this.publishVideoStream(this.camera.state.mediaStream, this.camera.publishOptions);\n                }\n                // Start camera if backend config specifies, and there is no local setting\n                if (this.camera.state.status === undefined && this.state.settings?.video.camera_default_on) {\n                    await this.camera.enable();\n                }\n            }\n        };\n        this.initMic = async (options)=>{\n            // Wait for any in progress mic operation\n            await this.microphone.statusChangeSettled();\n            if (this.state.localParticipant?.audioStream || !this.permissionsContext.hasPermission(\"send-audio\")) {\n                return;\n            }\n            if (options.setStatus) {\n                // Publish media stream that was set before we joined\n                if (this.microphone.enabled && this.microphone.state.mediaStream && !this.publisher?.isPublishing(TrackType.AUDIO)) {\n                    await this.publishAudioStream(this.microphone.state.mediaStream);\n                }\n                // Start mic if backend config specifies, and there is no local setting\n                if (this.microphone.state.status === undefined && this.state.settings?.audio.mic_default_on) {\n                    await this.microphone.enable();\n                }\n            }\n        };\n        /**\n         * Will begin tracking the given element for visibility changes within the\n         * configured viewport element (`call.setViewport`).\n         *\n         * @param element the element to track.\n         * @param sessionId the session id.\n         * @param trackType the video mode.\n         */ this.trackElementVisibility = (element, sessionId, trackType)=>{\n            return this.dynascaleManager.trackElementVisibility(element, sessionId, trackType);\n        };\n        /**\n         * Sets the viewport element to track bound video elements for visibility.\n         *\n         * @param element the viewport element.\n         */ this.setViewport = (element)=>{\n            return this.dynascaleManager.setViewport(element);\n        };\n        /**\n         * Binds a DOM <video> element to the given session id.\n         * This method will make sure that the video element will play\n         * the correct video stream for the given session id.\n         *\n         * Under the hood, it would also keep track of the video element dimensions\n         * and update the subscription accordingly in order to optimize the bandwidth.\n         *\n         * If a \"viewport\" is configured, the video element will be automatically\n         * tracked for visibility and the subscription will be updated accordingly.\n         *\n         * @param videoElement the video element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of video.\n         */ this.bindVideoElement = (videoElement, sessionId, trackType)=>{\n            const unbind = this.dynascaleManager.bindVideoElement(videoElement, sessionId, trackType);\n            if (!unbind) return;\n            this.leaveCallHooks.add(unbind);\n            return ()=>{\n                this.leaveCallHooks.delete(unbind);\n                unbind();\n            };\n        };\n        /**\n         * Binds a DOM <audio> element to the given session id.\n         *\n         * This method will make sure that the audio element will\n         * play the correct audio stream for the given session id.\n         *\n         * @param audioElement the audio element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of audio.\n         */ this.bindAudioElement = (audioElement, sessionId, trackType = \"audioTrack\")=>{\n            const unbind = this.dynascaleManager.bindAudioElement(audioElement, sessionId, trackType);\n            if (!unbind) return;\n            this.leaveCallHooks.add(unbind);\n            return ()=>{\n                this.leaveCallHooks.delete(unbind);\n                unbind();\n            };\n        };\n        /**\n         * Binds a DOM <img> element to this call's thumbnail (if enabled in settings).\n         *\n         * @param imageElement the image element to bind to.\n         * @param opts options for the binding.\n         */ this.bindCallThumbnailElement = (imageElement, opts = {})=>{\n            const handleError = ()=>{\n                imageElement.src = opts.fallbackImageSource || \"https://getstream.io/random_svg/?name=x&id=x\";\n            };\n            const unsubscribe = createSubscription(this.state.thumbnails$, (thumbnails)=>{\n                if (!thumbnails) return;\n                imageElement.addEventListener(\"error\", handleError);\n                const thumbnailUrl = new URL(thumbnails.image_url);\n                thumbnailUrl.searchParams.set(\"w\", String(imageElement.clientWidth));\n                thumbnailUrl.searchParams.set(\"h\", String(imageElement.clientHeight));\n                imageElement.src = thumbnailUrl.toString();\n            });\n            return ()=>{\n                unsubscribe();\n                imageElement.removeEventListener(\"error\", handleError);\n            };\n        };\n        this.type = type;\n        this.id = id;\n        this.cid = `${type}:${id}`;\n        this.ringingSubject = new _barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(ringing);\n        this.watching = watching;\n        this.streamClient = streamClient;\n        this.clientStore = clientStore;\n        this.streamClientBasePath = `/call/${this.type}/${this.id}`;\n        this.logger = getLogger([\n            \"Call\"\n        ]);\n        const callTypeConfig = CallTypes.get(type);\n        const participantSorter = sortParticipantsBy || callTypeConfig.options.sortParticipantsBy;\n        if (participantSorter) {\n            this.state.setSortParticipantsBy(participantSorter);\n        }\n        this.state.setMembers(members || []);\n        this.state.setOwnCapabilities(ownCapabilities || []);\n        this.state.setCallingState(ringing ? CallingState.RINGING : CallingState.IDLE);\n        this.camera = new CameraManager(this);\n        this.microphone = new MicrophoneManager(this);\n        this.speaker = new SpeakerManager(this);\n        this.screenShare = new ScreenShareManager(this);\n    }\n    async setup() {\n        await withoutConcurrency(this.joinLeaveConcurrencyTag, async ()=>{\n            if (this.initialized) return;\n            this.leaveCallHooks.add(this.on(\"all\", (event)=>{\n                // update state with the latest event data\n                this.state.updateFromEvent(event);\n            }));\n            this.leaveCallHooks.add(registerEventHandlers(this, this.dispatcher));\n            this.registerEffects();\n            this.registerReconnectHandlers();\n            this.leaveCallHooks.add(createSubscription(this.trackSubscriptionsSubject.pipe((0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_32__.debounce)((v)=>(0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_33__.timer)(v.type)), (0,_barrel_optimize_names_BehaviorSubject_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_from_fromEvent_fromEventPattern_map_merge_of_pairwise_shareReplay_startWith_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.map)((v)=>v.data)), (subscriptions)=>this.sfuClient?.updateSubscriptions(subscriptions).catch((err)=>{\n                    this.logger(\"debug\", `Failed to update track subscriptions`, err);\n                })));\n            if (this.state.callingState === CallingState.LEFT) {\n                this.state.setCallingState(CallingState.IDLE);\n            }\n            this.initialized = true;\n        });\n    }\n    registerEffects() {\n        this.leaveCallHooks.add(// handles updating the permissions context when the settings change.\n        createSubscription(this.state.settings$, (settings)=>{\n            if (!settings) return;\n            this.permissionsContext.setCallSettings(settings);\n        }));\n        this.leaveCallHooks.add(// handle the case when the user permissions are modified.\n        createSafeAsyncSubscription(this.state.ownCapabilities$, this.handleOwnCapabilitiesUpdated));\n        this.leaveCallHooks.add(// handles the case when the user is blocked by the call owner.\n        createSubscription(this.state.blockedUserIds$, async (blockedUserIds)=>{\n            if (!blockedUserIds || blockedUserIds.length === 0) return;\n            const currentUserId = this.currentUserId;\n            if (currentUserId && blockedUserIds.includes(currentUserId)) {\n                this.logger(\"info\", \"Leaving call because of being blocked\");\n                await this.leave({\n                    reason: \"user blocked\"\n                }).catch((err)=>{\n                    this.logger(\"error\", \"Error leaving call after being blocked\", err);\n                });\n            }\n        }));\n        this.leaveCallHooks.add(// watch for auto drop cancellation\n        createSubscription(this.state.callingState$, (callingState)=>{\n            if (!this.ringing) return;\n            if (callingState === CallingState.JOINED || callingState === CallingState.JOINING || callingState === CallingState.LEFT) {\n                clearTimeout(this.dropTimeout);\n                this.dropTimeout = undefined;\n            }\n        }));\n        this.leaveCallHooks.add(// \"ringing\" mode effects and event handlers\n        createSubscription(this.ringingSubject, (isRinging)=>{\n            if (!isRinging) return;\n            const callSession = this.state.session;\n            const receiver_id = this.clientStore.connectedUser?.id;\n            const ended_at = callSession?.ended_at;\n            const created_by_id = this.state.createdBy?.id;\n            const rejected_by = callSession?.rejected_by;\n            const accepted_by = callSession?.accepted_by;\n            let leaveCallIdle = false;\n            if (ended_at) {\n                // call was ended before it was accepted or rejected so we should leave it to idle\n                leaveCallIdle = true;\n            } else if (created_by_id && rejected_by) {\n                if (rejected_by[created_by_id]) {\n                    // call was cancelled by the caller\n                    leaveCallIdle = true;\n                }\n            } else if (receiver_id && rejected_by) {\n                if (rejected_by[receiver_id]) {\n                    // call was rejected by the receiver in some other device\n                    leaveCallIdle = true;\n                }\n            } else if (receiver_id && accepted_by) {\n                if (accepted_by[receiver_id]) {\n                    // call was accepted by the receiver in some other device\n                    leaveCallIdle = true;\n                }\n            }\n            if (leaveCallIdle) {\n                if (this.state.callingState !== CallingState.IDLE) {\n                    this.state.setCallingState(CallingState.IDLE);\n                }\n            } else {\n                if (this.state.callingState === CallingState.IDLE) {\n                    this.state.setCallingState(CallingState.RINGING);\n                }\n                this.scheduleAutoDrop();\n                this.leaveCallHooks.add(registerRingingCallEventHandlers(this));\n            }\n        }));\n    }\n    /**\n     * A flag indicating whether the call is \"ringing\" type of call.\n     */ get ringing() {\n        return getCurrentValue(this.ringingSubject);\n    }\n    /**\n     * Retrieves the current user ID.\n     */ get currentUserId() {\n        return this.clientStore.connectedUser?.id;\n    }\n    /**\n     * A flag indicating whether the call was created by the current user.\n     */ get isCreatedByMe() {\n        return this.state.createdBy?.id === this.currentUserId;\n    }\n}\nclass InsightMetrics {\n    constructor(){\n        this.connectionStartTimestamp = null;\n        this.wsTotalFailures = 0;\n        this.wsConsecutiveFailures = 0;\n        this.instanceClientId = randomId();\n    }\n}\n/**\n * postInsights is not supposed to be used by end users directly within chat application, and thus is kept isolated\n * from all the client/connection code/logic.\n *\n * @param insightType\n * @param insights\n */ const postInsights = async (insightType, insights)=>{\n    const maxAttempts = 3;\n    for(let i = 0; i < maxAttempts; i++){\n        try {\n            await axios__WEBPACK_IMPORTED_MODULE_34__[\"default\"].post(`https://chat-insights.getstream.io/insights/${insightType}`, insights);\n        } catch (e) {\n            await sleep((i + 1) * 3000);\n            continue;\n        }\n        break;\n    }\n};\nfunction buildWsFatalInsight(connection, event) {\n    return {\n        ...event,\n        ...buildWsBaseInsight(connection)\n    };\n}\nfunction buildWsBaseInsight(connection) {\n    const { client } = connection;\n    return {\n        ready_state: connection.ws?.readyState,\n        url: connection._buildUrl(),\n        api_key: client.key,\n        start_ts: client.insightMetrics.connectionStartTimestamp,\n        end_ts: new Date().getTime(),\n        auth_type: client.getAuthType(),\n        token: client.tokenManager.token,\n        user_id: client.userID,\n        user_details: client._user,\n        // device: client.options.device,\n        device: \"browser\",\n        client_id: connection.connectionID,\n        ws_details: connection.ws,\n        ws_consecutive_failures: client.insightMetrics.wsConsecutiveFailures,\n        ws_total_failures: client.insightMetrics.wsTotalFailures,\n        request_id: connection.requestID,\n        online: typeof navigator !== \"undefined\" ? navigator?.onLine : null,\n        user_agent: typeof navigator !== \"undefined\" ? navigator?.userAgent : null,\n        instance_client_id: client.insightMetrics.instanceClientId\n    };\n}\nfunction buildWsSuccessAfterFailureInsight(connection) {\n    return buildWsBaseInsight(connection);\n}\n// Type guards to check WebSocket error type\nconst isCloseEvent = (res)=>res.code !== undefined;\nconst isErrorEvent = (res)=>res.error !== undefined;\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */ class StableWSConnection {\n    constructor(client){\n        this._log = (msg, extra = {}, level = \"info\")=>{\n            this.client.logger(level, \"connection:\" + msg, {\n                ...extra\n            });\n        };\n        this.setClient = (client)=>{\n            this.client = client;\n        };\n        /**\n         * Builds and returns the url for websocket.\n         * @private\n         * @returns url string\n         */ this._buildUrl = ()=>{\n            const params = new URLSearchParams();\n            // const qs = encodeURIComponent(this.client._buildWSPayload(this.requestID));\n            // params.set('json', qs);\n            params.set(\"api_key\", this.client.key);\n            params.set(\"stream-auth-type\", this.client.getAuthType());\n            params.set(\"X-Stream-Client\", this.client.getUserAgent());\n            // params.append('authorization', this.client._getToken()!);\n            return `${this.client.wsBaseURL}/connect?${params.toString()}`;\n        };\n        /**\n         * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n         *\n         * @param {Event} event Event with type online or offline\n         *\n         */ this.onlineStatusChanged = (event)=>{\n            if (event.type === \"offline\") {\n                // mark the connection as down\n                this._log(\"onlineStatusChanged() - Status changing to offline\");\n                // we know that the app is offline so dispatch the unhealthy connection event immediately\n                this._setHealth(false, true);\n            } else if (event.type === \"online\") {\n                // retry right now...\n                // We check this.isHealthy, not sure if it's always\n                // smart to create a new WS connection if the old one is still up and running.\n                // it's possible we didn't miss any messages, so this process is just expensive and not needed.\n                this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`);\n                if (!this.isHealthy) {\n                    this._reconnect({\n                        interval: 10\n                    });\n                }\n            }\n        };\n        this.onopen = (wsID)=>{\n            if (this.wsID !== wsID) return;\n            const user = this.client.user;\n            if (!user) {\n                this.client.logger(\"error\", `User not set, can't connect to WS`);\n                return;\n            }\n            const token = this.client._getToken();\n            if (!token) {\n                this.client.logger(\"error\", `Token not set, can't connect authenticate`);\n                return;\n            }\n            const authMessage = {\n                token,\n                user_details: {\n                    id: user.id,\n                    name: user.name,\n                    image: user.image,\n                    custom: user.custom\n                }\n            };\n            this.authenticationSent = true;\n            this.ws?.send(JSON.stringify(authMessage));\n            this._log(\"onopen() - onopen callback\", {\n                wsID\n            });\n        };\n        this.onmessage = (wsID, event)=>{\n            if (this.wsID !== wsID) return;\n            this._log(\"onmessage() - onmessage callback\", {\n                event,\n                wsID\n            });\n            const data = typeof event.data === \"string\" ? JSON.parse(event.data) : null;\n            // we wait till the first message before we consider the connection open.\n            // the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n            // after that a ws.onclose.\n            if (!this.isResolved && data && data.type === \"connection.error\") {\n                this.isResolved = true;\n                if (data.error) {\n                    // @ts-expect-error - the types of _errorFromWSEvent are incorrect\n                    this.rejectPromise?.(this._errorFromWSEvent(data, false));\n                    return;\n                }\n            }\n            // trigger the event..\n            this.lastEvent = new Date();\n            if (data && (data.type === \"health.check\" || data.type === \"connection.ok\")) {\n                // the initial health-check should come from the client\n                this.scheduleNextPing();\n            }\n            if (data && data.type === \"connection.ok\") {\n                this.resolvePromise?.(data);\n                this._setHealth(true);\n            }\n            if (data && data.type === \"connection.error\" && data.error) {\n                const { code } = data.error;\n                this.isHealthy = false;\n                this.isConnecting = false;\n                this.consecutiveFailures += 1;\n                if (code === KnownCodes.TOKEN_EXPIRED && !this.client.tokenManager.isStatic()) {\n                    clearTimeout(this.connectionCheckTimeoutRef);\n                    this._log(\"connect() - WS failure due to expired token, so going to try to reload token and reconnect\");\n                    this._reconnect({\n                        refreshToken: true\n                    });\n                }\n            }\n            if (data) {\n                data.received_at = new Date();\n                this.client.dispatchEvent(data);\n            }\n            this.scheduleConnectionCheck();\n        };\n        this.onclose = (wsID, event)=>{\n            if (this.wsID !== wsID) return;\n            this._log(\"onclose() - onclose callback - \" + event.code, {\n                event,\n                wsID\n            });\n            if (event.code === KnownCodes.WS_CLOSED_SUCCESS) {\n                // this is a permanent error raised by stream..\n                // usually caused by invalid auth details\n                const error = new Error(`WS connection reject with error ${event.reason}`);\n                error.reason = event.reason;\n                error.code = event.code;\n                error.wasClean = event.wasClean;\n                error.target = event.target;\n                this.rejectPromise?.(error);\n                this._log(`onclose() - WS connection reject with error ${event.reason}`, {\n                    event\n                });\n            } else {\n                this.consecutiveFailures += 1;\n                this.totalFailures += 1;\n                this._setHealth(false);\n                this.isConnecting = false;\n                this.rejectPromise?.(this._errorFromWSEvent(event));\n                this._log(`onclose() - WS connection closed. Calling reconnect ...`, {\n                    event\n                });\n                // reconnect if its an abnormal failure\n                this._reconnect();\n            }\n        };\n        this.onerror = (wsID, event)=>{\n            if (this.wsID !== wsID) return;\n            this.consecutiveFailures += 1;\n            this.totalFailures += 1;\n            this._setHealth(false);\n            this.isConnecting = false;\n            this.rejectPromise?.(this._errorFromWSEvent(event));\n            this._log(`onerror() - WS connection resulted into error`, {\n                event\n            });\n            this._reconnect();\n        };\n        /**\n         * _setHealth - Sets the connection to healthy or unhealthy.\n         * Broadcasts an event in case the connection status changed.\n         *\n         * @param {boolean} healthy boolean indicating if the connection is healthy or not\n         * @param {boolean} dispatchImmediately boolean indicating to dispatch event immediately even if the connection is unhealthy\n         *\n         */ this._setHealth = (healthy, dispatchImmediately = false)=>{\n            if (healthy === this.isHealthy) return;\n            this.isHealthy = healthy;\n            if (this.isHealthy || dispatchImmediately) {\n                this.client.dispatchEvent({\n                    type: \"connection.changed\",\n                    online: this.isHealthy\n                });\n                return;\n            }\n            // we're offline, wait few seconds and fire and event if still offline\n            setTimeout(()=>{\n                if (this.isHealthy) return;\n                this.client.dispatchEvent({\n                    type: \"connection.changed\",\n                    online: this.isHealthy\n                });\n            }, 5000);\n        };\n        /**\n         * _errorFromWSEvent - Creates an error object for the WS event\n         *\n         */ this._errorFromWSEvent = (event, isWSFailure = true)=>{\n            let code;\n            let statusCode;\n            let message;\n            if (isCloseEvent(event)) {\n                code = event.code;\n                statusCode = \"unknown\";\n                message = event.reason;\n            }\n            if (isErrorEvent(event)) {\n                code = event.error.code;\n                statusCode = event.error.StatusCode;\n                message = event.error.message;\n            }\n            // Keeping this `warn` level log, to avoid cluttering of error logs from ws failures.\n            this._log(`_errorFromWSEvent() - WS failed with code ${code}`, {\n                event\n            }, \"warn\");\n            const error = new Error(`WS failed with code ${code} and reason - ${message}`);\n            error.code = code;\n            /**\n             * StatusCode does not exist on any event types but has been left\n             * as is to preserve JS functionality during the TS implementation\n             */ error.StatusCode = statusCode;\n            error.isWSFailure = isWSFailure;\n            return error;\n        };\n        /**\n         * _setupPromise - sets up the this.connectOpen promise\n         */ this._setupConnectionPromise = ()=>{\n            this.isResolved = false;\n            /** a promise that is resolved once ws.open is called */ this.connectionOpen = new Promise((resolve, reject)=>{\n                this.resolvePromise = resolve;\n                this.rejectPromise = reject;\n            });\n        };\n        /**\n         * Schedules a next health check ping for websocket.\n         */ this.scheduleNextPing = ()=>{\n            if (this.healthCheckTimeoutRef) {\n                clearTimeout(this.healthCheckTimeoutRef);\n            }\n            // 30 seconds is the recommended interval (messenger uses this)\n            this.healthCheckTimeoutRef = setTimeout(()=>{\n                // send the healthcheck..., server replies with a health check event\n                const data = [\n                    {\n                        type: \"health.check\",\n                        client_id: this.client.clientID\n                    }\n                ];\n                // try to send on the connection\n                try {\n                    this.ws?.send(JSON.stringify(data));\n                } catch (e) {\n                // error will already be detected elsewhere\n                }\n            }, this.pingInterval);\n        };\n        /**\n         * scheduleConnectionCheck - schedules a check for time difference between last received event and now.\n         * If the difference is more than 35 seconds, it means our health check logic has failed and websocket needs\n         * to be reconnected.\n         */ this.scheduleConnectionCheck = ()=>{\n            if (this.connectionCheckTimeoutRef) {\n                clearTimeout(this.connectionCheckTimeoutRef);\n            }\n            this.connectionCheckTimeoutRef = setTimeout(()=>{\n                const now = new Date();\n                if (this.lastEvent && now.getTime() - this.lastEvent.getTime() > this.connectionCheckTimeout) {\n                    this._log(\"scheduleConnectionCheck - going to reconnect\");\n                    this._setHealth(false);\n                    this._reconnect();\n                }\n            }, this.connectionCheckTimeout);\n        };\n        this.client = client;\n        /** consecutive failures influence the duration of the timeout */ this.consecutiveFailures = 0;\n        /** keep track of the total number of failures */ this.totalFailures = 0;\n        /** We only make 1 attempt to reconnect at the same time.. */ this.isConnecting = false;\n        /** True after the auth payload is sent to the server */ this.authenticationSent = false;\n        /** To avoid reconnect if client is disconnected */ this.isDisconnected = false;\n        /** Boolean that indicates if the connection promise is resolved */ this.isResolved = false;\n        /** Boolean that indicates if we have a working connection to the server */ this.isHealthy = false;\n        /** Incremented when a new WS connection is made */ this.wsID = 1;\n        /** Store the last event time for health checks */ this.lastEvent = null;\n        /** Send a health check message every 25 seconds */ this.pingInterval = 25 * 1000;\n        this.connectionCheckTimeout = this.pingInterval + 10 * 1000;\n        addConnectionEventListeners(this.onlineStatusChanged);\n    }\n    /**\n     * connect - Connect to the WS URL\n     * the default 15s timeout allows between 2~3 tries\n     * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n     */ async connect(timeout = 15000) {\n        if (this.isConnecting) {\n            throw Error(`You've called connect twice, can only attempt 1 connection at the time`);\n        }\n        this.isDisconnected = false;\n        try {\n            const healthCheck = await this._connect();\n            this.consecutiveFailures = 0;\n            this._log(`connect() - Established ws connection with healthcheck: ${healthCheck}`);\n        } catch (error) {\n            this.isHealthy = false;\n            this.consecutiveFailures += 1;\n            if (// @ts-ignore\n            error.code === KnownCodes.TOKEN_EXPIRED && !this.client.tokenManager.isStatic()) {\n                this._log(\"connect() - WS failure due to expired token, so going to try to reload token and reconnect\");\n                this._reconnect({\n                    refreshToken: true\n                });\n            } else {\n                // @ts-ignore\n                if (!error.isWSFailure) {\n                    // API rejected the connection and we should not retry\n                    throw new Error(JSON.stringify({\n                        // @ts-ignore\n                        code: error.code,\n                        // @ts-ignore\n                        StatusCode: error.StatusCode,\n                        // @ts-ignore\n                        message: error.message,\n                        // @ts-ignore\n                        isWSFailure: error.isWSFailure\n                    }));\n                }\n            }\n        }\n        return await this._waitForHealthy(timeout);\n    }\n    /**\n     * _waitForHealthy polls the promise connection to see if its resolved until it times out\n     * the default 15s timeout allows between 2~3 tries\n     * @param timeout duration(ms)\n     */ async _waitForHealthy(timeout = 15000) {\n        return Promise.race([\n            (async ()=>{\n                const interval = 50; // ms\n                for(let i = 0; i <= timeout; i += interval){\n                    try {\n                        return await this.connectionOpen;\n                    } catch (error) {\n                        if (i === timeout) {\n                            throw new Error(JSON.stringify({\n                                code: error.code,\n                                StatusCode: error.StatusCode,\n                                message: error.message,\n                                isWSFailure: error.isWSFailure\n                            }));\n                        }\n                        await sleep(interval);\n                    }\n                }\n            })(),\n            (async ()=>{\n                await sleep(timeout);\n                this.isConnecting = false;\n                throw new Error(JSON.stringify({\n                    code: \"\",\n                    StatusCode: \"\",\n                    message: \"initial WS connection could not be established\",\n                    isWSFailure: true\n                }));\n            })()\n        ]);\n    }\n    /**\n     * disconnect - Disconnect the connection and doesn't recover...\n     *\n     */ disconnect(timeout) {\n        this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`);\n        this.wsID += 1;\n        this.isConnecting = false;\n        this.isDisconnected = true;\n        // start by removing all the listeners\n        if (this.healthCheckTimeoutRef) {\n            clearInterval(this.healthCheckTimeoutRef);\n        }\n        if (this.connectionCheckTimeoutRef) {\n            clearInterval(this.connectionCheckTimeoutRef);\n        }\n        removeConnectionEventListeners(this.onlineStatusChanged);\n        this.isHealthy = false;\n        // remove ws handlers...\n        if (this.ws && this.ws.removeAllListeners) {\n            this.ws.removeAllListeners();\n        }\n        let isClosedPromise;\n        // and finally close...\n        // Assigning to local here because we will remove it from this before the\n        // promise resolves.\n        const { ws } = this;\n        if (ws && ws.close && ws.readyState === ws.OPEN) {\n            isClosedPromise = new Promise((resolve)=>{\n                const onclose = (event)=>{\n                    this._log(`disconnect() - resolving isClosedPromise ${event ? \"with\" : \"without\"} close frame`, {\n                        event\n                    });\n                    resolve();\n                };\n                ws.onclose = onclose;\n                // In case we don't receive close frame websocket server in time,\n                // lets not wait for more than 1 second.\n                setTimeout(onclose, timeout != null ? timeout : 1000);\n            });\n            this._log(`disconnect() - Manually closed connection by calling client.disconnect()`);\n            ws.close(KnownCodes.WS_CLOSED_SUCCESS, \"Manually closed connection by calling client.disconnect()\");\n        } else {\n            this._log(`disconnect() - ws connection doesn't exist or it is already closed.`);\n            isClosedPromise = Promise.resolve();\n        }\n        delete this.ws;\n        return isClosedPromise;\n    }\n    /**\n     * _connect - Connect to the WS endpoint\n     *\n     * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n     */ async _connect() {\n        if (this.isConnecting || this.isDisconnected && this.client.options.enableWSFallback) return; // simply ignore _connect if it's currently trying to connect\n        this.isConnecting = true;\n        this.requestID = randomId();\n        this.client.insightMetrics.connectionStartTimestamp = new Date().getTime();\n        let isTokenReady = false;\n        try {\n            this._log(`_connect() - waiting for token`);\n            await this.client.tokenManager.tokenReady();\n            isTokenReady = true;\n        } catch (e) {\n        // token provider has failed before, so try again\n        }\n        try {\n            if (!isTokenReady) {\n                this._log(`_connect() - tokenProvider failed before, so going to retry`);\n                await this.client.tokenManager.loadToken();\n            }\n            let mustSetupConnectionIdPromise = true;\n            if (this.client.connectionIdPromise) {\n                if (await isPromisePending(this.client.connectionIdPromise)) {\n                    mustSetupConnectionIdPromise = false;\n                }\n            }\n            if (mustSetupConnectionIdPromise) {\n                this.client._setupConnectionIdPromise();\n            }\n            this._setupConnectionPromise();\n            const wsURL = this._buildUrl();\n            this._log(`_connect() - Connecting to ${wsURL}`, {\n                wsURL,\n                requestID: this.requestID\n            });\n            this.ws = new (isomorphic_ws__WEBPACK_IMPORTED_MODULE_5___default())(wsURL);\n            this.ws.onopen = this.onopen.bind(this, this.wsID);\n            this.ws.onclose = this.onclose.bind(this, this.wsID);\n            this.ws.onerror = this.onerror.bind(this, this.wsID);\n            this.ws.onmessage = this.onmessage.bind(this, this.wsID);\n            const response = await this.connectionOpen;\n            this.isConnecting = false;\n            if (response) {\n                this.connectionID = response.connection_id;\n                this.client.resolveConnectionId?.(this.connectionID);\n                if (this.client.insightMetrics.wsConsecutiveFailures > 0 && this.client.options.enableInsights) {\n                    postInsights(\"ws_success_after_failure\", buildWsSuccessAfterFailureInsight(this));\n                    this.client.insightMetrics.wsConsecutiveFailures = 0;\n                }\n                return response;\n            }\n        } catch (err) {\n            await this.client._setupConnectionIdPromise();\n            this.isConnecting = false;\n            // @ts-ignore\n            this._log(`_connect() - Error - `, err);\n            if (this.client.options.enableInsights) {\n                this.client.insightMetrics.wsConsecutiveFailures++;\n                this.client.insightMetrics.wsTotalFailures++;\n                const insights = buildWsFatalInsight(this, convertErrorToJson(err));\n                postInsights?.(\"ws_fatal\", insights);\n            }\n            this.client.rejectConnectionId?.(err);\n            throw err;\n        }\n    }\n    /**\n     * _reconnect - Retry the connection to WS endpoint\n     *\n     * @param {{ interval?: number; refreshToken?: boolean }} options Following options are available\n     *\n     * - `interval`\t{int}\t\t\tnumber of ms that function should wait before reconnecting\n     * - `refreshToken` {boolean}\treload/refresh user token be refreshed before attempting reconnection.\n     */ async _reconnect(options = {}) {\n        this._log(\"_reconnect() - Initiating the reconnect\");\n        // only allow 1 connection at the time\n        if (this.isConnecting || this.isHealthy) {\n            this._log(\"_reconnect() - Abort (1) since already connecting or healthy\");\n            return;\n        }\n        // reconnect in case of on error or on close\n        // also reconnect if the health check cycle fails\n        let interval = options.interval;\n        if (!interval) {\n            interval = retryInterval(this.consecutiveFailures);\n        }\n        // reconnect, or try again after a little while...\n        await sleep(interval);\n        // Check once again if by some other call to _reconnect is active or connection is\n        // already restored, then no need to proceed.\n        if (this.isConnecting || this.isHealthy) {\n            this._log(\"_reconnect() - Abort (2) since already connecting or healthy\");\n            return;\n        }\n        if (this.isDisconnected && this.client.options.enableWSFallback) {\n            this._log(\"_reconnect() - Abort (3) since disconnect() is called\");\n            return;\n        }\n        this._log(\"_reconnect() - Destroying current WS connection\");\n        // cleanup the old connection\n        this._destroyCurrentWSConnection();\n        if (options.refreshToken) {\n            await this.client.tokenManager.loadToken();\n        }\n        try {\n            await this._connect();\n            this._log(\"_reconnect() - Waiting for recoverCallBack\");\n            // await this.client.recoverState();\n            this._log(\"_reconnect() - Finished recoverCallBack\");\n            this.consecutiveFailures = 0;\n        } catch (error) {\n            this.isHealthy = false;\n            this.consecutiveFailures += 1;\n            if (error.code === KnownCodes.TOKEN_EXPIRED && !this.client.tokenManager.isStatic()) {\n                this._log(\"_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect\");\n                return this._reconnect({\n                    refreshToken: true\n                });\n            }\n            // reconnect on WS failures, don't reconnect if there is a code bug\n            if (error.isWSFailure) {\n                this._log(\"_reconnect() - WS failure, so going to try to reconnect\");\n                this._reconnect();\n            }\n        }\n        this._log(\"_reconnect() - == END ==\");\n    }\n    /**\n     * _destroyCurrentWSConnection - Removes the current WS connection\n     *\n     */ _destroyCurrentWSConnection() {\n        // increment the ID, meaning we will ignore all messages from the old\n        // ws connection from now on.\n        this.wsID += 1;\n        try {\n            this?.ws?.removeAllListeners();\n            this?.ws?.close();\n        } catch (e) {\n        // we don't care\n        }\n    }\n}\nfunction isString(arrayOrString) {\n    return typeof arrayOrString === \"string\";\n}\nfunction isMapStringCallback(arrayOrString, callback) {\n    return !!callback && isString(arrayOrString);\n}\nfunction map(arrayOrString, callback) {\n    const res = [];\n    if (isString(arrayOrString) && isMapStringCallback(arrayOrString, callback)) {\n        for(let k = 0, len = arrayOrString.length; k < len; k++){\n            if (arrayOrString.charAt(k)) {\n                const kValue = arrayOrString.charAt(k);\n                const mappedValue = callback(kValue, k, arrayOrString);\n                res[k] = mappedValue;\n            }\n        }\n    } else if (!isString(arrayOrString) && !isMapStringCallback(arrayOrString, callback)) {\n        for(let k = 0, len = arrayOrString.length; k < len; k++){\n            if (k in arrayOrString) {\n                const kValue = arrayOrString[k];\n                const mappedValue = callback(kValue, k, arrayOrString);\n                res[k] = mappedValue;\n            }\n        }\n    }\n    return res;\n}\nconst encodeBase64 = (data)=>(0,base64_js__WEBPACK_IMPORTED_MODULE_6__.fromByteArray)(new Uint8Array(map(data, (char)=>char.charCodeAt(0))));\n// base-64 decoder throws exception if encoded string is not padded by '=' to make string length\n// in multiples of 4. So gonna use our own method for this purpose to keep backwards compatibility\n// https://github.com/beatgammit/base64-js/blob/master/index.js#L26\nconst decodeBase64 = (s)=>{\n    const e = {}, w = String.fromCharCode, L = s.length;\n    let i, b = 0, c, x, l = 0, a, r = \"\";\n    const A = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    for(i = 0; i < 64; i++){\n        e[A.charAt(i)] = i;\n    }\n    for(x = 0; x < L; x++){\n        c = e[s.charAt(x)];\n        b = (b << 6) + c;\n        l += 6;\n        while(l >= 8){\n            ((a = b >>> (l -= 8) & 0xff) || x < L - 2) && (r += w(a));\n        }\n    }\n    return r;\n};\n/**\n *\n * @param {string} userId the id of the user\n * @return {string}\n */ function DevToken(userId) {\n    return [\n        \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\",\n        encodeBase64(JSON.stringify({\n            user_id: userId\n        })),\n        \"devtoken\"\n    ].join(\".\");\n}\nfunction UserFromToken(token) {\n    const fragments = token.split(\".\");\n    if (fragments.length !== 3) {\n        return \"\";\n    }\n    const b64Payload = fragments[1];\n    const payload = decodeBase64(b64Payload);\n    const data = JSON.parse(payload);\n    return data.user_id;\n}\n/**\n * TokenManager\n *\n * Handles all the operations around user token.\n */ class TokenManager {\n    /**\n     * Constructor\n     *\n     * @param {Secret} secret\n     */ constructor(secret){\n        /**\n         * Set the static string token or token provider.\n         * Token provider should return a token string or a promise which resolves to string token.\n         *\n         * @param {TokenOrProvider} tokenOrProvider - the token or token provider.\n         * @param {UserResponse} user - the user object.\n         * @param {boolean} isAnonymous - whether the user is anonymous or not.\n         */ this.setTokenOrProvider = async (tokenOrProvider, user, isAnonymous)=>{\n            this.validateToken(tokenOrProvider, user, isAnonymous);\n            this.user = user;\n            if (isFunction(tokenOrProvider)) {\n                this.tokenProvider = tokenOrProvider;\n                this.type = \"provider\";\n            }\n            if (typeof tokenOrProvider === \"string\") {\n                this.token = tokenOrProvider;\n                this.type = \"static\";\n            }\n            await this.loadToken();\n        };\n        /**\n         * Resets the token manager.\n         * Useful for client disconnection or switching user.\n         */ this.reset = ()=>{\n            this.token = undefined;\n            this.user = undefined;\n            this.loadTokenPromise = null;\n        };\n        // Validates the user token.\n        this.validateToken = (tokenOrProvider, user, isAnonymous)=>{\n            // allow empty token for anon user\n            if (user && isAnonymous && !tokenOrProvider) return;\n            // Don't allow empty token for non-server side client.\n            if (!this.secret && !tokenOrProvider) {\n                throw new Error(\"UserWithId token can not be empty\");\n            }\n            if (tokenOrProvider && typeof tokenOrProvider !== \"string\" && !isFunction(tokenOrProvider)) {\n                throw new Error(\"user token should either be a string or a function\");\n            }\n            if (typeof tokenOrProvider === \"string\") {\n                // Allow empty token for anonymous users\n                if (isAnonymous && tokenOrProvider === \"\") return;\n                const tokenUserId = UserFromToken(tokenOrProvider);\n                if (tokenOrProvider != null && (tokenUserId == null || tokenUserId === \"\" || !isAnonymous && tokenUserId !== user.id)) {\n                    throw new Error(\"userToken does not have a user_id or is not matching with user.id\");\n                }\n            }\n        };\n        // Resolves when token is ready. This function is simply to check if loadToken is in progress, in which\n        // case a function should wait.\n        this.tokenReady = ()=>this.loadTokenPromise;\n        // Fetches a token from tokenProvider function and sets in tokenManager.\n        // In case of static token, it will simply resolve to static token.\n        this.loadToken = ()=>{\n            // eslint-disable-next-line no-async-promise-executor\n            this.loadTokenPromise = new Promise(async (resolve, reject)=>{\n                if (this.type === \"static\") {\n                    return resolve(this.token);\n                }\n                if (this.tokenProvider && typeof this.tokenProvider !== \"string\") {\n                    try {\n                        this.token = await this.tokenProvider();\n                    } catch (e) {\n                        return reject(new Error(`Call to tokenProvider failed with message: ${e}`));\n                    }\n                    resolve(this.token);\n                }\n            });\n            return this.loadTokenPromise;\n        };\n        // Returns a current token\n        this.getToken = ()=>{\n            if (this.token) {\n                return this.token;\n            }\n            if (this.user && !this.token) {\n                return this.token;\n            }\n            throw new Error(`User token is not set. Either client.connectUser wasn't called or client.disconnect was called`);\n        };\n        this.isStatic = ()=>this.type === \"static\";\n        this.loadTokenPromise = null;\n        if (secret) {\n            this.secret = secret;\n        }\n        this.type = \"static\";\n    }\n}\nconst APIErrorCodes = {\n    \"-1\": {\n        name: \"InternalSystemError\",\n        retryable: true\n    },\n    \"2\": {\n        name: \"AccessKeyError\",\n        retryable: false\n    },\n    \"3\": {\n        name: \"AuthenticationFailedError\",\n        retryable: true\n    },\n    \"4\": {\n        name: \"InputError\",\n        retryable: false\n    },\n    \"6\": {\n        name: \"DuplicateUsernameError\",\n        retryable: false\n    },\n    \"9\": {\n        name: \"RateLimitError\",\n        retryable: true\n    },\n    \"16\": {\n        name: \"DoesNotExistError\",\n        retryable: false\n    },\n    \"17\": {\n        name: \"NotAllowedError\",\n        retryable: false\n    },\n    \"18\": {\n        name: \"EventNotSupportedError\",\n        retryable: false\n    },\n    \"19\": {\n        name: \"ChannelFeatureNotSupportedError\",\n        retryable: false\n    },\n    \"20\": {\n        name: \"MessageTooLongError\",\n        retryable: false\n    },\n    \"21\": {\n        name: \"MultipleNestingLevelError\",\n        retryable: false\n    },\n    \"22\": {\n        name: \"PayloadTooBigError\",\n        retryable: false\n    },\n    \"23\": {\n        name: \"RequestTimeoutError\",\n        retryable: true\n    },\n    \"24\": {\n        name: \"MaxHeaderSizeExceededError\",\n        retryable: false\n    },\n    \"40\": {\n        name: \"AuthErrorTokenExpired\",\n        retryable: false\n    },\n    \"41\": {\n        name: \"AuthErrorTokenNotValidYet\",\n        retryable: false\n    },\n    \"42\": {\n        name: \"AuthErrorTokenUsedBeforeIssuedAt\",\n        retryable: false\n    },\n    \"43\": {\n        name: \"AuthErrorTokenSignatureInvalid\",\n        retryable: false\n    },\n    \"44\": {\n        name: \"CustomCommandEndpointMissingError\",\n        retryable: false\n    },\n    \"45\": {\n        name: \"CustomCommandEndpointCallError\",\n        retryable: true\n    },\n    \"46\": {\n        name: \"ConnectionIDNotFoundError\",\n        retryable: false\n    },\n    \"60\": {\n        name: \"CoolDownError\",\n        retryable: true\n    },\n    \"69\": {\n        name: \"ErrWrongRegion\",\n        retryable: false\n    },\n    \"70\": {\n        name: \"ErrQueryChannelPermissions\",\n        retryable: false\n    },\n    \"71\": {\n        name: \"ErrTooManyConnections\",\n        retryable: true\n    },\n    \"99\": {\n        name: \"AppSuspendedError\",\n        retryable: false\n    }\n};\nfunction isAPIError(error) {\n    return error.code !== undefined;\n}\nfunction isErrorRetryable(error) {\n    if (!error.code) return false;\n    const err = APIErrorCodes[`${error.code}`];\n    if (!err) return false;\n    return err.retryable;\n}\nfunction isConnectionIDError(error) {\n    return error.code === 46; // ConnectionIDNotFoundError\n}\nfunction isWSFailure(err) {\n    if (typeof err.isWSFailure === \"boolean\") {\n        return err.isWSFailure;\n    }\n    try {\n        return JSON.parse(err.message).isWSFailure;\n    } catch (_) {\n        return false;\n    }\n}\nfunction isErrorResponse(res) {\n    return !res.status || res.status < 200 || 300 <= res.status;\n}\nvar ConnectionState;\n(function(ConnectionState) {\n    ConnectionState[\"Closed\"] = \"CLOSED\";\n    ConnectionState[\"Connected\"] = \"CONNECTED\";\n    ConnectionState[\"Connecting\"] = \"CONNECTING\";\n    ConnectionState[\"Disconnected\"] = \"DISCONNECTED\";\n    ConnectionState[\"Init\"] = \"INIT\";\n})(ConnectionState || (ConnectionState = {}));\nclass WSConnectionFallback {\n    constructor(client){\n        /** @private */ this._onlineStatusChanged = (event)=>{\n            this._log(`_onlineStatusChanged() - ${event.type}`);\n            if (event.type === \"offline\") {\n                this._setState(ConnectionState.Closed);\n                this.cancelToken?.cancel(\"disconnect() is called\");\n                this.cancelToken = undefined;\n                return;\n            }\n            if (event.type === \"online\" && this.state === ConnectionState.Closed) {\n                this.connect(true);\n            }\n        };\n        /** @private */ this._req = async (params, config, retry)=>{\n            if (!this.cancelToken && !params.close) {\n                this.cancelToken = axios__WEBPACK_IMPORTED_MODULE_34__[\"default\"].CancelToken.source();\n            }\n            try {\n                const res = await this.client.doAxiosRequest(\"get\", this.client.baseURL.replace(\":3030\", \":8900\") + \"/longpoll\", undefined, {\n                    config: {\n                        ...config,\n                        cancelToken: this.cancelToken?.token\n                    },\n                    params,\n                    publicEndpoint: true\n                });\n                this.consecutiveFailures = 0; // always reset in case of no error\n                return res;\n            } catch (err) {\n                this.consecutiveFailures += 1;\n                // @ts-ignore\n                if (retry && isErrorRetryable(err)) {\n                    this._log(`_req() - Retryable error, retrying request`);\n                    await sleep(retryInterval(this.consecutiveFailures));\n                    return this._req(params, config, retry);\n                }\n                throw err;\n            }\n        };\n        /** @private */ this._poll = async ()=>{\n            while(this.state === ConnectionState.Connected){\n                try {\n                    const data = await this._req({}, {\n                        timeout: 30000\n                    }, true); // 30s => API responds in 20s if there is no event\n                    if (data.events?.length) {\n                        for(let i = 0; i < data.events.length; i++){\n                            this.client.dispatchEvent(data.events[i]);\n                        }\n                    }\n                } catch (err) {\n                    if (axios__WEBPACK_IMPORTED_MODULE_34__[\"default\"].isCancel(err)) {\n                        this._log(`_poll() - axios canceled request`);\n                        return;\n                    }\n                    /** client.doAxiosRequest will take care of TOKEN_EXPIRED error */ // @ts-ignore\n                    if (isConnectionIDError(err)) {\n                        this._log(`_poll() - ConnectionID error, connecting without ID...`);\n                        this._setState(ConnectionState.Disconnected);\n                        this.connect(true);\n                        return;\n                    }\n                    // @ts-ignore\n                    if (isAPIError(err) && !isErrorRetryable(err)) {\n                        this._setState(ConnectionState.Closed);\n                        return;\n                    }\n                    await sleep(retryInterval(this.consecutiveFailures));\n                }\n            }\n        };\n        /**\n         * connect try to open a longpoll request\n         * @param reconnect should be false for first call and true for subsequent calls to keep the connection alive and call recoverState\n         */ this.connect = async (reconnect = false)=>{\n            if (this.state === ConnectionState.Connecting) {\n                this._log(\"connect() - connecting already in progress\", {\n                    reconnect\n                }, \"warn\");\n                return;\n            }\n            if (this.state === ConnectionState.Connected) {\n                this._log(\"connect() - already connected and polling\", {\n                    reconnect\n                }, \"warn\");\n                return;\n            }\n            this._setState(ConnectionState.Connecting);\n            this.connectionID = undefined; // connect should be sent with empty connection_id so API creates one\n            try {\n                const { event } = await this._req({\n                    json: this.client._buildWSPayload()\n                }, {\n                    timeout: 8000\n                }, reconnect);\n                this._setState(ConnectionState.Connected);\n                this.connectionID = event.connection_id;\n                this.client.resolveConnectionId?.();\n                // @ts-expect-error\n                this.client.dispatchEvent(event);\n                this._poll();\n                return event;\n            } catch (err) {\n                this._setState(ConnectionState.Closed);\n                this.client.rejectConnectionId?.();\n                throw err;\n            }\n        };\n        /**\n         * isHealthy checks if there is a connectionID and connection is in Connected state\n         */ this.isHealthy = ()=>{\n            return !!this.connectionID && this.state === ConnectionState.Connected;\n        };\n        this.disconnect = async (timeout = 2000)=>{\n            removeConnectionEventListeners(this._onlineStatusChanged);\n            this._setState(ConnectionState.Disconnected);\n            this.cancelToken?.cancel(\"disconnect() is called\");\n            this.cancelToken = undefined;\n            const connection_id = this.connectionID;\n            this.connectionID = undefined;\n            try {\n                await this._req({\n                    close: true,\n                    connection_id\n                }, {\n                    timeout\n                }, false);\n                this._log(`disconnect() - Closed connectionID`);\n            } catch (err) {\n                this._log(`disconnect() - Failed`, {\n                    err\n                }, \"error\");\n            }\n        };\n        this.client = client;\n        this.state = ConnectionState.Init;\n        this.consecutiveFailures = 0;\n        addConnectionEventListeners(this._onlineStatusChanged);\n    }\n    _log(msg, extra = {}, level = \"info\") {\n        this.client.logger(level, \"WSConnectionFallback:\" + msg, {\n            ...extra\n        });\n    }\n    _setState(state) {\n        this._log(`_setState() - ${state}`);\n        // transition from connecting => connected\n        if (this.state === ConnectionState.Connecting && state === ConnectionState.Connected) {\n            this.client.dispatchEvent({\n                type: \"connection.changed\",\n                online: true\n            });\n        }\n        if (state === ConnectionState.Closed || state === ConnectionState.Disconnected) {\n            this.client.dispatchEvent({\n                type: \"connection.changed\",\n                online: false\n            });\n        }\n        this.state = state;\n    }\n}\nconst logger = getLogger([\n    \"location\"\n]);\nconst HINT_URL = `https://hint.stream-io-video.com/`;\nconst getLocationHint = async (hintUrl = HINT_URL, timeout = 2000)=>{\n    const abortController = new AbortController();\n    const timeoutId = setTimeout(()=>abortController.abort(), timeout);\n    try {\n        const response = await fetch(hintUrl, {\n            method: \"HEAD\",\n            signal: abortController.signal\n        });\n        const awsPop = response.headers.get(\"x-amz-cf-pop\") || \"ERR\";\n        logger(\"debug\", `Location header: ${awsPop}`);\n        return awsPop.substring(0, 3); // AMS1-P2 -> AMS\n    } catch (e) {\n        logger(\"warn\", `Failed to get location hint from ${hintUrl}`, e);\n        return \"ERR\";\n    } finally{\n        clearTimeout(timeoutId);\n    }\n};\nclass StreamClient {\n    /**\n     * Initialize a client.\n     *\n     * @param {string} key - the api key\n     * @param {StreamClientOptions} [options] - additional options, here you can pass custom options to axios instance\n     * @param {string} [options.secret] - the api secret\n     * @param {boolean} [options.browser] - enforce the client to be in browser mode\n     * @param {boolean} [options.warmUp] - default to false, if true, client will open a connection as soon as possible to speed up following requests\n     * @param {Logger} [options.Logger] - custom logger\n     * @param {number} [options.timeout] - default to 3000\n     * @param {httpsAgent} [options.httpsAgent] - custom httpsAgent, in node it's default to https.agent()\n     */ constructor(key, options){\n        this.listeners = {};\n        this.devToken = (userID)=>{\n            return DevToken(userID);\n        };\n        this.getAuthType = ()=>{\n            return this.anonymous ? \"anonymous\" : \"jwt\";\n        };\n        this.setBaseURL = (baseURL)=>{\n            this.baseURL = baseURL;\n            this.wsBaseURL = this.baseURL.replace(\"http\", \"ws\").replace(\":3030\", \":8800\");\n        };\n        this.getLocationHint = async (hintUrl, timeout)=>{\n            const hint = await this.locationHint;\n            if (!hint || hint === \"ERR\") {\n                this.locationHint = getLocationHint(hintUrl ?? this.options.locationHintUrl, timeout ?? this.options.locationHintTimeout);\n                return this.locationHint;\n            }\n            return hint;\n        };\n        this._getConnectionID = ()=>this.wsConnection?.connectionID || this.wsFallback?.connectionID;\n        this._hasConnectionID = ()=>Boolean(this._getConnectionID());\n        /**\n         * connectUser - Set the current user and open a WebSocket connection\n         *\n         * @param user Data about this user. IE {name: \"john\"}\n         * @param {TokenOrProvider} userTokenOrProvider Token or provider\n         *\n         * @return {ConnectAPIResponse} Returns a promise that resolves when the connection is setup\n         */ this.connectUser = async (user, userTokenOrProvider)=>{\n            if (!user.id) {\n                throw new Error('The \"id\" field on the user is missing');\n            }\n            /**\n             * Calling connectUser multiple times is potentially the result of a  bad integration, however,\n             * If the user id remains the same we don't throw error\n             */ if (this.userID === user.id && this.setUserPromise) {\n                this.logger(\"warn\", \"Consecutive calls to connectUser is detected, ideally you should only call this function once in your app.\");\n                return this.setUserPromise;\n            }\n            if (this.userID) {\n                throw new Error(\"Use client.disconnect() before trying to connect as a different user. connectUser was called twice.\");\n            }\n            if ((this._isUsingServerAuth() || this.node) && !this.options.allowServerSideConnect) {\n                this.logger(\"warn\", 'Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add \"allowServerSideConnect: true\" to the client options to disable this warning.');\n            }\n            // we generate the client id client side\n            this.userID = user.id;\n            this.anonymous = false;\n            const setTokenPromise = this._setToken(user, userTokenOrProvider, this.anonymous);\n            this._setUser(user);\n            const wsPromise = this.openConnection();\n            this.setUserPromise = Promise.all([\n                setTokenPromise,\n                wsPromise\n            ]).then((result)=>result[1]);\n            try {\n                addConnectionEventListeners(this.updateNetworkConnectionStatus);\n                return await this.setUserPromise;\n            } catch (err) {\n                if (this.persistUserOnConnectionFailure) {\n                    // cleanup client to allow the user to retry connectUser again\n                    this.closeConnection();\n                } else {\n                    this.disconnectUser();\n                }\n                throw err;\n            }\n        };\n        this._setToken = (user, userTokenOrProvider, isAnonymous)=>this.tokenManager.setTokenOrProvider(userTokenOrProvider, user, isAnonymous);\n        this._setUser = (user)=>{\n            /**\n             * This one is used by the frontend. This is a copy of the current user object stored on backend.\n             * It contains reserved properties and own user properties which are not present in `this._user`.\n             */ this.user = user;\n            this.userID = user.id;\n            // this one is actually used for requests. This is a copy of current user provided to `connectUser` function.\n            this._user = {\n                ...user\n            };\n        };\n        /**\n         * Disconnects the websocket connection, without removing the user set on client.\n         * client.closeConnection will not trigger default auto-retry mechanism for reconnection. You need\n         * to call client.openConnection to reconnect to websocket.\n         *\n         * This is mainly useful on mobile side. You can only receive push notifications\n         * if you don't have active websocket connection.\n         * So when your app goes to background, you can call `client.closeConnection`.\n         * And when app comes back to foreground, call `client.openConnection`.\n         *\n         * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming succesful disconnection.\n         *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n         */ this.closeConnection = async (timeout)=>{\n            await Promise.all([\n                this.wsConnection?.disconnect(timeout),\n                this.wsFallback?.disconnect(timeout)\n            ]);\n            return Promise.resolve();\n        };\n        /**\n         * Creates a new WebSocket connection with the current user. Returns empty promise, if there is an active connection\n         */ this.openConnection = async ()=>{\n            if (!this.userID) {\n                throw Error(\"UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead\");\n            }\n            if (this.wsConnection?.isConnecting && this.wsPromise) {\n                this.logger(\"info\", \"client:openConnection() - connection already in progress\");\n                return this.wsPromise;\n            }\n            if ((this.wsConnection?.isHealthy || this.wsFallback?.isHealthy()) && this._hasConnectionID()) {\n                this.logger(\"info\", \"client:openConnection() - openConnection called twice, healthy connection already exists\");\n                return Promise.resolve();\n            }\n            this._setupConnectionIdPromise();\n            this.clientID = `${this.userID}--${randomId()}`;\n            this.wsPromise = this.connect();\n            return this.wsPromise;\n        };\n        /**\n         * Disconnects the websocket and removes the user from client.\n         *\n         * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n         *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n         */ this.disconnectUser = async (timeout)=>{\n            this.logger(\"info\", \"client:disconnect() - Disconnecting the client\");\n            // remove the user specific fields\n            delete this.user;\n            delete this._user;\n            delete this.userID;\n            this.anonymous = false;\n            await this.closeConnection(timeout);\n            removeConnectionEventListeners(this.updateNetworkConnectionStatus);\n            this.tokenManager.reset();\n            this.connectionIdPromise = undefined;\n            this.rejectConnectionId = undefined;\n            this.resolveConnectionId = undefined;\n        };\n        this.connectGuestUser = async (user)=>{\n            this.guestUserCreatePromise = this.doAxiosRequest(\"post\", \"/guest\", {\n                user: {\n                    ...user\n                }\n            }, {\n                publicEndpoint: true\n            });\n            const response = await this.guestUserCreatePromise;\n            this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise = undefined);\n            return this.connectUser(response.user, response.access_token);\n        };\n        /**\n         * connectAnonymousUser - Set an anonymous user and open a WebSocket connection\n         */ this.connectAnonymousUser = async (user, tokenOrProvider)=>{\n            addConnectionEventListeners(this.updateNetworkConnectionStatus);\n            this._setupConnectionIdPromise();\n            this.anonymous = true;\n            await this._setToken(user, tokenOrProvider, this.anonymous);\n            this._setUser(user);\n            // some endpoints require a connection_id to be resolved.\n            // as anonymous users aren't allowed to open WS connections, we just\n            // resolve the connection_id here.\n            this.resolveConnectionId?.();\n        };\n        /**\n         * on - Listen to events on all channels and users your watching\n         *\n         * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n         *\n         * @param eventName The event type to listen for (optional)\n         * @param callback The callback to call\n         *\n         * @return  Returns a function which, when called, unsubscribes the event handler.\n         */ this.on = (eventName, callback)=>{\n            if (!this.listeners[eventName]) {\n                this.listeners[eventName] = [];\n            }\n            this.logger(\"debug\", `Adding listener for ${eventName} event`);\n            this.listeners[eventName]?.push(callback);\n            return ()=>{\n                this.off(eventName, callback);\n            };\n        };\n        /**\n         * off - Remove the event handler\n         */ this.off = (eventName, callback)=>{\n            if (!this.listeners[eventName]) {\n                this.listeners[eventName] = [];\n            }\n            this.logger(\"debug\", `Removing listener for ${eventName} event`);\n            this.listeners[eventName] = this.listeners[eventName]?.filter((value)=>value !== callback);\n        };\n        /**\n         * sets up the this.connectionIdPromise\n         */ this._setupConnectionIdPromise = async ()=>{\n            /** a promise that is resolved once connection id is set */ this.connectionIdPromise = new Promise((resolve, reject)=>{\n                this.resolveConnectionId = resolve;\n                this.rejectConnectionId = reject;\n            });\n        };\n        this._logApiRequest = (type, url, data, config)=>{\n            this.logger(\"trace\", `client: ${type} - Request - ${url}`, {\n                payload: data,\n                config\n            });\n        };\n        this._logApiResponse = (type, url, response)=>{\n            this.logger(\"trace\", `client:${type} - Response - url: ${url} > status ${response.status}`, {\n                response\n            });\n        };\n        this._logApiError = (type, url, error)=>{\n            this.logger(\"error\", `client:${type} - Error - url: ${url}`, {\n                url,\n                error\n            });\n        };\n        this.doAxiosRequest = async (type, url, data, options = {})=>{\n            if (!options.publicEndpoint) {\n                await Promise.all([\n                    this.tokenManager.tokenReady(),\n                    this.guestUserCreatePromise\n                ]);\n                // we need to wait for presence of connection id before making requests\n                try {\n                    await this.connectionIdPromise;\n                } catch (e) {\n                    // in case connection id was rejected\n                    // reconnection maybe in progress\n                    // we can wait for healthy connection to resolve, which rejects when 15s timeout is reached\n                    await this.wsConnection?._waitForHealthy();\n                    await this.connectionIdPromise;\n                }\n            }\n            const requestConfig = this._enrichAxiosOptions(options);\n            try {\n                let response;\n                this._logApiRequest(type, url, data, requestConfig);\n                switch(type){\n                    case \"get\":\n                        response = await this.axiosInstance.get(url, requestConfig);\n                        break;\n                    case \"delete\":\n                        response = await this.axiosInstance.delete(url, requestConfig);\n                        break;\n                    case \"post\":\n                        response = await this.axiosInstance.post(url, data, requestConfig);\n                        break;\n                    case \"put\":\n                        response = await this.axiosInstance.put(url, data, requestConfig);\n                        break;\n                    case \"patch\":\n                        response = await this.axiosInstance.patch(url, data, requestConfig);\n                        break;\n                    case \"options\":\n                        response = await this.axiosInstance.options(url, requestConfig);\n                        break;\n                    default:\n                        throw new Error(\"Invalid request type\");\n                }\n                this._logApiResponse(type, url, response);\n                this.consecutiveFailures = 0;\n                return this.handleResponse(response);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            } catch (e /**TODO: generalize error types  */ ) {\n                e.client_request_id = requestConfig.headers?.[\"x-client-request-id\"];\n                this.consecutiveFailures += 1;\n                if (e.response) {\n                    this._logApiError(type, url, e.response);\n                    /** connection_fallback depends on this token expiration logic */ if (e.response.data.code === KnownCodes.TOKEN_EXPIRED && !this.tokenManager.isStatic()) {\n                        if (this.consecutiveFailures > 1) {\n                            await sleep(retryInterval(this.consecutiveFailures));\n                        }\n                        await this.tokenManager.loadToken();\n                        return await this.doAxiosRequest(type, url, data, options);\n                    }\n                    return this.handleResponse(e.response);\n                } else {\n                    this._logApiError(type, url, e);\n                    // eslint-disable-next-line no-throw-literal\n                    throw e;\n                }\n            }\n        };\n        this.get = (url, params)=>{\n            return this.doAxiosRequest(\"get\", url, null, {\n                params\n            });\n        };\n        this.put = (url, data, params)=>{\n            return this.doAxiosRequest(\"put\", url, data, {\n                params\n            });\n        };\n        this.post = (url, data, params)=>{\n            return this.doAxiosRequest(\"post\", url, data, {\n                params\n            });\n        };\n        this.patch = (url, data, params)=>{\n            return this.doAxiosRequest(\"patch\", url, data, {\n                params\n            });\n        };\n        this.delete = (url, params)=>{\n            return this.doAxiosRequest(\"delete\", url, null, {\n                params\n            });\n        };\n        this.errorFromResponse = (response)=>{\n            const { data, status } = response;\n            const err = new ErrorFromResponse();\n            err.message = `Stream error code ${data.code}: ${data.message}`;\n            err.code = data.code;\n            err.unrecoverable = data.unrecoverable;\n            err.response = response;\n            err.status = status;\n            return err;\n        };\n        this.handleResponse = (response)=>{\n            const data = response.data;\n            if (isErrorResponse(response)) {\n                throw this.errorFromResponse(response);\n            }\n            return data;\n        };\n        this.dispatchEvent = (event)=>{\n            this.logger(\"debug\", `Dispatching event: ${event.type}`, event);\n            if (!this.listeners) return;\n            // call generic listeners\n            for (const listener of this.listeners.all || []){\n                listener(event);\n            }\n            // call type specific listeners\n            for (const listener of this.listeners[event.type] || []){\n                listener(event);\n            }\n        };\n        /**\n         * @private\n         */ this.connect = async ()=>{\n            if (!this.userID || !this._user) {\n                throw Error(\"Call connectUser or connectAnonymousUser before starting the connection\");\n            }\n            if (!this.wsBaseURL) {\n                throw Error(\"Websocket base url not set\");\n            }\n            if (!this.clientID) {\n                throw Error(\"clientID is not set\");\n            }\n            if (!this.wsConnection && (this.options.warmUp || this.options.enableInsights)) {\n                this._sayHi();\n            }\n            // The StableWSConnection handles all the reconnection logic.\n            if (this.options.wsConnection && this.node) {\n                // Intentionally avoiding adding ts generics on wsConnection in options since its only useful for unit test purpose.\n                this.options.wsConnection.setClient(this);\n                this.wsConnection = this.options.wsConnection;\n            } else {\n                this.wsConnection = new StableWSConnection(this);\n            }\n            try {\n                // if fallback is used before, continue using it instead of waiting for WS to fail\n                if (this.wsFallback) {\n                    return await this.wsFallback.connect();\n                }\n                this.logger(\"info\", \"StreamClient.connect: this.wsConnection.connect()\");\n                // if WSFallback is enabled, ws connect should timeout faster so fallback can try\n                return await this.wsConnection.connect(this.options.enableWSFallback ? this.defaultWSTimeoutWithFallback : this.defaultWSTimeout);\n            } catch (err) {\n                // run fallback only if it's WS/Network error and not a normal API error\n                // make sure browser is online before even trying the longpoll\n                if (this.options.enableWSFallback && // @ts-ignore\n                isWSFailure(err) && isOnline(this.logger)) {\n                    this.logger(\"warn\", \"client:connect() - WS failed, fallback to longpoll\");\n                    this.dispatchEvent({\n                        type: \"transport.changed\",\n                        mode: \"longpoll\"\n                    });\n                    this.wsConnection._destroyCurrentWSConnection();\n                    this.wsConnection.disconnect().then(); // close WS so no retry\n                    this.wsFallback = new WSConnectionFallback(this);\n                    return await this.wsFallback.connect();\n                }\n                throw err;\n            }\n        };\n        /**\n         * Check the connectivity with server for warmup purpose.\n         *\n         * @private\n         */ this._sayHi = ()=>{\n            const client_request_id = randomId();\n            const opts = {\n                headers: axios__WEBPACK_IMPORTED_MODULE_1__.AxiosHeaders.from({\n                    \"x-client-request-id\": client_request_id\n                })\n            };\n            this.doAxiosRequest(\"get\", this.baseURL + \"/hi\", null, opts).catch((e)=>{\n                if (this.options.enableInsights) {\n                    postInsights(\"http_hi_failed\", {\n                        api_key: this.key,\n                        err: e,\n                        client_request_id\n                    });\n                }\n            });\n        };\n        this.getUserAgent = ()=>{\n            const version = \"1.7.3\";\n            return this.userAgent || `stream-video-javascript-client-${this.node ? \"node\" : \"browser\"}-${version}`;\n        };\n        this.setUserAgent = (userAgent)=>{\n            this.userAgent = userAgent;\n        };\n        /**\n         * _isUsingServerAuth - Returns true if we're using server side auth\n         */ this._isUsingServerAuth = ()=>!!this.secret;\n        this._enrichAxiosOptions = (options = {\n            params: {},\n            headers: {},\n            config: {}\n        })=>{\n            const token = options.publicEndpoint && !this.user ? undefined : this._getToken();\n            const authorization = token ? {\n                Authorization: token\n            } : undefined;\n            if (!options.headers?.[\"x-client-request-id\"]) {\n                options.headers = {\n                    ...options.headers,\n                    \"x-client-request-id\": randomId()\n                };\n            }\n            return {\n                params: {\n                    user_id: this.userID,\n                    connection_id: this._getConnectionID(),\n                    api_key: this.key,\n                    ...options.params\n                },\n                headers: {\n                    ...authorization,\n                    \"stream-auth-type\": options.publicEndpoint && !this.user ? \"anonymous\" : this.getAuthType(),\n                    \"X-Stream-Client\": this.getUserAgent(),\n                    ...options.headers\n                },\n                ...options.config,\n                ...this.options.axiosRequestConfig\n            };\n        };\n        this._getToken = ()=>{\n            if (!this.tokenManager) return null;\n            return this.tokenManager.getToken();\n        };\n        /**\n         * encode ws url payload\n         * @private\n         * @returns json string\n         */ this._buildWSPayload = (client_request_id)=>{\n            return JSON.stringify({\n                user_id: this.userID,\n                user_details: this._user,\n                client_request_id\n            });\n        };\n        this.updateNetworkConnectionStatus = (event)=>{\n            if (event.type === \"offline\") {\n                this.logger(\"debug\", \"device went offline\");\n                this.dispatchEvent({\n                    type: \"network.changed\",\n                    online: false\n                });\n            } else if (event.type === \"online\") {\n                this.logger(\"debug\", \"device went online\");\n                this.dispatchEvent({\n                    type: \"network.changed\",\n                    online: true\n                });\n            }\n        };\n        // set the key\n        this.key = key;\n        // set the secret\n        this.secret = options?.secret;\n        // set the options... and figure out defaults...\n        const inputOptions = options ? options : {\n            browser: \"undefined\" !== \"undefined\"\n        };\n        this.browser = inputOptions.browser || \"undefined\" !== \"undefined\";\n        this.node = !this.browser;\n        if (this.browser) {\n            this.locationHint = getLocationHint(options?.locationHintUrl, options?.locationHintTimeout);\n        }\n        this.options = {\n            timeout: 5000,\n            withCredentials: false,\n            warmUp: false,\n            ...inputOptions\n        };\n        if (this.node && !this.options.httpsAgent) {\n            this.options.httpsAgent = new (https__WEBPACK_IMPORTED_MODULE_4___default().Agent)({\n                keepAlive: true,\n                keepAliveMsecs: 3000\n            });\n        }\n        this.setBaseURL(this.options.baseURL || \"https://video.stream-io-api.com/video\");\n        if (typeof process !== \"undefined\" && \"env\" in process && process.env.STREAM_LOCAL_TEST_RUN) {\n            this.setBaseURL(\"http://localhost:3030/video\");\n        }\n        if (typeof process !== \"undefined\" && \"env\" in process && process.env.STREAM_LOCAL_TEST_HOST) {\n            this.setBaseURL(`http://${process.env.STREAM_LOCAL_TEST_HOST}/video`);\n        }\n        this.axiosInstance = axios__WEBPACK_IMPORTED_MODULE_34__[\"default\"].create({\n            ...this.options,\n            baseURL: this.baseURL\n        });\n        // WS connection is initialized when setUser is called\n        this.wsConnection = null;\n        this.wsPromise = null;\n        this.setUserPromise = null;\n        // mapping between channel groups and configs\n        this.anonymous = false;\n        this.persistUserOnConnectionFailure = this.options?.persistUserOnConnectionFailure;\n        // If it is a server-side client, then lets initialize the tokenManager, since token will be\n        // generated from secret.\n        this.tokenManager = new TokenManager(this.secret);\n        this.consecutiveFailures = 0;\n        this.insightMetrics = new InsightMetrics();\n        this.defaultWSTimeoutWithFallback = 6000;\n        this.defaultWSTimeout = 15000;\n        this.logger = isFunction(inputOptions.logger) ? inputOptions.logger : ()=>null;\n    }\n}\n/**\n * A `StreamVideoClient` instance lets you communicate with our API, and authenticate users.\n */ class StreamVideoClient {\n    constructor(apiKeyOrArgs, opts){\n        this.logLevel = \"warn\";\n        this.eventHandlersToUnregister = [];\n        /**\n         * Connects the given user to the client.\n         * Only one user can connect at a time, if you want to change users, call `disconnectUser` before connecting a new user.\n         * If the connection is successful, the connected user [state variable](#readonlystatestore) will be updated accordingly.\n         *\n         * @param user the user to connect.\n         * @param token a token or a function that returns a token.\n         */ this.connectUser = async (user, token)=>{\n            if (user.type === \"anonymous\") {\n                user.id = \"!anon\";\n                return this.connectAnonymousUser(user, token);\n            }\n            let connectUser = ()=>{\n                return this.streamClient.connectUser(user, token);\n            };\n            if (user.type === \"guest\") {\n                connectUser = async ()=>{\n                    return this.streamClient.connectGuestUser(user);\n                };\n            }\n            this.connectionPromise = this.disconnectionPromise ? this.disconnectionPromise.then(()=>connectUser()) : connectUser();\n            this.connectionPromise?.finally(()=>this.connectionPromise = undefined);\n            const connectUserResponse = await this.connectionPromise;\n            // connectUserResponse will be void if connectUser called twice for the same user\n            if (connectUserResponse?.me) {\n                this.writeableStateStore.setConnectedUser(connectUserResponse.me);\n            }\n            this.eventHandlersToUnregister.push(this.on(\"connection.changed\", (event)=>{\n                if (event.online) {\n                    const callsToReWatch = this.writeableStateStore.calls.filter((call)=>call.watching).map((call)=>call.cid);\n                    this.logger(\"info\", `Rewatching calls after connection changed ${callsToReWatch.join(\", \")}`);\n                    if (callsToReWatch.length > 0) {\n                        this.queryCalls({\n                            watch: true,\n                            filter_conditions: {\n                                cid: {\n                                    $in: callsToReWatch\n                                }\n                            },\n                            sort: [\n                                {\n                                    field: \"cid\",\n                                    direction: 1\n                                }\n                            ]\n                        }).catch((err)=>{\n                            this.logger(\"error\", \"Failed to re-watch calls\", err);\n                        });\n                    }\n                }\n            }));\n            this.eventHandlersToUnregister.push(this.on(\"call.created\", (event)=>{\n                const { call, members } = event;\n                if (user.id === call.created_by.id) {\n                    this.logger(\"warn\", \"Received `call.created` sent by the current user\");\n                    return;\n                }\n                this.logger(\"info\", `New call created and registered: ${call.cid}`);\n                const newCall = new Call({\n                    streamClient: this.streamClient,\n                    type: call.type,\n                    id: call.id,\n                    members,\n                    clientStore: this.writeableStateStore\n                });\n                newCall.state.updateFromCallResponse(call);\n                this.writeableStateStore.registerCall(newCall);\n            }));\n            this.eventHandlersToUnregister.push(this.on(\"call.ring\", async (event)=>{\n                const { call, members } = event;\n                if (user.id === call.created_by.id) {\n                    this.logger(\"debug\", \"Received `call.ring` sent by the current user so ignoring the event\");\n                    return;\n                }\n                // The call might already be tracked by the client,\n                // if `call.created` was received before `call.ring`.\n                // In that case, we cleanup the already tracked call.\n                const prevCall = this.writeableStateStore.findCall(call.type, call.id);\n                await prevCall?.leave({\n                    reason: \"cleaning-up in call.ring\"\n                });\n                // we create a new call\n                const theCall = new Call({\n                    streamClient: this.streamClient,\n                    type: call.type,\n                    id: call.id,\n                    members,\n                    clientStore: this.writeableStateStore,\n                    ringing: true\n                });\n                theCall.state.updateFromCallResponse(call);\n                // we fetch the latest metadata for the call from the server\n                await theCall.get();\n                this.writeableStateStore.registerCall(theCall);\n            }));\n            return connectUserResponse;\n        };\n        /**\n         * Disconnects the currently connected user from the client.\n         *\n         * If the connection is successfully disconnected, the connected user [state variable](#readonlystatestore) will be updated accordingly\n         *\n         * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n         *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n         */ this.disconnectUser = async (timeout)=>{\n            if (!this.streamClient.user && !this.connectionPromise) {\n                return;\n            }\n            const userId = this.streamClient.user?.id;\n            const apiKey = this.streamClient.key;\n            const disconnectUser = ()=>this.streamClient.disconnectUser(timeout);\n            this.disconnectionPromise = this.connectionPromise ? this.connectionPromise.then(()=>disconnectUser()) : disconnectUser();\n            this.disconnectionPromise.finally(()=>this.disconnectionPromise = undefined);\n            await this.disconnectionPromise;\n            if (userId) {\n                StreamVideoClient._instanceMap.delete(apiKey + userId);\n            }\n            this.eventHandlersToUnregister.forEach((unregister)=>unregister());\n            this.eventHandlersToUnregister = [];\n            this.writeableStateStore.setConnectedUser(undefined);\n        };\n        /**\n         * You can subscribe to WebSocket events provided by the API.\n         * To remove a subscription, call the `off` method or, execute the returned unsubscribe function.\n         * Please note that subscribing to WebSocket events is an advanced use-case, for most use-cases it should be enough to watch for changes in the reactive [state store](#readonlystatestore).\n         *\n         * @param eventName the event name or 'all'.\n         * @param callback the callback which will be called when the event is emitted.\n         * @returns an unsubscribe function.\n         */ this.on = (eventName, callback)=>{\n            return this.streamClient.on(eventName, callback);\n        };\n        /**\n         * Remove subscription for WebSocket events that were created by the `on` method.\n         *\n         * @param eventName the event name.\n         * @param callback the callback which was passed to the `on` method.\n         */ this.off = (eventName, callback)=>{\n            return this.streamClient.off(eventName, callback);\n        };\n        /**\n         * Creates a new call.\n         *\n         * @param type the type of the call.\n         * @param id the id of the call.\n         */ this.call = (type, id)=>{\n            return new Call({\n                streamClient: this.streamClient,\n                id: id,\n                type: type,\n                clientStore: this.writeableStateStore\n            });\n        };\n        /**\n         * Creates a new guest user with the given data.\n         *\n         * @param data the data for the guest user.\n         */ this.createGuestUser = async (data)=>{\n            return this.streamClient.doAxiosRequest(\"post\", \"/guest\", data, {\n                publicEndpoint: true\n            });\n        };\n        /**\n         * Will query the API for calls matching the given filters.\n         *\n         * @param data the query data.\n         */ this.queryCalls = async (data = {})=>{\n            const response = await this.streamClient.post(\"/calls\", data);\n            const calls = [];\n            for (const c of response.calls){\n                const call = new Call({\n                    streamClient: this.streamClient,\n                    id: c.call.id,\n                    type: c.call.type,\n                    members: c.members,\n                    ownCapabilities: c.own_capabilities,\n                    watching: data.watch,\n                    clientStore: this.writeableStateStore\n                });\n                call.state.updateFromCallResponse(c.call);\n                await call.applyDeviceConfig(false);\n                if (data.watch) {\n                    this.writeableStateStore.registerCall(call);\n                }\n                calls.push(call);\n            }\n            return {\n                ...response,\n                calls: calls\n            };\n        };\n        /**\n         * Retrieve the list of available call statistics reports matching a particular condition.\n         *\n         * @param data Filter and sort conditions for retrieving available call report summaries.\n         * @returns List with summary of available call reports matching the condition.\n         */ this.queryCallStats = async (data = {})=>{\n            return this.streamClient.post(`/call/stats`, data);\n        };\n        /**\n         * Returns a list of available data centers available for hosting calls.\n         */ this.edges = async ()=>{\n            return this.streamClient.get(`/edges`);\n        };\n        /**\n         * addDevice - Adds a push device for a user.\n         *\n         * @param {string} id the device id\n         * @param {string} push_provider the push provider name (eg. apn, firebase)\n         * @param {string} push_provider_name user provided push provider name\n         * @param {string} [userID] the user id (defaults to current user)\n         * @param {boolean} [voip_token] enables use of VoIP token for push notifications on iOS platform\n         */ this.addDevice = async (id, push_provider, push_provider_name, userID, voip_token)=>{\n            return await this.streamClient.post(\"/devices\", {\n                id,\n                push_provider,\n                voip_token,\n                ...userID != null ? {\n                    user_id: userID\n                } : {},\n                ...push_provider_name != null ? {\n                    push_provider_name\n                } : {}\n            });\n        };\n        /**\n         * addDevice - Adds a push device for a user.\n         *\n         * @param {string} id the device id\n         * @param {string} push_provider the push provider name (eg. apn, firebase)\n         * @param {string} push_provider_name user provided push provider name\n         * @param {string} [userID] the user id (defaults to current user)\n         */ this.addVoipDevice = async (id, push_provider, push_provider_name, userID)=>{\n            return await this.addDevice(id, push_provider, push_provider_name, userID, true);\n        };\n        /**\n         * getDevices - Returns the devices associated with a current user\n         * @param {string} [userID] User ID. Only works on serverside\n         */ this.getDevices = async (userID)=>{\n            return await this.streamClient.get(\"/devices\", userID ? {\n                user_id: userID\n            } : {});\n        };\n        /**\n         * removeDevice - Removes the device with the given id.\n         *\n         * @param {string} id The device id\n         * @param {string} [userID] The user id. Only specify this for serverside requests\n         */ this.removeDevice = async (id, userID)=>{\n            return await this.streamClient.delete(\"/devices\", {\n                id,\n                ...userID ? {\n                    user_id: userID\n                } : {}\n            });\n        };\n        /**\n         * A callback that can be used to create ringing calls from push notifications. If the call already exists, it will do nothing.\n         * @param call_cid\n         * @returns\n         */ this.onRingingCall = async (call_cid)=>{\n            // if we find the call and is already ringing, we don't need to create a new call\n            // as client would have received the call.ring state because the app had WS alive when receiving push notifications\n            let call = this.state.calls.find((c)=>c.cid === call_cid && c.ringing);\n            if (!call) {\n                // if not it means that WS is not alive when receiving the push notifications and we need to fetch the call\n                const [callType, callId] = call_cid.split(\":\");\n                call = new Call({\n                    streamClient: this.streamClient,\n                    type: callType,\n                    id: callId,\n                    clientStore: this.writeableStateStore,\n                    ringing: true\n                });\n                await call.get();\n            }\n            return call;\n        };\n        /**\n         * Connects the given anonymous user to the client.\n         *\n         * @param user the user to connect.\n         * @param tokenOrProvider a token or a function that returns a token.\n         */ this.connectAnonymousUser = async (user, tokenOrProvider)=>{\n            const connectAnonymousUser = ()=>this.streamClient.connectAnonymousUser(user, tokenOrProvider);\n            this.connectionPromise = this.disconnectionPromise ? this.disconnectionPromise.then(()=>connectAnonymousUser()) : connectAnonymousUser();\n            this.connectionPromise.finally(()=>this.connectionPromise = undefined);\n            return this.connectionPromise;\n        };\n        let logger = logToConsole;\n        let logLevel = \"warn\";\n        if (typeof apiKeyOrArgs === \"string\") {\n            logLevel = opts?.logLevel || logLevel;\n            logger = opts?.logger || logger;\n        } else {\n            logLevel = apiKeyOrArgs.options?.logLevel || logLevel;\n            logger = apiKeyOrArgs.options?.logger || logger;\n        }\n        setLogger(logger, logLevel);\n        this.logger = getLogger([\n            \"client\"\n        ]);\n        const coordinatorLogger = getLogger([\n            \"coordinator\"\n        ]);\n        if (typeof apiKeyOrArgs === \"string\") {\n            this.streamClient = new StreamClient(apiKeyOrArgs, {\n                persistUserOnConnectionFailure: true,\n                ...opts,\n                logLevel,\n                logger: coordinatorLogger\n            });\n        } else {\n            this.streamClient = new StreamClient(apiKeyOrArgs.apiKey, {\n                persistUserOnConnectionFailure: true,\n                ...apiKeyOrArgs.options,\n                logLevel,\n                logger: coordinatorLogger\n            });\n            const sdkInfo = getSdkInfo();\n            if (sdkInfo) {\n                const sdkName = SdkType[sdkInfo.type].toLowerCase();\n                const sdkVersion = `${sdkInfo.major}.${sdkInfo.minor}.${sdkInfo.patch}`;\n                const userAgent = this.streamClient.getUserAgent();\n                this.streamClient.setUserAgent(`${userAgent}-video-${sdkName}-sdk-${sdkVersion}`);\n            }\n        }\n        this.writeableStateStore = new StreamVideoWriteableStateStore();\n        this.readOnlyStateStore = new StreamVideoReadOnlyStateStore(this.writeableStateStore);\n        if (typeof apiKeyOrArgs !== \"string\") {\n            const user = apiKeyOrArgs.user;\n            const token = apiKeyOrArgs.token || apiKeyOrArgs.tokenProvider;\n            if (user) {\n                let id = user.id;\n                if (user.type === \"anonymous\") {\n                    id = \"!anon\";\n                }\n                if (id) {\n                    if (StreamVideoClient._instanceMap.has(apiKeyOrArgs.apiKey + id)) {\n                        this.logger(\"warn\", `A StreamVideoClient already exists for ${user.type === \"anonymous\" ? \"an anonymous user\" : id}; Prefer using getOrCreateInstance method`);\n                    }\n                    user.id = id;\n                    StreamVideoClient._instanceMap.set(apiKeyOrArgs.apiKey + id, this);\n                }\n                this.connectUser(user, token).catch((err)=>{\n                    this.logger(\"error\", \"Failed to connect\", err);\n                });\n            }\n        }\n    }\n    static getOrCreateInstance(args) {\n        const user = args.user;\n        if (!user.id) {\n            if (args.user.type === \"anonymous\") {\n                user.id = \"!anon\";\n            } else {\n                throw new Error(\"User ID is required for a non-anonymous user\");\n            }\n        }\n        if (!args.token && !args.tokenProvider) {\n            if (args.user.type !== \"anonymous\" && args.user.type !== \"guest\") {\n                throw new Error(\"TokenProvider or token is required for a user that is not a guest or anonymous\");\n            }\n        }\n        let instance = StreamVideoClient._instanceMap.get(args.apiKey + user.id);\n        if (!instance) {\n            instance = new StreamVideoClient({\n                ...args,\n                user\n            });\n        }\n        return instance;\n    }\n    /**\n     * Return the reactive state store, use this if you want to be notified about changes to the client state\n     */ get state() {\n        return this.readOnlyStateStore;\n    }\n}\nStreamVideoClient._instanceMap = new Map();\n //# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1jbGllbnQvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtIQTs7Q0FFRyxHQUNVLE1BQUFBLHdDQUF3QztJQUNuREMsU0FBUztJQUNUQyxVQUFVOztBQXVEWjs7Q0FFRyxHQUNVLE1BQUFDLHlDQUF5QztJQUNwREYsU0FBUztJQUNUQyxVQUFVOztBQStEWjs7Q0FFRyxHQUNVLE1BQUFFLCtCQUErQjtJQUMxQ0MsTUFBTTtJQUNOQyxPQUFPO0lBQ1BDLGNBQWM7O0FBb2lFaEI7O0NBRUcsR0FDVSxNQUFBQyxtQ0FBbUM7SUFDOUNDLFVBQVU7SUFDVkMsUUFBUTtJQUNSQyxJQUFJOztBQUtOOztDQUVHLEdBQ1UsTUFBQUMsMkNBQTJDO0lBQ3REUCxNQUFNO0lBQ05DLE9BQU87SUFDUEMsY0FBYzs7QUFLaEI7O0NBRUcsR0FDVSxNQUFBTSw2Q0FBNkM7SUFDeERSLE1BQU07SUFDTkMsT0FBTztJQUNQQyxjQUFjOztBQWtsQmhCOztDQUVHLEdBQ1UsTUFBQU8sc0NBQXNDO0lBQ2pEQyxVQUFVO0lBQ1ZDLEtBQUs7SUFDTEMsUUFBUTtJQUNSQyxRQUFROztBQXd2Q1Y7O0NBRUcsR0FDVSxNQUFBQyxvQ0FBb0M7SUFDL0NDLFdBQVc7SUFDWFgsVUFBVTtJQUNWWSxTQUFTOztBQTRDWDs7O0NBR0csR0FDVSxNQUFBQyxnQkFBZ0I7SUFDM0JDLGFBQWE7SUFDYkMscUJBQXFCO0lBQ3JCQyxhQUFhO0lBQ2JDLGlCQUFpQjtJQUNqQkMsMkJBQTJCO0lBQzNCQyxVQUFVO0lBQ1ZDLGdCQUFnQjtJQUNoQkMsV0FBVztJQUNYQyxpQkFBaUI7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RyxHQUNILElBQVlDO0FBQVosVUFBWUEsWUFBWTtJQUN0Qjs7S0FFRyxHQUNIQSxZQUFBLENBQUFBLFlBQUE7SUFDQTs7S0FFRyxHQUNIQSxZQUFBLENBQUFBLFlBQUE7SUFDQTs7S0FFRyxHQUNIQSxZQUFBLENBQUFBLFlBQUE7SUFDQTs7S0FFRyxHQUNIQSxZQUFBLENBQUFBLFlBQUE7QUFDRixHQWpCWUEsZ0JBQUFBLENBQUFBLGVBaUJYO0FBQ0Q7O0NBRUcsR0FDSCxJQUFZQztBQUFaLFVBQVlBLFNBQVM7SUFDbkI7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0FBQ0YsR0FyQllBLGFBQUFBLENBQUFBLFlBcUJYO0FBQ0Q7O0NBRUcsR0FDSCxJQUFZQztBQUFaLFVBQVlBLFNBQVM7SUFDbkI7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7O0tBRUcsR0FDSEEsU0FBQSxDQUFBQSxTQUFBO0lBQ0E7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UztnQkFDaEUsTUFBTSxJQUFJcFksTUFDUjs7O1FBSU4sSUFBSWcrRCxXQUFXakMsa0JBQWtCa0IsWUFBWSxDQUFDNTVDLEdBQUcsQ0FBQ3JOLEtBQUtnbkQsTUFBTSxHQUFHeDNDLEtBQUtTLEVBQUU7UUFDdkUsSUFBSSxDQUFDKzNDLFVBQVU7WUFDYkEsV0FBVyxJQUFJakMsa0JBQWtCO2dCQUFFLEdBQUcvbEQsSUFBSTtnQkFBRXdQO1lBQUk7O1FBRWxELE9BQU93NEM7O0lBR1Q7O0tBRUcsR0FDSCxJQUFJOTNDLFFBQUs7UUFDUCxPQUFPLElBQUksQ0FBQzQzQyxrQkFBa0I7OztBQWhJakIvQixrQkFBQWtCLFlBQVksR0FBbUMsSUFBSS81QyIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZ2VuL2Nvb3JkaW5hdG9yL2luZGV4LnRzPzdjZWEiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9jb29yZGluYXRvci9jb25uZWN0aW9uL3R5cGVzLnRzPzdjMjciLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9nZW4vZ29vZ2xlL3Byb3RvYnVmL3N0cnVjdC50cz9kZjY3Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZ2VuL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAudHM/MmUxYyIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscy50cz8yZGRlIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZ2VuL3ZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbC50cz9jYzk2Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMudHM/N2M3YSIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3R5cGVzLnRzPzQ3OWQiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9nZW4vdmlkZW8vc2Z1L3NpZ25hbF9ycGMvc2lnbmFsLmNsaWVudC50cz9hZmVkIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvcnBjL2NyZWF0ZUNsaWVudC50cz9jNmE4Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi91dGlscy50cz82ODY2Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvaGVscGVycy9wbGF0Zm9ybXMudHM/M2QzMCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2xvZ2dlci50cz84NzQ2Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvcnBjL3JldHJ5YWJsZS50cz82ZDNjIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvY2xpZW50LWRldGFpbHMudHM/Mzc4ZSIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3J0Yy9jb2RlY3MudHM/ZGViNSIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3J0Yy9EaXNwYXRjaGVyLnRzP2QwMWUiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ydGMvSWNlVHJpY2tsZUJ1ZmZlci50cz9mZjZlIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvcnRjL2hlbHBlcnMvaWNlQ2FuZGlkYXRlLnRzPzExYjMiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ydGMvdmlkZW9MYXllcnMudHM/YmI3MCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2hlbHBlcnMvZW5zdXJlRXhoYXVzdGVkLnRzP2Y0ZDEiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ydGMvaGVscGVycy90cmFja3MudHM/ZTY5OCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2hlbHBlcnMvY29uY3VycmVuY3kudHM/ZGUxZCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3N0b3JlL3J4VXRpbHMudHM/Nzk0MSIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3N0b3JlL0NhbGxpbmdTdGF0ZS50cz9jYTIzIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvc3RvcmUvc3RhdGVTdG9yZS50cz8wMThhIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvc29ydGluZy9jb21wYXJhdG9yLnRzPzhhNzIiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9oZWxwZXJzL3BhcnRpY2lwYW50VXRpbHMudHM/ODk4OCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3NvcnRpbmcvcGFydGljaXBhbnRzLnRzPzU4NWIiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9zb3J0aW5nL3ByZXNldHMudHM/YmM0OCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3N0b3JlL0NhbGxTdGF0ZS50cz81N2I4Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvaGVscGVycy9zZHAtbXVuZ2luZy50cz9mZGNmIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvcnRjL1B1Ymxpc2hlci50cz80MGJkIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvcnRjL1N1YnNjcmliZXIudHM/NjhkMyIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3J0Yy9zaWduYWwudHM/ZDcxYiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2hlbHBlcnMvd2l0aFJlc29sdmVycy50cz80NDBjIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvU3RyZWFtU2Z1Q2xpZW50LnRzPzVkMjMiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ydGMvaGVscGVycy9ydGNDb25maWd1cmF0aW9uLnRzP2RhYTciLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ldmVudHMvY2FsbC50cz83NGYzIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZXZlbnRzL2NhbGwtcGVybWlzc2lvbnMudHM/OTlmMCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2V2ZW50cy9pbnRlcm5hbC50cz9hZTdiIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZXZlbnRzL211dGVzLnRzPzIwOGYiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ldmVudHMvcGFydGljaXBhbnQudHM/OWY1YyIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2V2ZW50cy9zcGVha2VyLnRzPzY2MDMiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9ldmVudHMvY2FsbEV2ZW50SGFuZGxlcnMudHM/MjU5YiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL3N0YXRzL3V0aWxzLnRzPzQwN2UiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9zdGF0cy9zdGF0ZVN0b3JlU3RhdHNSZXBvcnRlci50cz9mM2EwIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvc3RhdHMvU2Z1U3RhdHNSZXBvcnRlci50cz8yMWM1Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvaGVscGVycy9WaWV3cG9ydFRyYWNrZXIudHM/Nzg0YyIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2hlbHBlcnMvYnJvd3NlcnMudHM/YTg0NiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2hlbHBlcnMvRHluYXNjYWxlTWFuYWdlci50cz80MTc4Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvcGVybWlzc2lvbnMvUGVybWlzc2lvbnNDb250ZXh0LnRzPzhhOGUiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9DYWxsVHlwZS50cz9hYjk3Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZGV2aWNlcy9Ccm93c2VyUGVybWlzc2lvbi50cz8xYmY3Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvaGVscGVycy9sYXp5LnRzP2EzYTQiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9kZXZpY2VzL2RldmljZXMudHM/YjQ3ZiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2RldmljZXMvSW5wdXRNZWRpYURldmljZU1hbmFnZXIudHM/ZTYxMCIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2RldmljZXMvSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZS50cz9lYTc3Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZGV2aWNlcy9DYW1lcmFNYW5hZ2VyU3RhdGUudHM/MmM2MiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2RldmljZXMvQ2FtZXJhTWFuYWdlci50cz9lOGEyIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZGV2aWNlcy9NaWNyb3Bob25lTWFuYWdlclN0YXRlLnRzPzNmMTMiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9oZWxwZXJzL3NvdW5kLWRldGVjdG9yLnRzP2NiMmYiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9oZWxwZXJzL1JOU3BlZWNoRGV0ZWN0b3IudHM/NmViNSIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2RldmljZXMvTWljcm9waG9uZU1hbmFnZXIudHM/Zjc2ZiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2RldmljZXMvU2NyZWVuU2hhcmVTdGF0ZS50cz83OWRmIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvZGV2aWNlcy9TY3JlZW5TaGFyZU1hbmFnZXIudHM/MTA4MyIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2RldmljZXMvU3BlYWtlclN0YXRlLnRzPzI5NjgiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9kZXZpY2VzL1NwZWFrZXJNYW5hZ2VyLnRzPzIxNDUiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9DYWxsLnRzPzdiNWUiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9jb29yZGluYXRvci9jb25uZWN0aW9uL2luc2lnaHRzLnRzPzVlOWMiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9jb29yZGluYXRvci9jb25uZWN0aW9uL2Nvbm5lY3Rpb24udHM/NjA2ZiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vYmFzZTY0LnRzPzA1ZjYiLCJ3ZWJwYWNrOi8vem9vbWllLy4uLy4uL3NyYy9jb29yZGluYXRvci9jb25uZWN0aW9uL3NpZ25pbmcudHM/OWVjMyIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdG9rZW5fbWFuYWdlci50cz8wM2UyIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi9lcnJvcnMudHM/MjEyNiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vY29ubmVjdGlvbl9mYWxsYmFjay50cz81NGMwIiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi9sb2NhdGlvbi50cz9jZjA5Iiwid2VicGFjazovL3pvb21pZS8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi9jbGllbnQudHM/M2YxZiIsIndlYnBhY2s6Ly96b29taWUvLi4vLi4vc3JjL1N0cmVhbVZpZGVvQ2xpZW50LnRzPzE0NDUiXSwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEFQSUVycm9yXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQVBJRXJyb3Ige1xuICAvKipcbiAgICogUmVzcG9uc2UgSFRUUCBzdGF0dXMgY29kZVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgQVBJRXJyb3JcbiAgICovXG4gIFN0YXR1c0NvZGU6IG51bWJlcjtcbiAgLyoqXG4gICAqIEFQSSBlcnJvciBjb2RlXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBBUElFcnJvclxuICAgKi9cbiAgY29kZTogbnVtYmVyO1xuICAvKipcbiAgICogQWRkaXRpb25hbCBlcnJvci1zcGVjaWZpYyBpbmZvcm1hdGlvblxuICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICogQG1lbWJlcm9mIEFQSUVycm9yXG4gICAqL1xuICBkZXRhaWxzOiBBcnJheTxudW1iZXI+O1xuICAvKipcbiAgICogUmVxdWVzdCBkdXJhdGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQVBJRXJyb3JcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBBZGRpdGlvbmFsIGVycm9yIGluZm9cbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogc3RyaW5nOyB9fVxuICAgKiBAbWVtYmVyb2YgQVBJRXJyb3JcbiAgICovXG4gIGV4Y2VwdGlvbl9maWVsZHM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAvKipcbiAgICogTWVzc2FnZSBkZXNjcmliaW5nIGFuIGVycm9yXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBUElFcnJvclxuICAgKi9cbiAgbWVzc2FnZTogc3RyaW5nO1xuICAvKipcbiAgICogVVJMIHdpdGggYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQVBJRXJyb3JcbiAgICovXG4gIG1vcmVfaW5mbzogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBY2NlcHRDYWxsUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBY2NlcHRDYWxsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEFjY2VwdENhbGxSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQXVkaW9TZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdWRpb1NldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhY2Nlc3NfcmVxdWVzdF9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBdWRpb1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZGVmYXVsdF9kZXZpY2U6IEF1ZGlvU2V0dGluZ3NSZXF1ZXN0RGVmYXVsdERldmljZUVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBtaWNfZGVmYXVsdF9vbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Tm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBub2lzZV9jYW5jZWxsYXRpb24/OiBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBBdWRpb1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgb3B1c19kdHhfZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICByZWR1bmRhbnRfY29kaW5nX2VuYWJsZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBBdWRpb1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgc3BlYWtlcl9kZWZhdWx0X29uPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBBdWRpb1NldHRpbmdzUmVxdWVzdERlZmF1bHREZXZpY2VFbnVtID0ge1xuICBTUEVBS0VSOiAnc3BlYWtlcicsXG4gIEVBUlBJRUNFOiAnZWFycGllY2UnLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0RGVmYXVsdERldmljZUVudW0gPVxuICAodHlwZW9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0RGVmYXVsdERldmljZUVudW0pW2tleW9mIHR5cGVvZiBBdWRpb1NldHRpbmdzUmVxdWVzdERlZmF1bHREZXZpY2VFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBdWRpb1NldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdWRpb1NldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBBdWRpb1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBkZWZhdWx0X2RldmljZTogQXVkaW9TZXR0aW5nc1Jlc3BvbnNlRGVmYXVsdERldmljZUVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgbWljX2RlZmF1bHRfb246IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Tm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgbm9pc2VfY2FuY2VsbGF0aW9uPzogTm9pc2VDYW5jZWxsYXRpb25TZXR0aW5ncztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBvcHVzX2R0eF9lbmFibGVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBBdWRpb1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHJlZHVuZGFudF9jb2RpbmdfZW5hYmxlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBzcGVha2VyX2RlZmF1bHRfb246IGJvb2xlYW47XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgQXVkaW9TZXR0aW5nc1Jlc3BvbnNlRGVmYXVsdERldmljZUVudW0gPSB7XG4gIFNQRUFLRVI6ICdzcGVha2VyJyxcbiAgRUFSUElFQ0U6ICdlYXJwaWVjZScsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXVkaW9TZXR0aW5nc1Jlc3BvbnNlRGVmYXVsdERldmljZUVudW0gPVxuICAodHlwZW9mIEF1ZGlvU2V0dGluZ3NSZXNwb25zZURlZmF1bHREZXZpY2VFbnVtKVtrZXlvZiB0eXBlb2YgQXVkaW9TZXR0aW5nc1Jlc3BvbnNlRGVmYXVsdERldmljZUVudW1dO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEJhY2tzdGFnZVNldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJhY2tzdGFnZVNldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEJhY2tzdGFnZVNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgQmFja3N0YWdlU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBqb2luX2FoZWFkX3RpbWVfc2Vjb25kcz86IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmFja3N0YWdlU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJhY2tzdGFnZVNldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBCYWNrc3RhZ2VTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBlbmFibGVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEJhY2tzdGFnZVNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGpvaW5fYWhlYWRfdGltZV9zZWNvbmRzPzogbnVtYmVyO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBCbG9ja0xpc3RPcHRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmxvY2tMaXN0T3B0aW9ucyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQmxvY2tMaXN0T3B0aW9uc1xuICAgKi9cbiAgYmVoYXZpb3I6IEJsb2NrTGlzdE9wdGlvbnNCZWhhdmlvckVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQmxvY2tMaXN0T3B0aW9uc1xuICAgKi9cbiAgYmxvY2tsaXN0OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgQmxvY2tMaXN0T3B0aW9uc0JlaGF2aW9yRW51bSA9IHtcbiAgRkxBRzogJ2ZsYWcnLFxuICBCTE9DSzogJ2Jsb2NrJyxcbiAgU0hBRE9XX0JMT0NLOiAnc2hhZG93X2Jsb2NrJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBCbG9ja0xpc3RPcHRpb25zQmVoYXZpb3JFbnVtID1cbiAgKHR5cGVvZiBCbG9ja0xpc3RPcHRpb25zQmVoYXZpb3JFbnVtKVtrZXlvZiB0eXBlb2YgQmxvY2tMaXN0T3B0aW9uc0JlaGF2aW9yRW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmxvY2tVc2VyUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrVXNlclJlcXVlc3Qge1xuICAvKipcbiAgICogdGhlIHVzZXIgdG8gYmxvY2tcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEJsb2NrVXNlclJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmxvY2tVc2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCbG9ja1VzZXJSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEJsb2NrVXNlclJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgdG8gY2FsbCBwYXJ0aWNpcGFudHMgdG8gbm90aWZ5IHdoZW4gYSB1c2VyIGlzIGJsb2NrZWQgb24gYSBjYWxsLCBjbGllbnRzIGNhbiB1c2UgdGhpcyBldmVudCB0byBzaG93IGEgbm90aWZpY2F0aW9uLlxuICogSWYgdGhlIHVzZXIgaXMgdGhlIGN1cnJlbnQgdXNlciwgdGhlIGNsaWVudCBzaG91bGQgbGVhdmUgdGhlIGNhbGwgc2NyZWVuIGFzIHdlbGxcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmxvY2tlZFVzZXJFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrZWRVc2VyRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIGJsb2NrZWRfYnlfdXNlcj86IFVzZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBCbG9ja2VkVXNlckV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuYmxvY2tlZF91c2VyXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBCbG9ja2VkVXNlckV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQmxvY2tlZFVzZXJFdmVudFxuICAgKi9cbiAgdXNlcjogVXNlclJlc3BvbnNlO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0hMU1NldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIEJyb2FkY2FzdFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgaGxzPzogSExTU2V0dGluZ3NSZXF1ZXN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBCcm9hZGNhc3RTZXR0aW5nc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnJvYWRjYXN0U2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEJyb2FkY2FzdFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7SExTU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEJyb2FkY2FzdFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGhsczogSExTU2V0dGluZ3NSZXNwb25zZTtcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSB1c2VyIGFjY2VwdHMgYSBub3RpZmljYXRpb24gdG8gam9pbiBhIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxBY2NlcHRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEFjY2VwdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxBY2NlcHRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEFjY2VwdGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEFjY2VwdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuYWNjZXB0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxBY2NlcHRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEFjY2VwdGVkRXZlbnRcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICogQ2FsbENsb3NlZENhcHRpb24gcmVwcmVzZW50cyBhIGNsb3NlZCBjYXB0aW9uIG9mIGEgY2FsbC5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbENsb3NlZENhcHRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsQ2xvc2VkQ2FwdGlvbiB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbENsb3NlZENhcHRpb25cbiAgICovXG4gIGVuZF90aW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbENsb3NlZENhcHRpb25cbiAgICovXG4gIHNwZWFrZXJfaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsQ2xvc2VkQ2FwdGlvblxuICAgKi9cbiAgc3RhcnRfdGltZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxDbG9zZWRDYXB0aW9uXG4gICAqL1xuICB0ZXh0OiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgY2FsbCBpcyBjcmVhdGVkLiBDbGllbnRzIHJlY2VpdmluZyB0aGlzIGV2ZW50IHNob3VsZCBjaGVjayBpZiB0aGUgcmluZ2luZ1xuICogZmllbGQgaXMgc2V0IHRvIHRydWUgYW5kIGlmIHNvLCBzaG93IHRoZSBjYWxsIHNjcmVlblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsQ3JlYXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbENyZWF0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbENyZWF0ZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxDcmVhdGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbENyZWF0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogdGhlIG1lbWJlcnMgYWRkZWQgdG8gdGhpcyBjYWxsXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBDYWxsQ3JlYXRlZEV2ZW50XG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmNyZWF0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxDcmVhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBjYWxsIGlzIGRlbGV0ZWQuIENsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIGxlYXZlIHRoZSBjYWxsIHNjcmVlblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsRGVsZXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbERlbGV0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbERlbGV0ZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxEZWxldGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbERlbGV0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5kZWxldGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsRGVsZXRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgY2FsbCBpcyBtYXJrIGFzIGVuZGVkIGZvciBhbGwgaXRzIHBhcnRpY2lwYW50cy4gQ2xpZW50cyByZWNlaXZpbmcgdGhpcyBldmVudCBzaG91bGQgbGVhdmUgdGhlIGNhbGwgc2NyZWVuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxFbmRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEVuZGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxFbmRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEVuZGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEVuZGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuZW5kZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxFbmRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEVuZGVkRXZlbnRcbiAgICovXG4gIHVzZXI/OiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEV2ZW50XG4gICAqL1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENhbGxFdmVudFxuICAgKi9cbiAgZW5kX3RpbWVzdGFtcDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENhbGxFdmVudFxuICAgKi9cbiAgc2V2ZXJpdHk6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDYWxsRXZlbnRcbiAgICovXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBITFMgYnJvYWRjYXN0aW5nIGhhcyBmYWlsZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nRmFpbGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmhsc19icm9hZGNhc3RpbmdfZmFpbGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nRmFpbGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gSExTIGJyb2FkY2FzdGluZyBoYXMgc3RhcnRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsSExTQnJvYWRjYXN0aW5nU3RhcnRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudFxuICAgKi9cbiAgaGxzX3BsYXlsaXN0X3VybDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5obHNfYnJvYWRjYXN0aW5nX3N0YXJ0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxITFNCcm9hZGNhc3RpbmdTdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gSExTIGJyb2FkY2FzdGluZyBoYXMgc3RvcHBlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsSExTQnJvYWRjYXN0aW5nU3RvcHBlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0b3BwZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nU3RvcHBlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmhsc19icm9hZGNhc3Rpbmdfc3RvcHBlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsSW5ncmVzc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEluZ3Jlc3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7UlRNUEluZ3Jlc3N9XG4gICAqIEBtZW1iZXJvZiBDYWxsSW5ncmVzc1Jlc3BvbnNlXG4gICAqL1xuICBydG1wOiBSVE1QSW5ncmVzcztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBjYWxsIGlzIHN0YXJ0ZWQuIENsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIHN0YXJ0IHRoZSBjYWxsLlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsTGl2ZVN0YXJ0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxMaXZlU3RhcnRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTGl2ZVN0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxMaXZlU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxMaXZlU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmxpdmVfc3RhcnRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbExpdmVTdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gb25lIG9yIG1vcmUgbWVtYmVycyBhcmUgYWRkZWQgdG8gYSBjYWxsXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxNZW1iZXJBZGRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbE1lbWJlckFkZGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJBZGRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlckFkZGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlckFkZGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIHRoZSBtZW1iZXJzIGFkZGVkIHRvIHRoaXMgY2FsbFxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlckFkZGVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwubWVtYmVyX2FkZGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyQWRkZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBvbmUgb3IgbW9yZSBtZW1iZXJzIGFyZSByZW1vdmVkIGZyb20gYSBjYWxsXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxNZW1iZXJSZW1vdmVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlclJlbW92ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgbGlzdCBvZiBtZW1iZXIgSURzIHJlbW92ZWQgZnJvbSB0aGUgY2FsbFxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJSZW1vdmVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLm1lbWJlcl9yZW1vdmVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIG9uZSBvciBtb3JlIG1lbWJlcnMgYXJlIHVwZGF0ZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbE1lbWJlclVwZGF0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxNZW1iZXJVcGRhdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyVXBkYXRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIG1lbWJlcnMgdGhhdCB3ZXJlIHVwZGF0ZWRcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwubWVtYmVyX3VwZGF0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gb25lIG9yIG1vcmUgbWVtYmVycyBnZXQgaXRzIHJvbGUgdXBkYXRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGNhcGFiaWxpdGllcyBieSByb2xlIGZvciB0aGlzIGNhbGxcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPjsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50XG4gICAqL1xuICBjYXBhYmlsaXRpZXNfYnlfcm9sZTogeyBba2V5OiBzdHJpbmddOiBBcnJheTxzdHJpbmc+IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlclVwZGF0ZWRQZXJtaXNzaW9uRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIG1lbWJlcnMgdGhhdCB3ZXJlIHVwZGF0ZWRcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50XG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLm1lbWJlcl9hZGRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlclVwZGF0ZWRQZXJtaXNzaW9uRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHRvIGNhbGwgbWVtYmVycyB3aG8gZGlkIG5vdCBhY2NlcHQvcmVqZWN0L2pvaW4gdGhlIGNhbGwgdG8gbm90aWZ5IHRoZXkgbWlzc2VkIHRoZSBjYWxsXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxNaXNzZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxNaXNzZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1pc3NlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1pc3NlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNaXNzZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogTGlzdCBvZiBtZW1iZXJzIHdobyBtaXNzZWQgdGhlIGNhbGxcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxNaXNzZWRFdmVudFxuICAgKi9cbiAgbWVtYmVyczogQXJyYXk8TWVtYmVyUmVzcG9uc2U+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDYWxsTWlzc2VkRXZlbnRcbiAgICovXG4gIG5vdGlmeV91c2VyOiBib29sZWFuO1xuICAvKipcbiAgICogQ2FsbCBzZXNzaW9uIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWlzc2VkRXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwubm90aWZpY2F0aW9uXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWlzc2VkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWlzc2VkRXZlbnRcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHRvIGFsbCBjYWxsIG1lbWJlcnMgdG8gbm90aWZ5IHRoZXkgYXJlIGdldHRpbmcgY2FsbGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxOb3RpZmljYXRpb25FdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxOb3RpZmljYXRpb25FdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxOb3RpZmljYXRpb25FdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogQ2FsbCBtZW1iZXJzXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBDYWxsTm90aWZpY2F0aW9uRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIENhbGwgc2Vzc2lvbiBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICBzZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLm5vdGlmaWNhdGlvblwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFBhcnRpY2lwYW50UmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlXG4gICAqL1xuICBqb2luZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUGFydGljaXBhbnRSZXNwb25zZVxuICAgKi9cbiAgcm9sZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlXG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFBhcnRpY2lwYW50UmVzcG9uc2VcbiAgICovXG4gIHVzZXJfc2Vzc2lvbl9pZDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHJlYWN0aW9uIGlzIHNlbnQgaW4gYSBjYWxsLCBjbGllbnRzIHNob3VsZCB1c2UgdGhpcyB0byBzaG93IHRoZSByZWFjdGlvbiBpbiB0aGUgY2FsbCBzY3JlZW5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlYWN0aW9uRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVhY3Rpb25FdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlYWN0aW9uRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlYWN0aW9uRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtSZWFjdGlvblJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlYWN0aW9uRXZlbnRcbiAgICovXG4gIHJlYWN0aW9uOiBSZWFjdGlvblJlc3BvbnNlO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWFjdGlvbl9uZXdcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWFjdGlvbkV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIENhbGxSZWNvcmRpbmcgcmVwcmVzZW50cyBhIHJlY29yZGluZyBvZiBhIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVjb3JkaW5nIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nXG4gICAqL1xuICBlbmRfdGltZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdcbiAgICovXG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1xuICAgKi9cbiAgc3RhcnRfdGltZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdcbiAgICovXG4gIHVybDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBjYWxsIHJlY29yZGluZyBoYXMgZmFpbGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdGYWlsZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdGYWlsZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ0ZhaWxlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdGYWlsZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWNvcmRpbmdfZmFpbGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nRmFpbGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gY2FsbCByZWNvcmRpbmcgaXMgcmVhZHlcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlY29yZGluZ1JlYWR5RXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVjb3JkaW5nUmVhZHlFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1JlYWR5RXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlY29yZGluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdSZWFkeUV2ZW50XG4gICAqL1xuICBjYWxsX3JlY29yZGluZzogQ2FsbFJlY29yZGluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nUmVhZHlFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWNvcmRpbmdfcmVhZHlcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdSZWFkeUV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGNhbGwgcmVjb3JkaW5nIGhhcyBzdGFydGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdTdGFydGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVjb3JkaW5nU3RhcnRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdTdGFydGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwucmVjb3JkaW5nX3N0YXJ0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdTdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gY2FsbCByZWNvcmRpbmcgaGFzIHN0b3BwZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdTdG9wcGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdTdG9wcGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWNvcmRpbmdfc3RvcHBlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHVzZXIgcmVqZWN0cyBhIG5vdGlmaWNhdGlvbiB0byBqb2luIGEgY2FsbC5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlamVjdGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVqZWN0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlamVjdGVkRXZlbnRcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVqZWN0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVqZWN0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWplY3RlZEV2ZW50XG4gICAqL1xuICByZWFzb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLnJlamVjdGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVqZWN0ZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxSZWplY3RlZEV2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlcXVlc3RcbiAgICovXG4gIGN1c3RvbT86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVxdWVzdD59XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVxdWVzdFxuICAgKi9cbiAgbWVtYmVycz86IEFycmF5PE1lbWJlclJlcXVlc3Q+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVxdWVzdFxuICAgKi9cbiAgc2V0dGluZ3Nfb3ZlcnJpZGU/OiBDYWxsU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZXF1ZXN0XG4gICAqL1xuICBzdGFydHNfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlcXVlc3RcbiAgICovXG4gIHRlYW0/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENhbGxSZXF1ZXN0XG4gICAqL1xuICB2aWRlbz86IGJvb2xlYW47XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjYWxsXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgYmFja3N0YWdlOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGJsb2NrZWRfdXNlcl9pZHM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIGEgY2FsbCAoPHR5cGU+OjxpZD4pXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNpZDogc3RyaW5nO1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGNyZWF0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYnk6IFVzZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGN1cnJlbnRfc2Vzc2lvbl9pZDogc3RyaW5nO1xuICAvKipcbiAgICogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgb2JqZWN0XG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgY3VzdG9tOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0VncmVzc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBlZ3Jlc3M6IEVncmVzc1Jlc3BvbnNlO1xuICAvKipcbiAgICogRGF0ZS90aW1lIHdoZW4gdGhlIGNhbGwgZW5kZWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgZW5kZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDYWxsIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbEluZ3Jlc3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgaW5ncmVzczogQ2FsbEluZ3Jlc3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGpvaW5fYWhlYWRfdGltZV9zZWNvbmRzPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIHJlY29yZGluZzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsU2Vzc2lvblJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBzZXNzaW9uPzogQ2FsbFNlc3Npb25SZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgc2V0dGluZ3M6IENhbGxTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICogRGF0ZS90aW1lIHdoZW4gdGhlIGNhbGwgd2lsbCBzdGFydFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBzdGFydHNfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICB0ZWFtPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RodW1ibmFpbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICB0aHVtYm5haWxzPzogVGh1bWJuYWlsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgdHJhbnNjcmliaW5nOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgY2FsbFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgdGhlIGxhc3QgdXBkYXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHRvIGFsbCBjYWxsIG1lbWJlcnMgdG8gbm90aWZ5IHRoZXkgYXJlIGdldHRpbmcgY2FsbGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSaW5nRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmluZ0V2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmluZ0V2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJpbmdFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmluZ0V2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDYWxsIG1lbWJlcnNcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxSaW5nRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIENhbGwgc2Vzc2lvbiBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJpbmdFdmVudFxuICAgKi9cbiAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5ub3RpZmljYXRpb25cIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSaW5nRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmluZ0V2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENhbGxSaW5nRXZlbnRcbiAgICovXG4gIHZpZGVvOiBib29sZWFuO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIGNhbGwgc2Vzc2lvbiBlbmRzXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxTZXNzaW9uRW5kZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTZXNzaW9uRW5kZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25FbmRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25FbmRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uRW5kZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogQ2FsbCBzZXNzaW9uIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvbkVuZGVkRXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuc2Vzc2lvbl9lbmRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25FbmRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gdGhlIHBhcnRpY2lwYW50IGNvdW50cyBpbiBhIGNhbGwgc2Vzc2lvbiBhcmUgdXBkYXRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWRFdmVudFxuICAgKi9cbiAgYW5vbnltb3VzX3BhcnRpY2lwYW50X2NvdW50OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBudW1iZXI7IH19XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Q291bnRzVXBkYXRlZEV2ZW50XG4gICAqL1xuICBwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcbiAgLyoqXG4gICAqIENhbGwgc2Vzc2lvbiBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWRFdmVudFxuICAgKi9cbiAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5zZXNzaW9uX3BhcnRpY2lwYW50X2NvdW50X3VwZGF0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRDb3VudHNVcGRhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBwYXJ0aWNpcGFudCBqb2lucyBhIGNhbGwgc2Vzc2lvblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRKb2luZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUGFydGljaXBhbnRSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRKb2luZWRFdmVudFxuICAgKi9cbiAgcGFydGljaXBhbnQ6IENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlO1xuICAvKipcbiAgICogQ2FsbCBzZXNzaW9uIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9qb2luZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRKb2luZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHBhcnRpY2lwYW50IGxlYXZlcyBhIGNhbGwgc2Vzc2lvblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudExlZnRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudExlZnRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFBhcnRpY2lwYW50UmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gICAqL1xuICBwYXJ0aWNpcGFudDogQ2FsbFBhcnRpY2lwYW50UmVzcG9uc2U7XG4gIC8qKlxuICAgKiBDYWxsIHNlc3Npb24gSURcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRMZWZ0RXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9sZWZ0XCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsU2Vzc2lvblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGFjY2VwdGVkX2J5OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGFub255bW91c19wYXJ0aWNpcGFudF9jb3VudDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGVuZGVkX2F0Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25SZXNwb25zZVxuICAgKi9cbiAgbGl2ZV9lbmRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblJlc3BvbnNlXG4gICAqL1xuICBsaXZlX3N0YXJ0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH19XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblJlc3BvbnNlXG4gICAqL1xuICBtaXNzZWRfYnk6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbFBhcnRpY2lwYW50UmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25SZXNwb25zZVxuICAgKi9cbiAgcGFydGljaXBhbnRzOiBBcnJheTxDYWxsUGFydGljaXBhbnRSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBudW1iZXI7IH19XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblJlc3BvbnNlXG4gICAqL1xuICBwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIHJlamVjdGVkX2J5OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIHN0YXJ0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25SZXNwb25zZVxuICAgKi9cbiAgdGltZXJfZW5kc19hdD86IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBjYWxsIHNlc3Npb24gc3RhcnRzXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNlc3Npb25TdGFydGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25TdGFydGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25TdGFydGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIENhbGwgc2Vzc2lvbiBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25TdGFydGVkRXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuc2Vzc2lvbl9zdGFydGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblN0YXJ0ZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXVkaW9TZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhdWRpbz86IEF1ZGlvU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0JhY2tzdGFnZVNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGJhY2tzdGFnZT86IEJhY2tzdGFnZVNldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBicm9hZGNhc3Rpbmc/OiBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7R2VvZmVuY2VTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBnZW9mZW5jaW5nPzogR2VvZmVuY2VTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TGltaXRzU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgbGltaXRzPzogTGltaXRzU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JlY29yZFNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHJlY29yZGluZz86IFJlY29yZFNldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtSaW5nU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgcmluZz86IFJpbmdTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7U2NyZWVuc2hhcmluZ1NldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHNjcmVlbnNoYXJpbmc/OiBTY3JlZW5zaGFyaW5nU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RodW1ibmFpbHNTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICB0aHVtYm5haWxzPzogVGh1bWJuYWlsc1NldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgdHJhbnNjcmlwdGlvbj86IFRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VmlkZW9TZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICB2aWRlbz86IFZpZGVvU2V0dGluZ3NSZXF1ZXN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTZXR0aW5nc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBdWRpb1NldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgYXVkaW86IEF1ZGlvU2V0dGluZ3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtCYWNrc3RhZ2VTZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGJhY2tzdGFnZTogQmFja3N0YWdlU2V0dGluZ3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtCcm9hZGNhc3RTZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGJyb2FkY2FzdGluZzogQnJvYWRjYXN0U2V0dGluZ3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtHZW9mZW5jZVNldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgZ2VvZmVuY2luZzogR2VvZmVuY2VTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0xpbWl0c1NldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgbGltaXRzOiBMaW1pdHNTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JlY29yZFNldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgcmVjb3JkaW5nOiBSZWNvcmRTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JpbmdTZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHJpbmc6IFJpbmdTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1NjcmVlbnNoYXJpbmdTZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHNjcmVlbnNoYXJpbmc6IFNjcmVlbnNoYXJpbmdTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RodW1ibmFpbHNTZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHRodW1ibmFpbHM6IFRodW1ibmFpbHNTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHRyYW5zY3JpcHRpb246IFRyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1ZpZGVvU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICB2aWRlbzogVmlkZW9TZXR0aW5nc1Jlc3BvbnNlO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU3RhdGVSZXNwb25zZUZpZWxkc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTdGF0ZVJlc3BvbnNlRmllbGRzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU3RhdGVSZXNwb25zZUZpZWxkc1xuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICogTGlzdCBvZiBjYWxsIG1lbWJlcnNcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxTdGF0ZVJlc3BvbnNlRmllbGRzXG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TWVtYmVyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU3RhdGVSZXNwb25zZUZpZWxkc1xuICAgKi9cbiAgbWVtYmVyc2hpcD86IE1lbWJlclJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE93bkNhcGFiaWxpdHk+fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFN0YXRlUmVzcG9uc2VGaWVsZHNcbiAgICovXG4gIG93bl9jYXBhYmlsaXRpZXM6IEFycmF5PE93bkNhcGFiaWxpdHk+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU3RhdHNSZXBvcnRTdW1tYXJ5UmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsU3RhdHNSZXBvcnRTdW1tYXJ5UmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTdGF0c1JlcG9ydFN1bW1hcnlSZXNwb25zZVxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDYWxsU3RhdHNSZXBvcnRTdW1tYXJ5UmVzcG9uc2VcbiAgICovXG4gIGNhbGxfZHVyYXRpb25fc2Vjb25kczogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTdGF0c1JlcG9ydFN1bW1hcnlSZXNwb25zZVxuICAgKi9cbiAgY2FsbF9zZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFN0YXRzUmVwb3J0U3VtbWFyeVJlc3BvbnNlXG4gICAqL1xuICBjYWxsX3N0YXR1czogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTdGF0c1JlcG9ydFN1bW1hcnlSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU3RhdHNSZXBvcnRTdW1tYXJ5UmVzcG9uc2VcbiAgICovXG4gIGZpcnN0X3N0YXRzX3RpbWU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDYWxsU3RhdHNSZXBvcnRTdW1tYXJ5UmVzcG9uc2VcbiAgICovXG4gIHF1YWxpdHlfc2NvcmU/OiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxUaW1lbGluZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxUaW1lbGluZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbEV2ZW50Pn1cbiAgICogQG1lbWJlcm9mIENhbGxUaW1lbGluZVxuICAgKi9cbiAgZXZlbnRzOiBBcnJheTxDYWxsRXZlbnQ+O1xufVxuLyoqXG4gKiBDYWxsVHJhbnNjcmlwdGlvbiByZXByZXNlbnRzIGEgdHJhbnNjcmlwdGlvbiBvZiBhIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxUcmFuc2NyaXB0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFRyYW5zY3JpcHRpb24ge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uXG4gICAqL1xuICBlbmRfdGltZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uXG4gICAqL1xuICBmaWxlbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uXG4gICAqL1xuICBzdGFydF90aW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFRyYW5zY3JpcHRpb25cbiAgICovXG4gIHVybDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBjYWxsIHRyYW5zY3JpcHRpb24gaGFzIGZhaWxlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFRyYW5zY3JpcHRpb25GYWlsZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFRyYW5zY3JpcHRpb25GYWlsZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLnRyYW5zY3JpcHRpb25fZmFpbGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGNhbGwgdHJhbnNjcmlwdGlvbiBpcyByZWFkeVxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsVHJhbnNjcmlwdGlvblJlYWR5RXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsVHJhbnNjcmlwdGlvblJlYWR5RXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uUmVhZHlFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsVHJhbnNjcmlwdGlvbn1cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uUmVhZHlFdmVudFxuICAgKi9cbiAgY2FsbF90cmFuc2NyaXB0aW9uOiBDYWxsVHJhbnNjcmlwdGlvbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvblJlYWR5RXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwudHJhbnNjcmlwdGlvbl9yZWFkeVwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFRyYW5zY3JpcHRpb25SZWFkeUV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGNhbGwgdHJhbnNjcmlwdGlvbiBoYXMgc3RhcnRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsVHJhbnNjcmlwdGlvblN0YXJ0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxUcmFuc2NyaXB0aW9uU3RhcnRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvblN0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvblN0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC50cmFuc2NyaXB0aW9uX3N0YXJ0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uU3RhcnRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGNhbGwgdHJhbnNjcmlwdGlvbiBoYXMgc3RvcHBlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsVHJhbnNjcmlwdGlvblN0b3BwZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxUcmFuc2NyaXB0aW9uU3RvcHBlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvblN0b3BwZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHJhbnNjcmlwdGlvblN0b3BwZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC50cmFuc2NyaXB0aW9uX3N0b3BwZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUcmFuc2NyaXB0aW9uU3RvcHBlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgY2FsbCBpcyB1cGRhdGVkLCBjbGllbnRzIHNob3VsZCB1c2UgdGhpcyB1cGRhdGUgdGhlIGxvY2FsIHN0YXRlIG9mIHRoZSBjYWxsLlxuICogVGhpcyBldmVudCBhbHNvIGNvbnRhaW5zIHRoZSBjYXBhYmlsaXRpZXMgYnkgcm9sZSBmb3IgdGhlIGNhbGwsIGNsaWVudHMgc2hvdWxkIHVwZGF0ZSB0aGUgb3duX2NhcGFiaWxpdHkgZm9yIHRoZSBjdXJyZW50LlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsVXBkYXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFVwZGF0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFVwZGF0ZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgY2FwYWJpbGl0aWVzIGJ5IHJvbGUgZm9yIHRoaXMgY2FsbFxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBBcnJheTxzdHJpbmc+OyB9fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFVwZGF0ZWRFdmVudFxuICAgKi9cbiAgY2FwYWJpbGl0aWVzX2J5X3JvbGU6IHsgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuZW5kZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxVcGRhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBjYWxsIG1lbWJlciBpcyBtdXRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsVXNlck11dGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsVXNlck11dGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxVc2VyTXV0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVXNlck11dGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVXNlck11dGVkRXZlbnRcbiAgICovXG4gIGZyb21fdXNlcl9pZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBDYWxsVXNlck11dGVkRXZlbnRcbiAgICovXG4gIG11dGVkX3VzZXJfaWRzOiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC51c2VyX211dGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVXNlck11dGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICBhbGxvd2VkX2ZsYWdfcmVhc29ucz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICBhdXRvbW9kOiBDaGFubmVsQ29uZmlnV2l0aEluZm9BdXRvbW9kRW51bTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIGF1dG9tb2RfYmVoYXZpb3I6IENoYW5uZWxDb25maWdXaXRoSW5mb0F1dG9tb2RCZWhhdmlvckVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VGhyZXNob2xkc31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgYXV0b21vZF90aHJlc2hvbGRzPzogVGhyZXNob2xkcztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIGJsb2NrbGlzdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIGJsb2NrbGlzdF9iZWhhdmlvcj86IENoYW5uZWxDb25maWdXaXRoSW5mb0Jsb2NrbGlzdEJlaGF2aW9yRW51bTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxCbG9ja0xpc3RPcHRpb25zPn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgYmxvY2tsaXN0cz86IEFycmF5PEJsb2NrTGlzdE9wdGlvbnM+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PENvbW1hbmQ+fVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICBjb21tYW5kczogQXJyYXk8Q29tbWFuZD47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgY29ubmVjdF9ldmVudHM6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgY3VzdG9tX2V2ZW50czogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz47IH19XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIGdyYW50cz86IHsgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIG1hcmtfbWVzc2FnZXNfcGVuZGluZzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIG1heF9tZXNzYWdlX2xlbmd0aDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIG11dGVzOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgcGFydGl0aW9uX3NpemU/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICBwYXJ0aXRpb25fdHRsPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIHBvbGxzOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIHB1c2hfbm90aWZpY2F0aW9uczogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICBxdW90ZXM6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgcmVhY3Rpb25zOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIHJlYWRfZXZlbnRzOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIHJlbWluZGVyczogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICByZXBsaWVzOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIHNlYXJjaDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvXG4gICAqL1xuICB0eXBpbmdfZXZlbnRzOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9cbiAgICovXG4gIHVwbG9hZHM6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxDb25maWdXaXRoSW5mb1xuICAgKi9cbiAgdXJsX2VucmljaG1lbnQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQXV0b21vZEVudW0gPSB7XG4gIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICBTSU1QTEU6ICdzaW1wbGUnLFxuICBBSTogJ0FJJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDaGFubmVsQ29uZmlnV2l0aEluZm9BdXRvbW9kRW51bSA9XG4gICh0eXBlb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQXV0b21vZEVudW0pW2tleW9mIHR5cGVvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9BdXRvbW9kRW51bV07XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQXV0b21vZEJlaGF2aW9yRW51bSA9IHtcbiAgRkxBRzogJ2ZsYWcnLFxuICBCTE9DSzogJ2Jsb2NrJyxcbiAgU0hBRE9XX0JMT0NLOiAnc2hhZG93X2Jsb2NrJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDaGFubmVsQ29uZmlnV2l0aEluZm9BdXRvbW9kQmVoYXZpb3JFbnVtID1cbiAgKHR5cGVvZiBDaGFubmVsQ29uZmlnV2l0aEluZm9BdXRvbW9kQmVoYXZpb3JFbnVtKVtrZXlvZiB0eXBlb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQXV0b21vZEJlaGF2aW9yRW51bV07XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQmxvY2tsaXN0QmVoYXZpb3JFbnVtID0ge1xuICBGTEFHOiAnZmxhZycsXG4gIEJMT0NLOiAnYmxvY2snLFxuICBTSEFET1dfQkxPQ0s6ICdzaGFkb3dfYmxvY2snLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIENoYW5uZWxDb25maWdXaXRoSW5mb0Jsb2NrbGlzdEJlaGF2aW9yRW51bSA9XG4gICh0eXBlb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQmxvY2tsaXN0QmVoYXZpb3JFbnVtKVtrZXlvZiB0eXBlb2YgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQmxvY2tsaXN0QmVoYXZpb3JFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDaGFubmVsTWVtYmVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhbm5lbE1lbWJlciB7XG4gIC8qKlxuICAgKiBFeHBpcmF0aW9uIGRhdGUgb2YgdGhlIGJhblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbE1lbWJlclxuICAgKi9cbiAgYmFuX2V4cGlyZXM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG1lbWJlciBpcyBiYW5uZWQgdGhpcyBjaGFubmVsIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIGJhbm5lZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFJvbGUgb2YgdGhlIG1lbWJlciBpbiB0aGUgY2hhbm5lbFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbE1lbWJlclxuICAgKi9cbiAgY2hhbm5lbF9yb2xlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsTWVtYmVyXG4gICAqL1xuICBkZWxldGVkX2F0Pzogc3RyaW5nO1xuICAvKipcbiAgICogRGF0ZSB3aGVuIGludml0ZSB3YXMgYWNjZXB0ZWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIGludml0ZV9hY2NlcHRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqIERhdGUgd2hlbiBpbnZpdGUgd2FzIHJlamVjdGVkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsTWVtYmVyXG4gICAqL1xuICBpbnZpdGVfcmVqZWN0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIG1lbWJlciB3YXMgaW52aXRlZCBvciBub3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsTWVtYmVyXG4gICAqL1xuICBpbnZpdGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZXRoZXIgbWVtYmVyIGlzIGNoYW5uZWwgbW9kZXJhdG9yIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIGlzX21vZGVyYXRvcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIG5vdGlmaWNhdGlvbnNfbXV0ZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIG1lbWJlciBpcyBzaGFkb3cgYmFubmVkIGluIHRoaXMgY2hhbm5lbCBvciBub3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsTWVtYmVyXG4gICAqL1xuICBzaGFkb3dfYmFubmVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIHN0YXR1cz86IHN0cmluZztcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiB0aGUgbGFzdCB1cGRhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNZW1iZXJcbiAgICovXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbE1lbWJlclxuICAgKi9cbiAgdXNlcj86IFVzZXJPYmplY3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbE1lbWJlclxuICAgKi9cbiAgdXNlcl9pZD86IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2hhbm5lbE11dGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDaGFubmVsTXV0ZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2hhbm5lbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbE11dGVcbiAgICovXG4gIGNoYW5uZWw/OiBDaGFubmVsUmVzcG9uc2U7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNdXRlXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgbXV0ZSBleHBpcmF0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsTXV0ZVxuICAgKi9cbiAgZXhwaXJlcz86IHN0cmluZztcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiB0aGUgbGFzdCB1cGRhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNdXRlXG4gICAqL1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlck9iamVjdH1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxNdXRlXG4gICAqL1xuICB1c2VyPzogVXNlck9iamVjdDtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBjaGFubmVsIGluIGNoYXRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2hhbm5lbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhbm5lbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgYXV0byB0cmFuc2xhdGlvbiBpcyBlbmFibGVkIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgYXV0b190cmFuc2xhdGlvbl9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIExhbmd1YWdlIHRvIHRyYW5zbGF0ZSB0byB3aGVuIGF1dG8gdHJhbnNsYXRpb24gaXMgYWN0aXZlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGF1dG9fdHJhbnNsYXRpb25fbGFuZ3VhZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDaGFubmVsIENJRCAoPHR5cGU+OjxpZD4pXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGNpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NoYW5uZWxDb25maWdXaXRoSW5mb31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgY29uZmlnPzogQ2hhbm5lbENvbmZpZ1dpdGhJbmZvO1xuICAvKipcbiAgICogQ29vbGRvd24gcGVyaW9kIGFmdGVyIHNlbmRpbmcgZWFjaCBtZXNzYWdlXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGNvb2xkb3duPzogbnVtYmVyO1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGNyZWF0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbFJlc3BvbnNlXG4gICAqL1xuICBjcmVhdGVkX2J5PzogVXNlck9iamVjdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgY3VzdG9tOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGRlbGV0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGRlbGV0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIGNoYW5uZWwgaXMgZnJvemVuIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgZnJvemVuOiBib29sZWFuO1xuICAvKipcbiAgICogV2hldGhlciB0aGlzIGNoYW5uZWwgaXMgaGlkZGVuIGJ5IGN1cnJlbnQgdXNlciBvciBub3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGhpZGRlbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBEYXRlIHNpbmNlIHdoZW4gdGhlIG1lc3NhZ2UgaGlzdG9yeSBpcyBhY2Nlc3NpYmxlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGhpZGVfbWVzc2FnZXNfYmVmb3JlPzogc3RyaW5nO1xuICAvKipcbiAgICogQ2hhbm5lbCB1bmlxdWUgSURcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIERhdGUgb2YgdGhlIGxhc3QgbWVzc2FnZSBzZW50XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIGxhc3RfbWVzc2FnZV9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqIE51bWJlciBvZiBtZW1iZXJzIGluIHRoZSBjaGFubmVsXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcl9jb3VudD86IG51bWJlcjtcbiAgLyoqXG4gICAqIExpc3Qgb2YgY2hhbm5lbCBtZW1iZXJzIChtYXggMTAwKVxuICAgKiBAdHlwZSB7QXJyYXk8Q2hhbm5lbE1lbWJlcj59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM/OiBBcnJheTxDaGFubmVsTWVtYmVyPjtcbiAgLyoqXG4gICAqIERhdGUgb2YgbXV0ZSBleHBpcmF0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIG11dGVfZXhwaXJlc19hdD86IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBjaGFubmVsIGlzIG11dGVkIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgbXV0ZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICogTGlzdCBvZiBjaGFubmVsIGNhcGFiaWxpdGllcyBvZiBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIG93bl9jYXBhYmlsaXRpZXM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICogVGVhbSB0aGUgY2hhbm5lbCBiZWxvbmdzIHRvIChtdWx0aS10ZW5hbnQgb25seSlcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoYW5uZWxSZXNwb25zZVxuICAgKi9cbiAgdGVhbT86IHN0cmluZztcbiAgLyoqXG4gICAqIERhdGUgb2YgdGhlIGxhdGVzdCB0cnVuY2F0aW9uIG9mIHRoZSBjaGFubmVsXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIHRydW5jYXRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbFJlc3BvbnNlXG4gICAqL1xuICB0cnVuY2F0ZWRfYnk/OiBVc2VyT2JqZWN0O1xuICAvKipcbiAgICogVHlwZSBvZiB0aGUgY2hhbm5lbFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2hhbm5lbFJlc3BvbnNlXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgdGhlIGxhc3QgdXBkYXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDaGFubmVsUmVzcG9uc2VcbiAgICovXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gY2xvc2VkIGNhcHRpb25zIGFyZSBiZWluZyBzZW50IGluIGEgY2FsbCwgY2xpZW50cyBzaG91bGQgdXNlIHRoaXMgdG8gc2hvdyB0aGUgY2xvc2VkIGNhcHRpb25zIGluIHRoZSBjYWxsIHNjcmVlblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDbG9zZWRDYXB0aW9uRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDbG9zZWRDYXB0aW9uRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENsb3NlZENhcHRpb25FdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsQ2xvc2VkQ2FwdGlvbn1cbiAgICogQG1lbWJlcm9mIENsb3NlZENhcHRpb25FdmVudFxuICAgKi9cbiAgY2xvc2VkX2NhcHRpb246IENhbGxDbG9zZWRDYXB0aW9uO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENsb3NlZENhcHRpb25FdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5jbG9zZWRfY2FwdGlvblwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2xvc2VkQ2FwdGlvbkV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENvbGxlY3RVc2VyRmVlZGJhY2tSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29sbGVjdFVzZXJGZWVkYmFja1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdFVzZXJGZWVkYmFja1JlcXVlc3RcbiAgICovXG4gIGN1c3RvbT86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdFVzZXJGZWVkYmFja1JlcXVlc3RcbiAgICovXG4gIHJhdGluZzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbGxlY3RVc2VyRmVlZGJhY2tSZXF1ZXN0XG4gICAqL1xuICByZWFzb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdFVzZXJGZWVkYmFja1JlcXVlc3RcbiAgICovXG4gIHNkazogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbGxlY3RVc2VyRmVlZGJhY2tSZXF1ZXN0XG4gICAqL1xuICBzZGtfdmVyc2lvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbGxlY3RVc2VyRmVlZGJhY2tSZXF1ZXN0XG4gICAqL1xuICB1c2VyX3Nlc3Npb25faWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ29sbGVjdFVzZXJGZWVkYmFja1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29sbGVjdFVzZXJGZWVkYmFja1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdFVzZXJGZWVkYmFja1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGN1c3RvbSBjaGF0IGNvbW1hbmRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ29tbWFuZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmQge1xuICAvKipcbiAgICogQXJndW1lbnRzIGhlbHAgdGV4dCwgc2hvd24gaW4gY29tbWFuZHMgYXV0by1jb21wbGV0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDb21tYW5kXG4gICAqL1xuICBhcmdzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbW1hbmRcbiAgICovXG4gIHJlYWRvbmx5IGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiwgc2hvd24gaW4gY29tbWFuZHMgYXV0by1jb21wbGV0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDb21tYW5kXG4gICAqL1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICogVW5pcXVlIGNvbW1hbmQgbmFtZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29tbWFuZFxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogU2V0IG5hbWUgdXNlZCBmb3IgZ3JvdXBpbmcgY29tbWFuZHNcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbW1hbmRcbiAgICovXG4gIHNldDogc3RyaW5nO1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIHRoZSBsYXN0IHVwZGF0ZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29tbWFuZFxuICAgKi9cbiAgcmVhZG9ubHkgdXBkYXRlZF9hdD86IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdFxuICAgKi9cbiAgY3VzdG9tPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDb25uZWN0VXNlckRldGFpbHNSZXF1ZXN0XG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3RcbiAgICovXG4gIGltYWdlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDb25uZWN0VXNlckRldGFpbHNSZXF1ZXN0XG4gICAqL1xuICBpbnZpc2libGU/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3RcbiAgICovXG4gIGxhbmd1YWdlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3RcbiAgICovXG4gIG5hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7UHJpdmFjeVNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdFxuICAgKi9cbiAgcHJpdmFjeV9zZXR0aW5ncz86IFByaXZhY3lTZXR0aW5ncztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NJbnB1dH1cbiAgICogQG1lbWJlcm9mIENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3RcbiAgICovXG4gIHB1c2hfbm90aWZpY2F0aW9ucz86IFB1c2hOb3RpZmljYXRpb25TZXR0aW5nc0lucHV0O1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiB0aGUgV1MgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZCBhbmQgYXV0aGVudGljYXRlZCwgdGhpcyBldmVudCBjb250YWlucyB0aGUgZnVsbCB1c2VyIG9iamVjdCBhcyBpdCBpcyBzdG9yZWQgb24gdGhlIHNlcnZlclxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDb25uZWN0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RlZEV2ZW50IHtcbiAgLyoqXG4gICAqIFRoZSBjb25uZWN0aW9uX2lkIGZvciB0aGlzIGNsaWVudFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGVkRXZlbnRcbiAgICovXG4gIGNvbm5lY3Rpb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDb25uZWN0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge093blVzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENvbm5lY3RlZEV2ZW50XG4gICAqL1xuICBtZTogT3duVXNlclJlc3BvbnNlO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY29ubmVjdGlvbi5va1wiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gdGhlIFdTIGNvbm5lY3Rpb24gZmFpbHNcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ29ubmVjdGlvbkVycm9yRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0aW9uRXJyb3JFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGlvbkVycm9yRXZlbnRcbiAgICovXG4gIGNvbm5lY3Rpb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDb25uZWN0aW9uRXJyb3JFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FQSUVycm9yfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGlvbkVycm9yRXZlbnRcbiAgICovXG4gIGVycm9yOiBBUElFcnJvcjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNvbm5lY3Rpb24ub2tcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3Rpb25FcnJvckV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENvb3JkaW5hdGVzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29vcmRpbmF0ZXMge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENvb3JkaW5hdGVzXG4gICAqL1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENvb3JkaW5hdGVzXG4gICAqL1xuICBsb25naXR1ZGU6IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlYXRlRGV2aWNlUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZURldmljZVJlcXVlc3Qge1xuICAvKipcbiAgICogRGV2aWNlIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVEZXZpY2VSZXF1ZXN0XG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICogUHVzaCBwcm92aWRlclxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlRGV2aWNlUmVxdWVzdFxuICAgKi9cbiAgcHVzaF9wcm92aWRlcjogQ3JlYXRlRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW07XG4gIC8qKlxuICAgKiBQdXNoIHByb3ZpZGVyIG5hbWVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZURldmljZVJlcXVlc3RcbiAgICovXG4gIHB1c2hfcHJvdmlkZXJfbmFtZT86IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZW4gdHJ1ZSB0aGUgdG9rZW4gaXMgZm9yIEFwcGxlIFZvSVAgcHVzaCBub3RpZmljYXRpb25zXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlRGV2aWNlUmVxdWVzdFxuICAgKi9cbiAgdm9pcF90b2tlbj86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgQ3JlYXRlRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW0gPSB7XG4gIEZJUkVCQVNFOiAnZmlyZWJhc2UnLFxuICBBUE46ICdhcG4nLFxuICBIVUFXRUk6ICdodWF3ZWknLFxuICBYSUFPTUk6ICd4aWFvbWknLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIENyZWF0ZURldmljZVJlcXVlc3RQdXNoUHJvdmlkZXJFbnVtID1cbiAgKHR5cGVvZiBDcmVhdGVEZXZpY2VSZXF1ZXN0UHVzaFByb3ZpZGVyRW51bSlba2V5b2YgdHlwZW9mIENyZWF0ZURldmljZVJlcXVlc3RQdXNoUHJvdmlkZXJFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDcmVhdGVHdWVzdFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVHdWVzdFJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlR3Vlc3RSZXF1ZXN0XG4gICAqL1xuICB1c2VyOiBVc2VyUmVxdWVzdDtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlYXRlR3Vlc3RSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUd1ZXN0UmVzcG9uc2Uge1xuICAvKipcbiAgICogdGhlIGFjY2VzcyB0b2tlbiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXJcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZUd1ZXN0UmVzcG9uc2VcbiAgICovXG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVHdWVzdFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUd1ZXN0UmVzcG9uc2VcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlZGVudGlhbHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDcmVkZW50aWFscyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8SUNFU2VydmVyPn1cbiAgICogQG1lbWJlcm9mIENyZWRlbnRpYWxzXG4gICAqL1xuICBpY2Vfc2VydmVyczogQXJyYXk8SUNFU2VydmVyPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTRlVSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENyZWRlbnRpYWxzXG4gICAqL1xuICBzZXJ2ZXI6IFNGVVJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWRlbnRpYWxzXG4gICAqL1xuICB0b2tlbjogc3RyaW5nO1xufVxuLyoqXG4gKiBBIGN1c3RvbSBldmVudCwgdGhpcyBldmVudCBpcyB1c2VkIHRvIHNlbmQgY3VzdG9tIGV2ZW50cyB0byBvdGhlciBwYXJ0aWNpcGFudHMgaW4gdGhlIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEN1c3RvbVZpZGVvRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21WaWRlb0V2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDdXN0b21WaWRlb0V2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEN1c3RvbVZpZGVvRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEN1c3RvbSBkYXRhIGZvciB0aGlzIG9iamVjdFxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBDdXN0b21WaWRlb0V2ZW50XG4gICAqL1xuICBjdXN0b206IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudCwgXCJjdXN0b21cIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEN1c3RvbVZpZGVvRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDdXN0b21WaWRlb0V2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIERlbGV0ZVJlY29yZGluZ1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlUmVjb3JkaW5nUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIERlbGV0ZVJlY29yZGluZ1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBEZWxldGVUcmFuc2NyaXB0aW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZWxldGVUcmFuc2NyaXB0aW9uUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIERlbGV0ZVRyYW5zY3JpcHRpb25SZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgRGV2aWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlIHtcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiBjcmVhdGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRGV2aWNlXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGRldmljZSBpcyBkaXNhYmxlZCBvciBub3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBEZXZpY2VcbiAgICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFJlYXNvbiBleHBsYWluaW5nIHdoeSBkZXZpY2UgaGFkIGJlZW4gZGlzYWJsZWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIERldmljZVxuICAgKi9cbiAgZGlzYWJsZWRfcmVhc29uPzogc3RyaW5nO1xuICAvKipcbiAgICogRGV2aWNlIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBEZXZpY2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBQdXNoIHByb3ZpZGVyXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBEZXZpY2VcbiAgICovXG4gIHB1c2hfcHJvdmlkZXI6IHN0cmluZztcbiAgLyoqXG4gICAqIFB1c2ggcHJvdmlkZXIgbmFtZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRGV2aWNlXG4gICAqL1xuICBwdXNoX3Byb3ZpZGVyX25hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBVc2VyIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBEZXZpY2VcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZW4gdHJ1ZSB0aGUgdG9rZW4gaXMgZm9yIEFwcGxlIFZvSVAgcHVzaCBub3RpZmljYXRpb25zXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgRGV2aWNlXG4gICAqL1xuICB2b2lwPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgRWRnZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRWRnZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIGNvbnRpbmVudF9jb2RlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICBjb3VudHJ5X2lzb19jb2RlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICBncmVlbjogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEVkZ2VSZXNwb25zZVxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIGxhdGVuY3lfdGVzdF91cmw6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIGxhdGl0dWRlOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICBsb25naXR1ZGU6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIHJlZDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEVkZ2VSZXNwb25zZVxuICAgKi9cbiAgc3ViZGl2aXNpb25faXNvX2NvZGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIHllbGxvdzogbnVtYmVyO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBFZ3Jlc3NITFNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVncmVzc0hMU1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFZ3Jlc3NITFNSZXNwb25zZVxuICAgKi9cbiAgcGxheWxpc3RfdXJsOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEVncmVzc1JUTVBSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVncmVzc1JUTVBSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWdyZXNzUlRNUFJlc3BvbnNlXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWdyZXNzUlRNUFJlc3BvbnNlXG4gICAqL1xuICBzdHJlYW1fa2V5OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWdyZXNzUlRNUFJlc3BvbnNlXG4gICAqL1xuICB1cmw6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgRWdyZXNzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFZ3Jlc3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEVncmVzc1Jlc3BvbnNlXG4gICAqL1xuICBicm9hZGNhc3Rpbmc6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7RWdyZXNzSExTUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBFZ3Jlc3NSZXNwb25zZVxuICAgKi9cbiAgaGxzPzogRWdyZXNzSExTUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8RWdyZXNzUlRNUFJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIEVncmVzc1Jlc3BvbnNlXG4gICAqL1xuICBydG1wczogQXJyYXk8RWdyZXNzUlRNUFJlc3BvbnNlPjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgRW5kQ2FsbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRW5kQ2FsbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFbmRDYWxsUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdlb2ZlbmNlU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2VvZmVuY2VTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBHZW9mZW5jZVNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgbmFtZXM/OiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHZW9mZW5jZVNldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZW9mZW5jZVNldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBHZW9mZW5jZVNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIG5hbWVzOiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHZW9sb2NhdGlvblJlc3VsdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdlb2xvY2F0aW9uUmVzdWx0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBHZW9sb2NhdGlvblJlc3VsdFxuICAgKi9cbiAgYWNjdXJhY3lfcmFkaXVzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2VvbG9jYXRpb25SZXN1bHRcbiAgICovXG4gIGNpdHk6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZW9sb2NhdGlvblJlc3VsdFxuICAgKi9cbiAgY29udGluZW50OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2VvbG9jYXRpb25SZXN1bHRcbiAgICovXG4gIGNvbnRpbmVudF9jb2RlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2VvbG9jYXRpb25SZXN1bHRcbiAgICovXG4gIGNvdW50cnk6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZW9sb2NhdGlvblJlc3VsdFxuICAgKi9cbiAgY291bnRyeV9pc29fY29kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEdlb2xvY2F0aW9uUmVzdWx0XG4gICAqL1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEdlb2xvY2F0aW9uUmVzdWx0XG4gICAqL1xuICBsb25naXR1ZGU6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZW9sb2NhdGlvblJlc3VsdFxuICAgKi9cbiAgc3ViZGl2aXNpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZW9sb2NhdGlvblJlc3VsdFxuICAgKi9cbiAgc3ViZGl2aXNpb25faXNvX2NvZGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgR2V0Q2FsbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2V0Q2FsbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFJlc3BvbnNlXG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TWVtYmVyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnNoaXA/OiBNZW1iZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxPd25DYXBhYmlsaXR5Pn1cbiAgICogQG1lbWJlcm9mIEdldENhbGxSZXNwb25zZVxuICAgKi9cbiAgb3duX2NhcGFiaWxpdGllczogQXJyYXk8T3duQ2FwYWJpbGl0eT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdldENhbGxTdGF0c1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2V0Q2FsbFN0YXRzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEdldENhbGxTdGF0c1Jlc3BvbnNlXG4gICAqL1xuICBjYWxsX2R1cmF0aW9uX3NlY29uZHM6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgY2FsbF9zdGF0dXM6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsVGltZWxpbmV9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgY2FsbF90aW1lbGluZT86IENhbGxUaW1lbGluZTtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFN0YXRzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7U3RhdHN9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgaml0dGVyPzogU3RhdHM7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7U3RhdHN9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgbGF0ZW5jeT86IFN0YXRzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEdldENhbGxTdGF0c1Jlc3BvbnNlXG4gICAqL1xuICBtYXhfZnJlZXplc19kdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFN0YXRzUmVzcG9uc2VcbiAgICovXG4gIG1heF9wYXJ0aWNpcGFudHM6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgbWF4X3RvdGFsX3F1YWxpdHlfbGltaXRhdGlvbl9kdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8VXNlclN0YXRzPn1cbiAgICogQG1lbWJlcm9mIEdldENhbGxTdGF0c1Jlc3BvbnNlXG4gICAqL1xuICBwYXJ0aWNpcGFudF9yZXBvcnQ6IEFycmF5PFVzZXJTdGF0cz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFN0YXRzUmVzcG9uc2VcbiAgICovXG4gIHB1Ymxpc2hpbmdfcGFydGljaXBhbnRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFN0YXRzUmVzcG9uc2VcbiAgICovXG4gIHF1YWxpdHlfc2NvcmU6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgc2Z1X2NvdW50OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8U0ZVTG9jYXRpb25SZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgc2Z1czogQXJyYXk8U0ZVTG9jYXRpb25SZXNwb25zZT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdldEVkZ2VzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZXRFZGdlc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2V0RWRnZXNSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxFZGdlUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgR2V0RWRnZXNSZXNwb25zZVxuICAgKi9cbiAgZWRnZXM6IEFycmF5PEVkZ2VSZXNwb25zZT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3RcbiAgICovXG4gIGRhdGE/OiBDYWxsUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICBtZW1iZXJzX2xpbWl0PzogbnVtYmVyO1xuICAvKipcbiAgICogaWYgcHJvdmlkZWQgaXQgc2VuZHMgYSBub3RpZmljYXRpb24gZXZlbnQgdG8gdGhlIG1lbWJlcnMgZm9yIHRoaXMgY2FsbFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3RcbiAgICovXG4gIG5vdGlmeT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBpZiBwcm92aWRlZCBpdCBzZW5kcyBhIHJpbmcgZXZlbnQgdG8gdGhlIG1lbWJlcnMgZm9yIHRoaXMgY2FsbFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3RcbiAgICovXG4gIHJpbmc/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICB2aWRlbz86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBjcmVhdGVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TWVtYmVyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgbWVtYmVyc2hpcD86IE1lbWJlclJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE93bkNhcGFiaWxpdHk+fVxuICAgKiBAbWVtYmVyb2YgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIG93bl9jYXBhYmlsaXRpZXM6IEFycmF5PE93bkNhcGFiaWxpdHk+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHb0xpdmVSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR29MaXZlUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVxdWVzdFxuICAgKi9cbiAgcmVjb3JkaW5nX3N0b3JhZ2VfbmFtZT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVxdWVzdFxuICAgKi9cbiAgc3RhcnRfaGxzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVxdWVzdFxuICAgKi9cbiAgc3RhcnRfcmVjb3JkaW5nPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVxdWVzdFxuICAgKi9cbiAgc3RhcnRfdHJhbnNjcmlwdGlvbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVxdWVzdFxuICAgKi9cbiAgdHJhbnNjcmlwdGlvbl9zdG9yYWdlX25hbWU/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdvTGl2ZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR29MaXZlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEdvTGl2ZVJlc3BvbnNlXG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEdvTGl2ZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBITFNTZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBITFNTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBITFNTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGF1dG9fb24/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBITFNTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBITFNTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHF1YWxpdHlfdHJhY2tzOiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBITFNTZXR0aW5nc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSExTU2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGF1dG9fb246IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHF1YWxpdHlfdHJhY2tzOiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBIZWFsdGhDaGVja0V2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSGVhbHRoQ2hlY2tFdmVudFxuICAgKi9cbiAgY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSGVhbHRoQ2hlY2tFdmVudFxuICAgKi9cbiAgY29ubmVjdGlvbl9pZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEhlYWx0aENoZWNrRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtPd25Vc2VyfVxuICAgKiBAbWVtYmVyb2YgSGVhbHRoQ2hlY2tFdmVudFxuICAgKi9cbiAgbWU/OiBPd25Vc2VyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEhlYWx0aENoZWNrRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSUNFU2VydmVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNFU2VydmVyIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBJQ0VTZXJ2ZXJcbiAgICovXG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIElDRVNlcnZlclxuICAgKi9cbiAgdXJsczogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBJQ0VTZXJ2ZXJcbiAgICovXG4gIHVzZXJuYW1lOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEpvaW5DYWxsUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvaW5DYWxsUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBpZiB0cnVlIHRoZSBjYWxsIHdpbGwgYmUgY3JlYXRlZCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXF1ZXN0XG4gICAqL1xuICBjcmVhdGU/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXF1ZXN0XG4gICAqL1xuICBkYXRhPzogQ2FsbFJlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXF1ZXN0XG4gICAqL1xuICBsb2NhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVxdWVzdFxuICAgKi9cbiAgbWVtYmVyc19saW1pdD86IG51bWJlcjtcbiAgLyoqXG4gICAqIElmIHRoZSBwYXJ0aWNpcGFudCBpcyBtaWdyYXRpbmcgZnJvbSBhbm90aGVyIFNGVSwgdGhlbiB0aGlzIGlzIHRoZSBJRCBvZiB0aGUgcHJldmlvdXMgU0ZVXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlcXVlc3RcbiAgICovXG4gIG1pZ3JhdGluZ19mcm9tPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlcXVlc3RcbiAgICovXG4gIG5vdGlmeT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBpZiB0cnVlIGFuZCB0aGUgY2FsbCBpcyBjcmVhdGVkLCB0aGUgbm90aWZpY2F0aW9uIHdpbGwgaW5jbHVkZSByaW5nPXRydWVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlcXVlc3RcbiAgICovXG4gIHJpbmc/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlcXVlc3RcbiAgICovXG4gIHZpZGVvPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSm9pbkNhbGxSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvaW5DYWxsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDcmVkZW50aWFsc31cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFscztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNZW1iZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnNoaXA/OiBNZW1iZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxPd25DYXBhYmlsaXR5Pn1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIG93bl9jYXBhYmlsaXRpZXM6IEFycmF5PE93bkNhcGFiaWxpdHk+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1N0YXRzT3B0aW9uc31cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIHN0YXRzX29wdGlvbnM6IFN0YXRzT3B0aW9ucztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGFiZWxUaHJlc2hvbGRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGFiZWxUaHJlc2hvbGRzIHtcbiAgLyoqXG4gICAqIFRocmVzaG9sZCBmb3IgYXV0b21hdGljIG1lc3NhZ2UgYmxvY2tcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIExhYmVsVGhyZXNob2xkc1xuICAgKi9cbiAgYmxvY2s/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBUaHJlc2hvbGQgZm9yIGF1dG9tYXRpYyBtZXNzYWdlIGZsYWdcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIExhYmVsVGhyZXNob2xkc1xuICAgKi9cbiAgZmxhZz86IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGltaXRzU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGltaXRzU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBMaW1pdHNTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIG1heF9kdXJhdGlvbl9zZWNvbmRzPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIExpbWl0c1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgbWF4X3BhcnRpY2lwYW50cz86IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGltaXRzU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpbWl0c1NldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIExpbWl0c1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIG1heF9kdXJhdGlvbl9zZWNvbmRzPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIExpbWl0c1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIG1heF9wYXJ0aWNpcGFudHM/OiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIExpc3REZXZpY2VzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0RGV2aWNlc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgZGV2aWNlc1xuICAgKiBAdHlwZSB7QXJyYXk8RGV2aWNlPn1cbiAgICogQG1lbWJlcm9mIExpc3REZXZpY2VzUmVzcG9uc2VcbiAgICovXG4gIGRldmljZXM6IEFycmF5PERldmljZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTGlzdERldmljZXNSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGlzdFJlY29yZGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RSZWNvcmRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExpc3RSZWNvcmRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbFJlY29yZGluZz59XG4gICAqIEBtZW1iZXJvZiBMaXN0UmVjb3JkaW5nc1Jlc3BvbnNlXG4gICAqL1xuICByZWNvcmRpbmdzOiBBcnJheTxDYWxsUmVjb3JkaW5nPjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0VHJhbnNjcmlwdGlvbnNSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbFRyYW5zY3JpcHRpb24+fVxuICAgKiBAbWVtYmVyb2YgTGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2VcbiAgICovXG4gIHRyYW5zY3JpcHRpb25zOiBBcnJheTxDYWxsVHJhbnNjcmlwdGlvbj47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIExvY2F0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb24ge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExvY2F0aW9uXG4gICAqL1xuICBjb250aW5lbnRfY29kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExvY2F0aW9uXG4gICAqL1xuICBjb3VudHJ5X2lzb19jb2RlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTG9jYXRpb25cbiAgICovXG4gIHN1YmRpdmlzaW9uX2lzb19jb2RlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIE1PU1N0YXRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTU9TU3RhdHMge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIE1PU1N0YXRzXG4gICAqL1xuICBhdmVyYWdlX3Njb3JlOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICogQG1lbWJlcm9mIE1PU1N0YXRzXG4gICAqL1xuICBoaXN0b2dyYW1fZHVyYXRpb25fc2Vjb25kczogQXJyYXk8bnVtYmVyPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBNT1NTdGF0c1xuICAgKi9cbiAgbWF4X3Njb3JlOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgTU9TU3RhdHNcbiAgICovXG4gIG1pbl9zY29yZTogbnVtYmVyO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBNZWRpYVB1YlN1YkhpbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZWRpYVB1YlN1YkhpbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBNZWRpYVB1YlN1YkhpbnRcbiAgICovXG4gIGF1ZGlvX3B1Ymxpc2hlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTWVkaWFQdWJTdWJIaW50XG4gICAqL1xuICBhdWRpb19zdWJzY3JpYmVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBNZWRpYVB1YlN1YkhpbnRcbiAgICovXG4gIHZpZGVvX3B1Ymxpc2hlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTWVkaWFQdWJTdWJIaW50XG4gICAqL1xuICB2aWRlb19zdWJzY3JpYmVkOiBib29sZWFuO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBNZW1iZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVtYmVyUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBvYmplY3RcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVxdWVzdFxuICAgKi9cbiAgY3VzdG9tPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXF1ZXN0XG4gICAqL1xuICByb2xlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE1lbWJlclJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTWVtYmVyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZW1iZXJSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE1lbWJlclJlc3BvbnNlXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDdXN0b20gbWVtYmVyIHJlc3BvbnNlIGRhdGFcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVzcG9uc2VcbiAgICovXG4gIGN1c3RvbTogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiBkZWxldGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVzcG9uc2VcbiAgICovXG4gIGRlbGV0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVzcG9uc2VcbiAgICovXG4gIHJvbGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgdGhlIGxhc3QgdXBkYXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXNwb25zZVxuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIE1lbWJlclJlc3BvbnNlXG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVzcG9uc2VcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTXV0ZVVzZXJzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE11dGVVc2Vyc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBNdXRlVXNlcnNSZXF1ZXN0XG4gICAqL1xuICBhdWRpbz86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE11dGVVc2Vyc1JlcXVlc3RcbiAgICovXG4gIG11dGVfYWxsX3VzZXJzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTXV0ZVVzZXJzUmVxdWVzdFxuICAgKi9cbiAgc2NyZWVuc2hhcmU/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBNdXRlVXNlcnNSZXF1ZXN0XG4gICAqL1xuICBzY3JlZW5zaGFyZV9hdWRpbz86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIE11dGVVc2Vyc1JlcXVlc3RcbiAgICovXG4gIHVzZXJfaWRzPzogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTXV0ZVVzZXJzUmVxdWVzdFxuICAgKi9cbiAgdmlkZW8/OiBib29sZWFuO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBNdXRlVXNlcnNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE11dGVVc2Vyc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTXV0ZVVzZXJzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIE5vaXNlQ2FuY2VsbGF0aW9uU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzXG4gICAqL1xuICBtb2RlOiBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzTW9kZUVudW07XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgTm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc01vZGVFbnVtID0ge1xuICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgQVVUT19PTjogJ2F1dG8tb24nLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIE5vaXNlQ2FuY2VsbGF0aW9uU2V0dGluZ3NNb2RlRW51bSA9XG4gICh0eXBlb2YgTm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc01vZGVFbnVtKVtrZXlvZiB0eXBlb2YgTm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc01vZGVFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBOdWxsQm9vbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE51bGxCb29sIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTnVsbEJvb2xcbiAgICovXG4gIEhhc1ZhbHVlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTnVsbEJvb2xcbiAgICovXG4gIFZhbHVlPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTnVsbFRpbWVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOdWxsVGltZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE51bGxUaW1lXG4gICAqL1xuICBIYXNWYWx1ZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTnVsbFRpbWVcbiAgICovXG4gIFZhbHVlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEFsbCBwb3NzaWJpbGl0eSBvZiBzdHJpbmcgdG8gdXNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBPd25DYXBhYmlsaXR5ID0ge1xuICBCTE9DS19VU0VSUzogJ2Jsb2NrLXVzZXJzJyxcbiAgQ0hBTkdFX01BWF9EVVJBVElPTjogJ2NoYW5nZS1tYXgtZHVyYXRpb24nLFxuICBDUkVBVEVfQ0FMTDogJ2NyZWF0ZS1jYWxsJyxcbiAgQ1JFQVRFX1JFQUNUSU9OOiAnY3JlYXRlLXJlYWN0aW9uJyxcbiAgRU5BQkxFX05PSVNFX0NBTkNFTExBVElPTjogJ2VuYWJsZS1ub2lzZS1jYW5jZWxsYXRpb24nLFxuICBFTkRfQ0FMTDogJ2VuZC1jYWxsJyxcbiAgSk9JTl9CQUNLU1RBR0U6ICdqb2luLWJhY2tzdGFnZScsXG4gIEpPSU5fQ0FMTDogJ2pvaW4tY2FsbCcsXG4gIEpPSU5fRU5ERURfQ0FMTDogJ2pvaW4tZW5kZWQtY2FsbCcsXG4gIE1VVEVfVVNFUlM6ICdtdXRlLXVzZXJzJyxcbiAgUElOX0ZPUl9FVkVSWU9ORTogJ3Bpbi1mb3ItZXZlcnlvbmUnLFxuICBSRUFEX0NBTEw6ICdyZWFkLWNhbGwnLFxuICBSRU1PVkVfQ0FMTF9NRU1CRVI6ICdyZW1vdmUtY2FsbC1tZW1iZXInLFxuICBTQ1JFRU5TSEFSRTogJ3NjcmVlbnNoYXJlJyxcbiAgU0VORF9BVURJTzogJ3NlbmQtYXVkaW8nLFxuICBTRU5EX1ZJREVPOiAnc2VuZC12aWRlbycsXG4gIFNUQVJUX0JST0FEQ0FTVF9DQUxMOiAnc3RhcnQtYnJvYWRjYXN0LWNhbGwnLFxuICBTVEFSVF9SRUNPUkRfQ0FMTDogJ3N0YXJ0LXJlY29yZC1jYWxsJyxcbiAgU1RBUlRfVFJBTlNDUklQVElPTl9DQUxMOiAnc3RhcnQtdHJhbnNjcmlwdGlvbi1jYWxsJyxcbiAgU1RPUF9CUk9BRENBU1RfQ0FMTDogJ3N0b3AtYnJvYWRjYXN0LWNhbGwnLFxuICBTVE9QX1JFQ09SRF9DQUxMOiAnc3RvcC1yZWNvcmQtY2FsbCcsXG4gIFNUT1BfVFJBTlNDUklQVElPTl9DQUxMOiAnc3RvcC10cmFuc2NyaXB0aW9uLWNhbGwnLFxuICBVUERBVEVfQ0FMTDogJ3VwZGF0ZS1jYWxsJyxcbiAgVVBEQVRFX0NBTExfTUVNQkVSOiAndXBkYXRlLWNhbGwtbWVtYmVyJyxcbiAgVVBEQVRFX0NBTExfUEVSTUlTU0lPTlM6ICd1cGRhdGUtY2FsbC1wZXJtaXNzaW9ucycsXG4gIFVQREFURV9DQUxMX1NFVFRJTkdTOiAndXBkYXRlLWNhbGwtc2V0dGluZ3MnLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIE93bkNhcGFiaWxpdHkgPSAodHlwZW9mIE93bkNhcGFiaWxpdHkpW2tleW9mIHR5cGVvZiBPd25DYXBhYmlsaXR5XTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBPd25Vc2VyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3duVXNlciB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIGJhbm5lZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgYmxvY2tlZF91c2VyX2lkcz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2hhbm5lbE11dGU+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgY2hhbm5lbF9tdXRlczogQXJyYXk8Q2hhbm5lbE11dGU+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIGN1c3RvbTogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyXG4gICAqL1xuICBkZWFjdGl2YXRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyXG4gICAqL1xuICBkZWxldGVkX2F0Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PERldmljZT59XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyXG4gICAqL1xuICBkZXZpY2VzOiBBcnJheTxEZXZpY2U+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIGludmlzaWJsZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyXG4gICAqL1xuICBsYXN0X2FjdGl2ZT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgbGF0ZXN0X2hpZGRlbl9jaGFubmVscz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8VXNlck11dGU+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgbXV0ZXM6IEFycmF5PFVzZXJNdXRlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgb25saW5lOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1ByaXZhY3lTZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIHByaXZhY3lfc2V0dGluZ3M/OiBQcml2YWN5U2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7UHVzaE5vdGlmaWNhdGlvblNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgcHVzaF9ub3RpZmljYXRpb25zPzogUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIHJvbGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgdGVhbXM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIHRvdGFsX3VucmVhZF9jb3VudDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIHVucmVhZF9jaGFubmVsczogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIHVucmVhZF9jb3VudDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJcbiAgICovXG4gIHVucmVhZF90aHJlYWRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclxuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBPd25Vc2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBPd25Vc2VyUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGJhbm5lZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBibG9ja2VkX3VzZXJfaWRzPzogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxDaGFubmVsTXV0ZT59XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGNoYW5uZWxfbXV0ZXM6IEFycmF5PENoYW5uZWxNdXRlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgY3VzdG9tOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgZGVhY3RpdmF0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBkZWxldGVkX2F0Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PERldmljZT59XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGRldmljZXM6IEFycmF5PERldmljZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgaW52aXNpYmxlOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGxhc3RfYWN0aXZlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGxhdGVzdF9oaWRkZW5fY2hhbm5lbHM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PFVzZXJNdXRlUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBtdXRlczogQXJyYXk8VXNlck11dGVSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBuYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIG9ubGluZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtQcml2YWN5U2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgcHJpdmFjeV9zZXR0aW5ncz86IFByaXZhY3lTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1B1c2hOb3RpZmljYXRpb25TZXR0aW5nc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBwdXNoX25vdGlmaWNhdGlvbnM/OiBQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIHJldm9rZV90b2tlbnNfaXNzdWVkX2JlZm9yZT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIHJvbGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICB0ZWFtczogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIHRvdGFsX3VucmVhZF9jb3VudDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgdW5yZWFkX2NoYW5uZWxzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICB1bnJlYWRfdGhyZWFkczogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHVzZXIgcmVxdWVzdHMgYWNjZXNzIHRvIGEgZmVhdHVyZSBvbiBhIGNhbGwsXG4gKiBjbGllbnRzIHJlY2VpdmluZyB0aGlzIGV2ZW50IHNob3VsZCBkaXNwbGF5IGEgcGVybWlzc2lvbiByZXF1ZXN0IHRvIHRoZSB1c2VyXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQZXJtaXNzaW9uUmVxdWVzdEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBQZXJtaXNzaW9uUmVxdWVzdEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIHBlcm1pc3Npb25zIHJlcXVlc3RlZCBieSB0aGUgdXNlclxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnRcbiAgICovXG4gIHBlcm1pc3Npb25zOiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5wZXJtaXNzaW9uX3JlcXVlc3RcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBQZXJtaXNzaW9uUmVxdWVzdEV2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFBpblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaW5SZXF1ZXN0IHtcbiAgLyoqXG4gICAqIHRoZSBzZXNzaW9uIElEIG9mIHRoZSB1c2VyIHdobyBwaW5uZWQgdGhlIG1lc3NhZ2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBpblJlcXVlc3RcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIHRoZSB1c2VyIElEIG9mIHRoZSB1c2VyIHdobyBwaW5uZWQgdGhlIG1lc3NhZ2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBpblJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUGluUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaW5SZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBpblJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBQcml2YWN5U2V0dGluZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcml2YWN5U2V0dGluZ3Mge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JlYWRSZWNlaXB0c31cbiAgICogQG1lbWJlcm9mIFByaXZhY3lTZXR0aW5nc1xuICAgKi9cbiAgcmVhZF9yZWNlaXB0cz86IFJlYWRSZWNlaXB0cztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtUeXBpbmdJbmRpY2F0b3JzfVxuICAgKiBAbWVtYmVyb2YgUHJpdmFjeVNldHRpbmdzXG4gICAqL1xuICB0eXBpbmdfaW5kaWNhdG9ycz86IFR5cGluZ0luZGljYXRvcnM7XG59XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUHJpdmFjeVNldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcml2YWN5U2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7UmVhZFJlY2VpcHRzfVxuICAgKiBAbWVtYmVyb2YgUHJpdmFjeVNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHJlYWRfcmVjZWlwdHM/OiBSZWFkUmVjZWlwdHM7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VHlwaW5nSW5kaWNhdG9yc31cbiAgICogQG1lbWJlcm9mIFByaXZhY3lTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICB0eXBpbmdfaW5kaWNhdG9ycz86IFR5cGluZ0luZGljYXRvcnM7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFB1Ymxpc2hlZFRyYWNrSW5mb1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFB1Ymxpc2hlZFRyYWNrSW5mbyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUHVibGlzaGVkVHJhY2tJbmZvXG4gICAqL1xuICBjb2RlY19taW1lX3R5cGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgUHVibGlzaGVkVHJhY2tJbmZvXG4gICAqL1xuICBkdXJhdGlvbl9zZWNvbmRzPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFB1Ymxpc2hlZFRyYWNrSW5mb1xuICAgKi9cbiAgdHJhY2tfdHlwZT86IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzXG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzXG4gICAqL1xuICBkaXNhYmxlZF91bnRpbD86IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzSW5wdXRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NJbnB1dCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TnVsbEJvb2x9XG4gICAqIEBtZW1iZXJvZiBQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NJbnB1dFxuICAgKi9cbiAgZGlzYWJsZWQ/OiBOdWxsQm9vbDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtOdWxsVGltZX1cbiAgICogQG1lbWJlcm9mIFB1c2hOb3RpZmljYXRpb25TZXR0aW5nc0lucHV0XG4gICAqL1xuICBkaXNhYmxlZF91bnRpbD86IE51bGxUaW1lO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFB1c2hOb3RpZmljYXRpb25TZXR0aW5nc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgZGlzYWJsZWRfdW50aWw/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUXVlcnlDYWxsTWVtYmVyc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBRdWVyeUNhbGxNZW1iZXJzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxNZW1iZXJzUmVxdWVzdFxuICAgKi9cbiAgZmlsdGVyX2NvbmRpdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBsaW1pdD86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxNZW1iZXJzUmVxdWVzdFxuICAgKi9cbiAgbmV4dD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxNZW1iZXJzUmVxdWVzdFxuICAgKi9cbiAgcHJldj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxTb3J0UGFyYW1SZXF1ZXN0Pn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBzb3J0PzogQXJyYXk8U29ydFBhcmFtUmVxdWVzdD47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsTWVtYmVyc1JlcXVlc3RcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUXVlcnlDYWxsTWVtYmVyc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlDYWxsTWVtYmVyc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsTWVtYmVyc1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbE1lbWJlcnNSZXNwb25zZVxuICAgKi9cbiAgbWVtYmVyczogQXJyYXk8TWVtYmVyUmVzcG9uc2U+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbE1lbWJlcnNSZXNwb25zZVxuICAgKi9cbiAgbmV4dD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxNZW1iZXJzUmVzcG9uc2VcbiAgICovXG4gIHByZXY/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFF1ZXJ5Q2FsbFN0YXRzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5Q2FsbFN0YXRzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxTdGF0c1JlcXVlc3RcbiAgICovXG4gIGZpbHRlcl9jb25kaXRpb25zPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxTdGF0c1JlcXVlc3RcbiAgICovXG4gIGxpbWl0PzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbFN0YXRzUmVxdWVzdFxuICAgKi9cbiAgbmV4dD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxTdGF0c1JlcXVlc3RcbiAgICovXG4gIHByZXY/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8U29ydFBhcmFtUmVxdWVzdD59XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxTdGF0c1JlcXVlc3RcbiAgICovXG4gIHNvcnQ/OiBBcnJheTxTb3J0UGFyYW1SZXF1ZXN0Pjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUXVlcnlDYWxsU3RhdHNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5Q2FsbFN0YXRzUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxTdGF0c1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbFN0YXRzUmVzcG9uc2VcbiAgICovXG4gIG5leHQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgcHJldj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxDYWxsU3RhdHNSZXBvcnRTdW1tYXJ5UmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsU3RhdHNSZXNwb25zZVxuICAgKi9cbiAgcmVwb3J0czogQXJyYXk8Q2FsbFN0YXRzUmVwb3J0U3VtbWFyeVJlc3BvbnNlPjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUXVlcnlDYWxsc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBRdWVyeUNhbGxzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVxdWVzdFxuICAgKi9cbiAgZmlsdGVyX2NvbmRpdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAqL1xuICBsaW1pdD86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVxdWVzdFxuICAgKi9cbiAgbmV4dD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVxdWVzdFxuICAgKi9cbiAgcHJldj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxTb3J0UGFyYW1SZXF1ZXN0Pn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAqL1xuICBzb3J0PzogQXJyYXk8U29ydFBhcmFtUmVxdWVzdD47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAqL1xuICB3YXRjaD86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFF1ZXJ5Q2FsbHNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5Q2FsbHNSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbFN0YXRlUmVzcG9uc2VGaWVsZHM+fVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsc1Jlc3BvbnNlXG4gICAqL1xuICBjYWxsczogQXJyYXk8Q2FsbFN0YXRlUmVzcG9uc2VGaWVsZHM+O1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsc1Jlc3BvbnNlXG4gICAqL1xuICBuZXh0Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXNwb25zZVxuICAgKi9cbiAgcHJldj86IHN0cmluZztcbn1cbi8qKlxuICogUlRNUCBpbnB1dCBzZXR0aW5nc1xuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSVE1QSW5ncmVzc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJUTVBJbmdyZXNzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSVE1QSW5ncmVzc1xuICAgKi9cbiAgYWRkcmVzczogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSZWFjdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3Rpb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBSZWFjdGlvblJlc3BvbnNlXG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlYWN0aW9uUmVzcG9uc2VcbiAgICovXG4gIGVtb2ppX2NvZGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUmVhY3Rpb25SZXNwb25zZVxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFJlYWN0aW9uUmVzcG9uc2VcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmVhZFJlY2VpcHRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVhZFJlY2VpcHRzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgUmVhZFJlY2VpcHRzXG4gICAqL1xuICBlbmFibGVkPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhdWRpb19vbmx5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSZWNvcmRTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIG1vZGU6IFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlY29yZFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgcXVhbGl0eT86IFJlY29yZFNldHRpbmdzUmVxdWVzdFF1YWxpdHlFbnVtO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID0ge1xuICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgQVVUT19PTjogJ2F1dG8tb24nLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID1cbiAgKHR5cGVvZiBSZWNvcmRTZXR0aW5nc1JlcXVlc3RNb2RlRW51bSlba2V5b2YgdHlwZW9mIFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtXTtcblxuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBSZWNvcmRTZXR0aW5nc1JlcXVlc3RRdWFsaXR5RW51bSA9IHtcbiAgXzM2MFA6ICczNjBwJyxcbiAgXzQ4MFA6ICc0ODBwJyxcbiAgXzcyMFA6ICc3MjBwJyxcbiAgXzEwODBQOiAnMTA4MHAnLFxuICBfMTQ0MFA6ICcxNDQwcCcsXG4gIFBPUlRSQUlUXzM2MFg2NDA6ICdwb3J0cmFpdC0zNjB4NjQwJyxcbiAgUE9SVFJBSVRfNDgwWDg1NDogJ3BvcnRyYWl0LTQ4MHg4NTQnLFxuICBQT1JUUkFJVF83MjBYMTI4MDogJ3BvcnRyYWl0LTcyMHgxMjgwJyxcbiAgUE9SVFJBSVRfMTA4MFgxOTIwOiAncG9ydHJhaXQtMTA4MHgxOTIwJyxcbiAgUE9SVFJBSVRfMTQ0MFgyNTYwOiAncG9ydHJhaXQtMTQ0MHgyNTYwJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBSZWNvcmRTZXR0aW5nc1JlcXVlc3RRdWFsaXR5RW51bSA9XG4gICh0eXBlb2YgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0UXVhbGl0eUVudW0pW2tleW9mIHR5cGVvZiBSZWNvcmRTZXR0aW5nc1JlcXVlc3RRdWFsaXR5RW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmVjb3JkU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlY29yZFNldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBSZWNvcmRTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBhdWRpb19vbmx5OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlY29yZFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIG1vZGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSZWNvcmRTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBxdWFsaXR5OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJlamVjdENhbGxSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVqZWN0Q2FsbFJlcXVlc3Qge1xuICAvKipcbiAgICogUmVhc29uIGZvciByZWplY3RpbmcgdGhlIGNhbGxcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlamVjdENhbGxSZXF1ZXN0XG4gICAqL1xuICByZWFzb24/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJlamVjdENhbGxSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlamVjdENhbGxSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUmVqZWN0Q2FsbFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSZXF1ZXN0UGVybWlzc2lvblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0UGVybWlzc2lvblJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBSZXF1ZXN0UGVybWlzc2lvblJlcXVlc3RcbiAgICovXG4gIHBlcm1pc3Npb25zOiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdFBlcm1pc3Npb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUmVxdWVzdFBlcm1pc3Npb25SZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSaW5nU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmluZ1NldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgUmluZ1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgYXV0b19jYW5jZWxfdGltZW91dF9tczogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFJpbmdTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGluY29taW5nX2NhbGxfdGltZW91dF9tczogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFJpbmdTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIG1pc3NlZF9jYWxsX3RpbWVvdXRfbXM/OiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJpbmdTZXR0aW5nc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmluZ1NldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFJpbmdTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBhdXRvX2NhbmNlbF90aW1lb3V0X21zOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgUmluZ1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGluY29taW5nX2NhbGxfdGltZW91dF9tczogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFJpbmdTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBtaXNzZWRfY2FsbF90aW1lb3V0X21zOiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFNGVUxvY2F0aW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTRlVMb2NhdGlvblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDb29yZGluYXRlc31cbiAgICogQG1lbWJlcm9mIFNGVUxvY2F0aW9uUmVzcG9uc2VcbiAgICovXG4gIGNvb3JkaW5hdGVzOiBDb29yZGluYXRlcztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTRlVMb2NhdGlvblJlc3BvbnNlXG4gICAqL1xuICBkYXRhY2VudGVyOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU0ZVTG9jYXRpb25SZXNwb25zZVxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtMb2NhdGlvbn1cbiAgICogQG1lbWJlcm9mIFNGVUxvY2F0aW9uUmVzcG9uc2VcbiAgICovXG4gIGxvY2F0aW9uOiBMb2NhdGlvbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU0ZVUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTRlVSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU0ZVUmVzcG9uc2VcbiAgICovXG4gIGVkZ2VfbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNGVVJlc3BvbnNlXG4gICAqL1xuICB1cmw6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTRlVSZXNwb25zZVxuICAgKi9cbiAgd3NfZW5kcG9pbnQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU2NyZWVuc2hhcmluZ1NldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNjcmVlbnNoYXJpbmdTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBTY3JlZW5zaGFyaW5nU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhY2Nlc3NfcmVxdWVzdF9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgU2NyZWVuc2hhcmluZ1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VGFyZ2V0UmVzb2x1dGlvbn1cbiAgICogQG1lbWJlcm9mIFNjcmVlbnNoYXJpbmdTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHRhcmdldF9yZXNvbHV0aW9uPzogVGFyZ2V0UmVzb2x1dGlvbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU2NyZWVuc2hhcmluZ1NldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTY3JlZW5zaGFyaW5nU2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFNjcmVlbnNoYXJpbmdTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBhY2Nlc3NfcmVxdWVzdF9lbmFibGVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBTY3JlZW5zaGFyaW5nU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtUYXJnZXRSZXNvbHV0aW9ufVxuICAgKiBAbWVtYmVyb2YgU2NyZWVuc2hhcmluZ1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHRhcmdldF9yZXNvbHV0aW9uPzogVGFyZ2V0UmVzb2x1dGlvbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU2VuZENhbGxFdmVudFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZW5kQ2FsbEV2ZW50UmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBTZW5kQ2FsbEV2ZW50UmVxdWVzdFxuICAgKi9cbiAgY3VzdG9tPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU2VuZENhbGxFdmVudFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZENhbGxFdmVudFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTZW5kQ2FsbEV2ZW50UmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFNlbmRSZWFjdGlvblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZW5kUmVhY3Rpb25SZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFNlbmRSZWFjdGlvblJlcXVlc3RcbiAgICovXG4gIGN1c3RvbT86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU2VuZFJlYWN0aW9uUmVxdWVzdFxuICAgKi9cbiAgZW1vamlfY29kZT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTZW5kUmVhY3Rpb25SZXF1ZXN0XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFNlbmRSZWFjdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZFJlYWN0aW9uUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTZW5kUmVhY3Rpb25SZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtSZWFjdGlvblJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgU2VuZFJlYWN0aW9uUmVzcG9uc2VcbiAgICovXG4gIHJlYWN0aW9uOiBSZWFjdGlvblJlc3BvbnNlO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTb3J0UGFyYW1SZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU29ydFBhcmFtUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBEaXJlY3Rpb24gb2Ygc29ydGluZywgMSBmb3IgQXNjZW5kaW5nLCAtMSBmb3IgRGVzY2VuZGluZywgZGVmYXVsdCBpcyAxXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBTb3J0UGFyYW1SZXF1ZXN0XG4gICAqL1xuICBkaXJlY3Rpb24/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBOYW1lIG9mIGZpZWxkIHRvIHNvcnQgYnlcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNvcnRQYXJhbVJlcXVlc3RcbiAgICovXG4gIGZpZWxkPzogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTdGFydEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhcnRITFNCcm9hZGNhc3RpbmdSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFN0YXJ0SExTQnJvYWRjYXN0aW5nUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RhcnRITFNCcm9hZGNhc3RpbmdSZXNwb25zZVxuICAgKi9cbiAgcGxheWxpc3RfdXJsOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0YXJ0UmVjb3JkaW5nUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0UmVjb3JkaW5nUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RhcnRSZWNvcmRpbmdSZXF1ZXN0XG4gICAqL1xuICByZWNvcmRpbmdfZXh0ZXJuYWxfc3RvcmFnZT86IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RhcnRSZWNvcmRpbmdSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0UmVjb3JkaW5nUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFN0YXJ0UmVjb3JkaW5nUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0YXJ0VHJhbnNjcmlwdGlvblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGFydFRyYW5zY3JpcHRpb25SZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTdGFydFRyYW5zY3JpcHRpb25SZXF1ZXN0XG4gICAqL1xuICB0cmFuc2NyaXB0aW9uX2V4dGVybmFsX3N0b3JhZ2U/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0YXJ0VHJhbnNjcmlwdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhcnRUcmFuc2NyaXB0aW9uUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFN0YXJ0VHJhbnNjcmlwdGlvblJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTdGF0c1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBTdGF0c1xuICAgKi9cbiAgYXZlcmFnZV9zZWNvbmRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgU3RhdHNcbiAgICovXG4gIG1heF9zZWNvbmRzOiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0YXRzT3B0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRzT3B0aW9ucyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgU3RhdHNPcHRpb25zXG4gICAqL1xuICByZXBvcnRpbmdfaW50ZXJ2YWxfbXM6IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RvcEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RvcEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTdG9wTGl2ZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcExpdmVSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgU3RvcExpdmVSZXNwb25zZVxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTdG9wTGl2ZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTdG9wUmVjb3JkaW5nUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdG9wUmVjb3JkaW5nUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTdG9wUmVjb3JkaW5nUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0b3BUcmFuc2NyaXB0aW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdG9wVHJhbnNjcmlwdGlvblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RvcFRyYW5zY3JpcHRpb25SZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3Vic2Vzc2lvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNlc3Npb24ge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFN1YnNlc3Npb25cbiAgICovXG4gIGVuZGVkX2F0OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgU3Vic2Vzc2lvblxuICAgKi9cbiAgam9pbmVkX2F0OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TWVkaWFQdWJTdWJIaW50fVxuICAgKiBAbWVtYmVyb2YgU3Vic2Vzc2lvblxuICAgKi9cbiAgcHViX3N1Yl9oaW50PzogTWVkaWFQdWJTdWJIaW50O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFN1YnNlc3Npb25cbiAgICovXG4gIHNmdV9pZDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBUYXJnZXRSZXNvbHV0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0UmVzb2x1dGlvbiB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVGFyZ2V0UmVzb2x1dGlvblxuICAgKi9cbiAgYml0cmF0ZT86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBUYXJnZXRSZXNvbHV0aW9uXG4gICAqL1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBUYXJnZXRSZXNvbHV0aW9uXG4gICAqL1xuICB3aWR0aDogbnVtYmVyO1xufVxuLyoqXG4gKiBTZXRzIHRocmVzaG9sZHMgZm9yIEFJIG1vZGVyYXRpb25cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVGhyZXNob2xkc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFRocmVzaG9sZHMge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0xhYmVsVGhyZXNob2xkc31cbiAgICogQG1lbWJlcm9mIFRocmVzaG9sZHNcbiAgICovXG4gIGV4cGxpY2l0PzogTGFiZWxUaHJlc2hvbGRzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0xhYmVsVGhyZXNob2xkc31cbiAgICogQG1lbWJlcm9mIFRocmVzaG9sZHNcbiAgICovXG4gIHNwYW0/OiBMYWJlbFRocmVzaG9sZHM7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TGFiZWxUaHJlc2hvbGRzfVxuICAgKiBAbWVtYmVyb2YgVGhyZXNob2xkc1xuICAgKi9cbiAgdG94aWM/OiBMYWJlbFRocmVzaG9sZHM7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFRodW1ibmFpbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGh1bWJuYWlsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFRodW1ibmFpbFJlc3BvbnNlXG4gICAqL1xuICBpbWFnZV91cmw6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVGh1bWJuYWlsc1NldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRodW1ibmFpbHNTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBUaHVtYm5haWxzU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBlbmFibGVkPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVGh1bWJuYWlsc1NldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUaHVtYm5haWxzU2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFRodW1ibmFpbHNTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBlbmFibGVkOiBib29sZWFuO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgY2xvc2VkX2NhcHRpb25fbW9kZT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBtb2RlOiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0TW9kZUVudW07XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID0ge1xuICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgQVVUT19PTjogJ2F1dG8tb24nLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3RNb2RlRW51bSA9XG4gICh0eXBlb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtKVtrZXlvZiB0eXBlb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgY2xvc2VkX2NhcHRpb25fbW9kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgbGFuZ3VhZ2VzOiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFRyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBtb2RlOiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXNwb25zZU1vZGVFbnVtO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IFRyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlTW9kZUVudW0gPSB7XG4gIEFWQUlMQUJMRTogJ2F2YWlsYWJsZScsXG4gIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICBBVVRPX09OOiAnYXV0by1vbicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVzcG9uc2VNb2RlRW51bSA9XG4gICh0eXBlb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVzcG9uc2VNb2RlRW51bSlba2V5b2YgdHlwZW9mIFRyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlTW9kZUVudW1dO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFR5cGluZ0luZGljYXRvcnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUeXBpbmdJbmRpY2F0b3JzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVHlwaW5nSW5kaWNhdG9yc1xuICAgKi9cbiAgZW5hYmxlZD86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVuYmxvY2tVc2VyUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVuYmxvY2tVc2VyUmVxdWVzdCB7XG4gIC8qKlxuICAgKiB0aGUgdXNlciB0byB1bmJsb2NrXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbmJsb2NrVXNlclJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVW5ibG9ja1VzZXJSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVuYmxvY2tVc2VyUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbmJsb2NrVXNlclJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHVzZXIgaXMgdW5ibG9ja2VkIG9uIGEgY2FsbCxcbiAqIHRoaXMgY2FuIGJlIHVzZWZ1bCB0byBub3RpZnkgdGhlIHVzZXIgdGhhdCB0aGV5IGNhbiBub3cgam9pbiB0aGUgY2FsbCBhZ2FpblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVbmJsb2NrZWRVc2VyRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVbmJsb2NrZWRVc2VyRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVuYmxvY2tlZFVzZXJFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbmJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwudW5ibG9ja2VkX3VzZXJcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVuYmxvY2tlZFVzZXJFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFVuYmxvY2tlZFVzZXJFdmVudFxuICAgKi9cbiAgdXNlcjogVXNlclJlc3BvbnNlO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVbnBpblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVbnBpblJlcXVlc3Qge1xuICAvKipcbiAgICogdGhlIHNlc3Npb24gSUQgb2YgdGhlIHVzZXIgd2hvIHBpbm5lZCB0aGUgbWVzc2FnZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVW5waW5SZXF1ZXN0XG4gICAqL1xuICBzZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgdXNlciBJRCBvZiB0aGUgdXNlciB3aG8gcGlubmVkIHRoZSBtZXNzYWdlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbnBpblJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVW5waW5SZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVucGluUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbnBpblJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3Qge1xuICAvKipcbiAgICogTGlzdCBvZiB1c2VySUQgdG8gcmVtb3ZlXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICByZW1vdmVfbWVtYmVycz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBMaXN0IG9mIG1lbWJlcnMgdG8gdXBkYXRlIG9yIGluc2VydFxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVxdWVzdD59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3RcbiAgICovXG4gIHVwZGF0ZV9tZW1iZXJzPzogQXJyYXk8TWVtYmVyUmVxdWVzdD47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUNhbGxNZW1iZXJzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbE1lbWJlcnNSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlXG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUNhbGxSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQ2FsbFJlcXVlc3Qge1xuICAvKipcbiAgICogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgb2JqZWN0XG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsUmVxdWVzdFxuICAgKi9cbiAgc2V0dGluZ3Nfb3ZlcnJpZGU/OiBDYWxsU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICogdGhlIHRpbWUgdGhlIGNhbGwgaXMgc2NoZWR1bGVkIHRvIHN0YXJ0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsUmVxdWVzdFxuICAgKi9cbiAgc3RhcnRzX2F0Pzogc3RyaW5nO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2FsbFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVDYWxsUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNZW1iZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgbWVtYmVyc2hpcD86IE1lbWJlclJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE93bkNhcGFiaWxpdHk+fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBvd25fY2FwYWJpbGl0aWVzOiBBcnJheTxPd25DYXBhYmlsaXR5Pjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0XG4gICAqL1xuICBncmFudF9wZXJtaXNzaW9ucz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3RcbiAgICovXG4gIHJldm9rZV9wZXJtaXNzaW9ucz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdFxuICAgKi9cbiAgdXNlcl9pZDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIG1pbGxpc2Vjb25kc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB0byBub3RpZnkgYWJvdXQgcGVybWlzc2lvbiBjaGFuZ2VzIGZvciBhIHVzZXIsIGNsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIHVwZGF0ZSB0aGVpciBVSSBhY2NvcmRpbmdseVxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZWRDYWxsUGVybWlzc2lvbnNFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBjYXBhYmlsaXRpZXMgb2YgdGhlIGN1cnJlbnQgdXNlclxuICAgKiBAdHlwZSB7QXJyYXk8T3duQ2FwYWJpbGl0eT59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnRcbiAgICovXG4gIG93bl9jYXBhYmlsaXRpZXM6IEFycmF5PE93bkNhcGFiaWxpdHk+O1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5wZXJtaXNzaW9uc191cGRhdGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnRcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXNlckJhbm5lZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckJhbm5lZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyQmFubmVkRXZlbnRcbiAgICovXG4gIGNoYW5uZWxfaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyQmFubmVkRXZlbnRcbiAgICovXG4gIGNoYW5uZWxfdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJCYW5uZWRFdmVudFxuICAgKi9cbiAgY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlckJhbm5lZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlck9iamVjdH1cbiAgICogQG1lbWJlcm9mIFVzZXJCYW5uZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9ieTogVXNlck9iamVjdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyQmFubmVkRXZlbnRcbiAgICovXG4gIGV4cGlyYXRpb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlckJhbm5lZEV2ZW50XG4gICAqL1xuICByZWFzb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFVzZXJCYW5uZWRFdmVudFxuICAgKi9cbiAgc2hhZG93OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJCYW5uZWRFdmVudFxuICAgKi9cbiAgdGVhbT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyQmFubmVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgVXNlckJhbm5lZEV2ZW50XG4gICAqL1xuICB1c2VyPzogVXNlck9iamVjdDtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXNlckRlYWN0aXZhdGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VyRGVhY3RpdmF0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlckRlYWN0aXZhdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgVXNlckRlYWN0aXZhdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYnk6IFVzZXJPYmplY3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlckRlYWN0aXZhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgVXNlckRlYWN0aXZhdGVkRXZlbnRcbiAgICovXG4gIHVzZXI/OiBVc2VyT2JqZWN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyRGVsZXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckRlbGV0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlckRlbGV0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyRGVsZXRlZEV2ZW50XG4gICAqL1xuICBkZWxldGVfY29udmVyc2F0aW9uX2NoYW5uZWxzOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyRGVsZXRlZEV2ZW50XG4gICAqL1xuICBoYXJkX2RlbGV0ZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVXNlckRlbGV0ZWRFdmVudFxuICAgKi9cbiAgbWFya19tZXNzYWdlc19kZWxldGVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJEZWxldGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgVXNlckRlbGV0ZWRFdmVudFxuICAgKi9cbiAgdXNlcj86IFVzZXJPYmplY3Q7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJJbmZvUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VySW5mb1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFVzZXJJbmZvUmVzcG9uc2VcbiAgICovXG4gIGN1c3RvbTogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VySW5mb1Jlc3BvbnNlXG4gICAqL1xuICBpbWFnZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJJbmZvUmVzcG9uc2VcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgVXNlckluZm9SZXNwb25zZVxuICAgKi9cbiAgcm9sZXM6IEFycmF5PHN0cmluZz47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJNdXRlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlck11dGUge1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGNyZWF0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyTXV0ZVxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIG11dGUgZXhwaXJhdGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck11dGVcbiAgICovXG4gIGV4cGlyZXM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlck9iamVjdH1cbiAgICogQG1lbWJlcm9mIFVzZXJNdXRlXG4gICAqL1xuICB0YXJnZXQ/OiBVc2VyT2JqZWN0O1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIHRoZSBsYXN0IHVwZGF0ZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck11dGVcbiAgICovXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgVXNlck11dGVcbiAgICovXG4gIHVzZXI/OiBVc2VyT2JqZWN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyTXV0ZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlck11dGVSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck11dGVSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJNdXRlUmVzcG9uc2VcbiAgICovXG4gIGV4cGlyZXM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgVXNlck11dGVSZXNwb25zZVxuICAgKi9cbiAgdGFyZ2V0PzogVXNlclJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJNdXRlUmVzcG9uc2VcbiAgICovXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBVc2VyTXV0ZVJlc3BvbnNlXG4gICAqL1xuICB1c2VyPzogVXNlclJlc3BvbnNlO1xufVxuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJNdXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlck11dGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJNdXRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck11dGVkRXZlbnRcbiAgICovXG4gIHRhcmdldF91c2VyPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBVc2VyTXV0ZWRFdmVudFxuICAgKi9cbiAgdGFyZ2V0X3VzZXJzPzogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyTXV0ZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJPYmplY3R9XG4gICAqIEBtZW1iZXJvZiBVc2VyTXV0ZWRFdmVudFxuICAgKi9cbiAgdXNlcj86IFVzZXJPYmplY3Q7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgY2hhdCB1c2VyXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJPYmplY3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VyT2JqZWN0IHtcbiAgLyoqXG4gICAqIEV4cGlyYXRpb24gZGF0ZSBvZiB0aGUgYmFuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICBiYW5fZXhwaXJlcz86IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZXRoZXIgYSB1c2VyIGlzIGJhbm5lZCBvciBub3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICBiYW5uZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHJlYWRvbmx5IGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICBjdXN0b206IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKiBEYXRlIG9mIGRlYWN0aXZhdGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck9iamVjdFxuICAgKi9cbiAgcmVhZG9ubHkgZGVhY3RpdmF0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgZGVsZXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHJlYWRvbmx5IGRlbGV0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBVbmlxdWUgdXNlciBpZGVudGlmaWVyXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICBpbnZpc2libGU/OiBib29sZWFuO1xuICAvKipcbiAgICogUHJlZmVycmVkIGxhbmd1YWdlIG9mIGEgdXNlclxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck9iamVjdFxuICAgKi9cbiAgbGFuZ3VhZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlIG9mIGxhc3QgYWN0aXZpdHlcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHJlYWRvbmx5IGxhc3RfYWN0aXZlPzogc3RyaW5nO1xuICAvKipcbiAgICogV2hldGhlciBhIHVzZXIgb25saW5lIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHJlYWRvbmx5IG9ubGluZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtQcml2YWN5U2V0dGluZ3N9XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICBwcml2YWN5X3NldHRpbmdzPzogUHJpdmFjeVNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1B1c2hOb3RpZmljYXRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHB1c2hfbm90aWZpY2F0aW9ucz86IFB1c2hOb3RpZmljYXRpb25TZXR0aW5ncztcbiAgLyoqXG4gICAqIFJldm9jYXRpb24gZGF0ZSBmb3IgdG9rZW5zXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyT2JqZWN0XG4gICAqL1xuICByZXZva2VfdG9rZW5zX2lzc3VlZF9iZWZvcmU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSBzZXQgb2YgdXNlciBwZXJtaXNzaW9uc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlck9iamVjdFxuICAgKi9cbiAgcm9sZTogc3RyaW5nO1xuICAvKipcbiAgICogTGlzdCBvZiB0ZWFtcyB1c2VyIGlzIGEgcGFydCBvZlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHRlYW1zPzogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiB0aGUgbGFzdCB1cGRhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJPYmplY3RcbiAgICovXG4gIHJlYWRvbmx5IHVwZGF0ZWRfYXQ/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJQcmVzZW5jZUNoYW5nZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcmVzZW5jZUNoYW5nZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclByZXNlbmNlQ2hhbmdlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclByZXNlbmNlQ2hhbmdlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlck9iamVjdH1cbiAgICogQG1lbWJlcm9mIFVzZXJQcmVzZW5jZUNoYW5nZWRFdmVudFxuICAgKi9cbiAgdXNlcj86IFVzZXJPYmplY3Q7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJSZWFjdGl2YXRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclJlYWN0aXZhdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZWFjdGl2YXRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlYWN0aXZhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyT2JqZWN0fVxuICAgKiBAbWVtYmVyb2YgVXNlclJlYWN0aXZhdGVkRXZlbnRcbiAgICovXG4gIHVzZXI/OiBVc2VyT2JqZWN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFVzZXJSZXF1ZXN0XG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICogVXNlciBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlcXVlc3RcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlcXVlc3RcbiAgICovXG4gIGltYWdlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVxdWVzdFxuICAgKi9cbiAgaW52aXNpYmxlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVxdWVzdFxuICAgKi9cbiAgbGFuZ3VhZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBuYW1lIG9mIHVzZXJcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXF1ZXN0XG4gICAqL1xuICBuYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1ByaXZhY3lTZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXF1ZXN0XG4gICAqL1xuICBwcml2YWN5X3NldHRpbmdzPzogUHJpdmFjeVNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1B1c2hOb3RpZmljYXRpb25TZXR0aW5nc0lucHV0fVxuICAgKiBAbWVtYmVyb2YgVXNlclJlcXVlc3RcbiAgICovXG4gIHB1c2hfbm90aWZpY2F0aW9ucz86IFB1c2hOb3RpZmljYXRpb25TZXR0aW5nc0lucHV0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VyUmVzcG9uc2Uge1xuICAvKipcbiAgICogV2hldGhlciBhIHVzZXIgaXMgYmFubmVkIG9yIG5vdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgYmFubmVkOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIGJsb2NrZWRfdXNlcl9pZHM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgb2JqZWN0XG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgY3VzdG9tOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICogRGF0ZSBvZiBkZWFjdGl2YXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgZGVhY3RpdmF0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgZGVsZXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgZGVsZXRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqIFVuaXF1ZSB1c2VyIGlkZW50aWZpZXJcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIGltYWdlPzogc3RyaW5nO1xuICAvKipcbiAgICogUHJlZmVycmVkIGxhbmd1YWdlIG9mIGEgdXNlclxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICAvKipcbiAgICogRGF0ZSBvZiBsYXN0IGFjdGl2aXR5XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIGxhc3RfYWN0aXZlPzogc3RyaW5nO1xuICAvKipcbiAgICogT3B0aW9uYWwgbmFtZSBvZiB1c2VyXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIG5hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGV0aGVyIGEgdXNlciBvbmxpbmUgb3Igbm90XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICBvbmxpbmU6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBSZXZvY2F0aW9uIGRhdGUgZm9yIHRva2Vuc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICByZXZva2VfdG9rZW5zX2lzc3VlZF9iZWZvcmU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSBzZXQgb2YgdXNlciBwZXJtaXNzaW9uc1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICByb2xlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBMaXN0IG9mIHRlYW1zIHVzZXIgaXMgYSBwYXJ0IG9mXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICB0ZWFtczogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiB0aGUgbGFzdCB1cGRhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyU2Vzc2lvblN0YXRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclNlc3Npb25TdGF0cyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgYnJvd3Nlcj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBicm93c2VyX3ZlcnNpb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgY3VycmVudF9pcD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBjdXJyZW50X3NmdT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBkZXZpY2VfbW9kZWw/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgZGV2aWNlX3ZlcnNpb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgZGlzdGFuY2VfdG9fc2Z1X2tpbG9tZXRlcnM/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgZnJlZXplX2R1cmF0aW9uX3NlY29uZHM6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtHZW9sb2NhdGlvblJlc3VsdH1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIGdlb2xvY2F0aW9uPzogR2VvbG9jYXRpb25SZXN1bHQ7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7U3RhdHN9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBqaXR0ZXI/OiBTdGF0cztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTdGF0c31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIGxhdGVuY3k/OiBTdGF0cztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBtYXhfZmlyX3Blcl9zZWNvbmQ/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgbWF4X2ZyZWV6ZV9mcmFjdGlvbjogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIG1heF9mcmVlemVzX2R1cmF0aW9uX3NlY29uZHM6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBtYXhfZnJlZXplc19wZXJfc2Vjb25kPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIG1heF9uYWNrX3Blcl9zZWNvbmQ/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgbWF4X3BsaV9wZXJfc2Vjb25kPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1ZpZGVvUXVhbGl0eX1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIG1heF9wdWJsaXNoaW5nX3ZpZGVvX3F1YWxpdHk/OiBWaWRlb1F1YWxpdHk7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VmlkZW9RdWFsaXR5fVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgbWF4X3JlY2VpdmluZ192aWRlb19xdWFsaXR5PzogVmlkZW9RdWFsaXR5O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIG9zPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIG9zX3ZlcnNpb24/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgcGFja2V0X2xvc3NfZnJhY3Rpb246IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNZWRpYVB1YlN1YkhpbnR9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBwdWJfc3ViX2hpbnRzPzogTWVkaWFQdWJTdWJIaW50O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PFB1Ymxpc2hlZFRyYWNrSW5mbz59XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBwdWJsaXNoZWRfdHJhY2tzPzogQXJyYXk8UHVibGlzaGVkVHJhY2tJbmZvPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNT1NTdGF0c31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHB1Ymxpc2hlcl9hdWRpb19tb3M/OiBNT1NTdGF0cztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTdGF0c31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHB1Ymxpc2hlcl9qaXR0ZXI/OiBTdGF0cztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTdGF0c31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHB1Ymxpc2hlcl9sYXRlbmN5PzogU3RhdHM7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgcHVibGlzaGVyX25vaXNlX2NhbmNlbGxhdGlvbl9zZWNvbmRzPzogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHB1Ymxpc2hlcl9wYWNrZXRfbG9zc19mcmFjdGlvbjogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHB1Ymxpc2hlcl9xdWFsaXR5X2xpbWl0YXRpb25fZnJhY3Rpb24/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBudW1iZXI7IH19XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBwdWJsaXNoZXJfdmlkZW9fcXVhbGl0eV9saW1pdGF0aW9uX2R1cmF0aW9uX3NlY29uZHM/OiB7XG4gICAgW2tleTogc3RyaW5nXTogbnVtYmVyO1xuICB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHB1Ymxpc2hpbmdfYXVkaW9fY29kZWM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgcHVibGlzaGluZ19kdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgcHVibGlzaGluZ192aWRlb19jb2RlYz86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBxdWFsaXR5X3Njb3JlOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgcmVjZWl2aW5nX2F1ZGlvX2NvZGVjPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHJlY2VpdmluZ19kdXJhdGlvbl9zZWNvbmRzOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgcmVjZWl2aW5nX3ZpZGVvX2NvZGVjPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHNkaz86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBzZGtfdmVyc2lvbj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBzZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TU9TU3RhdHN9XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICBzdWJzY3JpYmVyX2F1ZGlvX21vcz86IE1PU1N0YXRzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1N0YXRzfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgc3Vic2NyaWJlcl9qaXR0ZXI/OiBTdGF0cztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTdGF0c31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHN1YnNjcmliZXJfbGF0ZW5jeT86IFN0YXRzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHN1YnNjcmliZXJfdmlkZW9fcXVhbGl0eV90aHJvdHRsZWRfZHVyYXRpb25fc2Vjb25kcz86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxTdWJzZXNzaW9uPn1cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHN1YnNlc3Npb25zPzogQXJyYXk8U3Vic2Vzc2lvbj47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFRpbWVsaW5lfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgdGltZWxpbmU/OiBDYWxsVGltZWxpbmU7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgdG90YWxfcGl4ZWxzX2luOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclNlc3Npb25TdGF0c1xuICAgKi9cbiAgdG90YWxfcGl4ZWxzX291dDogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyU2Vzc2lvblN0YXRzXG4gICAqL1xuICB0cnVuY2F0ZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJTZXNzaW9uU3RhdHNcbiAgICovXG4gIHdlYnJ0Y192ZXJzaW9uPzogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyU3RhdHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VyU3RhdHMge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJJbmZvUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBVc2VyU3RhdHNcbiAgICovXG4gIGluZm86IFVzZXJJbmZvUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVXNlclN0YXRzXG4gICAqL1xuICBtaW5fZXZlbnRfdHM6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBVc2VyU3RhdHNcbiAgICovXG4gIHJhdGluZz86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxVc2VyU2Vzc2lvblN0YXRzPn1cbiAgICogQG1lbWJlcm9mIFVzZXJTdGF0c1xuICAgKi9cbiAgc2Vzc2lvbl9zdGF0czogQXJyYXk8VXNlclNlc3Npb25TdGF0cz47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJVbmJhbm5lZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclVuYmFubmVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJVbmJhbm5lZEV2ZW50XG4gICAqL1xuICBjaGFubmVsX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclVuYmFubmVkRXZlbnRcbiAgICovXG4gIGNoYW5uZWxfdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJVbmJhbm5lZEV2ZW50XG4gICAqL1xuICBjaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyVW5iYW5uZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBVc2VyVW5iYW5uZWRFdmVudFxuICAgKi9cbiAgc2hhZG93OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJVbmJhbm5lZEV2ZW50XG4gICAqL1xuICB0ZWFtPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJVbmJhbm5lZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlck9iamVjdH1cbiAgICogQG1lbWJlcm9mIFVzZXJVbmJhbm5lZEV2ZW50XG4gICAqL1xuICB1c2VyPzogVXNlck9iamVjdDtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXNlclVwZGF0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJVcGRhdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyVXBkYXRlZEV2ZW50XG4gICAqL1xuICByZWNlaXZlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyVXBkYXRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlck9iamVjdH1cbiAgICogQG1lbWJlcm9mIFVzZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIHVzZXI/OiBVc2VyT2JqZWN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBWaWRlb1F1YWxpdHlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb1F1YWxpdHkge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1ZpZGVvUmVzb2x1dGlvbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvUXVhbGl0eVxuICAgKi9cbiAgcmVzb2x1dGlvbj86IFZpZGVvUmVzb2x1dGlvbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBWaWRlb1F1YWxpdHlcbiAgICovXG4gIHVzYWdlX3R5cGU/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFZpZGVvUmVzb2x1dGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvUmVzb2x1dGlvbiB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVmlkZW9SZXNvbHV0aW9uXG4gICAqL1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBWaWRlb1Jlc29sdXRpb25cbiAgICovXG4gIHdpZHRoOiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFZpZGVvU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9TZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBWaWRlb1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgYWNjZXNzX3JlcXVlc3RfZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBjYW1lcmFfZGVmYXVsdF9vbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGNhbWVyYV9mYWNpbmc/OiBWaWRlb1NldHRpbmdzUmVxdWVzdENhbWVyYUZhY2luZ0VudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBlbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtUYXJnZXRSZXNvbHV0aW9ufVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHRhcmdldF9yZXNvbHV0aW9uPzogVGFyZ2V0UmVzb2x1dGlvbjtcbn1cblxuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBWaWRlb1NldHRpbmdzUmVxdWVzdENhbWVyYUZhY2luZ0VudW0gPSB7XG4gIEZST05UOiAnZnJvbnQnLFxuICBCQUNLOiAnYmFjaycsXG4gIEVYVEVSTkFMOiAnZXh0ZXJuYWwnLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFZpZGVvU2V0dGluZ3NSZXF1ZXN0Q2FtZXJhRmFjaW5nRW51bSA9XG4gICh0eXBlb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RDYW1lcmFGYWNpbmdFbnVtKVtrZXlvZiB0eXBlb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RDYW1lcmFGYWNpbmdFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBWaWRlb1NldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb1NldHRpbmdzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBWaWRlb1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgY2FtZXJhX2RlZmF1bHRfb246IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBjYW1lcmFfZmFjaW5nOiBWaWRlb1NldHRpbmdzUmVzcG9uc2VDYW1lcmFGYWNpbmdFbnVtO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBWaWRlb1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VGFyZ2V0UmVzb2x1dGlvbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgdGFyZ2V0X3Jlc29sdXRpb246IFRhcmdldFJlc29sdXRpb247XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgVmlkZW9TZXR0aW5nc1Jlc3BvbnNlQ2FtZXJhRmFjaW5nRW51bSA9IHtcbiAgRlJPTlQ6ICdmcm9udCcsXG4gIEJBQ0s6ICdiYWNrJyxcbiAgRVhURVJOQUw6ICdleHRlcm5hbCcsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgVmlkZW9TZXR0aW5nc1Jlc3BvbnNlQ2FtZXJhRmFjaW5nRW51bSA9XG4gICh0eXBlb2YgVmlkZW9TZXR0aW5nc1Jlc3BvbnNlQ2FtZXJhRmFjaW5nRW51bSlba2V5b2YgdHlwZW9mIFZpZGVvU2V0dGluZ3NSZXNwb25zZUNhbWVyYUZhY2luZ0VudW1dO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFdTQXV0aE1lc3NhZ2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXU0F1dGhNZXNzYWdlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgV1NBdXRoTWVzc2FnZVxuICAgKi9cbiAgcHJvZHVjdHM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFdTQXV0aE1lc3NhZ2VcbiAgICovXG4gIHRva2VuOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIFdTQXV0aE1lc3NhZ2VcbiAgICovXG4gIHVzZXJfZGV0YWlsczogQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdDtcbn1cbi8qKlxuICogQHR5cGUgV1NFdmVudFxuICogVGhlIGRpc2NyaW1pbmF0b3Igb2JqZWN0IGZvciBhbGwgd2Vic29ja2V0IGV2ZW50cywgaXQgbWFwcyBldmVudHMnIHBheWxvYWQgdG8gdGhlIGZpbmFsIHR5cGVcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IHR5cGUgV1NFdmVudCA9XG4gIHwgKHsgdHlwZTogJ2NhbGwuYWNjZXB0ZWQnIH0gJiBDYWxsQWNjZXB0ZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5ibG9ja2VkX3VzZXInIH0gJiBCbG9ja2VkVXNlckV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLmNsb3NlZF9jYXB0aW9uJyB9ICYgQ2xvc2VkQ2FwdGlvbkV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLmNyZWF0ZWQnIH0gJiBDYWxsQ3JlYXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLmRlbGV0ZWQnIH0gJiBDYWxsRGVsZXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLmVuZGVkJyB9ICYgQ2FsbEVuZGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwuaGxzX2Jyb2FkY2FzdGluZ19mYWlsZWQnIH0gJiBDYWxsSExTQnJvYWRjYXN0aW5nRmFpbGVkRXZlbnQpXG4gIHwgKHtcbiAgICAgIHR5cGU6ICdjYWxsLmhsc19icm9hZGNhc3Rpbmdfc3RhcnRlZCc7XG4gICAgfSAmIENhbGxITFNCcm9hZGNhc3RpbmdTdGFydGVkRXZlbnQpXG4gIHwgKHtcbiAgICAgIHR5cGU6ICdjYWxsLmhsc19icm9hZGNhc3Rpbmdfc3RvcHBlZCc7XG4gICAgfSAmIENhbGxITFNCcm9hZGNhc3RpbmdTdG9wcGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwubGl2ZV9zdGFydGVkJyB9ICYgQ2FsbExpdmVTdGFydGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwubWVtYmVyX2FkZGVkJyB9ICYgQ2FsbE1lbWJlckFkZGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwubWVtYmVyX3JlbW92ZWQnIH0gJiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLm1lbWJlcl91cGRhdGVkJyB9ICYgQ2FsbE1lbWJlclVwZGF0ZWRFdmVudClcbiAgfCAoe1xuICAgICAgdHlwZTogJ2NhbGwubWVtYmVyX3VwZGF0ZWRfcGVybWlzc2lvbic7XG4gICAgfSAmIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLm1pc3NlZCcgfSAmIENhbGxNaXNzZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5ub3RpZmljYXRpb24nIH0gJiBDYWxsTm90aWZpY2F0aW9uRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwucGVybWlzc2lvbl9yZXF1ZXN0JyB9ICYgUGVybWlzc2lvblJlcXVlc3RFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5wZXJtaXNzaW9uc191cGRhdGVkJyB9ICYgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJlYWN0aW9uX25ldycgfSAmIENhbGxSZWFjdGlvbkV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJlY29yZGluZ19mYWlsZWQnIH0gJiBDYWxsUmVjb3JkaW5nRmFpbGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwucmVjb3JkaW5nX3JlYWR5JyB9ICYgQ2FsbFJlY29yZGluZ1JlYWR5RXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwucmVjb3JkaW5nX3N0YXJ0ZWQnIH0gJiBDYWxsUmVjb3JkaW5nU3RhcnRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJlY29yZGluZ19zdG9wcGVkJyB9ICYgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5yZWplY3RlZCcgfSAmIENhbGxSZWplY3RlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJpbmcnIH0gJiBDYWxsUmluZ0V2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnNlc3Npb25fZW5kZWQnIH0gJiBDYWxsU2Vzc2lvbkVuZGVkRXZlbnQpXG4gIHwgKHtcbiAgICAgIHR5cGU6ICdjYWxsLnNlc3Npb25fcGFydGljaXBhbnRfY291bnRfdXBkYXRlZCc7XG4gICAgfSAmIENhbGxTZXNzaW9uUGFydGljaXBhbnRDb3VudHNVcGRhdGVkRXZlbnQpXG4gIHwgKHtcbiAgICAgIHR5cGU6ICdjYWxsLnNlc3Npb25fcGFydGljaXBhbnRfam9pbmVkJztcbiAgICB9ICYgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZEV2ZW50KVxuICB8ICh7XG4gICAgICB0eXBlOiAnY2FsbC5zZXNzaW9uX3BhcnRpY2lwYW50X2xlZnQnO1xuICAgIH0gJiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnNlc3Npb25fc3RhcnRlZCcgfSAmIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnRyYW5zY3JpcHRpb25fZmFpbGVkJyB9ICYgQ2FsbFRyYW5zY3JpcHRpb25GYWlsZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC50cmFuc2NyaXB0aW9uX3JlYWR5JyB9ICYgQ2FsbFRyYW5zY3JpcHRpb25SZWFkeUV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnRyYW5zY3JpcHRpb25fc3RhcnRlZCcgfSAmIENhbGxUcmFuc2NyaXB0aW9uU3RhcnRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnRyYW5zY3JpcHRpb25fc3RvcHBlZCcgfSAmIENhbGxUcmFuc2NyaXB0aW9uU3RvcHBlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnVuYmxvY2tlZF91c2VyJyB9ICYgVW5ibG9ja2VkVXNlckV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnVwZGF0ZWQnIH0gJiBDYWxsVXBkYXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnVzZXJfbXV0ZWQnIH0gJiBDYWxsVXNlck11dGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2Nvbm5lY3Rpb24uZXJyb3InIH0gJiBDb25uZWN0aW9uRXJyb3JFdmVudClcbiAgfCAoeyB0eXBlOiAnY29ubmVjdGlvbi5vaycgfSAmIENvbm5lY3RlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjdXN0b20nIH0gJiBDdXN0b21WaWRlb0V2ZW50KVxuICB8ICh7IHR5cGU6ICdoZWFsdGguY2hlY2snIH0gJiBIZWFsdGhDaGVja0V2ZW50KVxuICB8ICh7IHR5cGU6ICd1c2VyLmJhbm5lZCcgfSAmIFVzZXJCYW5uZWRFdmVudClcbiAgfCAoeyB0eXBlOiAndXNlci5kZWFjdGl2YXRlZCcgfSAmIFVzZXJEZWFjdGl2YXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICd1c2VyLmRlbGV0ZWQnIH0gJiBVc2VyRGVsZXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICd1c2VyLm11dGVkJyB9ICYgVXNlck11dGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ3VzZXIucHJlc2VuY2UuY2hhbmdlZCcgfSAmIFVzZXJQcmVzZW5jZUNoYW5nZWRFdmVudClcbiAgfCAoeyB0eXBlOiAndXNlci5yZWFjdGl2YXRlZCcgfSAmIFVzZXJSZWFjdGl2YXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICd1c2VyLnVuYmFubmVkJyB9ICYgVXNlclVuYmFubmVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ3VzZXIudXBkYXRlZCcgfSAmIFVzZXJVcGRhdGVkRXZlbnQpO1xuIiwiaW1wb3J0IHsgQXhpb3NSZXF1ZXN0Q29uZmlnLCBBeGlvc1Jlc3BvbnNlIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgU3RhYmxlV1NDb25uZWN0aW9uIH0gZnJvbSAnLi9jb25uZWN0aW9uJztcbmltcG9ydCB7IENvbm5lY3RlZEV2ZW50LCBVc2VyUmVxdWVzdCwgV1NFdmVudCB9IGZyb20gJy4uLy4uL2dlbi9jb29yZGluYXRvcic7XG5pbXBvcnQgeyBBbGxTZnVFdmVudHMgfSBmcm9tICcuLi8uLi9ydGMnO1xuXG5leHBvcnQgdHlwZSBVUiA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG5leHBvcnQgdHlwZSBVc2VyID1cbiAgfCAoT21pdDxVc2VyUmVxdWVzdCwgJ3JvbGUnPiAmIHsgdHlwZT86ICdhdXRoZW50aWNhdGVkJyB9KVxuICB8IChPbWl0PFVzZXJSZXF1ZXN0LCAncm9sZSc+ICYgeyB0eXBlOiAnZ3Vlc3QnIH0pXG4gIHwgKE9taXQ8VXNlclJlcXVlc3QsICdpZCcgfCAncm9sZSc+ICYge1xuICAgICAgaWQ/OiAnIWFub24nO1xuICAgICAgdHlwZTogJ2Fub255bW91cyc7XG4gICAgfSk7XG5cbmV4cG9ydCB0eXBlIFVzZXJXaXRoSWQgPVxuICB8IChVc2VyUmVxdWVzdCAmIHsgdHlwZT86ICdhdXRoZW50aWNhdGVkJyB9KVxuICB8IChVc2VyUmVxdWVzdCAmIHsgdHlwZTogJ2d1ZXN0JyB9KVxuICB8IChVc2VyUmVxdWVzdCAmIHtcbiAgICAgIGlkOiAnIWFub24nO1xuICAgICAgdHlwZTogJ2Fub255bW91cyc7XG4gICAgfSk7XG5cbmV4cG9ydCB0eXBlIHsgT3duVXNlclJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuZXhwb3J0IHR5cGUgQ29ubmVjdEFQSVJlc3BvbnNlID0gUHJvbWlzZTx2b2lkIHwgQ29ubmVjdGVkRXZlbnQ+O1xuXG5leHBvcnQgdHlwZSBMb2dMZXZlbCA9ICd0cmFjZScgfCAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJztcblxudHlwZSBFcnJvclJlc3BvbnNlRGV0YWlscyA9IHtcbiAgY29kZTogbnVtYmVyO1xuICBtZXNzYWdlczogc3RyaW5nW107XG59O1xuXG5leHBvcnQgdHlwZSBBUElFcnJvclJlc3BvbnNlID0ge1xuICBjb2RlOiBudW1iZXI7XG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgbW9yZV9pbmZvOiBzdHJpbmc7XG4gIFN0YXR1c0NvZGU6IG51bWJlcjtcbiAgZGV0YWlscz86IEVycm9yUmVzcG9uc2VEZXRhaWxzO1xuICB1bnJlY292ZXJhYmxlPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBjbGFzcyBFcnJvckZyb21SZXNwb25zZTxUPiBleHRlbmRzIEVycm9yIHtcbiAgY29kZT86IG51bWJlcjtcbiAgcmVzcG9uc2U/OiBBeGlvc1Jlc3BvbnNlPFQ+O1xuICBzdGF0dXM/OiBudW1iZXI7XG4gIHVucmVjb3ZlcmFibGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBDb25uZWN0aW9uQ2hhbmdlZEV2ZW50ID0ge1xuICB0eXBlOiAnY29ubmVjdGlvbi5jaGFuZ2VkJztcbiAgb25saW5lOiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgTmV0d29ya0NoYW5nZWRFdmVudCA9IHtcbiAgdHlwZTogJ25ldHdvcmsuY2hhbmdlZCc7XG4gIG9ubGluZTogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFRyYW5zcG9ydENoYW5nZWRFdmVudCA9IHtcbiAgdHlwZTogJ3RyYW5zcG9ydC5jaGFuZ2VkJztcbiAgbW9kZTogJ2xvbmdwb2xsJztcbn07XG5cbmV4cG9ydCB0eXBlIENvbm5lY3Rpb25SZWNvdmVyZWRFdmVudCA9IHtcbiAgdHlwZTogJ2Nvbm5lY3Rpb24ucmVjb3ZlcmVkJztcbn07XG5cbmV4cG9ydCB0eXBlIFN0cmVhbVZpZGVvRXZlbnQgPSAoXG4gIHwgV1NFdmVudFxuICB8IE5ldHdvcmtDaGFuZ2VkRXZlbnRcbiAgfCBDb25uZWN0aW9uQ2hhbmdlZEV2ZW50XG4gIHwgVHJhbnNwb3J0Q2hhbmdlZEV2ZW50XG4gIHwgQ29ubmVjdGlvblJlY292ZXJlZEV2ZW50XG4pICYgeyByZWNlaXZlZF9hdD86IHN0cmluZyB8IERhdGUgfTtcblxuLy8gVE9ETzogd2Ugc2hvdWxkIHVzZSBXU0NhbGxFdmVudCBoZXJlIGJ1dCB0aGF0IG5lZWRzIGZpeGluZ1xuZXhwb3J0IHR5cGUgU3RyZWFtQ2FsbEV2ZW50ID0gRXh0cmFjdDxTdHJlYW1WaWRlb0V2ZW50LCB7IGNhbGxfY2lkOiBzdHJpbmcgfT47XG5leHBvcnQgdHlwZSBFdmVudFR5cGVzID0gJ2FsbCcgfCBXU0V2ZW50Wyd0eXBlJ107XG5cbmV4cG9ydCB0eXBlIEFsbENsaWVudEV2ZW50VHlwZXMgPSAnYWxsJyB8IFN0cmVhbVZpZGVvRXZlbnRbJ3R5cGUnXTtcbmV4cG9ydCB0eXBlIEFsbENsaWVudEV2ZW50cyA9IHtcbiAgW0sgaW4gQWxsQ2xpZW50RXZlbnRUeXBlc106IEV4dHJhY3Q8U3RyZWFtVmlkZW9FdmVudCwgeyB0eXBlOiBLIH0+O1xufTtcbmV4cG9ydCB0eXBlIENsaWVudEV2ZW50TGlzdGVuZXI8RSBleHRlbmRzIGtleW9mIEFsbENsaWVudEV2ZW50cz4gPSAoXG4gIGV2ZW50OiBBbGxDbGllbnRFdmVudHNbRV0sXG4pID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIEFsbENsaWVudENhbGxFdmVudHMgPSB7XG4gIFtLIGluIEV2ZW50VHlwZXNdOiBFeHRyYWN0PFdTRXZlbnQsIHsgdHlwZTogSyB9Pjtcbn07XG5cbmV4cG9ydCB0eXBlIEFsbENhbGxFdmVudHMgPSBBbGxDbGllbnRDYWxsRXZlbnRzICYgQWxsU2Z1RXZlbnRzO1xuZXhwb3J0IHR5cGUgQ2FsbEV2ZW50TGlzdGVuZXI8RSBleHRlbmRzIGtleW9mIEFsbENhbGxFdmVudHM+ID0gKFxuICBldmVudDogQWxsQ2FsbEV2ZW50c1tFXSxcbikgPT4gdm9pZDtcblxuZXhwb3J0IHR5cGUgTG9nZ2VyID0gKFxuICBsb2dMZXZlbDogTG9nTGV2ZWwsXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgLi4uYXJnczogdW5rbm93bltdXG4pID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIFN0cmVhbUNsaWVudE9wdGlvbnMgPSBQYXJ0aWFsPEF4aW9zUmVxdWVzdENvbmZpZz4gJiB7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGRpc2FibGUgd2FybmluZ3MgdGhhdCBhcmUgdHJpZ2dlcmVkIGJ5IHVzaW5nIGNvbm5lY3RVc2VyIG9yIGNvbm5lY3RBbm9ueW1vdXNVc2VyIHNlcnZlci1zaWRlLlxuICAgKi9cbiAgYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdD86IGJvb2xlYW47XG4gIGF4aW9zUmVxdWVzdENvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZztcbiAgLyoqXG4gICAqIEJhc2UgdXJsIHRvIHVzZSBmb3IgQVBJXG4gICAqIHN1Y2ggYXMgaHR0cHM6Ly9jaGF0LXByb3h5LWR1Ymxpbi5zdHJlYW0taW8tYXBpLmNvbVxuICAgKi9cbiAgYmFzZVVSTD86IHN0cmluZztcbiAgYnJvd3Nlcj86IGJvb2xlYW47XG4gIC8vIGRldmljZT86IEJhc2VEZXZpY2VGaWVsZHM7XG4gIGVuYWJsZUluc2lnaHRzPzogYm9vbGVhbjtcbiAgLyoqIGV4cGVyaW1lbnRhbCBmZWF0dXJlLCBwbGVhc2UgY29udGFjdCBzdXBwb3J0IGlmIHlvdSB3YW50IHRoaXMgZmVhdHVyZSBlbmFibGVkIGZvciB5b3UgKi9cbiAgZW5hYmxlV1NGYWxsYmFjaz86IGJvb2xlYW47XG4gIGxvZ2dlcj86IExvZ2dlcjtcbiAgbG9nTGV2ZWw/OiBMb2dMZXZlbDtcbiAgLyoqXG4gICAqIFRoZSBVUkwgdG8gdXNlIGZvciB0aGUgbG9jYXRpb24gaGludC5cbiAgICovXG4gIGxvY2F0aW9uSGludFVybD86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRpbWVvdXQgZm9yIHJlcXVlc3RpbmcgYSBsb2NhdGlvbiBoaW50LlxuICAgKi9cbiAgbG9jYXRpb25IaW50VGltZW91dD86IG51bWJlcjtcbiAgLyoqXG4gICAqIFdoZW4gdHJ1ZSwgdXNlciB3aWxsIGJlIHBlcnNpc3RlZCBvbiBjbGllbnQuIE90aGVyd2lzZSBpZiBgY29ubmVjdFVzZXJgIGNhbGwgZmFpbHMsIHRoZW4geW91IG5lZWQgdG9cbiAgICogY2FsbCBgY29ubmVjdFVzZXJgIGFnYWluIHRvIHJldHJ5LlxuICAgKiBUaGlzIGlzIG1haW5seSB1c2VmdWwgZm9yIGNoYXQgYXBwbGljYXRpb24gd29ya2luZyBpbiBvZmZsaW5lIG1vZGUsIHdoZXJlIHlvdSB3aWxsIG5lZWQgY2xpZW50LnVzZXIgdG9cbiAgICogcGVyc2lzdCBldmVuIGlmIGNvbm5lY3RVc2VyIGNhbGwgZmFpbHMuXG4gICAqL1xuICBwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmU/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgc2VjcmV0IGtleSBmb3IgdGhlIEFQSSBrZXkuIFRoaXMgaXMgb25seSBuZWVkZWQgZm9yIHNlcnZlciBzaWRlIGF1dGhlbnRpY2F0aW9uLlxuICAgKi9cbiAgc2VjcmV0Pzogc3RyaW5nO1xuXG4gIHdhcm1VcD86IGJvb2xlYW47XG4gIC8vIFNldCB0aGUgaW5zdGFuY2Ugb2YgU3RhYmxlV1NDb25uZWN0aW9uIG9uIGNoYXQgY2xpZW50LiBJdHMgcHVyZWx5IGZvciB0ZXN0aW5nIHB1cnBvc2UgYW5kIHNob3VsZFxuICAvLyBub3QgYmUgdXNlZCBpbiBwcm9kdWN0aW9uIGFwcHMuXG4gIHdzQ29ubmVjdGlvbj86IFN0YWJsZVdTQ29ubmVjdGlvbjtcbn07XG5cbmV4cG9ydCB0eXBlIFRva2VuUHJvdmlkZXIgPSAoKSA9PiBQcm9taXNlPHN0cmluZz47XG5leHBvcnQgdHlwZSBUb2tlbk9yUHJvdmlkZXIgPSBudWxsIHwgc3RyaW5nIHwgVG9rZW5Qcm92aWRlciB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgQnVpbHRJblJlamVjdFJlYXNvbiA9ICdidXN5JyB8ICdkZWNsaW5lJyB8ICdjYW5jZWwnO1xuZXhwb3J0IHR5cGUgUmVqZWN0UmVhc29uID0gQnVpbHRJblJlamVjdFJlYXNvbiB8IHN0cmluZztcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS40IHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGUsb3B0aW1pemVfY29kZV9zaXplXG4vLyBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmlsZSBcImdvb2dsZS9wcm90b2J1Zi9zdHJ1Y3QucHJvdG9cIiAocGFja2FnZSBcImdvb2dsZS5wcm90b2J1ZlwiLCBzeW50YXggcHJvdG8zKVxuLy8gdHNsaW50OmRpc2FibGVcbi8vXG4vLyBQcm90b2NvbCBCdWZmZXJzIC0gR29vZ2xlJ3MgZGF0YSBpbnRlcmNoYW5nZSBmb3JtYXRcbi8vIENvcHlyaWdodCAyMDA4IEdvb2dsZSBJbmMuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy8gICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuLy9cbmltcG9ydCB0eXBlIHtcbiAgSnNvbk9iamVjdCxcbiAgSnNvblJlYWRPcHRpb25zLFxuICBKc29uVmFsdWUsXG4gIEpzb25Xcml0ZU9wdGlvbnMsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcbmltcG9ydCB7XG4gIGlzSnNvbk9iamVjdCxcbiAgTWVzc2FnZVR5cGUsXG4gIHR5cGVvZkpzb25WYWx1ZSxcbn0gZnJvbSAnQHByb3RvYnVmLXRzL3J1bnRpbWUnO1xuXG4vKipcbiAqIGBTdHJ1Y3RgIHJlcHJlc2VudHMgYSBzdHJ1Y3R1cmVkIGRhdGEgdmFsdWUsIGNvbnNpc3Rpbmcgb2YgZmllbGRzXG4gKiB3aGljaCBtYXAgdG8gZHluYW1pY2FsbHkgdHlwZWQgdmFsdWVzLiBJbiBzb21lIGxhbmd1YWdlcywgYFN0cnVjdGBcbiAqIG1pZ2h0IGJlIHN1cHBvcnRlZCBieSBhIG5hdGl2ZSByZXByZXNlbnRhdGlvbi4gRm9yIGV4YW1wbGUsIGluXG4gKiBzY3JpcHRpbmcgbGFuZ3VhZ2VzIGxpa2UgSlMgYSBzdHJ1Y3QgaXMgcmVwcmVzZW50ZWQgYXMgYW5cbiAqIG9iamVjdC4gVGhlIGRldGFpbHMgb2YgdGhhdCByZXByZXNlbnRhdGlvbiBhcmUgZGVzY3JpYmVkIHRvZ2V0aGVyXG4gKiB3aXRoIHRoZSBwcm90byBzdXBwb3J0IGZvciB0aGUgbGFuZ3VhZ2UuXG4gKlxuICogVGhlIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIGBTdHJ1Y3RgIGlzIEpTT04gb2JqZWN0LlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJ1Y3Qge1xuICAvKipcbiAgICogVW5vcmRlcmVkIG1hcCBvZiBkeW5hbWljYWxseSB0eXBlZCB2YWx1ZXMuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogbWFwPHN0cmluZywgZ29vZ2xlLnByb3RvYnVmLlZhbHVlPiBmaWVsZHMgPSAxO1xuICAgKi9cbiAgZmllbGRzOiB7XG4gICAgW2tleTogc3RyaW5nXTogVmFsdWU7XG4gIH07XG59XG4vKipcbiAqIGBWYWx1ZWAgcmVwcmVzZW50cyBhIGR5bmFtaWNhbGx5IHR5cGVkIHZhbHVlIHdoaWNoIGNhbiBiZSBlaXRoZXJcbiAqIG51bGwsIGEgbnVtYmVyLCBhIHN0cmluZywgYSBib29sZWFuLCBhIHJlY3Vyc2l2ZSBzdHJ1Y3QgdmFsdWUsIG9yIGFcbiAqIGxpc3Qgb2YgdmFsdWVzLiBBIHByb2R1Y2VyIG9mIHZhbHVlIGlzIGV4cGVjdGVkIHRvIHNldCBvbmUgb2YgdGhlc2VcbiAqIHZhcmlhbnRzLiBBYnNlbmNlIG9mIGFueSB2YXJpYW50IGluZGljYXRlcyBhbiBlcnJvci5cbiAqXG4gKiBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgYFZhbHVlYCBpcyBKU09OIHZhbHVlLlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIGdvb2dsZS5wcm90b2J1Zi5WYWx1ZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZhbHVlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBvbmVvZjoga2luZFxuICAgKi9cbiAga2luZDpcbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnbnVsbFZhbHVlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSBudWxsIHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5OdWxsVmFsdWUgbnVsbF92YWx1ZSA9IDE7XG4gICAgICAgICAqL1xuICAgICAgICBudWxsVmFsdWU6IE51bGxWYWx1ZTtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnbnVtYmVyVmFsdWUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVwcmVzZW50cyBhIGRvdWJsZSB2YWx1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBkb3VibGUgbnVtYmVyX3ZhbHVlID0gMjtcbiAgICAgICAgICovXG4gICAgICAgIG51bWJlclZhbHVlOiBudW1iZXI7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3N0cmluZ1ZhbHVlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSBzdHJpbmcgdmFsdWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHN0cmluZ192YWx1ZSA9IDM7XG4gICAgICAgICAqL1xuICAgICAgICBzdHJpbmdWYWx1ZTogc3RyaW5nO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdib29sVmFsdWUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVwcmVzZW50cyBhIGJvb2xlYW4gdmFsdWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBib29sX3ZhbHVlID0gNDtcbiAgICAgICAgICovXG4gICAgICAgIGJvb2xWYWx1ZTogYm9vbGVhbjtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnc3RydWN0VmFsdWUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVwcmVzZW50cyBhIHN0cnVjdHVyZWQgdmFsdWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZ29vZ2xlLnByb3RvYnVmLlN0cnVjdCBzdHJ1Y3RfdmFsdWUgPSA1O1xuICAgICAgICAgKi9cbiAgICAgICAgc3RydWN0VmFsdWU6IFN0cnVjdDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnbGlzdFZhbHVlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSByZXBlYXRlZCBgVmFsdWVgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5MaXN0VmFsdWUgbGlzdF92YWx1ZSA9IDY7XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0VmFsdWU6IExpc3RWYWx1ZTtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiB1bmRlZmluZWQ7XG4gICAgICB9O1xufVxuLyoqXG4gKiBgTGlzdFZhbHVlYCBpcyBhIHdyYXBwZXIgYXJvdW5kIGEgcmVwZWF0ZWQgZmllbGQgb2YgdmFsdWVzLlxuICpcbiAqIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBgTGlzdFZhbHVlYCBpcyBKU09OIGFycmF5LlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIGdvb2dsZS5wcm90b2J1Zi5MaXN0VmFsdWVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0VmFsdWUge1xuICAvKipcbiAgICogUmVwZWF0ZWQgZmllbGQgb2YgZHluYW1pY2FsbHkgdHlwZWQgdmFsdWVzLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIGdvb2dsZS5wcm90b2J1Zi5WYWx1ZSB2YWx1ZXMgPSAxO1xuICAgKi9cbiAgdmFsdWVzOiBWYWx1ZVtdO1xufVxuLyoqXG4gKiBgTnVsbFZhbHVlYCBpcyBhIHNpbmdsZXRvbiBlbnVtZXJhdGlvbiB0byByZXByZXNlbnQgdGhlIG51bGwgdmFsdWUgZm9yIHRoZVxuICogYFZhbHVlYCB0eXBlIHVuaW9uLlxuICpcbiAqICBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgYE51bGxWYWx1ZWAgaXMgSlNPTiBgbnVsbGAuXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gZ29vZ2xlLnByb3RvYnVmLk51bGxWYWx1ZVxuICovXG5leHBvcnQgZW51bSBOdWxsVmFsdWUge1xuICAvKipcbiAgICogTnVsbCB2YWx1ZS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IE5VTExfVkFMVUUgPSAwO1xuICAgKi9cbiAgTlVMTF9WQUxVRSA9IDAsXG59XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTdHJ1Y3QkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFN0cnVjdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignZ29vZ2xlLnByb3RvYnVmLlN0cnVjdCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdmaWVsZHMnLFxuICAgICAgICBraW5kOiAnbWFwJyxcbiAgICAgICAgSzogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICAgIFY6IHsga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBWYWx1ZSB9LFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICAvKipcbiAgICogRW5jb2RlIGBTdHJ1Y3RgIHRvIEpTT04gb2JqZWN0LlxuICAgKi9cbiAgaW50ZXJuYWxKc29uV3JpdGUobWVzc2FnZTogU3RydWN0LCBvcHRpb25zOiBKc29uV3JpdGVPcHRpb25zKTogSnNvblZhbHVlIHtcbiAgICBsZXQganNvbjogSnNvbk9iamVjdCA9IHt9O1xuICAgIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhtZXNzYWdlLmZpZWxkcykpIHtcbiAgICAgIGpzb25ba10gPSBWYWx1ZS50b0pzb24odik7XG4gICAgfVxuICAgIHJldHVybiBqc29uO1xuICB9XG4gIC8qKlxuICAgKiBEZWNvZGUgYFN0cnVjdGAgZnJvbSBKU09OIG9iamVjdC5cbiAgICovXG4gIGludGVybmFsSnNvblJlYWQoXG4gICAganNvbjogSnNvblZhbHVlLFxuICAgIG9wdGlvbnM6IEpzb25SZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBTdHJ1Y3QsXG4gICk6IFN0cnVjdCB7XG4gICAgaWYgKCFpc0pzb25PYmplY3QoanNvbikpXG4gICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgJ1VuYWJsZSB0byBwYXJzZSBtZXNzYWdlICcgK1xuICAgICAgICAgIHRoaXMudHlwZU5hbWUgK1xuICAgICAgICAgICcgZnJvbSBKU09OICcgK1xuICAgICAgICAgIHR5cGVvZkpzb25WYWx1ZShqc29uKSArXG4gICAgICAgICAgJy4nLFxuICAgICAgKTtcbiAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0gdGhpcy5jcmVhdGUoKTtcbiAgICBmb3IgKGxldCBbaywgdl0gb2YgZ2xvYmFsVGhpcy5PYmplY3QuZW50cmllcyhqc29uKSkge1xuICAgICAgdGFyZ2V0LmZpZWxkc1trXSA9IFZhbHVlLmZyb21Kc29uKHYpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2UgZ29vZ2xlLnByb3RvYnVmLlN0cnVjdFxuICovXG5leHBvcnQgY29uc3QgU3RydWN0ID0gbmV3IFN0cnVjdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBWYWx1ZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VmFsdWU+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2dvb2dsZS5wcm90b2J1Zi5WYWx1ZScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdudWxsX3ZhbHVlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBvbmVvZjogJ2tpbmQnLFxuICAgICAgICBUOiAoKSA9PiBbJ2dvb2dsZS5wcm90b2J1Zi5OdWxsVmFsdWUnLCBOdWxsVmFsdWVdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICdudW1iZXJfdmFsdWUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgb25lb2Y6ICdraW5kJyxcbiAgICAgICAgVDogMSAvKlNjYWxhclR5cGUuRE9VQkxFKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ3N0cmluZ192YWx1ZScsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBvbmVvZjogJ2tpbmQnLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnYm9vbF92YWx1ZScsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBvbmVvZjogJ2tpbmQnLFxuICAgICAgICBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ3N0cnVjdF92YWx1ZScsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdraW5kJyxcbiAgICAgICAgVDogKCkgPT4gU3RydWN0LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdsaXN0X3ZhbHVlJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2tpbmQnLFxuICAgICAgICBUOiAoKSA9PiBMaXN0VmFsdWUsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIC8qKlxuICAgKiBFbmNvZGUgYFZhbHVlYCB0byBKU09OIHZhbHVlLlxuICAgKi9cbiAgaW50ZXJuYWxKc29uV3JpdGUobWVzc2FnZTogVmFsdWUsIG9wdGlvbnM6IEpzb25Xcml0ZU9wdGlvbnMpOiBKc29uVmFsdWUge1xuICAgIGlmIChtZXNzYWdlLmtpbmQub25lb2ZLaW5kID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKCk7XG4gICAgc3dpdGNoIChtZXNzYWdlLmtpbmQub25lb2ZLaW5kKSB7XG4gICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoKTtcbiAgICAgIGNhc2UgJ2Jvb2xWYWx1ZSc6XG4gICAgICAgIHJldHVybiBtZXNzYWdlLmtpbmQuYm9vbFZhbHVlO1xuICAgICAgY2FzZSAnbnVsbFZhbHVlJzpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICBjYXNlICdudW1iZXJWYWx1ZSc6XG4gICAgICAgIGxldCBudW1iZXJWYWx1ZSA9IG1lc3NhZ2Uua2luZC5udW1iZXJWYWx1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBudW1iZXJWYWx1ZSA9PSAnbnVtYmVyJyAmJiAhTnVtYmVyLmlzRmluaXRlKG51bWJlclZhbHVlKSlcbiAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcigpO1xuICAgICAgICByZXR1cm4gbnVtYmVyVmFsdWU7XG4gICAgICBjYXNlICdzdHJpbmdWYWx1ZSc6XG4gICAgICAgIHJldHVybiBtZXNzYWdlLmtpbmQuc3RyaW5nVmFsdWU7XG4gICAgICBjYXNlICdsaXN0VmFsdWUnOlxuICAgICAgICBsZXQgbGlzdFZhbHVlRmllbGQgPSB0aGlzLmZpZWxkcy5maW5kKChmKSA9PiBmLm5vID09PSA2KTtcbiAgICAgICAgaWYgKGxpc3RWYWx1ZUZpZWxkPy5raW5kICE9PSAnbWVzc2FnZScpIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKCk7XG4gICAgICAgIHJldHVybiBsaXN0VmFsdWVGaWVsZC5UKCkudG9Kc29uKG1lc3NhZ2Uua2luZC5saXN0VmFsdWUpO1xuICAgICAgY2FzZSAnc3RydWN0VmFsdWUnOlxuICAgICAgICBsZXQgc3RydWN0VmFsdWVGaWVsZCA9IHRoaXMuZmllbGRzLmZpbmQoKGYpID0+IGYubm8gPT09IDUpO1xuICAgICAgICBpZiAoc3RydWN0VmFsdWVGaWVsZD8ua2luZCAhPT0gJ21lc3NhZ2UnKSB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcigpO1xuICAgICAgICByZXR1cm4gc3RydWN0VmFsdWVGaWVsZC5UKCkudG9Kc29uKG1lc3NhZ2Uua2luZC5zdHJ1Y3RWYWx1ZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBEZWNvZGUgYFZhbHVlYCBmcm9tIEpTT04gdmFsdWUuXG4gICAqL1xuICBpbnRlcm5hbEpzb25SZWFkKFxuICAgIGpzb246IEpzb25WYWx1ZSxcbiAgICBvcHRpb25zOiBKc29uUmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVmFsdWUsXG4gICk6IFZhbHVlIHtcbiAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0gdGhpcy5jcmVhdGUoKTtcbiAgICBzd2l0Y2ggKHR5cGVvZiBqc29uKSB7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICB0YXJnZXQua2luZCA9IHsgb25lb2ZLaW5kOiAnbnVtYmVyVmFsdWUnLCBudW1iZXJWYWx1ZToganNvbiB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIHRhcmdldC5raW5kID0geyBvbmVvZktpbmQ6ICdzdHJpbmdWYWx1ZScsIHN0cmluZ1ZhbHVlOiBqc29uIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgIHRhcmdldC5raW5kID0geyBvbmVvZktpbmQ6ICdib29sVmFsdWUnLCBib29sVmFsdWU6IGpzb24gfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICBpZiAoanNvbiA9PT0gbnVsbCkge1xuICAgICAgICAgIHRhcmdldC5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnbnVsbFZhbHVlJyxcbiAgICAgICAgICAgIG51bGxWYWx1ZTogTnVsbFZhbHVlLk5VTExfVkFMVUUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChnbG9iYWxUaGlzLkFycmF5LmlzQXJyYXkoanNvbikpIHtcbiAgICAgICAgICB0YXJnZXQua2luZCA9IHtcbiAgICAgICAgICAgIG9uZW9mS2luZDogJ2xpc3RWYWx1ZScsXG4gICAgICAgICAgICBsaXN0VmFsdWU6IExpc3RWYWx1ZS5mcm9tSnNvbihqc29uKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldC5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnc3RydWN0VmFsdWUnLFxuICAgICAgICAgICAgc3RydWN0VmFsdWU6IFN0cnVjdC5mcm9tSnNvbihqc29uKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgJ1VuYWJsZSB0byBwYXJzZSAnICtcbiAgICAgICAgICAgIHRoaXMudHlwZU5hbWUgK1xuICAgICAgICAgICAgJyBmcm9tIEpTT04gJyArXG4gICAgICAgICAgICB0eXBlb2ZKc29uVmFsdWUoanNvbiksXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVmFsdWVcbiAqL1xuZXhwb3J0IGNvbnN0IFZhbHVlID0gbmV3IFZhbHVlJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIExpc3RWYWx1ZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8TGlzdFZhbHVlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdnb29nbGUucHJvdG9idWYuTGlzdFZhbHVlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3ZhbHVlcycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVmFsdWUsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIC8qKlxuICAgKiBFbmNvZGUgYExpc3RWYWx1ZWAgdG8gSlNPTiBhcnJheS5cbiAgICovXG4gIGludGVybmFsSnNvbldyaXRlKG1lc3NhZ2U6IExpc3RWYWx1ZSwgb3B0aW9uczogSnNvbldyaXRlT3B0aW9ucyk6IEpzb25WYWx1ZSB7XG4gICAgcmV0dXJuIG1lc3NhZ2UudmFsdWVzLm1hcCgodikgPT4gVmFsdWUudG9Kc29uKHYpKTtcbiAgfVxuICAvKipcbiAgICogRGVjb2RlIGBMaXN0VmFsdWVgIGZyb20gSlNPTiBhcnJheS5cbiAgICovXG4gIGludGVybmFsSnNvblJlYWQoXG4gICAganNvbjogSnNvblZhbHVlLFxuICAgIG9wdGlvbnM6IEpzb25SZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBMaXN0VmFsdWUsXG4gICk6IExpc3RWYWx1ZSB7XG4gICAgaWYgKCFnbG9iYWxUaGlzLkFycmF5LmlzQXJyYXkoanNvbikpXG4gICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgJ1VuYWJsZSB0byBwYXJzZSAnICtcbiAgICAgICAgICB0aGlzLnR5cGVOYW1lICtcbiAgICAgICAgICAnIGZyb20gSlNPTiAnICtcbiAgICAgICAgICB0eXBlb2ZKc29uVmFsdWUoanNvbiksXG4gICAgICApO1xuICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSB0aGlzLmNyZWF0ZSgpO1xuICAgIGxldCB2YWx1ZXMgPSBqc29uLm1hcCgodikgPT4gVmFsdWUuZnJvbUpzb24odikpO1xuICAgIHRhcmdldC52YWx1ZXMucHVzaCguLi52YWx1ZXMpO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuTGlzdFZhbHVlXG4gKi9cbmV4cG9ydCBjb25zdCBMaXN0VmFsdWUgPSBuZXcgTGlzdFZhbHVlJFR5cGUoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS40IHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGUsb3B0aW1pemVfY29kZV9zaXplXG4vLyBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmlsZSBcImdvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG9cIiAocGFja2FnZSBcImdvb2dsZS5wcm90b2J1ZlwiLCBzeW50YXggcHJvdG8zKVxuLy8gdHNsaW50OmRpc2FibGVcbi8vXG4vLyBQcm90b2NvbCBCdWZmZXJzIC0gR29vZ2xlJ3MgZGF0YSBpbnRlcmNoYW5nZSBmb3JtYXRcbi8vIENvcHlyaWdodCAyMDA4IEdvb2dsZSBJbmMuICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbi8vIG1ldDpcbi8vXG4vLyAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy8gICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuLy8gY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbi8vIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuLy8gXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuLy8gTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4vLyBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuLy8gT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4vLyBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbi8vIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuLy8gVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuLy8gKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4vLyBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuLy9cbmltcG9ydCB0eXBlIHtcbiAgSnNvblJlYWRPcHRpb25zLFxuICBKc29uVmFsdWUsXG4gIEpzb25Xcml0ZU9wdGlvbnMsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcbmltcG9ydCB7IE1lc3NhZ2VUeXBlLCBQYkxvbmcsIHR5cGVvZkpzb25WYWx1ZSB9IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcblxuLyoqXG4gKiBBIFRpbWVzdGFtcCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yIGxvY2FsXG4gKiBjYWxlbmRhciwgZW5jb2RlZCBhcyBhIGNvdW50IG9mIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0XG4gKiBuYW5vc2Vjb25kIHJlc29sdXRpb24uIFRoZSBjb3VudCBpcyByZWxhdGl2ZSB0byBhbiBlcG9jaCBhdCBVVEMgbWlkbmlnaHQgb25cbiAqIEphbnVhcnkgMSwgMTk3MCwgaW4gdGhlIHByb2xlcHRpYyBHcmVnb3JpYW4gY2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuXG4gKlxuICogQWxsIG1pbnV0ZXMgYXJlIDYwIHNlY29uZHMgbG9uZy4gTGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXBcbiAqIHNlY29uZCB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLCB1c2luZyBhIFsyNC1ob3VyIGxpbmVhclxuICogc21lYXJdKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RpbWUvc21lYXIpLlxuICpcbiAqIFRoZSByYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi4gQnlcbiAqIHJlc3RyaWN0aW5nIHRvIHRoYXQgcmFuZ2UsIHdlIGVuc3VyZSB0aGF0IHdlIGNhbiBjb252ZXJ0IHRvIGFuZCBmcm9tIFtSRkNcbiAqIDMzMzldKGh0dHBzOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzMzM5LnR4dCkgZGF0ZSBzdHJpbmdzLlxuICpcbiAqICMgRXhhbXBsZXNcbiAqXG4gKiBFeGFtcGxlIDE6IENvbXB1dGUgVGltZXN0YW1wIGZyb20gUE9TSVggYHRpbWUoKWAuXG4gKlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXA7XG4gKiAgICAgdGltZXN0YW1wLnNldF9zZWNvbmRzKHRpbWUoTlVMTCkpO1xuICogICAgIHRpbWVzdGFtcC5zZXRfbmFub3MoMCk7XG4gKlxuICogRXhhbXBsZSAyOiBDb21wdXRlIFRpbWVzdGFtcCBmcm9tIFBPU0lYIGBnZXR0aW1lb2ZkYXkoKWAuXG4gKlxuICogICAgIHN0cnVjdCB0aW1ldmFsIHR2O1xuICogICAgIGdldHRpbWVvZmRheSgmdHYsIE5VTEwpO1xuICpcbiAqICAgICBUaW1lc3RhbXAgdGltZXN0YW1wO1xuICogICAgIHRpbWVzdGFtcC5zZXRfc2Vjb25kcyh0di50dl9zZWMpO1xuICogICAgIHRpbWVzdGFtcC5zZXRfbmFub3ModHYudHZfdXNlYyAqIDEwMDApO1xuICpcbiAqIEV4YW1wbGUgMzogQ29tcHV0ZSBUaW1lc3RhbXAgZnJvbSBXaW4zMiBgR2V0U3lzdGVtVGltZUFzRmlsZVRpbWUoKWAuXG4gKlxuICogICAgIEZJTEVUSU1FIGZ0O1xuICogICAgIEdldFN5c3RlbVRpbWVBc0ZpbGVUaW1lKCZmdCk7XG4gKiAgICAgVUlOVDY0IHRpY2tzID0gKCgoVUlOVDY0KWZ0LmR3SGlnaERhdGVUaW1lKSA8PCAzMikgfCBmdC5kd0xvd0RhdGVUaW1lO1xuICpcbiAqICAgICAvLyBBIFdpbmRvd3MgdGljayBpcyAxMDAgbmFub3NlY29uZHMuIFdpbmRvd3MgZXBvY2ggMTYwMS0wMS0wMVQwMDowMDowMFpcbiAqICAgICAvLyBpcyAxMTY0NDQ3MzYwMCBzZWNvbmRzIGJlZm9yZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXA7XG4gKiAgICAgdGltZXN0YW1wLnNldF9zZWNvbmRzKChJTlQ2NCkgKCh0aWNrcyAvIDEwMDAwMDAwKSAtIDExNjQ0NDczNjAwTEwpKTtcbiAqICAgICB0aW1lc3RhbXAuc2V0X25hbm9zKChJTlQzMikgKCh0aWNrcyAlIDEwMDAwMDAwKSAqIDEwMCkpO1xuICpcbiAqIEV4YW1wbGUgNDogQ29tcHV0ZSBUaW1lc3RhbXAgZnJvbSBKYXZhIGBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKWAuXG4gKlxuICogICAgIGxvbmcgbWlsbGlzID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7XG4gKlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXAgPSBUaW1lc3RhbXAubmV3QnVpbGRlcigpLnNldFNlY29uZHMobWlsbGlzIC8gMTAwMClcbiAqICAgICAgICAgLnNldE5hbm9zKChpbnQpICgobWlsbGlzICUgMTAwMCkgKiAxMDAwMDAwKSkuYnVpbGQoKTtcbiAqXG4gKlxuICogRXhhbXBsZSA1OiBDb21wdXRlIFRpbWVzdGFtcCBmcm9tIEphdmEgYEluc3RhbnQubm93KClgLlxuICpcbiAqICAgICBJbnN0YW50IG5vdyA9IEluc3RhbnQubm93KCk7XG4gKlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXAgPVxuICogICAgICAgICBUaW1lc3RhbXAubmV3QnVpbGRlcigpLnNldFNlY29uZHMobm93LmdldEVwb2NoU2Vjb25kKCkpXG4gKiAgICAgICAgICAgICAuc2V0TmFub3Mobm93LmdldE5hbm8oKSkuYnVpbGQoKTtcbiAqXG4gKlxuICogRXhhbXBsZSA2OiBDb21wdXRlIFRpbWVzdGFtcCBmcm9tIGN1cnJlbnQgdGltZSBpbiBQeXRob24uXG4gKlxuICogICAgIHRpbWVzdGFtcCA9IFRpbWVzdGFtcCgpXG4gKiAgICAgdGltZXN0YW1wLkdldEN1cnJlbnRUaW1lKClcbiAqXG4gKiAjIEpTT04gTWFwcGluZ1xuICpcbiAqIEluIEpTT04gZm9ybWF0LCB0aGUgVGltZXN0YW1wIHR5cGUgaXMgZW5jb2RlZCBhcyBhIHN0cmluZyBpbiB0aGVcbiAqIFtSRkMgMzMzOV0oaHR0cHM6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzMzMzkudHh0KSBmb3JtYXQuIFRoYXQgaXMsIHRoZVxuICogZm9ybWF0IGlzIFwie3llYXJ9LXttb250aH0te2RheX1Ue2hvdXJ9OnttaW59OntzZWN9Wy57ZnJhY19zZWN9XVpcIlxuICogd2hlcmUge3llYXJ9IGlzIGFsd2F5cyBleHByZXNzZWQgdXNpbmcgZm91ciBkaWdpdHMgd2hpbGUge21vbnRofSwge2RheX0sXG4gKiB7aG91cn0sIHttaW59LCBhbmQge3NlY30gYXJlIHplcm8tcGFkZGVkIHRvIHR3byBkaWdpdHMgZWFjaC4gVGhlIGZyYWN0aW9uYWxcbiAqIHNlY29uZHMsIHdoaWNoIGNhbiBnbyB1cCB0byA5IGRpZ2l0cyAoaS5lLiB1cCB0byAxIG5hbm9zZWNvbmQgcmVzb2x1dGlvbiksXG4gKiBhcmUgb3B0aW9uYWwuIFRoZSBcIlpcIiBzdWZmaXggaW5kaWNhdGVzIHRoZSB0aW1lem9uZSAoXCJVVENcIik7IHRoZSB0aW1lem9uZVxuICogaXMgcmVxdWlyZWQuIEEgcHJvdG8zIEpTT04gc2VyaWFsaXplciBzaG91bGQgYWx3YXlzIHVzZSBVVEMgKGFzIGluZGljYXRlZCBieVxuICogXCJaXCIpIHdoZW4gcHJpbnRpbmcgdGhlIFRpbWVzdGFtcCB0eXBlIGFuZCBhIHByb3RvMyBKU09OIHBhcnNlciBzaG91bGQgYmVcbiAqIGFibGUgdG8gYWNjZXB0IGJvdGggVVRDIGFuZCBvdGhlciB0aW1lem9uZXMgKGFzIGluZGljYXRlZCBieSBhbiBvZmZzZXQpLlxuICpcbiAqIEZvciBleGFtcGxlLCBcIjIwMTctMDEtMTVUMDE6MzA6MTUuMDFaXCIgZW5jb2RlcyAxNS4wMSBzZWNvbmRzIHBhc3RcbiAqIDAxOjMwIFVUQyBvbiBKYW51YXJ5IDE1LCAyMDE3LlxuICpcbiAqIEluIEphdmFTY3JpcHQsIG9uZSBjYW4gY29udmVydCBhIERhdGUgb2JqZWN0IHRvIHRoaXMgZm9ybWF0IHVzaW5nIHRoZVxuICogc3RhbmRhcmRcbiAqIFt0b0lTT1N0cmluZygpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlL3RvSVNPU3RyaW5nKVxuICogbWV0aG9kLiBJbiBQeXRob24sIGEgc3RhbmRhcmQgYGRhdGV0aW1lLmRhdGV0aW1lYCBvYmplY3QgY2FuIGJlIGNvbnZlcnRlZFxuICogdG8gdGhpcyBmb3JtYXQgdXNpbmdcbiAqIFtgc3RyZnRpbWVgXShodHRwczovL2RvY3MucHl0aG9uLm9yZy8yL2xpYnJhcnkvdGltZS5odG1sI3RpbWUuc3RyZnRpbWUpIHdpdGhcbiAqIHRoZSB0aW1lIGZvcm1hdCBzcGVjICclWS0lbS0lZFQlSDolTTolUy4lZlonLiBMaWtld2lzZSwgaW4gSmF2YSwgb25lIGNhbiB1c2VcbiAqIHRoZSBKb2RhIFRpbWUncyBbYElTT0RhdGVUaW1lRm9ybWF0LmRhdGVUaW1lKClgXShcbiAqIGh0dHA6Ly93d3cuam9kYS5vcmcvam9kYS10aW1lL2FwaWRvY3Mvb3JnL2pvZGEvdGltZS9mb3JtYXQvSVNPRGF0ZVRpbWVGb3JtYXQuaHRtbCNkYXRlVGltZSUyRCUyRFxuICogKSB0byBvYnRhaW4gYSBmb3JtYXR0ZXIgY2FwYWJsZSBvZiBnZW5lcmF0aW5nIHRpbWVzdGFtcHMgaW4gdGhpcyBmb3JtYXQuXG4gKlxuICpcbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGltZXN0YW1wIHtcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAqIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICogOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGludDY0IHNlY29uZHMgPSAxO1xuICAgKi9cbiAgc2Vjb25kczogc3RyaW5nO1xuICAvKipcbiAgICogTm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uIE5lZ2F0aXZlXG4gICAqIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlIG5vbi1uZWdhdGl2ZSBuYW5vcyB2YWx1ZXNcbiAgICogdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmUgZnJvbSAwIHRvIDk5OSw5OTksOTk5XG4gICAqIGluY2x1c2l2ZS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBuYW5vcyA9IDI7XG4gICAqL1xuICBuYW5vczogbnVtYmVyO1xufVxuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVGltZXN0YW1wJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxUaW1lc3RhbXA+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnc2Vjb25kcycsIGtpbmQ6ICdzY2FsYXInLCBUOiAzIC8qU2NhbGFyVHlwZS5JTlQ2NCovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbmFub3MnLCBraW5kOiAnc2NhbGFyJywgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyB9LFxuICAgIF0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBUaW1lc3RhbXBgIGZvciB0aGUgY3VycmVudCB0aW1lLlxuICAgKi9cbiAgbm93KCk6IFRpbWVzdGFtcCB7XG4gICAgY29uc3QgbXNnID0gdGhpcy5jcmVhdGUoKTtcbiAgICBjb25zdCBtcyA9IERhdGUubm93KCk7XG4gICAgbXNnLnNlY29uZHMgPSBQYkxvbmcuZnJvbShNYXRoLmZsb29yKG1zIC8gMTAwMCkpLnRvU3RyaW5nKCk7XG4gICAgbXNnLm5hbm9zID0gKG1zICUgMTAwMCkgKiAxMDAwMDAwO1xuICAgIHJldHVybiBtc2c7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IERhdGUuXG4gICAqL1xuICB0b0RhdGUobWVzc2FnZTogVGltZXN0YW1wKTogRGF0ZSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKFxuICAgICAgUGJMb25nLmZyb20obWVzc2FnZS5zZWNvbmRzKS50b051bWJlcigpICogMTAwMCArXG4gICAgICAgIE1hdGguY2VpbChtZXNzYWdlLm5hbm9zIC8gMTAwMDAwMCksXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgYSBKYXZhU2NyaXB0IERhdGUgdG8gYSBgVGltZXN0YW1wYC5cbiAgICovXG4gIGZyb21EYXRlKGRhdGU6IERhdGUpOiBUaW1lc3RhbXAge1xuICAgIGNvbnN0IG1zZyA9IHRoaXMuY3JlYXRlKCk7XG4gICAgY29uc3QgbXMgPSBkYXRlLmdldFRpbWUoKTtcbiAgICBtc2cuc2Vjb25kcyA9IFBiTG9uZy5mcm9tKE1hdGguZmxvb3IobXMgLyAxMDAwKSkudG9TdHJpbmcoKTtcbiAgICBtc2cubmFub3MgPSAobXMgJSAxMDAwKSAqIDEwMDAwMDA7XG4gICAgcmV0dXJuIG1zZztcbiAgfVxuICAvKipcbiAgICogSW4gSlNPTiBmb3JtYXQsIHRoZSBgVGltZXN0YW1wYCB0eXBlIGlzIGVuY29kZWQgYXMgYSBzdHJpbmdcbiAgICogaW4gdGhlIFJGQyAzMzM5IGZvcm1hdC5cbiAgICovXG4gIGludGVybmFsSnNvbldyaXRlKG1lc3NhZ2U6IFRpbWVzdGFtcCwgb3B0aW9uczogSnNvbldyaXRlT3B0aW9ucyk6IEpzb25WYWx1ZSB7XG4gICAgbGV0IG1zID0gUGJMb25nLmZyb20obWVzc2FnZS5zZWNvbmRzKS50b051bWJlcigpICogMTAwMDtcbiAgICBpZiAoXG4gICAgICBtcyA8IERhdGUucGFyc2UoJzAwMDEtMDEtMDFUMDA6MDA6MDBaJykgfHxcbiAgICAgIG1zID4gRGF0ZS5wYXJzZSgnOTk5OS0xMi0zMVQyMzo1OTo1OVonKVxuICAgIClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VuYWJsZSB0byBlbmNvZGUgVGltZXN0YW1wIHRvIEpTT04uIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0byA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuJyxcbiAgICAgICk7XG4gICAgaWYgKG1lc3NhZ2UubmFub3MgPCAwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVW5hYmxlIHRvIGVuY29kZSBpbnZhbGlkIFRpbWVzdGFtcCB0byBKU09OLiBOYW5vcyBtdXN0IG5vdCBiZSBuZWdhdGl2ZS4nLFxuICAgICAgKTtcbiAgICBsZXQgeiA9ICdaJztcbiAgICBpZiAobWVzc2FnZS5uYW5vcyA+IDApIHtcbiAgICAgIGxldCBuYW5vc1N0ciA9IChtZXNzYWdlLm5hbm9zICsgMTAwMDAwMDAwMCkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSk7XG4gICAgICBpZiAobmFub3NTdHIuc3Vic3RyaW5nKDMpID09PSAnMDAwMDAwJylcbiAgICAgICAgeiA9ICcuJyArIG5hbm9zU3RyLnN1YnN0cmluZygwLCAzKSArICdaJztcbiAgICAgIGVsc2UgaWYgKG5hbm9zU3RyLnN1YnN0cmluZyg2KSA9PT0gJzAwMCcpXG4gICAgICAgIHogPSAnLicgKyBuYW5vc1N0ci5zdWJzdHJpbmcoMCwgNikgKyAnWic7XG4gICAgICBlbHNlIHogPSAnLicgKyBuYW5vc1N0ciArICdaJztcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKG1zKS50b0lTT1N0cmluZygpLnJlcGxhY2UoJy4wMDBaJywgeik7XG4gIH1cbiAgLyoqXG4gICAqIEluIEpTT04gZm9ybWF0LCB0aGUgYFRpbWVzdGFtcGAgdHlwZSBpcyBlbmNvZGVkIGFzIGEgc3RyaW5nXG4gICAqIGluIHRoZSBSRkMgMzMzOSBmb3JtYXQuXG4gICAqL1xuICBpbnRlcm5hbEpzb25SZWFkKFxuICAgIGpzb246IEpzb25WYWx1ZSxcbiAgICBvcHRpb25zOiBKc29uUmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVGltZXN0YW1wLFxuICApOiBUaW1lc3RhbXAge1xuICAgIGlmICh0eXBlb2YganNvbiAhPT0gJ3N0cmluZycpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbmFibGUgdG8gcGFyc2UgVGltZXN0YW1wIGZyb20gSlNPTiAnICsgdHlwZW9mSnNvblZhbHVlKGpzb24pICsgJy4nLFxuICAgICAgKTtcbiAgICBsZXQgbWF0Y2hlcyA9IGpzb24ubWF0Y2goXG4gICAgICAvXihbMC05XXs0fSktKFswLTldezJ9KS0oWzAtOV17Mn0pVChbMC05XXsyfSk6KFswLTldezJ9KTooWzAtOV17Mn0pKD86WnxcXC4oWzAtOV17Myw5fSlafChbKy1dWzAtOV1bMC05XTpbMC05XVswLTldKSkkLyxcbiAgICApO1xuICAgIGlmICghbWF0Y2hlcylcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlIFRpbWVzdGFtcCBmcm9tIEpTT04uIEludmFsaWQgZm9ybWF0LicpO1xuICAgIGxldCBtcyA9IERhdGUucGFyc2UoXG4gICAgICBtYXRjaGVzWzFdICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgbWF0Y2hlc1syXSArXG4gICAgICAgICctJyArXG4gICAgICAgIG1hdGNoZXNbM10gK1xuICAgICAgICAnVCcgK1xuICAgICAgICBtYXRjaGVzWzRdICtcbiAgICAgICAgJzonICtcbiAgICAgICAgbWF0Y2hlc1s1XSArXG4gICAgICAgICc6JyArXG4gICAgICAgIG1hdGNoZXNbNl0gK1xuICAgICAgICAobWF0Y2hlc1s4XSA/IG1hdGNoZXNbOF0gOiAnWicpLFxuICAgICk7XG4gICAgaWYgKE51bWJlci5pc05hTihtcykpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSBUaW1lc3RhbXAgZnJvbSBKU09OLiBJbnZhbGlkIHZhbHVlLicpO1xuICAgIGlmIChcbiAgICAgIG1zIDwgRGF0ZS5wYXJzZSgnMDAwMS0wMS0wMVQwMDowMDowMFonKSB8fFxuICAgICAgbXMgPiBEYXRlLnBhcnNlKCc5OTk5LTEyLTMxVDIzOjU5OjU5WicpXG4gICAgKVxuICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICdVbmFibGUgdG8gcGFyc2UgVGltZXN0YW1wIGZyb20gSlNPTi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS4nLFxuICAgICAgKTtcbiAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0gdGhpcy5jcmVhdGUoKTtcbiAgICB0YXJnZXQuc2Vjb25kcyA9IFBiTG9uZy5mcm9tKG1zIC8gMTAwMCkudG9TdHJpbmcoKTtcbiAgICB0YXJnZXQubmFub3MgPSAwO1xuICAgIGlmIChtYXRjaGVzWzddKVxuICAgICAgdGFyZ2V0Lm5hbm9zID1cbiAgICAgICAgcGFyc2VJbnQoJzEnICsgbWF0Y2hlc1s3XSArICcwJy5yZXBlYXQoOSAtIG1hdGNoZXNbN10ubGVuZ3RoKSkgLVxuICAgICAgICAxMDAwMDAwMDAwO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gKi9cbmV4cG9ydCBjb25zdCBUaW1lc3RhbXAgPSBuZXcgVGltZXN0YW1wJFR5cGUoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS40IHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGUsb3B0aW1pemVfY29kZV9zaXplXG4vLyBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmlsZSBcInZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzLnByb3RvXCIgKHBhY2thZ2UgXCJzdHJlYW0udmlkZW8uc2Z1Lm1vZGVsc1wiLCBzeW50YXggcHJvdG8zKVxuLy8gdHNsaW50OmRpc2FibGVcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSAnQHByb3RvYnVmLXRzL3J1bnRpbWUnO1xuaW1wb3J0IHsgU3RydWN0IH0gZnJvbSAnLi4vLi4vLi4vZ29vZ2xlL3Byb3RvYnVmL3N0cnVjdCc7XG5pbXBvcnQgeyBUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wJztcblxuLyoqXG4gKiBDYWxsU3RhdGUgaXMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNhbGxcbiAqIGFzIHNlZW4gYnkgYW4gU0ZVLlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxTdGF0ZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTdGF0ZSB7XG4gIC8qKlxuICAgKiBwYXJ0aWNpcGFudHMgaXMgdGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzIGluIHRoZSBjYWxsLlxuICAgKiBJbiBsYXJnZSBjYWxscywgdGhlIGxpc3QgY291bGQgYmUgdHJ1bmNhdGVkIGluIHdoaWNoXG4gICAqIGNhc2UsIHRoZSBsaXN0IG9mIHBhcnRpY2lwYW50cyBjb250YWlucyBmZXdlciBwYXJ0aWNpcGFudHNcbiAgICogdGhhbiB0aGUgY291bnRzIHJldHVybmVkIGluIHBhcnRpY2lwYW50X2NvdW50LiBBbm9ueW1vdXNcbiAgICogcGFydGljaXBhbnRzIGFyZSAqKk5PVCoqIGluY2x1ZGVkIGluIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50IHBhcnRpY2lwYW50cyA9IDE7XG4gICAqL1xuICBwYXJ0aWNpcGFudHM6IFBhcnRpY2lwYW50W107XG4gIC8qKlxuICAgKiBzdGFydGVkX2F0IGlzIHRoZSB0aW1lIHRoZSBjYWxsIHNlc3Npb24gYWN0dWFsbHkgc3RhcnRlZC5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIHN0YXJ0ZWRfYXQgPSAyO1xuICAgKi9cbiAgc3RhcnRlZEF0PzogVGltZXN0YW1wO1xuICAvKipcbiAgICogcGFydGljaXBhbnRfY291bnQgY29udGFpbnMgdGhlIHN1bW1hcnkgb2YgdGhlIGNvdW50cy5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudENvdW50IHBhcnRpY2lwYW50X2NvdW50ID0gMztcbiAgICovXG4gIHBhcnRpY2lwYW50Q291bnQ/OiBQYXJ0aWNpcGFudENvdW50O1xuICAvKipcbiAgICogdGhlIGxpc3Qgb2YgcGlucyBpbiB0aGUgY2FsbC5cbiAgICogUGlucyBhcmUgb3JkZXJlZCBpbiBkZXNjZW5kaW5nIG9yZGVyIChtb3N0IGltcG9ydGFudCBmaXJzdCkuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGluIHBpbnMgPSA0O1xuICAgKi9cbiAgcGluczogUGluW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50Q291bnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudENvdW50IHtcbiAgLyoqXG4gICAqIFRvdGFsIG51bWJlciBvZiBwYXJ0aWNpcGFudHMgaW4gdGhlIGNhbGwgaW5jbHVkaW5nXG4gICAqIHRoZSBhbm9ueW1vdXMgcGFydGljaXBhbnRzLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiB0b3RhbCA9IDE7XG4gICAqL1xuICB0b3RhbDogbnVtYmVyO1xuICAvKipcbiAgICogVG90YWwgbnVtYmVyIG9mIGFub255bW91cyBwYXJ0aWNpcGFudHMgaW4gdGhlIGNhbGwuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIGFub255bW91cyA9IDI7XG4gICAqL1xuICBhbm9ueW1vdXM6IG51bWJlcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGluXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGluIHtcbiAgLyoqXG4gICAqIHRoZSB1c2VyIHRvIHBpblxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogdGhlIHVzZXIgc2VzaW9uX2lkIHRvIHBpbiwgaWYgbm90IHByb3ZpZGVkLCBhcHBsaWVzIHRvIGFsbCBzZXNzaW9uc1xuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMjtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xufVxuLyoqXG4gKiB0aG9zZSB3aG8gYXJlIG9ubGluZSBpbiB0aGUgY2FsbFxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGljaXBhbnQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdXNlcl9pZCA9IDE7XG4gICAqL1xuICB1c2VySWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBtYXAgb2YgdHJhY2sgaWQgdG8gdHJhY2sgdHlwZVxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSBwdWJsaXNoZWRfdHJhY2tzID0gMztcbiAgICovXG4gIHB1Ymxpc2hlZFRyYWNrczogVHJhY2tUeXBlW107XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgam9pbmVkX2F0ID0gNDtcbiAgICovXG4gIGpvaW5lZEF0PzogVGltZXN0YW1wO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdHJhY2tfbG9va3VwX3ByZWZpeCA9IDU7XG4gICAqL1xuICB0cmFja0xvb2t1cFByZWZpeDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eSBjb25uZWN0aW9uX3F1YWxpdHkgPSA2O1xuICAgKi9cbiAgY29ubmVjdGlvblF1YWxpdHk6IENvbm5lY3Rpb25RdWFsaXR5O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIGlzX3NwZWFraW5nID0gNztcbiAgICovXG4gIGlzU3BlYWtpbmc6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaXNfZG9taW5hbnRfc3BlYWtlciA9IDg7XG4gICAqL1xuICBpc0RvbWluYW50U3BlYWtlcjogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZmxvYXQgYXVkaW9fbGV2ZWwgPSA5O1xuICAgKi9cbiAgYXVkaW9MZXZlbDogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgbmFtZSA9IDEwO1xuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgaW1hZ2UgPSAxMTtcbiAgICovXG4gIGltYWdlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QgY3VzdG9tID0gMTI7XG4gICAqL1xuICBjdXN0b20/OiBTdHJ1Y3Q7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmluZyByb2xlcyA9IDEzO1xuICAgKi9cbiAgcm9sZXM6IHN0cmluZ1tdO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TdHJlYW1RdWFsaXR5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZWFtUXVhbGl0eSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvUXVhbGl0eSB2aWRlb19xdWFsaXR5ID0gMTtcbiAgICovXG4gIHZpZGVvUXVhbGl0eTogVmlkZW9RdWFsaXR5O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdXNlcl9pZCA9IDI7XG4gICAqL1xuICB1c2VySWQ6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9EaW1lbnNpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb0RpbWVuc2lvbiB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiB3aWR0aCA9IDE7XG4gICAqL1xuICB3aWR0aDogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiB1aW50MzIgaGVpZ2h0ID0gMjtcbiAgICovXG4gIGhlaWdodDogbnVtYmVyO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0xheWVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9MYXllciB7XG4gIC8qKlxuICAgKiBmb3IgdHJhY2tzIHdpdGggYSBzaW5nbGUgbGF5ZXIsIHRoaXMgc2hvdWxkIGJlIEhJR0hcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgcmlkID0gMTtcbiAgICovXG4gIHJpZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvbiB2aWRlb19kaW1lbnNpb24gPSAyO1xuICAgKi9cbiAgdmlkZW9EaW1lbnNpb24/OiBWaWRlb0RpbWVuc2lvbjtcbiAgLyoqXG4gICAqIHRhcmdldCBiaXRyYXRlLCBzZXJ2ZXIgd2lsbCBtZWFzdXJlIGFjdHVhbFxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiBiaXRyYXRlID0gNDtcbiAgICovXG4gIGJpdHJhdGU6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIGZwcyA9IDU7XG4gICAqL1xuICBmcHM6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9RdWFsaXR5IHF1YWxpdHkgPSA2O1xuICAgKi9cbiAgcXVhbGl0eTogVmlkZW9RdWFsaXR5O1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENvZGVjIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIHBheWxvYWRfdHlwZSA9IDE7XG4gICAqL1xuICBwYXlsb2FkVHlwZTogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgbmFtZSA9IDI7XG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBmbXRwX2xpbmUgPSAzO1xuICAgKi9cbiAgZm10cExpbmU6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIGNsb2NrX3JhdGUgPSA0O1xuICAgKi9cbiAgY2xvY2tSYXRlOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBlbmNvZGluZ19wYXJhbWV0ZXJzID0gNTtcbiAgICovXG4gIGVuY29kaW5nUGFyYW1ldGVyczogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJpbmcgZmVlZGJhY2tzID0gNjtcbiAgICovXG4gIGZlZWRiYWNrczogc3RyaW5nW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLklDRVRyaWNrbGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ0VUcmlja2xlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUgcGVlcl90eXBlID0gMTtcbiAgICovXG4gIHBlZXJUeXBlOiBQZWVyVHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGljZV9jYW5kaWRhdGUgPSAyO1xuICAgKi9cbiAgaWNlQ2FuZGlkYXRlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMztcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja0luZm9cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFja0luZm8ge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdHJhY2tfaWQgPSAxO1xuICAgKi9cbiAgdHJhY2tJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUgdHJhY2tfdHlwZSA9IDI7XG4gICAqL1xuICB0cmFja1R5cGU6IFRyYWNrVHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9MYXllciBsYXllcnMgPSA1O1xuICAgKi9cbiAgbGF5ZXJzOiBWaWRlb0xheWVyW107XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBtaWQgPSA2O1xuICAgKi9cbiAgbWlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBmb3IgYXVkaW8gdHJhY2tzXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBkdHggPSA3O1xuICAgKi9cbiAgZHR4OiBib29sZWFuO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIHN0ZXJlbyA9IDg7XG4gICAqL1xuICBzdGVyZW86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgcmVkID0gOTtcbiAgICovXG4gIHJlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBtdXRlZCA9IDEwO1xuICAgKi9cbiAgbXV0ZWQ6IGJvb2xlYW47XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3Ige1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvckNvZGUgY29kZSA9IDE7XG4gICAqL1xuICBjb2RlOiBFcnJvckNvZGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBtZXNzYWdlID0gMjtcbiAgICovXG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBzaG91bGRfcmV0cnkgPSAzO1xuICAgKi9cbiAgc2hvdWxkUmV0cnk6IGJvb2xlYW47XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNsaWVudERldGFpbHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDbGllbnREZXRhaWxzIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrIHNkayA9IDE7XG4gICAqL1xuICBzZGs/OiBTZGs7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLk9TIG9zID0gMjtcbiAgICovXG4gIG9zPzogT1M7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkJyb3dzZXIgYnJvd3NlciA9IDM7XG4gICAqL1xuICBicm93c2VyPzogQnJvd3NlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRGV2aWNlIGRldmljZSA9IDQ7XG4gICAqL1xuICBkZXZpY2U/OiBEZXZpY2U7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlNka1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFNkayB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlNka1R5cGUgdHlwZSA9IDE7XG4gICAqL1xuICB0eXBlOiBTZGtUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgbWFqb3IgPSAyO1xuICAgKi9cbiAgbWFqb3I6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIG1pbm9yID0gMztcbiAgICovXG4gIG1pbm9yOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBwYXRjaCA9IDQ7XG4gICAqL1xuICBwYXRjaDogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5PU1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE9TIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIG5hbWUgPSAxO1xuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdmVyc2lvbiA9IDI7XG4gICAqL1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBhcmNoaXRlY3R1cmUgPSAzO1xuICAgKi9cbiAgYXJjaGl0ZWN0dXJlOiBzdHJpbmc7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkJyb3dzZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcm93c2VyIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIG5hbWUgPSAxO1xuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdmVyc2lvbiA9IDI7XG4gICAqL1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkRldmljZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIERldmljZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBuYW1lID0gMTtcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHZlcnNpb24gPSAyO1xuICAgKi9cbiAgdmVyc2lvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DYWxsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbCB7XG4gIC8qKlxuICAgKiB0aGUgY2FsbCB0eXBlXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHR5cGUgPSAxO1xuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICogdGhlIGNhbGwgaWRcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgaWQgPSAyO1xuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIHRoZSBpZCBvZiB0aGUgdXNlciB0aGF0IGNyZWF0ZWQgdGhpcyBjYWxsXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGNyZWF0ZWRfYnlfdXNlcl9pZCA9IDM7XG4gICAqL1xuICBjcmVhdGVkQnlVc2VySWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIHRoZSBpZCBvZiB0aGUgY3VycmVudCBob3N0IGZvciB0aGlzIGNhbGxcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgaG9zdF91c2VyX2lkID0gNDtcbiAgICovXG4gIGhvc3RVc2VySWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZ29vZ2xlLnByb3RvYnVmLlN0cnVjdCBjdXN0b20gPSA1O1xuICAgKi9cbiAgY3VzdG9tPzogU3RydWN0O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGNyZWF0ZWRfYXQgPSA2O1xuICAgKi9cbiAgY3JlYXRlZEF0PzogVGltZXN0YW1wO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIHVwZGF0ZWRfYXQgPSA3O1xuICAgKi9cbiAgdXBkYXRlZEF0PzogVGltZXN0YW1wO1xufVxuLyoqXG4gKiBDYWxsR3JhbnRzIHJlcHJlc2VudHMgdGhlIHNldCBvZiBwZXJtaXNzaW9ucyBnaXZlblxuICogdG8gdGhlIHVzZXIgZm9yIHRoZSBjdXJyZW50IGNhbGwuXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbEdyYW50c1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxHcmFudHMge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIGNhbl9wdWJsaXNoX2F1ZGlvID0gMTtcbiAgICovXG4gIGNhblB1Ymxpc2hBdWRpbzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBjYW5fcHVibGlzaF92aWRlbyA9IDI7XG4gICAqL1xuICBjYW5QdWJsaXNoVmlkZW86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgY2FuX3NjcmVlbnNoYXJlID0gMztcbiAgICovXG4gIGNhblNjcmVlbnNoYXJlOiBib29sZWFuO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZVxuICovXG5leHBvcnQgZW51bSBQZWVyVHlwZSB7XG4gIC8qKlxuICAgKiB0b2RvIGZpeCBtZSAobWFyY2VsbylcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBFRVJfVFlQRV9QVUJMSVNIRVJfVU5TUEVDSUZJRUQgPSAwO1xuICAgKi9cbiAgUFVCTElTSEVSX1VOU1BFQ0lGSUVEID0gMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBQRUVSX1RZUEVfU1VCU0NSSUJFUiA9IDE7XG4gICAqL1xuICBTVUJTQ1JJQkVSID0gMSxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29ubmVjdGlvblF1YWxpdHlcbiAqL1xuZXhwb3J0IGVudW0gQ29ubmVjdGlvblF1YWxpdHkge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IENPTk5FQ1RJT05fUVVBTElUWV9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBVTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogQ09OTkVDVElPTl9RVUFMSVRZX1BPT1IgPSAxO1xuICAgKi9cbiAgUE9PUiA9IDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogQ09OTkVDVElPTl9RVUFMSVRZX0dPT0QgPSAyO1xuICAgKi9cbiAgR09PRCA9IDIsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogQ09OTkVDVElPTl9RVUFMSVRZX0VYQ0VMTEVOVCA9IDM7XG4gICAqL1xuICBFWENFTExFTlQgPSAzLFxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHlcbiAqL1xuZXhwb3J0IGVudW0gVmlkZW9RdWFsaXR5IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBWSURFT19RVUFMSVRZX0xPV19VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBMT1dfVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFZJREVPX1FVQUxJVFlfTUlEID0gMTtcbiAgICovXG4gIE1JRCA9IDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVklERU9fUVVBTElUWV9ISUdIID0gMjtcbiAgICovXG4gIEhJR0ggPSAyLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFZJREVPX1FVQUxJVFlfT0ZGID0gMztcbiAgICovXG4gIE9GRiA9IDMsXG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZVxuICovXG5leHBvcnQgZW51bSBUcmFja1R5cGUge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1RZUEVfVU5TUEVDSUZJRUQgPSAwO1xuICAgKi9cbiAgVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1RZUEVfQVVESU8gPSAxO1xuICAgKi9cbiAgQVVESU8gPSAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1RZUEVfVklERU8gPSAyO1xuICAgKi9cbiAgVklERU8gPSAyLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1RZUEVfU0NSRUVOX1NIQVJFID0gMztcbiAgICovXG4gIFNDUkVFTl9TSEFSRSA9IDMsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVFlQRV9TQ1JFRU5fU0hBUkVfQVVESU8gPSA0O1xuICAgKi9cbiAgU0NSRUVOX1NIQVJFX0FVRElPID0gNCxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3JDb2RlXG4gKi9cbmV4cG9ydCBlbnVtIEVycm9yQ29kZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBVTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QVUJMSVNIX1RSQUNLX05PVF9GT1VORCA9IDEwMDtcbiAgICovXG4gIFBVQkxJU0hfVFJBQ0tfTk9UX0ZPVU5EID0gMTAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUFVCTElTSF9UUkFDS1NfTUlTTUFUQ0ggPSAxMDE7XG4gICAqL1xuICBQVUJMSVNIX1RSQUNLU19NSVNNQVRDSCA9IDEwMSxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BVQkxJU0hfVFJBQ0tfT1VUX09GX09SREVSID0gMTAyO1xuICAgKi9cbiAgUFVCTElTSF9UUkFDS19PVVRfT0ZfT1JERVIgPSAxMDIsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QVUJMSVNIX1RSQUNLX1ZJREVPX0xBWUVSX05PVF9GT1VORCA9IDEwMztcbiAgICovXG4gIFBVQkxJU0hfVFJBQ0tfVklERU9fTEFZRVJfTk9UX0ZPVU5EID0gMTAzLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfTElWRV9FTkRFRCA9IDEwNDtcbiAgICovXG4gIExJVkVfRU5ERUQgPSAxMDQsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QQVJUSUNJUEFOVF9OT1RfRk9VTkQgPSAyMDA7XG4gICAqL1xuICBQQVJUSUNJUEFOVF9OT1RfRk9VTkQgPSAyMDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QQVJUSUNJUEFOVF9NSUdSQVRJTkdfT1VUID0gMjAxO1xuICAgKi9cbiAgUEFSVElDSVBBTlRfTUlHUkFUSU5HX09VVCA9IDIwMSxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BBUlRJQ0lQQU5UX01JR1JBVElPTl9GQUlMRUQgPSAyMDI7XG4gICAqL1xuICBQQVJUSUNJUEFOVF9NSUdSQVRJT05fRkFJTEVEID0gMjAyLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUEFSVElDSVBBTlRfTUlHUkFUSU5HID0gMjAzO1xuICAgKi9cbiAgUEFSVElDSVBBTlRfTUlHUkFUSU5HID0gMjAzLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUEFSVElDSVBBTlRfUkVDT05ORUNUX0ZBSUxFRCA9IDIwNDtcbiAgICovXG4gIFBBUlRJQ0lQQU5UX1JFQ09OTkVDVF9GQUlMRUQgPSAyMDQsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QQVJUSUNJUEFOVF9NRURJQV9UUkFOU1BPUlRfRkFJTFVSRSA9IDIwNTtcbiAgICovXG4gIFBBUlRJQ0lQQU5UX01FRElBX1RSQU5TUE9SVF9GQUlMVVJFID0gMjA1LFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfQ0FMTF9OT1RfRk9VTkQgPSAzMDA7XG4gICAqL1xuICBDQUxMX05PVF9GT1VORCA9IDMwMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1JFUVVFU1RfVkFMSURBVElPTl9GQUlMRUQgPSA0MDA7XG4gICAqL1xuICBSRVFVRVNUX1ZBTElEQVRJT05fRkFJTEVEID0gNDAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfVU5BVVRIRU5USUNBVEVEID0gNDAxO1xuICAgKi9cbiAgVU5BVVRIRU5USUNBVEVEID0gNDAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUEVSTUlTU0lPTl9ERU5JRUQgPSA0MDM7XG4gICAqL1xuICBQRVJNSVNTSU9OX0RFTklFRCA9IDQwMyxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1RPT19NQU5ZX1JFUVVFU1RTID0gNDI5O1xuICAgKi9cbiAgVE9PX01BTllfUkVRVUVTVFMgPSA0MjksXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9JTlRFUk5BTF9TRVJWRVJfRVJST1IgPSA1MDA7XG4gICAqL1xuICBJTlRFUk5BTF9TRVJWRVJfRVJST1IgPSA1MDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9TRlVfU0hVVFRJTkdfRE9XTiA9IDYwMDtcbiAgICovXG4gIFNGVV9TSFVUVElOR19ET1dOID0gNjAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfU0ZVX0ZVTEwgPSA3MDA7XG4gICAqL1xuICBTRlVfRlVMTCA9IDcwMCxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrVHlwZVxuICovXG5leHBvcnQgZW51bSBTZGtUeXBlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBTREtfVFlQRV9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBVTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogU0RLX1RZUEVfUkVBQ1QgPSAxO1xuICAgKi9cbiAgUkVBQ1QgPSAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFNES19UWVBFX0FOR1VMQVIgPSAyO1xuICAgKi9cbiAgQU5HVUxBUiA9IDIsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogU0RLX1RZUEVfQU5EUk9JRCA9IDM7XG4gICAqL1xuICBBTkRST0lEID0gMyxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBTREtfVFlQRV9JT1MgPSA0O1xuICAgKi9cbiAgSU9TID0gNCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBTREtfVFlQRV9GTFVUVEVSID0gNTtcbiAgICovXG4gIEZMVVRURVIgPSA1LFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFNES19UWVBFX1JFQUNUX05BVElWRSA9IDY7XG4gICAqL1xuICBSRUFDVF9OQVRJVkUgPSA2LFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFNES19UWVBFX1VOSVRZID0gNztcbiAgICovXG4gIFVOSVRZID0gNyxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBTREtfVFlQRV9HTyA9IDg7XG4gICAqL1xuICBHTyA9IDgsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogU0RLX1RZUEVfUExBSU5fSkFWQVNDUklQVCA9IDk7XG4gICAqL1xuICBQTEFJTl9KQVZBU0NSSVBUID0gOSxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tVbnB1Ymxpc2hSZWFzb25cbiAqL1xuZXhwb3J0IGVudW0gVHJhY2tVbnB1Ymxpc2hSZWFzb24ge1xuICAvKipcbiAgICogRGVmYXVsdCB2YWx1ZSB3aGljaCBpcyB1c2VkIHdoZW4gdGhlIHNwZWNpZmljIHJlYXNvblxuICAgKiBmb3IgbXV0aW5nIHRoZSB0cmFjayBpcyBub3Qga25vd24uXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBUUkFDS19VTlBVQkxJU0hfUkVBU09OX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIFVOU1BFQ0lGSUVEID0gMCxcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdXNlciBtdXRpbmcgdGhlaXIgdHJhY2tzLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVU5QVUJMSVNIX1JFQVNPTl9VU0VSX01VVEVEID0gMTtcbiAgICovXG4gIFVTRVJfTVVURUQgPSAxLFxuICAvKipcbiAgICogUmVwcmVzZW50cyBtdXRpbmcgdGhlIHRyYWNrIGJlY2F1c2UgdGhlIHBlcm1pc3Npb24gdG9cbiAgICogcHVibGlzaCB0aGUgdHJhY2sgaGFzIGJlZW4gcmV2b2tlZC5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1VOUFVCTElTSF9SRUFTT05fUEVSTUlTU0lPTl9SRVZPS0VEID0gMjtcbiAgICovXG4gIFBFUk1JU1NJT05fUkVWT0tFRCA9IDIsXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIG11dGluZyB0aGUgdHJhY2sgZHVlIHRvIG1vZGVyYXRpb24gYWN0aW9ucy5cbiAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBwZXJtaXNzaW9uIHJldm9rZWQgYmVjYXVzZSB0aGVcbiAgICogcGFydGljaXBhbnQgY2FuIHVubXV0ZSB0aGVtc2VsdmVzIGhlcmUgd2hlcmVhcyBpbiBjYXNlXG4gICAqIG9mIFwicGVybWlzc2lvbiByZXZva2VcIiBpdCBpcyBub3QgcG9zc2libGUgdW50aWwgdGhlXG4gICAqIGNhbGwgcGVybWlzc2lvbnMgYXJlIHVwZGF0ZWQuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBUUkFDS19VTlBVQkxJU0hfUkVBU09OX01PREVSQVRJT04gPSAzO1xuICAgKi9cbiAgTU9ERVJBVElPTiA9IDMsXG59XG4vKipcbiAqIEdvQXdheVJlYXNvbiByZXByZXNlbnRzIHRoZSByZWFzb24gZm9yIHRoZSBTRlUgdG9cbiAqIGRpc2Nvbm5lY3QgdGhlIGNsaWVudC5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Hb0F3YXlSZWFzb25cbiAqL1xuZXhwb3J0IGVudW0gR29Bd2F5UmVhc29uIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBHT19BV0FZX1JFQVNPTl9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBVTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogR09fQVdBWV9SRUFTT05fU0hVVFRJTkdfRE9XTiA9IDE7XG4gICAqL1xuICBTSFVUVElOR19ET1dOID0gMSxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBHT19BV0FZX1JFQVNPTl9SRUJBTEFOQ0UgPSAyO1xuICAgKi9cbiAgUkVCQUxBTkNFID0gMixcbn1cbi8qKlxuICogQ2FsbEVuZGVkUmVhc29uIHJlcHJlc2VudHMgdGhlIHJlYXNvbiBmb3IgdGhlIGNhbGwgdG8gZW5kLlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxFbmRlZFJlYXNvblxuICovXG5leHBvcnQgZW51bSBDYWxsRW5kZWRSZWFzb24ge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IENBTExfRU5ERURfUkVBU09OX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIFVOU1BFQ0lGSUVEID0gMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBDQUxMX0VOREVEX1JFQVNPTl9FTkRFRCA9IDE7XG4gICAqL1xuICBFTkRFRCA9IDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogQ0FMTF9FTkRFRF9SRUFTT05fTElWRV9FTkRFRCA9IDI7XG4gICAqL1xuICBMSVZFX0VOREVEID0gMixcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBDQUxMX0VOREVEX1JFQVNPTl9LSUNLRUQgPSAzO1xuICAgKi9cbiAgS0lDS0VEID0gMyxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBDQUxMX0VOREVEX1JFQVNPTl9TRVNTSU9OX0VOREVEID0gNDtcbiAgICovXG4gIFNFU1NJT05fRU5ERUQgPSA0LFxufVxuLyoqXG4gKiBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneSBkZWZpbmVzIHRoZSB3cyBzdHJhdGVnaWVzIGF2YWlsYWJsZSBmb3IgaGFuZGxpbmcgcmVjb25uZWN0aW9ucy5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5XZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneVxuICovXG5leHBvcnQgZW51bSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogV0VCU09DS0VUX1JFQ09OTkVDVF9TVFJBVEVHWV9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBVTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBTZW50IGFmdGVyIHJlYWNoaW5nIHRoZSBtYXhpbXVtIHJlY29ubmVjdGlvbiBhdHRlbXB0cywgb3IgYW55IG90aGVyIHVucmVjb3ZlcmFibGUgZXJyb3IgbGVhZGluZyB0byBwZXJtYW5lbnQgZGlzY29ubmVjdC5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFdFQlNPQ0tFVF9SRUNPTk5FQ1RfU1RSQVRFR1lfRElTQ09OTkVDVCA9IDE7XG4gICAqL1xuICBESVNDT05ORUNUID0gMSxcbiAgLyoqXG4gICAqIFNESyBzaG91bGQgbWFpbnRhaW5pbmcgZXhpc3RpbmcgcHVibGlzaGVyL3N1YnNjcmliZXIgcGMgaW5zdGFuY2VzXG4gICAqIGFuZCBlc3RhYmxpc2ggYSBuZXcgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBXRUJTT0NLRVRfUkVDT05ORUNUX1NUUkFURUdZX0ZBU1QgPSAyO1xuICAgKi9cbiAgRkFTVCA9IDIsXG4gIC8qKlxuICAgKiBTREsgc2hvdWxkIG9idGFpbiBuZXcgY3JlZGVudGlhbHMgZnJvbSB0aGUgY29vcmRpbmF0b3IsIGRyb3BzIGV4aXN0aW5nIHBjIGluc3RhbmNlcywgc2V0IGEgbmV3IHNlc3Npb25faWQgYW5kIGluaXRpYWxpemVzXG4gICAqIGEgY29tcGxldGVseSBuZXcgV2ViU29ja2V0IGNvbm5lY3Rpb24sIGVuc3VyaW5nIGEgY29tcHJlaGVuc2l2ZSByZXNldC5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFdFQlNPQ0tFVF9SRUNPTk5FQ1RfU1RSQVRFR1lfUkVKT0lOID0gMztcbiAgICovXG4gIFJFSk9JTiA9IDMsXG4gIC8qKlxuICAgKiBTREsgc2hvdWxkIG1pZ3JhdGUgdG8gYSBuZXcgU0ZVIGluc3RhbmNlXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBXRUJTT0NLRVRfUkVDT05ORUNUX1NUUkFURUdZX01JR1JBVEUgPSA0O1xuICAgKi9cbiAgTUlHUkFURSA9IDQsXG59XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBDYWxsU3RhdGUkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENhbGxTdGF0ZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFN0YXRlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50cycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gUGFydGljaXBhbnQsXG4gICAgICB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3N0YXJ0ZWRfYXQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFRpbWVzdGFtcCB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50X2NvdW50JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBUOiAoKSA9PiBQYXJ0aWNpcGFudENvdW50LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDQsXG4gICAgICAgIG5hbWU6ICdwaW5zJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBQaW4sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFN0YXRlXG4gKi9cbmV4cG9ydCBjb25zdCBDYWxsU3RhdGUgPSBuZXcgQ2FsbFN0YXRlJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFBhcnRpY2lwYW50Q291bnQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBhcnRpY2lwYW50Q291bnQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50Q291bnQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndG90YWwnLCBraW5kOiAnc2NhbGFyJywgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnYW5vbnltb3VzJywga2luZDogJ3NjYWxhcicsIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRDb3VudFxuICovXG5leHBvcnQgY29uc3QgUGFydGljaXBhbnRDb3VudCA9IG5ldyBQYXJ0aWNpcGFudENvdW50JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFBpbiRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGluPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QaW4nLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndXNlcl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBpblxuICovXG5leHBvcnQgY29uc3QgUGluID0gbmV3IFBpbiRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQYXJ0aWNpcGFudCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGFydGljaXBhbnQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAncHVibGlzaGVkX3RyYWNrcycsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUnLFxuICAgICAgICAgIFRyYWNrVHlwZSxcbiAgICAgICAgICAnVFJBQ0tfVFlQRV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdqb2luZWRfYXQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFRpbWVzdGFtcCB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ3RyYWNrX2xvb2t1cF9wcmVmaXgnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNixcbiAgICAgICAgbmFtZTogJ2Nvbm5lY3Rpb25fcXVhbGl0eScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eScsXG4gICAgICAgICAgQ29ubmVjdGlvblF1YWxpdHksXG4gICAgICAgICAgJ0NPTk5FQ1RJT05fUVVBTElUWV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDcsIG5hbWU6ICdpc19zcGVha2luZycsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDgsXG4gICAgICAgIG5hbWU6ICdpc19kb21pbmFudF9zcGVha2VyJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyxcbiAgICAgIH0sXG4gICAgICB7IG5vOiA5LCBuYW1lOiAnYXVkaW9fbGV2ZWwnLCBraW5kOiAnc2NhbGFyJywgVDogMiAvKlNjYWxhclR5cGUuRkxPQVQqLyB9LFxuICAgICAgeyBubzogMTAsIG5hbWU6ICduYW1lJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAxMSwgbmFtZTogJ2ltYWdlJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAxMiwgbmFtZTogJ2N1c3RvbScsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gU3RydWN0IH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxMyxcbiAgICAgICAgbmFtZTogJ3JvbGVzJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIHJlcGVhdDogMiAvKlJlcGVhdFR5cGUuVU5QQUNLRUQqLyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcnRpY2lwYW50ID0gbmV3IFBhcnRpY2lwYW50JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFN0cmVhbVF1YWxpdHkkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFN0cmVhbVF1YWxpdHk+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlN0cmVhbVF1YWxpdHknLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAndmlkZW9fcXVhbGl0eScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHknLFxuICAgICAgICAgIFZpZGVvUXVhbGl0eSxcbiAgICAgICAgICAnVklERU9fUVVBTElUWV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICd1c2VyX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TdHJlYW1RdWFsaXR5XG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1RdWFsaXR5ID0gbmV3IFN0cmVhbVF1YWxpdHkkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVmlkZW9EaW1lbnNpb24kVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFZpZGVvRGltZW5zaW9uPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvbicsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICd3aWR0aCcsIGtpbmQ6ICdzY2FsYXInLCBUOiAxMyAvKlNjYWxhclR5cGUuVUlOVDMyKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdoZWlnaHQnLCBraW5kOiAnc2NhbGFyJywgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvblxuICovXG5leHBvcnQgY29uc3QgVmlkZW9EaW1lbnNpb24gPSBuZXcgVmlkZW9EaW1lbnNpb24kVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVmlkZW9MYXllciRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VmlkZW9MYXllcj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9MYXllcicsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdyaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICd2aWRlb19kaW1lbnNpb24nLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIFQ6ICgpID0+IFZpZGVvRGltZW5zaW9uLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdiaXRyYXRlJywga2luZDogJ3NjYWxhcicsIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyB9LFxuICAgICAgeyBubzogNSwgbmFtZTogJ2ZwcycsIGtpbmQ6ICdzY2FsYXInLCBUOiAxMyAvKlNjYWxhclR5cGUuVUlOVDMyKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdxdWFsaXR5JyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvUXVhbGl0eScsXG4gICAgICAgICAgVmlkZW9RdWFsaXR5LFxuICAgICAgICAgICdWSURFT19RVUFMSVRZXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9MYXllclxuICovXG5leHBvcnQgY29uc3QgVmlkZW9MYXllciA9IG5ldyBWaWRlb0xheWVyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENvZGVjJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDb2RlYz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29kZWMnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAncGF5bG9hZF90eXBlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMywgbmFtZTogJ2ZtdHBfbGluZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogNCxcbiAgICAgICAgbmFtZTogJ2Nsb2NrX3JhdGUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDUsXG4gICAgICAgIG5hbWU6ICdlbmNvZGluZ19wYXJhbWV0ZXJzJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdmZWVkYmFja3MnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgcmVwZWF0OiAyIC8qUmVwZWF0VHlwZS5VTlBBQ0tFRCovLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlY1xuICovXG5leHBvcnQgY29uc3QgQ29kZWMgPSBuZXcgQ29kZWMkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSUNFVHJpY2tsZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8SUNFVHJpY2tsZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdwZWVyX3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFsnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUnLCBQZWVyVHlwZSwgJ1BFRVJfVFlQRV8nXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAnaWNlX2NhbmRpZGF0ZScsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAzLCBuYW1lOiAnc2Vzc2lvbl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZVxuICovXG5leHBvcnQgY29uc3QgSUNFVHJpY2tsZSA9IG5ldyBJQ0VUcmlja2xlJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFRyYWNrSW5mbyRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VHJhY2tJbmZvPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja0luZm8nLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndHJhY2tfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICd0cmFja190eXBlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZScsXG4gICAgICAgICAgVHJhY2tUeXBlLFxuICAgICAgICAgICdUUkFDS19UWVBFXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ2xheWVycycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVmlkZW9MYXllcixcbiAgICAgIH0sXG4gICAgICB7IG5vOiA2LCBuYW1lOiAnbWlkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiA3LCBuYW1lOiAnZHR4Jywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgICAgeyBubzogOCwgbmFtZTogJ3N0ZXJlbycsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICAgIHsgbm86IDksIG5hbWU6ICdyZWQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgICB7IG5vOiAxMCwgbmFtZTogJ211dGVkJywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tJbmZvXG4gKi9cbmV4cG9ydCBjb25zdCBUcmFja0luZm8gPSBuZXcgVHJhY2tJbmZvJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEVycm9yJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxFcnJvcj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3InLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnY29kZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvckNvZGUnLFxuICAgICAgICAgIEVycm9yQ29kZSxcbiAgICAgICAgICAnRVJST1JfQ09ERV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdtZXNzYWdlJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAzLCBuYW1lOiAnc2hvdWxkX3JldHJ5Jywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3JcbiAqL1xuZXhwb3J0IGNvbnN0IEVycm9yID0gbmV3IEVycm9yJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENsaWVudERldGFpbHMkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENsaWVudERldGFpbHM+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkNsaWVudERldGFpbHMnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnc2RrJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBTZGsgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdvcycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gT1MgfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdicm93c2VyJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBCcm93c2VyIH0sXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnZGV2aWNlJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBEZXZpY2UgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNsaWVudERldGFpbHNcbiAqL1xuZXhwb3J0IGNvbnN0IENsaWVudERldGFpbHMgPSBuZXcgQ2xpZW50RGV0YWlscyRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZGskVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNkaz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFsnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrVHlwZScsIFNka1R5cGUsICdTREtfVFlQRV8nXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbWFqb3InLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdtaW5vcicsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogNCwgbmFtZTogJ3BhdGNoJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TZGtcbiAqL1xuZXhwb3J0IGNvbnN0IFNkayA9IG5ldyBTZGskVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgT1MkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPE9TPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5PUycsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICduYW1lJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAndmVyc2lvbicsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2FyY2hpdGVjdHVyZScsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5PU1xuICovXG5leHBvcnQgY29uc3QgT1MgPSBuZXcgT1MkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQnJvd3NlciRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8QnJvd3Nlcj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQnJvd3NlcicsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICduYW1lJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAndmVyc2lvbicsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQnJvd3NlclxuICovXG5leHBvcnQgY29uc3QgQnJvd3NlciA9IG5ldyBCcm93c2VyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIERldmljZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8RGV2aWNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5EZXZpY2UnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3ZlcnNpb24nLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkRldmljZVxuICovXG5leHBvcnQgY29uc3QgRGV2aWNlID0gbmV3IERldmljZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBDYWxsJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDYWxsPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DYWxsJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3R5cGUnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdpZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2NyZWF0ZWRfYnlfdXNlcl9pZCcsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnaG9zdF91c2VyX2lkJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDUsIG5hbWU6ICdjdXN0b20nLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFN0cnVjdCB9LFxuICAgICAgeyBubzogNiwgbmFtZTogJ2NyZWF0ZWRfYXQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFRpbWVzdGFtcCB9LFxuICAgICAgeyBubzogNywgbmFtZTogJ3VwZGF0ZWRfYXQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFRpbWVzdGFtcCB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFxuICovXG5leHBvcnQgY29uc3QgQ2FsbCA9IG5ldyBDYWxsJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENhbGxHcmFudHMkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENhbGxHcmFudHM+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxHcmFudHMnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnY2FuX3B1Ymxpc2hfYXVkaW8nLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICdjYW5fcHVibGlzaF92aWRlbycsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2Nhbl9zY3JlZW5zaGFyZScsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbEdyYW50c1xuICovXG5leHBvcnQgY29uc3QgQ2FsbEdyYW50cyA9IG5ldyBDYWxsR3JhbnRzJFR5cGUoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS40IHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGUsb3B0aW1pemVfY29kZV9zaXplXG4vLyBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmlsZSBcInZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbC5wcm90b1wiIChwYWNrYWdlIFwic3RyZWFtLnZpZGVvLnNmdS5zaWduYWxcIiwgc3ludGF4IHByb3RvMylcbi8vIHRzbGludDpkaXNhYmxlXG5pbXBvcnQge1xuICBFcnJvcixcbiAgSUNFVHJpY2tsZSxcbiAgUGVlclR5cGUsXG4gIFRyYWNrSW5mbyxcbiAgVHJhY2tUeXBlLFxuICBWaWRlb0RpbWVuc2lvbixcbn0gZnJvbSAnLi4vbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBTZXJ2aWNlVHlwZSB9IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcblxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAxO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yID0gMTtcbiAgICovXG4gIGVycm9yPzogRXJyb3I7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAxO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDE7XG4gICAqL1xuICBlcnJvcj86IEVycm9yO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kU3RhdHNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZFN0YXRzUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMTtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc3Vic2NyaWJlcl9zdGF0cyA9IDI7XG4gICAqL1xuICBzdWJzY3JpYmVyU3RhdHM6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHB1Ymxpc2hlcl9zdGF0cyA9IDM7XG4gICAqL1xuICBwdWJsaXNoZXJTdGF0czogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgd2VicnRjX3ZlcnNpb24gPSA0O1xuICAgKi9cbiAgd2VicnRjVmVyc2lvbjogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RrID0gNTtcbiAgICovXG4gIHNkazogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RrX3ZlcnNpb24gPSA2O1xuICAgKi9cbiAgc2RrVmVyc2lvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kU3RhdHNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlbmRTdGF0c1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSAxO1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFUmVzdGFydFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ0VSZXN0YXJ0UmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMTtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgPSAyO1xuICAgKi9cbiAgcGVlclR5cGU6IFBlZXJUeXBlO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VSZXN0YXJ0UmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ0VSZXN0YXJ0UmVzcG9uc2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDE7XG4gICAqL1xuICBlcnJvcj86IEVycm9yO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAxO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrTXV0ZVN0YXRlIG11dGVfc3RhdGVzID0gMztcbiAgICovXG4gIG11dGVTdGF0ZXM6IFRyYWNrTXV0ZVN0YXRlW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yID0gNDtcbiAgICovXG4gIGVycm9yPzogRXJyb3I7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrTXV0ZVN0YXRlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2tNdXRlU3RhdGUge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUgdHJhY2tfdHlwZSA9IDE7XG4gICAqL1xuICB0cmFja1R5cGU6IFRyYWNrVHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBtdXRlZCA9IDI7XG4gICAqL1xuICBtdXRlZDogYm9vbGVhbjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuQXVkaW9NdXRlQ2hhbmdlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvTXV0ZUNoYW5nZWQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIG11dGVkID0gMTtcbiAgICovXG4gIG11dGVkOiBib29sZWFuO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5WaWRlb011dGVDaGFuZ2VkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9NdXRlQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgbXV0ZWQgPSAyO1xuICAgKi9cbiAgbXV0ZWQ6IGJvb2xlYW47XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIHRyYWNrcyA9IDM7XG4gICAqL1xuICB0cmFja3M6IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1tdO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7XG4gICAqL1xuICBlcnJvcj86IEVycm9yO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5UcmFja1N1YnNjcmlwdGlvbkRldGFpbHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdXNlcl9pZCA9IDE7XG4gICAqL1xuICB1c2VySWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0cmFja190eXBlID0gMztcbiAgICovXG4gIHRyYWNrVHlwZTogVHJhY2tUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvbiBkaW1lbnNpb24gPSA0O1xuICAgKi9cbiAgZGltZW5zaW9uPzogVmlkZW9EaW1lbnNpb247XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRBbnN3ZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZEFuc3dlclJlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgPSAxO1xuICAgKi9cbiAgcGVlclR5cGU6IFBlZXJUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RwID0gMjtcbiAgICovXG4gIHNkcDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDM7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZEFuc3dlclJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0O1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFVHJpY2tsZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNFVHJpY2tsZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0O1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2V0UHVibGlzaGVyUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNldFB1Ymxpc2hlclJlcXVlc3Qge1xuICAvKipcbiAgICogc2RwIG9mZmVyXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNkcCA9IDE7XG4gICAqL1xuICBzZHA6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrSW5mbyB0cmFja3MgPSAzO1xuICAgKi9cbiAgdHJhY2tzOiBUcmFja0luZm9bXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2V0UHVibGlzaGVyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXRQdWJsaXNoZXJSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBzZHAgYW5zd2VyXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNkcCA9IDE7XG4gICAqL1xuICBzZHA6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaWNlX3Jlc3RhcnQgPSAzO1xuICAgKi9cbiAgaWNlUmVzdGFydDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0O1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvcjtcbn1cbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnc2Vzc2lvbl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0ID1cbiAgbmV3IFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8U3RhcnROb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2UnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnZXJyb3InLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IEVycm9yIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGNvbnN0IFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSA9XG4gIG5ldyBTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2UkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8U3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TdG9wTm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0ID1cbiAgbmV3IFN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TdG9wTm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBjb25zdCBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSA9XG4gIG5ldyBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZW5kU3RhdHNSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTZW5kU3RhdHNSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kU3RhdHNSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICdzdWJzY3JpYmVyX3N0YXRzJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdwdWJsaXNoZXJfc3RhdHMnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNCxcbiAgICAgICAgbmFtZTogJ3dlYnJ0Y192ZXJzaW9uJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDUsIG5hbWU6ICdzZGsnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdzZGtfdmVyc2lvbicsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kU3RhdHNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTZW5kU3RhdHNSZXF1ZXN0ID0gbmV3IFNlbmRTdGF0c1JlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU2VuZFN0YXRzUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNlbmRTdGF0c1Jlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kU3RhdHNSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRTdGF0c1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBjb25zdCBTZW5kU3RhdHNSZXNwb25zZSA9IG5ldyBTZW5kU3RhdHNSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBJQ0VSZXN0YXJ0UmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8SUNFUmVzdGFydFJlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICdwZWVyX3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFsnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUnLCBQZWVyVHlwZSwgJ1BFRVJfVFlQRV8nXSxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VSZXN0YXJ0UmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgSUNFUmVzdGFydFJlcXVlc3QgPSBuZXcgSUNFUmVzdGFydFJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSUNFUmVzdGFydFJlc3BvbnNlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxJQ0VSZXN0YXJ0UmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgSUNFUmVzdGFydFJlc3BvbnNlID0gbmV3IElDRVJlc3RhcnRSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdtdXRlX3N0YXRlcycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVHJhY2tNdXRlU3RhdGUsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0ID0gbmV3IFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2UnLCBbXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnZXJyb3InLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IEVycm9yIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGNvbnN0IFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSA9IG5ldyBVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2UkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVHJhY2tNdXRlU3RhdGUkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFRyYWNrTXV0ZVN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5UcmFja011dGVTdGF0ZScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICd0cmFja190eXBlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZScsXG4gICAgICAgICAgVHJhY2tUeXBlLFxuICAgICAgICAgICdUUkFDS19UWVBFXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ211dGVkJywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tNdXRlU3RhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IFRyYWNrTXV0ZVN0YXRlID0gbmV3IFRyYWNrTXV0ZVN0YXRlJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEF1ZGlvTXV0ZUNoYW5nZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEF1ZGlvTXV0ZUNoYW5nZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLkF1ZGlvTXV0ZUNoYW5nZWQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnbXV0ZWQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5BdWRpb011dGVDaGFuZ2VkXG4gKi9cbmV4cG9ydCBjb25zdCBBdWRpb011dGVDaGFuZ2VkID0gbmV3IEF1ZGlvTXV0ZUNoYW5nZWQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVmlkZW9NdXRlQ2hhbmdlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VmlkZW9NdXRlQ2hhbmdlZD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVmlkZW9NdXRlQ2hhbmdlZCcsIFtcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdtdXRlZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlZpZGVvTXV0ZUNoYW5nZWRcbiAqL1xuZXhwb3J0IGNvbnN0IFZpZGVvTXV0ZUNoYW5nZWQgPSBuZXcgVmlkZW9NdXRlQ2hhbmdlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICd0cmFja3MnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QgPSBuZXcgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlID1cbiAgbmV3IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAndHJhY2tfdHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUnLFxuICAgICAgICAgIFRyYWNrVHlwZSxcbiAgICAgICAgICAnVFJBQ0tfVFlQRV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdkaW1lbnNpb24nLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFZpZGVvRGltZW5zaW9uIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5UcmFja1N1YnNjcmlwdGlvbkRldGFpbHNcbiAqL1xuZXhwb3J0IGNvbnN0IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyA9IG5ldyBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU2VuZEFuc3dlclJlcXVlc3QkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNlbmRBbnN3ZXJSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVxdWVzdCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdwZWVyX3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFsnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUnLCBQZWVyVHlwZSwgJ1BFRVJfVFlQRV8nXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnc2RwJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAzLCBuYW1lOiAnc2Vzc2lvbl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IFNlbmRBbnN3ZXJSZXF1ZXN0ID0gbmV3IFNlbmRBbnN3ZXJSZXF1ZXN0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFNlbmRBbnN3ZXJSZXNwb25zZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8U2VuZEFuc3dlclJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVzcG9uc2UnLCBbXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnZXJyb3InLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IEVycm9yIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGNvbnN0IFNlbmRBbnN3ZXJSZXNwb25zZSA9IG5ldyBTZW5kQW5zd2VyUmVzcG9uc2UkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSUNFVHJpY2tsZVJlc3BvbnNlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxJQ0VUcmlja2xlUmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVRyaWNrbGVSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVRyaWNrbGVSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgSUNFVHJpY2tsZVJlc3BvbnNlID0gbmV3IElDRVRyaWNrbGVSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZXRQdWJsaXNoZXJSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTZXRQdWJsaXNoZXJSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3NkcCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICd0cmFja3MnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrSW5mbyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTZXRQdWJsaXNoZXJSZXF1ZXN0ID0gbmV3IFNldFB1Ymxpc2hlclJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU2V0UHVibGlzaGVyUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNldFB1Ymxpc2hlclJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdzZHAnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAzLCBuYW1lOiAnaWNlX3Jlc3RhcnQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnZXJyb3InLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IEVycm9yIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgU2V0UHVibGlzaGVyUmVzcG9uc2UgPSBuZXcgU2V0UHVibGlzaGVyUmVzcG9uc2UkVHlwZSgpO1xuLyoqXG4gKiBAZ2VuZXJhdGVkIFNlcnZpY2VUeXBlIGZvciBwcm90b2J1ZiBzZXJ2aWNlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNpZ25hbFNlcnZlclxuICovXG5leHBvcnQgY29uc3QgU2lnbmFsU2VydmVyID0gbmV3IFNlcnZpY2VUeXBlKFxuICAnc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2lnbmFsU2VydmVyJyxcbiAgW1xuICAgIHtcbiAgICAgIG5hbWU6ICdTZXRQdWJsaXNoZXInLFxuICAgICAgb3B0aW9uczoge30sXG4gICAgICBJOiBTZXRQdWJsaXNoZXJSZXF1ZXN0LFxuICAgICAgTzogU2V0UHVibGlzaGVyUmVzcG9uc2UsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnU2VuZEFuc3dlcicsXG4gICAgICBvcHRpb25zOiB7fSxcbiAgICAgIEk6IFNlbmRBbnN3ZXJSZXF1ZXN0LFxuICAgICAgTzogU2VuZEFuc3dlclJlc3BvbnNlLFxuICAgIH0sXG4gICAgeyBuYW1lOiAnSWNlVHJpY2tsZScsIG9wdGlvbnM6IHt9LCBJOiBJQ0VUcmlja2xlLCBPOiBJQ0VUcmlja2xlUmVzcG9uc2UgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnVXBkYXRlU3Vic2NyaXB0aW9ucycsXG4gICAgICBvcHRpb25zOiB7fSxcbiAgICAgIEk6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICAgICAgTzogVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ1VwZGF0ZU11dGVTdGF0ZXMnLFxuICAgICAgb3B0aW9uczoge30sXG4gICAgICBJOiBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCxcbiAgICAgIE86IFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdJY2VSZXN0YXJ0JyxcbiAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgSTogSUNFUmVzdGFydFJlcXVlc3QsXG4gICAgICBPOiBJQ0VSZXN0YXJ0UmVzcG9uc2UsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnU2VuZFN0YXRzJyxcbiAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgSTogU2VuZFN0YXRzUmVxdWVzdCxcbiAgICAgIE86IFNlbmRTdGF0c1Jlc3BvbnNlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ1N0YXJ0Tm9pc2VDYW5jZWxsYXRpb24nLFxuICAgICAgb3B0aW9uczoge30sXG4gICAgICBJOiBTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCxcbiAgICAgIE86IFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdTdG9wTm9pc2VDYW5jZWxsYXRpb24nLFxuICAgICAgb3B0aW9uczoge30sXG4gICAgICBJOiBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0LFxuICAgICAgTzogU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2UsXG4gICAgfSxcbiAgXSxcbik7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gQGdlbmVyYXRlZCBieSBwcm90b2J1Zi10cyAyLjkuNCB3aXRoIHBhcmFtZXRlciBsb25nX3R5cGVfc3RyaW5nLGNsaWVudF9nZW5lcmljLHNlcnZlcl9ub25lLGVzbGludF9kaXNhYmxlLG9wdGltaXplX2NvZGVfc2l6ZVxuLy8gQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpbGUgXCJ2aWRlby9zZnUvZXZlbnQvZXZlbnRzLnByb3RvXCIgKHBhY2thZ2UgXCJzdHJlYW0udmlkZW8uc2Z1LmV2ZW50XCIsIHN5bnRheCBwcm90bzMpXG4vLyB0c2xpbnQ6ZGlzYWJsZVxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tICdAcHJvdG9idWYtdHMvcnVudGltZSc7XG5pbXBvcnQge1xuICBDYWxsRW5kZWRSZWFzb24sXG4gIENhbGxHcmFudHMsXG4gIENhbGxTdGF0ZSxcbiAgQ2xpZW50RGV0YWlscyxcbiAgQ29kZWMsXG4gIENvbm5lY3Rpb25RdWFsaXR5LFxuICBFcnJvciBhcyBFcnJvciQsXG4gIEdvQXdheVJlYXNvbixcbiAgSUNFVHJpY2tsZSBhcyBJQ0VUcmlja2xlJCxcbiAgUGFydGljaXBhbnQsXG4gIFBhcnRpY2lwYW50Q291bnQsXG4gIFBlZXJUeXBlLFxuICBQaW4sXG4gIFRyYWNrSW5mbyxcbiAgVHJhY2tUeXBlLFxuICBUcmFja1VucHVibGlzaFJlYXNvbixcbiAgV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3ksXG59IGZyb20gJy4uL21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIH0gZnJvbSAnLi4vc2lnbmFsX3JwYy9zaWduYWwnO1xuXG4vKipcbiAqIFNGVUV2ZW50IGlzIGEgbWVzc2FnZSB0aGF0IGlzIHNlbnQgZnJvbSB0aGUgU0ZVIHRvIHRoZSBjbGllbnQuXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TZnVFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNmdUV2ZW50IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBvbmVvZjogZXZlbnRfcGF5bG9hZFxuICAgKi9cbiAgZXZlbnRQYXlsb2FkOlxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdzdWJzY3JpYmVyT2ZmZXInO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3Vic2NyaWJlck9mZmVyIHNlbmRzIHRoZSBTRFAgb2ZmZXIgZm9yIGVzdGFibGlzaGluZyB0aGVcbiAgICAgICAgICogc3Vic2NyaWJlciBQZWVyQ29ubmVjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlN1YnNjcmliZXJPZmZlciBzdWJzY3JpYmVyX29mZmVyID0gMTtcbiAgICAgICAgICovXG4gICAgICAgIHN1YnNjcmliZXJPZmZlcjogU3Vic2NyaWJlck9mZmVyO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdwdWJsaXNoZXJBbnN3ZXInO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHVibGlzaGVyQW5zd2VyIHNlbmRzIHRoZSBTRFAgYW5zd2VyIHRvIHRoZSBvZmZlciBzZW50IGJ5XG4gICAgICAgICAqIHRoZSBjbGllbnQgZm9yIGVzdGFibGlzaGluZyB0aGUgUHVibGlzaGVyIFBlZXJDb25uZWN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUHVibGlzaGVyQW5zd2VyIHB1Ymxpc2hlcl9hbnN3ZXIgPSAyO1xuICAgICAgICAgKi9cbiAgICAgICAgcHVibGlzaGVyQW5zd2VyOiBQdWJsaXNoZXJBbnN3ZXI7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2Nvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQgaXMgc2VudCB0byBpbmZvcm0gdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgICogcXVhbGl0eSBvZiB0aGUgcGFydGljaXBhbnRzIGluIHRoZSBjYWxsLiBJdCBkb2VzIG5vdCBoYXZlXG4gICAgICAgICAqIHRvIGNvbnRhaW4gdGhlIGZ1bGwgbGlzdCBvZiBjYWxsIHBhcnRpY2lwYW50cyBpbiBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCBjb25uZWN0aW9uX3F1YWxpdHlfY2hhbmdlZCA9IDM7XG4gICAgICAgICAqL1xuICAgICAgICBjb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQ6IENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnYXVkaW9MZXZlbENoYW5nZWQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXVkaW9MZXZlbENoYW5nZWQgaXMgc2VudCBmb3IgY2hhbmdlIGluIGF1ZGlvIGxldmVscyBvZlxuICAgICAgICAgKiB0aGUgcGFydGljaXBhbnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbENoYW5nZWQgYXVkaW9fbGV2ZWxfY2hhbmdlZCA9IDQ7XG4gICAgICAgICAqL1xuICAgICAgICBhdWRpb0xldmVsQ2hhbmdlZDogQXVkaW9MZXZlbENoYW5nZWQ7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2ljZVRyaWNrbGUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogSUNFVHJpY2tsZSBjb250YWlucyB0aGUgSUNFIGNhbmRpZGF0ZSByZXF1aXJlZCB0byBlc3RhYmxpc2hcbiAgICAgICAgICogdGhlIElDRSB0cmFuc3BvcnQ6IHBhcnQgb2YgZXN0YWJsaXNoaW5nIHRoZSBQZWVyQ29ubmVjdGlvblxuICAgICAgICAgKiBhbmQgYWxzbyBmb3IgSUNFIHJlc3RhcnRzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLklDRVRyaWNrbGUgaWNlX3RyaWNrbGUgPSA1O1xuICAgICAgICAgKi9cbiAgICAgICAgaWNlVHJpY2tsZTogSUNFVHJpY2tsZSQ7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2NoYW5nZVB1Ymxpc2hRdWFsaXR5JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYW5nZVB1Ymxpc2hRdWFsaXR5IGFkdmlzZXMgdGhlIHB1Ymxpc2hlciB0byBzd2l0Y2ggb24vb2ZmXG4gICAgICAgICAqIHZhcmlvdXMgcXVhbGl0aWVzIG9mIHRoZWlyIHZpZGVvIHN0cmVhbSBiYXNlZCBvbiB0aGUgc3Vic2NyaXB0aW9uLlxuICAgICAgICAgKiBUaGlzIGlzIGRvbmUgdG8gc2F2ZSB0aGUgYmFuZHdpZHRoIGFuZCB0aGUgQ1BVIG9mIHRoZSBwdWJsaXNoZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DaGFuZ2VQdWJsaXNoUXVhbGl0eSBjaGFuZ2VfcHVibGlzaF9xdWFsaXR5ID0gNjtcbiAgICAgICAgICovXG4gICAgICAgIGNoYW5nZVB1Ymxpc2hRdWFsaXR5OiBDaGFuZ2VQdWJsaXNoUXVhbGl0eTtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAncGFydGljaXBhbnRKb2luZWQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFydGljaXBhbnRKb2luZWQgbm90aWZpZXMgdGhlIGNsaWVudCB0aGF0IGEgbmV3IHBhcnRpY2lwYW50XG4gICAgICAgICAqIGhhcyBqb2luZWQgdGhlIGNhbGwuIFRoaXMgaXMgbm90IHNlbnQgZm9yIGFub255bW91cyB1c2Vycy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50Sm9pbmVkIHBhcnRpY2lwYW50X2pvaW5lZCA9IDEwO1xuICAgICAgICAgKi9cbiAgICAgICAgcGFydGljaXBhbnRKb2luZWQ6IFBhcnRpY2lwYW50Sm9pbmVkO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdwYXJ0aWNpcGFudExlZnQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFydGljaXBhbnRMZWZ0IG5vdGlmaWVzIHRoZSBjbGllbnQgdGhhdCBhIGNhbGwgcGFydGljaXBhbnRcbiAgICAgICAgICogaGFzIGxlZnQgdGhlIGNhbGwuIFRoaXMgaXMgbm90IHNlbnQgZm9yIGFub255bW91cyB1c2Vycy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50TGVmdCBwYXJ0aWNpcGFudF9sZWZ0ID0gMTE7XG4gICAgICAgICAqL1xuICAgICAgICBwYXJ0aWNpcGFudExlZnQ6IFBhcnRpY2lwYW50TGVmdDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnZG9taW5hbnRTcGVha2VyQ2hhbmdlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkIG5vdGlmaWVzIHRoZSBjbGllbnQgYWJvdXQgdGhlIGN1cnJlbnRcbiAgICAgICAgICogZG9taW5hbnQgc3BlYWtlci4gVGhpcyBpcyByZXF1aXJlZCBmb3IgY2VydGFpbiB1c2UgY2FzZXMgbGlrZVxuICAgICAgICAgKiB0aGUgc3BvdGxpZ2h0IHZpZXcuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Eb21pbmFudFNwZWFrZXJDaGFuZ2VkIGRvbWluYW50X3NwZWFrZXJfY2hhbmdlZCA9IDEyO1xuICAgICAgICAgKi9cbiAgICAgICAgZG9taW5hbnRTcGVha2VyQ2hhbmdlZDogRG9taW5hbnRTcGVha2VyQ2hhbmdlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnam9pblJlc3BvbnNlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEpvaW5SZXNwb25zZSBhY2tub3dsZWRnZXMgYSBwYXJ0aWNpcGFudCBzdWNjZXNzZnVsbHkgam9pbmluZ1xuICAgICAgICAgKiB0aGUgY2FsbC4gVGhpcyBpcyBzZW50IGluIHJlc3BvbnNlIHRvIHRoZSBKb2luUmVxdWVzdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXNwb25zZSBqb2luX3Jlc3BvbnNlID0gMTM7XG4gICAgICAgICAqL1xuICAgICAgICBqb2luUmVzcG9uc2U6IEpvaW5SZXNwb25zZTtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnaGVhbHRoQ2hlY2tSZXNwb25zZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIZWFsdGhDaGVja1Jlc3BvbnNlIGlzIHNlbnQgaW4gcmVzcG9uc2UgdG8gdGhlIEhlYWx0aENoZWNrUmVxdWVzdC5cbiAgICAgICAgICogSXQgY29udGFpbnMgdGhlIHBhcnRpY2lwYW50IGNvdW50IGluIHRoZSBjYWxsLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXNwb25zZSBoZWFsdGhfY2hlY2tfcmVzcG9uc2UgPSAxNDtcbiAgICAgICAgICovXG4gICAgICAgIGhlYWx0aENoZWNrUmVzcG9uc2U6IEhlYWx0aENoZWNrUmVzcG9uc2U7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3RyYWNrUHVibGlzaGVkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYWNrUHVibGlzaGVkIGlzIHNlbnQgd2hlbiBhIG5ldyB0cmFjayAobGlrZSBhdWRpbywgdmlkZW8sIHNjcmVlbnNoYXJlKVxuICAgICAgICAgKiBpcyBwdWJsaXNoZWQgYnkgYSBwYXJ0aWNpcGFudCBpbiB0aGUgY2FsbC4gSXQgaXMgYWxzbyBzZW50IG9uIG11dGUvdW5tdXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVHJhY2tQdWJsaXNoZWQgdHJhY2tfcHVibGlzaGVkID0gMTY7XG4gICAgICAgICAqL1xuICAgICAgICB0cmFja1B1Ymxpc2hlZDogVHJhY2tQdWJsaXNoZWQ7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3RyYWNrVW5wdWJsaXNoZWQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2tVbnB1Ymxpc2hlZCBpcyBzZW50IHdoZW4gYSB0cmFjayAobGlrZSBhdWRpbywgdmlkZW8sIHNjcmVlbnNoYXJlKVxuICAgICAgICAgKiBpcyBubyBsb25nZXIgcHVibGlzaGVkLiBJdCBpcyBzZW50IG9uIG11dGluZyBhIHRyYWNrIG9yIHdoZW4gdGhlIHBhcnRpY2lwYW50XG4gICAgICAgICAqIGlzIGxlYXZpbmcgdGhlIGNhbGwuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1VucHVibGlzaGVkIHRyYWNrX3VucHVibGlzaGVkID0gMTc7XG4gICAgICAgICAqL1xuICAgICAgICB0cmFja1VucHVibGlzaGVkOiBUcmFja1VucHVibGlzaGVkO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdlcnJvcic7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFcnJvciBpcyB1c2VkIHRvIGNvbW11bmljYXRlIGFueSBlcnJvciByZWxhdGVkIHRvIHRoZSBwYXJ0aWNpcGFudC4gVGhlXG4gICAgICAgICAqIGVycm9yIGNvZGUgYW5kIHRoZSBtZXNzYWdlIGV4cGxhaW4gd2hhdCB3ZW50IHdyb25nLiBXaGV0aGVyIHRoZSBwYXJ0aWNpcGFudFxuICAgICAgICAgKiBjYW4gcmV0cnkgaXMgYWxzbyBpbmRpY2F0ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5FcnJvciBlcnJvciA9IDE4O1xuICAgICAgICAgKi9cbiAgICAgICAgZXJyb3I6IEVycm9yO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdjYWxsR3JhbnRzVXBkYXRlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsR3JhbnRzVXBkYXRlZCB0ZWxscyB3aGF0IHRyYWNrcyBhIHBhcnRpY2lwYW50IGlzIGFsbG93ZWQgdG8gcHVibGlzaC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNhbGxHcmFudHNVcGRhdGVkIGNhbGxfZ3JhbnRzX3VwZGF0ZWQgPSAxOTtcbiAgICAgICAgICovXG4gICAgICAgIGNhbGxHcmFudHNVcGRhdGVkOiBDYWxsR3JhbnRzVXBkYXRlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnZ29Bd2F5JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdvQXdheSB0ZWxscyB0aGUgY2xpZW50IHRvIG1pZ3JhdGUgYXdheSBmcm9tIHRoZSBTRlUgaXQgaXMgY29ubmVjdGVkIHRvLlxuICAgICAgICAgKiBUaGUgcmVhc29uIGZpZWxkIGluZGljYXRlcyB3aHkgdGhpcyBtZXNzYWdlIHdhcyBzZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuR29Bd2F5IGdvX2F3YXkgPSAyMDtcbiAgICAgICAgICovXG4gICAgICAgIGdvQXdheTogR29Bd2F5O1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdpY2VSZXN0YXJ0JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElDRVJlc3RhcnQgdGVsbHMgdGhlIGNsaWVudCB0byBwZXJmb3JtIElDRSByZXN0YXJ0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSUNFUmVzdGFydCBpY2VfcmVzdGFydCA9IDIxO1xuICAgICAgICAgKi9cbiAgICAgICAgaWNlUmVzdGFydDogSUNFUmVzdGFydDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAncGluc1VwZGF0ZWQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUGluc0NoYW5nZWQgaXMgc2VudCB0aGUgbGlzdCBvZiBwaW5zIGluIHRoZSBjYWxsIGNoYW5nZXMuIFRoaXMgZXZlbnQgY29udGFpbnMgdGhlIGVudGlyZSBsaXN0IG9mIHBpbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QaW5zQ2hhbmdlZCBwaW5zX3VwZGF0ZWQgPSAyMjtcbiAgICAgICAgICovXG4gICAgICAgIHBpbnNVcGRhdGVkOiBQaW5zQ2hhbmdlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnY2FsbEVuZGVkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxFbmRlZCBpcyBzZW50IGJ5IHRoZSBTRlUgdG8gdGhlIGNsaWVudCB0byBzaWduYWwgdGhhdCB0aGUgY2FsbCBoYXMgZW5kZWQuXG4gICAgICAgICAqIFRoZSByZWFzb24gbWF5IHNwZWNpZnkgd2h5IHRoZSBjYWxsIGhhcyBlbmRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNhbGxFbmRlZCBjYWxsX2VuZGVkID0gMjM7XG4gICAgICAgICAqL1xuICAgICAgICBjYWxsRW5kZWQ6IENhbGxFbmRlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAncGFydGljaXBhbnRVcGRhdGVkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhcnRpY2lwYW50VXBkYXRlZCBpcyBzZW50IHdoZW4gdXNlciBkYXRhIGlzIHVwZGF0ZWRcbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50VXBkYXRlZCBwYXJ0aWNpcGFudF91cGRhdGVkID0gMjQ7XG4gICAgICAgICAqL1xuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZWQ6IFBhcnRpY2lwYW50VXBkYXRlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAncGFydGljaXBhbnRNaWdyYXRpb25Db21wbGV0ZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlIGlzIHNlbnQgd2hlbiB0aGUgcGFydGljaXBhbnQgbWlncmF0aW9uIGlzIGNvbXBsZXRlXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlIHBhcnRpY2lwYW50X21pZ3JhdGlvbl9jb21wbGV0ZSA9IDI1O1xuICAgICAgICAgKi9cbiAgICAgICAgcGFydGljaXBhbnRNaWdyYXRpb25Db21wbGV0ZTogUGFydGljaXBhbnRNaWdyYXRpb25Db21wbGV0ZTtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiB1bmRlZmluZWQ7XG4gICAgICB9O1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50TWlncmF0aW9uQ29tcGxldGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlIHt9XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGluc0NoYW5nZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaW5zQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiB0aGUgbGlzdCBvZiBwaW5zIGluIHRoZSBjYWxsLlxuICAgKiBQaW5zIGFyZSBvcmRlcmVkIGluIGRlc2NlbmRpbmcgb3JkZXIgKG1vc3QgaW1wb3J0YW50IGZpcnN0KS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QaW4gcGlucyA9IDE7XG4gICAqL1xuICBwaW5zOiBQaW5bXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5FcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0O1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvciQ7XG4gIC8qKlxuICAgKiByZXR1cm5zIHRoZSByZWNvbm5lY3Qgc3RyYXRlZ3kgdG8gYmUgdXNlZCBieSB0aGUgY2xpZW50XG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3kgcmVjb25uZWN0X3N0cmF0ZWd5ID0gNTtcbiAgICovXG4gIHJlY29ubmVjdFN0cmF0ZWd5OiBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VUcmlja2xlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNFVHJpY2tsZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDE7XG4gICAqL1xuICBwZWVyVHlwZTogUGVlclR5cGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBpY2VfY2FuZGlkYXRlID0gMjtcbiAgICovXG4gIGljZUNhbmRpZGF0ZTogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LklDRVJlc3RhcnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ0VSZXN0YXJ0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUgcGVlcl90eXBlID0gMTtcbiAgICovXG4gIHBlZXJUeXBlOiBQZWVyVHlwZTtcbn1cbi8qKlxuICogU2Z1UmVxdWVzdCBpcyBhIG1lc3NhZ2UgdGhhdCBpcyBzZW50IGZyb20gdGhlIGNsaWVudCB0byB0aGUgU0ZVLlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuU2Z1UmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNmdVJlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG9uZW9mOiByZXF1ZXN0X3BheWxvYWRcbiAgICovXG4gIHJlcXVlc3RQYXlsb2FkOlxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdqb2luUmVxdWVzdCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlcXVlc3Qgam9pbl9yZXF1ZXN0ID0gMTtcbiAgICAgICAgICovXG4gICAgICAgIGpvaW5SZXF1ZXN0OiBKb2luUmVxdWVzdDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnaGVhbHRoQ2hlY2tSZXF1ZXN0JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1JlcXVlc3QgaGVhbHRoX2NoZWNrX3JlcXVlc3QgPSAyO1xuICAgICAgICAgKi9cbiAgICAgICAgaGVhbHRoQ2hlY2tSZXF1ZXN0OiBIZWFsdGhDaGVja1JlcXVlc3Q7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2xlYXZlQ2FsbFJlcXVlc3QnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkxlYXZlQ2FsbFJlcXVlc3QgbGVhdmVfY2FsbF9yZXF1ZXN0ID0gMztcbiAgICAgICAgICovXG4gICAgICAgIGxlYXZlQ2FsbFJlcXVlc3Q6IExlYXZlQ2FsbFJlcXVlc3Q7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogdW5kZWZpbmVkO1xuICAgICAgfTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5MZWF2ZUNhbGxSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGVhdmVDYWxsUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMTtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgcmVhc29uID0gMjtcbiAgICovXG4gIHJlYXNvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkhlYWx0aENoZWNrUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhlYWx0aENoZWNrUmVxdWVzdCB7fVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkhlYWx0aENoZWNrUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIZWFsdGhDaGVja1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRDb3VudCBwYXJ0aWNpcGFudF9jb3VudCA9IDE7XG4gICAqL1xuICBwYXJ0aWNpcGFudENvdW50PzogUGFydGljaXBhbnRDb3VudDtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1B1Ymxpc2hlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYWNrUHVibGlzaGVkIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHVzZXJfaWQgPSAxO1xuICAgKi9cbiAgdXNlcklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMjtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUgdHlwZSA9IDM7XG4gICAqL1xuICB0eXBlOiBUcmFja1R5cGU7XG4gIC8qKlxuICAgKiBQYXJ0aWNpcGFudCBpbmZvcm1hdGlvbiBoZXJlIGlzIGluY2x1ZGVkIGFzIGFuIG9wdGltaXNhdGlvblxuICAgKiBmb3IgbGFyZ2UgY2FsbHMgd2hlcmUgYnJvYWRjYXN0aW5nIG9uIGV2ZXJ5IHBhcnRpY2lwYW50IGpvaW5cbiAgICogaXMgZXhwZW5zaXZlLiBZb3Ugc2hvdWxkICoqTk9UKiogYXNzdW1lIHRoYXQgdGhpcyB3aWxsIGFsd2F5c1xuICAgKiBiZSBhdmFpbGFibGUgdGhvdWdoIHlvdSBjYW4gdXNlIGl0IHRvIHVwZGF0ZSB0aGUgcGFydGljaXBhbnRcbiAgICogbGlzdCB3aGVuIGl0IGlzIHRoZXJlLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50IHBhcnRpY2lwYW50ID0gNDtcbiAgICovXG4gIHBhcnRpY2lwYW50PzogUGFydGljaXBhbnQ7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVHJhY2tVbnB1Ymxpc2hlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYWNrVW5wdWJsaXNoZWQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdXNlcl9pZCA9IDE7XG4gICAqL1xuICB1c2VySWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0eXBlID0gMztcbiAgICovXG4gIHR5cGU6IFRyYWNrVHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tVbnB1Ymxpc2hSZWFzb24gY2F1c2UgPSA0O1xuICAgKi9cbiAgY2F1c2U6IFRyYWNrVW5wdWJsaXNoUmVhc29uO1xuICAvKipcbiAgICogUGFydGljaXBhbnQgaW5mb3JtYXRpb24gaGVyZSBpcyBpbmNsdWRlZCBhcyBhbiBvcHRpbWlzYXRpb25cbiAgICogZm9yIGxhcmdlIGNhbGxzIHdoZXJlIGJyb2FkY2FzdGluZyBvbiBldmVyeSBwYXJ0aWNpcGFudCBqb2luXG4gICAqIGlzIGV4cGVuc2l2ZS4gWW91IHNob3VsZCAqKk5PVCoqIGFzc3VtZSB0aGF0IHRoaXMgd2lsbCBhbHdheXNcbiAgICogYmUgYXZhaWxhYmxlIHRob3VnaCB5b3UgY2FuIHVzZSBpdCB0byB1cGRhdGUgdGhlIHBhcnRpY2lwYW50XG4gICAqIGxpc3Qgd2hlbiBpdCBpcyB0aGVyZS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCA9IDU7XG4gICAqL1xuICBwYXJ0aWNpcGFudD86IFBhcnRpY2lwYW50O1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9pblJlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdG9rZW4gPSAxO1xuICAgKi9cbiAgdG9rZW46IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBkdW1iIFNEUCB0aGF0IGFsbG93IHVzIHRvIGV4dHJhY3Qgc3Vic2NyaWJlcidzIGRlY29kZSBjb2RlY3NcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc3Vic2NyaWJlcl9zZHAgPSAzO1xuICAgKi9cbiAgc3Vic2NyaWJlclNkcDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DbGllbnREZXRhaWxzIGNsaWVudF9kZXRhaWxzID0gNDtcbiAgICovXG4gIGNsaWVudERldGFpbHM/OiBDbGllbnREZXRhaWxzO1xuICAvKipcbiAgICogRGVwcmVjYXRlZDogdXNlIFJlY29ubmVjdERldGFpbHMgaW5zdGVhZFxuICAgKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuTWlncmF0aW9uIG1pZ3JhdGlvbiA9IDUgW2RlcHJlY2F0ZWQgPSB0cnVlXTtcbiAgICovXG4gIG1pZ3JhdGlvbj86IE1pZ3JhdGlvbjtcbiAgLyoqXG4gICAqIEZhc3QgcmVjb25uZWN0IGZsYWcgZXhwbGljaXRseSBpbmRpY2F0ZXMgdGhhdCBpZiB0aGUgcGFydGljaXBhbnQgc2Vzc2lvblxuICAgKiBhbmQgdGhlIGFzc29jaWF0ZWQgc3RhdGUgaXMgc3RpbGwgcHJlc2VudCBpbiB0aGUgU0ZVLCB0aGUgY2xpZW50IGlzIHJlYWR5XG4gICAqIHRvIHJlc3RvcmUgdGhlIFBlZXJDb25uZWN0aW9uIHdpdGggYW4gSUNFIHJlc3RhcnQuIElmIHRoZSBTRlUgcmVwbGllcyB3aXRoXG4gICAqIFwicmVjb25uZWN0ZWQ6IHRydWVcIiBpbiBpdHMgSm9pblJlc3BvbnNlLCB0aGVuIGl0IGlzIHNhZmUgdG8gcGVyZm9ybSBhbiBJQ0VcbiAgICogcmVzdGFydCBvciBlbHNlIHRoZSBleGlzdGluZyBQZWVyQ29ubmVjdGlvbnMgbXVzdCBiZSBjbGVhbmVkIHVwLlxuICAgKlxuICAgKiBGb3IgdGhlIFNGVSwgZmFzdF9yZWNvbm5lY3Q6ZmFsc2UgaW5kaWNhdGVzIHRoYXQgZXZlbiBpZiBpdCBoYXMgdGhlIHN0YXRlXG4gICAqIGNhY2hlZCwgdGhlIGNsaWVudCBzdGF0ZSBpcyBub3QgaW4gc3luYyBhbmQgaGVuY2UgaXQgbXVzdCBiZSBjbGVhbmVkIHVwIGJlZm9yZVxuICAgKiBwcm9jZWVkaW5nIGZ1cnRoZXIuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBmYXN0X3JlY29ubmVjdCA9IDYgW2RlcHJlY2F0ZWQgPSB0cnVlXTtcbiAgICovXG4gIGZhc3RSZWNvbm5lY3Q6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUmVjb25uZWN0RGV0YWlscyByZWNvbm5lY3RfZGV0YWlscyA9IDc7XG4gICAqL1xuICByZWNvbm5lY3REZXRhaWxzPzogUmVjb25uZWN0RGV0YWlscztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5SZWNvbm5lY3REZXRhaWxzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb25uZWN0RGV0YWlscyB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLldlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5IHN0cmF0ZWd5ID0gMTtcbiAgICovXG4gIHN0cmF0ZWd5OiBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tJbmZvIGFubm91bmNlZF90cmFja3MgPSAzO1xuICAgKi9cbiAgYW5ub3VuY2VkVHJhY2tzOiBUcmFja0luZm9bXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIHN1YnNjcmlwdGlvbnMgPSA0O1xuICAgKi9cbiAgc3Vic2NyaXB0aW9uczogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzW107XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiByZWNvbm5lY3RfYXR0ZW1wdCA9IDU7XG4gICAqL1xuICByZWNvbm5lY3RBdHRlbXB0OiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBmcm9tX3NmdV9pZCA9IDY7XG4gICAqL1xuICBmcm9tU2Z1SWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIG9ubHkgc2V0IGluIGNhc2Ugb2YgcmVqb2luXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHByZXZpb3VzX3Nlc3Npb25faWQgPSA3O1xuICAgKi9cbiAgcHJldmlvdXNTZXNzaW9uSWQ6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5NaWdyYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNaWdyYXRpb24ge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgZnJvbV9zZnVfaWQgPSAxO1xuICAgKi9cbiAgZnJvbVNmdUlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrSW5mbyBhbm5vdW5jZWRfdHJhY2tzID0gMjtcbiAgICovXG4gIGFubm91bmNlZFRyYWNrczogVHJhY2tJbmZvW107XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyBzdWJzY3JpcHRpb25zID0gMztcbiAgICovXG4gIHN1YnNjcmlwdGlvbnM6IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1tdO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvaW5SZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxTdGF0ZSBjYWxsX3N0YXRlID0gMTtcbiAgICovXG4gIGNhbGxTdGF0ZT86IENhbGxTdGF0ZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCByZWNvbm5lY3RlZCA9IDI7XG4gICAqL1xuICByZWNvbm5lY3RlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogaW50MzIgZmFzdF9yZWNvbm5lY3RfZGVhZGxpbmVfc2Vjb25kcyA9IDM7XG4gICAqL1xuICBmYXN0UmVjb25uZWN0RGVhZGxpbmVTZWNvbmRzOiBudW1iZXI7XG59XG4vKipcbiAqIFBhcnRpY2lwYW50Sm9pbmVkIGlzIGZpcmVkIHdoZW4gYSB1c2VyIGpvaW5zIGEgY2FsbFxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRKb2luZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudEpvaW5lZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBjYWxsX2NpZCA9IDE7XG4gICAqL1xuICBjYWxsQ2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50IHBhcnRpY2lwYW50ID0gMjtcbiAgICovXG4gIHBhcnRpY2lwYW50PzogUGFydGljaXBhbnQ7XG59XG4vKipcbiAqIFBhcnRpY2lwYW50Sm9pbmVkIGlzIGZpcmVkIHdoZW4gYSB1c2VyIGxlYXZlcyBhIGNhbGxcbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50TGVmdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpY2lwYW50TGVmdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBjYWxsX2NpZCA9IDE7XG4gICAqL1xuICBjYWxsQ2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50IHBhcnRpY2lwYW50ID0gMjtcbiAgICovXG4gIHBhcnRpY2lwYW50PzogUGFydGljaXBhbnQ7XG59XG4vKipcbiAqIFBhcnRpY2lwYW50VXBkYXRlZCBpcyBmaXJlZCB3aGVuIHVzZXIgZGF0YSBpcyB1cGRhdGVkXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudFVwZGF0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudFVwZGF0ZWQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgY2FsbF9jaWQgPSAxO1xuICAgKi9cbiAgY2FsbENpZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCA9IDI7XG4gICAqL1xuICBwYXJ0aWNpcGFudD86IFBhcnRpY2lwYW50O1xufVxuLyoqXG4gKiBTdWJzY3JpYmVyT2ZmZXIgaXMgc2VudCB3aGVuIHRoZSBTRlUgYWRkcyB0cmFja3MgdG8gYSBzdWJzY3JpcHRpb25cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlN1YnNjcmliZXJPZmZlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmliZXJPZmZlciB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaWNlX3Jlc3RhcnQgPSAxO1xuICAgKi9cbiAgaWNlUmVzdGFydDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNkcCA9IDI7XG4gICAqL1xuICBzZHA6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QdWJsaXNoZXJBbnN3ZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQdWJsaXNoZXJBbnN3ZXIge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RwID0gMTtcbiAgICovXG4gIHNkcDogc3RyaW5nO1xufVxuLyoqXG4gKiBDb25uZWN0aW9uUXVhbGl0eSBpcyBzZW50IHRvIGluZm9ybSBhYm91dCBjb25uZWN0aW9uIHF1YWxpdHkgY2hhbmdlc1xuICogZWcuIHRoaWVycnkncyBjb25uZWN0aW9uIGlzIG5vdCBnb29kIC0+IHJlbmRlciBhIHJlZCBpY29uIFpvb20gc3R5bGVcbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlJbmZvIGNvbm5lY3Rpb25fcXVhbGl0eV91cGRhdGVzID0gMTtcbiAgICovXG4gIGNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlczogQ29ubmVjdGlvblF1YWxpdHlJbmZvW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlJbmZvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvblF1YWxpdHlJbmZvIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHVzZXJfaWQgPSAxO1xuICAgKi9cbiAgdXNlcklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMjtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eSBjb25uZWN0aW9uX3F1YWxpdHkgPSAzO1xuICAgKi9cbiAgY29ubmVjdGlvblF1YWxpdHk6IENvbm5lY3Rpb25RdWFsaXR5O1xufVxuLyoqXG4gKiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkIGlzIHNlbnQgYnkgdGhlIFNGVSB0byBub3RpZnkgd2hlbiB0aGVyZSBpcyBhIG5ldyBkb21pbmFudCBzcGVha2VyIGluIHRoZSBjYWxsXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Eb21pbmFudFNwZWFrZXJDaGFuZ2VkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRG9taW5hbnRTcGVha2VyQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb0xldmVsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9MZXZlbCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIDAuMCBtZWFucyBjb21wbGV0ZSBzaWxlbmNlLCAxLjAgbG91ZGVzdFxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGZsb2F0IGxldmVsID0gMztcbiAgICovXG4gIGxldmVsOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaXNfc3BlYWtpbmcgPSA0O1xuICAgKi9cbiAgaXNTcGVha2luZzogYm9vbGVhbjtcbn1cbi8qKlxuICogQXVkaW9MZXZlbENoYW5nZWQgaXMgc2VudCBieSB0aGUgU0ZVIHRvIG5vdGlmeSBhYm91dCBhdWRpbyBsZXZlbHMgYnkgdXNlclxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbENoYW5nZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdWRpb0xldmVsQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbCBhdWRpb19sZXZlbHMgPSAxO1xuICAgKi9cbiAgYXVkaW9MZXZlbHM6IEF1ZGlvTGV2ZWxbXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb01lZGlhUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvTWVkaWFSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogaW50MzIgY2hhbm5lbF9jb3VudCA9IDE7XG4gICAqL1xuICBjaGFubmVsQ291bnQ6IG51bWJlcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb1NlbmRlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvU2VuZGVyIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb01lZGlhUmVxdWVzdCBtZWRpYV9yZXF1ZXN0ID0gMTtcbiAgICovXG4gIG1lZGlhUmVxdWVzdD86IEF1ZGlvTWVkaWFSZXF1ZXN0O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlYyBjb2RlYyA9IDI7XG4gICAqL1xuICBjb2RlYz86IENvZGVjO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTWVkaWFSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9NZWRpYVJlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBpZGVhbF9oZWlnaHQgPSAxO1xuICAgKi9cbiAgaWRlYWxIZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogaW50MzIgaWRlYWxfd2lkdGggPSAyO1xuICAgKi9cbiAgaWRlYWxXaWR0aDogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBpZGVhbF9mcmFtZV9yYXRlID0gMztcbiAgICovXG4gIGlkZWFsRnJhbWVSYXRlOiBudW1iZXI7XG59XG4vKipcbiAqIFZpZGVvTGF5ZXJTZXR0aW5nIGlzIHVzZWQgdG8gc3BlY2lmeSB2YXJpb3VzIHBhcmFtZXRlcnMgb2YgYSBwYXJ0aWN1bGFyIGVuY29kaW5nIGluIHNpbXVsY2FzdC5cbiAqIFRoZSBwYXJhbWV0ZXJzIGFyZSBzcGVjaWZpZWQgaGVyZSAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9SVENSdHBFbmNvZGluZ1BhcmFtZXRlcnNcbiAqIFNES3MgdXNlIHRoZXNlIHBhcmFtZXRlcnMgc2VudCBmcm9tIHRoZSBzZXJ2ZXIgdG8gZHluYW1pY2FsbHkgYWRqdXN0IHRoZXNlIHBhcmFtZXRlcnMgdG8gc2F2ZSBDUFUsIGJhbmR3aWR0aFxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9MYXllclNldHRpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb0xheWVyU2V0dGluZyB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBuYW1lID0gMTtcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBhY3RpdmUgPSAyO1xuICAgKi9cbiAgYWN0aXZlOiBib29sZWFuO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBtYXhfYml0cmF0ZSA9IDM7XG4gICAqL1xuICBtYXhCaXRyYXRlOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGZsb2F0IHNjYWxlX3Jlc29sdXRpb25fZG93bl9ieSA9IDQ7XG4gICAqL1xuICBzY2FsZVJlc29sdXRpb25Eb3duQnk6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb0xheWVyU2V0dGluZy5Qcmlvcml0eSBwcmlvcml0eSA9IDU7XG4gICAqL1xuICBwcmlvcml0eTogVmlkZW9MYXllclNldHRpbmdfUHJpb3JpdHk7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjIGNvZGVjID0gNjtcbiAgICovXG4gIGNvZGVjPzogQ29kZWM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiBtYXhfZnJhbWVyYXRlID0gNztcbiAgICovXG4gIG1heEZyYW1lcmF0ZTogbnVtYmVyO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nLlByaW9yaXR5XG4gKi9cbmV4cG9ydCBlbnVtIFZpZGVvTGF5ZXJTZXR0aW5nX1ByaW9yaXR5IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBQUklPUklUWV9ISUdIX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIEhJR0hfVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBSSU9SSVRZX0xPVyA9IDE7XG4gICAqL1xuICBMT1cgPSAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBSSU9SSVRZX01FRElVTSA9IDI7XG4gICAqL1xuICBNRURJVU0gPSAyLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBSSU9SSVRZX1ZFUllfTE9XID0gMztcbiAgICovXG4gIFZFUllfTE9XID0gMyxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb1NlbmRlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvU2VuZGVyIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb01lZGlhUmVxdWVzdCBtZWRpYV9yZXF1ZXN0ID0gMTtcbiAgICovXG4gIG1lZGlhUmVxdWVzdD86IFZpZGVvTWVkaWFSZXF1ZXN0O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlYyBjb2RlYyA9IDI7XG4gICAqL1xuICBjb2RlYz86IENvZGVjO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nIGxheWVycyA9IDM7XG4gICAqL1xuICBsYXllcnM6IFZpZGVvTGF5ZXJTZXR0aW5nW107XG59XG4vKipcbiAqIHNlbnQgdG8gdXNlcnMgd2hlbiB0aGV5IG5lZWQgdG8gY2hhbmdlIHRoZSBxdWFsaXR5IG9mIHRoZWlyIHZpZGVvXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DaGFuZ2VQdWJsaXNoUXVhbGl0eVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENoYW5nZVB1Ymxpc2hRdWFsaXR5IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb1NlbmRlciBhdWRpb19zZW5kZXJzID0gMTtcbiAgICovXG4gIGF1ZGlvU2VuZGVyczogQXVkaW9TZW5kZXJbXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb1NlbmRlciB2aWRlb19zZW5kZXJzID0gMjtcbiAgICovXG4gIHZpZGVvU2VuZGVyczogVmlkZW9TZW5kZXJbXTtcbn1cbi8qKlxuICogQ2FsbEdyYW50cyBpcyBzZW50IHRvIHVzZXJzIHdoZW4gdGhlcmUgaXMgYSBjaGFuZ2UgaW4gdGhlIGNhbGwgcGVybWlzc2lvbnNcbiAqIHRvIHB1Ymxpc2ggYXVkaW8sIHZpZGVvIG9yIHNoYXJlIHRoZSBzY3JlZW4gZm9yIGEgdXNlciBvciBhIHJvbGUuIFRoaXMgaXNcbiAqIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBzZW50IGF0IGFueSB0aW1lLiBPbmx5IHRoZSBjdXJyZW50X2dyYW50cyBpbiB0aGUgbGF0ZXN0XG4gKiBtZXNzYWdlIHNob3VsZCBiZSBjb25zaWRlcmVkLiBJbiBvdGhlciB3b3JkcywgdGhpcyBpcyBub3QgZGVwZW5kZW50IG9uIGFueVxuICogb3RoZXIgbWVzc2FnZSAoaW5jbHVkaW5nIHByZXZpb3VzIGNhbGxfZ3JhbnRzX3VwZGF0ZWQgbWVzc2FnZSlcbiAqXG4gKiBXaGVuIHRoaXMgbWVzc2FnZSBpcyByZWNlaXZlZCwgdGhlIGNsaWVudCAoc2F5LCBSZWFjdCBjb21wb25lbnQpIHNob3VsZCBtdXRlXG4gKiB0aGUgdHJhY2tzIHdoaWNoIGFyZSBub3QgYWxsb3dlZCBhbnltb3JlLiBGb3IgZXhhbXBsZSwgaWYgdGhlIG1lc3NhZ2UgaGFzXG4gKiBncmFudHMge2F1ZGlvOnRydWUsIHZpZGVvOmZhbHNlfSB3aGlsZSB0aGUgdXNlciBpcyBwdWJsaXNoaW5nIHZpZGVvLCB0aGVuIHRoZVxuICogY2xpZW50IGNvbXBvbmVudCBzaG91bGQgbXV0ZSB0aGUgdmlkZW8gdHJhY2sgYW5kIGdyYXkgb3V0IHRoZSB2aWRlbyBidXR0b24uXG4gKiBUaGlzIHdheSwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBwdWJsaXNoIHZpZGVvIHVudGlsIHRoZSBwZXJtaXNzaW9uc1xuICogYXJlIGdyYW50ZWQgYWdhaW4uIEFsc28sIG11dGluZyB0aGUgdHJhY2sgb24gdGhlIGNsaWVudCBzaWRlIHdpbGwgcHJldmVudFxuICogdGhlIFNGVSBmcm9tIHJlY2VpdmluZyB0aGUgdmlkZW8gdHJhY2sgYW5kIHdpbGwgc2F2ZSBiYW5kd2lkdGguXG4gKlxuICogSW4gc2ltcGxlIHdvcmRzLCB0aGlzIGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMgbXV0aW5nIGEgdHJhY2sgb24gdGhlIGNsaWVudC5cbiAqIEhlcmUsIGluc3RlYWQgb2YgdGhlIHVzZXIgaW5zdHJ1Y3RpbmcgdGhlIGNsaWVudCwgU0ZVIHdvdWxkIGJlIGRvaW5nIGl0LlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2FsbEdyYW50c1VwZGF0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsR3JhbnRzVXBkYXRlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxHcmFudHMgY3VycmVudF9ncmFudHMgPSAxO1xuICAgKi9cbiAgY3VycmVudEdyYW50cz86IENhbGxHcmFudHM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBtZXNzYWdlID0gMjtcbiAgICovXG4gIG1lc3NhZ2U6IHN0cmluZztcbn1cbi8qKlxuICogR28gYXdheSBpcyBzZW50IGJ5IHRoZSBTRlUgdG8gdGhlIGNsaWVudCB0byBzaWduYWwgdG8gbWlncmF0ZSBhd2F5IGZyb20gdGhlIFNGVS5cbiAqIFRoZSBldmljdCByZWFzb24gbWF5IHNwZWNpZnkgd2h5IHRoZSB1c2VyIGlzIGJlaW5nIGV2aWN0ZWQuXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Hb0F3YXlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHb0F3YXkge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Hb0F3YXlSZWFzb24gcmVhc29uID0gMTtcbiAgICovXG4gIHJlYXNvbjogR29Bd2F5UmVhc29uO1xufVxuLyoqXG4gKiBDYWxsRW5kZWQgaXMgc2VudCBieSB0aGUgU0ZVIHRvIHRoZSBjbGllbnQgdG8gc2lnbmFsIHRoYXQgdGhlIGNhbGwgaGFzIGVuZGVkLlxuICogVGhlIHJlYXNvbiBtYXkgc3BlY2lmeSB3aHkgdGhlIGNhbGwgaGFzIGVuZGVkLlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2FsbEVuZGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEVuZGVkIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbEVuZGVkUmVhc29uIHJlYXNvbiA9IDE7XG4gICAqL1xuICByZWFzb246IENhbGxFbmRlZFJlYXNvbjtcbn1cbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFNmdUV2ZW50JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTZnVFdmVudD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TZnVFdmVudCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdzdWJzY3JpYmVyX29mZmVyJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IFN1YnNjcmliZXJPZmZlcixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAncHVibGlzaGVyX2Fuc3dlcicsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBQdWJsaXNoZXJBbnN3ZXIsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2Nvbm5lY3Rpb25fcXVhbGl0eV9jaGFuZ2VkJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnYXVkaW9fbGV2ZWxfY2hhbmdlZCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBBdWRpb0xldmVsQ2hhbmdlZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA1LFxuICAgICAgICBuYW1lOiAnaWNlX3RyaWNrbGUnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gSUNFVHJpY2tsZSQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNixcbiAgICAgICAgbmFtZTogJ2NoYW5nZV9wdWJsaXNoX3F1YWxpdHknLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gQ2hhbmdlUHVibGlzaFF1YWxpdHksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMTAsXG4gICAgICAgIG5hbWU6ICdwYXJ0aWNpcGFudF9qb2luZWQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gUGFydGljaXBhbnRKb2luZWQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMTEsXG4gICAgICAgIG5hbWU6ICdwYXJ0aWNpcGFudF9sZWZ0JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IFBhcnRpY2lwYW50TGVmdCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxMixcbiAgICAgICAgbmFtZTogJ2RvbWluYW50X3NwZWFrZXJfY2hhbmdlZCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDEzLFxuICAgICAgICBuYW1lOiAnam9pbl9yZXNwb25zZScsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBKb2luUmVzcG9uc2UsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMTQsXG4gICAgICAgIG5hbWU6ICdoZWFsdGhfY2hlY2tfcmVzcG9uc2UnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gSGVhbHRoQ2hlY2tSZXNwb25zZSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxNixcbiAgICAgICAgbmFtZTogJ3RyYWNrX3B1Ymxpc2hlZCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBUcmFja1B1Ymxpc2hlZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxNyxcbiAgICAgICAgbmFtZTogJ3RyYWNrX3VucHVibGlzaGVkJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMTgsXG4gICAgICAgIG5hbWU6ICdlcnJvcicsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBFcnJvcixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxOSxcbiAgICAgICAgbmFtZTogJ2NhbGxfZ3JhbnRzX3VwZGF0ZWQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gQ2FsbEdyYW50c1VwZGF0ZWQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMjAsXG4gICAgICAgIG5hbWU6ICdnb19hd2F5JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IEdvQXdheSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyMSxcbiAgICAgICAgbmFtZTogJ2ljZV9yZXN0YXJ0JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IElDRVJlc3RhcnQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMjIsXG4gICAgICAgIG5hbWU6ICdwaW5zX3VwZGF0ZWQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gUGluc0NoYW5nZWQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMjMsXG4gICAgICAgIG5hbWU6ICdjYWxsX2VuZGVkJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IENhbGxFbmRlZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyNCxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50X3VwZGF0ZWQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gUGFydGljaXBhbnRVcGRhdGVkLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDI1LFxuICAgICAgICBuYW1lOiAncGFydGljaXBhbnRfbWlncmF0aW9uX2NvbXBsZXRlJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IFBhcnRpY2lwYW50TWlncmF0aW9uQ29tcGxldGUsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TZnVFdmVudFxuICovXG5leHBvcnQgY29uc3QgU2Z1RXZlbnQgPSBuZXcgU2Z1RXZlbnQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUGFydGljaXBhbnRNaWdyYXRpb25Db21wbGV0ZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGFydGljaXBhbnRNaWdyYXRpb25Db21wbGV0ZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlJywgW10pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlXG4gKi9cbmV4cG9ydCBjb25zdCBQYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlID1cbiAgbmV3IFBhcnRpY2lwYW50TWlncmF0aW9uQ29tcGxldGUkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUGluc0NoYW5nZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBpbnNDaGFuZ2VkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBpbnNDaGFuZ2VkJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BpbnMnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFBpbixcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBpbnNDaGFuZ2VkXG4gKi9cbmV4cG9ydCBjb25zdCBQaW5zQ2hhbmdlZCA9IG5ldyBQaW5zQ2hhbmdlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBFcnJvciRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8RXJyb3I+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuRXJyb3InLCBbXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnZXJyb3InLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IEVycm9yJCB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ3JlY29ubmVjdF9zdHJhdGVneScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5XZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneScsXG4gICAgICAgICAgV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3ksXG4gICAgICAgICAgJ1dFQlNPQ0tFVF9SRUNPTk5FQ1RfU1RSQVRFR1lfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkVycm9yXG4gKi9cbmV4cG9ydCBjb25zdCBFcnJvciA9IG5ldyBFcnJvciRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBJQ0VUcmlja2xlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxJQ0VUcmlja2xlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LklDRVRyaWNrbGUnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAncGVlcl90eXBlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlJywgUGVlclR5cGUsICdQRUVSX1RZUEVfJ10sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMixcbiAgICAgICAgbmFtZTogJ2ljZV9jYW5kaWRhdGUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VUcmlja2xlXG4gKi9cbmV4cG9ydCBjb25zdCBJQ0VUcmlja2xlID0gbmV3IElDRVRyaWNrbGUkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSUNFUmVzdGFydCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8SUNFUmVzdGFydD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VSZXN0YXJ0JywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BlZXJfdHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gWydzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZScsIFBlZXJUeXBlLCAnUEVFUl9UWVBFXyddLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSUNFUmVzdGFydFxuICovXG5leHBvcnQgY29uc3QgSUNFUmVzdGFydCA9IG5ldyBJQ0VSZXN0YXJ0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFNmdVJlcXVlc3QkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNmdVJlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuU2Z1UmVxdWVzdCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdqb2luX3JlcXVlc3QnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAncmVxdWVzdFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBKb2luUmVxdWVzdCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAnaGVhbHRoX2NoZWNrX3JlcXVlc3QnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAncmVxdWVzdFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBIZWFsdGhDaGVja1JlcXVlc3QsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2xlYXZlX2NhbGxfcmVxdWVzdCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdyZXF1ZXN0UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IExlYXZlQ2FsbFJlcXVlc3QsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TZnVSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTZnVSZXF1ZXN0ID0gbmV3IFNmdVJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgTGVhdmVDYWxsUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8TGVhdmVDYWxsUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5MZWF2ZUNhbGxSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdyZWFzb24nLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuTGVhdmVDYWxsUmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgTGVhdmVDYWxsUmVxdWVzdCA9IG5ldyBMZWF2ZUNhbGxSZXF1ZXN0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEhlYWx0aENoZWNrUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8SGVhbHRoQ2hlY2tSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkhlYWx0aENoZWNrUmVxdWVzdCcsIFtdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBIZWFsdGhDaGVja1JlcXVlc3QgPSBuZXcgSGVhbHRoQ2hlY2tSZXF1ZXN0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEhlYWx0aENoZWNrUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEhlYWx0aENoZWNrUmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXNwb25zZScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdwYXJ0aWNpcGFudF9jb3VudCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgVDogKCkgPT4gUGFydGljaXBhbnRDb3VudCxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkhlYWx0aENoZWNrUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGNvbnN0IEhlYWx0aENoZWNrUmVzcG9uc2UgPSBuZXcgSGVhbHRoQ2hlY2tSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBUcmFja1B1Ymxpc2hlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VHJhY2tQdWJsaXNoZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVHJhY2tQdWJsaXNoZWQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndXNlcl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICd0eXBlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZScsXG4gICAgICAgICAgVHJhY2tUeXBlLFxuICAgICAgICAgICdUUkFDS19UWVBFXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgeyBubzogNCwgbmFtZTogJ3BhcnRpY2lwYW50Jywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBQYXJ0aWNpcGFudCB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1B1Ymxpc2hlZFxuICovXG5leHBvcnQgY29uc3QgVHJhY2tQdWJsaXNoZWQgPSBuZXcgVHJhY2tQdWJsaXNoZWQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVHJhY2tVbnB1Ymxpc2hlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VHJhY2tVbnB1Ymxpc2hlZD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1VucHVibGlzaGVkJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAndHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUnLFxuICAgICAgICAgIFRyYWNrVHlwZSxcbiAgICAgICAgICAnVFJBQ0tfVFlQRV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDQsXG4gICAgICAgIG5hbWU6ICdjYXVzZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1VucHVibGlzaFJlYXNvbicsXG4gICAgICAgICAgVHJhY2tVbnB1Ymxpc2hSZWFzb24sXG4gICAgICAgICAgJ1RSQUNLX1VOUFVCTElTSF9SRUFTT05fJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiA1LCBuYW1lOiAncGFydGljaXBhbnQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFBhcnRpY2lwYW50IH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlRyYWNrVW5wdWJsaXNoZWRcbiAqL1xuZXhwb3J0IGNvbnN0IFRyYWNrVW5wdWJsaXNoZWQgPSBuZXcgVHJhY2tVbnB1Ymxpc2hlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBKb2luUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8Sm9pblJlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlcXVlc3QnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndG9rZW4nLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAnc3Vic2NyaWJlcl9zZHAnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNCxcbiAgICAgICAgbmFtZTogJ2NsaWVudF9kZXRhaWxzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBUOiAoKSA9PiBDbGllbnREZXRhaWxzLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDUsIG5hbWU6ICdtaWdyYXRpb24nLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IE1pZ3JhdGlvbiB9LFxuICAgICAge1xuICAgICAgICBubzogNixcbiAgICAgICAgbmFtZTogJ2Zhc3RfcmVjb25uZWN0JyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA3LFxuICAgICAgICBuYW1lOiAncmVjb25uZWN0X2RldGFpbHMnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIFQ6ICgpID0+IFJlY29ubmVjdERldGFpbHMsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Kb2luUmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgSm9pblJlcXVlc3QgPSBuZXcgSm9pblJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUmVjb25uZWN0RGV0YWlscyRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UmVjb25uZWN0RGV0YWlscz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5SZWNvbm5lY3REZXRhaWxzJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3N0cmF0ZWd5JyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLldlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5JyxcbiAgICAgICAgICBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneSxcbiAgICAgICAgICAnV0VCU09DS0VUX1JFQ09OTkVDVF9TVFJBVEVHWV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdhbm5vdW5jZWRfdHJhY2tzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBUcmFja0luZm8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNCxcbiAgICAgICAgbmFtZTogJ3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA1LFxuICAgICAgICBuYW1lOiAncmVjb25uZWN0X2F0dGVtcHQnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdmcm9tX3NmdV9pZCcsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA3LFxuICAgICAgICBuYW1lOiAncHJldmlvdXNfc2Vzc2lvbl9pZCcsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlJlY29ubmVjdERldGFpbHNcbiAqL1xuZXhwb3J0IGNvbnN0IFJlY29ubmVjdERldGFpbHMgPSBuZXcgUmVjb25uZWN0RGV0YWlscyRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBNaWdyYXRpb24kVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPE1pZ3JhdGlvbj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5NaWdyYXRpb24nLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnZnJvbV9zZnVfaWQnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMixcbiAgICAgICAgbmFtZTogJ2Fubm91bmNlZF90cmFja3MnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrSW5mbyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAnc3Vic2NyaXB0aW9ucycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuTWlncmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBNaWdyYXRpb24gPSBuZXcgTWlncmF0aW9uJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEpvaW5SZXNwb25zZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8Sm9pblJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdjYWxsX3N0YXRlJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBDYWxsU3RhdGUgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdyZWNvbm5lY3RlZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdmYXN0X3JlY29ubmVjdF9kZWFkbGluZV9zZWNvbmRzJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDUgLypTY2FsYXJUeXBlLklOVDMyKi8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Kb2luUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGNvbnN0IEpvaW5SZXNwb25zZSA9IG5ldyBKb2luUmVzcG9uc2UkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUGFydGljaXBhbnRKb2luZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBhcnRpY2lwYW50Sm9pbmVkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50Sm9pbmVkJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ2NhbGxfY2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAncGFydGljaXBhbnQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFBhcnRpY2lwYW50IH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50Sm9pbmVkXG4gKi9cbmV4cG9ydCBjb25zdCBQYXJ0aWNpcGFudEpvaW5lZCA9IG5ldyBQYXJ0aWNpcGFudEpvaW5lZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQYXJ0aWNpcGFudExlZnQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBhcnRpY2lwYW50TGVmdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudExlZnQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnY2FsbF9jaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdwYXJ0aWNpcGFudCcsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gUGFydGljaXBhbnQgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRMZWZ0XG4gKi9cbmV4cG9ydCBjb25zdCBQYXJ0aWNpcGFudExlZnQgPSBuZXcgUGFydGljaXBhbnRMZWZ0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFBhcnRpY2lwYW50VXBkYXRlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGFydGljaXBhbnRVcGRhdGVkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50VXBkYXRlZCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdjYWxsX2NpZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3BhcnRpY2lwYW50Jywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBQYXJ0aWNpcGFudCB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudFVwZGF0ZWRcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcnRpY2lwYW50VXBkYXRlZCA9IG5ldyBQYXJ0aWNpcGFudFVwZGF0ZWQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU3Vic2NyaWJlck9mZmVyJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTdWJzY3JpYmVyT2ZmZXI+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuU3Vic2NyaWJlck9mZmVyJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ2ljZV9yZXN0YXJ0Jywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3NkcCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TdWJzY3JpYmVyT2ZmZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFN1YnNjcmliZXJPZmZlciA9IG5ldyBTdWJzY3JpYmVyT2ZmZXIkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUHVibGlzaGVyQW5zd2VyJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxQdWJsaXNoZXJBbnN3ZXI+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuUHVibGlzaGVyQW5zd2VyJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3NkcCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QdWJsaXNoZXJBbnN3ZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFB1Ymxpc2hlckFuc3dlciA9IG5ldyBQdWJsaXNoZXJBbnN3ZXIkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ2Nvbm5lY3Rpb25fcXVhbGl0eV91cGRhdGVzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBDb25uZWN0aW9uUXVhbGl0eUluZm8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWRcbiAqL1xuZXhwb3J0IGNvbnN0IENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCA9IG5ldyBDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQ29ubmVjdGlvblF1YWxpdHlJbmZvJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDb25uZWN0aW9uUXVhbGl0eUluZm8+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlJbmZvJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAnY29ubmVjdGlvbl9xdWFsaXR5JyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvbm5lY3Rpb25RdWFsaXR5JyxcbiAgICAgICAgICBDb25uZWN0aW9uUXVhbGl0eSxcbiAgICAgICAgICAnQ09OTkVDVElPTl9RVUFMSVRZXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Db25uZWN0aW9uUXVhbGl0eUluZm9cbiAqL1xuZXhwb3J0IGNvbnN0IENvbm5lY3Rpb25RdWFsaXR5SW5mbyA9IG5ldyBDb25uZWN0aW9uUXVhbGl0eUluZm8kVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgRG9taW5hbnRTcGVha2VyQ2hhbmdlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8RG9taW5hbnRTcGVha2VyQ2hhbmdlZD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Eb21pbmFudFNwZWFrZXJDaGFuZ2VkJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkRvbWluYW50U3BlYWtlckNoYW5nZWRcbiAqL1xuZXhwb3J0IGNvbnN0IERvbWluYW50U3BlYWtlckNoYW5nZWQgPSBuZXcgRG9taW5hbnRTcGVha2VyQ2hhbmdlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBBdWRpb0xldmVsJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxBdWRpb0xldmVsPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWwnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndXNlcl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdsZXZlbCcsIGtpbmQ6ICdzY2FsYXInLCBUOiAyIC8qU2NhbGFyVHlwZS5GTE9BVCovIH0sXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnaXNfc3BlYWtpbmcnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWxcbiAqL1xuZXhwb3J0IGNvbnN0IEF1ZGlvTGV2ZWwgPSBuZXcgQXVkaW9MZXZlbCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBBdWRpb0xldmVsQ2hhbmdlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8QXVkaW9MZXZlbENoYW5nZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbENoYW5nZWQnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnYXVkaW9fbGV2ZWxzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBBdWRpb0xldmVsLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbENoYW5nZWRcbiAqL1xuZXhwb3J0IGNvbnN0IEF1ZGlvTGV2ZWxDaGFuZ2VkID0gbmV3IEF1ZGlvTGV2ZWxDaGFuZ2VkJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEF1ZGlvTWVkaWFSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxBdWRpb01lZGlhUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb01lZGlhUmVxdWVzdCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdjaGFubmVsX2NvdW50JyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDUgLypTY2FsYXJUeXBlLklOVDMyKi8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb01lZGlhUmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgQXVkaW9NZWRpYVJlcXVlc3QgPSBuZXcgQXVkaW9NZWRpYVJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQXVkaW9TZW5kZXIkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEF1ZGlvU2VuZGVyPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvU2VuZGVyJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ21lZGlhX3JlcXVlc3QnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIFQ6ICgpID0+IEF1ZGlvTWVkaWFSZXF1ZXN0LFxuICAgICAgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdjb2RlYycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQ29kZWMgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9TZW5kZXJcbiAqL1xuZXhwb3J0IGNvbnN0IEF1ZGlvU2VuZGVyID0gbmV3IEF1ZGlvU2VuZGVyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFZpZGVvTWVkaWFSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxWaWRlb01lZGlhUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb01lZGlhUmVxdWVzdCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdpZGVhbF9oZWlnaHQnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnaWRlYWxfd2lkdGgnLCBraW5kOiAnc2NhbGFyJywgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2lkZWFsX2ZyYW1lX3JhdGUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTWVkaWFSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBWaWRlb01lZGlhUmVxdWVzdCA9IG5ldyBWaWRlb01lZGlhUmVxdWVzdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBWaWRlb0xheWVyU2V0dGluZyRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VmlkZW9MYXllclNldHRpbmc+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9MYXllclNldHRpbmcnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ2FjdGl2ZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdtYXhfYml0cmF0ZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA1IC8qU2NhbGFyVHlwZS5JTlQzMiovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnc2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5JyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDIgLypTY2FsYXJUeXBlLkZMT0FUKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ3ByaW9yaXR5JyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9MYXllclNldHRpbmcuUHJpb3JpdHknLFxuICAgICAgICAgIFZpZGVvTGF5ZXJTZXR0aW5nX1ByaW9yaXR5LFxuICAgICAgICAgICdQUklPUklUWV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDYsIG5hbWU6ICdjb2RlYycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQ29kZWMgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDcsXG4gICAgICAgIG5hbWU6ICdtYXhfZnJhbWVyYXRlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nXG4gKi9cbmV4cG9ydCBjb25zdCBWaWRlb0xheWVyU2V0dGluZyA9IG5ldyBWaWRlb0xheWVyU2V0dGluZyRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBWaWRlb1NlbmRlciRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VmlkZW9TZW5kZXI+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9TZW5kZXInLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnbWVkaWFfcmVxdWVzdCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgVDogKCkgPT4gVmlkZW9NZWRpYVJlcXVlc3QsXG4gICAgICB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ2NvZGVjJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBDb2RlYyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2xheWVycycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVmlkZW9MYXllclNldHRpbmcsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb1NlbmRlclxuICovXG5leHBvcnQgY29uc3QgVmlkZW9TZW5kZXIgPSBuZXcgVmlkZW9TZW5kZXIkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQ2hhbmdlUHVibGlzaFF1YWxpdHkkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENoYW5nZVB1Ymxpc2hRdWFsaXR5PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNoYW5nZVB1Ymxpc2hRdWFsaXR5JywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ2F1ZGlvX3NlbmRlcnMnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IEF1ZGlvU2VuZGVyLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICd2aWRlb19zZW5kZXJzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBWaWRlb1NlbmRlcixcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNoYW5nZVB1Ymxpc2hRdWFsaXR5XG4gKi9cbmV4cG9ydCBjb25zdCBDaGFuZ2VQdWJsaXNoUXVhbGl0eSA9IG5ldyBDaGFuZ2VQdWJsaXNoUXVhbGl0eSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBDYWxsR3JhbnRzVXBkYXRlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8Q2FsbEdyYW50c1VwZGF0ZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2FsbEdyYW50c1VwZGF0ZWQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnY3VycmVudF9ncmFudHMnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IENhbGxHcmFudHMgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdtZXNzYWdlJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNhbGxHcmFudHNVcGRhdGVkXG4gKi9cbmV4cG9ydCBjb25zdCBDYWxsR3JhbnRzVXBkYXRlZCA9IG5ldyBDYWxsR3JhbnRzVXBkYXRlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBHb0F3YXkkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEdvQXdheT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Hb0F3YXknLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAncmVhc29uJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkdvQXdheVJlYXNvbicsXG4gICAgICAgICAgR29Bd2F5UmVhc29uLFxuICAgICAgICAgICdHT19BV0FZX1JFQVNPTl8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuR29Bd2F5XG4gKi9cbmV4cG9ydCBjb25zdCBHb0F3YXkgPSBuZXcgR29Bd2F5JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENhbGxFbmRlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8Q2FsbEVuZGVkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNhbGxFbmRlZCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdyZWFzb24nLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbEVuZGVkUmVhc29uJyxcbiAgICAgICAgICBDYWxsRW5kZWRSZWFzb24sXG4gICAgICAgICAgJ0NBTExfRU5ERURfUkVBU09OXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DYWxsRW5kZWRcbiAqL1xuZXhwb3J0IGNvbnN0IENhbGxFbmRlZCA9IG5ldyBDYWxsRW5kZWQkVHlwZSgpO1xuIiwiaW1wb3J0IHR5cGUge1xuICBQYXJ0aWNpcGFudCxcbiAgVmlkZW9EaW1lbnNpb24sXG59IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB0eXBlIHtcbiAgSm9pbkNhbGxSZXF1ZXN0LFxuICBNZW1iZXJSZXNwb25zZSxcbiAgT3duQ2FwYWJpbGl0eSxcbiAgUmVhY3Rpb25SZXNwb25zZSxcbn0gZnJvbSAnLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHR5cGUgeyBTdHJlYW1DbGllbnQgfSBmcm9tICcuL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vY2xpZW50JztcbmltcG9ydCB0eXBlIHsgQ29tcGFyYXRvciB9IGZyb20gJy4vc29ydGluZyc7XG5pbXBvcnQgdHlwZSB7IFN0cmVhbVZpZGVvV3JpdGVhYmxlU3RhdGVTdG9yZSB9IGZyb20gJy4vc3RvcmUnO1xuaW1wb3J0IHsgQXhpb3NFcnJvciB9IGZyb20gJ2F4aW9zJztcblxuZXhwb3J0IHR5cGUgU3RyZWFtUmVhY3Rpb24gPSBQaWNrPFxuICBSZWFjdGlvblJlc3BvbnNlLFxuICAndHlwZScgfCAnZW1vamlfY29kZScgfCAnY3VzdG9tJ1xuPjtcblxuZXhwb3J0IGVudW0gVmlzaWJpbGl0eVN0YXRlIHtcbiAgVU5LTk9XTiA9ICdVTktOT1dOJyxcbiAgVklTSUJMRSA9ICdWSVNJQkxFJyxcbiAgSU5WSVNJQkxFID0gJ0lOVklTSUJMRScsXG59XG5cbmV4cG9ydCBlbnVtIERlYm91bmNlVHlwZSB7XG4gIElNTUVESUFURSA9IDIwLFxuICBGQVNUID0gMTAwLFxuICBNRURJVU0gPSA2MDAsXG4gIFNMT1cgPSAxMjAwLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmVhbVZpZGVvUGFydGljaXBhbnQgZXh0ZW5kcyBQYXJ0aWNpcGFudCB7XG4gIC8qKlxuICAgKiBUaGUgcGFydGljaXBhbnQncyBhdWRpbyBzdHJlYW0sIGlmIHRoZXkgYXJlIHB1Ymxpc2hpbmcgYXVkaW8gYW5kXG4gICAqIHdlIGhhdmUgc3Vic2NyaWJlZCB0byBpdC5cbiAgICovXG4gIGF1ZGlvU3RyZWFtPzogTWVkaWFTdHJlYW07XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJ0aWNpcGFudCdzIHZpZGVvIHN0cmVhbSwgaWYgdGhleSBhcmUgc2hhcmluZyB0aGVpciB2aWRlbyxcbiAgICogYW5kIHdlIGFyZSBzdWJzY3JpYmVkIHRvIGl0LlxuICAgKi9cbiAgdmlkZW9TdHJlYW0/OiBNZWRpYVN0cmVhbTtcblxuICAvKipcbiAgICogVGhlIHBhcnRpY2lwYW50J3Mgc2NyZWVuIHNoYXJlIHN0cmVhbSwgaWYgdGhleSBhcmUgc2hhcmluZyB0aGVpciBzY3JlZW4sXG4gICAqIGFuZCB3ZSBhcmUgc3Vic2NyaWJlZCB0byBpdC5cbiAgICovXG4gIHNjcmVlblNoYXJlU3RyZWFtPzogTWVkaWFTdHJlYW07XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJ0aWNpcGFudCdzIHNjcmVlbiBhdWRpbyBzdHJlYW0sIGlmIHRoZXkgYXJlIHNoYXJpbmcgdGhlaXIgYXVkaW8sXG4gICAqIGFuZCB3ZSBhcmUgc3Vic2NyaWJlZCB0byBpdC5cbiAgICovXG4gIHNjcmVlblNoYXJlQXVkaW9TdHJlYW0/OiBNZWRpYVN0cmVhbTtcblxuICAvKipcbiAgICogVGhlIHByZWZlcnJlZCB2aWRlbyBkaW1lbnNpb25zIGZvciB0aGlzIHBhcnRpY2lwYW50LlxuICAgKiBTZXQgaXQgdG8gYHVuZGVmaW5lZGAgdG8gdW5zdWJzY3JpYmUgZnJvbSB0aGlzIHBhcnRpY2lwYW50J3MgdmlkZW8uXG4gICAqL1xuICB2aWRlb0RpbWVuc2lvbj86IFZpZGVvRGltZW5zaW9uO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJlZmVycmVkIHNjcmVlbiBzaGFyZSBkaW1lbnNpb25zIGZvciB0aGlzIHBhcnRpY2lwYW50LlxuICAgKiBTZXQgaXQgdG8gYHVuZGVmaW5lZGAgdG8gdW5zdWJzY3JpYmUgZnJvbSB0aGlzIHBhcnRpY2lwYW50J3Mgc2NyZWVuIHNoYXJlLlxuICAgKi9cbiAgc2NyZWVuU2hhcmVEaW1lbnNpb24/OiBWaWRlb0RpbWVuc2lvbjtcblxuICAvKipcbiAgICogVHJ1ZSBpZiB0aGUgcGFydGljaXBhbnQgaXMgdGhlIGxvY2FsIHBhcnRpY2lwYW50LlxuICAgKi9cbiAgaXNMb2NhbFBhcnRpY2lwYW50PzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIHBpbiBzdGF0ZSBvZiB0aGUgcGFydGljaXBhbnQuXG4gICAqL1xuICBwaW4/OiBQYXJ0aWNpcGFudFBpbjtcblxuICAvKipcbiAgICogVGhlIGxhc3QgcmVhY3Rpb24gdGhpcyB1c2VyIGhhcyBzZW50IHRvIHRoaXMgY2FsbC5cbiAgICogSW50ZWdyYXRvcnMgY2FuIGJhdGNoL2NvbGxlY3QgcGFzdCByZWFjdGlvbnMgYW5kIHNob3cgdGhlbSB0byB0aGUgVUkuXG4gICAqL1xuICByZWFjdGlvbj86IFN0cmVhbVJlYWN0aW9uO1xuXG4gIC8qKlxuICAgKiBUaGUgdmlzaWJpbGl0eSBzdGF0ZSBvZiB0aGUgcGFydGljaXBhbnQncyB0cmFja3Mgd2l0aGluIGEgZGVmaW5lZCB2aWV3cG9ydC5cbiAgICovXG4gIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlPzogUmVjb3JkPFZpZGVvVHJhY2tUeXBlLCBWaXNpYmlsaXR5U3RhdGU+O1xuXG4gIC8qKlxuICAgKiBUaGUgdm9sdW1lIG9mIHRoZSBwYXJ0aWNpcGFudCdzIGF1ZGlvIHN0cmVhbSAoZnJvbSAwIHRvIDEpLlxuICAgKiBTZXQgaXQgdG8gYHVuZGVmaW5lZGAgdG8gdXNlIHRoZSBkZWZhdWx0IHZvbHVtZS5cbiAgICpcbiAgICogTm90ZTogdGhpcyB2YWx1ZSBpcyBub3QgYXBwbGljYWJsZSBpbiBSZWFjdCBOYXRpdmUuXG4gICAqL1xuICBhdWRpb1ZvbHVtZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgVmlkZW9UcmFja1R5cGUgPSAndmlkZW9UcmFjaycgfCAnc2NyZWVuU2hhcmVUcmFjayc7XG5leHBvcnQgdHlwZSBBdWRpb1RyYWNrVHlwZSA9ICdhdWRpb1RyYWNrJyB8ICdzY3JlZW5TaGFyZUF1ZGlvVHJhY2snO1xuZXhwb3J0IHR5cGUgVHJhY2tNdXRlVHlwZSA9XG4gIHwgJ2F1ZGlvJ1xuICB8ICd2aWRlbydcbiAgfCAnc2NyZWVuc2hhcmUnXG4gIHwgJ3NjcmVlbnNoYXJlX2F1ZGlvJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcGFydGljaXBhbnQncyBwaW4gc3RhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIFBhcnRpY2lwYW50UGluID0ge1xuICAvKipcbiAgICogU2V0IHRvIHRydWUgaWYgdGhlIHBhcnRpY2lwYW50IGlzIHBpbm5lZCBieSB0aGUgbG9jYWwgdXNlci5cbiAgICogRmFsc2UgaWYgdGhlIHBhcnRpY2lwYW50IGlzIHBpbm5lZCBzZXJ2ZXItc2lkZSwgYnkgdGhlIGNhbGwgbW9kZXJhdG9yLlxuICAgKi9cbiAgaXNMb2NhbFBpbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGltZXN0YW1wIHdoZW4gdGhlIHBhcnRpY2lwYW50IGlzIHBpbm5lZC5cbiAgICovXG4gIHBpbm5lZEF0OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEEgcGFydGlhbCByZXByZXNlbnRhdGlvbiBvZiB0aGUgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IHR5cGUgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoID0gUGFydGlhbDxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PjtcblxuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2Yge0BsaW5rIFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaH0gb3JnYW5pemVkIGJ5IHNlc3Npb25JZC5cbiAqL1xuZXhwb3J0IHR5cGUgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoZXMgPSB7XG4gIFtzZXNzaW9uSWQ6IHN0cmluZ106IFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaDtcbn07XG5cbmV4cG9ydCB0eXBlIFN1YnNjcmlwdGlvbkNoYW5nZSA9IHtcbiAgLyoqXG4gICAqIFRoZSB2aWRlbyBkaW1lbnNpb24gdG8gcmVxdWVzdC5cbiAgICogU2V0IGl0IHRvIGB1bmRlZmluZWRgIGluIGNhc2UgeW91IHdhbnQgdG8gdW5zdWJzY3JpYmUuXG4gICAqL1xuICBkaW1lbnNpb246IFZpZGVvRGltZW5zaW9uIHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IHR5cGUgU3Vic2NyaXB0aW9uQ2hhbmdlcyA9IHtcbiAgW3Nlc3Npb25JZDogc3RyaW5nXTogU3Vic2NyaXB0aW9uQ2hhbmdlO1xufTtcblxuLyoqXG4gKiBBIHByZWZlcnJlZCBjb2RlYyB0byB1c2Ugd2hlbiBwdWJsaXNoaW5nIGEgdmlkZW8gdHJhY2suXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHR5cGUgUHJlZmVycmVkQ29kZWMgPSAndnA4JyB8ICdoMjY0JyB8IHN0cmluZztcblxuZXhwb3J0IHR5cGUgUHVibGlzaE9wdGlvbnMgPSB7XG4gIHByZWZlcnJlZENvZGVjPzogUHJlZmVycmVkQ29kZWMgfCBudWxsO1xuICBwcmVmZXJyZWRCaXRyYXRlPzogbnVtYmVyO1xuICBiaXRyYXRlRG93bnNjYWxlRmFjdG9yPzogbnVtYmVyO1xuICBzY3JlZW5TaGFyZVNldHRpbmdzPzogU2NyZWVuU2hhcmVTZXR0aW5ncztcbn07XG5cbmV4cG9ydCB0eXBlIFNjcmVlblNoYXJlU2V0dGluZ3MgPSB7XG4gIC8qKlxuICAgKiBMaW1pdHMgdGhlIG1heGltdW0gZnJhbWVyYXRlIChpbiBmcmFtZXMgcGVyIHNlY29uZCkgb2YgdGhlIHNjcmVlbiBzaGFyZS5cbiAgICogRGVmYXVsdHMgdG8gMzAuXG4gICAqL1xuICBtYXhGcmFtZXJhdGU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIExpbWl0cyB0aGUgbWF4aW11bSBiaXRyYXRlIChpbiBiaXRzIHBlciBzZWNvbmQpIG9mIHRoZSBzY3JlZW4gc2hhcmUuXG4gICAqIERlZmF1bHRzIHRvIDMwMDAwMDAgKDNNYnBzKS5cbiAgICovXG4gIG1heEJpdHJhdGU/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBDYWxsTGVhdmVPcHRpb25zID0ge1xuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIGNhbGxlciB3aWxsIGdldCBhIGBjYWxsLnJlamVjdGVkYCBldmVudC5cbiAgICogSGFzIGFuIGVmZmVjdCBvbmx5IGlmIHRoZSBjYWxsIGlzIGluIHRoZSBgcmluZ2luZ2Agc3RhdGUuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWAuXG4gICAqL1xuICByZWplY3Q/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIGZvciBsZWF2aW5nIHRoZSBjYWxsLlxuICAgKiBUaGlzIHdpbGwgYmUgc2VudCB0byB0aGUgYmFja2VuZCBhbmQgd2lsbCBiZSB2aXNpYmxlIGluIHRoZSBsb2dzLlxuICAgKi9cbiAgcmVhc29uPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBUaGUgb3B0aW9ucyB0byBwYXNzIHRvIHtAbGluayBDYWxsfSBjb25zdHJ1Y3Rvci5cbiAqL1xuZXhwb3J0IHR5cGUgQ2FsbENvbnN0cnVjdG9yID0ge1xuICAvKipcbiAgICogVGhlIHN0cmVhbUNsaWVudCBpbnN0YW5jZSB0byB1c2UuXG4gICAqL1xuICBzdHJlYW1DbGllbnQ6IFN0cmVhbUNsaWVudDtcblxuICAvKipcbiAgICogVGhlIENhbGwgdHlwZS5cbiAgICovXG4gIHR5cGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIENhbGwgSUQuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBsaXN0IG9mIHtAbGluayBNZW1iZXJSZXNwb25zZX0gZnJvbSB0aGUgYmFja2VuZC5cbiAgICogSWYgcHJvdmlkZWQsIHRoZSBjYWxsIHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZGF0YSBmcm9tIHRoaXMgb2JqZWN0LlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGluaXRpYWxpemluZyBhIG5ldyBcInBlbmRpbmcgY2FsbFwiIGZyb20gYW4gZXZlbnQuXG4gICAqL1xuICBtZW1iZXJzPzogTWVtYmVyUmVzcG9uc2VbXTtcblxuICAvKipcbiAgICogQW4gb3B0aW9uYWwgbGlzdCBvZiB7QGxpbmsgT3duQ2FwYWJpbGl0eX0gY29taW5nIGZyb20gdGhlIGJhY2tlZC5cbiAgICogSWYgcHJvdmlkZWQsIHRoZSBjYWxsIHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZGF0YSBmcm9tIHRoaXMgb2JqZWN0LlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGluaXRpYWxpemluZyBhIG5ldyBcInBlbmRpbmcgY2FsbFwiIGZyb20gYW4gZXZlbnQuXG4gICAqL1xuICBvd25DYXBhYmlsaXRpZXM/OiBPd25DYXBhYmlsaXR5W107XG5cbiAgLyoqXG4gICAqIEZsYWdzIHRoZSBjYWxsIGFzIGEgcmluZ2luZyBjYWxsLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgcmluZ2luZz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHRoaXMgY2FsbCBpbnN0YW5jZSBzaG91bGQgcmVjZWl2ZSB1cGRhdGVzIGZyb20gdGhlIGJhY2tlbmQuXG4gICAqXG4gICAqIEBkZWZhdWx0IGZhbHNlLlxuICAgKi9cbiAgd2F0Y2hpbmc/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBjb21wYXJhdG9yIHRvIHVzZSB3aGVuIHNvcnRpbmcgcGFydGljaXBhbnRzLlxuICAgKi9cbiAgc29ydFBhcnRpY2lwYW50c0J5PzogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PjtcblxuICAvKipcbiAgICogVGhlIHN0YXRlIHN0b3JlIG9mIHRoZSBjbGllbnRcbiAgICovXG4gIGNsaWVudFN0b3JlOiBTdHJlYW1WaWRlb1dyaXRlYWJsZVN0YXRlU3RvcmU7XG59O1xuXG4vKipcbiAqIFRoZSBvcHRpb25zIHRvIHBhc3MgdG8ge0BsaW5rIENhbGwuam9pbn0gbWV0aG9kLlxuICovXG5leHBvcnQgdHlwZSBKb2luQ2FsbERhdGEgPSBPbWl0PEpvaW5DYWxsUmVxdWVzdCwgJ2xvY2F0aW9uJz47XG5leHBvcnQgeyBBeGlvc0Vycm9yIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gQGdlbmVyYXRlZCBieSBwcm90b2J1Zi10cyAyLjkuNCB3aXRoIHBhcmFtZXRlciBsb25nX3R5cGVfc3RyaW5nLGNsaWVudF9nZW5lcmljLHNlcnZlcl9ub25lLGVzbGludF9kaXNhYmxlLG9wdGltaXplX2NvZGVfc2l6ZVxuLy8gQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpbGUgXCJ2aWRlby9zZnUvc2lnbmFsX3JwYy9zaWduYWwucHJvdG9cIiAocGFja2FnZSBcInN0cmVhbS52aWRlby5zZnUuc2lnbmFsXCIsIHN5bnRheCBwcm90bzMpXG4vLyB0c2xpbnQ6ZGlzYWJsZVxuaW1wb3J0IHR5cGUge1xuICBScGNPcHRpb25zLFxuICBScGNUcmFuc3BvcnQsXG4gIFNlcnZpY2VJbmZvLFxuICBVbmFyeUNhbGwsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQgeyBzdGFja0ludGVyY2VwdCB9IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQgdHlwZSB7XG4gIElDRVJlc3RhcnRSZXF1ZXN0LFxuICBJQ0VSZXN0YXJ0UmVzcG9uc2UsXG4gIElDRVRyaWNrbGVSZXNwb25zZSxcbiAgU2VuZEFuc3dlclJlcXVlc3QsXG4gIFNlbmRBbnN3ZXJSZXNwb25zZSxcbiAgU2VuZFN0YXRzUmVxdWVzdCxcbiAgU2VuZFN0YXRzUmVzcG9uc2UsXG4gIFNldFB1Ymxpc2hlclJlcXVlc3QsXG4gIFNldFB1Ymxpc2hlclJlc3BvbnNlLFxuICBTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCxcbiAgU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlLFxuICBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0LFxuICBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSxcbiAgVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsXG4gIFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSxcbiAgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsXG4gIFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSxcbn0gZnJvbSAnLi9zaWduYWwnO1xuaW1wb3J0IHsgU2lnbmFsU2VydmVyIH0gZnJvbSAnLi9zaWduYWwnO1xuaW1wb3J0IHR5cGUgeyBJQ0VUcmlja2xlIH0gZnJvbSAnLi4vbW9kZWxzL21vZGVscyc7XG5cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHNlcnZpY2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2lnbmFsU2VydmVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVNpZ25hbFNlcnZlckNsaWVudCB7XG4gIC8qKlxuICAgKiBTZXRQdWJsaXNoZXIgc2VuZHMgdGhlIFdlYlJUQyBvZmZlciBmb3IgdGhlIHBlZXIgY29ubmVjdGlvbiB1c2VkIHRvIHB1Ymxpc2ggQS9WXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IFNldFB1Ymxpc2hlcihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZSk7XG4gICAqL1xuICBzZXRQdWJsaXNoZXIoXG4gICAgaW5wdXQ6IFNldFB1Ymxpc2hlclJlcXVlc3QsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxTZXRQdWJsaXNoZXJSZXF1ZXN0LCBTZXRQdWJsaXNoZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKiBhbnN3ZXIgaXMgc2VudCBieSB0aGUgY2xpZW50IHRvIHRoZSBTRlUgYWZ0ZXIgcmVjZWl2aW5nIGEgc3Vic2NyaWJlcl9vZmZlci5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU2VuZEFuc3dlcihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlc3BvbnNlKTtcbiAgICovXG4gIHNlbmRBbnN3ZXIoXG4gICAgaW5wdXQ6IFNlbmRBbnN3ZXJSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8U2VuZEFuc3dlclJlcXVlc3QsIFNlbmRBbnN3ZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKiBTZW5kSUNFQ2FuZGlkYXRlIHNlbmRzIGFuIElDRSBjYW5kaWRhdGUgdG8gdGhlIGNsaWVudFxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgcnBjOiBJY2VUcmlja2xlKHN0cmVhbS52aWRlby5zZnUubW9kZWxzLklDRVRyaWNrbGUpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVRyaWNrbGVSZXNwb25zZSk7XG4gICAqL1xuICBpY2VUcmlja2xlKFxuICAgIGlucHV0OiBJQ0VUcmlja2xlLFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8SUNFVHJpY2tsZSwgSUNFVHJpY2tsZVJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIFVwZGF0ZVN1YnNjcmliZXJzIGlzIHVzZWQgdG8gbm90aWZ5IHRoZSBTRlUgYWJvdXQgdGhlIGxpc3Qgb2YgdmlkZW8gc3Vic2NyaXB0aW9uc1xuICAgKiBUT0RPOiBzeW5jIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gdGhpcyArIHVwZGF0ZSB0cmFja3MgdXNpbmcgdGhlIGRpbWVuc2lvbiBpbmZvIHNlbnQgYnkgdGhlIHVzZXJcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogVXBkYXRlU3Vic2NyaXB0aW9ucyhzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlKTtcbiAgICovXG4gIHVwZGF0ZVN1YnNjcmlwdGlvbnMoXG4gICAgaW5wdXQ6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8VXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsIFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZT47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgcnBjOiBVcGRhdGVNdXRlU3RhdGVzKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2UpO1xuICAgKi9cbiAgdXBkYXRlTXV0ZVN0YXRlcyhcbiAgICBpbnB1dDogVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCwgVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlPjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IEljZVJlc3RhcnQoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFUmVzdGFydFJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZSk7XG4gICAqL1xuICBpY2VSZXN0YXJ0KFxuICAgIGlucHV0OiBJQ0VSZXN0YXJ0UmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPElDRVJlc3RhcnRSZXF1ZXN0LCBJQ0VSZXN0YXJ0UmVzcG9uc2U+O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU2VuZFN0YXRzKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRTdGF0c1JlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRTdGF0c1Jlc3BvbnNlKTtcbiAgICovXG4gIHNlbmRTdGF0cyhcbiAgICBpbnB1dDogU2VuZFN0YXRzUmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPFNlbmRTdGF0c1JlcXVlc3QsIFNlbmRTdGF0c1Jlc3BvbnNlPjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb24oc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSk7XG4gICAqL1xuICBzdGFydE5vaXNlQ2FuY2VsbGF0aW9uKFxuICAgIGlucHV0OiBTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0LCBTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2U+O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU3RvcE5vaXNlQ2FuY2VsbGF0aW9uKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlKTtcbiAgICovXG4gIHN0b3BOb2lzZUNhbmNlbGxhdGlvbihcbiAgICBpbnB1dDogU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPFN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QsIFN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlPjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHNlcnZpY2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2lnbmFsU2VydmVyXG4gKi9cbmV4cG9ydCBjbGFzcyBTaWduYWxTZXJ2ZXJDbGllbnQgaW1wbGVtZW50cyBJU2lnbmFsU2VydmVyQ2xpZW50LCBTZXJ2aWNlSW5mbyB7XG4gIHR5cGVOYW1lID0gU2lnbmFsU2VydmVyLnR5cGVOYW1lO1xuICBtZXRob2RzID0gU2lnbmFsU2VydmVyLm1ldGhvZHM7XG4gIG9wdGlvbnMgPSBTaWduYWxTZXJ2ZXIub3B0aW9ucztcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBfdHJhbnNwb3J0OiBScGNUcmFuc3BvcnQpIHt9XG4gIC8qKlxuICAgKiBTZXRQdWJsaXNoZXIgc2VuZHMgdGhlIFdlYlJUQyBvZmZlciBmb3IgdGhlIHBlZXIgY29ubmVjdGlvbiB1c2VkIHRvIHB1Ymxpc2ggQS9WXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IFNldFB1Ymxpc2hlcihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZSk7XG4gICAqL1xuICBzZXRQdWJsaXNoZXIoXG4gICAgaW5wdXQ6IFNldFB1Ymxpc2hlclJlcXVlc3QsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxTZXRQdWJsaXNoZXJSZXF1ZXN0LCBTZXRQdWJsaXNoZXJSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1swXSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFNldFB1Ymxpc2hlclJlcXVlc3QsIFNldFB1Ymxpc2hlclJlc3BvbnNlPihcbiAgICAgICd1bmFyeScsXG4gICAgICB0aGlzLl90cmFuc3BvcnQsXG4gICAgICBtZXRob2QsXG4gICAgICBvcHQsXG4gICAgICBpbnB1dCxcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBhbnN3ZXIgaXMgc2VudCBieSB0aGUgY2xpZW50IHRvIHRoZSBTRlUgYWZ0ZXIgcmVjZWl2aW5nIGEgc3Vic2NyaWJlcl9vZmZlci5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU2VuZEFuc3dlcihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlc3BvbnNlKTtcbiAgICovXG4gIHNlbmRBbnN3ZXIoXG4gICAgaW5wdXQ6IFNlbmRBbnN3ZXJSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8U2VuZEFuc3dlclJlcXVlc3QsIFNlbmRBbnN3ZXJSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1sxXSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFNlbmRBbnN3ZXJSZXF1ZXN0LCBTZW5kQW5zd2VyUmVzcG9uc2U+KFxuICAgICAgJ3VuYXJ5JyxcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCxcbiAgICAgIG1ldGhvZCxcbiAgICAgIG9wdCxcbiAgICAgIGlucHV0LFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFNlbmRJQ0VDYW5kaWRhdGUgc2VuZHMgYW4gSUNFIGNhbmRpZGF0ZSB0byB0aGUgY2xpZW50XG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IEljZVRyaWNrbGUoc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZSkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFVHJpY2tsZVJlc3BvbnNlKTtcbiAgICovXG4gIGljZVRyaWNrbGUoXG4gICAgaW5wdXQ6IElDRVRyaWNrbGUsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxJQ0VUcmlja2xlLCBJQ0VUcmlja2xlUmVzcG9uc2U+IHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLm1ldGhvZHNbMl0sXG4gICAgICBvcHQgPSB0aGlzLl90cmFuc3BvcnQubWVyZ2VPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBzdGFja0ludGVyY2VwdDxJQ0VUcmlja2xlLCBJQ0VUcmlja2xlUmVzcG9uc2U+KFxuICAgICAgJ3VuYXJ5JyxcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCxcbiAgICAgIG1ldGhvZCxcbiAgICAgIG9wdCxcbiAgICAgIGlucHV0LFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZVN1YnNjcmliZXJzIGlzIHVzZWQgdG8gbm90aWZ5IHRoZSBTRlUgYWJvdXQgdGhlIGxpc3Qgb2YgdmlkZW8gc3Vic2NyaXB0aW9uc1xuICAgKiBUT0RPOiBzeW5jIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gdGhpcyArIHVwZGF0ZSB0cmFja3MgdXNpbmcgdGhlIGRpbWVuc2lvbiBpbmZvIHNlbnQgYnkgdGhlIHVzZXJcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogVXBkYXRlU3Vic2NyaXB0aW9ucyhzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlKTtcbiAgICovXG4gIHVwZGF0ZVN1YnNjcmlwdGlvbnMoXG4gICAgaW5wdXQ6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8VXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsIFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1szXSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFxuICAgICAgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsXG4gICAgICBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2VcbiAgICA+KCd1bmFyeScsIHRoaXMuX3RyYW5zcG9ydCwgbWV0aG9kLCBvcHQsIGlucHV0KTtcbiAgfVxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogVXBkYXRlTXV0ZVN0YXRlcyhzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlKTtcbiAgICovXG4gIHVwZGF0ZU11dGVTdGF0ZXMoXG4gICAgaW5wdXQ6IFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsIFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1s0XSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LCBVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2U+KFxuICAgICAgJ3VuYXJ5JyxcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCxcbiAgICAgIG1ldGhvZCxcbiAgICAgIG9wdCxcbiAgICAgIGlucHV0LFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IEljZVJlc3RhcnQoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFUmVzdGFydFJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZSk7XG4gICAqL1xuICBpY2VSZXN0YXJ0KFxuICAgIGlucHV0OiBJQ0VSZXN0YXJ0UmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPElDRVJlc3RhcnRSZXF1ZXN0LCBJQ0VSZXN0YXJ0UmVzcG9uc2U+IHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLm1ldGhvZHNbNV0sXG4gICAgICBvcHQgPSB0aGlzLl90cmFuc3BvcnQubWVyZ2VPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBzdGFja0ludGVyY2VwdDxJQ0VSZXN0YXJ0UmVxdWVzdCwgSUNFUmVzdGFydFJlc3BvbnNlPihcbiAgICAgICd1bmFyeScsXG4gICAgICB0aGlzLl90cmFuc3BvcnQsXG4gICAgICBtZXRob2QsXG4gICAgICBvcHQsXG4gICAgICBpbnB1dCxcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgcnBjOiBTZW5kU3RhdHMoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZFN0YXRzUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZFN0YXRzUmVzcG9uc2UpO1xuICAgKi9cbiAgc2VuZFN0YXRzKFxuICAgIGlucHV0OiBTZW5kU3RhdHNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8U2VuZFN0YXRzUmVxdWVzdCwgU2VuZFN0YXRzUmVzcG9uc2U+IHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLm1ldGhvZHNbNl0sXG4gICAgICBvcHQgPSB0aGlzLl90cmFuc3BvcnQubWVyZ2VPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBzdGFja0ludGVyY2VwdDxTZW5kU3RhdHNSZXF1ZXN0LCBTZW5kU3RhdHNSZXNwb25zZT4oXG4gICAgICAndW5hcnknLFxuICAgICAgdGhpcy5fdHJhbnNwb3J0LFxuICAgICAgbWV0aG9kLFxuICAgICAgb3B0LFxuICAgICAgaW5wdXQsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU3RhcnROb2lzZUNhbmNlbGxhdGlvbihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlKTtcbiAgICovXG4gIHN0YXJ0Tm9pc2VDYW5jZWxsYXRpb24oXG4gICAgaW5wdXQ6IFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8U3RhcnROb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QsIFN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1s3XSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFxuICAgICAgU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QsXG4gICAgICBTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2VcbiAgICA+KCd1bmFyeScsIHRoaXMuX3RyYW5zcG9ydCwgbWV0aG9kLCBvcHQsIGlucHV0KTtcbiAgfVxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU3RvcE5vaXNlQ2FuY2VsbGF0aW9uKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlKTtcbiAgICovXG4gIHN0b3BOb2lzZUNhbmNlbGxhdGlvbihcbiAgICBpbnB1dDogU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPFN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QsIFN0b3BOb2lzZUNhbmNlbGxhdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgbWV0aG9kID0gdGhpcy5tZXRob2RzWzhdLFxuICAgICAgb3B0ID0gdGhpcy5fdHJhbnNwb3J0Lm1lcmdlT3B0aW9ucyhvcHRpb25zKTtcbiAgICByZXR1cm4gc3RhY2tJbnRlcmNlcHQ8XG4gICAgICBTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXF1ZXN0LFxuICAgICAgU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2VcbiAgICA+KCd1bmFyeScsIHRoaXMuX3RyYW5zcG9ydCwgbWV0aG9kLCBvcHQsIGlucHV0KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgTWV0aG9kSW5mbyxcbiAgTmV4dFVuYXJ5Rm4sXG4gIFJwY0ludGVyY2VwdG9yLFxuICBScGNPcHRpb25zLFxuICBVbmFyeUNhbGwsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQge1xuICBUd2lycEZldGNoVHJhbnNwb3J0LFxuICBUd2lycE9wdGlvbnMsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy90d2lycC10cmFuc3BvcnQnO1xuaW1wb3J0IHsgU2lnbmFsU2VydmVyQ2xpZW50IH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbC5jbGllbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuXG5jb25zdCBkZWZhdWx0T3B0aW9uczogVHdpcnBPcHRpb25zID0ge1xuICBiYXNlVXJsOiAnJyxcbiAgc2VuZEpzb246IHRydWUsXG4gIHRpbWVvdXQ6IDUgKiAxMDAwLCAvLyBtcy5cbiAganNvbk9wdGlvbnM6IHtcbiAgICBpZ25vcmVVbmtub3duRmllbGRzOiB0cnVlLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IHdpdGhIZWFkZXJzID0gKFxuICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuKTogUnBjSW50ZXJjZXB0b3IgPT4ge1xuICByZXR1cm4ge1xuICAgIGludGVyY2VwdFVuYXJ5KFxuICAgICAgbmV4dDogTmV4dFVuYXJ5Rm4sXG4gICAgICBtZXRob2Q6IE1ldGhvZEluZm8sXG4gICAgICBpbnB1dDogb2JqZWN0LFxuICAgICAgb3B0aW9uczogUnBjT3B0aW9ucyxcbiAgICApOiBVbmFyeUNhbGwge1xuICAgICAgb3B0aW9ucy5tZXRhID0geyAuLi5vcHRpb25zLm1ldGEsIC4uLmhlYWRlcnMgfTtcbiAgICAgIHJldHVybiBuZXh0KG1ldGhvZCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH0sXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgd2l0aFJlcXVlc3RMb2dnZXIgPSAoXG4gIGxvZ2dlcjogTG9nZ2VyLFxuICBsZXZlbDogTG9nTGV2ZWwsXG4pOiBScGNJbnRlcmNlcHRvciA9PiB7XG4gIHJldHVybiB7XG4gICAgaW50ZXJjZXB0VW5hcnk6IChcbiAgICAgIG5leHQ6IE5leHRVbmFyeUZuLFxuICAgICAgbWV0aG9kOiBNZXRob2RJbmZvLFxuICAgICAgaW5wdXQ6IG9iamVjdCxcbiAgICAgIG9wdGlvbnM6IFJwY09wdGlvbnMsXG4gICAgKTogVW5hcnlDYWxsID0+IHtcbiAgICAgIGxvZ2dlcihsZXZlbCwgYENhbGxpbmcgU0ZVIFJQQyBtZXRob2QgJHttZXRob2QubmFtZX1gLCB7XG4gICAgICAgIGlucHV0LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV4dChtZXRob2QsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9LFxuICB9O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIG5ldyBTaWduYWxTZXJ2ZXJDbGllbnQgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgdGhlIHR3aXJwIG9wdGlvbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVTaWduYWxDbGllbnQgPSAob3B0aW9ucz86IFR3aXJwT3B0aW9ucykgPT4ge1xuICBjb25zdCB0cmFuc3BvcnQgPSBuZXcgVHdpcnBGZXRjaFRyYW5zcG9ydCh7XG4gICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgLi4ub3B0aW9ucyxcbiAgfSk7XG5cbiAgcmV0dXJuIG5ldyBTaWduYWxTZXJ2ZXJDbGllbnQodHJhbnNwb3J0KTtcbn07XG4iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IHNsZWVwID0gKG06IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT5cbiAgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgbSkpO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbjxUPih2YWx1ZTogRnVuY3Rpb24gfCBUKTogdmFsdWUgaXMgRnVuY3Rpb24ge1xuICByZXR1cm4gKFxuICAgIHZhbHVlICYmXG4gICAgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScgfHxcbiAgICAgICdmdW5jdGlvbicgPT09IHR5cGVvZiB2YWx1ZSB8fFxuICAgICAgdmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgKTtcbn1cblxuLyoqXG4gKiBBIG1hcCBvZiBrbm93biBlcnJvciBjb2Rlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IEtub3duQ29kZXMgPSB7XG4gIFRPS0VOX0VYUElSRUQ6IDQwLFxuICBXU19DTE9TRURfU1VDQ0VTUzogMTAwMCxcbiAgV1NfQ0xPU0VEX0FCUlVQVExZOiAxMDA2LFxuICBXU19QT0xJQ1lfVklPTEFUSU9OOiAxMDA4LFxufTtcblxuLyoqXG4gKiByZXRyeUludGVydmFsIC0gQSByZXRyeSBpbnRlcnZhbCB3aGljaCBpbmNyZWFzZXMgYWNjIHRvIG51bWJlciBvZiBmYWlsdXJlc1xuICpcbiAqIEByZXR1cm4ge251bWJlcn0gRHVyYXRpb24gdG8gd2FpdCBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldHJ5SW50ZXJ2YWwobnVtYmVyT2ZGYWlsdXJlczogbnVtYmVyKSB7XG4gIC8vIHRyeSB0byByZWNvbm5lY3QgaW4gMC4yNS01IHNlY29uZHMgKHJhbmRvbSB0byBzcHJlYWQgb3V0IHRoZSBsb2FkIGZyb20gZmFpbHVyZXMpXG4gIGNvbnN0IG1heCA9IE1hdGgubWluKDUwMCArIG51bWJlck9mRmFpbHVyZXMgKiAyMDAwLCA1MDAwKTtcbiAgY29uc3QgbWluID0gTWF0aC5taW4oTWF0aC5tYXgoMjUwLCAobnVtYmVyT2ZGYWlsdXJlcyAtIDEpICogMjAwMCksIDUwMDApO1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tSWQoKSB7XG4gIHJldHVybiBnZW5lcmF0ZVVVSUR2NCgpO1xufVxuXG5mdW5jdGlvbiBoZXgoYnl0ZXM6IFVpbnQ4QXJyYXkpOiBzdHJpbmcge1xuICBsZXQgcyA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgcyArPSBieXRlc1tpXS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKTtcbiAgfVxuICByZXR1cm4gcztcbn1cblxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzQxMjJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVVVSUR2NCgpIHtcbiAgY29uc3QgYnl0ZXMgPSBnZXRSYW5kb21CeXRlcygxNik7XG4gIGJ5dGVzWzZdID0gKGJ5dGVzWzZdICYgMHgwZikgfCAweDQwOyAvLyB2ZXJzaW9uXG4gIGJ5dGVzWzhdID0gKGJ5dGVzWzhdICYgMHhiZikgfCAweDgwOyAvLyB2YXJpYW50XG5cbiAgcmV0dXJuIChcbiAgICBoZXgoYnl0ZXMuc3ViYXJyYXkoMCwgNCkpICtcbiAgICAnLScgK1xuICAgIGhleChieXRlcy5zdWJhcnJheSg0LCA2KSkgK1xuICAgICctJyArXG4gICAgaGV4KGJ5dGVzLnN1YmFycmF5KDYsIDgpKSArXG4gICAgJy0nICtcbiAgICBoZXgoYnl0ZXMuc3ViYXJyYXkoOCwgMTApKSArXG4gICAgJy0nICtcbiAgICBoZXgoYnl0ZXMuc3ViYXJyYXkoMTAsIDE2KSlcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tVmFsdWVzV2l0aE1hdGhSYW5kb20oYnl0ZXM6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgY29uc3QgbWF4ID0gTWF0aC5wb3coMiwgKDggKiBieXRlcy5ieXRlTGVuZ3RoKSAvIGJ5dGVzLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBieXRlc1tpXSA9IE1hdGgucmFuZG9tKCkgKiBtYXg7XG4gIH1cbn1cbmRlY2xhcmUgY29uc3QgbXNDcnlwdG86IENyeXB0bztcblxuY29uc3QgZ2V0UmFuZG9tVmFsdWVzID0gKCgpID0+IHtcbiAgaWYgKFxuICAgIHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGNyeXB0bz8uZ2V0UmFuZG9tVmFsdWVzICE9PSAndW5kZWZpbmVkJ1xuICApIHtcbiAgICByZXR1cm4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChtc0NyeXB0byk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGdldFJhbmRvbVZhbHVlc1dpdGhNYXRoUmFuZG9tO1xuICB9XG59KSgpO1xuXG5mdW5jdGlvbiBnZXRSYW5kb21CeXRlcyhsZW5ndGg6IG51bWJlcik6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIGdldFJhbmRvbVZhbHVlcyhieXRlcyk7XG4gIHJldHVybiBieXRlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRFcnJvclRvSnNvbihlcnI6IEVycm9yKSB7XG4gIGNvbnN0IGpzb25PYmogPSB7fSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuICBpZiAoIWVycikgcmV0dXJuIGpzb25PYmo7XG5cbiAgdHJ5IHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlcnIpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAganNvbk9ialtrZXldID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlcnIsIGtleSk7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6ICdmYWlsZWQgdG8gc2VyaWFsaXplIHRoZSBlcnJvcicsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBqc29uT2JqO1xufVxuXG4vKipcbiAqIEluZm9ybXMgaWYgYSBwcm9taXNlIGlzIHlldCB0byBiZSByZXNvbHZlZCBvciByZWplY3RlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNQcm9taXNlUGVuZGluZzxUPihwcm9taXNlOiBQcm9taXNlPFQ+KSB7XG4gIGNvbnN0IGVtcHR5T2JqID0ge307XG4gIHJldHVybiBQcm9taXNlLnJhY2UoW3Byb21pc2UsIGVtcHR5T2JqXSkudGhlbihcbiAgICAodmFsdWUpID0+ICh2YWx1ZSA9PT0gZW1wdHlPYmogPyB0cnVlIDogZmFsc2UpLFxuICAgICgpID0+IGZhbHNlLFxuICApO1xufVxuXG4vKipcbiAqIGlzT25saW5lIHNhZmVseSByZXR1cm4gdGhlIG5hdmlnYXRvci5vbmxpbmUgdmFsdWUgZm9yIGJyb3dzZXIgZW52XG4gKiBpZiBuYXZpZ2F0b3IgaXMgbm90IGluIGdsb2JhbCBvYmplY3QsIGl0IGFsd2F5cyByZXR1cm4gdHJ1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPbmxpbmUobG9nZ2VyOiBMb2dnZXIpIHtcbiAgY29uc3QgbmF2ID1cbiAgICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyBuYXZpZ2F0b3JcbiAgICAgIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvclxuICAgICAgICA/IHdpbmRvdy5uYXZpZ2F0b3JcbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgaWYgKCFuYXYpIHtcbiAgICBsb2dnZXIoXG4gICAgICAnd2FybicsXG4gICAgICAnaXNPbmxpbmUgZmFpbGVkIHRvIGFjY2VzcyB3aW5kb3cubmF2aWdhdG9yIGFuZCBhc3N1bWUgYnJvd3NlciBpcyBvbmxpbmUnLFxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBSTiBuYXZpZ2F0b3IgaGFzIHVuZGVmaW5lZCBmb3Igb25MaW5lXG4gIGlmICh0eXBlb2YgbmF2Lm9uTGluZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gbmF2Lm9uTGluZTtcbn1cblxuLyoqXG4gKiBsaXN0ZW5Gb3JDb25uZWN0aW9uQ2hhbmdlcyAtIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgZmlyZWQgb24gYnJvd3NlciBnb2luZyBvbmxpbmUgb3Igb2ZmbGluZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzKGNiOiAoZTogRXZlbnQpID0+IHZvaWQpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBjYik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsIGNiKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzKGNiOiAoZTogRXZlbnQpID0+IHZvaWQpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBjYik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29ubGluZScsIGNiKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDaGVja3Mgd2hldGhlciB3ZSBhcmUgdXNpbmcgUmVhY3QgTmF0aXZlXG4gKi9cbmV4cG9ydCBjb25zdCBpc1JlYWN0TmF0aXZlID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIG5hdmlnYXRvci5wcm9kdWN0Py50b0xvd2VyQ2FzZSgpID09PSAncmVhY3RuYXRpdmUnO1xufTtcbiIsImltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICcuL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4vaGVscGVycy9wbGF0Zm9ybXMnO1xuXG4vLyBsb2cgbGV2ZWxzLCBzb3J0ZWQgYnkgdmVyYm9zaXR5XG5leHBvcnQgY29uc3QgbG9nTGV2ZWxzOiBSZWNvcmQ8TG9nTGV2ZWwsIG51bWJlcj4gPSBPYmplY3QuZnJlZXplKHtcbiAgdHJhY2U6IDAsXG4gIGRlYnVnOiAxLFxuICBpbmZvOiAyLFxuICB3YXJuOiAzLFxuICBlcnJvcjogNCxcbn0pO1xuXG5sZXQgbG9nZ2VyOiBMb2dnZXIgfCB1bmRlZmluZWQ7XG5sZXQgbGV2ZWw6IExvZ0xldmVsID0gJ2luZm8nO1xuXG5leHBvcnQgY29uc3QgbG9nVG9Db25zb2xlOiBMb2dnZXIgPSAobG9nTGV2ZWwsIG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHtcbiAgbGV0IGxvZ01ldGhvZDtcbiAgc3dpdGNoIChsb2dMZXZlbCkge1xuICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcbiAgICAgICAgbWVzc2FnZSA9IGBFUlJPUjogJHttZXNzYWdlfWA7XG4gICAgICAgIGxvZ01ldGhvZCA9IGNvbnNvbGUuaW5mbztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBsb2dNZXRob2QgPSBjb25zb2xlLmVycm9yO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnd2Fybic6XG4gICAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgV0FSTjogJHttZXNzYWdlfWA7XG4gICAgICAgIGxvZ01ldGhvZCA9IGNvbnNvbGUuaW5mbztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBsb2dNZXRob2QgPSBjb25zb2xlLndhcm47XG4gICAgICBicmVhaztcbiAgICBjYXNlICdpbmZvJzpcbiAgICAgIGxvZ01ldGhvZCA9IGNvbnNvbGUuaW5mbztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3RyYWNlJzpcbiAgICAgIGxvZ01ldGhvZCA9IGNvbnNvbGUudHJhY2U7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgbG9nTWV0aG9kID0gY29uc29sZS5sb2c7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGxvZ01ldGhvZChtZXNzYWdlLCAuLi5hcmdzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRMb2dnZXIgPSAobDogTG9nZ2VyLCBsdmw/OiBMb2dMZXZlbCkgPT4ge1xuICBsb2dnZXIgPSBsO1xuICBpZiAobHZsKSB7XG4gICAgc2V0TG9nTGV2ZWwobHZsKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHNldExvZ0xldmVsID0gKGw6IExvZ0xldmVsKSA9PiB7XG4gIGxldmVsID0gbDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRMb2dMZXZlbCA9ICgpOiBMb2dMZXZlbCA9PiBsZXZlbDtcblxuZXhwb3J0IGNvbnN0IGdldExvZ2dlciA9ICh3aXRoVGFncz86IHN0cmluZ1tdKSA9PiB7XG4gIGNvbnN0IGxvZ2dlck1ldGhvZCA9IGxvZ2dlciB8fCBsb2dUb0NvbnNvbGU7XG4gIGNvbnN0IHRhZ3MgPSAod2l0aFRhZ3MgfHwgW10pLmZpbHRlcihCb29sZWFuKS5qb2luKCc6Jyk7XG4gIGNvbnN0IHJlc3VsdDogTG9nZ2VyID0gKGxvZ0xldmVsLCBtZXNzYWdlLCAuLi5hcmdzKSA9PiB7XG4gICAgaWYgKGxvZ0xldmVsc1tsb2dMZXZlbF0gPj0gbG9nTGV2ZWxzW2xldmVsXSkge1xuICAgICAgbG9nZ2VyTWV0aG9kKGxvZ0xldmVsLCBgWyR7dGFnc31dOiAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gcmVzdWx0O1xufTtcbiIsImltcG9ydCB7XG4gIEZpbmlzaGVkVW5hcnlDYWxsLFxuICBScGNFcnJvcixcbiAgVW5hcnlDYWxsLFxufSBmcm9tICdAcHJvdG9idWYtdHMvcnVudGltZS1ycGMnO1xuaW1wb3J0IHsgVHdpcnBFcnJvckNvZGUgfSBmcm9tICdAcHJvdG9idWYtdHMvdHdpcnAtdHJhbnNwb3J0JztcbmltcG9ydCB7IHJldHJ5SW50ZXJ2YWwsIHNsZWVwIH0gZnJvbSAnLi4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi91dGlscyc7XG5pbXBvcnQgeyBFcnJvciBhcyBTZnVFcnJvciB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuXG4vKipcbiAqIEFuIGludGVybmFsIGludGVyZmFjZSB3aGljaCBhc3NlcnRzIHRoYXQgXCJyZXRyeWFibGVcIiBTRlUgcmVzcG9uc2VzXG4gKiBjb250YWluIGEgZmllbGQgY2FsbGVkIFwiZXJyb3JcIi5cbiAqIElkZWFsbHksIHRoaXMgc2hvdWxkIGJlIGNvbWluZyBmcm9tIHRoZSBQcm90b2J1ZiBkZWZpbml0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZnVSZXNwb25zZVdpdGhFcnJvciB7XG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCBlcnJvciBmaWVsZCB3aGljaCBzaG91bGQgYmUgcHJlc2VudCBpbiBhbGwgU0ZVIHJlc3BvbnNlcy5cbiAgICovXG4gIGVycm9yPzogU2Z1RXJyb3I7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb3N1cmUgd2hpY2ggd3JhcHMgdGhlIGdpdmVuIFJQQyBjYWxsIGFuZCByZXRyaWVzIGludm9raW5nXG4gKiB0aGUgUlBDIHVudGlsIGl0IHN1Y2NlZWRzIG9yIHRoZSBtYXhpbXVtIG51bWJlciBvZiByZXRyaWVzIGlzIHJlYWNoZWQuXG4gKlxuICogRm9yIGVhY2ggcmV0cnksIHRoZXJlIHdvdWxkIGJlIGEgZGVsYXkgdG8gYXZvaWQgcmVxdWVzdCBidXJzdHMgdG93YXJkIHRoZSBTRlUuXG4gKlxuICogQHBhcmFtIHJwYyB0aGUgY2xvc3VyZSBhcm91bmQgdGhlIFJQQyBjYWxsIHRvIGV4ZWN1dGUuXG4gKiBAcGFyYW0gc2lnbmFsIHRoZSBzaWduYWwgdG8gYWJvcnQgdGhlIFJQQyBjYWxsIGFuZCByZXRyaWVzIGxvb3AuXG4gKi9cbmV4cG9ydCBjb25zdCByZXRyeWFibGUgPSBhc3luYyA8XG4gIEkgZXh0ZW5kcyBvYmplY3QsXG4gIE8gZXh0ZW5kcyBTZnVSZXNwb25zZVdpdGhFcnJvcixcbj4oXG4gIHJwYzogKCkgPT4gVW5hcnlDYWxsPEksIE8+LFxuICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbik6IFByb21pc2U8RmluaXNoZWRVbmFyeUNhbGw8SSwgTz4+ID0+IHtcbiAgbGV0IGF0dGVtcHQgPSAwO1xuICBsZXQgcmVzdWx0OiBGaW5pc2hlZFVuYXJ5Q2FsbDxJLCBPPiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgZG8ge1xuICAgIGlmIChhdHRlbXB0ID4gMCkgYXdhaXQgc2xlZXAocmV0cnlJbnRlcnZhbChhdHRlbXB0KSk7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHJwYygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgaXNSZXF1ZXN0Q2FuY2VsbGVkID1cbiAgICAgICAgZXJyIGluc3RhbmNlb2YgUnBjRXJyb3IgJiZcbiAgICAgICAgZXJyLmNvZGUgPT09IFR3aXJwRXJyb3JDb2RlW1R3aXJwRXJyb3JDb2RlLmNhbmNlbGxlZF07XG4gICAgICBjb25zdCBpc0Fib3J0ZWQgPSBzaWduYWw/LmFib3J0ZWQgPz8gZmFsc2U7XG4gICAgICBpZiAoaXNSZXF1ZXN0Q2FuY2VsbGVkIHx8IGlzQWJvcnRlZCkgdGhyb3cgZXJyO1xuICAgICAgZ2V0TG9nZ2VyKFsnc2Z1LWNsaWVudCcsICdycGMnXSkoJ2RlYnVnJywgYHJwYyBmYWlsZWQgKCR7YXR0ZW1wdH0pYCwgZXJyKTtcbiAgICAgIGF0dGVtcHQrKztcbiAgICB9XG4gIH0gd2hpbGUgKCFyZXN1bHQgfHwgcmVzdWx0LnJlc3BvbnNlLmVycm9yPy5zaG91bGRSZXRyeSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCJpbXBvcnQge1xuICBDbGllbnREZXRhaWxzLFxuICBEZXZpY2UsXG4gIE9TLFxuICBTZGssXG4gIFNka1R5cGUsXG59IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IGlzUmVhY3ROYXRpdmUgfSBmcm9tICcuL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7IFVBUGFyc2VyIH0gZnJvbSAndWEtcGFyc2VyLWpzJztcblxudHlwZSBXZWJSVENJbmZvVHlwZSA9IHtcbiAgdmVyc2lvbjogc3RyaW5nO1xufTtcblxuY29uc3QgdmVyc2lvbiA9IHByb2Nlc3MuZW52LlBLR19WRVJTSU9OIHx8ICcwLjAuMCc7XG5jb25zdCBbbWFqb3IsIG1pbm9yLCBwYXRjaF0gPSB2ZXJzaW9uLnNwbGl0KCcuJyk7XG5cbmxldCBzZGtJbmZvOiBTZGsgfCB1bmRlZmluZWQgPSB7XG4gIHR5cGU6IFNka1R5cGUuUExBSU5fSkFWQVNDUklQVCxcbiAgbWFqb3IsXG4gIG1pbm9yLFxuICBwYXRjaCxcbn07XG5cbmxldCBvc0luZm86IE9TIHwgdW5kZWZpbmVkO1xubGV0IGRldmljZUluZm86IERldmljZSB8IHVuZGVmaW5lZDtcbmxldCB3ZWJSdGNJbmZvOiBXZWJSVENJbmZvVHlwZSB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IGNvbnN0IHNldFNka0luZm8gPSAoaW5mbzogU2RrKSA9PiB7XG4gIHNka0luZm8gPSBpbmZvO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNka0luZm8gPSAoKSA9PiB7XG4gIHJldHVybiBzZGtJbmZvO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldE9TSW5mbyA9IChpbmZvOiBPUykgPT4ge1xuICBvc0luZm8gPSBpbmZvO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldE9TSW5mbyA9ICgpID0+IHtcbiAgcmV0dXJuIG9zSW5mbztcbn07XG5cbmV4cG9ydCBjb25zdCBzZXREZXZpY2VJbmZvID0gKGluZm86IERldmljZSkgPT4ge1xuICBkZXZpY2VJbmZvID0gaW5mbztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXREZXZpY2VJbmZvID0gKCkgPT4ge1xuICByZXR1cm4gZGV2aWNlSW5mbztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRXZWJSVENJbmZvID0gKCkgPT4ge1xuICByZXR1cm4gd2ViUnRjSW5mbztcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRXZWJSVENJbmZvID0gKGluZm86IFdlYlJUQ0luZm9UeXBlKSA9PiB7XG4gIHdlYlJ0Y0luZm8gPSBpbmZvO1xufTtcblxuZXhwb3J0IHR5cGUgTG9jYWxDbGllbnREZXRhaWxzVHlwZSA9IENsaWVudERldGFpbHMgJiB7XG4gIHdlYlJUQ0luZm8/OiBXZWJSVENJbmZvVHlwZTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDbGllbnREZXRhaWxzID0gKCk6IExvY2FsQ2xpZW50RGV0YWlsc1R5cGUgPT4ge1xuICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgLy8gU2luY2UgUk4gZG9lc24ndCBzdXBwb3J0IHdlYiwgc2hhcmluZyBicm93c2VyIGluZm8gaXMgbm90IHJlcXVpcmVkXG4gICAgcmV0dXJuIHtcbiAgICAgIHNkazogZ2V0U2RrSW5mbygpLFxuICAgICAgb3M6IGdldE9TSW5mbygpLFxuICAgICAgZGV2aWNlOiBnZXREZXZpY2VJbmZvKCksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHVzZXJBZ2VudCA9IG5ldyBVQVBhcnNlcihuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgY29uc3QgeyBicm93c2VyLCBvcywgZGV2aWNlLCBjcHUgfSA9IHVzZXJBZ2VudC5nZXRSZXN1bHQoKTtcbiAgcmV0dXJuIHtcbiAgICBzZGs6IGdldFNka0luZm8oKSxcbiAgICBicm93c2VyOiB7XG4gICAgICBuYW1lOiBicm93c2VyLm5hbWUgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgIHZlcnNpb246IGJyb3dzZXIudmVyc2lvbiB8fCAnJyxcbiAgICB9LFxuICAgIG9zOiB7XG4gICAgICBuYW1lOiBvcy5uYW1lIHx8ICcnLFxuICAgICAgdmVyc2lvbjogb3MudmVyc2lvbiB8fCAnJyxcbiAgICAgIGFyY2hpdGVjdHVyZTogY3B1LmFyY2hpdGVjdHVyZSB8fCAnJyxcbiAgICB9LFxuICAgIGRldmljZToge1xuICAgICAgbmFtZTogW2RldmljZS52ZW5kb3IsIGRldmljZS5tb2RlbCwgZGV2aWNlLnR5cGVdXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgLmpvaW4oJyAnKSxcbiAgICAgIHZlcnNpb246ICcnLFxuICAgIH0sXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgZ2V0T1NJbmZvIH0gZnJvbSAnLi4vY2xpZW50LWRldGFpbHMnO1xuXG4vKipcbiAqIFJldHVybnMgYmFjayBhIGxpc3Qgb2Ygc29ydGVkIGNvZGVjcywgd2l0aCB0aGUgcHJlZmVycmVkIGNvZGVjIGZpcnN0LlxuICpcbiAqIEBwYXJhbSBraW5kIHRoZSBraW5kIG9mIGNvZGVjIHRvIGdldC5cbiAqIEBwYXJhbSBwcmVmZXJyZWRDb2RlYyB0aGUgY29kZWMgdG8gcHJpb3JpdGl6ZSAodnA4LCBoMjY0LCB2cDksIGF2MS4uLikuXG4gKiBAcGFyYW0gY29kZWNUb1JlbW92ZSB0aGUgY29kZWMgdG8gZXhjbHVkZSBmcm9tIHRoZSBsaXN0LlxuICovXG5leHBvcnQgY29uc3QgZ2V0UHJlZmVycmVkQ29kZWNzID0gKFxuICBraW5kOiAnYXVkaW8nIHwgJ3ZpZGVvJyxcbiAgcHJlZmVycmVkQ29kZWM6IHN0cmluZyxcbiAgY29kZWNUb1JlbW92ZT86IHN0cmluZyxcbik6IFJUQ1J0cENvZGVjQ2FwYWJpbGl0eVtdIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKCEoJ2dldENhcGFiaWxpdGllcycgaW4gUlRDUnRwUmVjZWl2ZXIpKSByZXR1cm47XG5cbiAgY29uc3QgY2FwYWJpbGl0aWVzID0gUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpO1xuICBpZiAoIWNhcGFiaWxpdGllcykgcmV0dXJuO1xuXG4gIGNvbnN0IHByZWZlcnJlZDogUlRDUnRwQ29kZWNDYXBhYmlsaXR5W10gPSBbXTtcbiAgY29uc3QgcGFydGlhbGx5UHJlZmVycmVkOiBSVENSdHBDb2RlY0NhcGFiaWxpdHlbXSA9IFtdO1xuICBjb25zdCB1bnByZWZlcnJlZDogUlRDUnRwQ29kZWNDYXBhYmlsaXR5W10gPSBbXTtcblxuICBjb25zdCBwcmVmZXJyZWRDb2RlY01pbWVUeXBlID0gYCR7a2luZH0vJHtwcmVmZXJyZWRDb2RlYy50b0xvd2VyQ2FzZSgpfWA7XG4gIGNvbnN0IGNvZGVjVG9SZW1vdmVNaW1lVHlwZSA9XG4gICAgY29kZWNUb1JlbW92ZSAmJiBgJHtraW5kfS8ke2NvZGVjVG9SZW1vdmUudG9Mb3dlckNhc2UoKX1gO1xuXG4gIGZvciAoY29uc3QgY29kZWMgb2YgY2FwYWJpbGl0aWVzLmNvZGVjcykge1xuICAgIGNvbnN0IGNvZGVjTWltZVR5cGUgPSBjb2RlYy5taW1lVHlwZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgY29uc3Qgc2hvdWxkUmVtb3ZlQ29kZWMgPSBjb2RlY01pbWVUeXBlID09PSBjb2RlY1RvUmVtb3ZlTWltZVR5cGU7XG4gICAgaWYgKHNob3VsZFJlbW92ZUNvZGVjKSBjb250aW51ZTsgLy8gc2tpcCB0aGlzIGNvZGVjXG5cbiAgICBjb25zdCBpc1ByZWZlcnJlZENvZGVjID0gY29kZWNNaW1lVHlwZSA9PT0gcHJlZmVycmVkQ29kZWNNaW1lVHlwZTtcbiAgICBpZiAoIWlzUHJlZmVycmVkQ29kZWMpIHtcbiAgICAgIHVucHJlZmVycmVkLnB1c2goY29kZWMpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gaDI2NCBpcyBhIHNwZWNpYWwgY2FzZSwgd2Ugd2FudCB0byBwcmlvcml0aXplIHRoZSBiYXNlbGluZSBjb2RlYyB3aXRoXG4gICAgLy8gcHJvZmlsZS1sZXZlbC1pZCBpcyA0MmUwMWYgYW5kIHBhY2tldGl6YXRpb24tbW9kZT0wIGZvciBtYXhpbXVtXG4gICAgLy8gY3Jvc3MtYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgIC8vIHRoaXMgYnJhbmNoIGNvdmVycyB0aGUgb3RoZXIgY2FzZXMsIHN1Y2ggYXMgdnA4LlxuICAgIGlmIChjb2RlY01pbWVUeXBlICE9PSAndmlkZW8vaDI2NCcpIHtcbiAgICAgIHByZWZlcnJlZC5wdXNoKGNvZGVjKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHNkcEZtdHBMaW5lID0gY29kZWMuc2RwRm10cExpbmU7XG4gICAgaWYgKCFzZHBGbXRwTGluZSB8fCAhc2RwRm10cExpbmUuaW5jbHVkZXMoJ3Byb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmJykpIHtcbiAgICAgIC8vIHRoaXMgaXMgbm90IHRoZSBiYXNlbGluZSBoMjY0IGNvZGVjLCBwcmlvcml0aXplIGl0IGxvd2VyXG4gICAgICBwYXJ0aWFsbHlQcmVmZXJyZWQucHVzaChjb2RlYyk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBwYWNrZXRpemF0aW9uLW1vZGUgbW9kZSBpcyBvcHRpb25hbDsgd2hlbiBub3QgcHJlc2VudCBpdCBkZWZhdWx0cyB0byAwOlxuICAgIC8vIGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjNjE4NCNzZWN0aW9uLTYuMlxuICAgIGlmIChcbiAgICAgIHNkcEZtdHBMaW5lLmluY2x1ZGVzKCdwYWNrZXRpemF0aW9uLW1vZGU9MCcpIHx8XG4gICAgICAhc2RwRm10cExpbmUuaW5jbHVkZXMoJ3BhY2tldGl6YXRpb24tbW9kZScpXG4gICAgKSB7XG4gICAgICBwcmVmZXJyZWQudW5zaGlmdChjb2RlYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWZlcnJlZC5wdXNoKGNvZGVjKTtcbiAgICB9XG4gIH1cblxuICAvLyByZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiBjb2RlY3MsIHdpdGggdGhlIHByZWZlcnJlZCBjb2RlY3MgZmlyc3RcbiAgcmV0dXJuIFsuLi5wcmVmZXJyZWQsIC4uLnBhcnRpYWxseVByZWZlcnJlZCwgLi4udW5wcmVmZXJyZWRdO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZ2VuZXJpYyBTRFAgZm9yIHRoZSBnaXZlbiBkaXJlY3Rpb24uXG4gKiBXZSB1c2UgdGhpcyBTRFAgdG8gc2VuZCBpdCBhcyBwYXJ0IG9mIG91ciBKb2luUmVxdWVzdCBzbyB0aGF0IHRoZSBTRlVcbiAqIGNhbiB1c2UgaXQgdG8gZGV0ZXJtaW5lIGNsaWVudCdzIGNvZGVjIGNhcGFiaWxpdGllcy5cbiAqXG4gKiBAcGFyYW0gZGlyZWN0aW9uIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHRyYW5zY2VpdmVyLlxuICovXG5leHBvcnQgY29uc3QgZ2V0R2VuZXJpY1NkcCA9IGFzeW5jIChkaXJlY3Rpb246IFJUQ1J0cFRyYW5zY2VpdmVyRGlyZWN0aW9uKSA9PiB7XG4gIGNvbnN0IHRlbXBQYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbigpO1xuICB0ZW1wUGMuYWRkVHJhbnNjZWl2ZXIoJ3ZpZGVvJywgeyBkaXJlY3Rpb24gfSk7XG4gIHRlbXBQYy5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCB7IGRpcmVjdGlvbiB9KTtcblxuICBjb25zdCBvZmZlciA9IGF3YWl0IHRlbXBQYy5jcmVhdGVPZmZlcigpO1xuICBjb25zdCBzZHAgPSBvZmZlci5zZHAgPz8gJyc7XG5cbiAgdGVtcFBjLmdldFRyYW5zY2VpdmVycygpLmZvckVhY2goKHQpID0+IHtcbiAgICB0LnN0b3A/LigpO1xuICB9KTtcbiAgdGVtcFBjLmNsb3NlKCk7XG4gIHJldHVybiBzZHA7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG9wdGltYWwgY29kZWMgZm9yIFJOLlxuICovXG5leHBvcnQgY29uc3QgZ2V0Uk5PcHRpbWFsQ29kZWMgPSAoKSA9PiB7XG4gIGNvbnN0IG9zTmFtZSA9IGdldE9TSW5mbygpPy5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gIC8vIGluIGlwYWRzIGl0IHdhcyBub3RpY2VkIHRoYXQgaWYgdnA4IGNvZGVjIGlzIHVzZWRcbiAgLy8gdGhlbiB0aGUgYnl0ZXMgc2VudCBpcyAwIGluIHRoZSBvdXRib3VuZC1ydHBcbiAgLy8gc28gd2UgYXJlIGZvcmNpbmcgaDI2NCBjb2RlYyBmb3IgaXBhZHNcbiAgaWYgKG9zTmFtZSA9PT0gJ2lwYWRvcycpIHJldHVybiAnaDI2NCc7XG4gIGlmIChvc05hbWUgPT09ICdhbmRyb2lkJykgcmV0dXJuICd2cDgnO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcbiIsImltcG9ydCB7IENhbGxFdmVudExpc3RlbmVyLCBFdmVudFR5cGVzIH0gZnJvbSAnLi4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFNmdUV2ZW50IH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuZXhwb3J0IHR5cGUgU2Z1RXZlbnRLaW5kcyA9IE5vbk51bGxhYmxlPFNmdUV2ZW50WydldmVudFBheWxvYWQnXVsnb25lb2ZLaW5kJ10+O1xuZXhwb3J0IHR5cGUgQWxsU2Z1RXZlbnRzID0ge1xuICBbSyBpbiBTZnVFdmVudEtpbmRzXTogSyBleHRlbmRzIGtleW9mIEV4dHJhY3Q8XG4gICAgU2Z1RXZlbnRbJ2V2ZW50UGF5bG9hZCddLFxuICAgIHsgb25lb2ZLaW5kOiBLIH1cbiAgPlxuICAgID8gRXh0cmFjdDxTZnVFdmVudFsnZXZlbnRQYXlsb2FkJ10sIHsgb25lb2ZLaW5kOiBLIH0+W0tdXG4gICAgOiBuZXZlcjtcbn07XG5cbmV4cG9ydCB0eXBlIERpc3BhdGNoYWJsZU1lc3NhZ2U8SyBleHRlbmRzIFNmdUV2ZW50S2luZHM+ID0ge1xuICBldmVudFBheWxvYWQ6IHtcbiAgICBvbmVvZktpbmQ6IEs7XG4gIH0gJiB7XG4gICAgW0tleSBpbiBLXTogQWxsU2Z1RXZlbnRzW0tleV07XG4gIH07XG59O1xuXG5jb25zdCBzZnVFdmVudEtpbmRzOiB7IFtrZXkgaW4gU2Z1RXZlbnRLaW5kc106IHVuZGVmaW5lZCB9ID0ge1xuICBzdWJzY3JpYmVyT2ZmZXI6IHVuZGVmaW5lZCxcbiAgcHVibGlzaGVyQW5zd2VyOiB1bmRlZmluZWQsXG4gIGNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZDogdW5kZWZpbmVkLFxuICBhdWRpb0xldmVsQ2hhbmdlZDogdW5kZWZpbmVkLFxuICBpY2VUcmlja2xlOiB1bmRlZmluZWQsXG4gIGNoYW5nZVB1Ymxpc2hRdWFsaXR5OiB1bmRlZmluZWQsXG4gIHBhcnRpY2lwYW50Sm9pbmVkOiB1bmRlZmluZWQsXG4gIHBhcnRpY2lwYW50TGVmdDogdW5kZWZpbmVkLFxuICBkb21pbmFudFNwZWFrZXJDaGFuZ2VkOiB1bmRlZmluZWQsXG4gIGpvaW5SZXNwb25zZTogdW5kZWZpbmVkLFxuICBoZWFsdGhDaGVja1Jlc3BvbnNlOiB1bmRlZmluZWQsXG4gIHRyYWNrUHVibGlzaGVkOiB1bmRlZmluZWQsXG4gIHRyYWNrVW5wdWJsaXNoZWQ6IHVuZGVmaW5lZCxcbiAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgY2FsbEdyYW50c1VwZGF0ZWQ6IHVuZGVmaW5lZCxcbiAgZ29Bd2F5OiB1bmRlZmluZWQsXG4gIGljZVJlc3RhcnQ6IHVuZGVmaW5lZCxcbiAgcGluc1VwZGF0ZWQ6IHVuZGVmaW5lZCxcbiAgY2FsbEVuZGVkOiB1bmRlZmluZWQsXG4gIHBhcnRpY2lwYW50VXBkYXRlZDogdW5kZWZpbmVkLFxuICBwYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlOiB1bmRlZmluZWQsXG59O1xuXG5leHBvcnQgY29uc3QgaXNTZnVFdmVudCA9IChcbiAgZXZlbnROYW1lOiBTZnVFdmVudEtpbmRzIHwgRXZlbnRUeXBlcyxcbik6IGV2ZW50TmFtZSBpcyBTZnVFdmVudEtpbmRzID0+IHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzZnVFdmVudEtpbmRzLCBldmVudE5hbWUpO1xufTtcblxuZXhwb3J0IGNsYXNzIERpc3BhdGNoZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlciA9IGdldExvZ2dlcihbJ0Rpc3BhdGNoZXInXSk7XG4gIHByaXZhdGUgc3Vic2NyaWJlcnM6IFBhcnRpYWw8XG4gICAgUmVjb3JkPFNmdUV2ZW50S2luZHMsIENhbGxFdmVudExpc3RlbmVyPGFueT5bXSB8IHVuZGVmaW5lZD5cbiAgPiA9IHt9O1xuXG4gIGRpc3BhdGNoID0gPEsgZXh0ZW5kcyBTZnVFdmVudEtpbmRzPihcbiAgICBtZXNzYWdlOiBEaXNwYXRjaGFibGVNZXNzYWdlPEs+LFxuICAgIGxvZ1RhZzogc3RyaW5nID0gJzAnLFxuICApID0+IHtcbiAgICBjb25zdCBldmVudEtpbmQgPSBtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQ7XG4gICAgaWYgKCFldmVudEtpbmQpIHJldHVybjtcbiAgICBjb25zdCBwYXlsb2FkID0gbWVzc2FnZS5ldmVudFBheWxvYWRbZXZlbnRLaW5kXTtcbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgRGlzcGF0Y2hpbmcgJHtldmVudEtpbmR9LCB0YWc9JHtsb2dUYWd9YCwgcGF5bG9hZCk7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5zdWJzY3JpYmVyc1tldmVudEtpbmRdO1xuICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBmbiBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZuKHBheWxvYWQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsICdMaXN0ZW5lciBmYWlsZWQgd2l0aCBlcnJvcicsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBvbiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsU2Z1RXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgZm46IENhbGxFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICAodGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID8/PSBbXSkucHVzaChmbiBhcyBuZXZlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMub2ZmKGV2ZW50TmFtZSwgZm4pO1xuICAgIH07XG4gIH07XG5cbiAgb2ZmID0gPEUgZXh0ZW5kcyBrZXlvZiBBbGxTZnVFdmVudHM+KFxuICAgIGV2ZW50TmFtZTogRSxcbiAgICBmbjogQ2FsbEV2ZW50TGlzdGVuZXI8RT4sXG4gICkgPT4ge1xuICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9ICh0aGlzLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0gfHwgW10pLmZpbHRlcihcbiAgICAgIChmKSA9PiBmICE9PSBmbixcbiAgICApO1xuICB9O1xuXG4gIG9mZkFsbCA9IChldmVudE5hbWU/OiBTZnVFdmVudEtpbmRzKSA9PiB7XG4gICAgaWYgKGV2ZW50TmFtZSkge1xuICAgICAgdGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB7fTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBSZXBsYXlTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBJQ0VUcmlja2xlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgUGVlclR5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuLyoqXG4gKiBBIGJ1ZmZlciBmb3IgSUNFIENhbmRpZGF0ZXMuIFVzZWQgZm9yIElDRSBUcmlja2xlOlxuICogLSBodHRwczovL2Jsb2dnZWVrLm1lL3dlYnJ0Y2dsb3NzYXJ5L3RyaWNrbGUtaWNlL1xuICovXG5leHBvcnQgY2xhc3MgSWNlVHJpY2tsZUJ1ZmZlciB7XG4gIHJlYWRvbmx5IHN1YnNjcmliZXJDYW5kaWRhdGVzID0gbmV3IFJlcGxheVN1YmplY3Q8SUNFVHJpY2tsZT4oKTtcbiAgcmVhZG9ubHkgcHVibGlzaGVyQ2FuZGlkYXRlcyA9IG5ldyBSZXBsYXlTdWJqZWN0PElDRVRyaWNrbGU+KCk7XG5cbiAgcHVzaCA9IChpY2VUcmlja2xlOiBJQ0VUcmlja2xlKSA9PiB7XG4gICAgaWYgKGljZVRyaWNrbGUucGVlclR5cGUgPT09IFBlZXJUeXBlLlNVQlNDUklCRVIpIHtcbiAgICAgIHRoaXMuc3Vic2NyaWJlckNhbmRpZGF0ZXMubmV4dChpY2VUcmlja2xlKTtcbiAgICB9IGVsc2UgaWYgKGljZVRyaWNrbGUucGVlclR5cGUgPT09IFBlZXJUeXBlLlBVQkxJU0hFUl9VTlNQRUNJRklFRCkge1xuICAgICAgdGhpcy5wdWJsaXNoZXJDYW5kaWRhdGVzLm5leHQoaWNlVHJpY2tsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcihbJ3NmdS1jbGllbnQnXSk7XG4gICAgICBsb2dnZXIoJ3dhcm4nLCBgSUNFVHJpY2tsZSwgVW5rbm93biBwZWVyIHR5cGVgLCBpY2VUcmlja2xlKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBJQ0VUcmlja2xlIH0gZnJvbSAnLi4vLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEljZUNhbmRpZGF0ZShcbiAgY2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGUsXG4pOiBJQ0VUcmlja2xlWydpY2VDYW5kaWRhdGUnXSB7XG4gIGlmICghY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQpIHtcbiAgICAvLyByZWFjdC1uYXRpdmUtd2VicnRjIGRvZXNuJ3QgaW5jbHVkZSB1c2VybmFtZUZyYWdtZW50IGluIHRoZSBjYW5kaWRhdGVcbiAgICBjb25zdCBzcGxpdHRlZENhbmRpZGF0ZSA9IGNhbmRpZGF0ZS5jYW5kaWRhdGUuc3BsaXQoJyAnKTtcbiAgICBjb25zdCB1ZnJhZ0luZGV4ID1cbiAgICAgIHNwbGl0dGVkQ2FuZGlkYXRlLmZpbmRJbmRleCgoczogc3RyaW5nKSA9PiBzID09PSAndWZyYWcnKSArIDE7XG4gICAgY29uc3QgdXNlcm5hbWVGcmFnbWVudCA9IHNwbGl0dGVkQ2FuZGlkYXRlW3VmcmFnSW5kZXhdO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IC4uLmNhbmRpZGF0ZSwgdXNlcm5hbWVGcmFnbWVudCB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY2FuZGlkYXRlLnRvSlNPTigpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUHVibGlzaE9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBUYXJnZXRSZXNvbHV0aW9uUmVzcG9uc2UgfSBmcm9tICcuLi9nZW4vc2hpbXMnO1xuXG5leHBvcnQgdHlwZSBPcHRpbWFsVmlkZW9MYXllciA9IFJUQ1J0cEVuY29kaW5nUGFyYW1ldGVycyAmIHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59O1xuXG5jb25zdCBERUZBVUxUX0JJVFJBVEUgPSAxMjUwMDAwO1xuY29uc3QgZGVmYXVsdFRhcmdldFJlc29sdXRpb246IFRhcmdldFJlc29sdXRpb25SZXNwb25zZSA9IHtcbiAgYml0cmF0ZTogREVGQVVMVF9CSVRSQVRFLFxuICB3aWR0aDogMTI4MCxcbiAgaGVpZ2h0OiA3MjAsXG59O1xuXG5jb25zdCBkZWZhdWx0Qml0cmF0ZVBlclJpZDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcbiAgcTogMzAwMDAwLFxuICBoOiA3NTAwMDAsXG4gIGY6IERFRkFVTFRfQklUUkFURSxcbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgbW9zdCBvcHRpbWFsIHZpZGVvIGxheWVycyBmb3Igc2ltdWxjYXN0aW5nXG4gKiBmb3IgdGhlIGdpdmVuIHRyYWNrLlxuICpcbiAqIEBwYXJhbSB2aWRlb1RyYWNrIHRoZSB2aWRlbyB0cmFjayB0byBmaW5kIG9wdGltYWwgbGF5ZXJzIGZvci5cbiAqIEBwYXJhbSB0YXJnZXRSZXNvbHV0aW9uIHRoZSBleHBlY3RlZCB0YXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSBwdWJsaXNoT3B0aW9ucyB0aGUgcHVibGlzaCBvcHRpb25zIGZvciB0aGUgdHJhY2suXG4gKi9cbmV4cG9ydCBjb25zdCBmaW5kT3B0aW1hbFZpZGVvTGF5ZXJzID0gKFxuICB2aWRlb1RyYWNrOiBNZWRpYVN0cmVhbVRyYWNrLFxuICB0YXJnZXRSZXNvbHV0aW9uOiBUYXJnZXRSZXNvbHV0aW9uUmVzcG9uc2UgPSBkZWZhdWx0VGFyZ2V0UmVzb2x1dGlvbixcbiAgcHVibGlzaE9wdGlvbnM/OiBQdWJsaXNoT3B0aW9ucyxcbikgPT4ge1xuICBjb25zdCBvcHRpbWFsVmlkZW9MYXllcnM6IE9wdGltYWxWaWRlb0xheWVyW10gPSBbXTtcbiAgY29uc3Qgc2V0dGluZ3MgPSB2aWRlb1RyYWNrLmdldFNldHRpbmdzKCk7XG4gIGNvbnN0IHsgd2lkdGg6IHcgPSAwLCBoZWlnaHQ6IGggPSAwIH0gPSBzZXR0aW5ncztcbiAgY29uc3QgeyBwcmVmZXJyZWRCaXRyYXRlLCBiaXRyYXRlRG93bnNjYWxlRmFjdG9yID0gMiB9ID0gcHVibGlzaE9wdGlvbnMgfHwge307XG4gIGNvbnN0IG1heEJpdHJhdGUgPSBnZXRDb21wdXRlZE1heEJpdHJhdGUoXG4gICAgdGFyZ2V0UmVzb2x1dGlvbixcbiAgICB3LFxuICAgIGgsXG4gICAgcHJlZmVycmVkQml0cmF0ZSxcbiAgKTtcbiAgbGV0IGRvd25zY2FsZUZhY3RvciA9IDE7XG4gIGxldCBiaXRyYXRlRmFjdG9yID0gMTtcbiAgWydmJywgJ2gnLCAncSddLmZvckVhY2goKHJpZCkgPT4ge1xuICAgIC8vIFJldmVyc2luZyB0aGUgb3JkZXIgW2YsIGgsIHFdIHRvIFtxLCBoLCBmXSBhcyBDaHJvbWUgdXNlcyBlbmNvZGluZyBpbmRleFxuICAgIC8vIHdoZW4gZGVjaWRpbmcgd2hpY2ggbGF5ZXIgdG8gZGlzYWJsZSB3aGVuIENQVSBvciBiYW5kd2lkdGggaXMgY29uc3RyYWluZWQuXG4gICAgLy8gRW5jb2RpbmdzIHNob3VsZCBiZSBvcmRlcmVkIGluIGluY3JlYXNpbmcgc3BhdGlhbCByZXNvbHV0aW9uIG9yZGVyLlxuICAgIG9wdGltYWxWaWRlb0xheWVycy51bnNoaWZ0KHtcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIHJpZCxcbiAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKHcgLyBkb3duc2NhbGVGYWN0b3IpLFxuICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKGggLyBkb3duc2NhbGVGYWN0b3IpLFxuICAgICAgbWF4Qml0cmF0ZTpcbiAgICAgICAgTWF0aC5yb3VuZChtYXhCaXRyYXRlIC8gYml0cmF0ZUZhY3RvcikgfHwgZGVmYXVsdEJpdHJhdGVQZXJSaWRbcmlkXSxcbiAgICAgIHNjYWxlUmVzb2x1dGlvbkRvd25CeTogZG93bnNjYWxlRmFjdG9yLFxuICAgICAgbWF4RnJhbWVyYXRlOiAzMCxcbiAgICB9KTtcbiAgICBkb3duc2NhbGVGYWN0b3IgKj0gMjtcbiAgICBiaXRyYXRlRmFjdG9yICo9IGJpdHJhdGVEb3duc2NhbGVGYWN0b3I7XG4gIH0pO1xuXG4gIC8vIGZvciBzaW1wbGljaXR5LCB3ZSBzdGFydCB3aXRoIGFsbCBsYXllcnMgZW5hYmxlZCwgdGhlbiB0aGlzIGZ1bmN0aW9uXG4gIC8vIHdpbGwgY2xlYXIvcmVhc3NpZ24gdGhlIGxheWVycyB0aGF0IGFyZSBub3QgbmVlZGVkXG4gIHJldHVybiB3aXRoU2ltdWxjYXN0Q29uc3RyYWludHMoc2V0dGluZ3MsIG9wdGltYWxWaWRlb0xheWVycyk7XG59O1xuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBtYXhpbXVtIGJpdHJhdGUgZm9yIGEgZ2l2ZW4gcmVzb2x1dGlvbi5cbiAqIElmIHRoZSBjdXJyZW50IHJlc29sdXRpb24gaXMgbG93ZXIgdGhhbiB0aGUgdGFyZ2V0IHJlc29sdXRpb24sXG4gKiB3ZSB3YW50IHRvIHByb3BvcnRpb25hbGx5IHJlZHVjZSB0aGUgdGFyZ2V0IGJpdHJhdGUuXG4gKiBJZiB0aGUgY3VycmVudCByZXNvbHV0aW9uIGlzIGhpZ2hlciB0aGFuIHRoZSB0YXJnZXQgcmVzb2x1dGlvbixcbiAqIHdlIHdhbnQgdG8gdXNlIHRoZSB0YXJnZXQgYml0cmF0ZS5cbiAqXG4gKiBAcGFyYW0gdGFyZ2V0UmVzb2x1dGlvbiB0aGUgdGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcGFyYW0gY3VycmVudFdpZHRoIHRoZSBjdXJyZW50IHdpZHRoIG9mIHRoZSB0cmFjay5cbiAqIEBwYXJhbSBjdXJyZW50SGVpZ2h0IHRoZSBjdXJyZW50IGhlaWdodCBvZiB0aGUgdHJhY2suXG4gKiBAcGFyYW0gcHJlZmVycmVkQml0cmF0ZSB0aGUgcHJlZmVycmVkIGJpdHJhdGUgZm9yIHRoZSB0cmFjay5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldENvbXB1dGVkTWF4Qml0cmF0ZSA9IChcbiAgdGFyZ2V0UmVzb2x1dGlvbjogVGFyZ2V0UmVzb2x1dGlvblJlc3BvbnNlLFxuICBjdXJyZW50V2lkdGg6IG51bWJlcixcbiAgY3VycmVudEhlaWdodDogbnVtYmVyLFxuICBwcmVmZXJyZWRCaXRyYXRlOiBudW1iZXIgfCB1bmRlZmluZWQsXG4pOiBudW1iZXIgPT4ge1xuICAvLyBpZiB0aGUgY3VycmVudCByZXNvbHV0aW9uIGlzIGxvd2VyIHRoYW4gdGhlIHRhcmdldCByZXNvbHV0aW9uLFxuICAvLyB3ZSB3YW50IHRvIHByb3BvcnRpb25hbGx5IHJlZHVjZSB0aGUgdGFyZ2V0IGJpdHJhdGVcbiAgY29uc3Qge1xuICAgIHdpZHRoOiB0YXJnZXRXaWR0aCxcbiAgICBoZWlnaHQ6IHRhcmdldEhlaWdodCxcbiAgICBiaXRyYXRlOiB0YXJnZXRCaXRyYXRlLFxuICB9ID0gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgY29uc3QgYml0cmF0ZSA9IHByZWZlcnJlZEJpdHJhdGUgfHwgdGFyZ2V0Qml0cmF0ZTtcbiAgaWYgKGN1cnJlbnRXaWR0aCA8IHRhcmdldFdpZHRoIHx8IGN1cnJlbnRIZWlnaHQgPCB0YXJnZXRIZWlnaHQpIHtcbiAgICBjb25zdCBjdXJyZW50UGl4ZWxzID0gY3VycmVudFdpZHRoICogY3VycmVudEhlaWdodDtcbiAgICBjb25zdCB0YXJnZXRQaXhlbHMgPSB0YXJnZXRXaWR0aCAqIHRhcmdldEhlaWdodDtcbiAgICBjb25zdCByZWR1Y3Rpb25GYWN0b3IgPSBjdXJyZW50UGl4ZWxzIC8gdGFyZ2V0UGl4ZWxzO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKGJpdHJhdGUgKiByZWR1Y3Rpb25GYWN0b3IpO1xuICB9XG4gIHJldHVybiBiaXRyYXRlO1xufTtcblxuLyoqXG4gKiBCcm93c2VycyBoYXZlIGRpZmZlcmVudCBzaW11bGNhc3QgY29uc3RyYWludHMgZm9yIGRpZmZlcmVudCB2aWRlbyByZXNvbHV0aW9ucy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIG1vZGlmaWVzIHRoZSBwcm92aWRlZCBsaXN0IG9mIHZpZGVvIGxheWVycyBhY2NvcmRpbmcgdG8gdGhlXG4gKiBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHNpbXVsY2FzdCBjb25zdHJhaW50cyBpbiB0aGUgQ2hyb21pdW0gYmFzZWQgYnJvd3NlcnMuXG4gKlxuICogaHR0cHM6Ly9jaHJvbWl1bS5nb29nbGVzb3VyY2UuY29tL2V4dGVybmFsL3dlYnJ0Yy8rL3JlZnMvaGVhZHMvbWFpbi9tZWRpYS9lbmdpbmUvc2ltdWxjYXN0LmNjIzkwXG4gKi9cbmNvbnN0IHdpdGhTaW11bGNhc3RDb25zdHJhaW50cyA9IChcbiAgc2V0dGluZ3M6IE1lZGlhVHJhY2tTZXR0aW5ncyxcbiAgb3B0aW1hbFZpZGVvTGF5ZXJzOiBPcHRpbWFsVmlkZW9MYXllcltdLFxuKSA9PiB7XG4gIGxldCBsYXllcnM6IE9wdGltYWxWaWRlb0xheWVyW107XG5cbiAgY29uc3Qgc2l6ZSA9IE1hdGgubWF4KHNldHRpbmdzLndpZHRoIHx8IDAsIHNldHRpbmdzLmhlaWdodCB8fCAwKTtcbiAgaWYgKHNpemUgPD0gMzIwKSB7XG4gICAgLy8gcHJvdmlkZSBvbmx5IG9uZSBsYXllciAzMjB4MjQwIChxKSwgdGhlIG9uZSB3aXRoIHRoZSBoaWdoZXN0IHF1YWxpdHlcbiAgICBsYXllcnMgPSBvcHRpbWFsVmlkZW9MYXllcnMuZmlsdGVyKChsYXllcikgPT4gbGF5ZXIucmlkID09PSAnZicpO1xuICB9IGVsc2UgaWYgKHNpemUgPD0gNjQwKSB7XG4gICAgLy8gcHJvdmlkZSB0d28gbGF5ZXJzLCAxNjB4MTIwIChxKSBhbmQgNjQweDQ4MCAoaClcbiAgICBsYXllcnMgPSBvcHRpbWFsVmlkZW9MYXllcnMuZmlsdGVyKChsYXllcikgPT4gbGF5ZXIucmlkICE9PSAnaCcpO1xuICB9IGVsc2Uge1xuICAgIC8vIHByb3ZpZGUgdGhyZWUgbGF5ZXJzIGZvciBzaXplcyA+IDY0MHg0ODBcbiAgICBsYXllcnMgPSBvcHRpbWFsVmlkZW9MYXllcnM7XG4gIH1cblxuICBjb25zdCByaWRNYXBwaW5nID0gWydxJywgJ2gnLCAnZiddO1xuICByZXR1cm4gbGF5ZXJzLm1hcDxPcHRpbWFsVmlkZW9MYXllcj4oKGxheWVyLCBpbmRleCkgPT4gKHtcbiAgICAuLi5sYXllcixcbiAgICByaWQ6IHJpZE1hcHBpbmdbaW5kZXhdLCAvLyByZWFzc2lnbiByaWRcbiAgfSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRPcHRpbWFsU2NyZWVuU2hhcmluZ0xheWVycyA9IChcbiAgdmlkZW9UcmFjazogTWVkaWFTdHJlYW1UcmFjayxcbiAgcHVibGlzaE9wdGlvbnM/OiBQdWJsaXNoT3B0aW9ucyxcbiAgZGVmYXVsdE1heEJpdHJhdGUgPSAzMDAwMDAwLFxuKTogT3B0aW1hbFZpZGVvTGF5ZXJbXSA9PiB7XG4gIGNvbnN0IHsgc2NyZWVuU2hhcmVTZXR0aW5nczogcHJlZmVyZW5jZXMgfSA9IHB1Ymxpc2hPcHRpb25zIHx8IHt9O1xuICBjb25zdCBzZXR0aW5ncyA9IHZpZGVvVHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICByaWQ6ICdxJywgLy8gc2luZ2xlIHRyYWNrLCBzdGFydCBmcm9tICdxJ1xuICAgICAgd2lkdGg6IHNldHRpbmdzLndpZHRoIHx8IDAsXG4gICAgICBoZWlnaHQ6IHNldHRpbmdzLmhlaWdodCB8fCAwLFxuICAgICAgc2NhbGVSZXNvbHV0aW9uRG93bkJ5OiAxLFxuICAgICAgbWF4Qml0cmF0ZTogcHJlZmVyZW5jZXM/Lm1heEJpdHJhdGUgPz8gZGVmYXVsdE1heEJpdHJhdGUsXG4gICAgICBtYXhGcmFtZXJhdGU6IHByZWZlcmVuY2VzPy5tYXhGcmFtZXJhdGUgPz8gMzAsXG4gICAgfSxcbiAgXTtcbn07XG4iLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuXG5leHBvcnQgY29uc3QgZW5zdXJlRXhoYXVzdGVkID0gKHg6IG5ldmVyLCBtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgZ2V0TG9nZ2VyKFsnaGVscGVycyddKSgnd2FybicsIG1lc3NhZ2UsIHgpO1xufTtcbiIsImltcG9ydCB7IFRyYWNrVHlwZSB9IGZyb20gJy4uLy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBUcmFja011dGVUeXBlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgZW5zdXJlRXhoYXVzdGVkIH0gZnJvbSAnLi4vLi4vaGVscGVycy9lbnN1cmVFeGhhdXN0ZWQnO1xuXG5leHBvcnQgY29uc3QgdHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSA9IChcbiAgdHJhY2tUeXBlOiBUcmFja1R5cGUsXG4pOlxuICB8ICdhdWRpb1N0cmVhbSdcbiAgfCAndmlkZW9TdHJlYW0nXG4gIHwgJ3NjcmVlblNoYXJlU3RyZWFtJ1xuICB8ICdzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtJ1xuICB8IHVuZGVmaW5lZCA9PiB7XG4gIHN3aXRjaCAodHJhY2tUeXBlKSB7XG4gICAgY2FzZSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFOlxuICAgICAgcmV0dXJuICdzY3JlZW5TaGFyZVN0cmVhbSc7XG4gICAgY2FzZSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPOlxuICAgICAgcmV0dXJuICdzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtJztcbiAgICBjYXNlIFRyYWNrVHlwZS5WSURFTzpcbiAgICAgIHJldHVybiAndmlkZW9TdHJlYW0nO1xuICAgIGNhc2UgVHJhY2tUeXBlLkFVRElPOlxuICAgICAgcmV0dXJuICdhdWRpb1N0cmVhbSc7XG4gICAgY2FzZSBUcmFja1R5cGUuVU5TUEVDSUZJRUQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYWNrIHR5cGUgaXMgdW5zcGVjaWZpZWQnKTtcbiAgICBkZWZhdWx0OlxuICAgICAgZW5zdXJlRXhoYXVzdGVkKHRyYWNrVHlwZSwgJ1Vua25vd24gdHJhY2sgdHlwZScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgbXV0ZVR5cGVUb1RyYWNrVHlwZSA9IChcbiAgbXV0ZVR5cGU6IFRyYWNrTXV0ZVR5cGUsXG4pOiBUcmFja1R5cGUgfCB1bmRlZmluZWQgPT4ge1xuICBzd2l0Y2ggKG11dGVUeXBlKSB7XG4gICAgY2FzZSAnYXVkaW8nOlxuICAgICAgcmV0dXJuIFRyYWNrVHlwZS5BVURJTztcbiAgICBjYXNlICd2aWRlbyc6XG4gICAgICByZXR1cm4gVHJhY2tUeXBlLlZJREVPO1xuICAgIGNhc2UgJ3NjcmVlbnNoYXJlJzpcbiAgICAgIHJldHVybiBUcmFja1R5cGUuU0NSRUVOX1NIQVJFO1xuICAgIGNhc2UgJ3NjcmVlbnNoYXJlX2F1ZGlvJzpcbiAgICAgIHJldHVybiBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPO1xuICAgIGRlZmF1bHQ6XG4gICAgICBlbnN1cmVFeGhhdXN0ZWQobXV0ZVR5cGUsICdVbmtub3duIG11dGUgdHlwZScpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgdG9UcmFja1R5cGUgPSAodHJhY2tUeXBlOiBzdHJpbmcpOiBUcmFja1R5cGUgfCB1bmRlZmluZWQgPT4ge1xuICBzd2l0Y2ggKHRyYWNrVHlwZSkge1xuICAgIGNhc2UgJ1RSQUNLX1RZUEVfQVVESU8nOlxuICAgICAgcmV0dXJuIFRyYWNrVHlwZS5BVURJTztcbiAgICBjYXNlICdUUkFDS19UWVBFX1ZJREVPJzpcbiAgICAgIHJldHVybiBUcmFja1R5cGUuVklERU87XG4gICAgY2FzZSAnVFJBQ0tfVFlQRV9TQ1JFRU5fU0hBUkUnOlxuICAgICAgcmV0dXJuIFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkU7XG4gICAgY2FzZSAnVFJBQ0tfVFlQRV9TQ1JFRU5fU0hBUkVfQVVESU8nOlxuICAgICAgcmV0dXJuIFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU87XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG4iLCJpbnRlcmZhY2UgUGVuZGluZ1Byb21pc2Uge1xuICBwcm9taXNlOiBQcm9taXNlPHVua25vd24+O1xuICBvbkNvbnRpbnVlZDogKCkgPT4gdm9pZDtcbn1cblxudHlwZSBBc3luY1dyYXBwZXI8UCBleHRlbmRzIHVua25vd25bXSwgVD4gPSAoXG4gIHRhZzogc3RyaW5nIHwgc3ltYm9sLFxuICBjYjogKC4uLmFyZ3M6IFApID0+IFByb21pc2U8VD4sXG4pID0+IHtcbiAgY2I6ICgpID0+IFByb21pc2U8VD47XG4gIG9uQ29udGludWVkOiAoKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBSdW5zIGFzeW5jIGZ1bmN0aW9ucyBzZXJpYWxseS4gVXNlZnVsIGZvciB3cmFwcGluZyBhc3luYyBhY3Rpb25zIHRoYXRcbiAqIHNob3VsZCBuZXZlciBydW4gc2ltdWx0YW5lb3VzbHk6IGlmIG1hcmtlZCB3aXRoIHRoZSBzYW1lIHRhZywgZnVuY3Rpb25zXG4gKiB3aWxsIHJ1biBvbmUgYWZ0ZXIgYW5vdGhlci5cbiAqXG4gKiBAcGFyYW0gdGFnIEFzeW5jIGZ1bmN0aW9ucyB3aXRoIHRoZSBzYW1lIHRhZyB3aWxsIHJ1biBzZXJpYWxseS4gQXN5bmMgZnVuY3Rpb25zXG4gKiB3aXRoIGRpZmZlcmVudCB0YWdzIGNhbiBydW4gaW4gcGFyYWxsZWwuXG4gKiBAcGFyYW0gY2IgQXN5bmMgZnVuY3Rpb24gdG8gcnVuLlxuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYXN5bmMgZnVuY3Rpb25zIHJldHVybnMuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRob3V0Q29uY3VycmVuY3kgPSBjcmVhdGVSdW5uZXIod3JhcFdpdGhDb250aW51YXRpb25UcmFja2luZyk7XG5cbi8qKlxuICogUnVucyBhc3luYyBmdW5jdGlvbnMgc2VyaWFsbHksIGFuZCBjYW5jZWxzIGFsbCBvdGhlciBhY3Rpb25zIHdpdGggdGhlIHNhbWUgdGFnXG4gKiB3aGVuIGEgbmV3IGFjdGlvbiBpcyBzY2hlZHVsZWQuIFVzZWZ1bCBmb3Igd3JhcHBpbmcgYXN5bmMgYWN0aW9ucyB0aGF0IG92ZXJyaWRlXG4gKiBlYWNoIG90aGVyIChlLmcuIGVuYWJsaW5nIGFuZCBkaXNhYmxpbmcgY2FtZXJhKS5cbiAqXG4gKiBJZiBhbiBhc3luYyBmdW5jdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQgYW5kIHdhcyBjYW5jZWxlZCwgaXQgd2lsbCBuZXZlciBydW4uXG4gKiBJZiBhbiBhc3luYyBmdW5jdGlvbiBpcyBhbHJlYWR5IHJ1bm5pbmcgYW5kIHdhcyBjYW5jZWxlZCwgaXQgd2lsbCBiZSBub3RpZmllZFxuICogdmlhIGFuIGFib3J0IHNpZ25hbCBwYXNzZWQgYXMgYW4gYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHRhZyBBc3luYyBmdW5jdGlvbnMgd2l0aCB0aGUgc2FtZSB0YWcgd2lsbCBydW4gc2VyaWFsbHkgYW5kIGFyZSBjYW5jZWxlZFxuICogd2hlbiBhIG5ldyBhY3Rpb24gd2l0aCB0aGUgc2FtZSB0YWcgaXMgc2NoZWR1bGVkLlxuICogQHBhcmFtIGNiIEFzeW5jIGZ1bmN0aW9uIHRvIHJ1bi4gUmVjZWl2ZXMgQWJvcnRTaWduYWwgYXMgdGhlIG9ubHkgYXJndW1lbnQuXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhc3luYyBmdW5jdGlvbnMgcmV0dXJucy4gSWYgdGhlIGZ1bmN0aW9uIGRpZG4ndFxuICogc3RhcnQgYW5kIHdhcyBjYW5jZWxlZCwgd2lsbCByZXNvbHZlIHdpdGggJ2NhbmNlbGVkJy4gSWYgdGhlIGZ1bmN0aW9uIHN0YXJ0ZWQgdG8gcnVuLFxuICogaXQncyB1cCB0byB0aGUgZnVuY3Rpb24gdG8gZGVjaWRlIGhvdyB0byByZWFjdCB0byBjYW5jZWxhdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhDYW5jZWxsYXRpb24gPSBjcmVhdGVSdW5uZXIod3JhcFdpdGhDYW5jZWxsYXRpb24pO1xuXG5jb25zdCBwZW5kaW5nUHJvbWlzZXMgPSBuZXcgTWFwPHN0cmluZyB8IHN5bWJvbCwgUGVuZGluZ1Byb21pc2U+KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNQZW5kaW5nKHRhZzogc3RyaW5nIHwgc3ltYm9sKSB7XG4gIHJldHVybiBwZW5kaW5nUHJvbWlzZXMuaGFzKHRhZyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXR0bGVkKHRhZzogc3RyaW5nIHwgc3ltYm9sKSB7XG4gIGF3YWl0IHBlbmRpbmdQcm9taXNlcy5nZXQodGFnKT8ucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGNvbW1vbiBmdW5jdGlvbmFsaXR5IG9mIHJ1bm5pbmcgYXN5bmMgZnVuY3Rpb25zIHNlcmlhbGx5LCBieSBjaGFpbmluZ1xuICogdGhlaXIgcHJvbWlzZXMgb25lIGFmdGVyIGFub3RoZXIuXG4gKlxuICogQmVmb3JlIHJ1bm5pbmcsIGFzeW5jIGZ1bmN0aW9uIGlzIFwid3JhcHBlZFwiIHVzaW5nIHRoZSBwcm92aWRlZCB3cmFwcGVyLiBUaGlzIHdyYXBwZXJcbiAqIGNhbiBhZGQgYWRkaXRpb25hbCBzdGVwcyB0byBydW4gYmVmb3JlIG9yIGFmdGVyIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBXaGVuIGFzeW5jIGZ1bmN0aW9uIGlzIHNjaGVkdWxlZCB0byBydW4sIHRoZSBwcmV2aW91cyBmdW5jdGlvbiBpcyBub3RpZmllZFxuICogYnkgY2FsbGluZyB0aGUgYXNzb2NpYXRlZCBvbkNvbnRpbnVlZCBjYWxsYmFjay4gVGhpcyBiZWhhdmlvciBvZiB0aGlzIGNhbGxiYWNrXG4gKiBpcyBkZWZpbmVkIGJ5IHRoZSB3cmFwcGVyLlxuICovXG5mdW5jdGlvbiBjcmVhdGVSdW5uZXI8UCBleHRlbmRzIHVua25vd25bXSwgVD4od3JhcHBlcjogQXN5bmNXcmFwcGVyPFAsIFQ+KSB7XG4gIHJldHVybiBmdW5jdGlvbiBydW4odGFnOiBzdHJpbmcgfCBzeW1ib2wsIGNiOiAoLi4uYXJnczogUCkgPT4gUHJvbWlzZTxUPikge1xuICAgIGNvbnN0IHsgY2I6IHdyYXBwZWQsIG9uQ29udGludWVkIH0gPSB3cmFwcGVyKHRhZywgY2IpO1xuICAgIGNvbnN0IHBlbmRpbmcgPSBwZW5kaW5nUHJvbWlzZXMuZ2V0KHRhZyk7XG4gICAgcGVuZGluZz8ub25Db250aW51ZWQoKTtcbiAgICBjb25zdCBwcm9taXNlID0gcGVuZGluZ1xuICAgICAgPyBwZW5kaW5nLnByb21pc2UudGhlbih3cmFwcGVkLCB3cmFwcGVkKVxuICAgICAgOiB3cmFwcGVkKCk7XG4gICAgcGVuZGluZ1Byb21pc2VzLnNldCh0YWcsIHsgcHJvbWlzZSwgb25Db250aW51ZWQgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG59XG5cbi8qKlxuICogV3JhcHMgYW4gYXN5bmMgZnVuY3Rpb24gd2l0aCBhbiBhZGRpdGlvbmFsIHN0ZXAgcnVuIGFmdGVyIHRoZSBmdW5jdGlvbjpcbiAqIGlmIHRoZSBmdW5jdGlvbiBpcyB0aGUgbGFzdCBpbiB0aGUgcXVldWUsIGl0IGNsZWFucyB1cCB0aGUgd2hvbGUgY2hhaW5cbiAqIG9mIHByb21pc2VzIGFmdGVyIGZpbmlzaGluZy5cbiAqL1xuZnVuY3Rpb24gd3JhcFdpdGhDb250aW51YXRpb25UcmFja2luZzxUPihcbiAgdGFnOiBzdHJpbmcgfCBzeW1ib2wsXG4gIGNiOiAoKSA9PiBQcm9taXNlPFQ+LFxuKSB7XG4gIGxldCBoYXNDb250aW51YXRpb24gPSBmYWxzZTtcbiAgY29uc3Qgd3JhcHBlZCA9ICgpID0+XG4gICAgY2IoKS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGlmICghaGFzQ29udGludWF0aW9uKSB7XG4gICAgICAgIHBlbmRpbmdQcm9taXNlcy5kZWxldGUodGFnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgY29uc3Qgb25Db250aW51ZWQgPSAoKSA9PiAoaGFzQ29udGludWF0aW9uID0gdHJ1ZSk7XG4gIHJldHVybiB7IGNiOiB3cmFwcGVkLCBvbkNvbnRpbnVlZCB9O1xufVxuXG4vKipcbiAqIFdyYXBzIGFuIGFzeW5jIGZ1bmN0aW9uIHdpdGggYWRkaXRpb25hbCBmdW5jdGlvbmFsaWx0eTpcbiAqIDEuIEFzc29jaWF0ZXMgYW4gYWJvcnQgc2lnbmFsIHdpdGggZXZlcnkgZnVuY3Rpb24sIHRoYXQgaXMgcGFzc2VkIHRvIGl0XG4gKiAgICBhcyBhbiBhcmd1bWVudC4gV2hlbiBhIG5ldyBmdW5jdGlvbiBpcyBzY2hlZHVsZWQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50XG4gKiAgICBvbmUsIGN1cnJlbnQgc2lnbmFsIGlzIGFib3J0ZWQuXG4gKiAyLiBJZiBjdXJyZW50IGZ1bmN0aW9uIGRpZG4ndCBzdGFydCBhbmQgd2FzIGFib3J0ZWQsIGluIHdpbGwgbmV2ZXIgc3RhcnQuXG4gKiAzLiBJZiB0aGUgZnVuY3Rpb24gaXMgdGhlIGxhc3QgaW4gdGhlIHF1ZXVlLCBpdCBjbGVhbnMgdXAgdGhlIHdob2xlIGNoYWluXG4gKiAgICBvZiBwcm9taXNlcyBhZnRlciBmaW5pc2hpbmcuXG4gKi9cbmZ1bmN0aW9uIHdyYXBXaXRoQ2FuY2VsbGF0aW9uPFQ+KFxuICB0YWc6IHN0cmluZyB8IHN5bWJvbCxcbiAgY2I6IChzaWduYWw6IEFib3J0U2lnbmFsKSA9PiBQcm9taXNlPFQgfCAnY2FuY2VsZWQnPixcbikge1xuICBjb25zdCBhYyA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgY29uc3Qgd3JhcHBlZCA9ICgpID0+IHtcbiAgICBpZiAoYWMuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoJ2NhbmNlbGVkJyBhcyBjb25zdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNiKGFjLnNpZ25hbCkuZmluYWxseSgoKSA9PiB7XG4gICAgICBpZiAoIWFjLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIHBlbmRpbmdQcm9taXNlcy5kZWxldGUodGFnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3Qgb25Db250aW51ZWQgPSAoKSA9PiBhYy5hYm9ydCgpO1xuICByZXR1cm4geyBjYjogd3JhcHBlZCwgb25Db250aW51ZWQgfTtcbn1cbiIsImltcG9ydCB7IGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHdpdGhvdXRDb25jdXJyZW5jeSB9IGZyb20gJy4uL2hlbHBlcnMvY29uY3VycmVuY3knO1xuXG50eXBlIEZ1bmN0aW9uUGF0Y2g8VD4gPSAoY3VycmVudFZhbHVlOiBUKSA9PiBUO1xuXG4vKipcbiAqIEEgdmFsdWUgb3IgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyB0aGUgY3VycmVudCB2YWx1ZSBhbmQgcmV0dXJucyBhIG5ldyB2YWx1ZS5cbiAqL1xuZXhwb3J0IHR5cGUgUGF0Y2g8VD4gPSBUIHwgRnVuY3Rpb25QYXRjaDxUPjtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIHVwZGF0ZSBpcyBhIGZ1bmN0aW9uIHBhdGNoLlxuICpcbiAqIEBwYXJhbSB1cGRhdGUgdGhlIHZhbHVlIHRvIGNoZWNrLlxuICovXG5jb25zdCBpc0Z1bmN0aW9uUGF0Y2ggPSA8VD4odXBkYXRlOiBQYXRjaDxUPik6IHVwZGF0ZSBpcyBGdW5jdGlvblBhdGNoPFQ+ID0+XG4gIHR5cGVvZiB1cGRhdGUgPT09ICdmdW5jdGlvbic7XG5cbi8qKlxuICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhbiBvYnNlcnZhYmxlLCBvciB1bmRlZmluZWQgaWYgdGhlIG9ic2VydmFibGUgaGFzXG4gKiBub3QgZW1pdHRlZCBhIHZhbHVlIHlldC5cbiAqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZSQgdGhlIG9ic2VydmFibGUgdG8gZ2V0IHRoZSB2YWx1ZSBmcm9tLlxuICovXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFZhbHVlID0gPFQ+KG9ic2VydmFibGUkOiBPYnNlcnZhYmxlPFQ+KSA9PiB7XG4gIGxldCB2YWx1ZSE6IFQ7XG4gIGxldCBlcnI6IEVycm9yIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICBjb21iaW5lTGF0ZXN0KFtvYnNlcnZhYmxlJF0pXG4gICAgLnN1YnNjcmliZSh7XG4gICAgICBuZXh0OiAoW3ZdKSA9PiB7XG4gICAgICAgIHZhbHVlID0gdjtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogKGUpID0+IHtcbiAgICAgICAgZXJyID0gZTtcbiAgICAgIH0sXG4gICAgfSlcbiAgICAudW5zdWJzY3JpYmUoKTtcblxuICBpZiAoZXJyKSB0aHJvdyBlcnI7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgdmFsdWUgb2YgdGhlIHByb3ZpZGVkIFN1YmplY3QuXG4gKiBBbiBgdXBkYXRlYCBjYW4gZWl0aGVyIGJlIGEgbmV3IHZhbHVlIG9yIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXNcbiAqIHRoZSBjdXJyZW50IHZhbHVlIGFuZCByZXR1cm5zIGEgbmV3IHZhbHVlLlxuICpcbiAqIEBwYXJhbSBzdWJqZWN0IHRoZSBzdWJqZWN0IHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAqIEByZXR1cm4gdGhlIHVwZGF0ZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRDdXJyZW50VmFsdWUgPSA8VD4oc3ViamVjdDogU3ViamVjdDxUPiwgdXBkYXRlOiBQYXRjaDxUPikgPT4ge1xuICBjb25zdCBuZXh0ID0gaXNGdW5jdGlvblBhdGNoKHVwZGF0ZSlcbiAgICA/IHVwZGF0ZShnZXRDdXJyZW50VmFsdWUoc3ViamVjdCkpXG4gICAgOiB1cGRhdGU7XG5cbiAgc3ViamVjdC5uZXh0KG5leHQpO1xuICByZXR1cm4gbmV4dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN1YnNjcmlwdGlvbiBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVuc3Vic2NyaWJlLlxuICpcbiAqIEBwYXJhbSBvYnNlcnZhYmxlIHRoZSBvYnNlcnZhYmxlIHRvIHN1YnNjcmliZSB0by5cbiAqIEBwYXJhbSBoYW5kbGVyIHRoZSBoYW5kbGVyIHRvIGNhbGwgd2hlbiB0aGUgb2JzZXJ2YWJsZSBlbWl0cyBhIHZhbHVlLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlU3Vic2NyaXB0aW9uID0gPFQ+KFxuICBvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+LFxuICBoYW5kbGVyOiAodmFsdWU6IFQpID0+IHZvaWQsXG4pID0+IHtcbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZS5zdWJzY3JpYmUoaGFuZGxlcik7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH07XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdWJzY3JpcHRpb24gYW5kIHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnN1YnNjcmliZS4gTWFrZXMgc3VyZSB0aGF0XG4gKiBvbmx5IG9uZSBhc3luYyBoYW5kbGVyIHJ1bnMgYXQgdGhlIHNhbWUgdGltZS4gSWYgdXBkYXRlcyBjb21lIGluIHF1aWNrZXIgdGhhblxuICogaXQgdGFrZXMgZm9yIHRoZSBjdXJyZW50IGhhbmRsZXIgdG8gZmluaXNoLCBvdGhlciBoYW5kbGVycyB3aWxsIHdhaXQuXG4gKlxuICogQHBhcmFtIG9ic2VydmFibGUgdGhlIG9ic2VydmFibGUgdG8gc3Vic2NyaWJlIHRvLlxuICogQHBhcmFtIGhhbmRsZXIgdGhlIGFzeW5jIGhhbmRsZXIgdG8gY2FsbCB3aGVuIHRoZSBvYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVTYWZlQXN5bmNTdWJzY3JpcHRpb24gPSA8VD4oXG4gIG9ic2VydmFibGU6IE9ic2VydmFibGU8VD4sXG4gIGhhbmRsZXI6ICh2YWx1ZTogVCkgPT4gUHJvbWlzZTx2b2lkPixcbikgPT4ge1xuICBjb25zdCB0YWcgPSBTeW1ib2woKTtcbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZS5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgd2l0aG91dENvbmN1cnJlbmN5KHRhZywgKCkgPT4gaGFuZGxlcih2YWx1ZSkpO1xuICB9KTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfTtcbn07XG4iLCIvKipcbiAqIFJlcHJlc2VudHMgdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKi9cbmV4cG9ydCBlbnVtIENhbGxpbmdTdGF0ZSB7XG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBpbiBhbiB1bmtub3duIHN0YXRlLlxuICAgKi9cbiAgVU5LTk9XTiA9ICd1bmtub3duJyxcblxuICAvKipcbiAgICogVGhlIGNhbGwgaXMgaW4gYW4gaWRsZSBzdGF0ZS5cbiAgICovXG4gIElETEUgPSAnaWRsZScsXG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsIGlzIGluIHRoZSBwcm9jZXNzIG9mIHJpbmdpbmcuXG4gICAqIChVc2VyIGhhc24ndCBhY2NlcHRlZCBub3IgcmVqZWN0ZWQgdGhlIGNhbGwgeWV0LilcbiAgICovXG4gIFJJTkdJTkcgPSAncmluZ2luZycsXG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsIGlzIGluIHRoZSBwcm9jZXNzIG9mIGpvaW5pbmcuXG4gICAqL1xuICBKT0lOSU5HID0gJ2pvaW5pbmcnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgKi9cbiAgSk9JTkVEID0gJ2pvaW5lZCcsXG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsIGhhcyBiZWVuIGxlZnQuXG4gICAqL1xuICBMRUZUID0gJ2xlZnQnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBpbiB0aGUgcHJvY2VzcyBvZiByZWNvbm5lY3RpbmcuXG4gICAqL1xuICBSRUNPTk5FQ1RJTkcgPSAncmVjb25uZWN0aW5nJyxcblxuICAvKipcbiAgICogVGhlIGNhbGwgaXMgaW4gdGhlIHByb2Nlc3Mgb2YgbWlncmF0aW5nIGZyb20gb25lIG5vZGUgdG8gYW5vdGhlci5cbiAgICovXG4gIE1JR1JBVElORyA9ICdtaWdyYXRpbmcnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBoYXMgZmFpbGVkIHRvIHJlY29ubmVjdC5cbiAgICovXG4gIFJFQ09OTkVDVElOR19GQUlMRUQgPSAncmVjb25uZWN0aW5nLWZhaWxlZCcsXG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsIGlzIGluIG9mZmxpbmUgbW9kZS5cbiAgICovXG4gIE9GRkxJTkUgPSAnb2ZmbGluZScsXG59XG4iLCJpbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB0eXBlIHsgUGF0Y2ggfSBmcm9tICcuL3J4VXRpbHMnO1xuaW1wb3J0ICogYXMgUnhVdGlscyBmcm9tICcuL3J4VXRpbHMnO1xuaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHsgQ2FsbGluZ1N0YXRlIH0gZnJvbSAnLi9DYWxsaW5nU3RhdGUnO1xuaW1wb3J0IHR5cGUgeyBPd25Vc2VyUmVzcG9uc2UgfSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuZXhwb3J0IGNsYXNzIFN0cmVhbVZpZGVvV3JpdGVhYmxlU3RhdGVTdG9yZSB7XG4gIC8qKlxuICAgKiBBIHN0b3JlIGtlZXBpbmcgZGF0YSBvZiBhIHN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdXNlciBvdmVyIFdTIHRvIHRoZSBjb29yZGluYXRvciBzZXJ2ZXIuXG4gICAqL1xuICBjb25uZWN0ZWRVc2VyU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8T3duVXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB7QGxpbmsgQ2FsbH0gb2JqZWN0cyBjcmVhdGVkL3RyYWNrZWQgYnkgdGhpcyBjbGllbnQuXG4gICAqL1xuICBjYWxsc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PENhbGxbXT4oW10pO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29ubmVjdGVkVXNlclN1YmplY3Quc3Vic2NyaWJlKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgICAvLyBsZWF2ZSBhbGwgY2FsbHMgd2hlbiB0aGUgdXNlciBkaXNjb25uZWN0cy5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoWydjbGllbnQtc3RhdGUnXSk7XG4gICAgICAgIGZvciAoY29uc3QgY2FsbCBvZiB0aGlzLmNhbGxzKSB7XG4gICAgICAgICAgaWYgKGNhbGwuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuTEVGVCkgY29udGludWU7XG5cbiAgICAgICAgICBsb2dnZXIoJ2luZm8nLCBgVXNlciBkaXNjb25uZWN0ZWQsIGxlYXZpbmcgY2FsbDogJHtjYWxsLmNpZH1gKTtcbiAgICAgICAgICBhd2FpdCBjYWxsXG4gICAgICAgICAgICAubGVhdmUoeyByZWFzb246ICdjbGllbnQuZGlzY29ubmVjdFVzZXIoKSBjYWxsZWQnIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICBsb2dnZXIoJ2Vycm9yJywgYEVycm9yIGxlYXZpbmcgY2FsbDogJHtjYWxsLmNpZH1gLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5IGNvbm5lY3RlZCB1c2VyLlxuICAgKi9cbiAgZ2V0IGNvbm5lY3RlZFVzZXIoKTogT3duVXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gUnhVdGlscy5nZXRDdXJyZW50VmFsdWUodGhpcy5jb25uZWN0ZWRVc2VyU3ViamVjdCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudGx5IGNvbm5lY3RlZCB1c2VyLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHVzZXIgdGhlIHVzZXIgdG8gc2V0IGFzIGNvbm5lY3RlZC5cbiAgICovXG4gIHNldENvbm5lY3RlZFVzZXIgPSAodXNlcjogUGF0Y2g8T3duVXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkPikgPT4ge1xuICAgIHJldHVybiBSeFV0aWxzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmNvbm5lY3RlZFVzZXJTdWJqZWN0LCB1c2VyKTtcbiAgfTtcblxuICAvKipcbiAgICogQSBsaXN0IG9mIHtAbGluayBDYWxsfSBvYmplY3RzIGNyZWF0ZWQvdHJhY2tlZCBieSB0aGlzIGNsaWVudC5cbiAgICovXG4gIGdldCBjYWxscygpOiBDYWxsW10ge1xuICAgIHJldHVybiBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmNhbGxzU3ViamVjdCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbGlzdCBvZiB7QGxpbmsgQ2FsbH0gb2JqZWN0cyBjcmVhdGVkL3RyYWNrZWQgYnkgdGhpcyBjbGllbnQuXG4gICAqIEBwYXJhbSBjYWxsc1xuICAgKi9cbiAgc2V0Q2FsbHMgPSAoY2FsbHM6IFBhdGNoPENhbGxbXT4pID0+IHtcbiAgICByZXR1cm4gUnhVdGlscy5zZXRDdXJyZW50VmFsdWUodGhpcy5jYWxsc1N1YmplY3QsIGNhbGxzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhIHtAbGluayBDYWxsfSBvYmplY3QgdG8gdGhlIGxpc3Qgb2Yge0BsaW5rIENhbGx9IG9iamVjdHMgY3JlYXRlZC90cmFja2VkIGJ5IHRoaXMgY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbCB0aGUgY2FsbCB0byBhZGQuXG4gICAqL1xuICByZWdpc3RlckNhbGwgPSAoY2FsbDogQ2FsbCkgPT4ge1xuICAgIGlmICghdGhpcy5jYWxscy5maW5kKChjKSA9PiBjLmNpZCA9PT0gY2FsbC5jaWQpKSB7XG4gICAgICB0aGlzLnNldENhbGxzKChjYWxscykgPT4gWy4uLmNhbGxzLCBjYWxsXSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEge0BsaW5rIENhbGx9IG9iamVjdCBmcm9tIHRoZSBsaXN0IG9mIHtAbGluayBDYWxsfSBvYmplY3RzIGNyZWF0ZWQvdHJhY2tlZCBieSB0aGlzIGNsaWVudC5cbiAgICpcbiAgICogQHBhcmFtIGNhbGwgdGhlIGNhbGwgdG8gcmVtb3ZlXG4gICAqL1xuICB1bnJlZ2lzdGVyQ2FsbCA9IChjYWxsOiBDYWxsKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q2FsbHMoKGNhbGxzKSA9PiBjYWxscy5maWx0ZXIoKGMpID0+IGMgIT09IGNhbGwpKTtcbiAgfTtcblxuICAvKipcbiAgICogRmluZHMgYSB7QGxpbmsgQ2FsbH0gb2JqZWN0IGluIHRoZSBsaXN0IG9mIHtAbGluayBDYWxsfSBvYmplY3RzIGNyZWF0ZWQvdHJhY2tlZCBieSB0aGlzIGNsaWVudC5cbiAgICpcbiAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgY2FsbCB0byBmaW5kLlxuICAgKiBAcGFyYW0gaWQgdGhlIGlkIG9mIHRoZSBjYWxsIHRvIGZpbmQuXG4gICAqL1xuICBmaW5kQ2FsbCA9ICh0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxscy5maW5kKChjKSA9PiBjLnR5cGUgPT09IHR5cGUgJiYgYy5pZCA9PT0gaWQpO1xuICB9O1xufVxuXG4vKipcbiAqIEEgcmVhY3RpdmUgc3RvcmUgdGhhdCBleHBvc2VzIHN0YXRlIHZhcmlhYmxlcyBpbiBhIHJlYWN0aXZlIG1hbm5lci5cbiAqIFlvdSBjYW4gc3Vic2NyaWJlIHRvIGNoYW5nZXMgb2YgdGhlIGRpZmZlcmVudCBzdGF0ZSB2YXJpYWJsZXMuXG4gKiBUaGlzIGNlbnRyYWwgc3RvcmUgY29udGFpbnMgYWxsIHRoZSBzdGF0ZSB2YXJpYWJsZXMgcmVsYXRlZCB0byBbYFN0cmVhbVZpZGVvQ2xpZW50YF0oLi9TdHJlYW1WaWRlQ2xpZW50Lm1kKSBhbmQgW2BDYWxsYF0oLi9DYWxsLm1kKS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbVZpZGVvUmVhZE9ubHlTdGF0ZVN0b3JlIHtcbiAgLyoqXG4gICAqIERhdGEgZGVzY3JpYmluZyBhIHVzZXIgc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCBvdmVyIFdTIHRvIGNvb3JkaW5hdG9yIHNlcnZlci5cbiAgICovXG4gIGNvbm5lY3RlZFVzZXIkOiBPYnNlcnZhYmxlPE93blVzZXJSZXNwb25zZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB7QGxpbmsgQ2FsbH0gb2JqZWN0cyBjcmVhdGVkL3RyYWNrZWQgYnkgdGhpcyBjbGllbnQuXG4gICAqL1xuICBjYWxscyQ6IE9ic2VydmFibGU8Q2FsbFtdPjtcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgYWxsb3dzIHlvdSB0aGUgZ2V0IHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgc3RhdGUgdmFyaWFibGUuXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZhYmxlIHRoZSBvYnNlcnZhYmxlIHRvIGdldCB0aGUgY3VycmVudCB2YWx1ZSBvZi5cbiAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIG9ic2VydmFibGUuXG4gICAqL1xuICBnZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZTtcblxuICBjb25zdHJ1Y3RvcihzdG9yZTogU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlKSB7XG4gICAgLy8gY29udmVydCBhbmQgZXhwb3NlIHN1YmplY3RzIGFzIG9ic2VydmFibGVzXG4gICAgdGhpcy5jb25uZWN0ZWRVc2VyJCA9IHN0b3JlLmNvbm5lY3RlZFVzZXJTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuY2FsbHMkID0gc3RvcmUuY2FsbHNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHVzZXIgY29ubmVjdGVkIG92ZXIgV1MgdG8gdGhlIGJhY2tlbmQuXG4gICAqL1xuICBnZXQgY29ubmVjdGVkVXNlcigpOiBPd25Vc2VyUmVzcG9uc2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmNvbm5lY3RlZFVzZXIkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2Yge0BsaW5rIENhbGx9IG9iamVjdHMgY3JlYXRlZC90cmFja2VkIGJ5IHRoaXMgY2xpZW50LlxuICAgKi9cbiAgZ2V0IGNhbGxzKCk6IENhbGxbXSB7XG4gICAgcmV0dXJuIFJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuY2FsbHMkKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBEZWZpbmVzIGEgY29tcGFyYXRvciBmdW5jdGlvbiB3aGljaCBjYW4gYmUgdXNlZCBmb3Igc29ydGluZyBpdGVtcy5cbiAqL1xuZXhwb3J0IHR5cGUgQ29tcGFyYXRvcjxUPiA9IChhOiBULCBiOiBUKSA9PiAtMSB8IDAgfCAxO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgY29tYmluZWQge0BsaW5rIENvbXBhcmF0b3I8VD59IHdoaWNoIHNvcnRzIGl0ZW1zIGJ5IHRoZSBnaXZlbiBjb21wYXJhdG9ycy5cbiAqIFRoZSBjb21wYXJhdG9ycyBhcmUgYXBwbGllZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgZ2l2ZW4gKGxlZnQgLT4gcmlnaHQpLlxuICpcbiAqIEBwYXJhbSBjb21wYXJhdG9ycyB0aGUgY29tcGFyYXRvcnMgdG8gdXNlIGZvciBzb3J0aW5nLlxuICogQHJldHVybnMgYSBjb21iaW5lZCB7QGxpbmsgQ29tcGFyYXRvcjxUPn0uXG4gKi9cbmV4cG9ydCBjb25zdCBjb21iaW5lQ29tcGFyYXRvcnMgPSA8VD4oXG4gIC4uLmNvbXBhcmF0b3JzOiBDb21wYXJhdG9yPFQ+W11cbik6IENvbXBhcmF0b3I8VD4gPT4ge1xuICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICBmb3IgKGNvbnN0IGNvbXBhcmF0b3Igb2YgY29tcGFyYXRvcnMpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXBhcmF0b3IoYSwgYik7XG4gICAgICBpZiAocmVzdWx0ICE9PSAwKSByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBjb21wYXJhdG9yIHdoaWNoIHNvcnRzIGl0ZW1zIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IGJ5VmFsdWUgPSAoYSwgYikgPT4gYSA8IGIgPyAtIDEgOiBhID4gYiA/IDEgOiAwO1xuICogY29uc3QgYnlWYWx1ZURlc2MgPSBkZXNjZW5kaW5nKGJ5VmFsdWUpO1xuICpcbiAqIEBwYXJhbSBjb21wYXJhdG9yIHRoZSBjb21wYXJhdG9yIHRvIHdyYXAuXG4gKi9cbmV4cG9ydCBjb25zdCBkZXNjZW5kaW5nID0gPFQ+KGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VD4pOiBDb21wYXJhdG9yPFQ+ID0+IHtcbiAgcmV0dXJuIChhLCBiKSA9PiBjb21wYXJhdG9yKGIsIGEpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGNvbXBhcmF0b3Igd2hpY2ggY29uZGl0aW9uYWxseSBhcHBsaWVzIHRoZSBnaXZlbiBjb21wYXJhdG9yLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBzaG91bGRTb3J0QnlWYWx1ZSA9IChhLCBiKSA9PiBhICUgMiA9PT0gMDsgLy8gcmV0dXJuIGZhbHNlIHRvIHR1cm4gaXQgb2ZmXG4gKiBjb25zdCBieVZhbHVlID0gKGEsIGIpID0+IGEgPCBiID8gLSAxIDogYSA+IGIgPyAxIDogMDtcbiAqIGNvbnN0IGNvbXBhcmF0b3IgPSBjb25kaXRpb25hbChzaG91bGRTb3J0QnlWYWx1ZSkoYnlWYWx1ZSk7XG4gKlxuICogQHBhcmFtIHByZWRpY2F0ZSB0aGUgcHJlZGljYXRlIHRvIHVzZSBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0byBhcHBseSB0aGUgY29tcGFyYXRvci5cbiAqL1xuZXhwb3J0IGNvbnN0IGNvbmRpdGlvbmFsID0gPFQ+KHByZWRpY2F0ZTogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIChjb21wYXJhdG9yOiBDb21wYXJhdG9yPFQ+KTogQ29tcGFyYXRvcjxUPiA9PiB7XG4gICAgcmV0dXJuIChhLCBiKSA9PiB7XG4gICAgICBpZiAoIXByZWRpY2F0ZShhLCBiKSkgcmV0dXJuIDA7XG4gICAgICByZXR1cm4gY29tcGFyYXRvcihhLCBiKTtcbiAgICB9O1xuICB9O1xufTtcblxuLyoqXG4gKiBBIG5vLW9wIGNvbXBhcmF0b3Igd2hpY2ggYWx3YXlzIHJldHVybnMgMC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vb3BDb21wYXJhdG9yID0gPFQ+KCk6IENvbXBhcmF0b3I8VD4gPT4ge1xuICByZXR1cm4gKCkgPT4gMDtcbn07XG4iLCJpbXBvcnQgeyBTdHJlYW1WaWRlb1BhcnRpY2lwYW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVHJhY2tUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcblxuLyoqXG4gKiBDaGVjayBpZiBhIHBhcnRpY2lwYW50IGhhcyBhIHZpZGVvLlxuICpcbiAqIEBwYXJhbSBwIHRoZSBwYXJ0aWNpcGFudCB0byBjaGVjay5cbiAqL1xuZXhwb3J0IGNvbnN0IGhhc1ZpZGVvID0gKHA6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQpOiBib29sZWFuID0+XG4gIHAucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFRyYWNrVHlwZS5WSURFTyk7XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBwYXJ0aWNpcGFudCBoYXMgYXVkaW8uXG4gKlxuICogQHBhcmFtIHAgdGhlIHBhcnRpY2lwYW50IHRvIGNoZWNrLlxuICovXG5leHBvcnQgY29uc3QgaGFzQXVkaW8gPSAocDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCk6IGJvb2xlYW4gPT5cbiAgcC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoVHJhY2tUeXBlLkFVRElPKTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHBhcnRpY2lwYW50IGlzIHNjcmVlbiBzaGFyaW5nLlxuICpcbiAqIEBwYXJhbSBwIHRoZSBwYXJ0aWNpcGFudCB0byBjaGVjay5cbiAqL1xuZXhwb3J0IGNvbnN0IGhhc1NjcmVlblNoYXJlID0gKHA6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQpOiBib29sZWFuID0+XG4gIHAucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgcGFydGljaXBhbnQgaXMgc2NyZWVuIHNoYXJpbmcgYXVkaW8uXG4gKlxuICogQHBhcmFtIHAgdGhlIHBhcnRpY2lwYW50IHRvIGNoZWNrLlxuICovXG5leHBvcnQgY29uc3QgaGFzU2NyZWVuU2hhcmVBdWRpbyA9IChwOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50KTogYm9vbGVhbiA9PlxuICBwLnB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPKTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFydGljaXBhbnQgaXMgcGlubmVkLlxuICpcbiAqIEBwYXJhbSBwIHRoZSBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzUGlubmVkID0gKHA6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQpOiBib29sZWFuID0+XG4gICEhcC5waW4gJiYgKHAucGluLmlzTG9jYWxQaW4gfHwgcC5waW4ucGlubmVkQXQgPiAwKTtcbiIsImltcG9ydCB7IENvbXBhcmF0b3IgfSBmcm9tICcuLyc7XG5pbXBvcnQgeyBTdHJlYW1WaWRlb1BhcnRpY2lwYW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgaGFzQXVkaW8sXG4gIGhhc1NjcmVlblNoYXJlLFxuICBoYXNWaWRlbyxcbn0gZnJvbSAnLi4vaGVscGVycy9wYXJ0aWNpcGFudFV0aWxzJztcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IHRoZSBmYWN0IHRoYXQgdGhleSBhcmUgdGhlIGRvbWluYW50IHNwZWFrZXIgb3Igbm90LlxuICpcbiAqIEBwYXJhbSBhIHRoZSBmaXJzdCBwYXJ0aWNpcGFudC5cbiAqIEBwYXJhbSBiIHRoZSBzZWNvbmQgcGFydGljaXBhbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBkb21pbmFudFNwZWFrZXI6IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4gPSAoYSwgYikgPT4ge1xuICBpZiAoYS5pc0RvbWluYW50U3BlYWtlciAmJiAhYi5pc0RvbWluYW50U3BlYWtlcikgcmV0dXJuIC0xO1xuICBpZiAoIWEuaXNEb21pbmFudFNwZWFrZXIgJiYgYi5pc0RvbWluYW50U3BlYWtlcikgcmV0dXJuIDE7XG4gIHJldHVybiAwO1xufTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IHRoZSBmYWN0IHRoYXQgdGhleSBhcmUgc3BlYWtpbmcgb3Igbm90LlxuICpcbiAqIEBwYXJhbSBhIHRoZSBmaXJzdCBwYXJ0aWNpcGFudC5cbiAqIEBwYXJhbSBiIHRoZSBzZWNvbmQgcGFydGljaXBhbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBzcGVha2luZzogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9IChhLCBiKSA9PiB7XG4gIGlmIChhLmlzU3BlYWtpbmcgJiYgIWIuaXNTcGVha2luZykgcmV0dXJuIC0xO1xuICBpZiAoIWEuaXNTcGVha2luZyAmJiBiLmlzU3BlYWtpbmcpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIHdoaWNoIHNvcnRzIHBhcnRpY2lwYW50cyBieSBzY3JlZW4gc2hhcmluZyBzdGF0dXMuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHNjcmVlblNoYXJpbmc6IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4gPSAoYSwgYikgPT4ge1xuICBpZiAoaGFzU2NyZWVuU2hhcmUoYSkgJiYgIWhhc1NjcmVlblNoYXJlKGIpKSByZXR1cm4gLTE7XG4gIGlmICghaGFzU2NyZWVuU2hhcmUoYSkgJiYgaGFzU2NyZWVuU2hhcmUoYikpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIHdoaWNoIHNvcnRzIHBhcnRpY2lwYW50cyBieSB2aWRlbyBzdGF0dXMuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHB1Ymxpc2hpbmdWaWRlbzogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9IChhLCBiKSA9PiB7XG4gIGlmIChoYXNWaWRlbyhhKSAmJiAhaGFzVmlkZW8oYikpIHJldHVybiAtMTtcbiAgaWYgKCFoYXNWaWRlbyhhKSAmJiBoYXNWaWRlbyhiKSkgcmV0dXJuIDE7XG4gIHJldHVybiAwO1xufTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IGF1ZGlvIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0gYSB0aGUgZmlyc3QgcGFydGljaXBhbnQuXG4gKiBAcGFyYW0gYiB0aGUgc2Vjb25kIHBhcnRpY2lwYW50LlxuICovXG5leHBvcnQgY29uc3QgcHVibGlzaGluZ0F1ZGlvOiBDb21wYXJhdG9yPFN0cmVhbVZpZGVvUGFydGljaXBhbnQ+ID0gKGEsIGIpID0+IHtcbiAgaWYgKGhhc0F1ZGlvKGEpICYmICFoYXNBdWRpbyhiKSkgcmV0dXJuIC0xO1xuICBpZiAoIWhhc0F1ZGlvKGEpICYmIGhhc0F1ZGlvKGIpKSByZXR1cm4gMTtcbiAgcmV0dXJuIDA7XG59O1xuXG4vKipcbiAqIEEgY29tcGFyYXRvciB3aGljaCBwcmlvcml0aXplcyBwYXJ0aWNpcGFudHMgd2hvIGFyZSBwaW5uZWQuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHBpbm5lZDogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9IChhLCBiKSA9PiB7XG4gIGlmIChhLnBpbiAmJiBiLnBpbikge1xuICAgIGlmICghYS5waW4uaXNMb2NhbFBpbiAmJiBiLnBpbi5pc0xvY2FsUGluKSByZXR1cm4gLTE7XG4gICAgaWYgKGEucGluLmlzTG9jYWxQaW4gJiYgIWIucGluLmlzTG9jYWxQaW4pIHJldHVybiAxO1xuICAgIGlmIChhLnBpbi5waW5uZWRBdCA+IGIucGluLnBpbm5lZEF0KSByZXR1cm4gLTE7XG4gICAgaWYgKGEucGluLnBpbm5lZEF0IDwgYi5waW4ucGlubmVkQXQpIHJldHVybiAxO1xuICB9XG5cbiAgaWYgKGEucGluICYmICFiLnBpbikgcmV0dXJuIC0xO1xuICBpZiAoIWEucGluICYmIGIucGluKSByZXR1cm4gMTtcblxuICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIGNyZWF0b3Igd2hpY2ggd2lsbCBzZXQgdXAgYSBjb21wYXJhdG9yIHdoaWNoIHByaW9yaXRpemVzXG4gKiBwYXJ0aWNpcGFudHMgd2hvIGhhdmUgYSBzcGVjaWZpYyByZWFjdGlvbi5cbiAqXG4gKiBAcGFyYW0gdHlwZSB0aGUgcmVhY3Rpb24gdHlwZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWN0aW9uVHlwZSA9IChcbiAgdHlwZTogc3RyaW5nLFxuKTogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9PiB7XG4gIHJldHVybiAoYSwgYikgPT4ge1xuICAgIGlmIChhLnJlYWN0aW9uPy50eXBlID09PSB0eXBlICYmIGIucmVhY3Rpb24/LnR5cGUgIT09IHR5cGUpIHJldHVybiAtMTtcbiAgICBpZiAoYS5yZWFjdGlvbj8udHlwZSAhPT0gdHlwZSAmJiBiLnJlYWN0aW9uPy50eXBlID09PSB0eXBlKSByZXR1cm4gMTtcbiAgICByZXR1cm4gMDtcbiAgfTtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIGNyZWF0b3Igd2hpY2ggd2lsbCBzZXQgdXAgYSBjb21wYXJhdG9yIHdoaWNoIHByaW9yaXRpemVzXG4gKiBwYXJ0aWNpcGFudHMgd2hvIGhhdmUgYSBzcGVjaWZpYyByb2xlLlxuICpcbiAqIEBwYXJhbSByb2xlcyB0aGUgcm9sZXMgdG8gcHJpb3JpdGl6ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJvbGUgPVxuICAoLi4ucm9sZXM6IHN0cmluZ1tdKTogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9PlxuICAoYSwgYikgPT4ge1xuICAgIGlmIChoYXNBbnlSb2xlKGEsIHJvbGVzKSAmJiAhaGFzQW55Um9sZShiLCByb2xlcykpIHJldHVybiAtMTtcbiAgICBpZiAoIWhhc0FueVJvbGUoYSwgcm9sZXMpICYmIGhhc0FueVJvbGUoYiwgcm9sZXMpKSByZXR1cm4gMTtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5hbWU6IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4gPSAoYSwgYikgPT4ge1xuICBpZiAoYS5uYW1lIDwgYi5uYW1lKSByZXR1cm4gLTE7XG4gIGlmIChhLm5hbWUgPiBiLm5hbWUpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IGhhc0FueVJvbGUgPSAocDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCwgcm9sZXM6IHN0cmluZ1tdKSA9PlxuICAocC5yb2xlcyB8fCBbXSkuc29tZSgocikgPT4gcm9sZXMuaW5jbHVkZXMocikpO1xuIiwiaW1wb3J0IHsgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCwgVmlzaWJpbGl0eVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgY29tYmluZUNvbXBhcmF0b3JzLCBjb25kaXRpb25hbCB9IGZyb20gJy4vY29tcGFyYXRvcic7XG5pbXBvcnQge1xuICBkb21pbmFudFNwZWFrZXIsXG4gIHBpbm5lZCxcbiAgcHVibGlzaGluZ0F1ZGlvLFxuICBwdWJsaXNoaW5nVmlkZW8sXG4gIHJlYWN0aW9uVHlwZSxcbiAgcm9sZSxcbiAgc2NyZWVuU2hhcmluZyxcbiAgc3BlYWtpbmcsXG59IGZyb20gJy4vcGFydGljaXBhbnRzJztcblxuLy8gYSBjb21wYXJhdG9yIGRlY29yYXRvciB3aGljaCBhcHBsaWVzIHRoZSBkZWNvcmF0ZWQgY29tcGFyYXRvciBvbmx5IGlmIHRoZVxuLy8gcGFydGljaXBhbnQgaXMgaW52aXNpYmxlLlxuLy8gVGhpcyBlbnN1cmVzIHN0YWJsZSBzb3J0aW5nIHdoZW4gYWxsIHBhcnRpY2lwYW50cyBhcmUgdmlzaWJsZS5cbmNvbnN0IGlmSW52aXNpYmxlQnkgPSBjb25kaXRpb25hbChcbiAgKGE6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQsIGI6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQpID0+XG4gICAgYS52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8udmlkZW9UcmFjayA9PT0gVmlzaWJpbGl0eVN0YXRlLklOVklTSUJMRSB8fFxuICAgIGIudmlld3BvcnRWaXNpYmlsaXR5U3RhdGU/LnZpZGVvVHJhY2sgPT09IFZpc2liaWxpdHlTdGF0ZS5JTlZJU0lCTEUsXG4pO1xuXG4vKipcbiAqIEEgY29tcGFyYXRvciB0aGF0IGFwcGxpZXMgdGhlIGRlY29yYXRlZCBjb21wYXJhdG9yIHdoZW4gYSBwYXJ0aWNpcGFudCBpc1xuICogZWl0aGVyIGludmlzaWJsZSBvciBpdHMgdmlzaWJpbGl0eSBzdGF0ZSBpc24ndCBrbm93bi5cbiAqIEZvciB2aXNpYmxlIHBhcnRpY2lwYW50cywgaXQgZW5zdXJlcyBzdGFibGUgc29ydGluZy5cbiAqL1xuY29uc3QgaWZJbnZpc2libGVPclVua25vd25CeSA9IGNvbmRpdGlvbmFsKFxuICAoYTogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCwgYjogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCkgPT5cbiAgICBhLnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlPy52aWRlb1RyYWNrID09PSBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFIHx8XG4gICAgYS52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8udmlkZW9UcmFjayA9PT0gVmlzaWJpbGl0eVN0YXRlLlVOS05PV04gfHxcbiAgICBiLnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlPy52aWRlb1RyYWNrID09PSBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFIHx8XG4gICAgYi52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8udmlkZW9UcmFjayA9PT0gVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG4pO1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IHNvcnRpbmcgcHJlc2V0LlxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFNvcnRQcmVzZXQgPSBjb21iaW5lQ29tcGFyYXRvcnMoXG4gIHBpbm5lZCxcbiAgc2NyZWVuU2hhcmluZyxcbiAgaWZJbnZpc2libGVCeShcbiAgICBjb21iaW5lQ29tcGFyYXRvcnMoXG4gICAgICBkb21pbmFudFNwZWFrZXIsXG4gICAgICBzcGVha2luZyxcbiAgICAgIHJlYWN0aW9uVHlwZSgncmFpc2VkLWhhbmQnKSxcbiAgICAgIHB1Ymxpc2hpbmdWaWRlbyxcbiAgICAgIHB1Ymxpc2hpbmdBdWRpbyxcbiAgICApLFxuICApLFxuICAvLyBpZkludmlzaWJsZUJ5KG5hbWUpLFxuKTtcblxuLyoqXG4gKiBUaGUgc29ydGluZyBwcmVzZXQgZm9yIHNwZWFrZXIgbGF5b3V0LlxuICovXG5leHBvcnQgY29uc3Qgc3BlYWtlckxheW91dFNvcnRQcmVzZXQgPSBjb21iaW5lQ29tcGFyYXRvcnMoXG4gIHBpbm5lZCxcbiAgc2NyZWVuU2hhcmluZyxcbiAgZG9taW5hbnRTcGVha2VyLFxuICBpZkludmlzaWJsZUJ5KFxuICAgIGNvbWJpbmVDb21wYXJhdG9ycyhcbiAgICAgIHNwZWFraW5nLFxuICAgICAgcmVhY3Rpb25UeXBlKCdyYWlzZWQtaGFuZCcpLFxuICAgICAgcHVibGlzaGluZ1ZpZGVvLFxuICAgICAgcHVibGlzaGluZ0F1ZGlvLFxuICAgICksXG4gICksXG4gIC8vIGlmSW52aXNpYmxlQnkobmFtZSksXG4pO1xuXG4vKipcbiAqIFRoZSBzb3J0aW5nIHByZXNldCBmb3IgbGF5b3V0cyB0aGF0IGRvbid0IHJlbmRlciBhbGwgcGFydGljaXBhbnRzIGJ1dFxuICogaW5zdGVhZCwgcmVuZGVyIHRoZW0gaW4gcGFnZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBwYWdpbmF0ZWRMYXlvdXRTb3J0UHJlc2V0ID0gY29tYmluZUNvbXBhcmF0b3JzKFxuICBwaW5uZWQsXG4gIGlmSW52aXNpYmxlT3JVbmtub3duQnkoXG4gICAgY29tYmluZUNvbXBhcmF0b3JzKFxuICAgICAgZG9taW5hbnRTcGVha2VyLFxuICAgICAgc3BlYWtpbmcsXG4gICAgICByZWFjdGlvblR5cGUoJ3JhaXNlZC1oYW5kJyksXG4gICAgICBwdWJsaXNoaW5nVmlkZW8sXG4gICAgICBwdWJsaXNoaW5nQXVkaW8sXG4gICAgKSxcbiAgKSxcbiAgLy8gaWZJbnZpc2libGVPclVua25vd25CeShuYW1lKSxcbik7XG5cbi8qKlxuICogVGhlIHNvcnRpbmcgcHJlc2V0IGZvciBsaXZlc3RyZWFtcyBhbmQgYXVkaW8gcm9vbXMuXG4gKi9cbmV4cG9ydCBjb25zdCBsaXZlc3RyZWFtT3JBdWRpb1Jvb21Tb3J0UHJlc2V0ID0gY29tYmluZUNvbXBhcmF0b3JzKFxuICBpZkludmlzaWJsZUJ5KFxuICAgIGNvbWJpbmVDb21wYXJhdG9ycyhcbiAgICAgIGRvbWluYW50U3BlYWtlcixcbiAgICAgIHNwZWFraW5nLFxuICAgICAgcmVhY3Rpb25UeXBlKCdyYWlzZWQtaGFuZCcpLFxuICAgICAgcHVibGlzaGluZ1ZpZGVvLFxuICAgICAgcHVibGlzaGluZ0F1ZGlvLFxuICAgICksXG4gICksXG4gIHJvbGUoJ2FkbWluJywgJ2hvc3QnLCAnc3BlYWtlcicpLFxuICAvLyBuYW1lLFxuKTtcbiIsImltcG9ydCB7XG4gIEJlaGF2aW9yU3ViamVjdCxcbiAgZGlzdGluY3RVbnRpbENoYW5nZWQsXG4gIG1hcCxcbiAgT2JzZXJ2YWJsZSxcbiAgc2hhcmVSZXBsYXksXG59IGZyb20gJ3J4anMnO1xuaW1wb3J0IHR5cGUgeyBQYXRjaCB9IGZyb20gJy4vcnhVdGlscyc7XG5pbXBvcnQgKiBhcyBSeFV0aWxzIGZyb20gJy4vcnhVdGlscyc7XG5pbXBvcnQgeyBDYWxsaW5nU3RhdGUgfSBmcm9tICcuL0NhbGxpbmdTdGF0ZSc7XG5pbXBvcnQge1xuICBTdHJlYW1WaWRlb1BhcnRpY2lwYW50LFxuICBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2gsXG4gIFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaGVzLFxuICBWaXNpYmlsaXR5U3RhdGUsXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IENhbGxTdGF0c1JlcG9ydCB9IGZyb20gJy4uL3N0YXRzJztcbmltcG9ydCB7XG4gIEJsb2NrZWRVc2VyRXZlbnQsXG4gIENhbGxITFNCcm9hZGNhc3RpbmdTdGFydGVkRXZlbnQsXG4gIENhbGxJbmdyZXNzUmVzcG9uc2UsXG4gIENhbGxNZW1iZXJBZGRlZEV2ZW50LFxuICBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50LFxuICBDYWxsTWVtYmVyVXBkYXRlZEV2ZW50LFxuICBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudCxcbiAgQ2FsbFJlYWN0aW9uRXZlbnQsXG4gIENhbGxSZXNwb25zZSxcbiAgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudENvdW50c1VwZGF0ZWRFdmVudCxcbiAgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZEV2ZW50LFxuICBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50LFxuICBDYWxsU2Vzc2lvblJlc3BvbnNlLFxuICBDYWxsU2V0dGluZ3NSZXNwb25zZSxcbiAgRWdyZXNzUmVzcG9uc2UsXG4gIE1lbWJlclJlc3BvbnNlLFxuICBPd25DYXBhYmlsaXR5LFxuICBUaHVtYm5haWxSZXNwb25zZSxcbiAgVW5ibG9ja2VkVXNlckV2ZW50LFxuICBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnQsXG4gIFVzZXJSZXNwb25zZSxcbiAgV1NFdmVudCxcbn0gZnJvbSAnLi4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gJy4uL2dlbi9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wJztcbmltcG9ydCB7IFJlY29ubmVjdERldGFpbHMgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L2V2ZW50L2V2ZW50cyc7XG5pbXBvcnQge1xuICBDYWxsU3RhdGUgYXMgU2Z1Q2FsbFN0YXRlLFxuICBQaW4sXG4gIFRyYWNrVHlwZSxcbn0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IENvbXBhcmF0b3IsIGRlZmF1bHRTb3J0UHJlc2V0IH0gZnJvbSAnLi4vc29ydGluZyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgaGFzU2NyZWVuU2hhcmUgfSBmcm9tICcuLi9oZWxwZXJzL3BhcnRpY2lwYW50VXRpbHMnO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgZWdyZXNzIG9iamVjdCAtIHdoZW4gbm8gZWdyZXNzIGRhdGEgaXMgYXZhaWxhYmxlLlxuICovXG5jb25zdCBkZWZhdWx0RWdyZXNzOiBFZ3Jlc3NSZXNwb25zZSA9IHtcbiAgYnJvYWRjYXN0aW5nOiBmYWxzZSxcbiAgaGxzOiB7IHBsYXlsaXN0X3VybDogJycgfSxcbiAgcnRtcHM6IFtdLFxufTtcblxudHlwZSBPcnBoYW5lZFRyYWNrID0ge1xuICBpZDogc3RyaW5nO1xuICB0cmFja0xvb2t1cFByZWZpeDogc3RyaW5nO1xuICB0cmFja1R5cGU6IFRyYWNrVHlwZTtcbiAgdHJhY2s6IE1lZGlhU3RyZWFtO1xufTtcblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgdGhlIGN1cnJlbnQgY2FsbC5cbiAqIEByZWFjdCBZb3UgZG9uJ3QgaGF2ZSB0byB1c2UgdGhpcyBjbGFzcyBkaXJlY3RseSwgYXMgd2UgYXJlIGV4cG9zaW5nIHRoZSBzdGF0ZSB0aHJvdWdoIEhvb2tzLlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbFN0YXRlIHtcbiAgcHJpdmF0ZSBiYWNrc3RhZ2VTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPih0cnVlKTtcbiAgcHJpdmF0ZSBibG9ja2VkVXNlcklkc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZ1tdPihbXSk7XG4gIHByaXZhdGUgY3JlYXRlZEF0U3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8RGF0ZT4obmV3IERhdGUoKSk7XG4gIHByaXZhdGUgZW5kZWRBdFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PERhdGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgc3RhcnRzQXRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxEYXRlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBwcml2YXRlIHVwZGF0ZWRBdFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PERhdGU+KG5ldyBEYXRlKCkpO1xuICBwcml2YXRlIGNyZWF0ZWRCeVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFVzZXJSZXNwb25zZSB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuICBwcml2YXRlIGN1c3RvbVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFJlY29yZDxzdHJpbmcsIGFueT4+KHt9KTtcbiAgcHJpdmF0ZSBlZ3Jlc3NTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxFZ3Jlc3NSZXNwb25zZSB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuICBwcml2YXRlIGluZ3Jlc3NTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDYWxsSW5ncmVzc1Jlc3BvbnNlIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByaXZhdGUgcmVjb3JkaW5nU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xuICBwcml2YXRlIHNlc3Npb25TdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDYWxsU2Vzc2lvblJlc3BvbnNlIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByaXZhdGUgc2V0dGluZ3NTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxcbiAgICBDYWxsU2V0dGluZ3NSZXNwb25zZSB8IHVuZGVmaW5lZFxuICA+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgdHJhbnNjcmliaW5nU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xuICBwcml2YXRlIGVuZGVkQnlTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxVc2VyUmVzcG9uc2UgfCB1bmRlZmluZWQ+KFxuICAgIHVuZGVmaW5lZCxcbiAgKTtcbiAgcHJpdmF0ZSB0aHVtYm5haWxzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8XG4gICAgVGh1bWJuYWlsUmVzcG9uc2UgfCB1bmRlZmluZWRcbiAgPih1bmRlZmluZWQpO1xuICBwcml2YXRlIG1lbWJlcnNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxNZW1iZXJSZXNwb25zZVtdPihbXSk7XG4gIHByaXZhdGUgb3duQ2FwYWJpbGl0aWVzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8T3duQ2FwYWJpbGl0eVtdPihbXSk7XG4gIHByaXZhdGUgY2FsbGluZ1N0YXRlU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Q2FsbGluZ1N0YXRlPihcbiAgICBDYWxsaW5nU3RhdGUuVU5LTk9XTixcbiAgKTtcbiAgcHJpdmF0ZSBzdGFydGVkQXRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxEYXRlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICBwcml2YXRlIHBhcnRpY2lwYW50Q291bnRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXI+KDApO1xuICBwcml2YXRlIGFub255bW91c1BhcnRpY2lwYW50Q291bnRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXI+KDApO1xuICBwcml2YXRlIHBhcnRpY2lwYW50c1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFN0cmVhbVZpZGVvUGFydGljaXBhbnRbXT4oXG4gICAgW10sXG4gICk7XG4gIHByaXZhdGUgY2FsbFN0YXRzUmVwb3J0U3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8XG4gICAgQ2FsbFN0YXRzUmVwb3J0IHwgdW5kZWZpbmVkXG4gID4odW5kZWZpbmVkKTtcblxuICAvLyBUaGVzZSBhcmUgdHJhY2tzIHRoYXQgd2VyZSBkZWxpdmVyZWQgdG8gdGhlIFN1YnNjcmliZXIncyBvblRyYWNrIGV2ZW50XG4gIC8vIHRoYXQgd2UgY291bGRuJ3QgYXNzb2NpYXRlIHdpdGggYSBwYXJ0aWNpcGFudCB5ZXQuXG4gIC8vIFRoaXMgaGFwcGVucyB3aGVuIHRoZSBwYXJ0aWNpcGFudEpvaW5lZCBldmVudCBoYXNuJ3QgYmVlbiByZWNlaXZlZCB5ZXQuXG4gIC8vIFdlIGtlZXAgdGhlc2UgdHJhY2tzIGFyb3VuZCB1bnRpbCB3ZSBjYW4gYXNzb2NpYXRlIHRoZW0gd2l0aCBhIHBhcnRpY2lwYW50LlxuICBwcml2YXRlIG9ycGhhbmVkVHJhY2tzOiBPcnBoYW5lZFRyYWNrW10gPSBbXTtcblxuICAvLyBEZXJpdmVkIHN0YXRlXG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIHRoZSBjYWxsIHNlc3Npb24gYWN0dWFsbHkgc3RhcnRlZC5cbiAgICogVXNlZnVsIGZvciBkaXNwbGF5aW5nIHRoZSBjYWxsIGR1cmF0aW9uLlxuICAgKi9cbiAgc3RhcnRlZEF0JDogT2JzZXJ2YWJsZTxEYXRlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogVGhlIHNlcnZlci1zaWRlIGNvdW50ZWQgbnVtYmVyIG9mIHBhcnRpY2lwYW50cyBjb25uZWN0ZWQgdG8gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICogVGhpcyBudW1iZXIgaW5jbHVkZXMgdGhlIGFub255bW91cyBwYXJ0aWNpcGFudHMgYXMgd2VsbC5cbiAgICovXG4gIHBhcnRpY2lwYW50Q291bnQkOiBPYnNlcnZhYmxlPG51bWJlcj47XG5cbiAgLyoqXG4gICAqIFRoZSBzZXJ2ZXItc2lkZSBjb3VudGVkIG51bWJlciBvZiBhbm9ueW1vdXMgcGFydGljaXBhbnRzIGNvbm5lY3RlZCB0byB0aGUgY3VycmVudCBjYWxsLlxuICAgKiBUaGlzIG51bWJlciBleGNsdWRlcyB0aGUgcmVndWxhciBwYXJ0aWNpcGFudHMuXG4gICAqL1xuICBhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JDogT2JzZXJ2YWJsZTxudW1iZXI+O1xuXG4gIC8qKlxuICAgKiBBbGwgcGFydGljaXBhbnRzIG9mIHRoZSBjdXJyZW50IGNhbGwgKHRoaXMgaW5jbHVkZXMgdGhlIGN1cnJlbnQgdXNlciBhbmQgb3RoZXIgcGFydGljaXBhbnRzIGFzIHdlbGwpLlxuICAgKi9cbiAgcGFydGljaXBhbnRzJDogT2JzZXJ2YWJsZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50W10+O1xuXG4gIC8qKlxuICAgKiBSZW1vdGUgcGFydGljaXBhbnRzIG9mIHRoZSBjdXJyZW50IGNhbGwgKHRoaXMgaW5jbHVkZXMgZXZlcnkgcGFydGljaXBhbnQgZXhjZXB0IHRoZSBsb2dnZWQtaW4gdXNlcikuXG4gICAqL1xuICByZW1vdGVQYXJ0aWNpcGFudHMkOiBPYnNlcnZhYmxlPFN0cmVhbVZpZGVvUGFydGljaXBhbnRbXT47XG5cbiAgLyoqXG4gICAqIFRoZSBsb2NhbCBwYXJ0aWNpcGFudCBvZiB0aGUgY3VycmVudCBjYWxsICh0aGUgbG9nZ2VkLWluIHVzZXIpLlxuICAgKi9cbiAgbG9jYWxQYXJ0aWNpcGFudCQ6IE9ic2VydmFibGU8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFBpbm5lZCBwYXJ0aWNpcGFudHMgb2YgdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIHBpbm5lZFBhcnRpY2lwYW50cyQ6IE9ic2VydmFibGU8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudFtdPjtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseSBlbGVjdGVkIGRvbWluYW50IHNwZWFrZXIgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGRvbWluYW50U3BlYWtlciQ6IE9ic2VydmFibGU8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIEVtaXRzIHRydWUgd2hlbmV2ZXIgdGhlcmUgaXMgYW4gYWN0aXZlIHNjcmVlbiBzaGFyaW5nIHNlc3Npb24gd2l0aGluXG4gICAqIHRoZSBjdXJyZW50IGNhbGwuIFVzZWZ1bCBmb3IgZGlzcGxheWluZyBhIFwic2NyZWVuIHNoYXJpbmdcIiBpbmRpY2F0b3IgYW5kXG4gICAqIHN3aXRjaGluZyB0aGUgbGF5b3V0IHRvIGEgc2NyZWVuIHNoYXJpbmcgbGF5b3V0LlxuICAgKlxuICAgKiBUaGUgYWN0dWFsIHNjcmVlbiBzaGFyaW5nIHRyYWNrIGlzbid0IGV4cG9zZWQgaGVyZSwgYnV0IGNhbiBiZSByZXRyaWV2ZWRcbiAgICogZnJvbSB0aGUgbGlzdCBvZiBjYWxsIHBhcnRpY2lwYW50cy4gV2UgYWxzbyBkb24ndCB3YW50IHRvIGJlIGxpbWl0aW5nXG4gICAqIHRvIHRoZSBudW1iZXIgb2Ygc2hhcmUgc2NyZWVuIHRyYWNrcyBhcmUgZGlzcGxheWVkIGluIGEgY2FsbC5cbiAgICovXG4gIGhhc09uZ29pbmdTY3JlZW5TaGFyZSQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIFRoZSBsYXRlc3Qgc3RhdHMgcmVwb3J0IG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqIFdoZW4gc3RhdHMgZ2F0aGVyaW5nIGlzIGVuYWJsZWQsIHRoaXMgb2JzZXJ2YWJsZSB3aWxsIGVtaXQgYSBuZXcgdmFsdWVcbiAgICogYXQgYSByZWd1bGFyIChjb25maWd1cmFibGUpIGludGVydmFsLlxuICAgKlxuICAgKiBDb25zdW1lcnMgb2YgdGhpcyBvYnNlcnZhYmxlIGNhbiBpbXBsZW1lbnQgdGhlaXIgb3duIGJhdGNoaW5nIGxvZ2ljXG4gICAqIGluIGNhc2UgdGhleSB3YW50IHRvIHNob3cgaGlzdG9yaWNhbCBzdGF0cyBkYXRhLlxuICAgKi9cbiAgY2FsbFN0YXRzUmVwb3J0JDogT2JzZXJ2YWJsZTxDYWxsU3RhdHNSZXBvcnQgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBtZW1iZXJzIGluIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqL1xuICBtZW1iZXJzJDogT2JzZXJ2YWJsZTxNZW1iZXJSZXNwb25zZVtdPjtcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgY2FwYWJpbGl0aWVzIG9mIHRoZSBjdXJyZW50IHVzZXIuXG4gICAqL1xuICBvd25DYXBhYmlsaXRpZXMkOiBPYnNlcnZhYmxlPE93bkNhcGFiaWxpdHlbXT47XG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsaW5nIHN0YXRlLlxuICAgKi9cbiAgY2FsbGluZ1N0YXRlJDogT2JzZXJ2YWJsZTxDYWxsaW5nU3RhdGU+O1xuXG4gIC8qKlxuICAgKiBUaGUgYmFja3N0YWdlIHN0YXRlLlxuICAgKi9cbiAgYmFja3N0YWdlJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBsaXN0IG9mIGJsb2NrZWQgdXNlciBJRHMuXG4gICAqL1xuICBibG9ja2VkVXNlcklkcyQ6IE9ic2VydmFibGU8c3RyaW5nW10+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRBdCQ6IE9ic2VydmFibGU8RGF0ZT47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiBlbmRlZC5cbiAgICovXG4gIGVuZGVkQXQkOiBPYnNlcnZhYmxlPERhdGUgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIHN0YXJ0LlxuICAgKi9cbiAgc3RhcnRzQXQkOiBPYnNlcnZhYmxlPERhdGUgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gdXBkYXRlZC5cbiAgICovXG4gIHVwZGF0ZWRBdCQ6IE9ic2VydmFibGU8RGF0ZT47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdXNlciB3aG8gY3JlYXRlZCB0aGlzIGNhbGwuXG4gICAqL1xuICBjcmVhdGVkQnkkOiBPYnNlcnZhYmxlPFVzZXJSZXNwb25zZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgY3VzdG9tIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgY3VzdG9tJDogT2JzZXJ2YWJsZTxSZWNvcmQ8c3RyaW5nLCBhbnk+PjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBlZ3Jlc3MgZGF0YSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBlZ3Jlc3MkOiBPYnNlcnZhYmxlPEVncmVzc1Jlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBpbmdyZXNzIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgaW5ncmVzcyQ6IE9ic2VydmFibGU8Q2FsbEluZ3Jlc3NSZXNwb25zZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgcmVjb3JkaW5nIHN0YXRlIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHJlY29yZGluZyQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgc2Vzc2lvbiBkYXRhIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHNlc3Npb24kOiBPYnNlcnZhYmxlPENhbGxTZXNzaW9uUmVzcG9uc2UgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHNldHRpbmdzIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHNldHRpbmdzJDogT2JzZXJ2YWJsZTxDYWxsU2V0dGluZ3NSZXNwb25zZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdHJhbnNjcmliaW5nIHN0YXRlIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHRyYW5zY3JpYmluZyQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdXNlciB3aG8gZW5kZWQgdGhpcyBjYWxsLlxuICAgKi9cbiAgZW5kZWRCeSQ6IE9ic2VydmFibGU8VXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB0aHVtYm5haWxzIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHRodW1ibmFpbHMkOiBPYnNlcnZhYmxlPFRodW1ibmFpbFJlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICByZWFkb25seSBsb2dnZXIgPSBnZXRMb2dnZXIoWydDYWxsU3RhdGUnXSk7XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBjb21wYXJhdG9ycyB0aGF0IGFyZSB1c2VkIHRvIHNvcnQgdGhlIHBhcnRpY2lwYW50cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgc29ydFBhcnRpY2lwYW50c0J5ID0gZGVmYXVsdFNvcnRQcmVzZXQ7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBldmVudEhhbmRsZXJzOiB7XG4gICAgW0V2ZW50VHlwZSBpbiBXU0V2ZW50Wyd0eXBlJ11dOlxuICAgICAgfCAoKGV2ZW50OiBFeHRyYWN0PFdTRXZlbnQsIHsgdHlwZTogRXZlbnRUeXBlIH0+KSA9PiB2b2lkKVxuICAgICAgfCB1bmRlZmluZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIENhbGxTdGF0ZSBjbGFzcy5cbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucGFydGljaXBhbnRzJCA9IHRoaXMucGFydGljaXBhbnRzU3ViamVjdC5hc09ic2VydmFibGUoKS5waXBlKFxuICAgICAgLy8gbWFpbnRhaW4gc3RhYmxlLXNvcnQgYnkgbXV0YXRpbmcgdGhlIHBhcnRpY2lwYW50cyBzdG9yZWRcbiAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBzdWJqZWN0XG4gICAgICBtYXAoKHBzKSA9PiBwcy5zb3J0KHRoaXMuc29ydFBhcnRpY2lwYW50c0J5KSksXG4gICAgICBzaGFyZVJlcGxheSh7IGJ1ZmZlclNpemU6IDEsIHJlZkNvdW50OiB0cnVlIH0pLFxuICAgICk7XG5cbiAgICB0aGlzLmxvY2FsUGFydGljaXBhbnQkID0gdGhpcy5wYXJ0aWNpcGFudHMkLnBpcGUoXG4gICAgICBtYXAoKHBhcnRpY2lwYW50cykgPT4gcGFydGljaXBhbnRzLmZpbmQoKHApID0+IHAuaXNMb2NhbFBhcnRpY2lwYW50KSksXG4gICAgICBzaGFyZVJlcGxheSh7IGJ1ZmZlclNpemU6IDEsIHJlZkNvdW50OiB0cnVlIH0pLFxuICAgICk7XG5cbiAgICB0aGlzLnJlbW90ZVBhcnRpY2lwYW50cyQgPSB0aGlzLnBhcnRpY2lwYW50cyQucGlwZShcbiAgICAgIG1hcCgocGFydGljaXBhbnRzKSA9PiBwYXJ0aWNpcGFudHMuZmlsdGVyKChwKSA9PiAhcC5pc0xvY2FsUGFydGljaXBhbnQpKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIHRoaXMucGlubmVkUGFydGljaXBhbnRzJCA9IHRoaXMucGFydGljaXBhbnRzJC5waXBlKFxuICAgICAgbWFwKChwYXJ0aWNpcGFudHMpID0+IHBhcnRpY2lwYW50cy5maWx0ZXIoKHApID0+ICEhcC5waW4pKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIHRoaXMuZG9taW5hbnRTcGVha2VyJCA9IHRoaXMucGFydGljaXBhbnRzJC5waXBlKFxuICAgICAgbWFwKChwYXJ0aWNpcGFudHMpID0+IHBhcnRpY2lwYW50cy5maW5kKChwKSA9PiBwLmlzRG9taW5hbnRTcGVha2VyKSksXG4gICAgICBzaGFyZVJlcGxheSh7IGJ1ZmZlclNpemU6IDEsIHJlZkNvdW50OiB0cnVlIH0pLFxuICAgICk7XG5cbiAgICB0aGlzLmhhc09uZ29pbmdTY3JlZW5TaGFyZSQgPSB0aGlzLnBhcnRpY2lwYW50cyQucGlwZShcbiAgICAgIG1hcCgocGFydGljaXBhbnRzKSA9PiBwYXJ0aWNpcGFudHMuc29tZSgocCkgPT4gaGFzU2NyZWVuU2hhcmUocCkpKSxcbiAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICBzaGFyZVJlcGxheSh7IGJ1ZmZlclNpemU6IDEsIHJlZkNvdW50OiB0cnVlIH0pLFxuICAgICk7XG5cbiAgICAvLyBkYXRlc1xuICAgIHRoaXMuY3JlYXRlZEF0JCA9IHRoaXMuY3JlYXRlZEF0U3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLmVuZGVkQXQkID0gdGhpcy5lbmRlZEF0U3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLnN0YXJ0c0F0JCA9IHRoaXMuc3RhcnRzQXRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuc3RhcnRlZEF0JCA9IHRoaXMuc3RhcnRlZEF0U3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLnVwZGF0ZWRBdCQgPSB0aGlzLnVwZGF0ZWRBdFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgICB0aGlzLmNhbGxTdGF0c1JlcG9ydCQgPSB0aGlzLmNhbGxTdGF0c1JlcG9ydFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5tZW1iZXJzJCA9IHRoaXMubWVtYmVyc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgICAvLyBjb21wbGV4IG9iamVjdHMgc2hvdWxkIHdvcmsgYXMgc3RyZWFtcyBvZiBkYXRhXG4gICAgdGhpcy5jcmVhdGVkQnkkID0gdGhpcy5jcmVhdGVkQnlTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuY3VzdG9tJCA9IHRoaXMuY3VzdG9tU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLmVncmVzcyQgPSB0aGlzLmVncmVzc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5pbmdyZXNzJCA9IHRoaXMuaW5ncmVzc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5zZXNzaW9uJCA9IHRoaXMuc2Vzc2lvblN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5zZXR0aW5ncyQgPSB0aGlzLnNldHRpbmdzU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLmVuZGVkQnkkID0gdGhpcy5lbmRlZEJ5U3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLnRodW1ibmFpbHMkID0gdGhpcy50aHVtYm5haWxzU3ViamVjdC5hc09ic2VydmFibGUoKTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIHNoYWxsb3cgY29tcGFyaXNvbiBvZiB0d28gYXJyYXlzLlxuICAgICAqIEV4cGVjdHMgcHJpbWl0aXZlIHZhbHVlczogWzEsIDIsIDNdIGlzIGVxdWFsIHRvIFsyLCAxLCAzXS5cbiAgICAgKi9cbiAgICBjb25zdCBpc1NoYWxsb3dFcXVhbCA9IDxUPihhOiBBcnJheTxUPiwgYjogQXJyYXk8VD4pOiBib29sZWFuID0+IHtcbiAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhKSBpZiAoIWIuaW5jbHVkZXMoaXRlbSkpIHJldHVybiBmYWxzZTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBiKSBpZiAoIWEuaW5jbHVkZXMoaXRlbSkpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSB0aGUgZ2l2ZW4gc3ViamVjdCBieSBwaXBpbmcgdG8gdGhlXG4gICAgICogYGRpc3RpbmN0VW50aWxDaGFuZ2VkKClgIG9wZXJhdG9yLlxuICAgICAqL1xuICAgIGNvbnN0IGR1YyA9IDxUPihcbiAgICAgIHN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxUPixcbiAgICAgIGNvbXBhcmF0b3I/OiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbixcbiAgICApOiBPYnNlcnZhYmxlPFQ+ID0+XG4gICAgICBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoY29tcGFyYXRvcikpO1xuXG4gICAgLy8gcHJpbWl0aXZlIHZhbHVlcyBzaG91bGQgb25seSBlbWl0IG9uY2UgdGhlIHZhbHVlIHRoZXkgaG9sZCBjaGFuZ2VzXG4gICAgdGhpcy5hbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCA9IGR1YyhcbiAgICAgIHRoaXMuYW5vbnltb3VzUGFydGljaXBhbnRDb3VudFN1YmplY3QsXG4gICAgKTtcbiAgICB0aGlzLmJsb2NrZWRVc2VySWRzJCA9IGR1Yyh0aGlzLmJsb2NrZWRVc2VySWRzU3ViamVjdCwgaXNTaGFsbG93RXF1YWwpO1xuICAgIHRoaXMuYmFja3N0YWdlJCA9IGR1Yyh0aGlzLmJhY2tzdGFnZVN1YmplY3QpO1xuICAgIHRoaXMuY2FsbGluZ1N0YXRlJCA9IGR1Yyh0aGlzLmNhbGxpbmdTdGF0ZVN1YmplY3QpO1xuICAgIHRoaXMub3duQ2FwYWJpbGl0aWVzJCA9IGR1Yyh0aGlzLm93bkNhcGFiaWxpdGllc1N1YmplY3QsIGlzU2hhbGxvd0VxdWFsKTtcbiAgICB0aGlzLnBhcnRpY2lwYW50Q291bnQkID0gZHVjKHRoaXMucGFydGljaXBhbnRDb3VudFN1YmplY3QpO1xuICAgIHRoaXMucmVjb3JkaW5nJCA9IGR1Yyh0aGlzLnJlY29yZGluZ1N1YmplY3QpO1xuICAgIHRoaXMudHJhbnNjcmliaW5nJCA9IGR1Yyh0aGlzLnRyYW5zY3JpYmluZ1N1YmplY3QpO1xuXG4gICAgdGhpcy5ldmVudEhhbmRsZXJzID0ge1xuICAgICAgLy8gdGhlc2UgZXZlbnRzIGFyZSBub3QgdXBkYXRpbmcgdGhlIGNhbGwgc3RhdGU6XG4gICAgICAnY2FsbC5jbG9zZWRfY2FwdGlvbic6IHVuZGVmaW5lZCxcbiAgICAgICdjYWxsLmRlbGV0ZWQnOiB1bmRlZmluZWQsXG4gICAgICAnY2FsbC5wZXJtaXNzaW9uX3JlcXVlc3QnOiB1bmRlZmluZWQsXG4gICAgICAnY2FsbC5yZWNvcmRpbmdfcmVhZHknOiB1bmRlZmluZWQsXG4gICAgICAnY2FsbC50cmFuc2NyaXB0aW9uX3JlYWR5JzogdW5kZWZpbmVkLFxuICAgICAgJ2NhbGwudXNlcl9tdXRlZCc6IHVuZGVmaW5lZCxcbiAgICAgICdjb25uZWN0aW9uLmVycm9yJzogdW5kZWZpbmVkLFxuICAgICAgJ2Nvbm5lY3Rpb24ub2snOiB1bmRlZmluZWQsXG4gICAgICAnaGVhbHRoLmNoZWNrJzogdW5kZWZpbmVkLFxuICAgICAgJ3VzZXIuYmFubmVkJzogdW5kZWZpbmVkLFxuICAgICAgJ3VzZXIuZGVhY3RpdmF0ZWQnOiB1bmRlZmluZWQsXG4gICAgICAndXNlci5kZWxldGVkJzogdW5kZWZpbmVkLFxuICAgICAgJ3VzZXIubXV0ZWQnOiB1bmRlZmluZWQsXG4gICAgICAndXNlci5wcmVzZW5jZS5jaGFuZ2VkJzogdW5kZWZpbmVkLFxuICAgICAgJ3VzZXIucmVhY3RpdmF0ZWQnOiB1bmRlZmluZWQsXG4gICAgICAndXNlci51bmJhbm5lZCc6IHVuZGVmaW5lZCxcbiAgICAgICd1c2VyLnVwZGF0ZWQnOiB1bmRlZmluZWQsXG4gICAgICBjdXN0b206IHVuZGVmaW5lZCxcblxuICAgICAgLy8gZXZlbnRzIHRoYXQgdXBkYXRlIGNhbGwgc3RhdGU6XG4gICAgICAnY2FsbC5hY2NlcHRlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICAgICdjYWxsLmJsb2NrZWRfdXNlcic6IHRoaXMuYmxvY2tVc2VyLFxuICAgICAgJ2NhbGwuY3JlYXRlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICAgICdjYWxsLmVuZGVkJzogKGUpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCk7XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuZW5kZWRCeVN1YmplY3QsIGUudXNlcik7XG4gICAgICB9LFxuICAgICAgJ2NhbGwuaGxzX2Jyb2FkY2FzdGluZ19mYWlsZWQnOiB0aGlzLnVwZGF0ZUZyb21ITFNCcm9hZGNhc3RpbmdGYWlsZWQsXG4gICAgICAnY2FsbC5obHNfYnJvYWRjYXN0aW5nX3N0YXJ0ZWQnOiB0aGlzLnVwZGF0ZUZyb21ITFNCcm9hZGNhc3RTdGFydGVkLFxuICAgICAgJ2NhbGwuaGxzX2Jyb2FkY2FzdGluZ19zdG9wcGVkJzogdGhpcy51cGRhdGVGcm9tSExTQnJvYWRjYXN0U3RvcHBlZCxcbiAgICAgICdjYWxsLmxpdmVfc3RhcnRlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICAgICdjYWxsLm1lbWJlcl9hZGRlZCc6IHRoaXMudXBkYXRlRnJvbU1lbWJlckFkZGVkLFxuICAgICAgJ2NhbGwubWVtYmVyX3JlbW92ZWQnOiB0aGlzLnVwZGF0ZUZyb21NZW1iZXJSZW1vdmVkLFxuICAgICAgJ2NhbGwubWVtYmVyX3VwZGF0ZWRfcGVybWlzc2lvbic6IHRoaXMudXBkYXRlTWVtYmVycyxcbiAgICAgICdjYWxsLm1lbWJlcl91cGRhdGVkJzogdGhpcy51cGRhdGVNZW1iZXJzLFxuICAgICAgJ2NhbGwubm90aWZpY2F0aW9uJzogKGUpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCk7XG4gICAgICAgIHRoaXMuc2V0TWVtYmVycyhlLm1lbWJlcnMpO1xuICAgICAgfSxcbiAgICAgICdjYWxsLnBlcm1pc3Npb25zX3VwZGF0ZWQnOiB0aGlzLnVwZGF0ZU93bkNhcGFiaWxpdGllcyxcbiAgICAgICdjYWxsLnJlYWN0aW9uX25ldyc6IHRoaXMudXBkYXRlUGFydGljaXBhbnRSZWFjdGlvbixcbiAgICAgICdjYWxsLnJlY29yZGluZ19zdGFydGVkJzogKCkgPT5cbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5yZWNvcmRpbmdTdWJqZWN0LCB0cnVlKSxcbiAgICAgICdjYWxsLnJlY29yZGluZ19zdG9wcGVkJzogKCkgPT5cbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5yZWNvcmRpbmdTdWJqZWN0LCBmYWxzZSksXG4gICAgICAnY2FsbC5yZWNvcmRpbmdfZmFpbGVkJzogKCkgPT5cbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5yZWNvcmRpbmdTdWJqZWN0LCBmYWxzZSksXG4gICAgICAnY2FsbC5yZWplY3RlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICAgICdjYWxsLnJpbmcnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC5taXNzZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC5zZXNzaW9uX2VuZGVkJzogKGUpID0+IHRoaXMudXBkYXRlRnJvbUNhbGxSZXNwb25zZShlLmNhbGwpLFxuICAgICAgJ2NhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9jb3VudF91cGRhdGVkJzpcbiAgICAgICAgdGhpcy51cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50Q291bnRVcGRhdGUsXG4gICAgICAnY2FsbC5zZXNzaW9uX3BhcnRpY2lwYW50X2pvaW5lZCc6XG4gICAgICAgIHRoaXMudXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZCxcbiAgICAgICdjYWxsLnNlc3Npb25fcGFydGljaXBhbnRfbGVmdCc6IHRoaXMudXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudExlZnQsXG4gICAgICAnY2FsbC5zZXNzaW9uX3N0YXJ0ZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC50cmFuc2NyaXB0aW9uX3N0YXJ0ZWQnOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMudHJhbnNjcmliaW5nU3ViamVjdCwgdHJ1ZSk7XG4gICAgICB9LFxuICAgICAgJ2NhbGwudHJhbnNjcmlwdGlvbl9zdG9wcGVkJzogKCkgPT4ge1xuICAgICAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnRyYW5zY3JpYmluZ1N1YmplY3QsIGZhbHNlKTtcbiAgICAgIH0sXG4gICAgICAnY2FsbC50cmFuc2NyaXB0aW9uX2ZhaWxlZCc6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy50cmFuc2NyaWJpbmdTdWJqZWN0LCBmYWxzZSk7XG4gICAgICB9LFxuICAgICAgJ2NhbGwudW5ibG9ja2VkX3VzZXInOiB0aGlzLnVuYmxvY2tVc2VyLFxuICAgICAgJ2NhbGwudXBkYXRlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxpc3Qgb2YgY3JpdGVyaWEgdGhhdCBhcmUgdXNlZCB0byBzb3J0IHRoZSBwYXJ0aWNpcGFudHMuXG4gICAqIFRvIGRpc2FibGUgc29ydGluZywgeW91IGNhbiBwYXNzIGBub29wQ29tcGFyYXRvcigpYC5cbiAgICpcbiAgICogQHBhcmFtIGNvbXBhcmF0b3IgdGhlIGNvbXBhcmF0b3IgdG8gdXNlIHRvIHNvcnQgdGhlIHBhcnRpY2lwYW50cy5cbiAgICovXG4gIHNldFNvcnRQYXJ0aWNpcGFudHNCeSA9IChjb21wYXJhdG9yOiBDb21wYXJhdG9yPFN0cmVhbVZpZGVvUGFydGljaXBhbnQ+KSA9PiB7XG4gICAgdGhpcy5zb3J0UGFydGljaXBhbnRzQnkgPSBjb21wYXJhdG9yO1xuICAgIC8vIHRyaWdnZXIgcmUtc29ydGluZyBvZiBwYXJ0aWNpcGFudHNcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnBhcnRpY2lwYW50c1N1YmplY3QsIChwcykgPT4gcHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGFuIG9ic2VydmFibGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgb2JzZXJ2YWJsZSBoYXNcbiAgICogbm90IGVtaXR0ZWQgYSB2YWx1ZSB5ZXQuXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZhYmxlJCB0aGUgb2JzZXJ2YWJsZSB0byBnZXQgdGhlIHZhbHVlIGZyb20uXG4gICAqL1xuICBnZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgdmFsdWUgb2YgdGhlIHByb3ZpZGVkIFN1YmplY3QuXG4gICAqIEFuIGB1cGRhdGVgIGNhbiBlaXRoZXIgYmUgYSBuZXcgdmFsdWUgb3IgYSBmdW5jdGlvbiB3aGljaCB0YWtlc1xuICAgKiB0aGUgY3VycmVudCB2YWx1ZSBhbmQgcmV0dXJucyBhIG5ldyB2YWx1ZS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBzdWJqZWN0IHRoZSBzdWJqZWN0IHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHVwZGF0ZSB0aGUgdXBkYXRlIHRvIGFwcGx5IHRvIHRoZSBzdWJqZWN0LlxuICAgKiBAcmV0dXJuIHRoZSB1cGRhdGVkIHZhbHVlLlxuICAgKi9cbiAgc2V0Q3VycmVudFZhbHVlID0gUnhVdGlscy5zZXRDdXJyZW50VmFsdWU7XG5cbiAgLyoqXG4gICAqIFRoZSBzZXJ2ZXItc2lkZSBjb3VudGVkIG51bWJlciBvZiBwYXJ0aWNpcGFudHMgY29ubmVjdGVkIHRvIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqIFRoaXMgbnVtYmVyIGluY2x1ZGVzIHRoZSBhbm9ueW1vdXMgcGFydGljaXBhbnRzIGFzIHdlbGwuXG4gICAqL1xuICBnZXQgcGFydGljaXBhbnRDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5wYXJ0aWNpcGFudENvdW50JCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbnVtYmVyIG9mIHBhcnRpY2lwYW50cyBpbiB0aGUgY3VycmVudCBjYWxsLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIGNvdW50IHRoZSBudW1iZXIgb2YgcGFydGljaXBhbnRzLlxuICAgKi9cbiAgc2V0UGFydGljaXBhbnRDb3VudCA9IChjb3VudDogUGF0Y2g8bnVtYmVyPikgPT4ge1xuICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnBhcnRpY2lwYW50Q291bnRTdWJqZWN0LCBjb3VudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIHRoZSBjYWxsIHNlc3Npb24gYWN0dWFsbHkgc3RhcnRlZC5cbiAgICogVXNlZnVsIGZvciBkaXNwbGF5aW5nIHRoZSBjYWxsIGR1cmF0aW9uLlxuICAgKi9cbiAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5zdGFydGVkQXQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0aW1lIHRoZSBjYWxsIHNlc3Npb24gYWN0dWFsbHkgc3RhcnRlZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBzdGFydGVkQXQgdGhlIHRpbWUgdGhlIGNhbGwgc2Vzc2lvbiBhY3R1YWxseSBzdGFydGVkLlxuICAgKi9cbiAgc2V0U3RhcnRlZEF0ID0gKHN0YXJ0ZWRBdDogUGF0Y2g8RGF0ZSB8IHVuZGVmaW5lZD4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zdGFydGVkQXRTdWJqZWN0LCBzdGFydGVkQXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgc2VydmVyLXNpZGUgY291bnRlZCBudW1iZXIgb2YgYW5vbnltb3VzIHBhcnRpY2lwYW50cyBjb25uZWN0ZWQgdG8gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICogVGhpcyBudW1iZXIgaW5jbHVkZXMgdGhlIGFub255bW91cyBwYXJ0aWNpcGFudHMgYXMgd2VsbC5cbiAgICovXG4gIGdldCBhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmFub255bW91c1BhcnRpY2lwYW50Q291bnQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBudW1iZXIgb2YgYW5vbnltb3VzIHBhcnRpY2lwYW50cyBpbiB0aGUgY3VycmVudCBjYWxsLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIGNvdW50IHRoZSBudW1iZXIgb2YgYW5vbnltb3VzIHBhcnRpY2lwYW50cy5cbiAgICovXG4gIHNldEFub255bW91c1BhcnRpY2lwYW50Q291bnQgPSAoY291bnQ6IFBhdGNoPG51bWJlcj4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5hbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50U3ViamVjdCwgY291bnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCBwYXJ0aWNpcGFudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMucGFydGljaXBhbnRzJCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbGlzdCBvZiBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBwYXJ0aWNpcGFudHMgdGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzLlxuICAgKi9cbiAgc2V0UGFydGljaXBhbnRzID0gKHBhcnRpY2lwYW50czogUGF0Y2g8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudFtdPikgPT4ge1xuICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnBhcnRpY2lwYW50c1N1YmplY3QsIHBhcnRpY2lwYW50cyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSBsb2NhbCBwYXJ0aWNpcGFudCBpbiB0aGUgY3VycmVudCBjYWxsLlxuICAgKi9cbiAgZ2V0IGxvY2FsUGFydGljaXBhbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMubG9jYWxQYXJ0aWNpcGFudCQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIHJlbW90ZSBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCByZW1vdGVQYXJ0aWNpcGFudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMucmVtb3RlUGFydGljaXBhbnRzJCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRvbWluYW50IHNwZWFrZXIgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCBkb21pbmFudFNwZWFrZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuZG9taW5hbnRTcGVha2VyJCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgcGlubmVkIHBhcnRpY2lwYW50cyBpbiB0aGUgY3VycmVudCBjYWxsLlxuICAgKi9cbiAgZ2V0IHBpbm5lZFBhcnRpY2lwYW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5waW5uZWRQYXJ0aWNpcGFudHMkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZWxsIGlmIHRoZXJlIGlzIGFuIG9uZ29pbmcgc2NyZWVuIHNoYXJlIGluIHRoaXMgY2FsbC5cbiAgICovXG4gIGdldCBoYXNPbmdvaW5nU2NyZWVuU2hhcmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuaGFzT25nb2luZ1NjcmVlblNoYXJlJCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNhbGxpbmcgc3RhdGUuXG4gICAqL1xuICBnZXQgY2FsbGluZ1N0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmNhbGxpbmdTdGF0ZSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGNhbGxpbmcgc3RhdGUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gc3RhdGUgdGhlIG5ldyBjYWxsaW5nIHN0YXRlLlxuICAgKi9cbiAgc2V0Q2FsbGluZ1N0YXRlID0gKHN0YXRlOiBQYXRjaDxDYWxsaW5nU3RhdGU+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuY2FsbGluZ1N0YXRlU3ViamVjdCwgc3RhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBzdGF0cyByZXBvcnQuXG4gICAqL1xuICBnZXQgY2FsbFN0YXRzUmVwb3J0KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmNhbGxTdGF0c1JlcG9ydCQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGNhbGwgc3RhdHMgcmVwb3J0LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHJlcG9ydCB0aGUgcmVwb3J0IHRvIHNldC5cbiAgICovXG4gIHNldENhbGxTdGF0c1JlcG9ydCA9IChyZXBvcnQ6IFBhdGNoPENhbGxTdGF0c1JlcG9ydCB8IHVuZGVmaW5lZD4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5jYWxsU3RhdHNSZXBvcnRTdWJqZWN0LCByZXBvcnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgbWVtYmVycyBvZiB0aGUgY3VycmVudCBjYWxsLlxuICAgKi9cbiAgZ2V0IG1lbWJlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMubWVtYmVycyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG1lbWJlcnMgb2YgdGhlIGN1cnJlbnQgY2FsbC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBtZW1iZXJzIHRoZSBtZW1iZXJzIHRvIHNldC5cbiAgICovXG4gIHNldE1lbWJlcnMgPSAobWVtYmVyczogUGF0Y2g8TWVtYmVyUmVzcG9uc2VbXT4pID0+IHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLm1lbWJlcnNTdWJqZWN0LCBtZW1iZXJzKTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIGNhcGFiaWxpdGllcyBvZiB0aGUgY3VycmVudCB1c2VyIGZvciB0aGUgY3VycmVudCBjYWxsLlxuICAgKi9cbiAgZ2V0IG93bkNhcGFiaWxpdGllcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5vd25DYXBhYmlsaXRpZXMkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvd24gY2FwYWJpbGl0aWVzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIGNhcGFiaWxpdGllcyB0aGUgY2FwYWJpbGl0aWVzIHRvIHNldC5cbiAgICovXG4gIHNldE93bkNhcGFiaWxpdGllcyA9IChjYXBhYmlsaXRpZXM6IFBhdGNoPE93bkNhcGFiaWxpdHlbXT4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5vd25DYXBhYmlsaXRpZXNTdWJqZWN0LCBjYXBhYmlsaXRpZXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgYmFja3N0YWdlIHN0YXRlLlxuICAgKi9cbiAgZ2V0IGJhY2tzdGFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5iYWNrc3RhZ2UkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIGxpc3Qgb2YgYmxvY2tlZCB1c2VyIElEcy5cbiAgICovXG4gIGdldCBibG9ja2VkVXNlcklkcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5ibG9ja2VkVXNlcklkcyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgKi9cbiAgZ2V0IGNyZWF0ZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5jcmVhdGVkQXQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gZW5kZWQuXG4gICAqL1xuICBnZXQgZW5kZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5lbmRlZEF0JCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiBlbmRlZC5cbiAgICogQHBhcmFtIGVuZGVkQXQgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gZW5kZWQuXG4gICAqL1xuICBzZXRFbmRlZEF0ID0gKGVuZGVkQXQ6IFBhdGNoPERhdGUgfCB1bmRlZmluZWQ+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuZW5kZWRBdFN1YmplY3QsIGVuZGVkQXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIHN0YXJ0LlxuICAgKi9cbiAgZ2V0IHN0YXJ0c0F0KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnN0YXJ0c0F0JCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB0aW1lIHdoZW4gdGhpcyBjYWxsIGhhcyBiZWVuIHVwZGF0ZWQuXG4gICAqL1xuICBnZXQgdXBkYXRlZEF0KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnVwZGF0ZWRBdCQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdXNlciB3aG8gY3JlYXRlZCB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgY3JlYXRlZEJ5KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmNyZWF0ZWRCeSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgY3VzdG9tIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IGN1c3RvbSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5jdXN0b20kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIGVncmVzcyBkYXRhIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIGdldCBlZ3Jlc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuZWdyZXNzJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBpbmdyZXNzIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IGluZ3Jlc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuaW5ncmVzcyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgcmVjb3JkaW5nIHN0YXRlIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIGdldCByZWNvcmRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMucmVjb3JkaW5nJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBzZXNzaW9uIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IHNlc3Npb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc2Vzc2lvbiQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgc2V0dGluZ3Mgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IHNldHRpbmdzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnNldHRpbmdzJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB0cmFuc2NyaWJpbmcgc3RhdGUgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IHRyYW5zY3JpYmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy50cmFuc2NyaWJpbmckKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHVzZXIgd2hvIGVuZGVkIHRoaXMgY2FsbC5cbiAgICovXG4gIGdldCBlbmRlZEJ5KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmVuZGVkQnkkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRodW1ibmFpbHMgb2YgdGhpcyBjYWxsLCBpZiBlbmFibGVkIGluIHRoZSBjYWxsIHNldHRpbmdzLlxuICAgKi9cbiAgZ2V0IHRodW1ibmFpbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMudGh1bWJuYWlscyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgdHJ5IHRvIGZpbmQgdGhlIHBhcnRpY2lwYW50IHdpdGggdGhlIGdpdmVuIHNlc3Npb25JZCBpbiB0aGUgY3VycmVudCBjYWxsLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uSWQgb2YgdGhlIHBhcnRpY2lwYW50IHRvIGZpbmQuXG4gICAqIEByZXR1cm5zIHRoZSBwYXJ0aWNpcGFudCB3aXRoIHRoZSBnaXZlbiBzZXNzaW9uSWQgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZC5cbiAgICovXG4gIGZpbmRQYXJ0aWNpcGFudEJ5U2Vzc2lvbklkID0gKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICApOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50IHwgdW5kZWZpbmVkID0+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgbG9va3VwIHRhYmxlIG9mIHBhcnRpY2lwYW50cyBpbmRleGVkIGJ5IHRoZWlyIHNlc3Npb24gSUQuXG4gICAqL1xuICBnZXRQYXJ0aWNpcGFudExvb2t1cEJ5U2Vzc2lvbklkID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5yZWR1Y2U8e1xuICAgICAgW3Nlc3Npb25JZDogc3RyaW5nXTogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB8IHVuZGVmaW5lZDtcbiAgICB9PigobG9va3VwVGFibGUsIHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICBsb29rdXBUYWJsZVtwYXJ0aWNpcGFudC5zZXNzaW9uSWRdID0gcGFydGljaXBhbnQ7XG4gICAgICByZXR1cm4gbG9va3VwVGFibGU7XG4gICAgfSwge30pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgcGFydGljaXBhbnQgaW4gdGhlIGN1cnJlbnQgY2FsbCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBgc2Vzc2lvbklkYC5cbiAgICogSWYgdGhlIHBhcnRpY2lwYW50IGNhbid0IGJlIGZvdW5kLCB0aGlzIG9wZXJhdGlvbiBpcyBuby1vcC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb24gSUQgb2YgdGhlIHBhcnRpY2lwYW50IHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHBhdGNoIHRoZSBwYXRjaCB0byBhcHBseSB0byB0aGUgcGFydGljaXBhbnQuXG4gICAqIEByZXR1cm5zIHRoZSB1cGRhdGVkIHBhcnRpY2lwYW50IG9yIGB1bmRlZmluZWRgIGlmIHRoZSBwYXJ0aWNpcGFudCBjb3VsZG4ndCBiZSBmb3VuZC5cbiAgICovXG4gIHVwZGF0ZVBhcnRpY2lwYW50ID0gKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHBhdGNoOlxuICAgICAgfCBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hcbiAgICAgIHwgKChwOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50KSA9PiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2gpLFxuICApID0+IHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZmluZFBhcnRpY2lwYW50QnlTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB0aGlzLmxvZ2dlcignd2FybicsIGBQYXJ0aWNpcGFudCB3aXRoIHNlc3Npb25JZCAke3Nlc3Npb25JZH0gbm90IGZvdW5kYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGhlUGF0Y2ggPSB0eXBlb2YgcGF0Y2ggPT09ICdmdW5jdGlvbicgPyBwYXRjaChwYXJ0aWNpcGFudCkgOiBwYXRjaDtcbiAgICBjb25zdCB1cGRhdGVkUGFydGljaXBhbnQ6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQgPSB7XG4gICAgICAvLyBGSVhNRSBPTDogdGhpcyBpcyBub3QgYSBkZWVwIG1lcmdlLCB3ZSBtaWdodCB3YW50IHRvIHJldmlzaXQgdGhpc1xuICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICAuLi50aGVQYXRjaCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLnNldFBhcnRpY2lwYW50cygocGFydGljaXBhbnRzKSA9PlxuICAgICAgcGFydGljaXBhbnRzLm1hcCgocCkgPT5cbiAgICAgICAgcC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCA/IHVwZGF0ZWRQYXJ0aWNpcGFudCA6IHAsXG4gICAgICApLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBwYXJ0aWNpcGFudCBpbiB0aGUgY3VycmVudCBjYWxsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuIGBzZXNzaW9uSWRgLlxuICAgKiBJZiBhIHBhcnRpY2lwYW50IHdpdGggbWF0Y2hpbmcgYHNlc3Npb25JZGAgY2FuJ3QgYmUgZm91bmQsIHRoZSBwcm92aWRlZFxuICAgKiBgcGFydGljaXBhbnRgIGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9mIHBhcnRpY2lwYW50cy5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBJRCBvZiB0aGUgcGFydGljaXBhbnQgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0gcGFydGljaXBhbnQgdGhlIHBhcnRpY2lwYW50IHRvIHVwZGF0ZSBvciBhZGQuXG4gICAqL1xuICB1cGRhdGVPckFkZFBhcnRpY2lwYW50ID0gKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHBhcnRpY2lwYW50OiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50LFxuICApID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRQYXJ0aWNpcGFudHMoKHBhcnRpY2lwYW50cykgPT4ge1xuICAgICAgbGV0IGFkZCA9IHRydWU7XG4gICAgICBjb25zdCBuZXh0UGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzLm1hcCgocCkgPT4ge1xuICAgICAgICBpZiAocC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCkge1xuICAgICAgICAgIGFkZCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wLFxuICAgICAgICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0pO1xuICAgICAgaWYgKGFkZCkgbmV4dFBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50KTtcbiAgICAgIHJldHVybiBuZXh0UGFydGljaXBhbnRzO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGFsbCBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbCB3aG9zZSBzZXNzaW9uIElEIGlzIGluIHRoZSBnaXZlbiBgc2Vzc2lvbklkc2AuXG4gICAqIElmIG5vIHBhdGNoZXMgYXJlIHByb3ZpZGVkLCB0aGlzIG9wZXJhdGlvbiBpcyBuby1vcC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBwYXRjaCB0aGUgcGF0Y2ggdG8gYXBwbHkgdG8gdGhlIHBhcnRpY2lwYW50cy5cbiAgICogQHJldHVybnMgYWxsIHBhcnRpY2lwYW50cywgd2l0aCBhbGwgcGF0Y2ggYXBwbGllZC5cbiAgICovXG4gIHVwZGF0ZVBhcnRpY2lwYW50cyA9IChwYXRjaDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoZXMpID0+IHtcbiAgICBpZiAoT2JqZWN0LmtleXMocGF0Y2gpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzO1xuICAgIHJldHVybiB0aGlzLnNldFBhcnRpY2lwYW50cygocGFydGljaXBhbnRzKSA9PlxuICAgICAgcGFydGljaXBhbnRzLm1hcCgocCkgPT4ge1xuICAgICAgICBjb25zdCB0aGVQYXRjaCA9IHBhdGNoW3Auc2Vzc2lvbklkXTtcbiAgICAgICAgaWYgKHRoZVBhdGNoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnAsXG4gICAgICAgICAgICAuLi50aGVQYXRjaCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwO1xuICAgICAgfSksXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY2FsbCBzdGF0ZSB3aXRoIHRoZSBkYXRhIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBldmVudCB0aGUgdmlkZW8gZXZlbnQgdGhhdCBvdXIgYmFja2VuZCBzZW50IHVzLlxuICAgKi9cbiAgdXBkYXRlRnJvbUV2ZW50ID0gKGV2ZW50OiBXU0V2ZW50KSA9PiB7XG4gICAgY29uc3QgdXBkYXRlID0gdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50LnR5cGVdO1xuICAgIGlmICh1cGRhdGUpIHtcbiAgICAgIHVwZGF0ZShldmVudCBhcyBhbnkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcGFydGljaXBhbnQgcGlubmVkIHN0YXRlIHdpdGggc2VydmVyIHNpZGUgcGlubmluZyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0gcGlucyB0aGUgbGF0ZXN0IHBpbnMgZnJvbSB0aGUgc2VydmVyLlxuICAgKi9cbiAgc2V0U2VydmVyU2lkZVBpbnMgPSAocGluczogUGluW10pID0+IHtcbiAgICBjb25zdCBwaW5zTG9va3VwID0gcGlucy5yZWR1Y2U8eyBbc2Vzc2lvbklkOiBzdHJpbmddOiBudW1iZXIgfCB1bmRlZmluZWQgfT4oXG4gICAgICAobG9va3VwLCBwaW4pID0+IHtcbiAgICAgICAgbG9va3VwW3Bpbi5zZXNzaW9uSWRdID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIGxvb2t1cDtcbiAgICAgIH0sXG4gICAgICB7fSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuc2V0UGFydGljaXBhbnRzKChwYXJ0aWNpcGFudHMpID0+XG4gICAgICBwYXJ0aWNpcGFudHMubWFwKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICBjb25zdCBzZXJ2ZXJTaWRlUGlubmVkQXQgPSBwaW5zTG9va3VwW3BhcnRpY2lwYW50LnNlc3Npb25JZF07XG4gICAgICAgIC8vIHRoZSBwYXJ0aWNpcGFudCBpcyBuZXdseSBwaW5uZWRcbiAgICAgICAgaWYgKHNlcnZlclNpZGVQaW5uZWRBdCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wYXJ0aWNpcGFudCxcbiAgICAgICAgICAgIHBpbjoge1xuICAgICAgICAgICAgICBpc0xvY2FsUGluOiBmYWxzZSxcbiAgICAgICAgICAgICAgcGlubmVkQXQ6IHNlcnZlclNpZGVQaW5uZWRBdCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGUgcGFydGljaXBhbnQgaXMgbm8gbG9uZ2VyIHBpbm5lZCBzZXJ2ZXIgc2lkZVxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHJlc2V0IHRoZSBwaW5cbiAgICAgICAgaWYgKHBhcnRpY2lwYW50LnBpbiAmJiAhcGFydGljaXBhbnQucGluLmlzTG9jYWxQaW4pIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICAgICAgICBwaW46IHVuZGVmaW5lZCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vIGNoYW5nZXMgdG8gYmUgYXBwbGllZFxuICAgICAgICByZXR1cm4gcGFydGljaXBhbnQ7XG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGFuIG9ycGhhbmVkIHRyYWNrIHRvIHRoZSBjYWxsIHN0YXRlLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIG9ycGhhbmVkVHJhY2sgdGhlIG9ycGhhbmVkIHRyYWNrIHRvIGFkZC5cbiAgICovXG4gIHJlZ2lzdGVyT3JwaGFuZWRUcmFjayA9IChvcnBoYW5lZFRyYWNrOiBPcnBoYW5lZFRyYWNrKSA9PiB7XG4gICAgdGhpcy5vcnBoYW5lZFRyYWNrcy5wdXNoKG9ycGhhbmVkVHJhY2spO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIG9ycGhhbmVkIHRyYWNrIGZyb20gdGhlIGNhbGwgc3RhdGUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gaWQgdGhlIElEIG9mIHRoZSBvcnBoYW5lZCB0cmFjayB0byByZW1vdmUuXG4gICAqL1xuICByZW1vdmVPcnBoYW5lZFRyYWNrID0gKGlkOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLm9ycGhhbmVkVHJhY2tzID0gdGhpcy5vcnBoYW5lZFRyYWNrcy5maWx0ZXIoKG8pID0+IG8uaWQgIT09IGlkKTtcbiAgfTtcblxuICAvKipcbiAgICogVGFrZXMgYWxsIG9ycGhhbmVkIHRyYWNrcyB3aXRoIHRoZSBnaXZlbiB0cmFjayBsb29rdXAgcHJlZml4LlxuICAgKiBBbGwgb3JwaGFuZWQgdHJhY2tzIHdpdGggdGhlIGdpdmVuIHRyYWNrIGxvb2t1cCBwcmVmaXggYXJlIHJlbW92ZWQgZnJvbSB0aGUgY2FsbCBzdGF0ZS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSB0cmFja0xvb2t1cFByZWZpeCB0aGUgdHJhY2sgbG9va3VwIHByZWZpeCB0byBtYXRjaCB0aGUgb3JwaGFuZWQgdHJhY2tzIGJ5LlxuICAgKi9cbiAgdGFrZU9ycGhhbmVkVHJhY2tzID0gKHRyYWNrTG9va3VwUHJlZml4OiBzdHJpbmcpOiBPcnBoYW5lZFRyYWNrW10gPT4ge1xuICAgIGNvbnN0IG9ycGhhbnMgPSB0aGlzLm9ycGhhbmVkVHJhY2tzLmZpbHRlcihcbiAgICAgIChvcnBoYW4pID0+IG9ycGhhbi50cmFja0xvb2t1cFByZWZpeCA9PT0gdHJhY2tMb29rdXBQcmVmaXgsXG4gICAgKTtcbiAgICBpZiAob3JwaGFucy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLm9ycGhhbmVkVHJhY2tzID0gdGhpcy5vcnBoYW5lZFRyYWNrcy5maWx0ZXIoXG4gICAgICAgIChvcnBoYW4pID0+IG9ycGhhbi50cmFja0xvb2t1cFByZWZpeCAhPT0gdHJhY2tMb29rdXBQcmVmaXgsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gb3JwaGFucztcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY2FsbCBzdGF0ZSB3aXRoIHRoZSBkYXRhIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsIHRoZSBjYWxsIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci5cbiAgICovXG4gIHVwZGF0ZUZyb21DYWxsUmVzcG9uc2UgPSAoY2FsbDogQ2FsbFJlc3BvbnNlKSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5iYWNrc3RhZ2VTdWJqZWN0LCBjYWxsLmJhY2tzdGFnZSk7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5ibG9ja2VkVXNlcklkc1N1YmplY3QsIGNhbGwuYmxvY2tlZF91c2VyX2lkcyk7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5jcmVhdGVkQXRTdWJqZWN0LCBuZXcgRGF0ZShjYWxsLmNyZWF0ZWRfYXQpKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnVwZGF0ZWRBdFN1YmplY3QsIG5ldyBEYXRlKGNhbGwudXBkYXRlZF9hdCkpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKFxuICAgICAgdGhpcy5zdGFydHNBdFN1YmplY3QsXG4gICAgICBjYWxsLnN0YXJ0c19hdCA/IG5ldyBEYXRlKGNhbGwuc3RhcnRzX2F0KSA6IHVuZGVmaW5lZCxcbiAgICApO1xuICAgIHRoaXMuc2V0RW5kZWRBdChjYWxsLmVuZGVkX2F0ID8gbmV3IERhdGUoY2FsbC5lbmRlZF9hdCkgOiB1bmRlZmluZWQpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuY3JlYXRlZEJ5U3ViamVjdCwgY2FsbC5jcmVhdGVkX2J5KTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmN1c3RvbVN1YmplY3QsIGNhbGwuY3VzdG9tKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmVncmVzc1N1YmplY3QsIGNhbGwuZWdyZXNzKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmluZ3Jlc3NTdWJqZWN0LCBjYWxsLmluZ3Jlc3MpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMucmVjb3JkaW5nU3ViamVjdCwgY2FsbC5yZWNvcmRpbmcpO1xuICAgIGNvbnN0IHMgPSB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlc3Npb25TdWJqZWN0LCBjYWxsLnNlc3Npb24pO1xuICAgIHRoaXMudXBkYXRlUGFydGljaXBhbnRDb3VudEZyb21TZXNzaW9uKHMpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuc2V0dGluZ3NTdWJqZWN0LCBjYWxsLnNldHRpbmdzKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnRyYW5zY3JpYmluZ1N1YmplY3QsIGNhbGwudHJhbnNjcmliaW5nKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnRodW1ibmFpbHNTdWJqZWN0LCBjYWxsLnRodW1ibmFpbHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjYWxsIHN0YXRlIHdpdGggdGhlIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgU0ZVIHNlcnZlci5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsU3RhdGUgdGhlIGNhbGwgc3RhdGUgZnJvbSB0aGUgU0ZVIHNlcnZlci5cbiAgICogQHBhcmFtIGN1cnJlbnRTZXNzaW9uSWQgdGhlIHNlc3Npb24gSUQgb2YgdGhlIGN1cnJlbnQgdXNlci5cbiAgICogQHBhcmFtIHJlY29ubmVjdERldGFpbHMgb3B0aW9uYWwgcmVjb25uZWN0IGRldGFpbHMuXG4gICAqL1xuICB1cGRhdGVGcm9tU2Z1Q2FsbFN0YXRlID0gKFxuICAgIGNhbGxTdGF0ZTogU2Z1Q2FsbFN0YXRlLFxuICAgIGN1cnJlbnRTZXNzaW9uSWQ6IHN0cmluZyxcbiAgICByZWNvbm5lY3REZXRhaWxzPzogUmVjb25uZWN0RGV0YWlscyxcbiAgKSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudHMsIHBhcnRpY2lwYW50Q291bnQsIHN0YXJ0ZWRBdCwgcGlucyB9ID0gY2FsbFN0YXRlO1xuICAgIGNvbnN0IGxvY2FsUHVibGlzaGVkVHJhY2tzID1cbiAgICAgIHJlY29ubmVjdERldGFpbHM/LmFubm91bmNlZFRyYWNrcy5tYXAoKHQpID0+IHQudHJhY2tUeXBlKSA/PyBbXTtcbiAgICB0aGlzLnNldFBhcnRpY2lwYW50cygoKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudExvb2t1cCA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb29rdXBCeVNlc3Npb25JZCgpO1xuICAgICAgcmV0dXJuIHBhcnRpY2lwYW50cy5tYXA8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4oKHApID0+IHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBwcmVzZXJ2ZSB0aGUgbG9jYWwgc3RhdGUgb2YgdGhlIHBhcnRpY2lwYW50XG4gICAgICAgIC8vIChlLmcuIHZpZGVvRGltZW5zaW9uLCB2aXNpYmlsaXR5U3RhdGUsIHBpbm5lZEF0LCBldGMuKVxuICAgICAgICAvLyBhcyBpdCBkb2Vzbid0IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudExvb2t1cFtwLnNlc3Npb25JZF07XG4gICAgICAgIGNvbnN0IGlzTG9jYWxQYXJ0aWNpcGFudCA9IHAuc2Vzc2lvbklkID09PSBjdXJyZW50U2Vzc2lvbklkO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmdQYXJ0aWNpcGFudCwgcCwge1xuICAgICAgICAgIGlzTG9jYWxQYXJ0aWNpcGFudCxcbiAgICAgICAgICBwdWJsaXNoZWRUcmFja3M6IGlzTG9jYWxQYXJ0aWNpcGFudFxuICAgICAgICAgICAgPyBsb2NhbFB1Ymxpc2hlZFRyYWNrc1xuICAgICAgICAgICAgOiBwLnB1Ymxpc2hlZFRyYWNrcyxcbiAgICAgICAgICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZTpcbiAgICAgICAgICAgIGV4aXN0aW5nUGFydGljaXBhbnQ/LnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID8/IHtcbiAgICAgICAgICAgICAgdmlkZW9UcmFjazogVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG4gICAgICAgICAgICAgIHNjcmVlblNoYXJlVHJhY2s6IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSBzYXRpc2ZpZXMgUGFydGlhbDxTdHJlYW1WaWRlb1BhcnRpY2lwYW50Pik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0UGFydGljaXBhbnRDb3VudChwYXJ0aWNpcGFudENvdW50Py50b3RhbCB8fCAwKTtcbiAgICB0aGlzLnNldEFub255bW91c1BhcnRpY2lwYW50Q291bnQocGFydGljaXBhbnRDb3VudD8uYW5vbnltb3VzIHx8IDApO1xuICAgIHRoaXMuc2V0U3RhcnRlZEF0KHN0YXJ0ZWRBdCA/IFRpbWVzdGFtcC50b0RhdGUoc3RhcnRlZEF0KSA6IG5ldyBEYXRlKCkpO1xuICAgIHRoaXMuc2V0U2VydmVyU2lkZVBpbnMocGlucyk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm9tTWVtYmVyUmVtb3ZlZCA9IChldmVudDogQ2FsbE1lbWJlclJlbW92ZWRFdmVudCkgPT4ge1xuICAgIHRoaXMudXBkYXRlRnJvbUNhbGxSZXNwb25zZShldmVudC5jYWxsKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLm1lbWJlcnNTdWJqZWN0LCAobWVtYmVycykgPT5cbiAgICAgIG1lbWJlcnMuZmlsdGVyKChtKSA9PiBldmVudC5tZW1iZXJzLmluZGV4T2YobS51c2VyX2lkKSA9PT0gLTEpLFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm9tTWVtYmVyQWRkZWQgPSAoZXZlbnQ6IENhbGxNZW1iZXJBZGRlZEV2ZW50KSA9PiB7XG4gICAgdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGV2ZW50LmNhbGwpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMubWVtYmVyc1N1YmplY3QsIChtZW1iZXJzKSA9PiBbXG4gICAgICAuLi5tZW1iZXJzLFxuICAgICAgLi4uZXZlbnQubWVtYmVycyxcbiAgICBdKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZUZyb21ITFNCcm9hZGNhc3RTdG9wcGVkID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuZWdyZXNzU3ViamVjdCwgKGVncmVzcyA9IGRlZmF1bHRFZ3Jlc3MpID0+ICh7XG4gICAgICAuLi5lZ3Jlc3MsXG4gICAgICBicm9hZGNhc3Rpbmc6IGZhbHNlLFxuICAgIH0pKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZUZyb21ITFNCcm9hZGNhc3RpbmdGYWlsZWQgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5lZ3Jlc3NTdWJqZWN0LCAoZWdyZXNzID0gZGVmYXVsdEVncmVzcykgPT4gKHtcbiAgICAgIC4uLmVncmVzcyxcbiAgICAgIGJyb2FkY2FzdGluZzogZmFsc2UsXG4gICAgfSkpO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbUhMU0Jyb2FkY2FzdFN0YXJ0ZWQgPSAoXG4gICAgZXZlbnQ6IENhbGxITFNCcm9hZGNhc3RpbmdTdGFydGVkRXZlbnQsXG4gICkgPT4ge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuZWdyZXNzU3ViamVjdCwgKGVncmVzcyA9IGRlZmF1bHRFZ3Jlc3MpID0+ICh7XG4gICAgICAuLi5lZ3Jlc3MsXG4gICAgICBicm9hZGNhc3Rpbmc6IHRydWUsXG4gICAgICBobHM6IHtcbiAgICAgICAgLi4uZWdyZXNzLmhscyxcbiAgICAgICAgcGxheWxpc3RfdXJsOiBldmVudC5obHNfcGxheWxpc3RfdXJsLFxuICAgICAgfSxcbiAgICB9KSk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVQYXJ0aWNpcGFudENvdW50RnJvbVNlc3Npb24gPSAoXG4gICAgc2Vzc2lvbjogQ2FsbFNlc3Npb25SZXNwb25zZSB8IHVuZGVmaW5lZCxcbiAgKSA9PiB7XG4gICAgLy8gd2hlbiBpbiBKT0lORUQgc3RhdGUsIHdlIHNob3VsZCB1c2UgdGhlIHBhcnRpY2lwYW50IGNvdW50IGNvbWluZyB0aHJvdWdoXG4gICAgLy8gdGhlIFNGVSBoZWFsdGhjaGVjayBldmVudCwgYXMgaXQncyBtb3JlIGFjY3VyYXRlLlxuICAgIGlmICghc2Vzc2lvbiB8fCB0aGlzLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCkgcmV0dXJuO1xuICAgIGNvbnN0IGJ5Um9sZUNvdW50ID0gT2JqZWN0LnZhbHVlcyhcbiAgICAgIHNlc3Npb24ucGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGUsXG4gICAgKS5yZWR1Y2UoKHRvdGFsLCBjb3VudEJ5Um9sZSkgPT4gdG90YWwgKyBjb3VudEJ5Um9sZSwgMCk7XG4gICAgY29uc3QgcGFydGljaXBhbnRDb3VudCA9IE1hdGgubWF4KGJ5Um9sZUNvdW50LCBzZXNzaW9uLnBhcnRpY2lwYW50cy5sZW5ndGgpO1xuICAgIHRoaXMuc2V0UGFydGljaXBhbnRDb3VudChwYXJ0aWNpcGFudENvdW50KTtcbiAgICB0aGlzLnNldEFub255bW91c1BhcnRpY2lwYW50Q291bnQoc2Vzc2lvbi5hbm9ueW1vdXNfcGFydGljaXBhbnRfY291bnQgfHwgMCk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50Q291bnRVcGRhdGUgPSAoXG4gICAgZXZlbnQ6IENhbGxTZXNzaW9uUGFydGljaXBhbnRDb3VudHNVcGRhdGVkRXZlbnQsXG4gICkgPT4ge1xuICAgIGNvbnN0IHMgPSB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlc3Npb25TdWJqZWN0LCAoc2Vzc2lvbikgPT4ge1xuICAgICAgaWYgKCFzZXNzaW9uKSByZXR1cm4gc2Vzc2lvbjtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnNlc3Npb24sXG4gICAgICAgIGFub255bW91c19wYXJ0aWNpcGFudF9jb3VudDogZXZlbnQuYW5vbnltb3VzX3BhcnRpY2lwYW50X2NvdW50LFxuICAgICAgICBwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZTogZXZlbnQucGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGUsXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlUGFydGljaXBhbnRDb3VudEZyb21TZXNzaW9uKHMpO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudExlZnQgPSAoXG4gICAgZXZlbnQ6IENhbGxTZXNzaW9uUGFydGljaXBhbnRMZWZ0RXZlbnQsXG4gICkgPT4ge1xuICAgIGNvbnN0IHMgPSB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlc3Npb25TdWJqZWN0LCAoc2Vzc2lvbikgPT4ge1xuICAgICAgaWYgKCFzZXNzaW9uKSByZXR1cm4gc2Vzc2lvbjtcbiAgICAgIGNvbnN0IHsgcGFydGljaXBhbnRzLCBwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZSB9ID0gc2Vzc2lvbjtcbiAgICAgIGNvbnN0IHsgdXNlciwgdXNlcl9zZXNzaW9uX2lkIH0gPSBldmVudC5wYXJ0aWNpcGFudDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnNlc3Npb24sXG4gICAgICAgIHBhcnRpY2lwYW50czogcGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgICAgICAocCkgPT4gcC51c2VyX3Nlc3Npb25faWQgIT09IHVzZXJfc2Vzc2lvbl9pZCxcbiAgICAgICAgKSxcbiAgICAgICAgcGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGU6IHtcbiAgICAgICAgICAuLi5wYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZSxcbiAgICAgICAgICBbdXNlci5yb2xlXTogTWF0aC5tYXgoXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgKHBhcnRpY2lwYW50c19jb3VudF9ieV9yb2xlW3VzZXIucm9sZV0gfHwgMCkgLSAxLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlUGFydGljaXBhbnRDb3VudEZyb21TZXNzaW9uKHMpO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZCA9IChcbiAgICBldmVudDogQ2FsbFNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZEV2ZW50LFxuICApID0+IHtcbiAgICBjb25zdCBzID0gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zZXNzaW9uU3ViamVjdCwgKHNlc3Npb24pID0+IHtcbiAgICAgIGlmICghc2Vzc2lvbikgcmV0dXJuIHNlc3Npb247XG4gICAgICBjb25zdCB7IHBhcnRpY2lwYW50cywgcGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGUgfSA9IHNlc3Npb247XG4gICAgICBjb25zdCB7IHVzZXIsIHVzZXJfc2Vzc2lvbl9pZCB9ID0gZXZlbnQucGFydGljaXBhbnQ7XG4gICAgICAvLyBJdCBjb3VsZCBoYXBwZW4gdGhhdCB0aGUgYmFja2VuZCBkZWxpdmVycyB0aGUgc2FtZSBwYXJ0aWNpcGFudCBtb3JlIHRoYW4gb25jZS5cbiAgICAgIC8vIE9uY2Ugd2l0aCB0aGUgY2FsbC5zZXNzaW9uX3N0YXJ0ZWQgZXZlbnQgYW5kIG9uY2UgYWdhaW4gd2l0aCB0aGVcbiAgICAgIC8vIGNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9qb2luZWQgZXZlbnQuIEluIHRoaXMgY2FzZSxcbiAgICAgIC8vIHdlIHNob3VsZCB1cGRhdGUgdGhlIGV4aXN0aW5nIHBhcnRpY2lwYW50IGFuZCBwcmV2ZW50IGR1cGxpY2F0aW5nIGl0LlxuICAgICAgbGV0IHNob3VsZEluc2VydFBhcnRpY2lwYW50ID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHMubWFwKChwKSA9PiB7XG4gICAgICAgIGlmIChwLnVzZXJfc2Vzc2lvbl9pZCA9PT0gdXNlcl9zZXNzaW9uX2lkKSB7XG4gICAgICAgICAgc2hvdWxkSW5zZXJ0UGFydGljaXBhbnQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gZXZlbnQucGFydGljaXBhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9KTtcbiAgICAgIGlmIChzaG91bGRJbnNlcnRQYXJ0aWNpcGFudCkge1xuICAgICAgICAvLyB0aGlzIGlzIGEgbmV3IGFycmF5LCB3ZSBjYW4gc2FmZWx5IHB1c2ggdGhlIG5ldyBwYXJ0aWNpcGFudFxuICAgICAgICB1cGRhdGVkUGFydGljaXBhbnRzLnB1c2goZXZlbnQucGFydGljaXBhbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBhcmUgdXBkYXRpbmcgYW4gZXhpc3RpbmcgcGFydGljaXBhbnQsIHdlIGRvbid0IHdhbnQgdG8gaW5jcmVtZW50XG4gICAgICAvLyB0aGUgcGFydGljaXBhbnRfYnlfcm9sZSBjb3VudC5cbiAgICAgIGNvbnN0IGluY3JlbWVudCA9IHNob3VsZEluc2VydFBhcnRpY2lwYW50ID8gMSA6IDA7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICBwYXJ0aWNpcGFudHM6IHVwZGF0ZWRQYXJ0aWNpcGFudHMsXG4gICAgICAgIHBhcnRpY2lwYW50c19jb3VudF9ieV9yb2xlOiB7XG4gICAgICAgICAgLi4ucGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGUsXG4gICAgICAgICAgW3VzZXIucm9sZV06IChwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZVt1c2VyLnJvbGVdIHx8IDApICsgaW5jcmVtZW50LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcbiAgICB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50Q291bnRGcm9tU2Vzc2lvbihzKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZU1lbWJlcnMgPSAoXG4gICAgZXZlbnQ6IENhbGxNZW1iZXJVcGRhdGVkRXZlbnQgfCBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudCxcbiAgKSA9PiB7XG4gICAgdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGV2ZW50LmNhbGwpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMubWVtYmVyc1N1YmplY3QsIChtZW1iZXJzKSA9PlxuICAgICAgbWVtYmVycy5tYXAoKG1lbWJlcikgPT4ge1xuICAgICAgICBjb25zdCBtZW1iZXJVcGRhdGUgPSBldmVudC5tZW1iZXJzLmZpbmQoXG4gICAgICAgICAgKG0pID0+IG0udXNlcl9pZCA9PT0gbWVtYmVyLnVzZXJfaWQsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBtZW1iZXJVcGRhdGUgPyBtZW1iZXJVcGRhdGUgOiBtZW1iZXI7XG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlUGFydGljaXBhbnRSZWFjdGlvbiA9IChldmVudDogQ2FsbFJlYWN0aW9uRXZlbnQpID0+IHtcbiAgICBjb25zdCB7IHVzZXIsIGN1c3RvbSwgdHlwZSwgZW1vamlfY29kZSB9ID0gZXZlbnQucmVhY3Rpb247XG4gICAgdGhpcy5zZXRQYXJ0aWNpcGFudHMoKHBhcnRpY2lwYW50cykgPT4ge1xuICAgICAgcmV0dXJuIHBhcnRpY2lwYW50cy5tYXAoKHApID0+IHtcbiAgICAgICAgLy8gc2tpcCBpZiB0aGUgcmVhY3Rpb24gaXMgbm90IGZvciB0aGlzIHBhcnRpY2lwYW50XG4gICAgICAgIGlmIChwLnVzZXJJZCAhPT0gdXNlci5pZCkgcmV0dXJuIHA7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgcGFydGljaXBhbnQgd2l0aCB0aGUgbmV3IHJlYWN0aW9uXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucCxcbiAgICAgICAgICByZWFjdGlvbjoge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGVtb2ppX2NvZGUsXG4gICAgICAgICAgICBjdXN0b20sXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgdW5ibG9ja1VzZXIgPSAoZXZlbnQ6IFVuYmxvY2tlZFVzZXJFdmVudCkgPT4ge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuYmxvY2tlZFVzZXJJZHNTdWJqZWN0LCAoY3VycmVudCkgPT4ge1xuICAgICAgaWYgKCFjdXJyZW50KSByZXR1cm4gY3VycmVudDtcbiAgICAgIHJldHVybiBjdXJyZW50LmZpbHRlcigoaWQpID0+IGlkICE9PSBldmVudC51c2VyLmlkKTtcbiAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIGJsb2NrVXNlciA9IChldmVudDogQmxvY2tlZFVzZXJFdmVudCkgPT4ge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuYmxvY2tlZFVzZXJJZHNTdWJqZWN0LCAoY3VycmVudCkgPT4gW1xuICAgICAgLi4uKGN1cnJlbnQgfHwgW10pLFxuICAgICAgZXZlbnQudXNlci5pZCxcbiAgICBdKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZU93bkNhcGFiaWxpdGllcyA9IChldmVudDogVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnVzZXIuaWQgPT09IHRoaXMubG9jYWxQYXJ0aWNpcGFudD8udXNlcklkKSB7XG4gICAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLm93bkNhcGFiaWxpdGllc1N1YmplY3QsIGV2ZW50Lm93bl9jYXBhYmlsaXRpZXMpO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCAqIGFzIFNEUCBmcm9tICdzZHAtdHJhbnNmb3JtJztcblxudHlwZSBNZWRpYSA9IHtcbiAgb3JpZ2luYWw6IHN0cmluZztcbiAgbWVkaWFXaXRoUG9ydHM6IHN0cmluZztcbiAgY29kZWNPcmRlcjogc3RyaW5nO1xufTtcblxudHlwZSBSdHBNYXAgPSB7XG4gIG9yaWdpbmFsOiBzdHJpbmc7XG4gIHBheWxvYWQ6IHN0cmluZztcbiAgY29kZWM6IHN0cmluZztcbn07XG5cbnR5cGUgRm10cCA9IHtcbiAgb3JpZ2luYWw6IHN0cmluZztcbiAgcGF5bG9hZDogc3RyaW5nO1xuICBjb25maWc6IHN0cmluZztcbn07XG5cbmNvbnN0IGdldFJ0cE1hcCA9IChsaW5lOiBzdHJpbmcpOiBSdHBNYXAgfCB1bmRlZmluZWQgPT4ge1xuICAvLyBFeGFtcGxlOiBhPXJ0cG1hcDoxMTAgb3B1cy80ODAwMC8yXG4gIGNvbnN0IHJ0cFJlZ2V4ID0gL15hPXJ0cG1hcDooXFxkKikgKFtcXHdcXC0uXSopKD86XFxzKlxcLyhcXGQqKSg/OlxccypcXC8oXFxTKikpPyk/LztcbiAgLy8gVGhlIGZpcnN0IGNhcHR1cmVkIGdyb3VwIGlzIHRoZSBwYXlsb2FkIHR5cGUgbnVtYmVyLCB0aGUgc2Vjb25kIGNhcHR1cmVkIGdyb3VwIGlzIHRoZSBlbmNvZGluZyBuYW1lLCB0aGUgdGhpcmQgY2FwdHVyZWQgZ3JvdXAgaXMgdGhlIGNsb2NrIHJhdGUsIGFuZCB0aGUgZm91cnRoIGNhcHR1cmVkIGdyb3VwIGlzIGFueSBhZGRpdGlvbmFsIHBhcmFtZXRlcnMuXG4gIGNvbnN0IHJ0cE1hdGNoID0gcnRwUmVnZXguZXhlYyhsaW5lKTtcbiAgaWYgKHJ0cE1hdGNoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9yaWdpbmFsOiBydHBNYXRjaFswXSxcbiAgICAgIHBheWxvYWQ6IHJ0cE1hdGNoWzFdLFxuICAgICAgY29kZWM6IHJ0cE1hdGNoWzJdLFxuICAgIH07XG4gIH1cbn07XG5cbmNvbnN0IGdldEZtdHAgPSAobGluZTogc3RyaW5nKTogRm10cCB8IHVuZGVmaW5lZCA9PiB7XG4gIC8vIEV4YW1wbGU6IGE9Zm10cDoxMTEgbWlucHRpbWU9MTA7IHVzZWluYmFuZGZlYz0xXG4gIGNvbnN0IGZtdHBSZWdleCA9IC9eYT1mbXRwOihcXGQqKSAoLiopLztcbiAgY29uc3QgZm10cE1hdGNoID0gZm10cFJlZ2V4LmV4ZWMobGluZSk7XG4gIC8vIFRoZSBmaXJzdCBjYXB0dXJlZCBncm91cCBpcyB0aGUgcGF5bG9hZCB0eXBlIG51bWJlciwgdGhlIHNlY29uZCBjYXB0dXJlZCBncm91cCBpcyBhbnkgYWRkaXRpb25hbCBwYXJhbWV0ZXJzLlxuICBpZiAoZm10cE1hdGNoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9yaWdpbmFsOiBmbXRwTWF0Y2hbMF0sXG4gICAgICBwYXlsb2FkOiBmbXRwTWF0Y2hbMV0sXG4gICAgICBjb25maWc6IGZtdHBNYXRjaFsyXSxcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIGdldHMgdGhlIG1lZGlhIHNlY3Rpb24gZm9yIHRoZSBzcGVjaWZpZWQgbWVkaWEgdHlwZS5cbiAqIFRoZSBtZWRpYSBzZWN0aW9uIGNvbnRhaW5zIHRoZSBtZWRpYSB0eXBlLCBwb3J0LCBjb2RlYywgYW5kIHBheWxvYWQgdHlwZS5cbiAqIEV4YW1wbGU6IG09dmlkZW8gOSBVRFAvVExTL1JUUC9TQVZQRiAxMDAgMTAxIDk2IDk3IDM1IDM2IDEwMiAxMjUgMTI3XG4gKi9cbmNvbnN0IGdldE1lZGlhID0gKGxpbmU6IHN0cmluZywgbWVkaWFUeXBlOiBzdHJpbmcpOiBNZWRpYSB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKG09JHttZWRpYVR5cGV9IFxcXFxkKyBbXFxcXHcvXSspIChbXFxcXGRcXFxcc10rKWApO1xuICBjb25zdCBtYXRjaCA9IHJlZ2V4LmV4ZWMobGluZSk7XG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcmlnaW5hbDogbWF0Y2hbMF0sXG4gICAgICBtZWRpYVdpdGhQb3J0czogbWF0Y2hbMV0sXG4gICAgICBjb2RlY09yZGVyOiBtYXRjaFsyXSxcbiAgICB9O1xuICB9XG59O1xuXG5jb25zdCBnZXRNZWRpYVNlY3Rpb24gPSAoc2RwOiBzdHJpbmcsIG1lZGlhVHlwZTogJ3ZpZGVvJyB8ICdhdWRpbycpID0+IHtcbiAgbGV0IG1lZGlhOiBNZWRpYSB8IHVuZGVmaW5lZDtcbiAgY29uc3QgcnRwTWFwOiBSdHBNYXBbXSA9IFtdO1xuICBjb25zdCBmbXRwOiBGbXRwW10gPSBbXTtcbiAgbGV0IGlzVGhlUmVxdWlyZWRNZWRpYVNlY3Rpb24gPSBmYWxzZTtcbiAgc2RwLnNwbGl0KC8oXFxyXFxufFxccnxcXG4pLykuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgIGNvbnN0IGlzVmFsaWRMaW5lID0gL14oW2Etel0pPSguKikvLnRlc3QobGluZSk7XG4gICAgaWYgKCFpc1ZhbGlkTGluZSkgcmV0dXJuO1xuICAgIC8qXG4gICAgICBOT1RFOiBhY2NvcmRpbmcgdG8gaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzg4NjYucGRmXG4gICAgICBFYWNoIG1lZGlhIGRlc2NyaXB0aW9uIHN0YXJ0cyB3aXRoIGFuIFwibT1cIiBsaW5lIGFuZCBjb250aW51ZXMgdG8gdGhlIG5leHQgbWVkaWEgZGVzY3JpcHRpb24gb3IgdGhlIGVuZCBvZiB0aGUgd2hvbGUgc2Vzc2lvbiBkZXNjcmlwdGlvbiwgd2hpY2hldmVyIGNvbWVzIGZpcnN0XG4gICAgKi9cbiAgICBjb25zdCB0eXBlID0gbGluZVswXTtcbiAgICBpZiAodHlwZSA9PT0gJ20nKSB7XG4gICAgICBjb25zdCBfbWVkaWEgPSBnZXRNZWRpYShsaW5lLCBtZWRpYVR5cGUpO1xuICAgICAgaXNUaGVSZXF1aXJlZE1lZGlhU2VjdGlvbiA9ICEhX21lZGlhO1xuICAgICAgaWYgKF9tZWRpYSkge1xuICAgICAgICBtZWRpYSA9IF9tZWRpYTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVGhlUmVxdWlyZWRNZWRpYVNlY3Rpb24gJiYgdHlwZSA9PT0gJ2EnKSB7XG4gICAgICBjb25zdCBydHBNYXBMaW5lID0gZ2V0UnRwTWFwKGxpbmUpO1xuICAgICAgY29uc3QgZm10cExpbmUgPSBnZXRGbXRwKGxpbmUpO1xuICAgICAgaWYgKHJ0cE1hcExpbmUpIHtcbiAgICAgICAgcnRwTWFwLnB1c2gocnRwTWFwTGluZSk7XG4gICAgICB9IGVsc2UgaWYgKGZtdHBMaW5lKSB7XG4gICAgICAgIGZtdHAucHVzaChmbXRwTGluZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKG1lZGlhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lZGlhLFxuICAgICAgcnRwTWFwLFxuICAgICAgZm10cCxcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIGZtdHAgbGluZSBjb3JyZXNwb25kaW5nIHRvIG9wdXNcbiAqL1xuY29uc3QgZ2V0T3B1c0ZtdHAgPSAoc2RwOiBzdHJpbmcpOiBGbXRwIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3Qgc2VjdGlvbiA9IGdldE1lZGlhU2VjdGlvbihzZHAsICdhdWRpbycpO1xuICBjb25zdCBydHBNYXAgPSBzZWN0aW9uPy5ydHBNYXAuZmluZCgocikgPT4gci5jb2RlYy50b0xvd2VyQ2FzZSgpID09PSAnb3B1cycpO1xuICBjb25zdCBjb2RlY0lkID0gcnRwTWFwPy5wYXlsb2FkO1xuICBpZiAoY29kZWNJZCkge1xuICAgIHJldHVybiBzZWN0aW9uPy5mbXRwLmZpbmQoKGYpID0+IGYucGF5bG9hZCA9PT0gY29kZWNJZCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBTRFAgd2l0aCBEVFggZW5hYmxlZCBvciBkaXNhYmxlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHRvZ2dsZUR0eCA9IChzZHA6IHN0cmluZywgZW5hYmxlOiBib29sZWFuKTogc3RyaW5nID0+IHtcbiAgY29uc3Qgb3B1c0ZtdHAgPSBnZXRPcHVzRm10cChzZHApO1xuICBpZiAob3B1c0ZtdHApIHtcbiAgICBjb25zdCBtYXRjaER0eCA9IC91c2VkdHg9KFxcZCkvLmV4ZWMob3B1c0ZtdHAuY29uZmlnKTtcbiAgICBjb25zdCByZXF1aXJlZER0eENvbmZpZyA9IGB1c2VkdHg9JHtlbmFibGUgPyAnMScgOiAnMCd9YDtcbiAgICBpZiAobWF0Y2hEdHgpIHtcbiAgICAgIGNvbnN0IG5ld0ZtdHAgPSBvcHVzRm10cC5vcmlnaW5hbC5yZXBsYWNlKFxuICAgICAgICAvdXNlZHR4PShcXGQpLyxcbiAgICAgICAgcmVxdWlyZWREdHhDb25maWcsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHNkcC5yZXBsYWNlKG9wdXNGbXRwLm9yaWdpbmFsLCBuZXdGbXRwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3Rm10cCA9IGAke29wdXNGbXRwLm9yaWdpbmFsfTske3JlcXVpcmVkRHR4Q29uZmlnfWA7XG4gICAgICByZXR1cm4gc2RwLnJlcGxhY2Uob3B1c0ZtdHAub3JpZ2luYWwsIG5ld0ZtdHApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2RwO1xufTtcblxuLyoqXG4gKiBFbmFibGVzIGhpZ2gtcXVhbGl0eSBhdWRpbyB0aHJvdWdoIFNEUCBtdW5naW5nIGZvciB0aGUgZ2l2ZW4gdHJhY2tNaWQuXG4gKlxuICogQHBhcmFtIHNkcCB0aGUgU0RQIHRvIG11bmdlLlxuICogQHBhcmFtIHRyYWNrTWlkIHRoZSB0cmFja01pZC5cbiAqIEBwYXJhbSBtYXhCaXRyYXRlIHRoZSBtYXggYml0cmF0ZSB0byBzZXQuXG4gKi9cbmV4cG9ydCBjb25zdCBlbmFibGVIaWdoUXVhbGl0eUF1ZGlvID0gKFxuICBzZHA6IHN0cmluZyxcbiAgdHJhY2tNaWQ6IHN0cmluZyxcbiAgbWF4Qml0cmF0ZTogbnVtYmVyID0gNTEwMDAwLFxuKTogc3RyaW5nID0+IHtcbiAgbWF4Qml0cmF0ZSA9IE1hdGgubWF4KE1hdGgubWluKG1heEJpdHJhdGUsIDUxMDAwMCksIDk2MDAwKTtcblxuICBjb25zdCBwYXJzZWRTZHAgPSBTRFAucGFyc2Uoc2RwKTtcbiAgY29uc3QgYXVkaW9NZWRpYSA9IHBhcnNlZFNkcC5tZWRpYS5maW5kKFxuICAgIChtKSA9PiBtLnR5cGUgPT09ICdhdWRpbycgJiYgU3RyaW5nKG0ubWlkKSA9PT0gdHJhY2tNaWQsXG4gICk7XG5cbiAgaWYgKCFhdWRpb01lZGlhKSByZXR1cm4gc2RwO1xuXG4gIGNvbnN0IG9wdXNSdHAgPSBhdWRpb01lZGlhLnJ0cC5maW5kKChyKSA9PiByLmNvZGVjID09PSAnb3B1cycpO1xuICBpZiAoIW9wdXNSdHApIHJldHVybiBzZHA7XG5cbiAgY29uc3Qgb3B1c0ZtdHAgPSBhdWRpb01lZGlhLmZtdHAuZmluZCgoZikgPT4gZi5wYXlsb2FkID09PSBvcHVzUnRwLnBheWxvYWQpO1xuICBpZiAoIW9wdXNGbXRwKSByZXR1cm4gc2RwO1xuXG4gIC8vIGVuYWJsZSBzdGVyZW8sIGlmIG5vdCBhbHJlYWR5IGVuYWJsZWRcbiAgaWYgKG9wdXNGbXRwLmNvbmZpZy5tYXRjaCgvc3RlcmVvPShcXGQpLykpIHtcbiAgICBvcHVzRm10cC5jb25maWcgPSBvcHVzRm10cC5jb25maWcucmVwbGFjZSgvc3RlcmVvPShcXGQpLywgJ3N0ZXJlbz0xJyk7XG4gIH0gZWxzZSB7XG4gICAgb3B1c0ZtdHAuY29uZmlnID0gYCR7b3B1c0ZtdHAuY29uZmlnfTtzdGVyZW89MWA7XG4gIH1cblxuICAvLyBzZXQgbWF4YXZlcmFnZWJpdHJhdGUsIHRvIHRoZSBnaXZlbiB2YWx1ZVxuICBpZiAob3B1c0ZtdHAuY29uZmlnLm1hdGNoKC9tYXhhdmVyYWdlYml0cmF0ZT0oXFxkKikvKSkge1xuICAgIG9wdXNGbXRwLmNvbmZpZyA9IG9wdXNGbXRwLmNvbmZpZy5yZXBsYWNlKFxuICAgICAgL21heGF2ZXJhZ2ViaXRyYXRlPShcXGQqKS8sXG4gICAgICBgbWF4YXZlcmFnZWJpdHJhdGU9JHttYXhCaXRyYXRlfWAsXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBvcHVzRm10cC5jb25maWcgPSBgJHtvcHVzRm10cC5jb25maWd9O21heGF2ZXJhZ2ViaXRyYXRlPSR7bWF4Qml0cmF0ZX1gO1xuICB9XG5cbiAgcmV0dXJuIFNEUC53cml0ZShwYXJzZWRTZHApO1xufTtcbiIsImltcG9ydCAqIGFzIFNEUCBmcm9tICdzZHAtdHJhbnNmb3JtJztcbmltcG9ydCB7IFN0cmVhbVNmdUNsaWVudCB9IGZyb20gJy4uL1N0cmVhbVNmdUNsaWVudCc7XG5pbXBvcnQge1xuICBQZWVyVHlwZSxcbiAgVHJhY2tJbmZvLFxuICBUcmFja1R5cGUsXG4gIFZpZGVvTGF5ZXIsXG4gIFZpZGVvUXVhbGl0eSxcbn0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IGdldEljZUNhbmRpZGF0ZSB9IGZyb20gJy4vaGVscGVycy9pY2VDYW5kaWRhdGUnO1xuaW1wb3J0IHtcbiAgZmluZE9wdGltYWxTY3JlZW5TaGFyaW5nTGF5ZXJzLFxuICBmaW5kT3B0aW1hbFZpZGVvTGF5ZXJzLFxuICBPcHRpbWFsVmlkZW9MYXllcixcbn0gZnJvbSAnLi92aWRlb0xheWVycyc7XG5pbXBvcnQgeyBnZXRQcmVmZXJyZWRDb2RlY3MsIGdldFJOT3B0aW1hbENvZGVjIH0gZnJvbSAnLi9jb2RlY3MnO1xuaW1wb3J0IHsgdHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSB9IGZyb20gJy4vaGVscGVycy90cmFja3MnO1xuaW1wb3J0IHsgQ2FsbGluZ1N0YXRlLCBDYWxsU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBQdWJsaXNoT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGlzUmVhY3ROYXRpdmUgfSBmcm9tICcuLi9oZWxwZXJzL3BsYXRmb3Jtcyc7XG5pbXBvcnQgeyBlbmFibGVIaWdoUXVhbGl0eUF1ZGlvLCB0b2dnbGVEdHggfSBmcm9tICcuLi9oZWxwZXJzL3NkcC1tdW5naW5nJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tICcuL0Rpc3BhdGNoZXInO1xuaW1wb3J0IHsgVmlkZW9MYXllclNldHRpbmcgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L2V2ZW50L2V2ZW50cyc7XG5pbXBvcnQgeyBUYXJnZXRSZXNvbHV0aW9uUmVzcG9uc2UgfSBmcm9tICcuLi9nZW4vc2hpbXMnO1xuXG5leHBvcnQgdHlwZSBQdWJsaXNoZXJDb25zdHJ1Y3Rvck9wdHMgPSB7XG4gIHNmdUNsaWVudDogU3RyZWFtU2Z1Q2xpZW50O1xuICBzdGF0ZTogQ2FsbFN0YXRlO1xuICBkaXNwYXRjaGVyOiBEaXNwYXRjaGVyO1xuICBjb25uZWN0aW9uQ29uZmlnPzogUlRDQ29uZmlndXJhdGlvbjtcbiAgaXNEdHhFbmFibGVkOiBib29sZWFuO1xuICBpc1JlZEVuYWJsZWQ6IGJvb2xlYW47XG4gIG9uVW5yZWNvdmVyYWJsZUVycm9yPzogKCkgPT4gdm9pZDtcbiAgbG9nVGFnOiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIFRoZSBgUHVibGlzaGVyYCBpcyByZXNwb25zaWJsZSBmb3IgcHVibGlzaGluZy91bnB1Ymxpc2hpbmcgbWVkaWEgc3RyZWFtcyB0by9mcm9tIHRoZSBTRlVcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIFB1Ymxpc2hlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXI7XG4gIHByaXZhdGUgcGM6IFJUQ1BlZXJDb25uZWN0aW9uO1xuICBwcml2YXRlIHJlYWRvbmx5IHN0YXRlOiBDYWxsU3RhdGU7XG5cbiAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2NlaXZlclJlZ2lzdHJ5OiB7XG4gICAgW2tleSBpbiBUcmFja1R5cGVdOiBSVENSdHBUcmFuc2NlaXZlciB8IHVuZGVmaW5lZDtcbiAgfSA9IHtcbiAgICBbVHJhY2tUeXBlLkFVRElPXTogdW5kZWZpbmVkLFxuICAgIFtUcmFja1R5cGUuVklERU9dOiB1bmRlZmluZWQsXG4gICAgW1RyYWNrVHlwZS5TQ1JFRU5fU0hBUkVdOiB1bmRlZmluZWQsXG4gICAgW1RyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU9dOiB1bmRlZmluZWQsXG4gICAgW1RyYWNrVHlwZS5VTlNQRUNJRklFRF06IHVuZGVmaW5lZCxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHB1Ymxpc2hPcHRpb25zUGVyVHJhY2tUeXBlID0gbmV3IE1hcDxcbiAgICBUcmFja1R5cGUsXG4gICAgUHVibGlzaE9wdGlvbnNcbiAgPigpO1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBtYWludGFpbmluZyB0aGUgb3JkZXIgaG93IHRyYW5zY2VpdmVycyB3ZXJlIGFkZGVkIHRvIHRoZSBwZWVyIGNvbm5lY3Rpb24uXG4gICAqIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2Ugc29tZSBicm93c2VycyAoRmlyZWZveCkgZG9uJ3QgcmVsaWFibHkgcmVwb3J0XG4gICAqIHRyYWNrSWQgYW5kIGBtaWRgIHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSB0cmFuc2NlaXZlckluaXRPcmRlcjogVHJhY2tUeXBlW10gPSBbXTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHRyYWNrS2luZE1hcHBpbmc6IHtcbiAgICBba2V5IGluIFRyYWNrVHlwZV06ICd2aWRlbycgfCAnYXVkaW8nIHwgdW5kZWZpbmVkO1xuICB9ID0ge1xuICAgIFtUcmFja1R5cGUuQVVESU9dOiAnYXVkaW8nLFxuICAgIFtUcmFja1R5cGUuVklERU9dOiAndmlkZW8nLFxuICAgIFtUcmFja1R5cGUuU0NSRUVOX1NIQVJFXTogJ3ZpZGVvJyxcbiAgICBbVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJT106ICdhdWRpbycsXG4gICAgW1RyYWNrVHlwZS5VTlNQRUNJRklFRF06IHVuZGVmaW5lZCxcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHRyYWNrTGF5ZXJzQ2FjaGU6IHtcbiAgICBba2V5IGluIFRyYWNrVHlwZV06IE9wdGltYWxWaWRlb0xheWVyW10gfCB1bmRlZmluZWQ7XG4gIH0gPSB7XG4gICAgW1RyYWNrVHlwZS5BVURJT106IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlZJREVPXTogdW5kZWZpbmVkLFxuICAgIFtUcmFja1R5cGUuU0NSRUVOX1NIQVJFXTogdW5kZWZpbmVkLFxuICAgIFtUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPXTogdW5kZWZpbmVkLFxuICAgIFtUcmFja1R5cGUuVU5TUEVDSUZJRURdOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBpc0R0eEVuYWJsZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgaXNSZWRFbmFibGVkOiBib29sZWFuO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgdW5zdWJzY3JpYmVPbkljZVJlc3RhcnQ6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgb25VbnJlY292ZXJhYmxlRXJyb3I/OiAoKSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBTRlUgY2xpZW50IGluc3RhbmNlIHRvIHVzZSBmb3IgcHVibGlzaGluZyBhbmQgc2lnbmFsaW5nLlxuICAgKi9cbiAgc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQ7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgYFB1Ymxpc2hlcmAgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSBjb25uZWN0aW9uQ29uZmlnIHRoZSBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gdG8gdXNlLlxuICAgKiBAcGFyYW0gc2Z1Q2xpZW50IHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICogQHBhcmFtIHN0YXRlIHRoZSBjYWxsIHN0YXRlIHRvIHVzZS5cbiAgICogQHBhcmFtIGRpc3BhdGNoZXIgdGhlIGRpc3BhdGNoZXIgdG8gdXNlLlxuICAgKiBAcGFyYW0gaXNEdHhFbmFibGVkIHdoZXRoZXIgRFRYIGlzIGVuYWJsZWQuXG4gICAqIEBwYXJhbSBpc1JlZEVuYWJsZWQgd2hldGhlciBSRUQgaXMgZW5hYmxlZC5cbiAgICogQHBhcmFtIGljZVJlc3RhcnREZWxheSB0aGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJlc3RhcnRpbmcgSUNFIG9uY2UgY29ubmVjdGlvbiBnb2VzIHRvIGBkaXNjb25uZWN0ZWRgIHN0YXRlLlxuICAgKiBAcGFyYW0gb25VbnJlY292ZXJhYmxlRXJyb3IgYSBjYWxsYmFjayB0byBjYWxsIHdoZW4gYW4gdW5yZWNvdmVyYWJsZSBlcnJvciBvY2N1cnMuXG4gICAqIEBwYXJhbSBsb2dUYWcgdGhlIGxvZyB0YWcgdG8gdXNlLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgc2Z1Q2xpZW50LFxuICAgIGRpc3BhdGNoZXIsXG4gICAgc3RhdGUsXG4gICAgaXNEdHhFbmFibGVkLFxuICAgIGlzUmVkRW5hYmxlZCxcbiAgICBvblVucmVjb3ZlcmFibGVFcnJvcixcbiAgICBsb2dUYWcsXG4gIH06IFB1Ymxpc2hlckNvbnN0cnVjdG9yT3B0cykge1xuICAgIHRoaXMubG9nZ2VyID0gZ2V0TG9nZ2VyKFsnUHVibGlzaGVyJywgbG9nVGFnXSk7XG4gICAgdGhpcy5wYyA9IHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oY29ubmVjdGlvbkNvbmZpZyk7XG4gICAgdGhpcy5zZnVDbGllbnQgPSBzZnVDbGllbnQ7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuaXNEdHhFbmFibGVkID0gaXNEdHhFbmFibGVkO1xuICAgIHRoaXMuaXNSZWRFbmFibGVkID0gaXNSZWRFbmFibGVkO1xuICAgIHRoaXMub25VbnJlY292ZXJhYmxlRXJyb3IgPSBvblVucmVjb3ZlcmFibGVFcnJvcjtcblxuICAgIHRoaXMudW5zdWJzY3JpYmVPbkljZVJlc3RhcnQgPSBkaXNwYXRjaGVyLm9uKCdpY2VSZXN0YXJ0JywgKGljZVJlc3RhcnQpID0+IHtcbiAgICAgIGlmIChpY2VSZXN0YXJ0LnBlZXJUeXBlICE9PSBQZWVyVHlwZS5QVUJMSVNIRVJfVU5TUEVDSUZJRUQpIHJldHVybjtcbiAgICAgIHRoaXMucmVzdGFydEljZSgpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCBgSUNFUmVzdGFydCBmYWlsZWRgLCBlcnIpO1xuICAgICAgICB0aGlzLm9uVW5yZWNvdmVyYWJsZUVycm9yPy4oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQZWVyQ29ubmVjdGlvbiA9IChjb25uZWN0aW9uQ29uZmlnPzogUlRDQ29uZmlndXJhdGlvbikgPT4ge1xuICAgIGNvbnN0IHBjID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKGNvbm5lY3Rpb25Db25maWcpO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIHRoaXMub25JY2VDYW5kaWRhdGUpO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ25lZ290aWF0aW9ubmVlZGVkJywgdGhpcy5vbk5lZ290aWF0aW9uTmVlZGVkKTtcblxuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZWVycm9yJywgdGhpcy5vbkljZUNhbmRpZGF0ZUVycm9yKTtcbiAgICBwYy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlLFxuICAgICk7XG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UsXG4gICAgKTtcbiAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdzaWduYWxpbmdzdGF0ZWNoYW5nZScsIHRoaXMub25TaWduYWxpbmdTdGF0ZUNoYW5nZSk7XG4gICAgcmV0dXJuIHBjO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHB1Ymxpc2hlciBQZWVyQ29ubmVjdGlvbiBhbmQgY2xlYW5zIHVwIHRoZSByZXNvdXJjZXMuXG4gICAqL1xuICBjbG9zZSA9ICh7IHN0b3BUcmFja3MgfTogeyBzdG9wVHJhY2tzOiBib29sZWFuIH0pID0+IHtcbiAgICBpZiAoc3RvcFRyYWNrcykge1xuICAgICAgdGhpcy5zdG9wUHVibGlzaGluZygpO1xuICAgICAgT2JqZWN0LmtleXModGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5KS5mb3JFYWNoKCh0cmFja1R5cGUpID0+IHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnRyYW5zY2VpdmVyUmVnaXN0cnlbdHJhY2tUeXBlXSA9IHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmtleXModGhpcy50cmFja0xheWVyc0NhY2hlKS5mb3JFYWNoKCh0cmFja1R5cGUpID0+IHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnRyYWNrTGF5ZXJzQ2FjaGVbdHJhY2tUeXBlXSA9IHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZGV0YWNoRXZlbnRIYW5kbGVycygpO1xuICAgIHRoaXMucGMuY2xvc2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogRGV0YWNoZXMgdGhlIGV2ZW50IGhhbmRsZXJzIGZyb20gdGhlIGBSVENQZWVyQ29ubmVjdGlvbmAuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4gd2Ugd2FudCB0byByZXBsYWNlIHRoZSBgUlRDUGVlckNvbm5lY3Rpb25gXG4gICAqIGluc3RhbmNlIHdpdGggYSBuZXcgb25lIChpbiBjYXNlIG9mIG1pZ3JhdGlvbikuXG4gICAqL1xuICBkZXRhY2hFdmVudEhhbmRsZXJzID0gKCkgPT4ge1xuICAgIHRoaXMudW5zdWJzY3JpYmVPbkljZVJlc3RhcnQoKTtcblxuICAgIHRoaXMucGMucmVtb3ZlRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgdGhpcy5vbkljZUNhbmRpZGF0ZSk7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKCduZWdvdGlhdGlvbm5lZWRlZCcsIHRoaXMub25OZWdvdGlhdGlvbk5lZWRlZCk7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKCdpY2VjYW5kaWRhdGVlcnJvcicsIHRoaXMub25JY2VDYW5kaWRhdGVFcnJvcik7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlLFxuICAgICk7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJyxcbiAgICAgIHRoaXMub25JY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZSxcbiAgICApO1xuICAgIHRoaXMucGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICdzaWduYWxpbmdzdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uU2lnbmFsaW5nU3RhdGVDaGFuZ2UsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RhcnRzIHB1Ymxpc2hpbmcgdGhlIGdpdmVuIHRyYWNrIG9mIHRoZSBnaXZlbiBtZWRpYSBzdHJlYW0uXG4gICAqXG4gICAqIENvbnNlY3V0aXZlIGNhbGxzIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmVwbGFjZSB0aGUgc3RyZWFtLlxuICAgKiBUaGUgcHJldmlvdXMgc3RyZWFtIHdpbGwgYmUgc3RvcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIG1lZGlhU3RyZWFtIHRoZSBtZWRpYSBzdHJlYW0gdG8gcHVibGlzaC5cbiAgICogQHBhcmFtIHRyYWNrIHRoZSB0cmFjayB0byBwdWJsaXNoLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSB0cmFjayB0eXBlIHRvIHB1Ymxpc2guXG4gICAqIEBwYXJhbSBvcHRzIHRoZSBvcHRpb25hbCBwdWJsaXNoIG9wdGlvbnMgdG8gdXNlLlxuICAgKi9cbiAgcHVibGlzaFN0cmVhbSA9IGFzeW5jIChcbiAgICBtZWRpYVN0cmVhbTogTWVkaWFTdHJlYW0sXG4gICAgdHJhY2s6IE1lZGlhU3RyZWFtVHJhY2ssXG4gICAgdHJhY2tUeXBlOiBUcmFja1R5cGUsXG4gICAgb3B0czogUHVibGlzaE9wdGlvbnMgPSB7fSxcbiAgKSA9PiB7XG4gICAgaWYgKHRyYWNrLnJlYWR5U3RhdGUgPT09ICdlbmRlZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgcHVibGlzaCBhIHRyYWNrIHRoYXQgaGFzIGVuZGVkIGFscmVhZHkuYCk7XG4gICAgfVxuXG4gICAgbGV0IHRyYW5zY2VpdmVyID0gdGhpcy5wY1xuICAgICAgLmdldFRyYW5zY2VpdmVycygpXG4gICAgICAuZmluZChcbiAgICAgICAgKHQpID0+XG4gICAgICAgICAgdCA9PT0gdGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5W3RyYWNrVHlwZV0gJiZcbiAgICAgICAgICB0LnNlbmRlci50cmFjayAmJlxuICAgICAgICAgIHQuc2VuZGVyLnRyYWNrPy5raW5kID09PSB0aGlzLnRyYWNrS2luZE1hcHBpbmdbdHJhY2tUeXBlXSxcbiAgICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBldmVudCBoYW5kbGVyIHdoaWNoIGxpc3RlbnMgZm9yIHRoZSAnZW5kZWQnIGV2ZW50IG9uIHRoZSB0cmFjay5cbiAgICAgKiBPbmNlIHRoZSB0cmFjayBoYXMgZW5kZWQsIGl0IHdpbGwgbm90aWZ5IHRoZSBTRlUgYW5kIHVwZGF0ZSB0aGUgc3RhdGUuXG4gICAgICovXG4gICAgY29uc3QgaGFuZGxlVHJhY2tFbmRlZCA9ICgpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgIGBUcmFjayAke1RyYWNrVHlwZVt0cmFja1R5cGVdfSBoYXMgZW5kZWQgYWJydXB0bHksIG5vdGlmeWluZyB0aGUgU0ZVYCxcbiAgICAgICk7XG4gICAgICAvLyBjbGVhbnVwLCB0aGlzIGV2ZW50IGxpc3RlbmVyIG5lZWRzIHRvIHJ1biBvbmx5IG9uY2UuXG4gICAgICB0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIGhhbmRsZVRyYWNrRW5kZWQpO1xuICAgICAgdGhpcy5ub3RpZnlUcmFja011dGVTdGF0ZUNoYW5nZWQobWVkaWFTdHJlYW0sIHRyYWNrVHlwZSwgdHJ1ZSkuY2F0Y2goXG4gICAgICAgIChlcnIpID0+IHRoaXMubG9nZ2VyKCd3YXJuJywgYENvdWxkbid0IG5vdGlmeSB0cmFjayBtdXRlIHN0YXRlYCwgZXJyKSxcbiAgICAgICk7XG4gICAgfTtcblxuICAgIGlmICghdHJhbnNjZWl2ZXIpIHtcbiAgICAgIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCB0YXJnZXRSZXNvbHV0aW9uID0gc2V0dGluZ3M/LnZpZGVvXG4gICAgICAgIC50YXJnZXRfcmVzb2x1dGlvbiBhcyBUYXJnZXRSZXNvbHV0aW9uUmVzcG9uc2U7XG4gICAgICBjb25zdCBzY3JlZW5TaGFyZUJpdHJhdGUgPVxuICAgICAgICBzZXR0aW5ncz8uc2NyZWVuc2hhcmluZy50YXJnZXRfcmVzb2x1dGlvbj8uYml0cmF0ZTtcblxuICAgICAgY29uc3QgdmlkZW9FbmNvZGluZ3MgPVxuICAgICAgICB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5WSURFT1xuICAgICAgICAgID8gZmluZE9wdGltYWxWaWRlb0xheWVycyh0cmFjaywgdGFyZ2V0UmVzb2x1dGlvbiwgb3B0cylcbiAgICAgICAgICA6IHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlNDUkVFTl9TSEFSRVxuICAgICAgICAgICAgPyBmaW5kT3B0aW1hbFNjcmVlblNoYXJpbmdMYXllcnModHJhY2ssIG9wdHMsIHNjcmVlblNoYXJlQml0cmF0ZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAvLyBsaXN0ZW4gZm9yICdlbmRlZCcgZXZlbnQgb24gdGhlIHRyYWNrIGFzIGl0IG1pZ2h0IGJlIGVuZGVkIGFicnVwdGx5XG4gICAgICAvLyBieSBhbiBleHRlcm5hbCBmYWN0b3IgYXMgcGVybWlzc2lvbiByZXZva2VzLCBkZXZpY2UgZGlzY29ubmVjdGVkLCBldGMuXG4gICAgICAvLyBrZWVwIGluIG1pbmQgdGhhdCBgdHJhY2suc3RvcCgpYCBkb2Vzbid0IHRyaWdnZXIgdGhpcyBldmVudC5cbiAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgaGFuZGxlVHJhY2tFbmRlZCk7XG4gICAgICBpZiAoIXRyYWNrLmVuYWJsZWQpIHtcbiAgICAgICAgdHJhY2suZW5hYmxlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHRyYW5zY2VpdmVyID0gdGhpcy5wYy5hZGRUcmFuc2NlaXZlcih0cmFjaywge1xuICAgICAgICBkaXJlY3Rpb246ICdzZW5kb25seScsXG4gICAgICAgIHN0cmVhbXM6XG4gICAgICAgICAgdHJhY2tUeXBlID09PSBUcmFja1R5cGUuVklERU8gfHwgdHJhY2tUeXBlID09PSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFXG4gICAgICAgICAgICA/IFttZWRpYVN0cmVhbV1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBzZW5kRW5jb2RpbmdzOiB2aWRlb0VuY29kaW5ncyxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgQWRkZWQgJHtUcmFja1R5cGVbdHJhY2tUeXBlXX0gdHJhbnNjZWl2ZXJgKTtcbiAgICAgIHRoaXMudHJhbnNjZWl2ZXJJbml0T3JkZXIucHVzaCh0cmFja1R5cGUpO1xuICAgICAgdGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5W3RyYWNrVHlwZV0gPSB0cmFuc2NlaXZlcjtcbiAgICAgIHRoaXMucHVibGlzaE9wdGlvbnNQZXJUcmFja1R5cGUuc2V0KHRyYWNrVHlwZSwgb3B0cyk7XG5cbiAgICAgIGNvbnN0IHsgcHJlZmVycmVkQ29kZWMgfSA9IG9wdHM7XG4gICAgICBjb25zdCBjb2RlYyA9XG4gICAgICAgIGlzUmVhY3ROYXRpdmUoKSAmJiB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5WSURFTyAmJiAhcHJlZmVycmVkQ29kZWNcbiAgICAgICAgICA/IGdldFJOT3B0aW1hbENvZGVjKClcbiAgICAgICAgICA6IHByZWZlcnJlZENvZGVjO1xuXG4gICAgICBjb25zdCBjb2RlY1ByZWZlcmVuY2VzID1cbiAgICAgICAgJ3NldENvZGVjUHJlZmVyZW5jZXMnIGluIHRyYW5zY2VpdmVyXG4gICAgICAgICAgPyB0aGlzLmdldENvZGVjUHJlZmVyZW5jZXModHJhY2tUeXBlLCBjb2RlYylcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChjb2RlY1ByZWZlcmVuY2VzKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICdpbmZvJyxcbiAgICAgICAgICBgU2V0dGluZyAke1RyYWNrVHlwZVt0cmFja1R5cGVdfSBjb2RlYyBwcmVmZXJlbmNlc2AsXG4gICAgICAgICAgY29kZWNQcmVmZXJlbmNlcyxcbiAgICAgICAgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZXRDb2RlY1ByZWZlcmVuY2VzKGNvZGVjUHJlZmVyZW5jZXMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsIGBDb3VsZG4ndCBzZXQgY29kZWMgcHJlZmVyZW5jZXNgLCBlcnIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzVHJhY2sgPSB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2s7XG4gICAgICAvLyBkb24ndCBzdG9wIHRoZSB0cmFjayBpZiB3ZSBhcmUgcmUtcHVibGlzaGluZyB0aGUgc2FtZSB0cmFja1xuICAgICAgaWYgKHByZXZpb3VzVHJhY2sgJiYgcHJldmlvdXNUcmFjayAhPT0gdHJhY2spIHtcbiAgICAgICAgcHJldmlvdXNUcmFjay5zdG9wKCk7XG4gICAgICAgIHByZXZpb3VzVHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVUcmFja0VuZGVkKTtcbiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVUcmFja0VuZGVkKTtcbiAgICAgIH1cbiAgICAgIGlmICghdHJhY2suZW5hYmxlZCkge1xuICAgICAgICB0cmFjay5lbmFibGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRyYW5zY2VpdmVyLnNlbmRlci5yZXBsYWNlVHJhY2sodHJhY2spO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMubm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkKG1lZGlhU3RyZWFtLCB0cmFja1R5cGUsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgcHVibGlzaGluZyB0aGUgZ2l2ZW4gdHJhY2sgdHlwZSB0byB0aGUgU0ZVLCBpZiBpdCBpcyBjdXJyZW50bHkgYmVpbmcgcHVibGlzaGVkLlxuICAgKiBVbmRlcmx5aW5nIHRyYWNrIHdpbGwgYmUgc3RvcHBlZCBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBwdWJsaXNoZXIuXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIHRyYWNrIHR5cGUgdG8gdW5wdWJsaXNoLlxuICAgKiBAcGFyYW0gc3RvcFRyYWNrIHNwZWNpZmllcyB3aGV0aGVyIHRyYWNrIHNob3VsZCBiZSBzdG9wcGVkIG9yIGp1c3QgZGlzYWJsZWRcbiAgICovXG4gIHVucHVibGlzaFN0cmVhbSA9IGFzeW5jICh0cmFja1R5cGU6IFRyYWNrVHlwZSwgc3RvcFRyYWNrOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgdHJhbnNjZWl2ZXIgPSB0aGlzLnBjXG4gICAgICAuZ2V0VHJhbnNjZWl2ZXJzKClcbiAgICAgIC5maW5kKCh0KSA9PiB0ID09PSB0aGlzLnRyYW5zY2VpdmVyUmVnaXN0cnlbdHJhY2tUeXBlXSAmJiB0LnNlbmRlci50cmFjayk7XG4gICAgaWYgKFxuICAgICAgdHJhbnNjZWl2ZXIgJiZcbiAgICAgIHRyYW5zY2VpdmVyLnNlbmRlci50cmFjayAmJlxuICAgICAgKHN0b3BUcmFja1xuICAgICAgICA/IHRyYW5zY2VpdmVyLnNlbmRlci50cmFjay5yZWFkeVN0YXRlID09PSAnbGl2ZSdcbiAgICAgICAgOiB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2suZW5hYmxlZClcbiAgICApIHtcbiAgICAgIHN0b3BUcmFja1xuICAgICAgICA/IHRyYW5zY2VpdmVyLnNlbmRlci50cmFjay5zdG9wKClcbiAgICAgICAgOiAodHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSBmYWxzZSk7XG4gICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIG5vdGlmeSBTRlUgaWYgdW5wdWJsaXNoaW5nIGluIHJlc3BvbnNlIHRvIHJlbW90ZSBzb2Z0IG11dGVcbiAgICAgIGlmICh0aGlzLnN0YXRlLmxvY2FsUGFydGljaXBhbnQ/LnB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyh0cmFja1R5cGUpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkKHVuZGVmaW5lZCwgdHJhY2tUeXBlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdHJhY2sgdHlwZSBpcyBjdXJyZW50bHkgYmVpbmcgcHVibGlzaGVkIHRvIHRoZSBTRlUuXG4gICAqXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIHRyYWNrIHR5cGUgdG8gY2hlY2suXG4gICAqL1xuICBpc1B1Ymxpc2hpbmcgPSAodHJhY2tUeXBlOiBUcmFja1R5cGUpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVt0cmFja1R5cGVdO1xuICAgIGlmICghdHJhbnNjZWl2ZXIgfHwgIXRyYW5zY2VpdmVyLnNlbmRlcikgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHRyYWNrID0gdHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrO1xuICAgIHJldHVybiAhIXRyYWNrICYmIHRyYWNrLnJlYWR5U3RhdGUgPT09ICdsaXZlJyAmJiB0cmFjay5lbmFibGVkO1xuICB9O1xuXG4gIHByaXZhdGUgbm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkID0gYXN5bmMgKFxuICAgIG1lZGlhU3RyZWFtOiBNZWRpYVN0cmVhbSB8IHVuZGVmaW5lZCxcbiAgICB0cmFja1R5cGU6IFRyYWNrVHlwZSxcbiAgICBpc011dGVkOiBib29sZWFuLFxuICApID0+IHtcbiAgICBhd2FpdCB0aGlzLnNmdUNsaWVudC51cGRhdGVNdXRlU3RhdGUodHJhY2tUeXBlLCBpc011dGVkKTtcblxuICAgIGNvbnN0IGF1ZGlvT3JWaWRlb09yU2NyZWVuU2hhcmVTdHJlYW0gPVxuICAgICAgdHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSh0cmFja1R5cGUpO1xuICAgIGlmICghYXVkaW9PclZpZGVvT3JTY3JlZW5TaGFyZVN0cmVhbSkgcmV0dXJuO1xuICAgIGlmIChpc011dGVkKSB7XG4gICAgICB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHRoaXMuc2Z1Q2xpZW50LnNlc3Npb25JZCwgKHApID0+ICh7XG4gICAgICAgIHB1Ymxpc2hlZFRyYWNrczogcC5wdWJsaXNoZWRUcmFja3MuZmlsdGVyKCh0KSA9PiB0ICE9PSB0cmFja1R5cGUpLFxuICAgICAgICBbYXVkaW9PclZpZGVvT3JTY3JlZW5TaGFyZVN0cmVhbV06IHVuZGVmaW5lZCxcbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS51cGRhdGVQYXJ0aWNpcGFudCh0aGlzLnNmdUNsaWVudC5zZXNzaW9uSWQsIChwKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHVibGlzaGVkVHJhY2tzOiBwLnB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyh0cmFja1R5cGUpXG4gICAgICAgICAgICA/IHAucHVibGlzaGVkVHJhY2tzXG4gICAgICAgICAgICA6IFsuLi5wLnB1Ymxpc2hlZFRyYWNrcywgdHJhY2tUeXBlXSxcbiAgICAgICAgICBbYXVkaW9PclZpZGVvT3JTY3JlZW5TaGFyZVN0cmVhbV06IG1lZGlhU3RyZWFtLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wcyBwdWJsaXNoaW5nIGFsbCB0cmFja3MgYW5kIHN0b3AgYWxsIHRyYWNrcy5cbiAgICovXG4gIHByaXZhdGUgc3RvcFB1Ymxpc2hpbmcgPSAoKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgJ1N0b3BwaW5nIHB1Ymxpc2hpbmcgYWxsIHRyYWNrcycpO1xuICAgIHRoaXMucGMuZ2V0U2VuZGVycygpLmZvckVhY2goKHMpID0+IHtcbiAgICAgIHMudHJhY2s/LnN0b3AoKTtcbiAgICAgIGlmICh0aGlzLnBjLnNpZ25hbGluZ1N0YXRlICE9PSAnY2xvc2VkJykge1xuICAgICAgICB0aGlzLnBjLnJlbW92ZVRyYWNrKHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHVwZGF0ZVZpZGVvUHVibGlzaFF1YWxpdHkgPSBhc3luYyAoZW5hYmxlZExheWVyczogVmlkZW9MYXllclNldHRpbmdbXSkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKFxuICAgICAgJ2luZm8nLFxuICAgICAgJ1VwZGF0ZSBwdWJsaXNoIHF1YWxpdHksIHJlcXVlc3RlZCBsYXllcnMgYnkgU0ZVOicsXG4gICAgICBlbmFibGVkTGF5ZXJzLFxuICAgICk7XG5cbiAgICBjb25zdCB2aWRlb1NlbmRlciA9IHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVtUcmFja1R5cGUuVklERU9dPy5zZW5kZXI7XG4gICAgaWYgKCF2aWRlb1NlbmRlcikge1xuICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCAnVXBkYXRlIHB1Ymxpc2ggcXVhbGl0eSwgbm8gdmlkZW8gc2VuZGVyIGZvdW5kLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IHZpZGVvU2VuZGVyLmdldFBhcmFtZXRlcnMoKTtcbiAgICBpZiAocGFyYW1zLmVuY29kaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnd2FybicsXG4gICAgICAgICdVcGRhdGUgcHVibGlzaCBxdWFsaXR5LCBObyBzdWl0YWJsZSB2aWRlbyBlbmNvZGluZyBxdWFsaXR5IGZvdW5kJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgZW5hYmxlZFJpZHMgPSBlbmFibGVkTGF5ZXJzXG4gICAgICAuZmlsdGVyKChseSkgPT4gbHkuYWN0aXZlKVxuICAgICAgLm1hcCgobHkpID0+IGx5Lm5hbWUpO1xuICAgIHBhcmFtcy5lbmNvZGluZ3MuZm9yRWFjaCgoZW5jKSA9PiB7XG4gICAgICAvLyBmbGlwICdhY3RpdmUnIGZsYWcgb25seSB3aGVuIG5lY2Vzc2FyeVxuICAgICAgY29uc3Qgc2hvdWxkRW5hYmxlID0gZW5hYmxlZFJpZHMuaW5jbHVkZXMoZW5jLnJpZCEpO1xuICAgICAgaWYgKHNob3VsZEVuYWJsZSAhPT0gZW5jLmFjdGl2ZSkge1xuICAgICAgICBlbmMuYWN0aXZlID0gc2hvdWxkRW5hYmxlO1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzaG91bGRFbmFibGUpIHtcbiAgICAgICAgbGV0IGxheWVyID0gZW5hYmxlZExheWVycy5maW5kKCh2bHMpID0+IHZscy5uYW1lID09PSBlbmMucmlkKTtcbiAgICAgICAgaWYgKGxheWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBsYXllci5zY2FsZVJlc29sdXRpb25Eb3duQnkgPj0gMSAmJlxuICAgICAgICAgICAgbGF5ZXIuc2NhbGVSZXNvbHV0aW9uRG93bkJ5ICE9PSBlbmMuc2NhbGVSZXNvbHV0aW9uRG93bkJ5XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICAgJ2RlYnVnJyxcbiAgICAgICAgICAgICAgJ1tkeW5hc2NhbGVdOiBzZXR0aW5nIHNjYWxlUmVzb2x1dGlvbkRvd25CeSBmcm9tIHNlcnZlcicsXG4gICAgICAgICAgICAgICdsYXllcicsXG4gICAgICAgICAgICAgIGxheWVyLm5hbWUsXG4gICAgICAgICAgICAgICdzY2FsZS1yZXNvbHV0aW9uLWRvd24tYnknLFxuICAgICAgICAgICAgICBsYXllci5zY2FsZVJlc29sdXRpb25Eb3duQnksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZW5jLnNjYWxlUmVzb2x1dGlvbkRvd25CeSA9IGxheWVyLnNjYWxlUmVzb2x1dGlvbkRvd25CeTtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsYXllci5tYXhCaXRyYXRlID4gMCAmJiBsYXllci5tYXhCaXRyYXRlICE9PSBlbmMubWF4Qml0cmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgICAgICdbZHluYXNjYWxlXSBzZXR0aW5nIG1heC1iaXRyYXRlIGZyb20gdGhlIHNlcnZlcicsXG4gICAgICAgICAgICAgICdsYXllcicsXG4gICAgICAgICAgICAgIGxheWVyLm5hbWUsXG4gICAgICAgICAgICAgICdtYXgtYml0cmF0ZScsXG4gICAgICAgICAgICAgIGxheWVyLm1heEJpdHJhdGUsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZW5jLm1heEJpdHJhdGUgPSBsYXllci5tYXhCaXRyYXRlO1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGF5ZXIubWF4RnJhbWVyYXRlID4gMCAmJlxuICAgICAgICAgICAgbGF5ZXIubWF4RnJhbWVyYXRlICE9PSBlbmMubWF4RnJhbWVyYXRlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICAgJ2RlYnVnJyxcbiAgICAgICAgICAgICAgJ1tkeW5hc2NhbGVdOiBzZXR0aW5nIG1heEZyYW1lcmF0ZSBmcm9tIHNlcnZlcicsXG4gICAgICAgICAgICAgICdsYXllcicsXG4gICAgICAgICAgICAgIGxheWVyLm5hbWUsXG4gICAgICAgICAgICAgICdtYXgtZnJhbWVyYXRlJyxcbiAgICAgICAgICAgICAgbGF5ZXIubWF4RnJhbWVyYXRlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGVuYy5tYXhGcmFtZXJhdGUgPSBsYXllci5tYXhGcmFtZXJhdGU7XG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGFjdGl2ZUxheWVycyA9IHBhcmFtcy5lbmNvZGluZ3MuZmlsdGVyKChlKSA9PiBlLmFjdGl2ZSk7XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIGF3YWl0IHZpZGVvU2VuZGVyLnNldFBhcmFtZXRlcnMocGFyYW1zKTtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgIGBVcGRhdGUgcHVibGlzaCBxdWFsaXR5LCBlbmFibGVkIHJpZHM6IGAsXG4gICAgICAgIGFjdGl2ZUxheWVycyxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgYFVwZGF0ZSBwdWJsaXNoIHF1YWxpdHksIG5vIGNoYW5nZTogYCwgYWN0aXZlTGF5ZXJzKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgYFJUQ1BlZXJDb25uZWN0aW9uLmdldFN0YXRzKClgIG1ldGhvZFxuICAgKiBAcGFyYW0gc2VsZWN0b3JcbiAgICogQHJldHVybnNcbiAgICovXG4gIGdldFN0YXRzID0gKHNlbGVjdG9yPzogTWVkaWFTdHJlYW1UcmFjayB8IG51bGwgfCB1bmRlZmluZWQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5wYy5nZXRTdGF0cyhzZWxlY3Rvcik7XG4gIH07XG5cbiAgcHJpdmF0ZSBnZXRDb2RlY1ByZWZlcmVuY2VzID0gKFxuICAgIHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuICAgIHByZWZlcnJlZENvZGVjPzogc3RyaW5nIHwgbnVsbCxcbiAgKSA9PiB7XG4gICAgaWYgKHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlZJREVPKSB7XG4gICAgICByZXR1cm4gZ2V0UHJlZmVycmVkQ29kZWNzKCd2aWRlbycsIHByZWZlcnJlZENvZGVjIHx8ICd2cDgnKTtcbiAgICB9XG4gICAgaWYgKHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLkFVRElPKSB7XG4gICAgICBjb25zdCBkZWZhdWx0QXVkaW9Db2RlYyA9IHRoaXMuaXNSZWRFbmFibGVkID8gJ3JlZCcgOiAnb3B1cyc7XG4gICAgICBjb25zdCBjb2RlY1RvUmVtb3ZlID0gIXRoaXMuaXNSZWRFbmFibGVkID8gJ3JlZCcgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gZ2V0UHJlZmVycmVkQ29kZWNzKFxuICAgICAgICAnYXVkaW8nLFxuICAgICAgICBwcmVmZXJyZWRDb2RlYyA/PyBkZWZhdWx0QXVkaW9Db2RlYyxcbiAgICAgICAgY29kZWNUb1JlbW92ZSxcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgb25JY2VDYW5kaWRhdGUgPSAoZTogUlRDUGVlckNvbm5lY3Rpb25JY2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IHsgY2FuZGlkYXRlIH0gPSBlO1xuICAgIGlmICghY2FuZGlkYXRlKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnbnVsbCBpY2UgY2FuZGlkYXRlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2Z1Q2xpZW50XG4gICAgICAuaWNlVHJpY2tsZSh7XG4gICAgICAgIGljZUNhbmRpZGF0ZTogZ2V0SWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSksXG4gICAgICAgIHBlZXJUeXBlOiBQZWVyVHlwZS5QVUJMSVNIRVJfVU5TUEVDSUZJRUQsXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCBgSUNFVHJpY2tsZSBmYWlsZWRgLCBlcnIpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIFNGVSBjbGllbnQgdG8gdXNlLlxuICAgKlxuICAgKiBAcGFyYW0gc2Z1Q2xpZW50IHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICovXG4gIHNldFNmdUNsaWVudCA9IChzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudCkgPT4ge1xuICAgIHRoaXMuc2Z1Q2xpZW50ID0gc2Z1Q2xpZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXN0YXJ0cyB0aGUgSUNFIGNvbm5lY3Rpb24gYW5kIHJlbmVnb3RpYXRlcyB3aXRoIHRoZSBTRlUuXG4gICAqL1xuICByZXN0YXJ0SWNlID0gYXN5bmMgKCkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdSZXN0YXJ0aW5nIElDRSBjb25uZWN0aW9uJyk7XG4gICAgY29uc3Qgc2lnbmFsaW5nU3RhdGUgPSB0aGlzLnBjLnNpZ25hbGluZ1N0YXRlO1xuICAgIGlmICh0aGlzLmlzSWNlUmVzdGFydGluZyB8fCBzaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtbG9jYWwtb2ZmZXInKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnSUNFIHJlc3RhcnQgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLm5lZ290aWF0ZSh7IGljZVJlc3RhcnQ6IHRydWUgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbk5lZ290aWF0aW9uTmVlZGVkID0gKCkgPT4ge1xuICAgIHRoaXMubmVnb3RpYXRlKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYE5lZ290aWF0aW9uIGZhaWxlZC5gLCBlcnIpO1xuICAgICAgdGhpcy5vblVucmVjb3ZlcmFibGVFcnJvcj8uKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyBhIG5ldyBvZmZlci9hbnN3ZXIgZXhjaGFuZ2Ugd2l0aCB0aGUgY3VycmVudGx5IGNvbm5lY3RlZCBTRlUuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25hbCBvZmZlciBvcHRpb25zIHRvIHVzZS5cbiAgICovXG4gIHByaXZhdGUgbmVnb3RpYXRlID0gYXN5bmMgKG9wdGlvbnM/OiBSVENPZmZlck9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBvZmZlciA9IGF3YWl0IHRoaXMucGMuY3JlYXRlT2ZmZXIob3B0aW9ucyk7XG4gICAgbGV0IHNkcCA9IHRoaXMubXVuZ2VDb2RlY3Mob2ZmZXIuc2RwKTtcbiAgICBpZiAoc2RwICYmIHRoaXMuaXNQdWJsaXNoaW5nKFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU8pKSB7XG4gICAgICBzZHAgPSB0aGlzLmVuYWJsZUhpZ2hRdWFsaXR5QXVkaW8oc2RwKTtcbiAgICB9XG5cbiAgICAvLyBzZXQgdGhlIG11bmdlZCBTRFAgYmFjayB0byB0aGUgb2ZmZXJcbiAgICBvZmZlci5zZHAgPSBzZHA7XG5cbiAgICBjb25zdCB0cmFja0luZm9zID0gdGhpcy5nZXRBbm5vdW5jZWRUcmFja3Mob2ZmZXIuc2RwKTtcbiAgICBpZiAodHJhY2tJbmZvcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgbmVnb3RpYXRlIHdpdGhvdXQgYW5ub3VuY2luZyBhbnkgdHJhY2tzYCk7XG4gICAgfVxuXG4gICAgdGhpcy5pc0ljZVJlc3RhcnRpbmcgPSBvcHRpb25zPy5pY2VSZXN0YXJ0ID8/IGZhbHNlO1xuICAgIGF3YWl0IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gYXdhaXQgdGhpcy5zZnVDbGllbnQuc2V0UHVibGlzaGVyKHtcbiAgICAgICAgc2RwOiBvZmZlci5zZHAgfHwgJycsXG4gICAgICAgIHRyYWNrczogdHJhY2tJbmZvcyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgIGF3YWl0IHRoaXMucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oeyB0eXBlOiAnYW5zd2VyJywgc2RwOiByZXNwb25zZS5zZHAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5zZnVDbGllbnQuaWNlVHJpY2tsZUJ1ZmZlci5wdWJsaXNoZXJDYW5kaWRhdGVzLnN1YnNjcmliZShcbiAgICAgIGFzeW5jIChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBpY2VDYW5kaWRhdGUgPSBKU09OLnBhcnNlKGNhbmRpZGF0ZS5pY2VDYW5kaWRhdGUpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGMuYWRkSWNlQ2FuZGlkYXRlKGljZUNhbmRpZGF0ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsIGBJQ0UgY2FuZGlkYXRlIGVycm9yYCwgZSwgY2FuZGlkYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgZW5hYmxlSGlnaFF1YWxpdHlBdWRpbyA9IChzZHA6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHRyYW5zY2VpdmVyID0gdGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5W1RyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU9dO1xuICAgIGlmICghdHJhbnNjZWl2ZXIpIHJldHVybiBzZHA7XG5cbiAgICBjb25zdCBtaWQgPSB0aGlzLmV4dHJhY3RNaWQodHJhbnNjZWl2ZXIsIHNkcCwgVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTyk7XG4gICAgcmV0dXJuIGVuYWJsZUhpZ2hRdWFsaXR5QXVkaW8oc2RwLCBtaWQpO1xuICB9O1xuXG4gIHByaXZhdGUgbXVuZ2VDb2RlY3MgPSAoc2RwPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHNkcCkge1xuICAgICAgc2RwID0gdG9nZ2xlRHR4KHNkcCwgdGhpcy5pc0R0eEVuYWJsZWQpO1xuICAgIH1cbiAgICByZXR1cm4gc2RwO1xuICB9O1xuXG4gIHByaXZhdGUgZXh0cmFjdE1pZCA9IChcbiAgICB0cmFuc2NlaXZlcjogUlRDUnRwVHJhbnNjZWl2ZXIsXG4gICAgc2RwOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgdHJhY2tUeXBlOiBUcmFja1R5cGUsXG4gICk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHRyYW5zY2VpdmVyLm1pZCkgcmV0dXJuIHRyYW5zY2VpdmVyLm1pZDtcblxuICAgIGlmICghc2RwKSB7XG4gICAgICB0aGlzLmxvZ2dlcignd2FybicsICdObyBTRFAgZm91bmQuIFJldHVybmluZyBlbXB0eSBtaWQnKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICB0aGlzLmxvZ2dlcihcbiAgICAgICdkZWJ1ZycsXG4gICAgICBgTm8gJ21pZCcgZm91bmQgZm9yIHRyYWNrLiBUcnlpbmcgdG8gZmluZCBpdCBmcm9tIHRoZSBPZmZlciBTRFBgLFxuICAgICk7XG5cbiAgICBjb25zdCB0cmFjayA9IHRyYW5zY2VpdmVyLnNlbmRlci50cmFjayE7XG4gICAgY29uc3QgcGFyc2VkU2RwID0gU0RQLnBhcnNlKHNkcCk7XG4gICAgY29uc3QgbWVkaWEgPSBwYXJzZWRTZHAubWVkaWEuZmluZCgobSkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgbS50eXBlID09PSB0cmFjay5raW5kICYmXG4gICAgICAgIC8vIGlmIGBtc2lkYCBpcyBub3QgcHJlc2VudCwgd2UgYXNzdW1lIHRoYXQgdGhlIHRyYWNrIGlzIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgKG0ubXNpZD8uaW5jbHVkZXModHJhY2suaWQpID8/IHRydWUpXG4gICAgICApO1xuICAgIH0pO1xuICAgIGlmICh0eXBlb2YgbWVkaWE/Lm1pZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnZGVidWcnLFxuICAgICAgICBgTm8gbWlkIGZvdW5kIGluIFNEUCBmb3IgdHJhY2sgdHlwZSAke3RyYWNrLmtpbmR9IGFuZCBpZCAke3RyYWNrLmlkfS4gQXR0ZW1wdGluZyB0byBmaW5kIGl0IGhldXJpc3RpY2FsbHlgLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgaGV1cmlzdGljTWlkID0gdGhpcy50cmFuc2NlaXZlckluaXRPcmRlci5pbmRleE9mKHRyYWNrVHlwZSk7XG4gICAgICBpZiAoaGV1cmlzdGljTWlkICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGhldXJpc3RpY01pZCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdObyBoZXVyaXN0aWMgbWlkIGZvdW5kLiBSZXR1cm5pbmcgZW1wdHkgbWlkJyk7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcobWVkaWEubWlkKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgdHJhY2tzIHRoYXQgYXJlIGN1cnJlbnRseSBiZWluZyBwdWJsaXNoZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gc2RwIGFuIG9wdGlvbmFsIFNEUCB0byBleHRyYWN0IHRoZSBgbWlkYCBmcm9tLlxuICAgKi9cbiAgZ2V0QW5ub3VuY2VkVHJhY2tzID0gKHNkcD86IHN0cmluZyk6IFRyYWNrSW5mb1tdID0+IHtcbiAgICBzZHAgPSBzZHAgfHwgdGhpcy5wYy5sb2NhbERlc2NyaXB0aW9uPy5zZHA7XG5cbiAgICBjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHRhcmdldFJlc29sdXRpb24gPSBzZXR0aW5ncz8udmlkZW9cbiAgICAgIC50YXJnZXRfcmVzb2x1dGlvbiBhcyBUYXJnZXRSZXNvbHV0aW9uUmVzcG9uc2U7XG4gICAgcmV0dXJuIHRoaXMucGNcbiAgICAgIC5nZXRUcmFuc2NlaXZlcnMoKVxuICAgICAgLmZpbHRlcigodCkgPT4gdC5kaXJlY3Rpb24gPT09ICdzZW5kb25seScgJiYgdC5zZW5kZXIudHJhY2spXG4gICAgICAubWFwPFRyYWNrSW5mbz4oKHRyYW5zY2VpdmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNrVHlwZTogVHJhY2tUeXBlID0gTnVtYmVyKFxuICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeSkuZmluZChcbiAgICAgICAgICAgIChrZXkpID0+XG4gICAgICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVtrZXkgYXMgYW55IGFzIFRyYWNrVHlwZV0gPT09IHRyYW5zY2VpdmVyLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRyYWNrID0gdHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrITtcbiAgICAgICAgbGV0IG9wdGltYWxMYXllcnM6IE9wdGltYWxWaWRlb0xheWVyW107XG4gICAgICAgIGNvbnN0IGlzVHJhY2tMaXZlID0gdHJhY2sucmVhZHlTdGF0ZSA9PT0gJ2xpdmUnO1xuICAgICAgICBpZiAoaXNUcmFja0xpdmUpIHtcbiAgICAgICAgICBjb25zdCBwdWJsaXNoT3B0cyA9IHRoaXMucHVibGlzaE9wdGlvbnNQZXJUcmFja1R5cGUuZ2V0KHRyYWNrVHlwZSk7XG4gICAgICAgICAgb3B0aW1hbExheWVycyA9XG4gICAgICAgICAgICB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5WSURFT1xuICAgICAgICAgICAgICA/IGZpbmRPcHRpbWFsVmlkZW9MYXllcnModHJhY2ssIHRhcmdldFJlc29sdXRpb24sIHB1Ymxpc2hPcHRzKVxuICAgICAgICAgICAgICA6IHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlNDUkVFTl9TSEFSRVxuICAgICAgICAgICAgICAgID8gZmluZE9wdGltYWxTY3JlZW5TaGFyaW5nTGF5ZXJzKHRyYWNrLCBwdWJsaXNoT3B0cylcbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgIHRoaXMudHJhY2tMYXllcnNDYWNoZVt0cmFja1R5cGVdID0gb3B0aW1hbExheWVycztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB3ZSByZXBvcnQgdGhlIGxhc3Qga25vd24gb3B0aW1hbCBsYXllcnMgZm9yIGVuZGVkIHRyYWNrc1xuICAgICAgICAgIG9wdGltYWxMYXllcnMgPSB0aGlzLnRyYWNrTGF5ZXJzQ2FjaGVbdHJhY2tUeXBlXSB8fCBbXTtcbiAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgICBgVHJhY2sgJHtUcmFja1R5cGVbdHJhY2tUeXBlXX0gaXMgZW5kZWQuIEFubm91bmNpbmcgbGFzdCBrbm93biBvcHRpbWFsIGxheWVyc2AsXG4gICAgICAgICAgICBvcHRpbWFsTGF5ZXJzLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsYXllcnMgPSBvcHRpbWFsTGF5ZXJzLm1hcDxWaWRlb0xheWVyPigob3B0aW1hbExheWVyKSA9PiAoe1xuICAgICAgICAgIHJpZDogb3B0aW1hbExheWVyLnJpZCB8fCAnJyxcbiAgICAgICAgICBiaXRyYXRlOiBvcHRpbWFsTGF5ZXIubWF4Qml0cmF0ZSB8fCAwLFxuICAgICAgICAgIGZwczogb3B0aW1hbExheWVyLm1heEZyYW1lcmF0ZSB8fCAwLFxuICAgICAgICAgIHF1YWxpdHk6IHRoaXMucmlkVG9WaWRlb1F1YWxpdHkob3B0aW1hbExheWVyLnJpZCB8fCAnJyksXG4gICAgICAgICAgdmlkZW9EaW1lbnNpb246IHtcbiAgICAgICAgICAgIHdpZHRoOiBvcHRpbWFsTGF5ZXIud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IG9wdGltYWxMYXllci5oZWlnaHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IGlzQXVkaW9UcmFjayA9IFtcbiAgICAgICAgICBUcmFja1R5cGUuQVVESU8sXG4gICAgICAgICAgVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTyxcbiAgICAgICAgXS5pbmNsdWRlcyh0cmFja1R5cGUpO1xuXG4gICAgICAgIGNvbnN0IHRyYWNrU2V0dGluZ3MgPSB0cmFjay5nZXRTZXR0aW5ncygpO1xuICAgICAgICBjb25zdCBpc1N0ZXJlbyA9IGlzQXVkaW9UcmFjayAmJiB0cmFja1NldHRpbmdzLmNoYW5uZWxDb3VudCA9PT0gMjtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRyYWNrSWQ6IHRyYWNrLmlkLFxuICAgICAgICAgIGxheWVyczogbGF5ZXJzLFxuICAgICAgICAgIHRyYWNrVHlwZSxcbiAgICAgICAgICBtaWQ6IHRoaXMuZXh0cmFjdE1pZCh0cmFuc2NlaXZlciwgc2RwLCB0cmFja1R5cGUpLFxuXG4gICAgICAgICAgc3RlcmVvOiBpc1N0ZXJlbyxcbiAgICAgICAgICBkdHg6IGlzQXVkaW9UcmFjayAmJiB0aGlzLmlzRHR4RW5hYmxlZCxcbiAgICAgICAgICByZWQ6IGlzQXVkaW9UcmFjayAmJiB0aGlzLmlzUmVkRW5hYmxlZCxcbiAgICAgICAgICBtdXRlZDogIWlzVHJhY2tMaXZlLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNhbmRpZGF0ZUVycm9yID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgIGUgaW5zdGFuY2VvZiBSVENQZWVyQ29ubmVjdGlvbkljZUVycm9yRXZlbnQgJiZcbiAgICAgIGAke2UuZXJyb3JDb2RlfTogJHtlLmVycm9yVGV4dH1gO1xuICAgIGNvbnN0IGljZVN0YXRlID0gdGhpcy5wYy5pY2VDb25uZWN0aW9uU3RhdGU7XG4gICAgY29uc3QgbG9nTGV2ZWwgPVxuICAgICAgaWNlU3RhdGUgPT09ICdjb25uZWN0ZWQnIHx8IGljZVN0YXRlID09PSAnY2hlY2tpbmcnID8gJ2RlYnVnJyA6ICd3YXJuJztcbiAgICB0aGlzLmxvZ2dlcihsb2dMZXZlbCwgYElDRSBDYW5kaWRhdGUgZXJyb3JgLCBlcnJvck1lc3NhZ2UpO1xuICB9O1xuXG4gIHByaXZhdGUgb25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBjLmljZUNvbm5lY3Rpb25TdGF0ZTtcbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgSUNFIENvbm5lY3Rpb24gc3RhdGUgY2hhbmdlZCB0b2AsIHN0YXRlKTtcblxuICAgIGlmICh0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJFQ09OTkVDVElORykgcmV0dXJuO1xuXG4gICAgaWYgKHN0YXRlID09PSAnZmFpbGVkJyB8fCBzdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBBdHRlbXB0aW5nIHRvIHJlc3RhcnQgSUNFYCk7XG4gICAgICB0aGlzLnJlc3RhcnRJY2UoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlcignZXJyb3InLCBgSUNFIHJlc3RhcnQgZXJyb3JgLCBlKTtcbiAgICAgICAgdGhpcy5vblVucmVjb3ZlcmFibGVFcnJvcj8uKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBJQ0UgR2F0aGVyaW5nIFN0YXRlYCwgdGhpcy5wYy5pY2VHYXRoZXJpbmdTdGF0ZSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvblNpZ25hbGluZ1N0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBTaWduYWxpbmcgc3RhdGUgY2hhbmdlZGAsIHRoaXMucGMuc2lnbmFsaW5nU3RhdGUpO1xuICB9O1xuXG4gIHByaXZhdGUgcmlkVG9WaWRlb1F1YWxpdHkgPSAocmlkOiBzdHJpbmcpOiBWaWRlb1F1YWxpdHkgPT4ge1xuICAgIHJldHVybiByaWQgPT09ICdxJ1xuICAgICAgPyBWaWRlb1F1YWxpdHkuTE9XX1VOU1BFQ0lGSUVEXG4gICAgICA6IHJpZCA9PT0gJ2gnXG4gICAgICAgID8gVmlkZW9RdWFsaXR5Lk1JRFxuICAgICAgICA6IFZpZGVvUXVhbGl0eS5ISUdIOyAvLyBkZWZhdWx0IHRvIEhJR0hcbiAgfTtcbn1cbiIsImltcG9ydCB7IFN0cmVhbVNmdUNsaWVudCB9IGZyb20gJy4uL1N0cmVhbVNmdUNsaWVudCc7XG5pbXBvcnQgeyBnZXRJY2VDYW5kaWRhdGUgfSBmcm9tICcuL2hlbHBlcnMvaWNlQ2FuZGlkYXRlJztcbmltcG9ydCB7IFBlZXJUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IFN1YnNjcmliZXJPZmZlciB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvZXZlbnQvZXZlbnRzJztcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tICcuL0Rpc3BhdGNoZXInO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSwgQ2FsbFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHsgd2l0aG91dENvbmN1cnJlbmN5IH0gZnJvbSAnLi4vaGVscGVycy9jb25jdXJyZW5jeSc7XG5pbXBvcnQgeyB0b1RyYWNrVHlwZSwgdHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSB9IGZyb20gJy4vaGVscGVycy90cmFja3MnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIFN1YnNjcmliZXJPcHRzID0ge1xuICBzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudDtcbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcjtcbiAgc3RhdGU6IENhbGxTdGF0ZTtcbiAgY29ubmVjdGlvbkNvbmZpZz86IFJUQ0NvbmZpZ3VyYXRpb247XG4gIG9uVW5yZWNvdmVyYWJsZUVycm9yPzogKCkgPT4gdm9pZDtcbiAgbG9nVGFnOiBzdHJpbmc7XG59O1xuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgdGhlIGBSVENQZWVyQ29ubmVjdGlvbmAgdGhhdCBoYW5kbGVzIHRoZSBpbmNvbWluZ1xuICogbWVkaWEgc3RyZWFtcyBmcm9tIHRoZSBTRlUuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJzY3JpYmVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSBwYzogUlRDUGVlckNvbm5lY3Rpb247XG4gIHByaXZhdGUgc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQ7XG4gIHByaXZhdGUgc3RhdGU6IENhbGxTdGF0ZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHVucmVnaXN0ZXJPblN1YnNjcmliZXJPZmZlcjogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWFkb25seSB1bnJlZ2lzdGVyT25JY2VSZXN0YXJ0OiAoKSA9PiB2b2lkO1xuICBwcml2YXRlIHJlYWRvbmx5IG9uVW5yZWNvdmVyYWJsZUVycm9yPzogKCkgPT4gdm9pZDtcblxuICBwcml2YXRlIGlzSWNlUmVzdGFydGluZyA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGBTdWJzY3JpYmVyYCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHNmdUNsaWVudCB0aGUgU0ZVIGNsaWVudCB0byB1c2UuXG4gICAqIEBwYXJhbSBkaXNwYXRjaGVyIHRoZSBkaXNwYXRjaGVyIHRvIHVzZS5cbiAgICogQHBhcmFtIHN0YXRlIHRoZSBzdGF0ZSBvZiB0aGUgY2FsbC5cbiAgICogQHBhcmFtIGNvbm5lY3Rpb25Db25maWcgdGhlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvbiB0byB1c2UuXG4gICAqIEBwYXJhbSBpY2VSZXN0YXJ0RGVsYXkgdGhlIGRlbGF5IGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSByZXN0YXJ0aW5nIElDRSB3aGVuIGNvbm5lY3Rpb24gZ29lcyB0byBgZGlzY29ubmVjdGVkYCBzdGF0ZS5cbiAgICogQHBhcmFtIG9uVW5yZWNvdmVyYWJsZUVycm9yIGEgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIGFuIHVucmVjb3ZlcmFibGUgZXJyb3Igb2NjdXJzLlxuICAgKiBAcGFyYW0gbG9nVGFnIGEgdGFnIHRvIHVzZSBmb3IgbG9nZ2luZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBzZnVDbGllbnQsXG4gICAgZGlzcGF0Y2hlcixcbiAgICBzdGF0ZSxcbiAgICBjb25uZWN0aW9uQ29uZmlnLFxuICAgIG9uVW5yZWNvdmVyYWJsZUVycm9yLFxuICAgIGxvZ1RhZyxcbiAgfTogU3Vic2NyaWJlck9wdHMpIHtcbiAgICB0aGlzLmxvZ2dlciA9IGdldExvZ2dlcihbJ1N1YnNjcmliZXInLCBsb2dUYWddKTtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHNmdUNsaWVudDtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5vblVucmVjb3ZlcmFibGVFcnJvciA9IG9uVW5yZWNvdmVyYWJsZUVycm9yO1xuXG4gICAgdGhpcy5wYyA9IHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oY29ubmVjdGlvbkNvbmZpZyk7XG5cbiAgICBjb25zdCBzdWJzY3JpYmVyT2ZmZXJDb25jdXJyZW5jeVRhZyA9IFN5bWJvbCgnc3Vic2NyaWJlck9mZmVyJyk7XG4gICAgdGhpcy51bnJlZ2lzdGVyT25TdWJzY3JpYmVyT2ZmZXIgPSBkaXNwYXRjaGVyLm9uKFxuICAgICAgJ3N1YnNjcmliZXJPZmZlcicsXG4gICAgICAoc3Vic2NyaWJlck9mZmVyKSA9PiB7XG4gICAgICAgIHdpdGhvdXRDb25jdXJyZW5jeShzdWJzY3JpYmVyT2ZmZXJDb25jdXJyZW5jeVRhZywgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLm5lZ290aWF0ZShzdWJzY3JpYmVyT2ZmZXIpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYE5lZ290aWF0aW9uIGZhaWxlZC5gLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIGNvbnN0IGljZVJlc3RhcnRDb25jdXJyZW5jeVRhZyA9IFN5bWJvbCgnaWNlUmVzdGFydCcpO1xuICAgIHRoaXMudW5yZWdpc3Rlck9uSWNlUmVzdGFydCA9IGRpc3BhdGNoZXIub24oJ2ljZVJlc3RhcnQnLCAoaWNlUmVzdGFydCkgPT4ge1xuICAgICAgd2l0aG91dENvbmN1cnJlbmN5KGljZVJlc3RhcnRDb25jdXJyZW5jeVRhZywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoaWNlUmVzdGFydC5wZWVyVHlwZSAhPT0gUGVlclR5cGUuU1VCU0NSSUJFUikgcmV0dXJuO1xuICAgICAgICBhd2FpdCB0aGlzLnJlc3RhcnRJY2UoKTtcbiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYElDRVJlc3RhcnQgZmFpbGVkYCwgZXJyKTtcbiAgICAgICAgdGhpcy5vblVucmVjb3ZlcmFibGVFcnJvcj8uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBSVENQZWVyQ29ubmVjdGlvbmAgaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGNvbm5lY3Rpb25Db25maWcgdGhlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvbiB0byB1c2UuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVBlZXJDb25uZWN0aW9uID0gKGNvbm5lY3Rpb25Db25maWc/OiBSVENDb25maWd1cmF0aW9uKSA9PiB7XG4gICAgY29uc3QgcGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oY29ubmVjdGlvbkNvbmZpZyk7XG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgdGhpcy5vbkljZUNhbmRpZGF0ZSk7XG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLmhhbmRsZU9uVHJhY2spO1xuXG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlZXJyb3InLCB0aGlzLm9uSWNlQ2FuZGlkYXRlRXJyb3IpO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyxcbiAgICAgIHRoaXMub25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UsXG4gICAgKTtcbiAgICBwYy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJyxcbiAgICAgIHRoaXMub25JY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHBjO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGBSVENQZWVyQ29ubmVjdGlvbmAgYW5kIHVuc3Vic2NyaWJlcyBmcm9tIHRoZSBkaXNwYXRjaGVyLlxuICAgKi9cbiAgY2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5kZXRhY2hFdmVudEhhbmRsZXJzKCk7XG4gICAgdGhpcy5wYy5jbG9zZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRhY2hlcyB0aGUgZXZlbnQgaGFuZGxlcnMgZnJvbSB0aGUgYFJUQ1BlZXJDb25uZWN0aW9uYC5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB3ZSB3YW50IHRvIHJlcGxhY2UgdGhlIGBSVENQZWVyQ29ubmVjdGlvbmBcbiAgICogaW5zdGFuY2Ugd2l0aCBhIG5ldyBvbmUgKGluIGNhc2Ugb2YgbWlncmF0aW9uKS5cbiAgICovXG4gIGRldGFjaEV2ZW50SGFuZGxlcnMgPSAoKSA9PiB7XG4gICAgdGhpcy51bnJlZ2lzdGVyT25TdWJzY3JpYmVyT2ZmZXIoKTtcbiAgICB0aGlzLnVucmVnaXN0ZXJPbkljZVJlc3RhcnQoKTtcblxuICAgIHRoaXMucGMucmVtb3ZlRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgdGhpcy5vbkljZUNhbmRpZGF0ZSk7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuaGFuZGxlT25UcmFjayk7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKCdpY2VjYW5kaWRhdGVlcnJvcicsIHRoaXMub25JY2VDYW5kaWRhdGVFcnJvcik7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlLFxuICAgICk7XG4gICAgdGhpcy5wYy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJyxcbiAgICAgIHRoaXMub25JY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIGBSVENQZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpYCBtZXRob2RcbiAgICogQHBhcmFtIHNlbGVjdG9yXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBnZXRTdGF0cyA9IChzZWxlY3Rvcj86IE1lZGlhU3RyZWFtVHJhY2sgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMucGMuZ2V0U3RhdHMoc2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICpcbiAgICogQHBhcmFtIHNmdUNsaWVudCB0aGUgU0ZVIGNsaWVudCB0byB1c2UuXG4gICAqL1xuICBzZXRTZnVDbGllbnQgPSAoc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQpID0+IHtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHNmdUNsaWVudDtcbiAgfTtcblxuICAvKipcbiAgICogUmVzdGFydHMgdGhlIElDRSBjb25uZWN0aW9uIGFuZCByZW5lZ290aWF0ZXMgd2l0aCB0aGUgU0ZVLlxuICAgKi9cbiAgcmVzdGFydEljZSA9IGFzeW5jICgpID0+IHtcbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnUmVzdGFydGluZyBJQ0UgY29ubmVjdGlvbicpO1xuICAgIGlmICh0aGlzLnBjLnNpZ25hbGluZ1N0YXRlID09PSAnaGF2ZS1yZW1vdGUtb2ZmZXInKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnSUNFIHJlc3RhcnQgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYy5jb25uZWN0aW9uU3RhdGUgPT09ICduZXcnKSB7XG4gICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgJ2RlYnVnJyxcbiAgICAgICAgYElDRSBjb25uZWN0aW9uIGlzIG5vdCB5ZXQgZXN0YWJsaXNoZWQsIHNraXBwaW5nIHJlc3RhcnQuYCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzSXNJY2VSZXN0YXJ0aW5nID0gdGhpcy5pc0ljZVJlc3RhcnRpbmc7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMuc2Z1Q2xpZW50LmljZVJlc3RhcnQoe1xuICAgICAgICBwZWVyVHlwZTogUGVlclR5cGUuU1VCU0NSSUJFUixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHJlc3RvcmUgdGhlIHByZXZpb3VzIHN0YXRlLCBhcyBvdXIgaW50ZW50IGZvciByZXN0YXJ0aW5nIElDRSBmYWlsZWRcbiAgICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gcHJldmlvdXNJc0ljZVJlc3RhcnRpbmc7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZU9uVHJhY2sgPSAoZTogUlRDVHJhY2tFdmVudCkgPT4ge1xuICAgIGNvbnN0IFtwcmltYXJ5U3RyZWFtXSA9IGUuc3RyZWFtcztcbiAgICAvLyBleGFtcGxlOiBgZTNmNmFhZjgtYjAzZC00OTExLWJlMzYtODNmNDdkMzdhNzZhOlRSQUNLX1RZUEVfVklERU9gXG4gICAgY29uc3QgW3RyYWNrSWQsIHJhd1RyYWNrVHlwZV0gPSBwcmltYXJ5U3RyZWFtLmlkLnNwbGl0KCc6Jyk7XG4gICAgY29uc3QgcGFydGljaXBhbnRUb1VwZGF0ZSA9IHRoaXMuc3RhdGUucGFydGljaXBhbnRzLmZpbmQoXG4gICAgICAocCkgPT4gcC50cmFja0xvb2t1cFByZWZpeCA9PT0gdHJhY2tJZCxcbiAgICApO1xuICAgIHRoaXMubG9nZ2VyKFxuICAgICAgJ2RlYnVnJyxcbiAgICAgIGBbb25UcmFja106IEdvdCByZW1vdGUgJHtyYXdUcmFja1R5cGV9IHRyYWNrIGZvciB1c2VySWQ6ICR7cGFydGljaXBhbnRUb1VwZGF0ZT8udXNlcklkfWAsXG4gICAgICBlLnRyYWNrLmlkLFxuICAgICAgZS50cmFjayxcbiAgICApO1xuXG4gICAgY29uc3QgdHJhY2tEZWJ1Z0luZm8gPSBgJHtwYXJ0aWNpcGFudFRvVXBkYXRlPy51c2VySWR9ICR7cmF3VHJhY2tUeXBlfToke3RyYWNrSWR9YDtcbiAgICBlLnRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ211dGUnLCAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlcignaW5mbycsIGBbb25UcmFja106IFRyYWNrIG11dGVkOiAke3RyYWNrRGVidWdJbmZvfWApO1xuICAgIH0pO1xuXG4gICAgZS50cmFjay5hZGRFdmVudExpc3RlbmVyKCd1bm11dGUnLCAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlcignaW5mbycsIGBbb25UcmFja106IFRyYWNrIHVubXV0ZWQ6ICR7dHJhY2tEZWJ1Z0luZm99YCk7XG4gICAgfSk7XG5cbiAgICBlLnRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIoJ2luZm8nLCBgW29uVHJhY2tdOiBUcmFjayBlbmRlZDogJHt0cmFja0RlYnVnSW5mb31gKTtcbiAgICAgIHRoaXMuc3RhdGUucmVtb3ZlT3JwaGFuZWRUcmFjayhwcmltYXJ5U3RyZWFtLmlkKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRyYWNrVHlwZSA9IHRvVHJhY2tUeXBlKHJhd1RyYWNrVHlwZSk7XG4gICAgaWYgKCF0cmFja1R5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmxvZ2dlcignZXJyb3InLCBgVW5rbm93biB0cmFjayB0eXBlOiAke3Jhd1RyYWNrVHlwZX1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXBhcnRpY2lwYW50VG9VcGRhdGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnd2FybicsXG4gICAgICAgIGBbb25UcmFja106IFJlY2VpdmVkIHRyYWNrIGZvciB1bmtub3duIHBhcnRpY2lwYW50OiAke3RyYWNrSWR9YCxcbiAgICAgICAgZSxcbiAgICAgICk7XG4gICAgICB0aGlzLnN0YXRlLnJlZ2lzdGVyT3JwaGFuZWRUcmFjayh7XG4gICAgICAgIGlkOiBwcmltYXJ5U3RyZWFtLmlkLFxuICAgICAgICB0cmFja0xvb2t1cFByZWZpeDogdHJhY2tJZCxcbiAgICAgICAgdHJhY2s6IHByaW1hcnlTdHJlYW0sXG4gICAgICAgIHRyYWNrVHlwZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbUtpbmRQcm9wID0gdHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSh0cmFja1R5cGUpO1xuICAgIGlmICghc3RyZWFtS2luZFByb3ApIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdlcnJvcicsIGBVbmtub3duIHRyYWNrIHR5cGU6ICR7cmF3VHJhY2tUeXBlfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwcmV2aW91c1N0cmVhbSA9IHBhcnRpY2lwYW50VG9VcGRhdGVbc3RyZWFtS2luZFByb3BdO1xuICAgIGlmIChwcmV2aW91c1N0cmVhbSkge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgYFtvblRyYWNrXTogQ2xlYW5pbmcgdXAgcHJldmlvdXMgcmVtb3RlICR7ZS50cmFjay5raW5kfSB0cmFja3MgZm9yIHVzZXJJZDogJHtwYXJ0aWNpcGFudFRvVXBkYXRlLnVzZXJJZH1gLFxuICAgICAgKTtcbiAgICAgIHByZXZpb3VzU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgdC5zdG9wKCk7XG4gICAgICAgIHByZXZpb3VzU3RyZWFtLnJlbW92ZVRyYWNrKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUudXBkYXRlUGFydGljaXBhbnQocGFydGljaXBhbnRUb1VwZGF0ZS5zZXNzaW9uSWQsIHtcbiAgICAgIFtzdHJlYW1LaW5kUHJvcF06IHByaW1hcnlTdHJlYW0sXG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNhbmRpZGF0ZSA9IChlOiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyBjYW5kaWRhdGUgfSA9IGU7XG4gICAgaWYgKCFjYW5kaWRhdGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdudWxsIGljZSBjYW5kaWRhdGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNmdUNsaWVudFxuICAgICAgLmljZVRyaWNrbGUoe1xuICAgICAgICBpY2VDYW5kaWRhdGU6IGdldEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpLFxuICAgICAgICBwZWVyVHlwZTogUGVlclR5cGUuU1VCU0NSSUJFUixcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsIGBJQ0VUcmlja2xlIGZhaWxlZGAsIGVycik7XG4gICAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIG5lZ290aWF0ZSA9IGFzeW5jIChzdWJzY3JpYmVyT2ZmZXI6IFN1YnNjcmliZXJPZmZlcikgPT4ge1xuICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgYFJlY2VpdmVkIHN1YnNjcmliZXJPZmZlcmAsIHN1YnNjcmliZXJPZmZlcik7XG5cbiAgICBhd2FpdCB0aGlzLnBjLnNldFJlbW90ZURlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6ICdvZmZlcicsXG4gICAgICBzZHA6IHN1YnNjcmliZXJPZmZlci5zZHAsXG4gICAgfSk7XG5cbiAgICB0aGlzLnNmdUNsaWVudC5pY2VUcmlja2xlQnVmZmVyLnN1YnNjcmliZXJDYW5kaWRhdGVzLnN1YnNjcmliZShcbiAgICAgIGFzeW5jIChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBpY2VDYW5kaWRhdGUgPSBKU09OLnBhcnNlKGNhbmRpZGF0ZS5pY2VDYW5kaWRhdGUpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGMuYWRkSWNlQ2FuZGlkYXRlKGljZUNhbmRpZGF0ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsIGBJQ0UgY2FuZGlkYXRlIGVycm9yYCwgW2UsIGNhbmRpZGF0ZV0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICk7XG5cbiAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB0aGlzLnBjLmNyZWF0ZUFuc3dlcigpO1xuICAgIGF3YWl0IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuXG4gICAgYXdhaXQgdGhpcy5zZnVDbGllbnQuc2VuZEFuc3dlcih7XG4gICAgICBwZWVyVHlwZTogUGVlclR5cGUuU1VCU0NSSUJFUixcbiAgICAgIHNkcDogYW5zd2VyLnNkcCB8fCAnJyxcbiAgICB9KTtcblxuICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSA9ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGMuaWNlQ29ubmVjdGlvblN0YXRlO1xuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBJQ0UgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2VkYCwgc3RhdGUpO1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HKSByZXR1cm47XG5cbiAgICAvLyBkbyBub3RoaW5nIHdoZW4gSUNFIGlzIHJlc3RhcnRpbmdcbiAgICBpZiAodGhpcy5pc0ljZVJlc3RhcnRpbmcpIHJldHVybjtcblxuICAgIGlmIChzdGF0ZSA9PT0gJ2ZhaWxlZCcgfHwgc3RhdGUgPT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgQXR0ZW1wdGluZyB0byByZXN0YXJ0IElDRWApO1xuICAgICAgdGhpcy5yZXN0YXJ0SWNlKCkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYElDRSByZXN0YXJ0IGZhaWxlZGAsIGUpO1xuICAgICAgICB0aGlzLm9uVW5yZWNvdmVyYWJsZUVycm9yPy4oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIG9uSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoXG4gICAgICAnZGVidWcnLFxuICAgICAgYElDRSBnYXRoZXJpbmcgc3RhdGUgY2hhbmdlZGAsXG4gICAgICB0aGlzLnBjLmljZUdhdGhlcmluZ1N0YXRlLFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNhbmRpZGF0ZUVycm9yID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgIGUgaW5zdGFuY2VvZiBSVENQZWVyQ29ubmVjdGlvbkljZUVycm9yRXZlbnQgJiZcbiAgICAgIGAke2UuZXJyb3JDb2RlfTogJHtlLmVycm9yVGV4dH1gO1xuICAgIGNvbnN0IGljZVN0YXRlID0gdGhpcy5wYy5pY2VDb25uZWN0aW9uU3RhdGU7XG4gICAgY29uc3QgbG9nTGV2ZWwgPVxuICAgICAgaWNlU3RhdGUgPT09ICdjb25uZWN0ZWQnIHx8IGljZVN0YXRlID09PSAnY2hlY2tpbmcnID8gJ2RlYnVnJyA6ICd3YXJuJztcbiAgICB0aGlzLmxvZ2dlcihsb2dMZXZlbCwgYElDRSBDYW5kaWRhdGUgZXJyb3JgLCBlcnJvck1lc3NhZ2UpO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgU2Z1RXZlbnQgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L2V2ZW50L2V2ZW50cyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgRGlzcGF0Y2hhYmxlTWVzc2FnZSwgU2Z1RXZlbnRLaW5kcyB9IGZyb20gJy4vRGlzcGF0Y2hlcic7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVXZWJTb2NrZXRTaWduYWxDaGFubmVsID0gKG9wdHM6IHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgb25NZXNzYWdlOiA8SyBleHRlbmRzIFNmdUV2ZW50S2luZHM+KG1lc3NhZ2U6IERpc3BhdGNoYWJsZU1lc3NhZ2U8Sz4pID0+IHZvaWQ7XG4gIGxvZ1RhZzogc3RyaW5nO1xufSkgPT4ge1xuICBjb25zdCB7IGVuZHBvaW50LCBvbk1lc3NhZ2UsIGxvZ1RhZyB9ID0gb3B0cztcbiAgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnU2Z1Q2xpZW50V1MnLCBsb2dUYWddKTtcbiAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KGVuZHBvaW50KTtcbiAgd3MuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7IC8vIGRvIHdlIG5lZWQgdGhpcz9cblxuICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlKSA9PiB7XG4gICAgbG9nZ2VyKCdlcnJvcicsICdTaWduYWxpbmcgV1MgY2hhbm5lbCBlcnJvcicsIGUpO1xuICB9KTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsIChlKSA9PiB7XG4gICAgbG9nZ2VyKCdpbmZvJywgJ1NpZ25hbGluZyBXUyBjaGFubmVsIGlzIGNsb3NlZCcsIGUpO1xuICB9KTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKGUpID0+IHtcbiAgICBsb2dnZXIoJ2luZm8nLCAnU2lnbmFsaW5nIFdTIGNoYW5uZWwgaXMgb3BlbicsIGUpO1xuICB9KTtcblxuICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGUpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgIGUuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyXG4gICAgICAgICAgPyBTZnVFdmVudC5mcm9tQmluYXJ5KG5ldyBVaW50OEFycmF5KGUuZGF0YSkpXG4gICAgICAgICAgOiBTZnVFdmVudC5mcm9tSnNvblN0cmluZyhlLmRhdGEudG9TdHJpbmcoKSk7XG5cbiAgICAgIG9uTWVzc2FnZShtZXNzYWdlIGFzIERpc3BhdGNoYWJsZU1lc3NhZ2U8U2Z1RXZlbnRLaW5kcz4pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nZ2VyKFxuICAgICAgICAnZXJyb3InLFxuICAgICAgICAnRmFpbGVkIHRvIGRlY29kZSBhIG1lc3NhZ2UuIENoZWNrIHdoZXRoZXIgdGhlIFByb3RvIG1vZGVscyBtYXRjaC4nLFxuICAgICAgICB7IGV2ZW50OiBlLCBlcnJvcjogZXJyIH0sXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB3cztcbn07XG4iLCJleHBvcnQgdHlwZSBQcm9taXNlV2l0aFJlc29sdmVyczxUPiA9IHtcbiAgcHJvbWlzZTogUHJvbWlzZTxUPjtcbiAgcmVzb2x2ZTogKHZhbHVlOiBUIHwgUHJvbWlzZUxpa2U8VD4pID0+IHZvaWQ7XG4gIHJlamVjdDogKHJlYXNvbjogYW55KSA9PiB2b2lkO1xuICBpc1Jlc29sdmVkOiBib29sZWFuO1xuICBpc1JlamVjdGVkOiBib29sZWFuO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHByb21pc2Ugd2l0aCByZXNvbHZlcnMuXG4gKlxuICogQmFzZWQgb246XG4gKiAtIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2Utd2l0aC1yZXNvbHZlcnMvYmxvYi9tYWluL3BvbHlmaWxscy5qc1xuICovXG5leHBvcnQgY29uc3QgcHJvbWlzZVdpdGhSZXNvbHZlcnMgPSA8VCA9IHZvaWQ+KCk6IFByb21pc2VXaXRoUmVzb2x2ZXJzPFQ+ID0+IHtcbiAgbGV0IHJlc29sdmU6ICh2YWx1ZTogVCB8IFByb21pc2VMaWtlPFQ+KSA9PiB2b2lkO1xuICBsZXQgcmVqZWN0OiAocmVhc29uOiBhbnkpID0+IHZvaWQ7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZTxUPigoX3Jlc29sdmUsIF9yZWplY3QpID0+IHtcbiAgICByZXNvbHZlID0gX3Jlc29sdmU7XG4gICAgcmVqZWN0ID0gX3JlamVjdDtcbiAgfSk7XG5cbiAgbGV0IGlzUmVzb2x2ZWQgPSBmYWxzZTtcbiAgbGV0IGlzUmVqZWN0ZWQgPSBmYWxzZTtcblxuICBjb25zdCByZXNvbHZlciA9ICh2YWx1ZTogVCB8IFByb21pc2VMaWtlPFQ+KSA9PiB7XG4gICAgaXNSZXNvbHZlZCA9IHRydWU7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgcmVqZWN0ZXIgPSAocmVhc29uOiBhbnkpID0+IHtcbiAgICBpc1JlamVjdGVkID0gdHJ1ZTtcbiAgICByZWplY3QocmVhc29uKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHByb21pc2UsXG4gICAgcmVzb2x2ZTogcmVzb2x2ZXIsXG4gICAgcmVqZWN0OiByZWplY3RlcixcbiAgICBpc1Jlc29sdmVkLFxuICAgIGlzUmVqZWN0ZWQsXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgU2lnbmFsU2VydmVyQ2xpZW50IH0gZnJvbSAnLi9nZW4vdmlkZW8vc2Z1L3NpZ25hbF9ycGMvc2lnbmFsLmNsaWVudCc7XG5pbXBvcnQge1xuICBjcmVhdGVTaWduYWxDbGllbnQsXG4gIHJldHJ5YWJsZSxcbiAgd2l0aEhlYWRlcnMsXG4gIHdpdGhSZXF1ZXN0TG9nZ2VyLFxufSBmcm9tICcuL3JwYyc7XG5pbXBvcnQge1xuICBjcmVhdGVXZWJTb2NrZXRTaWduYWxDaGFubmVsLFxuICBEaXNwYXRjaGVyLFxuICBJY2VUcmlja2xlQnVmZmVyLFxufSBmcm9tICcuL3J0Yyc7XG5pbXBvcnQge1xuICBKb2luUmVxdWVzdCxcbiAgSm9pblJlc3BvbnNlLFxuICBTZnVSZXF1ZXN0LFxufSBmcm9tICcuL2dlbi92aWRlby9zZnUvZXZlbnQvZXZlbnRzJztcbmltcG9ydCB7XG4gIElDRVJlc3RhcnRSZXF1ZXN0LFxuICBTZW5kQW5zd2VyUmVxdWVzdCxcbiAgU2VuZFN0YXRzUmVxdWVzdCxcbiAgU2V0UHVibGlzaGVyUmVxdWVzdCxcbiAgVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzLFxuICBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCxcbn0gZnJvbSAnLi9nZW4vdmlkZW8vc2Z1L3NpZ25hbF9ycGMvc2lnbmFsJztcbmltcG9ydCB7IElDRVRyaWNrbGUsIFRyYWNrVHlwZSB9IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IFN0cmVhbUNsaWVudCB9IGZyb20gJy4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi9jbGllbnQnO1xuaW1wb3J0IHsgZ2VuZXJhdGVVVUlEdjQsIHNsZWVwIH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL3V0aWxzJztcbmltcG9ydCB7IENyZWRlbnRpYWxzIH0gZnJvbSAnLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL3R5cGVzJztcbmltcG9ydCB7IGdldExvZ2dlciwgZ2V0TG9nTGV2ZWwgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyB3aXRob3V0Q29uY3VycmVuY3kgfSBmcm9tICcuL2hlbHBlcnMvY29uY3VycmVuY3knO1xuaW1wb3J0IHtcbiAgcHJvbWlzZVdpdGhSZXNvbHZlcnMsXG4gIFByb21pc2VXaXRoUmVzb2x2ZXJzLFxufSBmcm9tICcuL2hlbHBlcnMvd2l0aFJlc29sdmVycyc7XG5cbmV4cG9ydCB0eXBlIFN0cmVhbVNmdUNsaWVudENvbnN0cnVjdG9yID0ge1xuICAvKipcbiAgICogVGhlIGV2ZW50IGRpc3BhdGNoZXIgaW5zdGFuY2UgdG8gdXNlLlxuICAgKi9cbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcjtcblxuICAvKipcbiAgICogVGhlIGNyZWRlbnRpYWxzIHRvIHVzZSBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAqL1xuICBjcmVkZW50aWFsczogQ3JlZGVudGlhbHM7XG5cbiAgLyoqXG4gICAqIGBzZXNzaW9uSWRgIHRvIHVzZSBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAqL1xuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgbG9nIHRhZyB0byB1c2UgZm9yIGxvZ2dpbmcuIFVzZWZ1bCBmb3IgZGVidWdnaW5nIG11bHRpcGxlIGluc3RhbmNlcy5cbiAgICovXG4gIGxvZ1RhZzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgZm9yIHdhaXRpbmcgZm9yIHRoZSBgam9pblJlc3BvbnNlYC5cbiAgICogRGVmYXVsdHMgdG8gNTAwMG1zLlxuICAgKi9cbiAgam9pblJlc3BvbnNlVGltZW91dD86IG51bWJlcjtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIHdoZW4gdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIGlzIGNsb3NlZC5cbiAgICovXG4gIG9uU2lnbmFsQ2xvc2U/OiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUaGUgU3RyZWFtQ2xpZW50IGluc3RhbmNlIHRvIHVzZSBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAqL1xuICBzdHJlYW1DbGllbnQ6IFN0cmVhbUNsaWVudDtcbn07XG5cbi8qKlxuICogVGhlIGNsaWVudCB1c2VkIGZvciBleGNoYW5naW5nIGluZm9ybWF0aW9uIHdpdGggdGhlIFNGVS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbVNmdUNsaWVudCB7XG4gIC8qKlxuICAgKiBBIGJ1ZmZlciBmb3IgSUNFIENhbmRpZGF0ZXMgdGhhdCBhcmUgcmVjZWl2ZWQgYmVmb3JlXG4gICAqIHRoZSBQdWJsaXNoZXIgYW5kIFN1YnNjcmliZXIgUGVlciBDb25uZWN0aW9ucyBhcmUgcmVhZHkgdG8gaGFuZGxlIHRoZW0uXG4gICAqL1xuICByZWFkb25seSBpY2VUcmlja2xlQnVmZmVyID0gbmV3IEljZVRyaWNrbGVCdWZmZXIoKTtcblxuICAvKipcbiAgICogVGhlIGBzZXNzaW9uSWRgIG9mIHRoZSBjdXJyZW50bHkgY29ubmVjdGVkIHBhcnRpY2lwYW50LlxuICAgKi9cbiAgcmVhZG9ubHkgc2Vzc2lvbklkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBgZWRnZU5hbWVgIHJlcHJlc2VudGluZyB0aGUgZWRnZSB0aGUgY2xpZW50IGlzIGNvbm5lY3RlZCB0by5cbiAgICovXG4gIHJlYWRvbmx5IGVkZ2VOYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEhvbGRzIHRoZSBjdXJyZW50IFdlYlNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBTRlUuXG4gICAqL1xuICBwcml2YXRlIHNpZ25hbFdzITogV2ViU29ja2V0O1xuXG4gIC8qKlxuICAgKiBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gaXMgcmVhZHkgKG9wZW4pLlxuICAgKi9cbiAgcHJpdmF0ZSBzaWduYWxSZWFkeSE6IFByb21pc2U8V2ViU29ja2V0PjtcblxuICAvKipcbiAgICogRmxhZyB0byBpbmRpY2F0ZSBpZiB0aGUgY2xpZW50IGlzIGluIHRoZSBwcm9jZXNzIG9mIGxlYXZpbmcgdGhlIGNhbGwuXG4gICAqIFRoaXMgaXMgc2V0IHRvIGB0cnVlYCB3aGVuIHRoZSB1c2VyIGluaXRpYXRlcyB0aGUgbGVhdmUgcHJvY2Vzcy5cbiAgICovXG4gIGlzTGVhdmluZyA9IGZhbHNlO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgcnBjOiBTaWduYWxTZXJ2ZXJDbGllbnQ7XG4gIHByaXZhdGUga2VlcEFsaXZlSW50ZXJ2YWw/OiBOb2RlSlMuVGltZW91dDtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uQ2hlY2tUaW1lb3V0PzogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgbWlncmF0ZUF3YXlUaW1lb3V0PzogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgcGluZ0ludGVydmFsSW5NcyA9IDEwICogMTAwMDtcbiAgcHJpdmF0ZSB1bmhlYWx0aHlUaW1lb3V0SW5NcyA9IHRoaXMucGluZ0ludGVydmFsSW5NcyArIDUgKiAxMDAwO1xuICBwcml2YXRlIGxhc3RNZXNzYWdlVGltZXN0YW1wPzogRGF0ZTtcbiAgcHJpdmF0ZSByZWFkb25seSByZXN0b3JlV2ViU29ja2V0Q29uY3VycmVuY3lUYWcgPSBTeW1ib2woJ3JlY292ZXJXZWJTb2NrZXQnKTtcbiAgcHJpdmF0ZSByZWFkb25seSB1bnN1YnNjcmliZUljZVRyaWNrbGU6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgdW5zdWJzY3JpYmVOZXR3b3JrQ2hhbmdlZDogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWFkb25seSBvblNpZ25hbENsb3NlOiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nVGFnOiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgY3JlZGVudGlhbHM6IENyZWRlbnRpYWxzO1xuICBwcml2YXRlIHJlYWRvbmx5IGRpc3BhdGNoZXI6IERpc3BhdGNoZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgam9pblJlc3BvbnNlVGltZW91dD86IG51bWJlcjtcbiAgcHJpdmF0ZSBuZXR3b3JrQXZhaWxhYmxlVGFzazogUHJvbWlzZVdpdGhSZXNvbHZlcnM8dm9pZD4gfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgSm9pblJlc3BvbnNlIGlzIHJlY2VpdmVkLlxuICAgKiBSZWplY3RzIGFmdGVyIGEgY2VydGFpbiB0aHJlc2hvbGQgaWYgdGhlIHJlc3BvbnNlIGlzIG5vdCByZWNlaXZlZC5cbiAgICovXG4gIHByaXZhdGUgam9pblJlc3BvbnNlVGFzayA9IHByb21pc2VXaXRoUmVzb2x2ZXJzPEpvaW5SZXNwb25zZT4oKTtcblxuICAvKipcbiAgICogUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG1pZ3JhdGlvbiBpcyBjb21wbGV0ZS5cbiAgICogUmVqZWN0cyBhZnRlciBhIGNlcnRhaW4gdGhyZXNob2xkIGlmIHRoZSBtaWdyYXRpb24gaXMgbm90IGNvbXBsZXRlLlxuICAgKi9cbiAgcHJpdmF0ZSBtaWdyYXRpb25UYXNrPzogUHJvbWlzZVdpdGhSZXNvbHZlcnM8dm9pZD47XG5cbiAgLyoqXG4gICAqIEEgY29udHJvbGxlciB0byBhYm9ydCB0aGUgY3VycmVudCByZXF1ZXN0cy5cbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gIC8qKlxuICAgKiBUaGUgbm9ybWFsIGNsb3N1cmUgY29kZS4gVXNlZCBmb3IgY29udHJvbGxlZCBzaHV0ZG93bnMuXG4gICAqL1xuICBzdGF0aWMgTk9STUFMX0NMT1NVUkUgPSAxMDAwO1xuICAvKipcbiAgICogVGhlIGVycm9yIGNvZGUgdXNlZCB3aGVuIHRoZSBTRlUgY29ubmVjdGlvbiBpcyB1bmhlYWx0aHkuXG4gICAqIFVzdWFsbHksIHRoaXMgbWVhbnMgdGhhdCBubyBtZXNzYWdlIGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIFNGVSBmb3JcbiAgICogYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lIChgY29ubmVjdGlvbkNoZWNrVGltZW91dGApLlxuICAgKi9cbiAgc3RhdGljIEVSUk9SX0NPTk5FQ1RJT05fVU5IRUFMVEhZID0gNDAwMTtcbiAgLyoqXG4gICAqIFRoZSBlcnJvciBjb2RlIHVzZWQgd2hlbiB0aGUgU0ZVIGNvbm5lY3Rpb24gaXMgZGlzcG9zZWQgYmVjYXVzZSBhIG5ld1xuICAgKiBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkIG9yIGlzIGFib3V0IHRvIGJlIGVzdGFibGlzaGVkLlxuICAgKiBIZXJlLCB3ZSBkb24ndCB1c2UgMTAwMCAobm9ybWFsIGNsb3N1cmUpIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0aGVcbiAgICogU0ZVIHRvIGNsZWFuIHVwIHRoZSByZXNvdXJjZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IHBhcnRpY2lwYW50LlxuICAgKi9cbiAgc3RhdGljIERJU1BPU0VfT0xEX1NPQ0tFVCA9IDQwMDI7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgU0ZVIGNsaWVudC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkaXNwYXRjaGVyLFxuICAgIGNyZWRlbnRpYWxzLFxuICAgIHNlc3Npb25JZCxcbiAgICBsb2dUYWcsXG4gICAgam9pblJlc3BvbnNlVGltZW91dCA9IDUwMDAsXG4gICAgb25TaWduYWxDbG9zZSxcbiAgICBzdHJlYW1DbGllbnQsXG4gIH06IFN0cmVhbVNmdUNsaWVudENvbnN0cnVjdG9yKSB7XG4gICAgdGhpcy5kaXNwYXRjaGVyID0gZGlzcGF0Y2hlcjtcbiAgICB0aGlzLnNlc3Npb25JZCA9IHNlc3Npb25JZCB8fCBnZW5lcmF0ZVVVSUR2NCgpO1xuICAgIHRoaXMub25TaWduYWxDbG9zZSA9IG9uU2lnbmFsQ2xvc2U7XG4gICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xuICAgIGNvbnN0IHsgc2VydmVyLCB0b2tlbiB9ID0gY3JlZGVudGlhbHM7XG4gICAgdGhpcy5lZGdlTmFtZSA9IHNlcnZlci5lZGdlX25hbWU7XG4gICAgdGhpcy5qb2luUmVzcG9uc2VUaW1lb3V0ID0gam9pblJlc3BvbnNlVGltZW91dDtcbiAgICB0aGlzLmxvZ1RhZyA9IGxvZ1RhZztcbiAgICB0aGlzLmxvZ2dlciA9IGdldExvZ2dlcihbJ1NmdUNsaWVudCcsIGxvZ1RhZ10pO1xuICAgIHRoaXMucnBjID0gY3JlYXRlU2lnbmFsQ2xpZW50KHtcbiAgICAgIGJhc2VVcmw6IHNlcnZlci51cmwsXG4gICAgICBpbnRlcmNlcHRvcnM6IFtcbiAgICAgICAgd2l0aEhlYWRlcnMoe1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICB9KSxcbiAgICAgICAgZ2V0TG9nTGV2ZWwoKSA9PT0gJ3RyYWNlJyAmJiB3aXRoUmVxdWVzdExvZ2dlcih0aGlzLmxvZ2dlciwgJ3RyYWNlJyksXG4gICAgICBdLmZpbHRlcigodikgPT4gISF2KSxcbiAgICB9KTtcblxuICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRoZSBJQ0VUcmlja2xlIGtpbmQgb2YgZXZlbnRzLlxuICAgIC8vIFRoZSBTRlUgbWlnaHQgdHJpZ2dlciB0aGVzZSBldmVudHMgYmVmb3JlIHRoZSBpbml0aWFsIFJUQ1xuICAgIC8vIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQgb3IgXCJKb2luUmVzcG9uc2VcIiByZWNlaXZlZC5cbiAgICAvLyBJbiB0aGF0IGNhc2UsIHRob3NlIGV2ZW50cyAoSUNFIGNhbmRpZGF0ZXMpIG5lZWQgdG8gYmUgYnVmZmVyZWRcbiAgICAvLyBhbmQgbGF0ZXIgYWRkZWQgdG8gdGhlIGFwcHJvcHJpYXRlIFBlZXJDb25uZWN0aW9uXG4gICAgLy8gb25jZSB0aGUgcmVtb3RlRGVzY3JpcHRpb24gaXMga25vd24gYW5kIHNldC5cbiAgICB0aGlzLnVuc3Vic2NyaWJlSWNlVHJpY2tsZSA9IGRpc3BhdGNoZXIub24oJ2ljZVRyaWNrbGUnLCAoaWNlVHJpY2tsZSkgPT4ge1xuICAgICAgdGhpcy5pY2VUcmlja2xlQnVmZmVyLnB1c2goaWNlVHJpY2tsZSk7XG4gICAgfSk7XG5cbiAgICAvLyBsaXN0ZW4gdG8gbmV0d29yayBjaGFuZ2VzIHRvIGhhbmRsZSBvZmZsaW5lIHN0YXRlXG4gICAgLy8gd2Ugc2hvdWxkbid0IGF0dGVtcHQgdG8gcmVjb3ZlciB3ZWJzb2NrZXQgY29ubmVjdGlvbiB3aGVuIG9mZmxpbmVcbiAgICB0aGlzLnVuc3Vic2NyaWJlTmV0d29ya0NoYW5nZWQgPSBzdHJlYW1DbGllbnQub24oJ25ldHdvcmsuY2hhbmdlZCcsIChlKSA9PiB7XG4gICAgICBpZiAoIWUub25saW5lKSB7XG4gICAgICAgIHRoaXMubmV0d29ya0F2YWlsYWJsZVRhc2sgPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrQXZhaWxhYmxlVGFzaz8ucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVXZWJTb2NrZXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlV2ViU29ja2V0ID0gKCkgPT4ge1xuICAgIHRoaXMuc2lnbmFsV3MgPSBjcmVhdGVXZWJTb2NrZXRTaWduYWxDaGFubmVsKHtcbiAgICAgIGxvZ1RhZzogdGhpcy5sb2dUYWcsXG4gICAgICBlbmRwb2ludDogYCR7dGhpcy5jcmVkZW50aWFscy5zZXJ2ZXIud3NfZW5kcG9pbnR9P3RhZz0ke3RoaXMubG9nVGFnfWAsXG4gICAgICBvbk1lc3NhZ2U6IChtZXNzYWdlKSA9PiB7XG4gICAgICAgIHRoaXMubGFzdE1lc3NhZ2VUaW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlQ29ubmVjdGlvbkNoZWNrKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaChtZXNzYWdlLCB0aGlzLmxvZ1RhZyk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5zaWduYWxXcy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsIHRoaXMuaGFuZGxlV2ViU29ja2V0Q2xvc2UpO1xuICAgIHRoaXMuc2lnbmFsV3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLnJlc3RvcmVXZWJTb2NrZXQpO1xuXG4gICAgdGhpcy5zaWduYWxSZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBvbk9wZW4gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2lnbmFsV3MucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3BlbicsIG9uT3Blbik7XG4gICAgICAgIHJlc29sdmUodGhpcy5zaWduYWxXcyk7XG4gICAgICB9O1xuICAgICAgdGhpcy5zaWduYWxXcy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgb25PcGVuKTtcbiAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIGNsZWFuVXBXZWJTb2NrZXQgPSAoKSA9PiB7XG4gICAgdGhpcy5zaWduYWxXcy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMucmVzdG9yZVdlYlNvY2tldCk7XG4gICAgdGhpcy5zaWduYWxXcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbG9zZScsIHRoaXMuaGFuZGxlV2ViU29ja2V0Q2xvc2UpO1xuICB9O1xuXG4gIHByaXZhdGUgcmVzdG9yZVdlYlNvY2tldCA9ICgpID0+IHtcbiAgICB3aXRob3V0Q29uY3VycmVuY3kodGhpcy5yZXN0b3JlV2ViU29ja2V0Q29uY3VycmVuY3lUYWcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMubmV0d29ya0F2YWlsYWJsZVRhc2s/LnByb21pc2U7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnUmVzdG9yaW5nIFNGVSBXUyBjb25uZWN0aW9uJyk7XG4gICAgICB0aGlzLmNsZWFuVXBXZWJTb2NrZXQoKTtcbiAgICAgIGF3YWl0IHNsZWVwKDUwMCk7XG4gICAgICB0aGlzLmNyZWF0ZVdlYlNvY2tldCgpO1xuICAgIH0pLmNhdGNoKChlcnIpID0+IHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBDYW4ndCByZXN0b3JlIFdTIGNvbm5lY3Rpb25gLCBlcnIpKTtcbiAgfTtcblxuICBnZXQgaXNIZWFsdGh5KCkge1xuICAgIHJldHVybiB0aGlzLnNpZ25hbFdzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOO1xuICB9XG5cbiAgZ2V0IGpvaW5UYXNrKCkge1xuICAgIHJldHVybiB0aGlzLmpvaW5SZXNwb25zZVRhc2sucHJvbWlzZTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlV2ViU29ja2V0Q2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5zaWduYWxXcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbG9zZScsIHRoaXMuaGFuZGxlV2ViU29ja2V0Q2xvc2UpO1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5rZWVwQWxpdmVJbnRlcnZhbCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dCk7XG4gICAgdGhpcy5vblNpZ25hbENsb3NlPy4oKTtcbiAgfTtcblxuICBjbG9zZSA9IChjb2RlOiBudW1iZXIgPSBTdHJlYW1TZnVDbGllbnQuTk9STUFMX0NMT1NVUkUsIHJlYXNvbj86IHN0cmluZykgPT4ge1xuICAgIGlmICh0aGlzLnNpZ25hbFdzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgQ2xvc2luZyBTRlUgV1MgY29ubmVjdGlvbjogJHtjb2RlfSAtICR7cmVhc29ufWApO1xuICAgICAgdGhpcy5zaWduYWxXcy5jbG9zZShjb2RlLCBganMtY2xpZW50OiAke3JlYXNvbn1gKTtcbiAgICAgIHRoaXMuY2xlYW5VcFdlYlNvY2tldCgpO1xuICAgIH1cbiAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgfTtcblxuICBkaXNwb3NlID0gKCkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdEaXNwb3NpbmcgU0ZVIGNsaWVudCcpO1xuICAgIHRoaXMudW5zdWJzY3JpYmVJY2VUcmlja2xlKCk7XG4gICAgdGhpcy51bnN1YnNjcmliZU5ldHdvcmtDaGFuZ2VkKCk7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmtlZXBBbGl2ZUludGVydmFsKTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0KTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5taWdyYXRlQXdheVRpbWVvdXQpO1xuICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgdGhpcy5taWdyYXRpb25UYXNrPy5yZXNvbHZlKCk7XG4gIH07XG5cbiAgbGVhdmVBbmRDbG9zZSA9IGFzeW5jIChyZWFzb246IHN0cmluZykgPT4ge1xuICAgIGF3YWl0IHRoaXMuam9pblRhc2s7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaXNMZWF2aW5nID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMubm90aWZ5TGVhdmUocmVhc29uKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdFcnJvciBub3RpZnlpbmcgU0ZVIGFib3V0IGxlYXZpbmcgY2FsbCcsIGVycik7XG4gICAgfVxuXG4gICAgdGhpcy5jbG9zZShTdHJlYW1TZnVDbGllbnQuTk9STUFMX0NMT1NVUkUsIHJlYXNvbi5zdWJzdHJpbmcoMCwgMTE1KSk7XG4gIH07XG5cbiAgdXBkYXRlU3Vic2NyaXB0aW9ucyA9IGFzeW5jICh0cmFja3M6IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1tdKSA9PiB7XG4gICAgYXdhaXQgdGhpcy5qb2luVGFzaztcbiAgICByZXR1cm4gcmV0cnlhYmxlKFxuICAgICAgKCkgPT4gdGhpcy5ycGMudXBkYXRlU3Vic2NyaXB0aW9ucyh7IHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQsIHRyYWNrcyB9KSxcbiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICApO1xuICB9O1xuXG4gIHNldFB1Ymxpc2hlciA9IGFzeW5jIChkYXRhOiBPbWl0PFNldFB1Ymxpc2hlclJlcXVlc3QsICdzZXNzaW9uSWQnPikgPT4ge1xuICAgIGF3YWl0IHRoaXMuam9pblRhc2s7XG4gICAgcmV0dXJuIHJldHJ5YWJsZShcbiAgICAgICgpID0+IHRoaXMucnBjLnNldFB1Ymxpc2hlcih7IC4uLmRhdGEsIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQgfSksXG4gICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgKTtcbiAgfTtcblxuICBzZW5kQW5zd2VyID0gYXN5bmMgKGRhdGE6IE9taXQ8U2VuZEFuc3dlclJlcXVlc3QsICdzZXNzaW9uSWQnPikgPT4ge1xuICAgIGF3YWl0IHRoaXMuam9pblRhc2s7XG4gICAgcmV0dXJuIHJldHJ5YWJsZShcbiAgICAgICgpID0+IHRoaXMucnBjLnNlbmRBbnN3ZXIoeyAuLi5kYXRhLCBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkIH0pLFxuICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICk7XG4gIH07XG5cbiAgaWNlVHJpY2tsZSA9IGFzeW5jIChkYXRhOiBPbWl0PElDRVRyaWNrbGUsICdzZXNzaW9uSWQnPikgPT4ge1xuICAgIGF3YWl0IHRoaXMuam9pblRhc2s7XG4gICAgcmV0dXJuIHJldHJ5YWJsZShcbiAgICAgICgpID0+IHRoaXMucnBjLmljZVRyaWNrbGUoeyAuLi5kYXRhLCBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkIH0pLFxuICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICk7XG4gIH07XG5cbiAgaWNlUmVzdGFydCA9IGFzeW5jIChkYXRhOiBPbWl0PElDRVJlc3RhcnRSZXF1ZXN0LCAnc2Vzc2lvbklkJz4pID0+IHtcbiAgICBhd2FpdCB0aGlzLmpvaW5UYXNrO1xuICAgIHJldHVybiByZXRyeWFibGUoXG4gICAgICAoKSA9PiB0aGlzLnJwYy5pY2VSZXN0YXJ0KHsgLi4uZGF0YSwgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9KSxcbiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICApO1xuICB9O1xuXG4gIHVwZGF0ZU11dGVTdGF0ZSA9IGFzeW5jICh0cmFja1R5cGU6IFRyYWNrVHlwZSwgbXV0ZWQ6IGJvb2xlYW4pID0+IHtcbiAgICBhd2FpdCB0aGlzLmpvaW5UYXNrO1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZU11dGVTdGF0ZXMoeyBtdXRlU3RhdGVzOiBbeyB0cmFja1R5cGUsIG11dGVkIH1dIH0pO1xuICB9O1xuXG4gIHVwZGF0ZU11dGVTdGF0ZXMgPSBhc3luYyAoXG4gICAgZGF0YTogT21pdDxVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCwgJ3Nlc3Npb25JZCc+LFxuICApID0+IHtcbiAgICBhd2FpdCB0aGlzLmpvaW5UYXNrO1xuICAgIHJldHVybiByZXRyeWFibGUoXG4gICAgICAoKSA9PiB0aGlzLnJwYy51cGRhdGVNdXRlU3RhdGVzKHsgLi4uZGF0YSwgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9KSxcbiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICApO1xuICB9O1xuXG4gIHNlbmRTdGF0cyA9IGFzeW5jIChzdGF0czogT21pdDxTZW5kU3RhdHNSZXF1ZXN0LCAnc2Vzc2lvbklkJz4pID0+IHtcbiAgICBhd2FpdCB0aGlzLmpvaW5UYXNrO1xuICAgIHJldHVybiByZXRyeWFibGUoXG4gICAgICAoKSA9PiB0aGlzLnJwYy5zZW5kU3RhdHMoeyAuLi5zdGF0cywgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9KSxcbiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICApO1xuICB9O1xuXG4gIHN0YXJ0Tm9pc2VDYW5jZWxsYXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGhpcy5qb2luVGFzaztcbiAgICByZXR1cm4gcmV0cnlhYmxlKFxuICAgICAgKCkgPT4gdGhpcy5ycGMuc3RhcnROb2lzZUNhbmNlbGxhdGlvbih7IHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQgfSksXG4gICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgKTtcbiAgfTtcblxuICBzdG9wTm9pc2VDYW5jZWxsYXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGhpcy5qb2luVGFzaztcbiAgICByZXR1cm4gcmV0cnlhYmxlKFxuICAgICAgKCkgPT4gdGhpcy5ycGMuc3RvcE5vaXNlQ2FuY2VsbGF0aW9uKHsgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9KSxcbiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICApO1xuICB9O1xuXG4gIGVudGVyTWlncmF0aW9uID0gYXN5bmMgKG9wdHM6IHsgdGltZW91dD86IG51bWJlciB9ID0ge30pID0+IHtcbiAgICB0aGlzLmlzTGVhdmluZyA9IHRydWU7XG4gICAgY29uc3QgeyB0aW1lb3V0ID0gNyAqIDEwMDAgfSA9IG9wdHM7XG5cbiAgICB0aGlzLm1pZ3JhdGlvblRhc2s/LnJlamVjdChuZXcgRXJyb3IoJ0NhbmNlbGxlZCBwcmV2aW91cyBtaWdyYXRpb24nKSk7XG4gICAgY29uc3QgdGFzayA9ICh0aGlzLm1pZ3JhdGlvblRhc2sgPSBwcm9taXNlV2l0aFJlc29sdmVycygpKTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuZGlzcGF0Y2hlci5vbihcbiAgICAgICdwYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWlncmF0ZUF3YXlUaW1lb3V0KTtcbiAgICAgICAgdGFzay5yZXNvbHZlKCk7XG4gICAgICB9LFxuICAgICk7XG4gICAgdGhpcy5taWdyYXRlQXdheVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICB0YXNrLnJlamVjdChcbiAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgIGBNaWdyYXRpb24gKCR7dGhpcy5sb2dUYWd9KSBmYWlsZWQgdG8gY29tcGxldGUgaW4gJHt0aW1lb3V0fW1zYCxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfSwgdGltZW91dCk7XG5cbiAgICByZXR1cm4gdGFzay5wcm9taXNlO1xuICB9O1xuXG4gIGpvaW4gPSBhc3luYyAoXG4gICAgZGF0YTogT21pdDxKb2luUmVxdWVzdCwgJ3Nlc3Npb25JZCcgfCAndG9rZW4nPixcbiAgKTogUHJvbWlzZTxKb2luUmVzcG9uc2U+ID0+IHtcbiAgICAvLyB3YWl0IGZvciB0aGUgc2lnbmFsIHdlYiBzb2NrZXQgdG8gYmUgcmVhZHkgYmVmb3JlIHNlbmRpbmcgXCJqb2luUmVxdWVzdFwiXG4gICAgYXdhaXQgdGhpcy5zaWduYWxSZWFkeTtcbiAgICBpZiAodGhpcy5qb2luUmVzcG9uc2VUYXNrLmlzUmVzb2x2ZWQgfHwgdGhpcy5qb2luUmVzcG9uc2VUYXNrLmlzUmVqZWN0ZWQpIHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gbG9jayB0aGUgUlBDIHJlcXVlc3RzIHVudGlsIHdlIHJlY2VpdmUgYSBKb2luUmVzcG9uc2UuXG4gICAgICAvLyB0aGF0J3Mgd2h5IHdlIGhhdmUgdGhpcyBwcmltaXRpdmUgbG9jayBtZWNoYW5pc20uXG4gICAgICAvLyB0aGUgY2xpZW50IHN0YXJ0cyB3aXRoIGFscmVhZHkgaW5pdGlhbGl6ZWQgam9pblJlc3BvbnNlVGFzayxcbiAgICAgIC8vIGFuZCB0aGlzIGNvZGUgY3JlYXRlcyBhIG5ldyBvbmUgZm9yIHRoZSBuZXh0IGpvaW4gcmVxdWVzdC5cbiAgICAgIHRoaXMuam9pblJlc3BvbnNlVGFzayA9IHByb21pc2VXaXRoUmVzb2x2ZXJzPEpvaW5SZXNwb25zZT4oKTtcbiAgICB9XG5cbiAgICAvLyBjYXB0dXJlIGEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IGpvaW5SZXNwb25zZVRhc2sgYXMgaXQgbWlnaHRcbiAgICAvLyBiZSByZXBsYWNlZCB3aXRoIGEgbmV3IG9uZSBpbiBjYXNlIGEgc2Vjb25kIGpvaW4gcmVxdWVzdCBpcyBtYWRlXG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuam9pblJlc3BvbnNlVGFzaztcblxuICAgIGxldCB0aW1lb3V0SWQ6IE5vZGVKUy5UaW1lb3V0O1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5kaXNwYXRjaGVyLm9uKCdqb2luUmVzcG9uc2UnLCAoam9pblJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnUmVjZWl2ZWQgam9pblJlc3BvbnNlJywgam9pblJlc3BvbnNlKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMua2VlcEFsaXZlKCk7XG4gICAgICBjdXJyZW50LnJlc29sdmUoam9pblJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIGN1cnJlbnQucmVqZWN0KG5ldyBFcnJvcignV2FpdGluZyBmb3IgXCJqb2luUmVzcG9uc2VcIiBoYXMgdGltZWQgb3V0JykpO1xuICAgIH0sIHRoaXMuam9pblJlc3BvbnNlVGltZW91dCk7XG5cbiAgICBhd2FpdCB0aGlzLnNlbmQoXG4gICAgICBTZnVSZXF1ZXN0LmNyZWF0ZSh7XG4gICAgICAgIHJlcXVlc3RQYXlsb2FkOiB7XG4gICAgICAgICAgb25lb2ZLaW5kOiAnam9pblJlcXVlc3QnLFxuICAgICAgICAgIGpvaW5SZXF1ZXN0OiBKb2luUmVxdWVzdC5jcmVhdGUoe1xuICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICB0b2tlbjogdGhpcy5jcmVkZW50aWFscy50b2tlbixcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICByZXR1cm4gY3VycmVudC5wcm9taXNlO1xuICB9O1xuXG4gIHBpbmcgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2VuZChcbiAgICAgIFNmdVJlcXVlc3QuY3JlYXRlKHtcbiAgICAgICAgcmVxdWVzdFBheWxvYWQ6IHtcbiAgICAgICAgICBvbmVvZktpbmQ6ICdoZWFsdGhDaGVja1JlcXVlc3QnLFxuICAgICAgICAgIGhlYWx0aENoZWNrUmVxdWVzdDoge30sXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgbm90aWZ5TGVhdmUgPSBhc3luYyAocmVhc29uOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZW5kKFxuICAgICAgU2Z1UmVxdWVzdC5jcmVhdGUoe1xuICAgICAgICByZXF1ZXN0UGF5bG9hZDoge1xuICAgICAgICAgIG9uZW9mS2luZDogJ2xlYXZlQ2FsbFJlcXVlc3QnLFxuICAgICAgICAgIGxlYXZlQ2FsbFJlcXVlc3Q6IHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICByZWFzb24sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBzZW5kID0gYXN5bmMgKG1lc3NhZ2U6IFNmdVJlcXVlc3QpID0+IHtcbiAgICBhd2FpdCB0aGlzLnNpZ25hbFJlYWR5OyAvLyB3YWl0IGZvciB0aGUgc2lnbmFsIHdzIHRvIGJlIG9wZW5cbiAgICBjb25zdCBtc2dKc29uID0gU2Z1UmVxdWVzdC50b0pzb24obWVzc2FnZSk7XG4gICAgaWYgKHRoaXMuc2lnbmFsV3MucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdTaWduYWwgV1MgaXMgbm90IG9wZW4uIFNraXBwaW5nIG1lc3NhZ2UnLCBtc2dKc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgYFNlbmRpbmcgbWVzc2FnZSB0bzogJHt0aGlzLmVkZ2VOYW1lfWAsIG1zZ0pzb24pO1xuICAgIHRoaXMuc2lnbmFsV3Muc2VuZChTZnVSZXF1ZXN0LnRvQmluYXJ5KG1lc3NhZ2UpKTtcbiAgfTtcblxuICBwcml2YXRlIGtlZXBBbGl2ZSA9ICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwpO1xuICAgIHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnBpbmcoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlcignZXJyb3InLCAnRXJyb3Igc2VuZGluZyBoZWFsdGhDaGVja1JlcXVlc3QgdG8gU0ZVJywgZSk7XG4gICAgICB9KTtcbiAgICB9LCB0aGlzLnBpbmdJbnRlcnZhbEluTXMpO1xuICB9O1xuXG4gIHByaXZhdGUgc2NoZWR1bGVDb25uZWN0aW9uQ2hlY2sgPSAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dCk7XG4gICAgdGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5sYXN0TWVzc2FnZVRpbWVzdGFtcCkge1xuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0TWVzc2FnZSA9XG4gICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmxhc3RNZXNzYWdlVGltZXN0YW1wLmdldFRpbWUoKTtcblxuICAgICAgICBpZiAodGltZVNpbmNlTGFzdE1lc3NhZ2UgPiB0aGlzLnVuaGVhbHRoeVRpbWVvdXRJbk1zKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZShcbiAgICAgICAgICAgIFN0cmVhbVNmdUNsaWVudC5FUlJPUl9DT05ORUNUSU9OX1VOSEVBTFRIWSxcbiAgICAgICAgICAgIGBTRlUgY29ubmVjdGlvbiB1bmhlYWx0aHkuIERpZG4ndCByZWNlaXZlIGFueSBtZXNzYWdlIGZvciAke3RoaXMudW5oZWFsdGh5VGltZW91dEluTXN9bXNgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB0aGlzLnVuaGVhbHRoeVRpbWVvdXRJbk1zKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IElDRVNlcnZlciB9IGZyb20gJy4uLy4uL2dlbi9jb29yZGluYXRvcic7XG5cbmV4cG9ydCBjb25zdCB0b1J0Y0NvbmZpZ3VyYXRpb24gPSAoY29uZmlnOiBJQ0VTZXJ2ZXJbXSk6IFJUQ0NvbmZpZ3VyYXRpb24gPT4ge1xuICByZXR1cm4ge1xuICAgIGljZVNlcnZlcnM6IGNvbmZpZy5tYXAoKGljZSkgPT4gKHtcbiAgICAgIHVybHM6IGljZS51cmxzLFxuICAgICAgdXNlcm5hbWU6IGljZS51c2VybmFtZSxcbiAgICAgIGNyZWRlbnRpYWw6IGljZS5wYXNzd29yZCxcbiAgICB9KSksXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgQ2FsbGluZ1N0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHR5cGUgeyBDYWxsQWNjZXB0ZWRFdmVudCwgQ2FsbFJlamVjdGVkRXZlbnQgfSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHsgQ2FsbEVuZGVkIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgQ2FsbEVuZGVkUmVhc29uIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcblxuLyoqXG4gKiBFdmVudCBoYW5kbGVyIHRoYXQgd2F0Y2hlZCB0aGUgZGVsaXZlcnkgb2YgYGNhbGwuYWNjZXB0ZWRgLlxuICogT25jZSB0aGUgZXZlbnQgaXMgcmVjZWl2ZWQsIHRoZSBjYWxsIGlzIGpvaW5lZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoQ2FsbEFjY2VwdGVkID0gKGNhbGw6IENhbGwpID0+IHtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIG9uQ2FsbEFjY2VwdGVkKGV2ZW50OiBDYWxsQWNjZXB0ZWRFdmVudCkge1xuICAgIC8vIFdlIHdhbnQgdG8gZGlzY2FyZCB0aGUgZXZlbnQgaWYgaXQncyBmcm9tIHRoZSBjdXJyZW50IHVzZXJcbiAgICBpZiAoZXZlbnQudXNlci5pZCA9PT0gY2FsbC5jdXJyZW50VXNlcklkKSByZXR1cm47XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gY2FsbDtcbiAgICBpZiAoXG4gICAgICBldmVudC5jYWxsLmNyZWF0ZWRfYnkuaWQgPT09IGNhbGwuY3VycmVudFVzZXJJZCAmJlxuICAgICAgc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuUklOR0lOR1xuICAgICkge1xuICAgICAgYXdhaXQgY2FsbC5qb2luKCk7XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBFdmVudCBoYW5kbGVyIHRoYXQgd2F0Y2hlcyBkZWxpdmVyeSBvZiBgY2FsbC5yZWplY3RlZGAgV2Vic29ja2V0IGV2ZW50LlxuICogT25jZSB0aGUgZXZlbnQgaXMgcmVjZWl2ZWQsIHRoZSBjYWxsIGlzIGxlZnQuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaENhbGxSZWplY3RlZCA9IChjYWxsOiBDYWxsKSA9PiB7XG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiBvbkNhbGxSZWplY3RlZChldmVudDogQ2FsbFJlamVjdGVkRXZlbnQpIHtcbiAgICAvLyBXZSB3YW50IHRvIGRpc2NhcmQgdGhlIGV2ZW50IGlmIGl0J3MgZnJvbSB0aGUgY3VycmVudCB1c2VyXG4gICAgaWYgKGV2ZW50LnVzZXIuaWQgPT09IGNhbGwuY3VycmVudFVzZXJJZCkgcmV0dXJuO1xuICAgIGNvbnN0IHsgY2FsbDogZXZlbnRDYWxsIH0gPSBldmVudDtcbiAgICBjb25zdCB7IHNlc3Npb246IGNhbGxTZXNzaW9uIH0gPSBldmVudENhbGw7XG5cbiAgICBpZiAoIWNhbGxTZXNzaW9uKSB7XG4gICAgICBjYWxsLmxvZ2dlcihcbiAgICAgICAgJ3dhcm4nLFxuICAgICAgICAnTm8gY2FsbCBzZXNzaW9uIHByb3ZpZGVkLiBJZ25vcmluZyBjYWxsLnJlamVjdGVkIGV2ZW50LicsXG4gICAgICAgIGV2ZW50LFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZWplY3RlZEJ5ID0gY2FsbFNlc3Npb24ucmVqZWN0ZWRfYnk7XG4gICAgY29uc3QgeyBtZW1iZXJzLCBjYWxsaW5nU3RhdGUgfSA9IGNhbGwuc3RhdGU7XG4gICAgaWYgKGNhbGxpbmdTdGF0ZSAhPT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcpIHtcbiAgICAgIGNhbGwubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgICdDYWxsIGlzIG5vdCBpbiByaW5naW5nIG1vZGUgKGl0IGlzIGVpdGhlciBhY2NlcHRlZCBvciByZWplY3RlZCBhbHJlYWR5KS4gSWdub3JpbmcgY2FsbC5yZWplY3RlZCBldmVudC4nLFxuICAgICAgICBldmVudCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWxsLmlzQ3JlYXRlZEJ5TWUpIHtcbiAgICAgIGNvbnN0IGV2ZXJ5b25lRWxzZVJlamVjdGVkID0gbWVtYmVyc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiBtLnVzZXJfaWQgIT09IGNhbGwuY3VycmVudFVzZXJJZClcbiAgICAgICAgLmV2ZXJ5KChtKSA9PiByZWplY3RlZEJ5W20udXNlcl9pZF0pO1xuICAgICAgaWYgKGV2ZXJ5b25lRWxzZVJlamVjdGVkKSB7XG4gICAgICAgIGNhbGwubG9nZ2VyKCdpbmZvJywgJ2V2ZXJ5b25lIHJlamVjdGVkLCBsZWF2aW5nIHRoZSBjYWxsJyk7XG4gICAgICAgIGF3YWl0IGNhbGwubGVhdmUoeyByZWFzb246ICdyaW5nOiBldmVyeW9uZSByZWplY3RlZCcgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZWplY3RlZEJ5W2V2ZW50Q2FsbC5jcmVhdGVkX2J5LmlkXSkge1xuICAgICAgICBjYWxsLmxvZ2dlcignaW5mbycsICdjYWxsIGNyZWF0b3IgcmVqZWN0ZWQsIGxlYXZpbmcgY2FsbCcpO1xuICAgICAgICBhd2FpdCBjYWxsLmxlYXZlKHsgcmVhc29uOiAncmluZzogY3JlYXRvciByZWplY3RlZCcgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBFdmVudCBoYW5kbGVyIHRoYXQgd2F0Y2hlcyB0aGUgZGVsaXZlcnkgb2YgYGNhbGwuZW5kZWRgIFdlYnNvY2tldCBldmVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoQ2FsbEVuZGVkID0gKGNhbGw6IENhbGwpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uQ2FsbEVuZGVkKCkge1xuICAgIGNvbnN0IHsgY2FsbGluZ1N0YXRlIH0gPSBjYWxsLnN0YXRlO1xuICAgIGlmIChcbiAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcgfHxcbiAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCB8fFxuICAgICAgY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuSk9JTklOR1xuICAgICkge1xuICAgICAgY2FsbC5sZWF2ZSh7IHJlYXNvbjogJ2NhbGwuZW5kZWQgZXZlbnQgcmVjZWl2ZWQnIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY2FsbC5sb2dnZXIoJ2Vycm9yJywgJ0ZhaWxlZCB0byBsZWF2ZSBjYWxsIGFmdGVyIGNhbGwuZW5kZWQgJywgZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogV2F0Y2hlcyBmb3IgYGNhbGxFbmRlZGAgZXZlbnRzLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hTZnVDYWxsRW5kZWQgPSAoY2FsbDogQ2FsbCkgPT4ge1xuICByZXR1cm4gY2FsbC5vbignY2FsbEVuZGVkJywgYXN5bmMgKGU6IENhbGxFbmRlZCkgPT4ge1xuICAgIGlmIChjYWxsLnN0YXRlLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkxFRlQpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgLy8gYGNhbGwuZW5kZWRgIGV2ZW50IGFycml2ZWQgYWZ0ZXIgdGhlIGNhbGwgaXMgYWxyZWFkeSBsZWZ0XG4gICAgICAvLyBhbmQgYWxsIGV2ZW50IGhhbmRsZXJzIGFyZSBkZXRhY2hlZC4gV2UgbmVlZCB0byBtYW51YWxseVxuICAgICAgLy8gdXBkYXRlIHRoZSBjYWxsIHN0YXRlIHRvIHJlZmxlY3QgdGhlIGNhbGwgaGFzIGVuZGVkLlxuICAgICAgY2FsbC5zdGF0ZS5zZXRFbmRlZEF0KG5ldyBEYXRlKCkpO1xuICAgICAgY29uc3QgcmVhc29uID0gQ2FsbEVuZGVkUmVhc29uW2UucmVhc29uXTtcbiAgICAgIGF3YWl0IGNhbGwubGVhdmUoeyByZWFzb246IGBjYWxsRW5kZWQgcmVjZWl2ZWQ6ICR7cmVhc29ufWAgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjYWxsLmxvZ2dlcihcbiAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgJ0ZhaWxlZCB0byBsZWF2ZSBjYWxsIGFmdGVyIGJlaW5nIGVuZGVkIGJ5IHRoZSBTRlUnLFxuICAgICAgICBlcnIsXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgQ2FsbFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHR5cGUgeyBDYWxsR3JhbnRzVXBkYXRlZCB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvZXZlbnQvZXZlbnRzJztcbmltcG9ydCB7IE93bkNhcGFiaWxpdHkgfSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuXG4vKipcbiAqIEV2ZW50IGhhbmRsZXIgdGhhdCB3YXRjaGVzIGZvciBgY2FsbEdyYW50c1VwZGF0ZWRgIGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0gc3RhdGUgdGhlIGNhbGwgc3RhdGUgdG8gdXBkYXRlLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hDYWxsR3JhbnRzVXBkYXRlZCA9IChzdGF0ZTogQ2FsbFN0YXRlKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBvbkNhbGxHcmFudHNVcGRhdGVkKGV2ZW50OiBDYWxsR3JhbnRzVXBkYXRlZCkge1xuICAgIGNvbnN0IHsgY3VycmVudEdyYW50cyB9ID0gZXZlbnQ7XG4gICAgaWYgKGN1cnJlbnRHcmFudHMpIHtcbiAgICAgIGNvbnN0IHsgY2FuUHVibGlzaEF1ZGlvLCBjYW5QdWJsaXNoVmlkZW8sIGNhblNjcmVlbnNoYXJlIH0gPVxuICAgICAgICBjdXJyZW50R3JhbnRzO1xuXG4gICAgICBjb25zdCB1cGRhdGU6IFBhcnRpYWw8UmVjb3JkPE93bkNhcGFiaWxpdHksIGJvb2xlYW4+PiA9IHtcbiAgICAgICAgW093bkNhcGFiaWxpdHkuU0VORF9BVURJT106IGNhblB1Ymxpc2hBdWRpbyxcbiAgICAgICAgW093bkNhcGFiaWxpdHkuU0VORF9WSURFT106IGNhblB1Ymxpc2hWaWRlbyxcbiAgICAgICAgW093bkNhcGFiaWxpdHkuU0NSRUVOU0hBUkVdOiBjYW5TY3JlZW5zaGFyZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG5leHRDYXBhYmlsaXRpZXMgPSBzdGF0ZS5vd25DYXBhYmlsaXRpZXMuZmlsdGVyKFxuICAgICAgICAoY2FwYWJpbGl0eSkgPT4gdXBkYXRlW2NhcGFiaWxpdHldICE9PSBmYWxzZSxcbiAgICAgICk7XG4gICAgICBPYmplY3QuZW50cmllcyh1cGRhdGUpLmZvckVhY2goKFtjYXBhYmlsaXR5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgaWYgKHZhbHVlICYmICFuZXh0Q2FwYWJpbGl0aWVzLmluY2x1ZGVzKGNhcGFiaWxpdHkgYXMgT3duQ2FwYWJpbGl0eSkpIHtcbiAgICAgICAgICBuZXh0Q2FwYWJpbGl0aWVzLnB1c2goY2FwYWJpbGl0eSBhcyBPd25DYXBhYmlsaXR5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHN0YXRlLnNldE93bkNhcGFiaWxpdGllcyhuZXh0Q2FwYWJpbGl0aWVzKTtcbiAgICB9XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgRGlzcGF0Y2hlciB9IGZyb20gJy4uL3J0Yyc7XG5pbXBvcnQgeyBDYWxsIH0gZnJvbSAnLi4vQ2FsbCc7XG5pbXBvcnQgeyBDYWxsU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgdHlwZSB7IFBpbnNDaGFuZ2VkIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHtcbiAgRXJyb3JDb2RlLFxuICBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneSxcbn0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IE93bkNhcGFiaWxpdHkgfSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuXG4vKipcbiAqIEFuIGV2ZW50IHJlc3BvbmRlciB3aGljaCBoYW5kbGVzIHRoZSBgY2hhbmdlUHVibGlzaFF1YWxpdHlgIGV2ZW50LlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hDaGFuZ2VQdWJsaXNoUXVhbGl0eSA9IChcbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcixcbiAgY2FsbDogQ2FsbCxcbikgPT4ge1xuICByZXR1cm4gZGlzcGF0Y2hlci5vbignY2hhbmdlUHVibGlzaFF1YWxpdHknLCAoZSkgPT4ge1xuICAgIGNvbnN0IHsgdmlkZW9TZW5kZXJzIH0gPSBlO1xuICAgIHZpZGVvU2VuZGVycy5mb3JFYWNoKCh2aWRlb1NlbmRlcikgPT4ge1xuICAgICAgY29uc3QgeyBsYXllcnMgfSA9IHZpZGVvU2VuZGVyO1xuICAgICAgY2FsbC51cGRhdGVQdWJsaXNoUXVhbGl0eShsYXllcnMuZmlsdGVyKChsKSA9PiBsLmFjdGl2ZSkpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCB3YXRjaENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCA9IChcbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcixcbiAgc3RhdGU6IENhbGxTdGF0ZSxcbikgPT4ge1xuICByZXR1cm4gZGlzcGF0Y2hlci5vbignY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJywgKGUpID0+IHtcbiAgICBjb25zdCB7IGNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlcyB9ID0gZTtcbiAgICBpZiAoIWNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlcykgcmV0dXJuO1xuICAgIHN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50cyhcbiAgICAgIGNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlcy5yZWR1Y2U8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoZXM+KFxuICAgICAgICAocGF0Y2hlcywgdXBkYXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXNzaW9uSWQsIGNvbm5lY3Rpb25RdWFsaXR5IH0gPSB1cGRhdGU7XG4gICAgICAgICAgcGF0Y2hlc1tzZXNzaW9uSWRdID0ge1xuICAgICAgICAgICAgY29ubmVjdGlvblF1YWxpdHksXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4gcGF0Y2hlcztcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICApLFxuICAgICk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBhcHByb3hpbWF0ZSBudW1iZXIgb2YgcGFydGljaXBhbnRzIGluIHRoZSBjYWxsIGJ5IHBlZWtpbmcgYXQgdGhlXG4gKiBoZWFsdGggY2hlY2sgZXZlbnRzIHRoYXQgb3VyIFNGVSBzZW5kcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoUGFydGljaXBhbnRDb3VudENoYW5nZWQgPSAoXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsXG4gIHN0YXRlOiBDYWxsU3RhdGUsXG4pID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2hlYWx0aENoZWNrUmVzcG9uc2UnLCAoZSkgPT4ge1xuICAgIGNvbnN0IHsgcGFydGljaXBhbnRDb3VudCB9ID0gZTtcbiAgICBpZiAocGFydGljaXBhbnRDb3VudCkge1xuICAgICAgc3RhdGUuc2V0UGFydGljaXBhbnRDb3VudChwYXJ0aWNpcGFudENvdW50LnRvdGFsKTtcbiAgICAgIHN0YXRlLnNldEFub255bW91c1BhcnRpY2lwYW50Q291bnQocGFydGljaXBhbnRDb3VudC5hbm9ueW1vdXMpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3Qgd2F0Y2hMaXZlRW5kZWQgPSAoZGlzcGF0Y2hlcjogRGlzcGF0Y2hlciwgY2FsbDogQ2FsbCkgPT4ge1xuICByZXR1cm4gZGlzcGF0Y2hlci5vbignZXJyb3InLCAoZSkgPT4ge1xuICAgIGlmIChlLmVycm9yICYmIGUuZXJyb3IuY29kZSAhPT0gRXJyb3JDb2RlLkxJVkVfRU5ERUQpIHJldHVybjtcblxuICAgIGlmICghY2FsbC5wZXJtaXNzaW9uc0NvbnRleHQuaGFzUGVybWlzc2lvbihPd25DYXBhYmlsaXR5LkpPSU5fQkFDS1NUQUdFKSkge1xuICAgICAgY2FsbC5sZWF2ZSh7IHJlYXNvbjogJ2xpdmUgZW5kZWQnIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY2FsbC5sb2dnZXIoJ2Vycm9yJywgJ0ZhaWxlZCB0byBsZWF2ZSBjYWxsIGFmdGVyIGxpdmUgZW5kZWQnLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogV2F0Y2hlcyBhbmQgbG9ncyB0aGUgZXJyb3JzIHJlcG9ydGVkIGJ5IHRoZSBjdXJyZW50bHkgY29ubmVjdGVkIFNGVS5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoU2Z1RXJyb3JSZXBvcnRzID0gKGRpc3BhdGNoZXI6IERpc3BhdGNoZXIpID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2Vycm9yJywgKGUpID0+IHtcbiAgICBpZiAoIWUuZXJyb3IpIHJldHVybjtcbiAgICBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoWydTZnVDbGllbnQnXSk7XG4gICAgY29uc3QgeyBlcnJvciwgcmVjb25uZWN0U3RyYXRlZ3kgfSA9IGU7XG4gICAgbG9nZ2VyKCdlcnJvcicsICdTRlUgcmVwb3J0ZWQgZXJyb3InLCB7XG4gICAgICBjb2RlOiBFcnJvckNvZGVbZXJyb3IuY29kZV0sXG4gICAgICByZWNvbm5lY3RTdHJhdGVneTogV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3lbcmVjb25uZWN0U3RyYXRlZ3ldLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIHNob3VsZFJldHJ5OiBlcnJvci5zaG91bGRSZXRyeSxcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFdhdGNoZXMgZm9yIGBwaW5zVXBkYXRlZGAgZXZlbnRzIGFuZCB1cGRhdGVzIHRoZSBwaW5uZWQgc3RhdGUgb2YgcGFydGljaXBhbnRzXG4gKiBpbiB0aGUgY2FsbC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoUGluc1VwZGF0ZWQgPSAoc3RhdGU6IENhbGxTdGF0ZSkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gb25QaW5zVXBkYXRlZChlOiBQaW5zQ2hhbmdlZCkge1xuICAgIGNvbnN0IHsgcGlucyB9ID0gZTtcbiAgICBzdGF0ZS5zZXRTZXJ2ZXJTaWRlUGlucyhwaW5zKTtcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBDYWxsIH0gZnJvbSAnLi4vQ2FsbCc7XG5pbXBvcnQge1xuICBUcmFja1R5cGUsXG4gIFRyYWNrVW5wdWJsaXNoUmVhc29uLFxufSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuXG4vKipcbiAqIEFuIGV2ZW50IGhhbmRsZXIgdGhhdCBoYW5kbGVzIHNvZnQgbXV0ZXMuXG4gKlxuICogQHBhcmFtIGNhbGwgdGhlIGNhbGwuXG4gKi9cbmV4cG9ydCBjb25zdCBoYW5kbGVSZW1vdGVTb2Z0TXV0ZSA9IChjYWxsOiBDYWxsKSA9PiB7XG4gIHJldHVybiBjYWxsLm9uKCd0cmFja1VucHVibGlzaGVkJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyBjYXVzZSwgdHlwZSwgc2Vzc2lvbklkIH0gPSBldmVudDtcbiAgICBjb25zdCB7IGxvY2FsUGFydGljaXBhbnQgfSA9IGNhbGwuc3RhdGU7XG4gICAgaWYgKFxuICAgICAgY2F1c2UgPT09IFRyYWNrVW5wdWJsaXNoUmVhc29uLk1PREVSQVRJT04gJiZcbiAgICAgIHNlc3Npb25JZCA9PT0gbG9jYWxQYXJ0aWNpcGFudD8uc2Vzc2lvbklkXG4gICAgKSB7XG4gICAgICBjb25zdCBsb2dnZXIgPSBjYWxsLmxvZ2dlcjtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ2luZm8nLFxuICAgICAgICBgTG9jYWwgcGFydGljaXBhbnQncyAke1RyYWNrVHlwZVt0eXBlXX0gdHJhY2sgaXMgbXV0ZWQgcmVtb3RlbHlgLFxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlID09PSBUcmFja1R5cGUuVklERU8pIHtcbiAgICAgICAgICBhd2FpdCBjYWxsLmNhbWVyYS5kaXNhYmxlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVHJhY2tUeXBlLkFVRElPKSB7XG4gICAgICAgICAgYXdhaXQgY2FsbC5taWNyb3Bob25lLmRpc2FibGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICB0eXBlID09PSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFIHx8XG4gICAgICAgICAgdHlwZSA9PT0gVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJT1xuICAgICAgICApIHtcbiAgICAgICAgICBhd2FpdCBjYWxsLnNjcmVlblNoYXJlLmRpc2FibGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2dnZXIoXG4gICAgICAgICAgICAnd2FybicsXG4gICAgICAgICAgICAnVW5zdXBwb3J0ZWQgdHJhY2sgdHlwZSB0byBzb2Z0IG11dGUnLFxuICAgICAgICAgICAgVHJhY2tUeXBlW3R5cGVdLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlcignZXJyb3InLCAnRmFpbGVkIHRvIHN0b3AgcHVibGlzaGluZycsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcbiIsImltcG9ydCB0eXBlIHtcbiAgUGFydGljaXBhbnRKb2luZWQsXG4gIFBhcnRpY2lwYW50TGVmdCxcbiAgUGFydGljaXBhbnRVcGRhdGVkLFxuICBUcmFja1B1Ymxpc2hlZCxcbiAgVHJhY2tVbnB1Ymxpc2hlZCxcbn0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHR5cGUgeyBQYXJ0aWNpcGFudCB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQge1xuICBTdHJlYW1WaWRlb1BhcnRpY2lwYW50LFxuICBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2gsXG4gIFZpc2liaWxpdHlTdGF0ZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgQ2FsbFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHsgdHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSB9IGZyb20gJy4uL3J0Yy9oZWxwZXJzL3RyYWNrcyc7XG5cbi8qKlxuICogQW4gZXZlbnQgcmVzcG9uZGVyIHdoaWNoIGhhbmRsZXMgdGhlIGBwYXJ0aWNpcGFudEpvaW5lZGAgZXZlbnQuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaFBhcnRpY2lwYW50Sm9pbmVkID0gKHN0YXRlOiBDYWxsU3RhdGUpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uUGFydGljaXBhbnRKb2luZWQoZTogUGFydGljaXBhbnRKb2luZWQpIHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50IH0gPSBlO1xuICAgIGlmICghcGFydGljaXBhbnQpIHJldHVybjtcbiAgICAvLyBgc3RhdGUudXBkYXRlT3JBZGRQYXJ0aWNpcGFudGAgYWN0cyBhcyBhIHNhZmVndWFyZCBhZ2FpbnN0XG4gICAgLy8gcG90ZW50aWFsIGR1cGxpY2F0ZSBldmVudHMgZnJvbSB0aGUgU0ZVLlxuICAgIC8vXG4gICAgLy8gQWx0aG91Z2ggdGhlIFNGVSBzaG91bGQgbm90IHNlbmQgZHVwbGljYXRlIGV2ZW50cywgd2UgaGF2ZSBzZWVuXG4gICAgLy8gc29tZSByYWNlIGNvbmRpdGlvbnMgaW4gdGhlIHBhc3QgZHVyaW5nIHRoZSBgam9pbi1mbG93YC5cbiAgICAvLyBUaGUgU0ZVIHdvdWxkIHNlbmQgcGFydGljaXBhbnQgaW5mbyBhcyBwYXJ0IG9mIHRoZSBgam9pbmBcbiAgICAvLyByZXNwb25zZSBhbmQgdGhlbiBmb2xsb3cgdXAgd2l0aCBhIGBwYXJ0aWNpcGFudEpvaW5lZGAgZXZlbnQgZm9yXG4gICAgLy8gYWxyZWFkeSBhbm5vdW5jZWQgcGFydGljaXBhbnRzLlxuICAgIGNvbnN0IG9ycGhhbmVkVHJhY2tzID0gcmVjb25jaWxlT3JwaGFuZWRUcmFja3Moc3RhdGUsIHBhcnRpY2lwYW50KTtcbiAgICBzdGF0ZS51cGRhdGVPckFkZFBhcnRpY2lwYW50KFxuICAgICAgcGFydGljaXBhbnQuc2Vzc2lvbklkLFxuICAgICAgT2JqZWN0LmFzc2lnbjxcbiAgICAgICAgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCxcbiAgICAgICAgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoIHwgdW5kZWZpbmVkLFxuICAgICAgICBQYXJ0aWFsPFN0cmVhbVZpZGVvUGFydGljaXBhbnQ+XG4gICAgICA+KHBhcnRpY2lwYW50LCBvcnBoYW5lZFRyYWNrcywge1xuICAgICAgICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZToge1xuICAgICAgICAgIHZpZGVvVHJhY2s6IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOLFxuICAgICAgICAgIHNjcmVlblNoYXJlVHJhY2s6IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgKTtcbiAgfTtcbn07XG5cbi8qKlxuICogQW4gZXZlbnQgcmVzcG9uZGVyIHdoaWNoIGhhbmRsZXMgdGhlIGBwYXJ0aWNpcGFudExlZnRgIGV2ZW50LlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hQYXJ0aWNpcGFudExlZnQgPSAoc3RhdGU6IENhbGxTdGF0ZSkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gb25QYXJ0aWNpcGFudExlZnQoZTogUGFydGljaXBhbnRMZWZ0KSB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCB9ID0gZTtcbiAgICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm47XG5cbiAgICBzdGF0ZS5zZXRQYXJ0aWNpcGFudHMoKHBhcnRpY2lwYW50cykgPT5cbiAgICAgIHBhcnRpY2lwYW50cy5maWx0ZXIoKHApID0+IHAuc2Vzc2lvbklkICE9PSBwYXJ0aWNpcGFudC5zZXNzaW9uSWQpLFxuICAgICk7XG4gIH07XG59O1xuXG4vKipcbiAqIEFuIGV2ZW50IHJlc3BvbmRlciB3aGljaCBoYW5kbGVzIHRoZSBgcGFydGljaXBhbnRVcGRhdGVkYCBldmVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoUGFydGljaXBhbnRVcGRhdGVkID0gKHN0YXRlOiBDYWxsU3RhdGUpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uUGFydGljaXBhbnRVcGRhdGVkKGU6IFBhcnRpY2lwYW50VXBkYXRlZCkge1xuICAgIGNvbnN0IHsgcGFydGljaXBhbnQgfSA9IGU7XG4gICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuO1xuICAgIHN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50LnNlc3Npb25JZCwgcGFydGljaXBhbnQpO1xuICB9O1xufTtcblxuLyoqXG4gKiBBbiBldmVudCByZXNwb25kZXIgd2hpY2ggaGFuZGxlcyB0aGUgYHRyYWNrUHVibGlzaGVkYCBldmVudC5cbiAqIFRoZSBTRlUgd2lsbCBzZW5kIHRoaXMgZXZlbnQgd2hlbiBhIHBhcnRpY2lwYW50IHB1Ymxpc2hlcyBhIHRyYWNrLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hUcmFja1B1Ymxpc2hlZCA9IChzdGF0ZTogQ2FsbFN0YXRlKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBvblRyYWNrUHVibGlzaGVkKGU6IFRyYWNrUHVibGlzaGVkKSB7XG4gICAgY29uc3QgeyB0eXBlLCBzZXNzaW9uSWQgfSA9IGU7XG4gICAgLy8gQW4gb3B0aW1pemF0aW9uIGZvciBsYXJnZSBjYWxscy5cbiAgICAvLyBBZnRlciBhIGNlcnRhaW4gdGhyZXNob2xkLCB0aGUgU0ZVIHdvdWxkIHN0b3AgZW1pdHRpbmcgYHBhcnRpY2lwYW50Sm9pbmVkYFxuICAgIC8vIGV2ZW50cywgYW5kIGluc3RlYWQsIGl0IHdvdWxkIG9ubHkgcHJvdmlkZSB0aGUgcGFydGljaXBhbnQncyBpbmZvcm1hdGlvblxuICAgIC8vIG9uY2UgdGhleSBzdGFydCBwdWJsaXNoaW5nIGEgdHJhY2suXG4gICAgaWYgKGUucGFydGljaXBhbnQpIHtcbiAgICAgIGNvbnN0IG9ycGhhbmVkVHJhY2tzID0gcmVjb25jaWxlT3JwaGFuZWRUcmFja3Moc3RhdGUsIGUucGFydGljaXBhbnQpO1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBPYmplY3QuYXNzaWduKGUucGFydGljaXBhbnQsIG9ycGhhbmVkVHJhY2tzKTtcbiAgICAgIHN0YXRlLnVwZGF0ZU9yQWRkUGFydGljaXBhbnQoc2Vzc2lvbklkLCBwYXJ0aWNpcGFudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwgKHApID0+ICh7XG4gICAgICAgIHB1Ymxpc2hlZFRyYWNrczogWy4uLnAucHVibGlzaGVkVHJhY2tzLCB0eXBlXS5maWx0ZXIodW5pcXVlKSxcbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEFuIGV2ZW50IHJlc3BvbmRlciB3aGljaCBoYW5kbGVzIHRoZSBgdHJhY2tVbnB1Ymxpc2hlZGAgZXZlbnQuXG4gKiBUaGUgU0ZVIHdpbGwgc2VuZCB0aGlzIGV2ZW50IHdoZW4gYSBwYXJ0aWNpcGFudCB1bnB1Ymxpc2hlcyBhIHRyYWNrLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hUcmFja1VucHVibGlzaGVkID0gKHN0YXRlOiBDYWxsU3RhdGUpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uVHJhY2tVbnB1Ymxpc2hlZChlOiBUcmFja1VucHVibGlzaGVkKSB7XG4gICAgY29uc3QgeyB0eXBlLCBzZXNzaW9uSWQgfSA9IGU7XG4gICAgLy8gQW4gb3B0aW1pemF0aW9uIGZvciBsYXJnZSBjYWxscy4gU2VlIGB3YXRjaFRyYWNrUHVibGlzaGVkYC5cbiAgICBpZiAoZS5wYXJ0aWNpcGFudCkge1xuICAgICAgY29uc3Qgb3JwaGFuZWRUcmFja3MgPSByZWNvbmNpbGVPcnBoYW5lZFRyYWNrcyhzdGF0ZSwgZS5wYXJ0aWNpcGFudCk7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IE9iamVjdC5hc3NpZ24oZS5wYXJ0aWNpcGFudCwgb3JwaGFuZWRUcmFja3MpO1xuICAgICAgc3RhdGUudXBkYXRlT3JBZGRQYXJ0aWNpcGFudChzZXNzaW9uSWQsIHBhcnRpY2lwYW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCAocCkgPT4gKHtcbiAgICAgICAgcHVibGlzaGVkVHJhY2tzOiBwLnB1Ymxpc2hlZFRyYWNrcy5maWx0ZXIoKHQpID0+IHQgIT09IHR5cGUpLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfTtcbn07XG5cbmNvbnN0IHVuaXF1ZSA9IDxUPih2OiBULCBpOiBudW1iZXIsIGFycjogVFtdKSA9PiBhcnIuaW5kZXhPZih2KSA9PT0gaTtcblxuLyoqXG4gKiBSZWNvbmNpbGVzIG9ycGhhbmVkIHRyYWNrcyAoaWYgYW55KSBmb3IgdGhlIGdpdmVuIHBhcnRpY2lwYW50LlxuICpcbiAqIEBwYXJhbSBzdGF0ZSB0aGUgY2FsbCBzdGF0ZS5cbiAqIEBwYXJhbSBwYXJ0aWNpcGFudCB0aGUgcGFydGljaXBhbnQuXG4gKi9cbmNvbnN0IHJlY29uY2lsZU9ycGhhbmVkVHJhY2tzID0gKFxuICBzdGF0ZTogQ2FsbFN0YXRlLFxuICBwYXJ0aWNpcGFudDogUGFydGljaXBhbnQsXG4pOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2ggfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBvcnBoYW5UcmFja3MgPSBzdGF0ZS50YWtlT3JwaGFuZWRUcmFja3MocGFydGljaXBhbnQudHJhY2tMb29rdXBQcmVmaXgpO1xuICBpZiAoIW9ycGhhblRyYWNrcy5sZW5ndGgpIHJldHVybjtcbiAgY29uc3QgcmVjb25jaWxlZFRyYWNrczogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoID0ge307XG4gIGZvciAoY29uc3Qgb3JwaGFuIG9mIG9ycGhhblRyYWNrcykge1xuICAgIGNvbnN0IGtleSA9IHRyYWNrVHlwZVRvUGFydGljaXBhbnRTdHJlYW1LZXkob3JwaGFuLnRyYWNrVHlwZSk7XG4gICAgaWYgKCFrZXkpIGNvbnRpbnVlO1xuICAgIHJlY29uY2lsZWRUcmFja3Nba2V5XSA9IG9ycGhhbi50cmFjaztcbiAgfVxuICByZXR1cm4gcmVjb25jaWxlZFRyYWNrcztcbn07XG4iLCJpbXBvcnQgeyBEaXNwYXRjaGVyIH0gZnJvbSAnLi4vcnRjJztcbmltcG9ydCB7IENhbGxTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCB7IFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaGVzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKipcbiAqIFdhdGNoZXMgZm9yIGBkb21pbmFudFNwZWFrZXJDaGFuZ2VkYCBldmVudHMuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaERvbWluYW50U3BlYWtlckNoYW5nZWQgPSAoXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsXG4gIHN0YXRlOiBDYWxsU3RhdGUsXG4pID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2RvbWluYW50U3BlYWtlckNoYW5nZWQnLCAoZSkgPT4ge1xuICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBlO1xuICAgIGlmIChzZXNzaW9uSWQgPT09IHN0YXRlLmRvbWluYW50U3BlYWtlcj8uc2Vzc2lvbklkKSByZXR1cm47XG4gICAgc3RhdGUuc2V0UGFydGljaXBhbnRzKChwYXJ0aWNpcGFudHMpID0+XG4gICAgICBwYXJ0aWNpcGFudHMubWFwKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAvLyBtYXJrIHRoZSBuZXcgZG9taW5hbnQgc3BlYWtlclxuICAgICAgICBpZiAocGFydGljaXBhbnQuc2Vzc2lvbklkID09PSBzZXNzaW9uSWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICAgICAgICBpc0RvbWluYW50U3BlYWtlcjogdHJ1ZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVubWFyayB0aGUgb2xkIGRvbWluYW50IHNwZWFrZXJcbiAgICAgICAgaWYgKHBhcnRpY2lwYW50LmlzRG9taW5hbnRTcGVha2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnBhcnRpY2lwYW50LFxuICAgICAgICAgICAgaXNEb21pbmFudFNwZWFrZXI6IGZhbHNlLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnRpY2lwYW50OyAvLyBubyBjaGFuZ2VcbiAgICAgIH0pLFxuICAgICk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBXYXRjaGVzIGZvciBgYXVkaW9MZXZlbENoYW5nZWRgIGV2ZW50cy5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoQXVkaW9MZXZlbENoYW5nZWQgPSAoXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsXG4gIHN0YXRlOiBDYWxsU3RhdGUsXG4pID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2F1ZGlvTGV2ZWxDaGFuZ2VkJywgKGUpID0+IHtcbiAgICBjb25zdCB7IGF1ZGlvTGV2ZWxzIH0gPSBlO1xuICAgIHN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50cyhcbiAgICAgIGF1ZGlvTGV2ZWxzLnJlZHVjZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcz4oKHBhdGNoZXMsIGN1cnJlbnQpID0+IHtcbiAgICAgICAgcGF0Y2hlc1tjdXJyZW50LnNlc3Npb25JZF0gPSB7XG4gICAgICAgICAgYXVkaW9MZXZlbDogY3VycmVudC5sZXZlbCxcbiAgICAgICAgICBpc1NwZWFraW5nOiBjdXJyZW50LmlzU3BlYWtpbmcsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwYXRjaGVzO1xuICAgICAgfSwge30pLFxuICAgICk7XG4gIH0pO1xufTtcbiIsImltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tICcuLi9ydGMnO1xuaW1wb3J0IHtcbiAgaGFuZGxlUmVtb3RlU29mdE11dGUsXG4gIHdhdGNoQXVkaW9MZXZlbENoYW5nZWQsXG4gIHdhdGNoQ2FsbEFjY2VwdGVkLFxuICB3YXRjaENhbGxFbmRlZCxcbiAgd2F0Y2hDYWxsR3JhbnRzVXBkYXRlZCxcbiAgd2F0Y2hDYWxsUmVqZWN0ZWQsXG4gIHdhdGNoQ2hhbmdlUHVibGlzaFF1YWxpdHksXG4gIHdhdGNoQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkLFxuICB3YXRjaERvbWluYW50U3BlYWtlckNoYW5nZWQsXG4gIHdhdGNoTGl2ZUVuZGVkLFxuICB3YXRjaFBhcnRpY2lwYW50Q291bnRDaGFuZ2VkLFxuICB3YXRjaFBhcnRpY2lwYW50Sm9pbmVkLFxuICB3YXRjaFBhcnRpY2lwYW50TGVmdCxcbiAgd2F0Y2hQYXJ0aWNpcGFudFVwZGF0ZWQsXG4gIHdhdGNoUGluc1VwZGF0ZWQsXG4gIHdhdGNoU2Z1Q2FsbEVuZGVkLFxuICB3YXRjaFNmdUVycm9yUmVwb3J0cyxcbiAgd2F0Y2hUcmFja1B1Ymxpc2hlZCxcbiAgd2F0Y2hUcmFja1VucHVibGlzaGVkLFxufSBmcm9tICcuLi9ldmVudHMnO1xuaW1wb3J0IHtcbiAgQWxsQ2FsbEV2ZW50cyxcbiAgQWxsQ2xpZW50Q2FsbEV2ZW50cyxcbiAgQ2FsbEV2ZW50TGlzdGVuZXIsXG59IGZyb20gJy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuXG50eXBlIFJpbmdDYWxsRXZlbnRzID0gRXh0cmFjdDxcbiAgQWxsQ2xpZW50Q2FsbEV2ZW50cyxcbiAgJ2NhbGwuYWNjZXB0ZWQnIHwgJ2NhbGwucmVqZWN0ZWQnIHwgJ2NhbGwubWlzc2VkJ1xuPjtcblxuLyoqXG4gKiBSZWdpc3RlcnMgdGhlIGRlZmF1bHQgZXZlbnQgaGFuZGxlcnMgZm9yIGEgY2FsbCBkdXJpbmcgaXRzIGxpZmVjeWNsZS5cbiAqXG4gKiBAcGFyYW0gY2FsbCB0aGUgY2FsbCB0byByZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IuXG4gKiBAcGFyYW0gZGlzcGF0Y2hlciB0aGUgZGlzcGF0Y2hlci5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyRXZlbnRIYW5kbGVycyA9IChjYWxsOiBDYWxsLCBkaXNwYXRjaGVyOiBEaXNwYXRjaGVyKSA9PiB7XG4gIGNvbnN0IHN0YXRlID0gY2FsbC5zdGF0ZTtcbiAgY29uc3QgZXZlbnRIYW5kbGVycyA9IFtcbiAgICBjYWxsLm9uKCdjYWxsLmVuZGVkJywgd2F0Y2hDYWxsRW5kZWQoY2FsbCkpLFxuICAgIHdhdGNoU2Z1Q2FsbEVuZGVkKGNhbGwpLFxuXG4gICAgd2F0Y2hMaXZlRW5kZWQoZGlzcGF0Y2hlciwgY2FsbCksXG4gICAgd2F0Y2hTZnVFcnJvclJlcG9ydHMoZGlzcGF0Y2hlciksXG4gICAgd2F0Y2hDaGFuZ2VQdWJsaXNoUXVhbGl0eShkaXNwYXRjaGVyLCBjYWxsKSxcbiAgICB3YXRjaENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZChkaXNwYXRjaGVyLCBzdGF0ZSksXG4gICAgd2F0Y2hQYXJ0aWNpcGFudENvdW50Q2hhbmdlZChkaXNwYXRjaGVyLCBzdGF0ZSksXG5cbiAgICBjYWxsLm9uKCdwYXJ0aWNpcGFudEpvaW5lZCcsIHdhdGNoUGFydGljaXBhbnRKb2luZWQoc3RhdGUpKSxcbiAgICBjYWxsLm9uKCdwYXJ0aWNpcGFudExlZnQnLCB3YXRjaFBhcnRpY2lwYW50TGVmdChzdGF0ZSkpLFxuICAgIGNhbGwub24oJ3BhcnRpY2lwYW50VXBkYXRlZCcsIHdhdGNoUGFydGljaXBhbnRVcGRhdGVkKHN0YXRlKSksXG5cbiAgICBjYWxsLm9uKCd0cmFja1B1Ymxpc2hlZCcsIHdhdGNoVHJhY2tQdWJsaXNoZWQoc3RhdGUpKSxcbiAgICBjYWxsLm9uKCd0cmFja1VucHVibGlzaGVkJywgd2F0Y2hUcmFja1VucHVibGlzaGVkKHN0YXRlKSksXG5cbiAgICB3YXRjaEF1ZGlvTGV2ZWxDaGFuZ2VkKGRpc3BhdGNoZXIsIHN0YXRlKSxcbiAgICB3YXRjaERvbWluYW50U3BlYWtlckNoYW5nZWQoZGlzcGF0Y2hlciwgc3RhdGUpLFxuXG4gICAgY2FsbC5vbignY2FsbEdyYW50c1VwZGF0ZWQnLCB3YXRjaENhbGxHcmFudHNVcGRhdGVkKHN0YXRlKSksXG4gICAgY2FsbC5vbigncGluc1VwZGF0ZWQnLCB3YXRjaFBpbnNVcGRhdGVkKHN0YXRlKSksXG5cbiAgICBoYW5kbGVSZW1vdGVTb2Z0TXV0ZShjYWxsKSxcbiAgXTtcblxuICBpZiAoY2FsbC5yaW5naW5nKSB7XG4gICAgLy8gdGhlc2UgZXZlbnRzIGFyZSBvbmx5IHJlbGV2YW50IHdoZW4gdGhlIGNhbGwgaXMgcmluZ2luZ1xuICAgIGV2ZW50SGFuZGxlcnMucHVzaChyZWdpc3RlclJpbmdpbmdDYWxsRXZlbnRIYW5kbGVycyhjYWxsKSk7XG4gIH1cblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGV2ZW50SGFuZGxlcnMuZm9yRWFjaCgodW5zdWJzY3JpYmUpID0+IHVuc3Vic2NyaWJlKCkpO1xuICB9O1xufTtcblxuLyoqXG4gKiBSZWdpc3RlcnMgZXZlbnQgaGFuZGxlcnMgZm9yIGEgY2FsbCB0aGF0IGlzIG9mIHJpbmdpbmcgdHlwZS5cbiAqXG4gKiBAcGFyYW0gY2FsbCB0aGUgY2FsbCB0byByZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IuXG4gKi9cbmV4cG9ydCBjb25zdCByZWdpc3RlclJpbmdpbmdDYWxsRXZlbnRIYW5kbGVycyA9IChjYWxsOiBDYWxsKSA9PiB7XG4gIGNvbnN0IGNvb3JkaW5hdG9yUmluZ0V2ZW50czoge1xuICAgIFtrZXkgaW4gUmluZ0NhbGxFdmVudHNdOiAoXG4gICAgICBjYWxsOiBDYWxsLFxuICAgICkgPT4gQ2FsbEV2ZW50TGlzdGVuZXI8QWxsQ2FsbEV2ZW50c1trZXldPjtcbiAgfSA9IHtcbiAgICAnY2FsbC5hY2NlcHRlZCc6IHdhdGNoQ2FsbEFjY2VwdGVkKGNhbGwpLFxuICAgICdjYWxsLnJlamVjdGVkJzogd2F0Y2hDYWxsUmVqZWN0ZWQoY2FsbCksXG4gIH07XG5cbiAgY29uc3QgZXZlbnRIYW5kbGVycyA9IE9iamVjdC5rZXlzKGNvb3JkaW5hdG9yUmluZ0V2ZW50cykubWFwKChldmVudCkgPT4ge1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGV2ZW50IGFzIFJpbmdDYWxsRXZlbnRzO1xuICAgIHJldHVybiBjYWxsLm9uKGV2ZW50TmFtZSwgY29vcmRpbmF0b3JSaW5nRXZlbnRzW2V2ZW50TmFtZV0pO1xuICB9KTtcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGV2ZW50SGFuZGxlcnMuZm9yRWFjaCgodW5zdWJzY3JpYmUpID0+IHVuc3Vic2NyaWJlKCkpO1xuICB9O1xufTtcbiIsImltcG9ydCB7IExvY2FsQ2xpZW50RGV0YWlsc1R5cGUgfSBmcm9tICcuLi9jbGllbnQtZGV0YWlscyc7XG5pbXBvcnQgeyBTZGssIFNka1R5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuXG4vKipcbiAqIEZsYXR0ZW4gdGhlIHN0YXRzIHJlcG9ydCBpbnRvIGFuIGFycmF5IG9mIHN0YXRzIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHJlcG9ydCB0aGUgcmVwb3J0IHRvIGZsYXR0ZW4uXG4gKi9cbmV4cG9ydCBjb25zdCBmbGF0dGVuID0gKHJlcG9ydDogUlRDU3RhdHNSZXBvcnQpID0+IHtcbiAgY29uc3Qgc3RhdHM6IFJUQ1N0YXRzW10gPSBbXTtcbiAgcmVwb3J0LmZvckVhY2goKHMpID0+IHtcbiAgICBzdGF0cy5wdXNoKHMpO1xuICB9KTtcbiAgcmV0dXJuIHN0YXRzO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNka1NpZ25hdHVyZSA9IChjbGllbnREZXRhaWxzOiBMb2NhbENsaWVudERldGFpbHNUeXBlKSA9PiB7XG4gIGNvbnN0IHsgc2RrLCAuLi5wbGF0Zm9ybSB9ID0gY2xpZW50RGV0YWlscztcbiAgY29uc3Qgc2RrTmFtZSA9IGdldFNka05hbWUoc2RrKTtcbiAgY29uc3Qgc2RrVmVyc2lvbiA9IGdldFNka1ZlcnNpb24oc2RrKTtcblxuICByZXR1cm4ge1xuICAgIHNka05hbWUsXG4gICAgc2RrVmVyc2lvbixcbiAgICAuLi5wbGF0Zm9ybSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTZGtOYW1lID0gKHNkazogU2RrIHwgdW5kZWZpbmVkKSA9PiB7XG4gIHJldHVybiBzZGsgJiYgc2RrLnR5cGUgPT09IFNka1R5cGUuUkVBQ1RcbiAgICA/ICdzdHJlYW0tcmVhY3QnXG4gICAgOiBzZGsgJiYgc2RrLnR5cGUgPT09IFNka1R5cGUuUkVBQ1RfTkFUSVZFXG4gICAgICA/ICdzdHJlYW0tcmVhY3QtbmF0aXZlJ1xuICAgICAgOiAnc3RyZWFtLWpzJztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTZGtWZXJzaW9uID0gKHNkazogU2RrIHwgdW5kZWZpbmVkKSA9PiB7XG4gIHJldHVybiBzZGsgPyBgJHtzZGsubWFqb3J9LiR7c2RrLm1pbm9yfS4ke3Nkay5wYXRjaH1gIDogJzAuMC4wLWRldmVsb3BtZW50Jztcbn07XG4iLCJpbXBvcnQgdHlwZSB7XG4gIEFnZ3JlZ2F0ZWRTdGF0c1JlcG9ydCxcbiAgQmFzZVN0YXRzLFxuICBQYXJ0aWNpcGFudHNTdGF0c1JlcG9ydCxcbiAgU3RhdHNSZXBvcnQsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgQ2FsbFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHsgUHVibGlzaGVyLCBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vcnRjJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCB0eXBlIFN0YXRzUmVwb3J0ZXJPcHRzID0ge1xuICBzdWJzY3JpYmVyOiBTdWJzY3JpYmVyO1xuICBwdWJsaXNoZXI/OiBQdWJsaXNoZXI7XG4gIHN0YXRlOiBDYWxsU3RhdGU7XG4gIGRhdGFjZW50ZXI6IHN0cmluZztcbiAgcG9sbGluZ0ludGVydmFsSW5Ncz86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFN0YXRzUmVwb3J0ZXIgPSB7XG4gIC8qKlxuICAgKiBXaWxsIHR1cm4gb24gc3RhdHMgcmVwb3J0aW5nIGZvciBhIGdpdmVuIHNlc3Npb25JZC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBpZC5cbiAgICovXG4gIHN0YXJ0UmVwb3J0aW5nU3RhdHNGb3I6IChzZXNzaW9uSWQ6IHN0cmluZykgPT4gdm9pZDtcblxuICAvKipcbiAgICogV2lsbCB0dXJuIG9mZiBzdGF0cyByZXBvcnRpbmcgZm9yIGEgZ2l2ZW4gc2Vzc2lvbklkLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKi9cbiAgc3RvcFJlcG9ydGluZ1N0YXRzRm9yOiAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgZm9yIHJldHJpZXZpbmcgc3RhdHMgZm9yIGEgZ2l2ZW4gcGVlciBjb25uZWN0aW9uIGtpbmRcbiAgICogYW5kIG1lZGlhIHN0cmVhbSBmbG93aW5nIHRocm91Z2ggaXQuXG4gICAqXG4gICAqIEBwYXJhbSBraW5kIHRoZSBwZWVyIGNvbm5lY3Rpb24ga2luZCAoc3Vic2NyaWJlciBvciBwdWJsaXNoZXIpLlxuICAgKiBAcGFyYW0gbWVkaWFTdHJlYW0gdGhlIG1lZGlhIHN0cmVhbS5cbiAgICovXG4gIGdldFN0YXRzRm9yU3RyZWFtOiAoXG4gICAga2luZDogJ3N1YnNjcmliZXInIHwgJ3B1Ymxpc2hlcicsXG4gICAgbWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtLFxuICApID0+IFByb21pc2U8U3RhdHNSZXBvcnRbXT47XG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgZm9yIHJldHJpZXZpbmcgcmF3IHN0YXRzIGZvciBhIGdpdmVuIHBlZXIgY29ubmVjdGlvbiBraW5kLlxuICAgKlxuICAgKiBAcGFyYW0ga2luZCB0aGUgcGVlciBjb25uZWN0aW9uIGtpbmQgKHN1YnNjcmliZXIgb3IgcHVibGlzaGVyKS5cbiAgICogQHBhcmFtIHNlbGVjdG9yIHRoZSB0cmFjayBzZWxlY3Rvci4gSWYgbm90IHByb3ZpZGVkLCBzdGF0cyBmb3IgYWxsIHRyYWNrcyB3aWxsIGJlIHJldHVybmVkLlxuICAgKi9cbiAgZ2V0UmF3U3RhdHNGb3JUcmFjazogKFxuICAgIGtpbmQ6ICdzdWJzY3JpYmVyJyB8ICdwdWJsaXNoZXInLFxuICAgIHNlbGVjdG9yPzogTWVkaWFTdHJlYW1UcmFjayxcbiAgKSA9PiBQcm9taXNlPFJUQ1N0YXRzUmVwb3J0IHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogU3RvcHMgdGhlIHN0YXRzIHJlcG9ydGVyIGFuZCByZWxlYXNlcyBhbGwgcmVzb3VyY2VzLlxuICAgKi9cbiAgc3RvcDogKCkgPT4gdm9pZDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTdGF0c1JlcG9ydGVyIGluc3RhbmNlIHRoYXQgY29sbGVjdHMgbWV0cmljcyBhYm91dCB0aGUgb25nb2luZyBjYWxsIGFuZCByZXBvcnRzIHRoZW0gdG8gdGhlIHN0YXRlIHN0b3JlXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVTdGF0c1JlcG9ydGVyID0gKHtcbiAgc3Vic2NyaWJlcixcbiAgcHVibGlzaGVyLFxuICBzdGF0ZSxcbiAgZGF0YWNlbnRlcixcbiAgcG9sbGluZ0ludGVydmFsSW5NcyA9IDIwMDAsXG59OiBTdGF0c1JlcG9ydGVyT3B0cyk6IFN0YXRzUmVwb3J0ZXIgPT4ge1xuICBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoWydzdGF0cyddKTtcbiAgY29uc3QgZ2V0UmF3U3RhdHNGb3JUcmFjayA9IGFzeW5jIChcbiAgICBraW5kOiAnc3Vic2NyaWJlcicgfCAncHVibGlzaGVyJyxcbiAgICBzZWxlY3Rvcj86IE1lZGlhU3RyZWFtVHJhY2ssXG4gICkgPT4ge1xuICAgIGlmIChraW5kID09PSAnc3Vic2NyaWJlcicgJiYgc3Vic2NyaWJlcikge1xuICAgICAgcmV0dXJuIHN1YnNjcmliZXIuZ2V0U3RhdHMoc2VsZWN0b3IpO1xuICAgIH0gZWxzZSBpZiAoa2luZCA9PT0gJ3B1Ymxpc2hlcicgJiYgcHVibGlzaGVyKSB7XG4gICAgICByZXR1cm4gcHVibGlzaGVyLmdldFN0YXRzKHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2V0U3RhdHNGb3JTdHJlYW0gPSBhc3luYyAoXG4gICAga2luZDogJ3N1YnNjcmliZXInIHwgJ3B1Ymxpc2hlcicsXG4gICAgbWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtLFxuICApID0+IHtcbiAgICBjb25zdCBwYyA9IGtpbmQgPT09ICdzdWJzY3JpYmVyJyA/IHN1YnNjcmliZXIgOiBwdWJsaXNoZXI7XG4gICAgaWYgKCFwYykgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHN0YXRzRm9yU3RyZWFtOiBTdGF0c1JlcG9ydFtdID0gW107XG4gICAgZm9yIChsZXQgdHJhY2sgb2YgbWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHBjLmdldFN0YXRzKHRyYWNrKTtcbiAgICAgIGNvbnN0IHN0YXRzID0gdHJhbnNmb3JtKHJlcG9ydCwge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRyYWNrS2luZDogdHJhY2sua2luZCxcbiAgICAgICAga2luZCxcbiAgICAgIH0pO1xuICAgICAgc3RhdHNGb3JTdHJlYW0ucHVzaChzdGF0cyk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0c0ZvclN0cmVhbTtcbiAgfTtcblxuICBjb25zdCBzdGFydFJlcG9ydGluZ1N0YXRzRm9yID0gKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgc2Vzc2lvbklkc1RvVHJhY2suYWRkKHNlc3Npb25JZCk7XG4gICAgdm9pZCBydW4oKTtcbiAgfTtcblxuICBjb25zdCBzdG9wUmVwb3J0aW5nU3RhdHNGb3IgPSAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICBzZXNzaW9uSWRzVG9UcmFjay5kZWxldGUoc2Vzc2lvbklkKTtcbiAgICB2b2lkIHJ1bigpO1xuICB9O1xuXG4gIGNvbnN0IHNlc3Npb25JZHNUb1RyYWNrID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgLyoqXG4gICAqIFRoZSBtYWluIHN0YXRzIHJlcG9ydGluZyBsb29wLlxuICAgKi9cbiAgY29uc3QgcnVuID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50U3RhdHM6IFBhcnRpY2lwYW50c1N0YXRzUmVwb3J0ID0ge307XG4gICAgY29uc3Qgc2Vzc2lvbklkcyA9IG5ldyBTZXQoc2Vzc2lvbklkc1RvVHJhY2spO1xuICAgIGlmIChzZXNzaW9uSWRzLnNpemUgPiAwKSB7XG4gICAgICBmb3IgKGxldCBwYXJ0aWNpcGFudCBvZiBzdGF0ZS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgaWYgKCFzZXNzaW9uSWRzLmhhcyhwYXJ0aWNpcGFudC5zZXNzaW9uSWQpKSBjb250aW51ZTtcbiAgICAgICAgY29uc3Qga2luZCA9IHBhcnRpY2lwYW50LmlzTG9jYWxQYXJ0aWNpcGFudFxuICAgICAgICAgID8gJ3B1Ymxpc2hlcidcbiAgICAgICAgICA6ICdzdWJzY3JpYmVyJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBtZXJnZWRTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oW1xuICAgICAgICAgICAgLi4uKHBhcnRpY2lwYW50LnZpZGVvU3RyZWFtPy5nZXRWaWRlb1RyYWNrcygpIHx8IFtdKSxcbiAgICAgICAgICAgIC4uLihwYXJ0aWNpcGFudC5hdWRpb1N0cmVhbT8uZ2V0QXVkaW9UcmFja3MoKSB8fCBbXSksXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgcGFydGljaXBhbnRTdGF0c1twYXJ0aWNpcGFudC5zZXNzaW9uSWRdID0gYXdhaXQgZ2V0U3RhdHNGb3JTdHJlYW0oXG4gICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgbWVyZ2VkU3RyZWFtLFxuICAgICAgICAgICk7XG4gICAgICAgICAgbWVyZ2VkU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgICAgIG1lcmdlZFN0cmVhbS5yZW1vdmVUcmFjayh0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxvZ2dlcihcbiAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICBgRmFpbGVkIHRvIGNvbGxlY3Qgc3RhdHMgZm9yICR7a2luZH0gb2YgJHtwYXJ0aWNpcGFudC51c2VySWR9YCxcbiAgICAgICAgICAgIGUsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFtzdWJzY3JpYmVyU3RhdHMsIHB1Ymxpc2hlclN0YXRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHN1YnNjcmliZXJcbiAgICAgICAgLmdldFN0YXRzKClcbiAgICAgICAgLnRoZW4oKHJlcG9ydCkgPT5cbiAgICAgICAgICB0cmFuc2Zvcm0ocmVwb3J0LCB7XG4gICAgICAgICAgICBraW5kOiAnc3Vic2NyaWJlcicsXG4gICAgICAgICAgICB0cmFja0tpbmQ6ICd2aWRlbycsXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgLnRoZW4oYWdncmVnYXRlKSxcbiAgICAgIHB1Ymxpc2hlclxuICAgICAgICA/IHB1Ymxpc2hlclxuICAgICAgICAgICAgLmdldFN0YXRzKClcbiAgICAgICAgICAgIC50aGVuKChyZXBvcnQpID0+XG4gICAgICAgICAgICAgIHRyYW5zZm9ybShyZXBvcnQsIHtcbiAgICAgICAgICAgICAgICBraW5kOiAncHVibGlzaGVyJyxcbiAgICAgICAgICAgICAgICB0cmFja0tpbmQ6ICd2aWRlbycsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnRoZW4oYWdncmVnYXRlKVxuICAgICAgICA6IGdldEVtcHR5U3RhdHMoKSxcbiAgICBdKTtcblxuICAgIGNvbnN0IFtzdWJzY3JpYmVyUmF3U3RhdHMsIHB1Ymxpc2hlclJhd1N0YXRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGdldFJhd1N0YXRzRm9yVHJhY2soJ3N1YnNjcmliZXInKSxcbiAgICAgIHB1Ymxpc2hlciA/IGdldFJhd1N0YXRzRm9yVHJhY2soJ3B1Ymxpc2hlcicpIDogdW5kZWZpbmVkLFxuICAgIF0pO1xuXG4gICAgc3RhdGUuc2V0Q2FsbFN0YXRzUmVwb3J0KHtcbiAgICAgIGRhdGFjZW50ZXIsXG4gICAgICBwdWJsaXNoZXJTdGF0cyxcbiAgICAgIHN1YnNjcmliZXJTdGF0cyxcbiAgICAgIHN1YnNjcmliZXJSYXdTdGF0cyxcbiAgICAgIHB1Ymxpc2hlclJhd1N0YXRzLFxuICAgICAgcGFydGljaXBhbnRzOiBwYXJ0aWNpcGFudFN0YXRzLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuICB9O1xuXG4gIGxldCB0aW1lb3V0SWQ6IE5vZGVKUy5UaW1lb3V0IHwgdW5kZWZpbmVkO1xuICBpZiAocG9sbGluZ0ludGVydmFsSW5NcyA+IDApIHtcbiAgICBjb25zdCBsb29wID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcnVuKCkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgbG9nZ2VyKCdkZWJ1ZycsICdGYWlsZWQgdG8gY29sbGVjdCBzdGF0cycsIGUpO1xuICAgICAgfSk7XG4gICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGxvb3AsIHBvbGxpbmdJbnRlcnZhbEluTXMpO1xuICAgIH07XG4gICAgdm9pZCBsb29wKCk7XG4gIH1cblxuICBjb25zdCBzdG9wID0gKCkgPT4ge1xuICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFJhd1N0YXRzRm9yVHJhY2ssXG4gICAgZ2V0U3RhdHNGb3JTdHJlYW0sXG4gICAgc3RhcnRSZXBvcnRpbmdTdGF0c0ZvcixcbiAgICBzdG9wUmVwb3J0aW5nU3RhdHNGb3IsXG4gICAgc3RvcCxcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIFN0YXRzVHJhbnNmb3JtT3B0cyA9IHtcbiAgLyoqXG4gICAqIFRoZSBraW5kIG9mIHRyYWNrIHdlIGFyZSB0cmFuc2Zvcm1pbmcgc3RhdHMgZm9yLlxuICAgKi9cbiAgdHJhY2tLaW5kOiAnYXVkaW8nIHwgJ3ZpZGVvJztcblxuICAvKipcbiAgICogVGhlIGtpbmQgb2YgcGVlciBjb25uZWN0aW9uIHdlIGFyZSB0cmFuc2Zvcm1pbmcgc3RhdHMgZm9yLlxuICAgKi9cbiAga2luZDogJ3N1YnNjcmliZXInIHwgJ3B1Ymxpc2hlcic7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgcmF3IFJUQyBzdGF0cyBpbnRvIGEgc2xpbW1lciBhbmQgdW5pZm9ybSBhY3Jvc3MgYnJvd3NlcnMgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSByZXBvcnQgdGhlIHJlcG9ydCB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0gb3B0cyB0aGUgdHJhbnNmb3JtIG9wdGlvbnMuXG4gKi9cbmNvbnN0IHRyYW5zZm9ybSA9IChcbiAgcmVwb3J0OiBSVENTdGF0c1JlcG9ydCxcbiAgb3B0czogU3RhdHNUcmFuc2Zvcm1PcHRzLFxuKTogU3RhdHNSZXBvcnQgPT4ge1xuICBjb25zdCB7IHRyYWNrS2luZCwga2luZCB9ID0gb3B0cztcbiAgY29uc3QgZGlyZWN0aW9uID0ga2luZCA9PT0gJ3N1YnNjcmliZXInID8gJ2luYm91bmQtcnRwJyA6ICdvdXRib3VuZC1ydHAnO1xuICBjb25zdCBzdGF0cyA9IGZsYXR0ZW4ocmVwb3J0KTtcbiAgY29uc3Qgc3RyZWFtcyA9IHN0YXRzXG4gICAgLmZpbHRlcihcbiAgICAgIChzdGF0KSA9PlxuICAgICAgICBzdGF0LnR5cGUgPT09IGRpcmVjdGlvbiAmJlxuICAgICAgICAoc3RhdCBhcyBSVENSdHBTdHJlYW1TdGF0cykua2luZCA9PT0gdHJhY2tLaW5kLFxuICAgIClcbiAgICAubWFwKChzdGF0KTogQmFzZVN0YXRzID0+IHtcbiAgICAgIGNvbnN0IHJ0Y1N0cmVhbVN0YXRzID0gc3RhdCBhcyBSVENJbmJvdW5kUnRwU3RyZWFtU3RhdHMgJlxuICAgICAgICBSVENPdXRib3VuZFJ0cFN0cmVhbVN0YXRzO1xuXG4gICAgICBjb25zdCBjb2RlYyA9IHN0YXRzLmZpbmQoXG4gICAgICAgIChzKSA9PiBzLnR5cGUgPT09ICdjb2RlYycgJiYgcy5pZCA9PT0gcnRjU3RyZWFtU3RhdHMuY29kZWNJZCxcbiAgICAgICkgYXMgUlRDUnRwQ29kZWMgfCB1bmRlZmluZWQ7XG5cbiAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IHN0YXRzLmZpbmQoXG4gICAgICAgIChzKSA9PiBzLnR5cGUgPT09ICd0cmFuc3BvcnQnICYmIHMuaWQgPT09IHJ0Y1N0cmVhbVN0YXRzLnRyYW5zcG9ydElkLFxuICAgICAgKSBhcyBSVENUcmFuc3BvcnRTdGF0cyB8IHVuZGVmaW5lZDtcblxuICAgICAgbGV0IHJvdW5kVHJpcFRpbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICAgIGlmICh0cmFuc3BvcnQgJiYgdHJhbnNwb3J0LmR0bHNTdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlUGFpciA9IHN0YXRzLmZpbmQoXG4gICAgICAgICAgKHMpID0+XG4gICAgICAgICAgICBzLnR5cGUgPT09ICdjYW5kaWRhdGUtcGFpcicgJiZcbiAgICAgICAgICAgIHMuaWQgPT09IHRyYW5zcG9ydC5zZWxlY3RlZENhbmRpZGF0ZVBhaXJJZCxcbiAgICAgICAgKSBhcyBSVENJY2VDYW5kaWRhdGVQYWlyU3RhdHMgfCB1bmRlZmluZWQ7XG4gICAgICAgIHJvdW5kVHJpcFRpbWUgPSBjYW5kaWRhdGVQYWlyPy5jdXJyZW50Um91bmRUcmlwVGltZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnl0ZXNTZW50OiBydGNTdHJlYW1TdGF0cy5ieXRlc1NlbnQsXG4gICAgICAgIGJ5dGVzUmVjZWl2ZWQ6IHJ0Y1N0cmVhbVN0YXRzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgIGNvZGVjOiBjb2RlYz8ubWltZVR5cGUsXG4gICAgICAgIGN1cnJlbnRSb3VuZFRyaXBUaW1lOiByb3VuZFRyaXBUaW1lLFxuICAgICAgICBmcmFtZUhlaWdodDogcnRjU3RyZWFtU3RhdHMuZnJhbWVIZWlnaHQsXG4gICAgICAgIGZyYW1lV2lkdGg6IHJ0Y1N0cmVhbVN0YXRzLmZyYW1lV2lkdGgsXG4gICAgICAgIGZyYW1lc1BlclNlY29uZDogcnRjU3RyZWFtU3RhdHMuZnJhbWVzUGVyU2Vjb25kLFxuICAgICAgICBqaXR0ZXI6IHJ0Y1N0cmVhbVN0YXRzLmppdHRlcixcbiAgICAgICAga2luZDogcnRjU3RyZWFtU3RhdHMua2luZCxcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogYXZhaWxhYmxlIGluIENocm9tZSBvbmx5LCBUUyBkb2Vzbid0IHJlY29nbml6ZSB0aGlzXG4gICAgICAgIHF1YWxpdHlMaW1pdGF0aW9uUmVhc29uOiBydGNTdHJlYW1TdGF0cy5xdWFsaXR5TGltaXRhdGlvblJlYXNvbixcbiAgICAgICAgcmlkOiBydGNTdHJlYW1TdGF0cy5yaWQsXG4gICAgICAgIHNzcmM6IHJ0Y1N0cmVhbVN0YXRzLnNzcmMsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gIHJldHVybiB7XG4gICAgcmF3U3RhdHM6IHJlcG9ydCxcbiAgICBzdHJlYW1zLFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgfTtcbn07XG5cbmNvbnN0IGdldEVtcHR5U3RhdHMgPSAoc3RhdHM/OiBTdGF0c1JlcG9ydCk6IEFnZ3JlZ2F0ZWRTdGF0c1JlcG9ydCA9PiB7XG4gIHJldHVybiB7XG4gICAgcmF3UmVwb3J0OiBzdGF0cyA/PyB7IHN0cmVhbXM6IFtdLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICB0b3RhbEJ5dGVzU2VudDogMCxcbiAgICB0b3RhbEJ5dGVzUmVjZWl2ZWQ6IDAsXG4gICAgYXZlcmFnZUppdHRlckluTXM6IDAsXG4gICAgYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zOiAwLFxuICAgIHF1YWxpdHlMaW1pdGF0aW9uUmVhc29uczogJ25vbmUnLFxuICAgIGhpZ2hlc3RGcmFtZVdpZHRoOiAwLFxuICAgIGhpZ2hlc3RGcmFtZUhlaWdodDogMCxcbiAgICBoaWdoZXN0RnJhbWVzUGVyU2Vjb25kOiAwLFxuICAgIGNvZGVjOiAnJyxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gIH07XG59O1xuXG4vKipcbiAqIEFnZ3JlZ2F0ZXMgZ2VuZXJpYyBzdGF0cy5cbiAqXG4gKiBAcGFyYW0gc3RhdHMgdGhlIHN0YXRzIHRvIGFnZ3JlZ2F0ZS5cbiAqL1xuY29uc3QgYWdncmVnYXRlID0gKHN0YXRzOiBTdGF0c1JlcG9ydCk6IEFnZ3JlZ2F0ZWRTdGF0c1JlcG9ydCA9PiB7XG4gIGNvbnN0IGFnZ3JlZ2F0ZWRTdGF0cyA9IGdldEVtcHR5U3RhdHMoc3RhdHMpO1xuXG4gIGxldCBtYXhBcmVhID0gLTE7XG4gIGNvbnN0IGFyZWEgPSAodzogbnVtYmVyLCBoOiBudW1iZXIpID0+IHcgKiBoO1xuXG4gIGNvbnN0IHF1YWxpdHlMaW1pdGF0aW9uUmVhc29ucyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBzdHJlYW1zID0gc3RhdHMuc3RyZWFtcztcbiAgY29uc3QgcmVwb3J0ID0gc3RyZWFtcy5yZWR1Y2UoKGFjYywgc3RyZWFtKSA9PiB7XG4gICAgYWNjLnRvdGFsQnl0ZXNTZW50ICs9IHN0cmVhbS5ieXRlc1NlbnQgfHwgMDtcbiAgICBhY2MudG90YWxCeXRlc1JlY2VpdmVkICs9IHN0cmVhbS5ieXRlc1JlY2VpdmVkIHx8IDA7XG4gICAgYWNjLmF2ZXJhZ2VKaXR0ZXJJbk1zICs9IHN0cmVhbS5qaXR0ZXIgfHwgMDtcbiAgICBhY2MuYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zICs9IHN0cmVhbS5jdXJyZW50Um91bmRUcmlwVGltZSB8fCAwO1xuXG4gICAgLy8gbmFpdmUgY2FsY3VsYXRpb24gb2YgdGhlIGhpZ2hlc3QgcmVzb2x1dGlvblxuICAgIGNvbnN0IHN0cmVhbUFyZWEgPSBhcmVhKHN0cmVhbS5mcmFtZVdpZHRoIHx8IDAsIHN0cmVhbS5mcmFtZUhlaWdodCB8fCAwKTtcbiAgICBpZiAoc3RyZWFtQXJlYSA+IG1heEFyZWEpIHtcbiAgICAgIGFjYy5oaWdoZXN0RnJhbWVXaWR0aCA9IHN0cmVhbS5mcmFtZVdpZHRoIHx8IDA7XG4gICAgICBhY2MuaGlnaGVzdEZyYW1lSGVpZ2h0ID0gc3RyZWFtLmZyYW1lSGVpZ2h0IHx8IDA7XG4gICAgICBhY2MuaGlnaGVzdEZyYW1lc1BlclNlY29uZCA9IHN0cmVhbS5mcmFtZXNQZXJTZWNvbmQgfHwgMDtcbiAgICAgIG1heEFyZWEgPSBzdHJlYW1BcmVhO1xuICAgIH1cblxuICAgIHF1YWxpdHlMaW1pdGF0aW9uUmVhc29ucy5hZGQoc3RyZWFtLnF1YWxpdHlMaW1pdGF0aW9uUmVhc29uIHx8ICcnKTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCBhZ2dyZWdhdGVkU3RhdHMpO1xuXG4gIGlmIChzdHJlYW1zLmxlbmd0aCA+IDApIHtcbiAgICByZXBvcnQuYXZlcmFnZUppdHRlckluTXMgPSBNYXRoLnJvdW5kKFxuICAgICAgKHJlcG9ydC5hdmVyYWdlSml0dGVySW5NcyAvIHN0cmVhbXMubGVuZ3RoKSAqIDEwMDAsXG4gICAgKTtcbiAgICByZXBvcnQuYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zID0gTWF0aC5yb3VuZChcbiAgICAgIChyZXBvcnQuYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zIC8gc3RyZWFtcy5sZW5ndGgpICogMTAwMCxcbiAgICApO1xuICAgIC8vIHdlIHRha2UgdGhlIGZpcnN0IGNvZGVjIHdlIGZpbmQsIGFzIGl0IHNob3VsZCBiZSB0aGUgc2FtZSBmb3IgYWxsIHN0cmVhbXNcbiAgICByZXBvcnQuY29kZWMgPSBzdHJlYW1zWzBdLmNvZGVjIHx8ICcnO1xuICB9XG5cbiAgY29uc3QgcXVhbGl0eUxpbWl0YXRpb25SZWFzb24gPSBbXG4gICAgcXVhbGl0eUxpbWl0YXRpb25SZWFzb25zLmhhcygnY3B1JykgJiYgJ2NwdScsXG4gICAgcXVhbGl0eUxpbWl0YXRpb25SZWFzb25zLmhhcygnYmFuZHdpZHRoJykgJiYgJ2JhbmR3aWR0aCcsXG4gICAgcXVhbGl0eUxpbWl0YXRpb25SZWFzb25zLmhhcygnb3RoZXInKSAmJiAnb3RoZXInLFxuICBdXG4gICAgLmZpbHRlcihCb29sZWFuKVxuICAgIC5qb2luKCcsICcpO1xuICBpZiAocXVhbGl0eUxpbWl0YXRpb25SZWFzb24pIHtcbiAgICByZXBvcnQucXVhbGl0eUxpbWl0YXRpb25SZWFzb25zID0gcXVhbGl0eUxpbWl0YXRpb25SZWFzb247XG4gIH1cblxuICByZXR1cm4gcmVwb3J0O1xufTtcbiIsImltcG9ydCB7IFN0cmVhbVNmdUNsaWVudCB9IGZyb20gJy4uL1N0cmVhbVNmdUNsaWVudCc7XG5pbXBvcnQgeyBTdGF0c09wdGlvbnMgfSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IFB1Ymxpc2hlciwgU3Vic2NyaWJlciB9IGZyb20gJy4uL3J0Yyc7XG5pbXBvcnQgeyBmbGF0dGVuLCBnZXRTZGtOYW1lLCBnZXRTZGtWZXJzaW9uIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBnZXRXZWJSVENJbmZvLCBMb2NhbENsaWVudERldGFpbHNUeXBlIH0gZnJvbSAnLi4vY2xpZW50LWRldGFpbHMnO1xuXG5leHBvcnQgdHlwZSBTZnVTdGF0c1JlcG9ydGVyT3B0aW9ucyA9IHtcbiAgb3B0aW9uczogU3RhdHNPcHRpb25zO1xuICBjbGllbnREZXRhaWxzOiBMb2NhbENsaWVudERldGFpbHNUeXBlO1xuICBzdWJzY3JpYmVyOiBTdWJzY3JpYmVyO1xuICBwdWJsaXNoZXI/OiBQdWJsaXNoZXI7XG59O1xuXG5leHBvcnQgY2xhc3MgU2Z1U3RhdHNSZXBvcnRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnU2Z1U3RhdHNSZXBvcnRlciddKTtcblxuICByZWFkb25seSBvcHRpb25zOiBTdGF0c09wdGlvbnM7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBzdWJzY3JpYmVyOiBTdWJzY3JpYmVyO1xuICBwcml2YXRlIHJlYWRvbmx5IHB1Ymxpc2hlcj86IFB1Ymxpc2hlcjtcblxuICBwcml2YXRlIGludGVydmFsSWQ6IE5vZGVKUy5UaW1lb3V0IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHJlYWRvbmx5IHNka05hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBzZGtWZXJzaW9uOiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgd2ViUlRDVmVyc2lvbjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNmdUNsaWVudDogU3RyZWFtU2Z1Q2xpZW50LFxuICAgIHsgb3B0aW9ucywgY2xpZW50RGV0YWlscywgc3Vic2NyaWJlciwgcHVibGlzaGVyIH06IFNmdVN0YXRzUmVwb3J0ZXJPcHRpb25zLFxuICApIHtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHNmdUNsaWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gICAgdGhpcy5wdWJsaXNoZXIgPSBwdWJsaXNoZXI7XG4gICAgY29uc3Qgd2ViUlRDSW5mbyA9IGdldFdlYlJUQ0luZm8oKTtcblxuICAgIGNvbnN0IHsgc2RrLCBicm93c2VyIH0gPSBjbGllbnREZXRhaWxzO1xuXG4gICAgdGhpcy5zZGtOYW1lID0gZ2V0U2RrTmFtZShzZGspO1xuICAgIHRoaXMuc2RrVmVyc2lvbiA9IGdldFNka1ZlcnNpb24oc2RrKTtcblxuICAgIC8vIFRoZSBXZWJSVEMgdmVyc2lvbiBpZiBwYXNzZWQgZnJvbSB0aGUgU0RLLCBpdCBpcyB0YWtlbiBlbHNlIHRoZSBicm93c2VyIGluZm8gaXMgc2VudC5cbiAgICB0aGlzLndlYlJUQ1ZlcnNpb24gPVxuICAgICAgd2ViUlRDSW5mbz8udmVyc2lvbiB8fFxuICAgICAgYCR7YnJvd3Nlcj8ubmFtZSB8fCAnJ30tJHticm93c2VyPy52ZXJzaW9uIHx8ICcnfWAgfHxcbiAgICAgICdOL0EnO1xuICB9XG5cbiAgcHJpdmF0ZSBydW4gPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgW3N1YnNjcmliZXJTdGF0cywgcHVibGlzaGVyU3RhdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5zdWJzY3JpYmVyLmdldFN0YXRzKCkudGhlbihmbGF0dGVuKS50aGVuKEpTT04uc3RyaW5naWZ5KSxcbiAgICAgIHRoaXMucHVibGlzaGVyPy5nZXRTdGF0cygpLnRoZW4oZmxhdHRlbikudGhlbihKU09OLnN0cmluZ2lmeSkgPz8gJ1tdJyxcbiAgICBdKTtcblxuICAgIGF3YWl0IHRoaXMuc2Z1Q2xpZW50LnNlbmRTdGF0cyh7XG4gICAgICBzZGs6IHRoaXMuc2RrTmFtZSxcbiAgICAgIHNka1ZlcnNpb246IHRoaXMuc2RrVmVyc2lvbixcbiAgICAgIHdlYnJ0Y1ZlcnNpb246IHRoaXMud2ViUlRDVmVyc2lvbixcbiAgICAgIHN1YnNjcmliZXJTdGF0cyxcbiAgICAgIHB1Ymxpc2hlclN0YXRzLFxuICAgIH0pO1xuICB9O1xuXG4gIHN0YXJ0ID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLm9wdGlvbnMucmVwb3J0aW5nX2ludGVydmFsX21zIDw9IDApIHJldHVybjtcbiAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5ydW4oKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgJ0ZhaWxlZCB0byByZXBvcnQgc3RhdHMnLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfSwgdGhpcy5vcHRpb25zLnJlcG9ydGluZ19pbnRlcnZhbF9tcyk7XG4gIH07XG5cbiAgc3RvcCA9ICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgdGhpcy5pbnRlcnZhbElkID0gdW5kZWZpbmVkO1xuICB9O1xufVxuIiwiY29uc3QgREVGQVVMVF9USFJFU0hPTEQgPSAwLjM1O1xuXG5leHBvcnQgdHlwZSBFbnRyeUhhbmRsZXIgPSAoZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkpID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIFVub2JzZXJ2ZSA9ICgpID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIE9ic2VydmUgPSAoXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBlbnRyeUhhbmRsZXI6IEVudHJ5SGFuZGxlcixcbikgPT4gVW5vYnNlcnZlO1xuXG5leHBvcnQgY2xhc3MgVmlld3BvcnRUcmFja2VyIHtcbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGVsZW1lbnRIYW5kbGVyTWFwOiBNYXA8XG4gICAgSFRNTEVsZW1lbnQsXG4gICAgKGVudHJ5OiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KSA9PiB2b2lkXG4gID4gPSBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcbiAgLy8gaW4gUmVhY3QgY2hpbGRyZW4gcmVuZGVyIGJlZm9yZSB2aWV3cG9ydCBpcyBzZXQsIGFkZFxuICAvLyB0aGVtIHRvIHRoZSBxdWV1ZSBhbmQgb2JzZXJ2ZSB0aGVtIG9uY2UgdGhlIG9ic2VydmVyIGlzIHJlYWR5XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBxdWV1ZVNldDogU2V0PHJlYWRvbmx5IFtIVE1MRWxlbWVudCwgRW50cnlIYW5kbGVyXT4gPSBuZXcgU2V0KCk7XG5cbiAgLyoqXG4gICAqIE1ldGhvZCB0byBzZXQgc2Nyb2xsYWJsZSB2aWV3cG9ydCBhcyByb290IGZvciB0aGUgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIsIHJldHVybnNcbiAgICogY2xlYW51cCBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHVwb24gZGlzcG9zaW5nIG9mIHRoZSBET00gZWxlbWVudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgKlxuICAgKiBAcGFyYW0gdmlld3BvcnRFbGVtZW50XG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqIEByZXR1cm5zIFVub2JzZXJ2ZVxuICAgKi9cbiAgcHVibGljIHNldFZpZXdwb3J0ID0gKFxuICAgIHZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgb3B0aW9ucz86IFBpY2s8SW50ZXJzZWN0aW9uT2JzZXJ2ZXJJbml0LCAndGhyZXNob2xkJyB8ICdyb290TWFyZ2luJz4sXG4gICkgPT4ge1xuICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICAgIHRoaXMuZWxlbWVudEhhbmRsZXJNYXAuY2xlYXIoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5lbGVtZW50SGFuZGxlck1hcC5nZXQoXG4gICAgICAgICAgICBlbnRyeS50YXJnZXQgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBoYW5kbGVyPy4oZW50cnkpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvb3Q6IHZpZXdwb3J0RWxlbWVudCxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdGhyZXNob2xkOiBvcHRpb25zPy50aHJlc2hvbGQgPz8gREVGQVVMVF9USFJFU0hPTEQsXG4gICAgICB9LFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5xdWV1ZVNldC5zaXplKSB7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmZvckVhY2goKFtxdWV1ZUVsZW1lbnQsIHF1ZXVlSGFuZGxlcl0pID0+IHtcbiAgICAgICAgLy8gY2hlY2sgaWYgZWxlbWVudCB3aGljaCByZXF1ZXN0ZWQgb2JzZXJ2YXRpb24gaXNcbiAgICAgICAgLy8gYSBjaGlsZCBvZiBhIHZpZXdwb3J0IGVsZW1lbnQsIHNraXAgaWYgaXNuJ3RcbiAgICAgICAgaWYgKCF2aWV3cG9ydEVsZW1lbnQuY29udGFpbnMocXVldWVFbGVtZW50KSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIhLm9ic2VydmUocXVldWVFbGVtZW50KTtcbiAgICAgICAgdGhpcy5lbGVtZW50SGFuZGxlck1hcC5zZXQocXVldWVFbGVtZW50LCBxdWV1ZUhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFudXA7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ldGhvZCB0byBzZXQgZWxlbWVudCB0byBvYnNlcnZlIGFuZCBoYW5kbGVyIHRvIGJlIHRyaWdnZXJlZCB3aGVuZXZlciBJbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgKiBkZXRlY3RzIGEgcG9zc2libGUgY2hhbmdlIGluIGVsZW1lbnQncyB2aXNpYmlsaXR5IHdpdGhpbiBzcGVjaWZpZWQgdmlld3BvcnQsIHJldHVybnNcbiAgICogY2xlYW51cCBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHVwb24gZGlzcG9zaW5nIG9mIHRoZSBET00gZWxlbWVudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudFxuICAgKiBAcGFyYW0gaGFuZGxlclxuICAgKiBAcmV0dXJucyBVbm9ic2VydmVcbiAgICovXG4gIHB1YmxpYyBvYnNlcnZlOiBPYnNlcnZlID0gKGVsZW1lbnQsIGhhbmRsZXIpID0+IHtcbiAgICBjb25zdCBxdWV1ZUl0ZW0gPSBbZWxlbWVudCwgaGFuZGxlcl0gYXMgY29uc3Q7XG5cbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50SGFuZGxlck1hcC5kZWxldGUoZWxlbWVudCk7XG4gICAgICB0aGlzLm9ic2VydmVyPy51bm9ic2VydmUoZWxlbWVudCk7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmRlbGV0ZShxdWV1ZUl0ZW0pO1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5lbGVtZW50SGFuZGxlck1hcC5oYXMoZWxlbWVudCkpIHJldHVybiBjbGVhbnVwO1xuXG4gICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmFkZChxdWV1ZUl0ZW0pO1xuICAgICAgcmV0dXJuIGNsZWFudXA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIucm9vdCEuY29udGFpbnMoZWxlbWVudCkpIHtcbiAgICAgIHRoaXMuZWxlbWVudEhhbmRsZXJNYXAuc2V0KGVsZW1lbnQsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhbnVwO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIFNhZmFyaS5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnJyk7XG59O1xuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgaXMgRmlyZWZveC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Py5pbmNsdWRlcygnRmlyZWZveCcpO1xufTtcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIEdvb2dsZSBDaHJvbWUuXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Nocm9tZSA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Py5pbmNsdWRlcygnQ2hyb21lJyk7XG59O1xuIiwiaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHtcbiAgQXVkaW9UcmFja1R5cGUsXG4gIERlYm91bmNlVHlwZSxcbiAgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCxcbiAgVmlkZW9UcmFja1R5cGUsXG4gIFZpc2liaWxpdHlTdGF0ZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVmlkZW9EaW1lbnNpb24gfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHtcbiAgY29tYmluZUxhdGVzdCxcbiAgZGlzdGluY3RVbnRpbENoYW5nZWQsXG4gIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkLFxuICBtYXAsXG4gIHNoYXJlUmVwbGF5LFxuICB0YWtlV2hpbGUsXG59IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgVmlld3BvcnRUcmFja2VyIH0gZnJvbSAnLi9WaWV3cG9ydFRyYWNrZXInO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IGlzRmlyZWZveCwgaXNTYWZhcmkgfSBmcm9tICcuL2Jyb3dzZXJzJztcbmltcG9ydCB7IGhhc1NjcmVlblNoYXJlLCBoYXNWaWRlbyB9IGZyb20gJy4vcGFydGljaXBhbnRVdGlscyc7XG5cbmNvbnN0IERFRkFVTFRfVklFV1BPUlRfVklTSUJJTElUWV9TVEFURTogUmVjb3JkPFxuICBWaWRlb1RyYWNrVHlwZSxcbiAgVmlzaWJpbGl0eVN0YXRlXG4+ID0ge1xuICB2aWRlb1RyYWNrOiBWaXNpYmlsaXR5U3RhdGUuVU5LTk9XTixcbiAgc2NyZWVuU2hhcmVUcmFjazogVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIEEgbWFuYWdlciBjbGFzcyB0aGF0IGhhbmRsZXMgZHluYXNjYWxlIHJlbGF0ZWQgdGFza3MgbGlrZTpcbiAqXG4gKiAtIGJpbmRpbmcgdmlkZW8gZWxlbWVudHMgdG8gc2Vzc2lvbiBpZHNcbiAqIC0gYmluZGluZyBhdWRpbyBlbGVtZW50cyB0byBzZXNzaW9uIGlkc1xuICogLSB0cmFja2luZyBlbGVtZW50IHZpc2liaWxpdHlcbiAqIC0gdXBkYXRpbmcgc3Vic2NyaXB0aW9ucyBiYXNlZCBvbiB2aWV3cG9ydCB2aXNpYmlsaXR5XG4gKiAtIHVwZGF0aW5nIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gdmlkZW8gZWxlbWVudCBkaW1lbnNpb25zXG4gKiAtIHVwZGF0aW5nIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gcHVibGlzaGVkIHRyYWNrc1xuICovXG5leHBvcnQgY2xhc3MgRHluYXNjYWxlTWFuYWdlciB7XG4gIC8qKlxuICAgKiBUaGUgdmlld3BvcnQgdHJhY2tlciBpbnN0YW5jZS5cbiAgICovXG4gIHJlYWRvbmx5IHZpZXdwb3J0VHJhY2tlciA9IG5ldyBWaWV3cG9ydFRyYWNrZXIoKTtcblxuICBwcml2YXRlIGxvZ2dlciA9IGdldExvZ2dlcihbJ0R5bmFzY2FsZU1hbmFnZXInXSk7XG4gIHByaXZhdGUgY2FsbDogQ2FsbDtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBEeW5hc2NhbGVNYW5hZ2VyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbCB0aGUgY2FsbCB0byBtYW5hZ2UuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjYWxsOiBDYWxsKSB7XG4gICAgdGhpcy5jYWxsID0gY2FsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIGJlZ2luIHRyYWNraW5nIHRoZSBnaXZlbiBlbGVtZW50IGZvciB2aXNpYmlsaXR5IGNoYW5nZXMgd2l0aGluIHRoZVxuICAgKiBjb25maWd1cmVkIHZpZXdwb3J0IGVsZW1lbnQgKGBjYWxsLnNldFZpZXdwb3J0YCkuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSBlbGVtZW50IHRvIHRyYWNrLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSBraW5kIG9mIHZpZGVvLlxuICAgKiBAcmV0dXJucyBVbnRyYWNrLlxuICAgKi9cbiAgdHJhY2tFbGVtZW50VmlzaWJpbGl0eSA9IDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KFxuICAgIGVsZW1lbnQ6IFQsXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgdHJhY2tUeXBlOiBWaWRlb1RyYWNrVHlwZSxcbiAgKSA9PiB7XG4gICAgY29uc3QgY2xlYW51cCA9IHRoaXMudmlld3BvcnRUcmFja2VyLm9ic2VydmUoZWxlbWVudCwgKGVudHJ5KSA9PiB7XG4gICAgICB0aGlzLmNhbGwuc3RhdGUudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCAocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNWaXNpYmlsaXR5U3RhdGUgPVxuICAgICAgICAgIHBhcnRpY2lwYW50LnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID8/XG4gICAgICAgICAgREVGQVVMVF9WSUVXUE9SVF9WSVNJQklMSVRZX1NUQVRFO1xuXG4gICAgICAgIC8vIG9ic2VydmVyIHRyaWdnZXJzIHdoZW4gdGhlIGVsZW1lbnQgaXMgXCJtb3ZlZFwiIHRvIGJlIGEgZnVsbHNjcmVlbiBlbGVtZW50XG4gICAgICAgIC8vIGtlZXAgaXQgVklTSUJMRSBpZiB0aGF0IGhhcHBlbnMgdG8gcHJldmVudCBmdWxsc2NyZWVuIHdpdGggcGxhY2Vob2xkZXJcbiAgICAgICAgY29uc3QgaXNWaXNpYmxlID1cbiAgICAgICAgICBlbnRyeS5pc0ludGVyc2VjdGluZyB8fCBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCA9PT0gZWxlbWVudFxuICAgICAgICAgICAgPyBWaXNpYmlsaXR5U3RhdGUuVklTSUJMRVxuICAgICAgICAgICAgOiBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnBhcnRpY2lwYW50LFxuICAgICAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlOiB7XG4gICAgICAgICAgICAuLi5wcmV2aW91c1Zpc2liaWxpdHlTdGF0ZSxcbiAgICAgICAgICAgIFt0cmFja1R5cGVdOiBpc1Zpc2libGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICAgIC8vIHJlc2V0IHZpc2liaWxpdHkgc3RhdGUgdG8gVU5LTk9XTiB1cG9uIGNsZWFudXBcbiAgICAgIC8vIHNvIHRoYXQgdGhlIGxheW91dHMgdGhhdCBhcmUgbm90IGFjdGl2ZWx5IG9ic2VydmVkXG4gICAgICAvLyBjYW4gc3RpbGwgZnVuY3Rpb24gbm9ybWFsbHkgKHJ1bnRpbWUgbGF5b3V0IHN3aXRjaGluZylcbiAgICAgIHRoaXMuY2FsbC5zdGF0ZS51cGRhdGVQYXJ0aWNpcGFudChzZXNzaW9uSWQsIChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICBjb25zdCBwcmV2aW91c1Zpc2liaWxpdHlTdGF0ZSA9XG4gICAgICAgICAgcGFydGljaXBhbnQudmlld3BvcnRWaXNpYmlsaXR5U3RhdGUgPz9cbiAgICAgICAgICBERUZBVUxUX1ZJRVdQT1JUX1ZJU0lCSUxJVFlfU1RBVEU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICAgICAgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGU6IHtcbiAgICAgICAgICAgIC4uLnByZXZpb3VzVmlzaWJpbGl0eVN0YXRlLFxuICAgICAgICAgICAgW3RyYWNrVHlwZV06IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2aWV3cG9ydCBlbGVtZW50IHRvIHRyYWNrIGJvdW5kIHZpZGVvIGVsZW1lbnRzIGZvciB2aXNpYmlsaXR5LlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgdmlld3BvcnQgZWxlbWVudC5cbiAgICovXG4gIHNldFZpZXdwb3J0ID0gPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oZWxlbWVudDogVCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnZpZXdwb3J0VHJhY2tlci5zZXRWaWV3cG9ydChlbGVtZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogQmluZHMgYSBET00gPHZpZGVvPiBlbGVtZW50IHRvIHRoZSBnaXZlbiBzZXNzaW9uIGlkLlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRoZSB2aWRlbyBlbGVtZW50IHdpbGwgcGxheVxuICAgKiB0aGUgY29ycmVjdCB2aWRlbyBzdHJlYW0gZm9yIHRoZSBnaXZlbiBzZXNzaW9uIGlkLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgaXQgd291bGQgYWxzbyBrZWVwIHRyYWNrIG9mIHRoZSB2aWRlbyBlbGVtZW50IGRpbWVuc2lvbnNcbiAgICogYW5kIHVwZGF0ZSB0aGUgc3Vic2NyaXB0aW9uIGFjY29yZGluZ2x5IGluIG9yZGVyIHRvIG9wdGltaXplIHRoZSBiYW5kd2lkdGguXG4gICAqXG4gICAqIElmIGEgXCJ2aWV3cG9ydFwiIGlzIGNvbmZpZ3VyZWQsIHRoZSB2aWRlbyBlbGVtZW50IHdpbGwgYmUgYXV0b21hdGljYWxseVxuICAgKiB0cmFja2VkIGZvciB2aXNpYmlsaXR5IGFuZCB0aGUgc3Vic2NyaXB0aW9uIHdpbGwgYmUgdXBkYXRlZCBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogQHBhcmFtIHZpZGVvRWxlbWVudCB0aGUgdmlkZW8gZWxlbWVudCB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSBraW5kIG9mIHZpZGVvLlxuICAgKi9cbiAgYmluZFZpZGVvRWxlbWVudCA9IChcbiAgICB2aWRlb0VsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQsXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgdHJhY2tUeXBlOiBWaWRlb1RyYWNrVHlwZSxcbiAgKSA9PiB7XG4gICAgY29uc3QgYm91bmRQYXJ0aWNpcGFudCA9XG4gICAgICB0aGlzLmNhbGwuc3RhdGUuZmluZFBhcnRpY2lwYW50QnlTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgICBpZiAoIWJvdW5kUGFydGljaXBhbnQpIHJldHVybjtcblxuICAgIGNvbnN0IHJlcXVlc3RUcmFja1dpdGhEaW1lbnNpb25zID0gKFxuICAgICAgZGVib3VuY2VUeXBlOiBEZWJvdW5jZVR5cGUsXG4gICAgICBkaW1lbnNpb246IFZpZGVvRGltZW5zaW9uIHwgdW5kZWZpbmVkLFxuICAgICkgPT4ge1xuICAgICAgaWYgKGRpbWVuc2lvbiAmJiAoZGltZW5zaW9uLndpZHRoID09PSAwIHx8IGRpbWVuc2lvbi5oZWlnaHQgPT09IDApKSB7XG4gICAgICAgIC8vIGlnbm9yZSAweDAgZGltZW5zaW9ucy4gdGhpcyBjYW4gaGFwcGVuIHdoZW4gdGhlIHZpZGVvIGVsZW1lbnRcbiAgICAgICAgLy8gaXMgbm90IHZpc2libGUgKGUuZy4sIGhhcyBkaXNwbGF5OiBub25lKS5cbiAgICAgICAgLy8gd2UgdHJlYXQgdGhpcyBhcyBcInVuc3Vic2NyaXB0aW9uXCIgYXMgd2UgZG9uJ3Qgd2FudCB0byBrZWVwXG4gICAgICAgIC8vIGNvbnN1bWluZyBiYW5kd2lkdGggZm9yIGEgdmlkZW8gdGhhdCBpcyBub3QgdmlzaWJsZSBvbiB0aGUgc2NyZWVuLlxuICAgICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgSWdub3JpbmcgMHgwIGRpbWVuc2lvbmAsIGJvdW5kUGFydGljaXBhbnQpO1xuICAgICAgICBkaW1lbnNpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLmNhbGwudXBkYXRlU3Vic2NyaXB0aW9uc1BhcnRpYWwoXG4gICAgICAgIHRyYWNrVHlwZSxcbiAgICAgICAgeyBbc2Vzc2lvbklkXTogeyBkaW1lbnNpb24gfSB9LFxuICAgICAgICBkZWJvdW5jZVR5cGUsXG4gICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCQgPSB0aGlzLmNhbGwuc3RhdGUucGFydGljaXBhbnRzJC5waXBlKFxuICAgICAgbWFwKFxuICAgICAgICAocGFydGljaXBhbnRzKSA9PlxuICAgICAgICAgIHBhcnRpY2lwYW50cy5maW5kKFxuICAgICAgICAgICAgKHBhcnRpY2lwYW50KSA9PiBwYXJ0aWNpcGFudC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCxcbiAgICAgICAgICApIGFzIFN0cmVhbVZpZGVvUGFydGljaXBhbnQsXG4gICAgICApLFxuICAgICAgdGFrZVdoaWxlKChwYXJ0aWNpcGFudCkgPT4gISFwYXJ0aWNpcGFudCksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgc2hhcmVSZXBsYXkoeyBidWZmZXJTaXplOiAxLCByZWZDb3VudDogdHJ1ZSB9KSxcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogU2luY2UgdGhlIHZpZGVvIGVsZW1lbnRzIGFyZSBub3cgYmVpbmcgcmVtb3ZlZCBmcm9tIHRoZSBET00gKFJlYWN0IFNESykgdXBvblxuICAgICAqIHZpc2liaWxpdHkgY2hhbmdlLCB0aGlzIHN1YnNjcmlwdGlvbiBpcyBub3QgaW4gdXNlIGFuIHN0YXlzIGhlcmUgb25seSBmb3IgdGhlXG4gICAgICogcGxhaW4gSlMgaW50ZWdyYXRpb25zIHdoZXJlIGludGVncmF0b3JzIG1pZ2h0IGNob29zZSBub3QgdG8gcmVtb3ZlIHRoZSB2aWRlb1xuICAgICAqIGVsZW1lbnRzIGZyb20gdGhlIERPTS5cbiAgICAgKi9cbiAgICAvLyBrZWVwIGNvcHkgZm9yIHJlc2l6ZSBvYnNlcnZlciBoYW5kbGVyXG4gICAgbGV0IHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlOiBWaXNpYmlsaXR5U3RhdGUgfCB1bmRlZmluZWQ7XG4gICAgY29uc3Qgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGVTdWJzY3JpcHRpb24gPVxuICAgICAgYm91bmRQYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnRcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogcGFydGljaXBhbnQkXG4gICAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgICAgbWFwKChwKSA9PiBwLnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlPy5bdHJhY2tUeXBlXSksXG4gICAgICAgICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChuZXh0Vmlld3BvcnRWaXNpYmlsaXR5U3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgLy8gc2tpcCBpbml0aWFsIHRyaWdnZXJcbiAgICAgICAgICAgICAgaWYgKCF2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID1cbiAgICAgICAgICAgICAgICAgIG5leHRWaWV3cG9ydFZpc2liaWxpdHlTdGF0ZSA/PyBWaXNpYmlsaXR5U3RhdGUuVU5LTk9XTjtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGUgPVxuICAgICAgICAgICAgICAgIG5leHRWaWV3cG9ydFZpc2liaWxpdHlTdGF0ZSA/PyBWaXNpYmlsaXR5U3RhdGUuVU5LTk9XTjtcblxuICAgICAgICAgICAgICBpZiAobmV4dFZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID09PSBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RUcmFja1dpdGhEaW1lbnNpb25zKFxuICAgICAgICAgICAgICAgICAgRGVib3VuY2VUeXBlLk1FRElVTSxcbiAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVxdWVzdFRyYWNrV2l0aERpbWVuc2lvbnMoRGVib3VuY2VUeXBlLk1FRElVTSwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB2aWRlb0VsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB2aWRlb0VsZW1lbnQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgbGV0IGxhc3REaW1lbnNpb25zOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBib3VuZFBhcnRpY2lwYW50LmlzTG9jYWxQYXJ0aWNpcGFudFxuICAgICAgPyBudWxsXG4gICAgICA6IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VycmVudERpbWVuc2lvbnMgPSBgJHt2aWRlb0VsZW1lbnQuY2xpZW50V2lkdGh9LCR7dmlkZW9FbGVtZW50LmNsaWVudEhlaWdodH1gO1xuXG4gICAgICAgICAgLy8gc2tpcCBpbml0aWFsIHRyaWdnZXJcbiAgICAgICAgICBpZiAoIWxhc3REaW1lbnNpb25zKSB7XG4gICAgICAgICAgICBsYXN0RGltZW5zaW9ucyA9IGN1cnJlbnREaW1lbnNpb25zO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGxhc3REaW1lbnNpb25zID09PSBjdXJyZW50RGltZW5zaW9ucyB8fFxuICAgICAgICAgICAgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGUgPT09IFZpc2liaWxpdHlTdGF0ZS5JTlZJU0lCTEVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXF1ZXN0VHJhY2tXaXRoRGltZW5zaW9ucyhEZWJvdW5jZVR5cGUuU0xPVywge1xuICAgICAgICAgICAgd2lkdGg6IHZpZGVvRWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdmlkZW9FbGVtZW50LmNsaWVudEhlaWdodCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsYXN0RGltZW5zaW9ucyA9IGN1cnJlbnREaW1lbnNpb25zO1xuICAgICAgICB9KTtcbiAgICByZXNpemVPYnNlcnZlcj8ub2JzZXJ2ZSh2aWRlb0VsZW1lbnQpO1xuXG4gICAgLy8gZWxlbWVudCByZW5kZXJzIGFuZCBnZXRzIGJvdW5kIC0gdHJhY2sgc3Vic2NyaXB0aW9uIGdldHNcbiAgICAvLyB0cmlnZ2VyZWQgZmlyc3Qgb3RoZXIgb25lcyBnZXQgc2tpcHBlZCBvbiBpbml0aWFsIHN1YnNjcmlwdGlvbnNcbiAgICBjb25zdCBwdWJsaXNoZWRUcmFja3NTdWJzY3JpcHRpb24gPSBib3VuZFBhcnRpY2lwYW50LmlzTG9jYWxQYXJ0aWNpcGFudFxuICAgICAgPyBudWxsXG4gICAgICA6IHBhcnRpY2lwYW50JFxuICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgZGlzdGluY3RVbnRpbEtleUNoYW5nZWQoJ3B1Ymxpc2hlZFRyYWNrcycpLFxuICAgICAgICAgICAgbWFwKChwKSA9PlxuICAgICAgICAgICAgICB0cmFja1R5cGUgPT09ICd2aWRlb1RyYWNrJyA/IGhhc1ZpZGVvKHApIDogaGFzU2NyZWVuU2hhcmUocCksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgICAgICApXG4gICAgICAgICAgLnN1YnNjcmliZSgoaXNQdWJsaXNoaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQdWJsaXNoaW5nKSB7XG4gICAgICAgICAgICAgIC8vIHRoZSBwYXJ0aWNpcGFudCBqdXN0IHN0YXJ0ZWQgdG8gcHVibGlzaCBhIHRyYWNrXG4gICAgICAgICAgICAgIHJlcXVlc3RUcmFja1dpdGhEaW1lbnNpb25zKERlYm91bmNlVHlwZS5GQVNULCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHZpZGVvRWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gdGhlIHBhcnRpY2lwYW50IGp1c3Qgc3RvcHBlZCBwdWJsaXNoaW5nIGEgdHJhY2tcbiAgICAgICAgICAgICAgcmVxdWVzdFRyYWNrV2l0aERpbWVuc2lvbnMoRGVib3VuY2VUeXBlLkZBU1QsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICB2aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgIHZpZGVvRWxlbWVudC5wbGF5c0lubGluZSA9IHRydWU7XG5cbiAgICAvLyBleHBsaWNpdGx5IG1hcmtpbmcgdGhlIGVsZW1lbnQgYXMgbXV0ZWQgd2lsbCBhbGxvdyBhdXRvcGxheSB0byB3b3JrXG4gICAgLy8gd2l0aG91dCBwcmlvciB1c2VyIGludGVyYWN0aW9uOlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL01lZGlhL0F1dG9wbGF5X2d1aWRlXG4gICAgdmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcblxuICAgIGNvbnN0IHN0cmVhbVN1YnNjcmlwdGlvbiA9IHBhcnRpY2lwYW50JFxuICAgICAgLnBpcGUoXG4gICAgICAgIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkKFxuICAgICAgICAgIHRyYWNrVHlwZSA9PT0gJ3ZpZGVvVHJhY2snID8gJ3ZpZGVvU3RyZWFtJyA6ICdzY3JlZW5TaGFyZVN0cmVhbScsXG4gICAgICAgICksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKChwKSA9PiB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9XG4gICAgICAgICAgdHJhY2tUeXBlID09PSAndmlkZW9UcmFjaycgPyBwLnZpZGVvU3RyZWFtIDogcC5zY3JlZW5TaGFyZVN0cmVhbTtcbiAgICAgICAgaWYgKHZpZGVvRWxlbWVudC5zcmNPYmplY3QgPT09IHNvdXJjZSkgcmV0dXJuO1xuICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc291cmNlID8/IG51bGw7XG4gICAgICAgIGlmIChpc1NhZmFyaSgpIHx8IGlzRmlyZWZveCgpKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc291cmNlID8/IG51bGw7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYEZhaWxlZCB0byBwbGF5IHN0cmVhbWAsIGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBhZGQgZXh0cmEgZGVsYXkgdW50aWwgd2UgYXR0ZW1wdCB0byBmb3JjZS1wbGF5XG4gICAgICAgICAgICAvLyB0aGUgcGFydGljaXBhbnQncyBtZWRpYSBzdHJlYW0gaW4gRmlyZWZveCBhbmQgU2FmYXJpLFxuICAgICAgICAgICAgLy8gYXMgdGhleSBzZWVtIHRvIGhhdmUgc29tZSB0aW1pbmcgaXNzdWVzXG4gICAgICAgICAgfSwgMjUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXF1ZXN0VHJhY2tXaXRoRGltZW5zaW9ucyhEZWJvdW5jZVR5cGUuRkFTVCwgdW5kZWZpbmVkKTtcbiAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlU3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xuICAgICAgcHVibGlzaGVkVHJhY2tzU3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xuICAgICAgc3RyZWFtU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICByZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEJpbmRzIGEgRE9NIDxhdWRpbz4gZWxlbWVudCB0byB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgYXVkaW8gZWxlbWVudCB3aWxsXG4gICAqIHBsYXkgdGhlIGNvcnJlY3QgYXVkaW8gc3RyZWFtIGZvciB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogQHBhcmFtIGF1ZGlvRWxlbWVudCB0aGUgYXVkaW8gZWxlbWVudCB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSBraW5kIG9mIGF1ZGlvLlxuICAgKiBAcmV0dXJucyBhIGNsZWFudXAgZnVuY3Rpb24gdGhhdCB3aWxsIHVuYmluZCB0aGUgYXVkaW8gZWxlbWVudC5cbiAgICovXG4gIGJpbmRBdWRpb0VsZW1lbnQgPSAoXG4gICAgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50LFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHRyYWNrVHlwZTogQXVkaW9UcmFja1R5cGUsXG4gICkgPT4ge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5jYWxsLnN0YXRlLmZpbmRQYXJ0aWNpcGFudEJ5U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gICAgaWYgKCFwYXJ0aWNpcGFudCB8fCBwYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnQpIHJldHVybjtcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50JCA9IHRoaXMuY2FsbC5zdGF0ZS5wYXJ0aWNpcGFudHMkLnBpcGUoXG4gICAgICBtYXAoXG4gICAgICAgIChwYXJ0aWNpcGFudHMpID0+XG4gICAgICAgICAgcGFydGljaXBhbnRzLmZpbmQoXG4gICAgICAgICAgICAocCkgPT4gcC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCxcbiAgICAgICAgICApIGFzIFN0cmVhbVZpZGVvUGFydGljaXBhbnQsXG4gICAgICApLFxuICAgICAgdGFrZVdoaWxlKChwKSA9PiAhIXApLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIGNvbnN0IHVwZGF0ZU1lZGlhU3RyZWFtU3Vic2NyaXB0aW9uID0gcGFydGljaXBhbnQkXG4gICAgICAucGlwZShcbiAgICAgICAgZGlzdGluY3RVbnRpbEtleUNoYW5nZWQoXG4gICAgICAgICAgdHJhY2tUeXBlID09PSAnc2NyZWVuU2hhcmVBdWRpb1RyYWNrJ1xuICAgICAgICAgICAgPyAnc2NyZWVuU2hhcmVBdWRpb1N0cmVhbSdcbiAgICAgICAgICAgIDogJ2F1ZGlvU3RyZWFtJyxcbiAgICAgICAgKSxcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKHApID0+IHtcbiAgICAgICAgY29uc3Qgc291cmNlID1cbiAgICAgICAgICB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZUF1ZGlvVHJhY2snXG4gICAgICAgICAgICA/IHAuc2NyZWVuU2hhcmVBdWRpb1N0cmVhbVxuICAgICAgICAgICAgOiBwLmF1ZGlvU3RyZWFtO1xuICAgICAgICBpZiAoYXVkaW9FbGVtZW50LnNyY09iamVjdCA9PT0gc291cmNlKSByZXR1cm47XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IHNvdXJjZSA/PyBudWxsO1xuICAgICAgICAgIGlmIChhdWRpb0VsZW1lbnQuc3JjT2JqZWN0KSB7XG4gICAgICAgICAgICBhdWRpb0VsZW1lbnQucGxheSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYEZhaWxlZCB0byBwbGF5IHN0cmVhbWAsIGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGF1ZGlvIG91dHB1dCBkZXZpY2Ugc2hhbGwgYmUgc2V0IGFmdGVyIHRoZSBhdWRpbyBlbGVtZW50IGlzIHBsYXllZFxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCB0aGUgYnJvd3NlciB3aWxsIG5vdCBwaWNrIGl0IHVwLCBhbmQgd2lsbCBhbHdheXNcbiAgICAgICAgICAgIC8vIHBsYXkgYXVkaW8gdGhyb3VnaCB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBkZXZpY2VcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWREZXZpY2UgfSA9IHRoaXMuY2FsbC5zcGVha2VyLnN0YXRlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGV2aWNlICYmICdzZXRTaW5rSWQnIGluIGF1ZGlvRWxlbWVudCkge1xuICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuc2V0U2lua0lkKHNlbGVjdGVkRGV2aWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBjb25zdCBzaW5rSWRTdWJzY3JpcHRpb24gPSAhKCdzZXRTaW5rSWQnIGluIGF1ZGlvRWxlbWVudClcbiAgICAgID8gbnVsbFxuICAgICAgOiB0aGlzLmNhbGwuc3BlYWtlci5zdGF0ZS5zZWxlY3RlZERldmljZSQuc3Vic2NyaWJlKChkZXZpY2VJZCkgPT4ge1xuICAgICAgICAgIGlmIChkZXZpY2VJZCkge1xuICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNldFNpbmtJZChkZXZpY2VJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNvbnN0IHZvbHVtZVN1YnNjcmlwdGlvbiA9IGNvbWJpbmVMYXRlc3QoW1xuICAgICAgdGhpcy5jYWxsLnNwZWFrZXIuc3RhdGUudm9sdW1lJCxcbiAgICAgIHBhcnRpY2lwYW50JC5waXBlKGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkKCdhdWRpb1ZvbHVtZScpKSxcbiAgICBdKS5zdWJzY3JpYmUoKFt2b2x1bWUsIHBdKSA9PiB7XG4gICAgICBhdWRpb0VsZW1lbnQudm9sdW1lID0gcC5hdWRpb1ZvbHVtZSA/PyB2b2x1bWU7XG4gICAgfSk7XG5cbiAgICBhdWRpb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNpbmtJZFN1YnNjcmlwdGlvbj8udW5zdWJzY3JpYmUoKTtcbiAgICAgIHZvbHVtZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdXBkYXRlTWVkaWFTdHJlYW1TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9O1xufVxuIiwiaW1wb3J0IHsgQ2FsbFNldHRpbmdzUmVzcG9uc2UsIE93bkNhcGFiaWxpdHkgfSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuXG4vKipcbiAqIFN0b3JlcyB0aGUgcGVybWlzc2lvbnMgZm9yIHRoZSBjdXJyZW50IHVzZXIgYW5kIGV4cG9zZXNcbiAqIGEgZmV3IGhlbHBlciBtZXRob2RzIHdoaWNoIG1ha2UgaXQgZWFzaWVyIHRvIHdvcmsgd2l0aCBwZXJtaXNzaW9ucy5cbiAqXG4gKiBUaGlzIGlzIGFuIGludGVybmFsIGNsYXNzIG1lYW50IHRvIGJlIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aFxuICogYSB7QGxpbmsgQ2FsbH0gaW5zdGFuY2UuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uc0NvbnRleHQge1xuICBwcml2YXRlIHBlcm1pc3Npb25zOiBPd25DYXBhYmlsaXR5W10gPSBbXTtcbiAgcHJpdmF0ZSBzZXR0aW5ncz86IENhbGxTZXR0aW5nc1Jlc3BvbnNlO1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwZXJtaXNzaW9ucyBmb3IgdGhlIGN1cnJlbnQgdXNlci5cbiAgICpcbiAgICogQHBhcmFtIHBlcm1pc3Npb25zIHRoZSBwZXJtaXNzaW9ucyB0byBzZXQuXG4gICAqL1xuICBzZXRQZXJtaXNzaW9ucyA9IChwZXJtaXNzaW9uczogT3duQ2FwYWJpbGl0eVtdKSA9PiB7XG4gICAgdGhpcy5wZXJtaXNzaW9ucyA9IHBlcm1pc3Npb25zIHx8IFtdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzZXR0aW5ncyBmb3IgdGhlIGJvdW5kIGNhbGwuXG4gICAqIEBwYXJhbSBzZXR0aW5nc1xuICAgKi9cbiAgc2V0Q2FsbFNldHRpbmdzID0gKHNldHRpbmdzOiBDYWxsU2V0dGluZ3NSZXNwb25zZSkgPT4ge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIGEgc3BlY2lmaWMgcGVybWlzc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIHBlcm1pc3Npb24gdGhlIHBlcm1pc3Npb24gdG8gY2hlY2sgZm9yLlxuICAgKi9cbiAgaGFzUGVybWlzc2lvbiA9IChwZXJtaXNzaW9uOiBPd25DYXBhYmlsaXR5KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMucGVybWlzc2lvbnMuaW5jbHVkZXMocGVybWlzc2lvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCB1c2VyIGNhbiByZXF1ZXN0IGEgc3BlY2lmaWMgcGVybWlzc2lvblxuICAgKiB3aXRoaW4gdGhlIGNhbGwuXG4gICAqXG4gICAqIEBwYXJhbSBwZXJtaXNzaW9uIHRoZSBwZXJtaXNzaW9uIHRvIGNoZWNrIGZvci5cbiAgICogQHBhcmFtIHNldHRpbmdzIHRoZSBjYWxsIHNldHRpbmdzIHRvIGNoZWNrIGFnYWluc3QgKG9wdGlvbmFsKS5cbiAgICovXG4gIGNhblJlcXVlc3QgPSAoXG4gICAgcGVybWlzc2lvbjogT3duQ2FwYWJpbGl0eSxcbiAgICBzZXR0aW5nczogQ2FsbFNldHRpbmdzUmVzcG9uc2UgfCB1bmRlZmluZWQgPSB0aGlzLnNldHRpbmdzLFxuICApID0+IHtcbiAgICBpZiAoIXNldHRpbmdzKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCB7IGF1ZGlvLCB2aWRlbywgc2NyZWVuc2hhcmluZyB9ID0gc2V0dGluZ3M7XG4gICAgc3dpdGNoIChwZXJtaXNzaW9uKSB7XG4gICAgICBjYXNlIE93bkNhcGFiaWxpdHkuU0VORF9BVURJTzpcbiAgICAgICAgcmV0dXJuIGF1ZGlvLmFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ7XG4gICAgICBjYXNlIE93bkNhcGFiaWxpdHkuU0VORF9WSURFTzpcbiAgICAgICAgcmV0dXJuIHZpZGVvLmFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ7XG4gICAgICBjYXNlIE93bkNhcGFiaWxpdHkuU0NSRUVOU0hBUkU6XG4gICAgICAgIHJldHVybiBzY3JlZW5zaGFyaW5nLmFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgQ29tcGFyYXRvcixcbiAgZGVmYXVsdFNvcnRQcmVzZXQsXG4gIGxpdmVzdHJlYW1PckF1ZGlvUm9vbVNvcnRQcmVzZXQsXG59IGZyb20gJy4vc29ydGluZyc7XG5cbi8qKlxuICogVGhlIG9wdGlvbnMgZm9yIGEge0BsaW5rIENhbGxUeXBlfS5cbiAqL1xuZXhwb3J0IHR5cGUgQ2FsbFR5cGVPcHRpb25zID0ge1xuICAvKipcbiAgICogVGhlIHtAbGluayBDb21wYXJhdG9yfSB0byB1c2UgdG8gc29ydGluZyB0aGUgcGFydGljaXBhbnRzIGluIHRoZSBjYWxsLlxuICAgKi9cbiAgc29ydFBhcnRpY2lwYW50c0J5PzogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50Pjtcbn07XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGNhbGwgdHlwZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxUeXBlIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBjYWxsIHR5cGUuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvcHRpb25zIGZvciB0aGUgY2FsbCB0eXBlLlxuICAgKi9cbiAgb3B0aW9uczogQ2FsbFR5cGVPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENhbGxUeXBlLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgY2FsbCB0eXBlLlxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIGNhbGwgdHlwZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiBDYWxsVHlwZU9wdGlvbnMgPSB7XG4gICAgICBzb3J0UGFydGljaXBhbnRzQnk6IGRlZmF1bHRTb3J0UHJlc2V0LFxuICAgIH0sXG4gICkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxufVxuXG4vKipcbiAqIEEgcmVnaXN0cnkgb2Yge0BsaW5rIENhbGxUeXBlfXMuXG4gKiBZb3UgY2FuIHJlZ2lzdGVyIGFuZCB1bnJlZ2lzdGVyIGNhbGwgdHlwZXMuXG4gKi9cbmNsYXNzIENhbGxUeXBlc1JlZ2lzdHJ5IHtcbiAgLyoqXG4gICAqIFRoZSBjYWxsIHR5cGVzIHJlZ2lzdGVyZWQgaW4gdGhpcyByZWdpc3RyeS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgY2FsbFR5cGVzOiB7IFtrZXk6IHN0cmluZ106IENhbGxUeXBlIH07XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ2FsbFR5cGVzUmVnaXN0cnkuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsVHlwZXMgdGhlIGluaXRpYWwgY2FsbCB0eXBlcyB0byByZWdpc3Rlci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNhbGxUeXBlczogQ2FsbFR5cGVbXSkge1xuICAgIHRoaXMuY2FsbFR5cGVzID0gY2FsbFR5cGVzLnJlZHVjZTx7IFtrZXk6IHN0cmluZ106IENhbGxUeXBlIH0+KFxuICAgICAgKGFjYywgY2FsbFR5cGUpID0+IHtcbiAgICAgICAgYWNjW2NhbGxUeXBlLm5hbWVdID0gY2FsbFR5cGU7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LFxuICAgICAge30sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBuZXcgY2FsbCB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbFR5cGUgdGhlIGNhbGwgdHlwZSB0byByZWdpc3Rlci5cbiAgICovXG4gIHJlZ2lzdGVyID0gKGNhbGxUeXBlOiBDYWxsVHlwZSkgPT4ge1xuICAgIHRoaXMuY2FsbFR5cGVzW2NhbGxUeXBlLm5hbWVdID0gY2FsbFR5cGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGEgY2FsbCB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgY2FsbCB0eXBlIHRvIHVucmVnaXN0ZXIuXG4gICAqL1xuICB1bnJlZ2lzdGVyID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICAgIGRlbGV0ZSB0aGlzLmNhbGxUeXBlc1tuYW1lXTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyBhIGNhbGwgdHlwZSBieSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgY2FsbCB0eXBlIHRvIGdldC5cbiAgICovXG4gIGdldCA9IChuYW1lOiBzdHJpbmcpOiBDYWxsVHlwZSA9PiB7XG4gICAgaWYgKCF0aGlzLmNhbGxUeXBlc1tuYW1lXSkge1xuICAgICAgdGhpcy5yZWdpc3RlcihuZXcgQ2FsbFR5cGUobmFtZSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWxsVHlwZXNbbmFtZV07XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgY2FsbCB0eXBlcyByZWdpc3RyeS5cbiAqIFlvdSBjYW4gdXNlIHRoaXMgaW5zdGFuY2UgdG8gZHluYW1pY2FsbHkgcmVnaXN0ZXIgYW5kIHVucmVnaXN0ZXIgY2FsbCB0eXBlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IENhbGxUeXBlcyA9IG5ldyBDYWxsVHlwZXNSZWdpc3RyeShbXG4gIG5ldyBDYWxsVHlwZSgnZGVmYXVsdCcsIHtcbiAgICBzb3J0UGFydGljaXBhbnRzQnk6IGRlZmF1bHRTb3J0UHJlc2V0LFxuICB9KSxcbiAgbmV3IENhbGxUeXBlKCdkZXZlbG9wbWVudCcsIHtcbiAgICBzb3J0UGFydGljaXBhbnRzQnk6IGRlZmF1bHRTb3J0UHJlc2V0LFxuICB9KSxcbiAgbmV3IENhbGxUeXBlKCdsaXZlc3RyZWFtJywge1xuICAgIHNvcnRQYXJ0aWNpcGFudHNCeTogbGl2ZXN0cmVhbU9yQXVkaW9Sb29tU29ydFByZXNldCxcbiAgfSksXG4gIG5ldyBDYWxsVHlwZSgnYXVkaW9fcm9vbScsIHtcbiAgICBzb3J0UGFydGljaXBhbnRzQnk6IGxpdmVzdHJlYW1PckF1ZGlvUm9vbVNvcnRQcmVzZXQsXG4gIH0pLFxuXSk7XG4iLCJpbXBvcnQgeyBmcm9tRXZlbnRQYXR0ZXJuLCBtYXAgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGlzUmVhY3ROYXRpdmUgfSBmcm9tICcuLi9oZWxwZXJzL3BsYXRmb3Jtcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgZGlzcG9zZU9mTWVkaWFTdHJlYW0gfSBmcm9tICcuL2RldmljZXMnO1xuaW1wb3J0IHsgd2l0aG91dENvbmN1cnJlbmN5IH0gZnJvbSAnLi4vaGVscGVycy9jb25jdXJyZW5jeSc7XG5cbmludGVyZmFjZSBCcm93c2VyUGVybWlzc2lvbkNvbmZpZyB7XG4gIGNvbnN0cmFpbnRzOiBEaXNwbGF5TWVkaWFTdHJlYW1PcHRpb25zO1xuICBxdWVyeU5hbWU6IFBlcm1pc3Npb25OYW1lO1xufVxuXG5leHBvcnQgY2xhc3MgQnJvd3NlclBlcm1pc3Npb24ge1xuICBwcml2YXRlIHJlYWR5OiBQcm9taXNlPHZvaWQ+O1xuICBwcml2YXRlIGRpc3Bvc2VDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICBwcml2YXRlIHN0YXRlOiBQZXJtaXNzaW9uU3RhdGUgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgd2FzUHJvbXB0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnMgPSBuZXcgU2V0PChzdGF0ZTogUGVybWlzc2lvblN0YXRlKSA9PiB2b2lkPigpO1xuICBwcml2YXRlIGxvZ2dlciA9IGdldExvZ2dlcihbJ3Blcm1pc3Npb25zJ10pO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcGVybWlzc2lvbjogQnJvd3NlclBlcm1pc3Npb25Db25maWcpIHtcbiAgICBjb25zdCBzaWduYWwgPSB0aGlzLmRpc3Bvc2VDb250cm9sbGVyLnNpZ25hbDtcblxuICAgIHRoaXMucmVhZHkgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXNzdW1lR3JhbnRlZCA9IChlcnJvcj86IHVua25vd24pID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgnZ3JhbnRlZCcpO1xuICAgICAgfTtcblxuICAgICAgaWYgKCFjYW5RdWVyeVBlcm1pc3Npb25zKCkpIHtcbiAgICAgICAgcmV0dXJuIGFzc3VtZUdyYW50ZWQoKTtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgbmF2aWdhdG9yLnBlcm1pc3Npb25zLnF1ZXJ5KHtcbiAgICAgICAgICBuYW1lOiBwZXJtaXNzaW9uLnF1ZXJ5TmFtZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdHVzLnN0YXRlKTtcbiAgICAgICAgICBzdGF0dXMuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gdGhpcy5zZXRTdGF0ZShzdGF0dXMuc3RhdGUpLCB7XG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBhc3N1bWVHcmFudGVkKGVycik7XG4gICAgICB9XG4gICAgfSkoKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRpc3Bvc2VDb250cm9sbGVyLmFib3J0KCk7XG4gIH1cblxuICBhc3luYyBnZXRTdGF0ZSgpIHtcbiAgICBhd2FpdCB0aGlzLnJlYWR5O1xuICAgIGlmICghdGhpcy5zdGF0ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCcm93c2VyUGVybWlzc2lvbiBpbnN0YW5jZSBwb3NzaWJseSBkaXNwb3NlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIGFzeW5jIHByb21wdCh7XG4gICAgZm9yY2VQcm9tcHQgPSBmYWxzZSxcbiAgICB0aHJvd09uTm90QWxsb3dlZCA9IGZhbHNlLFxuICB9OiB7IGZvcmNlUHJvbXB0PzogYm9vbGVhbjsgdGhyb3dPbk5vdEFsbG93ZWQ/OiBib29sZWFuIH0gPSB7fSkge1xuICAgIGF3YWl0IHdpdGhvdXRDb25jdXJyZW5jeShcbiAgICAgIGBwZXJtaXNzaW9uLXByb21wdC0ke3RoaXMucGVybWlzc2lvbi5xdWVyeU5hbWV9YCxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChhd2FpdCB0aGlzLmdldFN0YXRlKCkpICE9PSAncHJvbXB0JyB8fFxuICAgICAgICAgICh0aGlzLndhc1Byb21wdGVkICYmICFmb3JjZVByb21wdClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXNHcmFudGVkID0gdGhpcy5zdGF0ZSA9PT0gJ2dyYW50ZWQnO1xuXG4gICAgICAgICAgaWYgKCFpc0dyYW50ZWQgJiYgdGhyb3dPbk5vdEFsbG93ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgICAgICdQZXJtaXNzaW9uIHdhcyBub3QgZ3JhbnRlZCBwcmV2aW91c2x5LCBhbmQgcHJvbXB0aW5nIGFnYWluIGlzIG5vdCBhbGxvd2VkJyxcbiAgICAgICAgICAgICAgJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBpc0dyYW50ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMud2FzUHJvbXB0ZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKFxuICAgICAgICAgICAgdGhpcy5wZXJtaXNzaW9uLmNvbnN0cmFpbnRzLFxuICAgICAgICAgICk7XG4gICAgICAgICAgZGlzcG9zZU9mTWVkaWFTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmIGUubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgJ0Jyb3dzZXIgcGVybWlzc2lvbiB3YXMgbm90IGdyYW50ZWQnLCB7XG4gICAgICAgICAgICAgIHBlcm1pc3Npb246IHRoaXMucGVybWlzc2lvbixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhyb3dPbk5vdEFsbG93ZWQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMubG9nZ2VyKCdlcnJvcicsIGBGYWlsZWQgdG8gZ2V0VXNlck1lZGlhYCwge1xuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBwZXJtaXNzaW9uOiB0aGlzLnBlcm1pc3Npb24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICApO1xuICB9XG5cbiAgbGlzdGVuKGNiOiAoc3RhdGU6IFBlcm1pc3Npb25TdGF0ZSkgPT4gdm9pZCkge1xuICAgIHRoaXMubGlzdGVuZXJzLmFkZChjYik7XG4gICAgaWYgKHRoaXMuc3RhdGUpIGNiKHRoaXMuc3RhdGUpO1xuICAgIHJldHVybiAoKSA9PiB0aGlzLmxpc3RlbmVycy5kZWxldGUoY2IpO1xuICB9XG5cbiAgYXNPYnNlcnZhYmxlKCkge1xuICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuPFBlcm1pc3Npb25TdGF0ZT4oXG4gICAgICAoaGFuZGxlcikgPT4gdGhpcy5saXN0ZW4oaGFuZGxlciksXG4gICAgICAoaGFuZGxlciwgdW5saXN0ZW4pID0+IHVubGlzdGVuKCksXG4gICAgKS5waXBlKFxuICAgICAgLy8gSW4gc29tZSBicm93c2VycywgdGhlICdjaGFuZ2UnIGV2ZW50IGRvZXNuJ3QgcmVsaWFibHkgZW1pdCBhbmQgaGVuY2UsXG4gICAgICAvLyBwZXJtaXNzaW9uU3RhdGUgc3RheXMgaW4gJ3Byb21wdCcgc3RhdGUgZm9yZXZlci5cbiAgICAgIC8vIFR5cGljYWxseSwgdGhpcyBoYXBwZW5zIHdoZW4gYSB1c2VyIGdyYW50cyBvbmUtdGltZSBwZXJtaXNzaW9uLlxuICAgICAgLy8gSW5zdGVhZCBvZiBjaGVja2luZyBpZiBhIHBlcm1pc3Npb24gaXMgZ3JhbnRlZCwgd2UgY2hlY2sgaWYgaXQgaXNuJ3QgZGVuaWVkXG4gICAgICBtYXAoKHN0YXRlKSA9PiBzdGF0ZSAhPT0gJ2RlbmllZCcpLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHNldFN0YXRlKHN0YXRlOiBQZXJtaXNzaW9uU3RhdGUpIHtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gc3RhdGUpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihzdGF0ZSkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjYW5RdWVyeVBlcm1pc3Npb25zKCkge1xuICByZXR1cm4gKFxuICAgICFpc1JlYWN0TmF0aXZlKCkgJiZcbiAgICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICEhbmF2aWdhdG9yLnBlcm1pc3Npb25zPy5xdWVyeVxuICApO1xufVxuIiwiY29uc3QgdW5pbml0aWFsaXplZCA9IFN5bWJvbCgndW5pbml0aWFsaXplZCcpO1xuXG4vKipcbiAqIExhemlseSBjcmVhdGVzIGEgdmFsdWUgdXNpbmcgYSBwcm92aWRlZCBmYWN0b3J5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXp5PFQ+KGZhY3Rvcnk6ICgpID0+IFQpOiAoKSA9PiBUIHtcbiAgbGV0IHZhbHVlOiBUIHwgdHlwZW9mIHVuaW5pdGlhbGl6ZWQgPSB1bmluaXRpYWxpemVkO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5pbml0aWFsaXplZCkge1xuICAgICAgdmFsdWUgPSBmYWN0b3J5KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xufVxuIiwiaW1wb3J0IHtcbiAgY29uY2F0TWFwLFxuICBkZWJvdW5jZVRpbWUsXG4gIGZyb20sXG4gIGZyb21FdmVudCxcbiAgbWFwLFxuICBtZXJnZSxcbiAgc2hhcmVSZXBsYXksXG4gIHN0YXJ0V2l0aCxcbn0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgQnJvd3NlclBlcm1pc3Npb24gfSBmcm9tICcuL0Jyb3dzZXJQZXJtaXNzaW9uJztcbmltcG9ydCB7IGxhenkgfSBmcm9tICcuLi9oZWxwZXJzL2xhenknO1xuXG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBkZXZpY2VzXG4gKiB0aGF0IG1lZXQgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBwZXJtaXNzaW9uIGEgQnJvd3NlclBlcm1pc3Npb24gaW5zdGFuY2UuXG4gKiBAcGFyYW0ga2luZCB0aGUga2luZCBvZiBkZXZpY2VzIHRvIGVudW1lcmF0ZS5cbiAqL1xuY29uc3QgZ2V0RGV2aWNlcyA9IChwZXJtaXNzaW9uOiBCcm93c2VyUGVybWlzc2lvbiwga2luZDogTWVkaWFEZXZpY2VLaW5kKSA9PiB7XG4gIHJldHVybiBmcm9tKFxuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgZGV2aWNlcyA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpO1xuICAgICAgLy8gZm9yIHByaXZhY3kgcmVhc29ucywgbW9zdCBicm93c2VycyBkb24ndCBnaXZlIHlvdSBkZXZpY2UgbGFiZWxzXG4gICAgICAvLyB1bmxlc3MgeW91IGhhdmUgYSBjb3JyZXNwb25kaW5nIGNhbWVyYSBvciBtaWNyb3Bob25lIHBlcm1pc3Npb25cbiAgICAgIGNvbnN0IHNob3VsZFByb21wdEZvckJyb3dzZXJQZXJtaXNzaW9uID0gZGV2aWNlcy5zb21lKFxuICAgICAgICAoZGV2aWNlKSA9PiBkZXZpY2Uua2luZCA9PT0ga2luZCAmJiBkZXZpY2UubGFiZWwgPT09ICcnLFxuICAgICAgKTtcbiAgICAgIGlmIChzaG91bGRQcm9tcHRGb3JCcm93c2VyUGVybWlzc2lvbikge1xuICAgICAgICBhd2FpdCBwZXJtaXNzaW9uLnByb21wdCh7IHRocm93T25Ob3RBbGxvd2VkOiB0cnVlIH0pO1xuICAgICAgICBkZXZpY2VzID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGV2aWNlcy5maWx0ZXIoKGQpID0+IGQua2luZCA9PT0ga2luZCk7XG4gICAgfSkoKSxcbiAgKTtcbn07XG5cbi8qKlxuICogVGVsbHMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgYXVkaW8gb3V0cHV0IGNoYW5nZSBvbiAnYXVkaW8nIGVsZW1lbnRzLFxuICogc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MTWVkaWFFbGVtZW50L3NldFNpbmtJZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrSWZBdWRpb091dHB1dENoYW5nZVN1cHBvcnRlZCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gIHJldHVybiAnc2V0U2lua0lkJyBpbiBlbGVtZW50O1xufTtcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjb25zdHJhaW50cyB1c2VkIHRvIHJlcXVlc3QgYXVkaW8gZGV2aWNlcy5cbiAqL1xuY29uc3QgYXVkaW9EZXZpY2VDb25zdHJhaW50cyA9IHtcbiAgYXVkaW86IHtcbiAgICBhdXRvR2FpbkNvbnRyb2w6IHRydWUsXG4gICAgbm9pc2VTdXBwcmVzc2lvbjogdHJ1ZSxcbiAgICBlY2hvQ2FuY2VsbGF0aW9uOiB0cnVlLFxuICB9LFxufSBzYXRpc2ZpZXMgTWVkaWFTdHJlYW1Db25zdHJhaW50cztcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjb25zdHJhaW50cyB1c2VkIHRvIHJlcXVlc3QgdmlkZW8gZGV2aWNlcy5cbiAqL1xuY29uc3QgdmlkZW9EZXZpY2VDb25zdHJhaW50cyA9IHtcbiAgdmlkZW86IHtcbiAgICB3aWR0aDogMTI4MCxcbiAgICBoZWlnaHQ6IDcyMCxcbiAgfSxcbn0gc2F0aXNmaWVzIE1lZGlhU3RyZWFtQ29uc3RyYWludHM7XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIGJyb3dzZXIgcGVybWlzc2lvbiB0byB1c2UgbWljcm9waG9uZS4gVGhpcyBwZXJtaXNzaW9uIGFsc29cbiAqIGFmZmVjdHMgYW4gYWJpbGl0eSB0byBlbnVtZXJhdGUgYXVkaW8gZGV2aWNlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEF1ZGlvQnJvd3NlclBlcm1pc3Npb24gPSBsYXp5KFxuICAoKSA9PlxuICAgIG5ldyBCcm93c2VyUGVybWlzc2lvbih7XG4gICAgICBjb25zdHJhaW50czogYXVkaW9EZXZpY2VDb25zdHJhaW50cyxcbiAgICAgIHF1ZXJ5TmFtZTogJ21pY3JvcGhvbmUnIGFzIFBlcm1pc3Npb25OYW1lLFxuICAgIH0pLFxuKTtcblxuLyoqXG4gKiBLZWVwcyB0cmFjayBvZiB0aGUgYnJvd3NlciBwZXJtaXNzaW9uIHRvIHVzZSBjYW1lcmEuIFRoaXMgcGVybWlzc2lvbiBhbHNvXG4gKiBhZmZlY3RzIGFuIGFiaWxpdHkgdG8gZW51bWVyYXRlIHZpZGVvIGRldmljZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRWaWRlb0Jyb3dzZXJQZXJtaXNzaW9uID0gbGF6eShcbiAgKCkgPT5cbiAgICBuZXcgQnJvd3NlclBlcm1pc3Npb24oe1xuICAgICAgY29uc3RyYWludHM6IHZpZGVvRGV2aWNlQ29uc3RyYWludHMsXG4gICAgICBxdWVyeU5hbWU6ICdjYW1lcmEnIGFzIFBlcm1pc3Npb25OYW1lLFxuICAgIH0pLFxuKTtcblxuY29uc3QgZ2V0RGV2aWNlQ2hhbmdlT2JzZXJ2ZXIgPSBsYXp5KCgpID0+IHtcbiAgLy8gJ2FkZEV2ZW50TGlzdGVuZXInIGlzIG5vdCBhdmFpbGFibGUgaW4gUmVhY3QgTmF0aXZlLCByZXR1cm5pbmdcbiAgLy8gYW4gb2JzZXJ2YWJsZSB0aGF0IHdpbGwgbmV2ZXIgZmlyZVxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcikgcmV0dXJuIGZyb20oW10pO1xuICByZXR1cm4gZnJvbUV2ZW50KG5hdmlnYXRvci5tZWRpYURldmljZXMsICdkZXZpY2VjaGFuZ2UnKS5waXBlKFxuICAgIG1hcCgoKSA9PiB1bmRlZmluZWQpLFxuICAgIGRlYm91bmNlVGltZSg1MDApLFxuICApO1xufSk7XG5cbi8qKlxuICogUHJvbXB0cyB0aGUgdXNlciBmb3IgYSBwZXJtaXNzaW9uIHRvIHVzZSBhdWRpbyBkZXZpY2VzIChpZiBub3QgYWxyZWFkeSBncmFudGVkXG4gKiBhbmQgd2FzIG5vdCBwcm9tcHRlZCBiZWZvcmUpIGFuZCBsaXN0cyB0aGUgYXZhaWxhYmxlICdhdWRpb2lucHV0JyBkZXZpY2VzLFxuICogaWYgZGV2aWNlcyBhcmUgYWRkZWQvcmVtb3ZlZCB0aGUgbGlzdCBpcyB1cGRhdGVkLCBhbmQgaWYgdGhlIHBlcm1pc3Npb24gaXMgcmV2b2tlZCxcbiAqIHRoZSBvYnNlcnZhYmxlIGVycm9ycy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEF1ZGlvRGV2aWNlcyA9IGxhenkoKCkgPT4ge1xuICByZXR1cm4gbWVyZ2UoXG4gICAgZ2V0RGV2aWNlQ2hhbmdlT2JzZXJ2ZXIoKSxcbiAgICBnZXRBdWRpb0Jyb3dzZXJQZXJtaXNzaW9uKCkuYXNPYnNlcnZhYmxlKCksXG4gICkucGlwZShcbiAgICBzdGFydFdpdGgodW5kZWZpbmVkKSxcbiAgICBjb25jYXRNYXAoKCkgPT4gZ2V0RGV2aWNlcyhnZXRBdWRpb0Jyb3dzZXJQZXJtaXNzaW9uKCksICdhdWRpb2lucHV0JykpLFxuICAgIHNoYXJlUmVwbGF5KDEpLFxuICApO1xufSk7XG5cbi8qKlxuICogUHJvbXB0cyB0aGUgdXNlciBmb3IgYSBwZXJtaXNzaW9uIHRvIHVzZSB2aWRlbyBkZXZpY2VzIChpZiBub3QgYWxyZWFkeSBncmFudGVkXG4gKiBhbmQgd2FzIG5vdCBwcm9tcHRlZCBiZWZvcmUpIGFuZCBsaXN0cyB0aGUgYXZhaWxhYmxlICd2aWRlb2lucHV0JyBkZXZpY2VzLFxuICogaWYgZGV2aWNlcyBhcmUgYWRkZWQvcmVtb3ZlZCB0aGUgbGlzdCBpcyB1cGRhdGVkLCBhbmQgaWYgdGhlIHBlcm1pc3Npb24gaXMgcmV2b2tlZCxcbiAqIHRoZSBvYnNlcnZhYmxlIGVycm9ycy5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFZpZGVvRGV2aWNlcyA9ICgpID0+IHtcbiAgcmV0dXJuIG1lcmdlKFxuICAgIGdldERldmljZUNoYW5nZU9ic2VydmVyKCksXG4gICAgZ2V0VmlkZW9Ccm93c2VyUGVybWlzc2lvbigpLmFzT2JzZXJ2YWJsZSgpLFxuICApLnBpcGUoXG4gICAgc3RhcnRXaXRoKHVuZGVmaW5lZCksXG4gICAgY29uY2F0TWFwKCgpID0+IGdldERldmljZXMoZ2V0VmlkZW9Ccm93c2VyUGVybWlzc2lvbigpLCAndmlkZW9pbnB1dCcpKSxcbiAgICBzaGFyZVJlcGxheSgxKSxcbiAgKTtcbn07XG5cbi8qKlxuICogUHJvbXB0cyB0aGUgdXNlciBmb3IgYSBwZXJtaXNzaW9uIHRvIHVzZSB2aWRlbyBkZXZpY2VzIChpZiBub3QgYWxyZWFkeSBncmFudGVkXG4gKiBhbmQgd2FzIG5vdCBwcm9tcHRlZCBiZWZvcmUpIGFuZCBsaXN0cyB0aGUgYXZhaWxhYmxlICdhdWRpb291dHB1dCcgZGV2aWNlcyxcbiAqIGlmIGRldmljZXMgYXJlIGFkZGVkL3JlbW92ZWQgdGhlIGxpc3QgaXMgdXBkYXRlZCwgYW5kIGlmIHRoZSBwZXJtaXNzaW9uIGlzIHJldm9rZWQsXG4gKiB0aGUgb2JzZXJ2YWJsZSBlcnJvcnMuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBdWRpb091dHB1dERldmljZXMgPSAoKSA9PiB7XG4gIHJldHVybiBtZXJnZShcbiAgICBnZXREZXZpY2VDaGFuZ2VPYnNlcnZlcigpLFxuICAgIGdldEF1ZGlvQnJvd3NlclBlcm1pc3Npb24oKS5hc09ic2VydmFibGUoKSxcbiAgKS5waXBlKFxuICAgIHN0YXJ0V2l0aCh1bmRlZmluZWQpLFxuICAgIGNvbmNhdE1hcCgoKSA9PiBnZXREZXZpY2VzKGdldEF1ZGlvQnJvd3NlclBlcm1pc3Npb24oKSwgJ2F1ZGlvb3V0cHV0JykpLFxuICAgIHNoYXJlUmVwbGF5KDEpLFxuICApO1xufTtcblxuY29uc3QgZ2V0U3RyZWFtID0gYXN5bmMgKGNvbnN0cmFpbnRzOiBNZWRpYVN0cmVhbUNvbnN0cmFpbnRzKSA9PiB7XG4gIHJldHVybiBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXVkaW8gbWVkaWEgc3RyZWFtIHRoYXQgZnVsZmlsbHMgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICogSWYgbm8gY29uc3RyYWludHMgYXJlIHByb3ZpZGVkLCBpdCB1c2VzIHRoZSBicm93c2VyJ3MgZGVmYXVsdCBvbmVzLlxuICpcbiAqIEBhbmd1bGFyIEl0J3MgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBbYERldmljZU1hbmFnZXJTZXJ2aWNlYF0oLi9EZXZpY2VNYW5hZ2VyU2VydmljZS5tZCkgZm9yIGEgaGlnaGVyIGxldmVsIEFQSSwgdXNlIHRoaXMgbG93LWxldmVsIG1ldGhvZCBvbmx5IGlmIHRoZSBgRGV2aWNlTWFuYWdlclNlcnZpY2VgIGRvZXNuJ3Qgc3VpdCB5b3VyIHJlcXVpcmVtZW50cy5cbiAqIEBwYXJhbSB0cmFja0NvbnN0cmFpbnRzIHRoZSBjb25zdHJhaW50cyB0byB1c2Ugd2hlbiByZXF1ZXN0aW5nIHRoZSBzdHJlYW0uXG4gKiBAcmV0dXJucyB0aGUgbmV3IGBNZWRpYVN0cmVhbWAgZnVsZmlsbGluZyB0aGUgZ2l2ZW4gY29uc3RyYWludHMuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBdWRpb1N0cmVhbSA9IGFzeW5jIChcbiAgdHJhY2tDb25zdHJhaW50cz86IE1lZGlhVHJhY2tDb25zdHJhaW50cyxcbikgPT4ge1xuICBjb25zdCBjb25zdHJhaW50czogTWVkaWFTdHJlYW1Db25zdHJhaW50cyA9IHtcbiAgICBhdWRpbzoge1xuICAgICAgLi4uYXVkaW9EZXZpY2VDb25zdHJhaW50cy5hdWRpbyxcbiAgICAgIC4uLnRyYWNrQ29uc3RyYWludHMsXG4gICAgfSxcbiAgfTtcblxuICB0cnkge1xuICAgIGF3YWl0IGdldEF1ZGlvQnJvd3NlclBlcm1pc3Npb24oKS5wcm9tcHQoe1xuICAgICAgdGhyb3dPbk5vdEFsbG93ZWQ6IHRydWUsXG4gICAgICBmb3JjZVByb21wdDogdHJ1ZSxcbiAgICB9KTtcbiAgICByZXR1cm4gZ2V0U3RyZWFtKGNvbnN0cmFpbnRzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGdldExvZ2dlcihbJ2RldmljZXMnXSkoJ2Vycm9yJywgJ0ZhaWxlZCB0byBnZXQgYXVkaW8gc3RyZWFtJywge1xuICAgICAgZXJyb3I6IGUsXG4gICAgICBjb25zdHJhaW50czogY29uc3RyYWludHMsXG4gICAgfSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgdmlkZW8gbWVkaWEgc3RyZWFtIHRoYXQgZnVsZmlsbHMgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICogSWYgbm8gY29uc3RyYWludHMgYXJlIHByb3ZpZGVkLCBpdCB1c2VzIHRoZSBicm93c2VyJ3MgZGVmYXVsdCBvbmVzLlxuICpcbiAqIEBhbmd1bGFyIEl0J3MgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBbYERldmljZU1hbmFnZXJTZXJ2aWNlYF0oLi9EZXZpY2VNYW5hZ2VyU2VydmljZS5tZCkgZm9yIGEgaGlnaGVyIGxldmVsIEFQSSwgdXNlIHRoaXMgbG93LWxldmVsIG1ldGhvZCBvbmx5IGlmIHRoZSBgRGV2aWNlTWFuYWdlclNlcnZpY2VgIGRvZXNuJ3Qgc3VpdCB5b3VyIHJlcXVpcmVtZW50cy5cbiAqIEBwYXJhbSB0cmFja0NvbnN0cmFpbnRzIHRoZSBjb25zdHJhaW50cyB0byB1c2Ugd2hlbiByZXF1ZXN0aW5nIHRoZSBzdHJlYW0uXG4gKiBAcmV0dXJucyBhIG5ldyBgTWVkaWFTdHJlYW1gIGZ1bGZpbGxpbmcgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICovXG5leHBvcnQgY29uc3QgZ2V0VmlkZW9TdHJlYW0gPSBhc3luYyAoXG4gIHRyYWNrQ29uc3RyYWludHM/OiBNZWRpYVRyYWNrQ29uc3RyYWludHMsXG4pID0+IHtcbiAgY29uc3QgY29uc3RyYWludHM6IE1lZGlhU3RyZWFtQ29uc3RyYWludHMgPSB7XG4gICAgdmlkZW86IHtcbiAgICAgIC4uLnZpZGVvRGV2aWNlQ29uc3RyYWludHMudmlkZW8sXG4gICAgICAuLi50cmFja0NvbnN0cmFpbnRzLFxuICAgIH0sXG4gIH07XG4gIHRyeSB7XG4gICAgYXdhaXQgZ2V0VmlkZW9Ccm93c2VyUGVybWlzc2lvbigpLnByb21wdCh7XG4gICAgICB0aHJvd09uTm90QWxsb3dlZDogdHJ1ZSxcbiAgICAgIGZvcmNlUHJvbXB0OiB0cnVlLFxuICAgIH0pO1xuICAgIHJldHVybiBnZXRTdHJlYW0oY29uc3RyYWludHMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZ2V0TG9nZ2VyKFsnZGV2aWNlcyddKSgnZXJyb3InLCAnRmFpbGVkIHRvIGdldCB2aWRlbyBzdHJlYW0nLCB7XG4gICAgICBlcnJvcjogZSxcbiAgICAgIGNvbnN0cmFpbnRzOiBjb25zdHJhaW50cyxcbiAgICB9KTtcbiAgICB0aHJvdyBlO1xuICB9XG59O1xuXG4vKipcbiAqIFByb21wdHMgdGhlIHVzZXIgZm9yIGEgcGVybWlzc2lvbiB0byBzaGFyZSBhIHNjcmVlbi5cbiAqIElmIHRoZSB1c2VyIGdyYW50cyB0aGUgcGVybWlzc2lvbiwgYSBzY3JlZW4gc2hhcmluZyBzdHJlYW0gaXMgcmV0dXJuZWQuIFRocm93cyBvdGhlcndpc2UuXG4gKlxuICogVGhlIGNhbGxlcnMgb2YgdGhpcyBBUEkgYXJlIHJlc3BvbnNpYmxlIHRvIGhhbmRsZSB0aGUgcG9zc2libGUgZXJyb3JzLlxuICpcbiAqIEBhbmd1bGFyIEl0J3MgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBbYERldmljZU1hbmFnZXJTZXJ2aWNlYF0oLi9EZXZpY2VNYW5hZ2VyU2VydmljZS5tZCkgZm9yIGEgaGlnaGVyIGxldmVsIEFQSSwgdXNlIHRoaXMgbG93LWxldmVsIG1ldGhvZCBvbmx5IGlmIHRoZSBgRGV2aWNlTWFuYWdlclNlcnZpY2VgIGRvZXNuJ3Qgc3VpdCB5b3VyIHJlcXVpcmVtZW50cy5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBhbnkgYWRkaXRpb25hbCBvcHRpb25zIHRvIHBhc3MgdG8gdGhlIFtgZ2V0RGlzcGxheU1lZGlhYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhRGV2aWNlcy9nZXREaXNwbGF5TWVkaWEpIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFNjcmVlblNoYXJlU3RyZWFtID0gYXN5bmMgKFxuICBvcHRpb25zPzogRGlzcGxheU1lZGlhU3RyZWFtT3B0aW9ucyxcbikgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7XG4gICAgICB2aWRlbzogdHJ1ZSxcbiAgICAgIGF1ZGlvOiB7XG4gICAgICAgIGNoYW5uZWxDb3VudDoge1xuICAgICAgICAgIGlkZWFsOiAyLFxuICAgICAgICB9LFxuICAgICAgICBlY2hvQ2FuY2VsbGF0aW9uOiBmYWxzZSxcbiAgICAgICAgYXV0b0dhaW5Db250cm9sOiBmYWxzZSxcbiAgICAgICAgbm9pc2VTdXBwcmVzc2lvbjogZmFsc2UsXG4gICAgICB9LFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIG5vdCBwcmVzZW50IGluIHR5cGVzIHlldFxuICAgICAgc3lzdGVtQXVkaW86ICdpbmNsdWRlJyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBnZXRMb2dnZXIoWydkZXZpY2VzJ10pKCdlcnJvcicsICdGYWlsZWQgdG8gZ2V0IHNjcmVlbiBzaGFyZSBzdHJlYW0nLCBlKTtcbiAgICB0aHJvdyBlO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGV2aWNlSWRzJCA9XG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gIHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICE9PSAndW5kZWZpbmVkJ1xuICAgID8gZ2V0RGV2aWNlQ2hhbmdlT2JzZXJ2ZXIoKS5waXBlKFxuICAgICAgICBzdGFydFdpdGgodW5kZWZpbmVkKSxcbiAgICAgICAgY29uY2F0TWFwKCgpID0+IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKSxcbiAgICAgICAgc2hhcmVSZXBsYXkoMSksXG4gICAgICApXG4gICAgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogRGVhY3RpdmF0ZXMgTWVkaWFTdHJlYW0gKHN0b3BzIGFuZCByZW1vdmVzIHRyYWNrcykgdG8gYmUgbGF0ZXIgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqXG4gKiBAcGFyYW0gc3RyZWFtIE1lZGlhU3RyZWFtXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbmV4cG9ydCBjb25zdCBkaXNwb3NlT2ZNZWRpYVN0cmVhbSA9IChzdHJlYW06IE1lZGlhU3RyZWFtKSA9PiB7XG4gIGlmICghc3RyZWFtLmFjdGl2ZSkgcmV0dXJuO1xuICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICB0cmFjay5zdG9wKCk7XG4gICAgc3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgfSk7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgcmVsZWFzZSgpIGlzIHByZXNlbnQgaW4gcmVhY3QtbmF0aXZlLXdlYnJ0YyBhbmQgbXVzdCBiZSBjYWxsZWQgdG8gZGlzcG9zZSB0aGUgc3RyZWFtXG4gIGlmICh0eXBlb2Ygc3RyZWFtLnJlbGVhc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgc3RyZWFtLnJlbGVhc2UoKTtcbiAgfVxufTtcbiIsImltcG9ydCB7IGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUsIHBhaXJ3aXNlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDYWxsIH0gZnJvbSAnLi4vQ2FsbCc7XG5pbXBvcnQgeyBDYWxsaW5nU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBjcmVhdGVTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9zdG9yZS9yeFV0aWxzJztcbmltcG9ydCB7IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IFRyYWNrVHlwZSB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBkZXZpY2VJZHMkIH0gZnJvbSAnLi9kZXZpY2VzJztcbmltcG9ydCB7XG4gIHNldHRsZWQsXG4gIHdpdGhDYW5jZWxsYXRpb24sXG4gIHdpdGhvdXRDb25jdXJyZW5jeSxcbn0gZnJvbSAnLi4vaGVscGVycy9jb25jdXJyZW5jeSc7XG5pbXBvcnQge1xuICBNZWRpYVN0cmVhbUZpbHRlcixcbiAgTWVkaWFTdHJlYW1GaWx0ZXJFbnRyeSxcbiAgTWVkaWFTdHJlYW1GaWx0ZXJSZWdpc3RyYXRpb25SZXN1bHQsXG59IGZyb20gJy4vZmlsdGVycyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlcjxcbiAgVCBleHRlbmRzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGU8Qz4sXG4gIEMgPSBNZWRpYVRyYWNrQ29uc3RyYWludHMsXG4+IHtcbiAgLyoqXG4gICAqIGlmIHRydWUsIHN0b3BzIHRoZSBtZWRpYSBzdHJlYW0gd2hlbiBjYWxsIGlzIGxlZnRcbiAgICovXG4gIHN0b3BPbkxlYXZlID0gdHJ1ZTtcbiAgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgcHJvdGVjdGVkIHN1YnNjcmlwdGlvbnM6IEZ1bmN0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBpc1RyYWNrU3RvcHBlZER1ZVRvVHJhY2tFbmQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBmaWx0ZXJzOiBNZWRpYVN0cmVhbUZpbHRlckVudHJ5W10gPSBbXTtcbiAgcHJpdmF0ZSBzdGF0dXNDaGFuZ2VDb25jdXJyZW5jeVRhZyA9IFN5bWJvbCgnc3RhdHVzQ2hhbmdlQ29uY3VycmVuY3lUYWcnKTtcbiAgcHJpdmF0ZSBmaWx0ZXJSZWdpc3RyYXRpb25Db25jdXJyZW5jeVRhZyA9IFN5bWJvbChcbiAgICAnZmlsdGVyUmVnaXN0cmF0aW9uQ29uY3VycmVuY3lUYWcnLFxuICApO1xuXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY2FsbDogQ2FsbCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RhdGU6IFQsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuICApIHtcbiAgICB0aGlzLmxvZ2dlciA9IGdldExvZ2dlcihbYCR7VHJhY2tUeXBlW3RyYWNrVHlwZV0udG9Mb3dlckNhc2UoKX0gbWFuYWdlcmBdKTtcbiAgICBpZiAoXG4gICAgICBkZXZpY2VJZHMkICYmXG4gICAgICAhaXNSZWFjdE5hdGl2ZSgpICYmXG4gICAgICAodGhpcy50cmFja1R5cGUgPT09IFRyYWNrVHlwZS5BVURJTyB8fCB0aGlzLnRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlZJREVPKVxuICAgICkge1xuICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0ZWRPclJlcGxhY2VkRGV2aWNlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgYXZhaWxhYmxlIGF1ZGlvL3ZpZGVvIGRldmljZXNcbiAgICpcbiAgICogTm90ZTogSXQgcHJvbXB0cyB0aGUgdXNlciBmb3IgYSBwZXJtaXNzaW9uIHRvIHVzZSBkZXZpY2VzIChpZiBub3QgYWxyZWFkeSBncmFudGVkKVxuICAgKlxuICAgKiBAcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgd2lsbCBiZSB1cGRhdGVkIGlmIGEgZGV2aWNlIGlzIGNvbm5lY3RlZCBvciBkaXNjb25uZWN0ZWRcbiAgICovXG4gIGxpc3REZXZpY2VzKCkge1xuICAgIHJldHVybiB0aGlzLmdldERldmljZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGB0cnVlYCB3aGVuIHRoaXMgZGV2aWNlIGlzIGluIGVuYWJsZWQgc3RhdGUuXG4gICAqL1xuICBnZXQgZW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zdGF0dXMgPT09ICdlbmFibGVkJztcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgc3RyZWFtLlxuICAgKi9cbiAgYXN5bmMgZW5hYmxlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLm9wdGltaXN0aWNTdGF0dXMgPT09ICdlbmFibGVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuc2V0UGVuZGluZ1N0YXR1cygnZW5hYmxlZCcpO1xuXG4gICAgYXdhaXQgd2l0aENhbmNlbGxhdGlvbih0aGlzLnN0YXR1c0NoYW5nZUNvbmN1cnJlbmN5VGFnLCBhc3luYyAoc2lnbmFsKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnVubXV0ZVN0cmVhbSgpO1xuICAgICAgICB0aGlzLnN0YXRlLnNldFN0YXR1cygnZW5hYmxlZCcpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKCFzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2V0UGVuZGluZ1N0YXR1cyh0aGlzLnN0YXRlLnN0YXR1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBvciBwYXVzZXMgdGhlIHN0cmVhbSBiYXNlZCBvbiBzdGF0ZS5kaXNhYmxlTW9kZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZVN0b3A9ZmFsc2VdIHdoZW4gdHJ1ZSwgc3RvcHMgdGhlIHRyYWNrcyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZS5kaXNhYmxlTW9kZVxuICAgKi9cbiAgYXN5bmMgZGlzYWJsZShmb3JjZVN0b3A6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuc3RhdGUucHJldlN0YXR1cyA9IHRoaXMuc3RhdGUuc3RhdHVzO1xuICAgIGlmICghZm9yY2VTdG9wICYmIHRoaXMuc3RhdGUub3B0aW1pc3RpY1N0YXR1cyA9PT0gJ2Rpc2FibGVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuc2V0UGVuZGluZ1N0YXR1cygnZGlzYWJsZWQnKTtcblxuICAgIGF3YWl0IHdpdGhDYW5jZWxsYXRpb24odGhpcy5zdGF0dXNDaGFuZ2VDb25jdXJyZW5jeVRhZywgYXN5bmMgKHNpZ25hbCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RvcFRyYWNrcyA9XG4gICAgICAgICAgZm9yY2VTdG9wIHx8IHRoaXMuc3RhdGUuZGlzYWJsZU1vZGUgPT09ICdzdG9wLXRyYWNrcyc7XG4gICAgICAgIGF3YWl0IHRoaXMubXV0ZVN0cmVhbShzdG9wVHJhY2tzKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXRTdGF0dXMoJ2Rpc2FibGVkJyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoIXNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZXRQZW5kaW5nU3RhdHVzKHRoaXMuc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVcbiAgICovXG4gIGFzeW5jIHN0YXR1c0NoYW5nZVNldHRsZWQoKSB7XG4gICAgYXdhaXQgc2V0dGxlZCh0aGlzLnN0YXR1c0NoYW5nZUNvbmN1cnJlbmN5VGFnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBzdGF0dXMgd2FzIHByZXZpb3VzbHkgZW5hYmxlZCwgaXQgd2lsbCByZS1lbmFibGUgdGhlIGRldmljZS5cbiAgICovXG4gIGFzeW5jIHJlc3VtZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLnByZXZTdGF0dXMgPT09ICdlbmFibGVkJyAmJlxuICAgICAgdGhpcy5zdGF0ZS5zdGF0dXMgPT09ICdkaXNhYmxlZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuZW5hYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBjdXJyZW50IGRldmljZSBzdGF0dXMgaXMgZGlzYWJsZWQsIGl0IHdpbGwgZW5hYmxlIHRoZSBkZXZpY2UsXG4gICAqIGVsc2UgaXQgd2lsbCBkaXNhYmxlIGl0LlxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLm9wdGltaXN0aWNTdGF0dXMgPT09ICdlbmFibGVkJykge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGlzYWJsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5lbmFibGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgZmlsdGVyIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBzdHJlYW0uXG4gICAqXG4gICAqIFRoZSByZWdpc3RlcmVkIGZpbHRlciB3aWxsIGdldCB0aGUgZXhpc3Rpbmcgc3RyZWFtLCBhbmQgaXQgc2hvdWxkIHJldHVyblxuICAgKiBhIG5ldyBzdHJlYW0gd2l0aCB0aGUgYXBwbGllZCBmaWx0ZXIuXG4gICAqXG4gICAqIEBwYXJhbSBmaWx0ZXIgdGhlIGZpbHRlciB0byByZWdpc3Rlci5cbiAgICogQHJldHVybnMgTWVkaWFTdHJlYW1GaWx0ZXJSZWdpc3RyYXRpb25SZXN1bHRcbiAgICovXG4gIHJlZ2lzdGVyRmlsdGVyKFxuICAgIGZpbHRlcjogTWVkaWFTdHJlYW1GaWx0ZXIsXG4gICk6IE1lZGlhU3RyZWFtRmlsdGVyUmVnaXN0cmF0aW9uUmVzdWx0IHtcbiAgICBjb25zdCBlbnRyeTogTWVkaWFTdHJlYW1GaWx0ZXJFbnRyeSA9IHtcbiAgICAgIHN0YXJ0OiBmaWx0ZXIsXG4gICAgICBzdG9wOiB1bmRlZmluZWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlZ2lzdGVyZWQgPSB3aXRob3V0Q29uY3VycmVuY3koXG4gICAgICB0aGlzLmZpbHRlclJlZ2lzdHJhdGlvbkNvbmN1cnJlbmN5VGFnLFxuICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmZpbHRlcnMucHVzaChlbnRyeSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTZXR0aW5nc1RvU3RyZWFtKCk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVnaXN0ZXJlZCxcbiAgICAgIHVucmVnaXN0ZXI6ICgpID0+XG4gICAgICAgIHdpdGhvdXRDb25jdXJyZW5jeSh0aGlzLmZpbHRlclJlZ2lzdHJhdGlvbkNvbmN1cnJlbmN5VGFnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgZW50cnkuc3RvcD8uKCk7XG4gICAgICAgICAgdGhpcy5maWx0ZXJzID0gdGhpcy5maWx0ZXJzLmZpbHRlcigoZikgPT4gZiAhPT0gZW50cnkpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTZXR0aW5nc1RvU3RyZWFtKCk7XG4gICAgICAgIH0pLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBzZXQgdGhlIGRlZmF1bHQgY29uc3RyYWludHMgZm9yIHRoZSBkZXZpY2UuXG4gICAqXG4gICAqIEBwYXJhbSBjb25zdHJhaW50cyB0aGUgY29uc3RyYWludHMgdG8gc2V0LlxuICAgKi9cbiAgc2V0RGVmYXVsdENvbnN0cmFpbnRzKGNvbnN0cmFpbnRzOiBDKSB7XG4gICAgdGhpcy5zdGF0ZS5zZXREZWZhdWx0Q29uc3RyYWludHMoY29uc3RyYWludHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYSBkZXZpY2UuXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlXG4gICAqIEBwYXJhbSBkZXZpY2VJZCB0aGUgZGV2aWNlIGlkIHRvIHNlbGVjdC5cbiAgICovXG4gIGFzeW5jIHNlbGVjdChkZXZpY2VJZDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUuIFBsZWFzZSB2aXNpdCBodHRwczovL2dldHN0cmVhbS5pby92aWRlby9kb2NzL3JlYWN0bmF0aXZlL2NvcmUvY2FtZXJhLWFuZC1taWNyb3Bob25lLyNzcGVha2VyLW1hbmFnZW1lbnQgZm9yIHJlZmVyZW5jZS4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRldmljZUlkID09PSB0aGlzLnN0YXRlLnNlbGVjdGVkRGV2aWNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuc2V0RGV2aWNlKGRldmljZUlkKTtcbiAgICBhd2FpdCB0aGlzLmFwcGx5U2V0dGluZ3NUb1N0cmVhbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3Bvc2VzIHRoZSBtYW5hZ2VyLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKHMpID0+IHMoKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGFwcGx5U2V0dGluZ3NUb1N0cmVhbSgpIHtcbiAgICBhd2FpdCB3aXRoQ2FuY2VsbGF0aW9uKHRoaXMuc3RhdHVzQ2hhbmdlQ29uY3VycmVuY3lUYWcsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5tdXRlU3RyZWFtKCk7XG4gICAgICAgIGF3YWl0IHRoaXMudW5tdXRlU3RyZWFtKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0RGV2aWNlcygpOiBPYnNlcnZhYmxlPE1lZGlhRGV2aWNlSW5mb1tdPjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0U3RyZWFtKGNvbnN0cmFpbnRzOiBDKTogUHJvbWlzZTxNZWRpYVN0cmVhbT47XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHB1Ymxpc2hTdHJlYW0oc3RyZWFtOiBNZWRpYVN0cmVhbSk6IFByb21pc2U8dm9pZD47XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IHN0b3BQdWJsaXNoU3RyZWFtKHN0b3BUcmFja3M6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+O1xuXG4gIHByb3RlY3RlZCBnZXRUcmFja3MoKTogTWVkaWFTdHJlYW1UcmFja1tdIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbT8uZ2V0VHJhY2tzKCkgPz8gW107XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgbXV0ZVN0cmVhbShzdG9wVHJhY2tzOiBib29sZWFuID0gdHJ1ZSkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbSkgcmV0dXJuO1xuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGAke3N0b3BUcmFja3MgPyAnU3RvcHBpbmcnIDogJ0Rpc2FibGluZyd9IHN0cmVhbWApO1xuICAgIGlmICh0aGlzLmNhbGwuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuSk9JTkVEKSB7XG4gICAgICBhd2FpdCB0aGlzLnN0b3BQdWJsaXNoU3RyZWFtKHN0b3BUcmFja3MpO1xuICAgIH1cbiAgICB0aGlzLm11dGVMb2NhbFN0cmVhbShzdG9wVHJhY2tzKTtcbiAgICBjb25zdCBhbGxFbmRlZCA9IHRoaXMuZ2V0VHJhY2tzKCkuZXZlcnkoKHQpID0+IHQucmVhZHlTdGF0ZSA9PT0gJ2VuZGVkJyk7XG4gICAgaWYgKGFsbEVuZGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3RhdGUubWVkaWFTdHJlYW0gJiZcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciByZWxlYXNlKCkgaXMgcHJlc2VudCBpbiByZWFjdC1uYXRpdmUtd2VicnRjXG4gICAgICAgIHR5cGVvZiB0aGlzLnN0YXRlLm1lZGlhU3RyZWFtLnJlbGVhc2UgPT09ICdmdW5jdGlvbidcbiAgICAgICkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGNhbGxlZCB0byBkaXNwb3NlIHRoZSBzdHJlYW0gaW4gUk5cbiAgICAgICAgdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbS5yZWxlYXNlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXRlLnNldE1lZGlhU3RyZWFtKHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgIHRoaXMuZmlsdGVycy5mb3JFYWNoKChlbnRyeSkgPT4gZW50cnkuc3RvcD8uKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbXV0ZVRyYWNrcygpIHtcbiAgICB0aGlzLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICBpZiAodHJhY2suZW5hYmxlZCkgdHJhY2suZW5hYmxlZCA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1bm11dGVUcmFja3MoKSB7XG4gICAgdGhpcy5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgaWYgKCF0cmFjay5lbmFibGVkKSB0cmFjay5lbmFibGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RvcFRyYWNrcygpIHtcbiAgICB0aGlzLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICBpZiAodHJhY2sucmVhZHlTdGF0ZSA9PT0gJ2xpdmUnKSB0cmFjay5zdG9wKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG11dGVMb2NhbFN0cmVhbShzdG9wVHJhY2tzOiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLm1lZGlhU3RyZWFtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzdG9wVHJhY2tzKSB7XG4gICAgICB0aGlzLnN0b3BUcmFja3MoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tdXRlVHJhY2tzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIHVubXV0ZVN0cmVhbSgpIHtcbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnU3RhcnRpbmcgc3RyZWFtJyk7XG4gICAgbGV0IHN0cmVhbTogTWVkaWFTdHJlYW07XG4gICAgbGV0IHJvb3RTdHJlYW06IFByb21pc2U8TWVkaWFTdHJlYW0+IHwgdW5kZWZpbmVkO1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUubWVkaWFTdHJlYW0gJiZcbiAgICAgIHRoaXMuZ2V0VHJhY2tzKCkuZXZlcnkoKHQpID0+IHQucmVhZHlTdGF0ZSA9PT0gJ2xpdmUnKVxuICAgICkge1xuICAgICAgc3RyZWFtID0gdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbTtcbiAgICAgIHRoaXMudW5tdXRlVHJhY2tzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRDb25zdHJhaW50cyA9IHRoaXMuc3RhdGUuZGVmYXVsdENvbnN0cmFpbnRzO1xuICAgICAgY29uc3QgY29uc3RyYWludHM6IE1lZGlhVHJhY2tDb25zdHJhaW50cyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdENvbnN0cmFpbnRzLFxuICAgICAgICBkZXZpY2VJZDogdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSxcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2hhaW5zIHR3byBtZWRpYSBzdHJlYW1zIHRvZ2V0aGVyLlxuICAgICAgICpcbiAgICAgICAqIEluIG91ciBjYXNlLCBmaWx0ZXJzIE1lZGlhU3RyZWFtcyBhcmUgZGVyaXZlZCBmcm9tIHRoZWlyIHBhcmVudCBNZWRpYVN0cmVhbS5cbiAgICAgICAqIEhvd2V2ZXIsIG9uY2UgYSBjaGlsZCBmaWx0ZXIncyB0cmFjayBpcyBzdG9wcGVkLFxuICAgICAgICogdGhlIHRyYWNrcyBvZiB0aGUgcGFyZW50IE1lZGlhU3RyZWFtIGFyZW4ndCBhdXRvbWF0aWNhbGx5IHN0b3BwZWQuXG4gICAgICAgKiBUaGlzIGxlYWRzIHRvIGEgc2l0dWF0aW9uIHdoZXJlIHRoZSBjYW1lcmEgaW5kaWNhdG9yIGxpZ2h0IGlzIHN0aWxsIG9uXG4gICAgICAgKiBldmVuIHRob3VnaCB0aGUgdXNlciBzdG9wcGVkIHB1Ymxpc2hpbmcgdmlkZW8uXG4gICAgICAgKlxuICAgICAgICogVGhpcyBmdW5jdGlvbiB3b3JrcyBhcm91bmQgdGhpcyBpc3N1ZSBieSBzdG9wcGluZyB0aGUgcGFyZW50IE1lZGlhU3RyZWFtJ3MgdHJhY2tzXG4gICAgICAgKiBhcyB3ZWxsIG9uY2UgdGhlIGNoaWxkIGZpbHRlcidzIHRyYWNrcyBhcmUgc3RvcHBlZC5cbiAgICAgICAqXG4gICAgICAgKiBJdCB3b3JrcyBieSBwYXRjaGluZyB0aGUgc3RvcCgpIG1ldGhvZCBvZiB0aGUgY2hpbGQgZmlsdGVyJ3MgdHJhY2tzIHRvIGFsc28gc3RvcFxuICAgICAgICogdGhlIHBhcmVudCBNZWRpYVN0cmVhbSdzIHRyYWNrcyBvZiB0aGUgc2FtZSB0eXBlLiBIZXJlIHdlIGFzc3VtZSB0aGF0XG4gICAgICAgKiB0aGUgcGFyZW50IE1lZGlhU3RyZWFtIGhhcyBvbmx5IG9uZSB0cmFjayBvZiBlYWNoIHR5cGUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHBhcmVudFN0cmVhbSB0aGUgcGFyZW50IE1lZGlhU3RyZWFtLiBPbWl0IGZvciB0aGUgcm9vdCBzdHJlYW0uXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IGNoYWluV2l0aCA9XG4gICAgICAgIChwYXJlbnRTdHJlYW0/OiBQcm9taXNlPE1lZGlhU3RyZWFtPikgPT5cbiAgICAgICAgYXN5bmMgKGZpbHRlclN0cmVhbTogTWVkaWFTdHJlYW0pOiBQcm9taXNlPE1lZGlhU3RyZWFtPiA9PiB7XG4gICAgICAgICAgaWYgKCFwYXJlbnRTdHJlYW0pIHJldHVybiBmaWx0ZXJTdHJlYW07XG4gICAgICAgICAgLy8gVE9ETyBPTDogdGFrZSBjYXJlIG9mIHRyYWNrLmVuYWJsZWQgcHJvcGVydHkgYXMgd2VsbFxuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGF3YWl0IHBhcmVudFN0cmVhbTtcbiAgICAgICAgICBmaWx0ZXJTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU3RvcCA9IHRyYWNrLnN0b3A7XG4gICAgICAgICAgICB0cmFjay5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgICAgICAgb3JpZ2luYWxTdG9wLmNhbGwodHJhY2spO1xuICAgICAgICAgICAgICBwYXJlbnQuZ2V0VHJhY2tzKCkuZm9yRWFjaCgocGFyZW50VHJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhY2sua2luZCA9PT0gdHJhY2sua2luZCkge1xuICAgICAgICAgICAgICAgICAgcGFyZW50VHJhY2suc3RvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcGFyZW50LmdldFRyYWNrcygpLmZvckVhY2goKHBhcmVudFRyYWNrKSA9PiB7XG4gICAgICAgICAgICAvLyBXaGVuIHRoZSBwYXJlbnQgc3RyZWFtIGFicnVwdGx5IGVuZHMsIHdlIHByb3BhZ2F0ZSB0aGUgZXZlbnRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBmaWx0ZXIgc3RyZWFtLlxuICAgICAgICAgICAgLy8gVGhpcyB1c3VhbGx5IGhhcHBlbnMgd2hlbiB0aGUgY2FtZXJhL21pY3JvcGhvbmUgcGVybWlzc2lvbnNcbiAgICAgICAgICAgIC8vIGFyZSByZXZva2VkIG9yIHdoZW4gdGhlIGRldmljZSBpcyBkaXNjb25uZWN0ZWQuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVQYXJlbnRUcmFja0VuZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICBmaWx0ZXJTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhY2sua2luZCAhPT0gdHJhY2sua2luZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB0cmFjay5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZW5kZWQnKSk7IC8vIHByb3BhZ2F0ZSB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcGFyZW50VHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVQYXJlbnRUcmFja0VuZGVkKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgICAgcGFyZW50VHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVQYXJlbnRUcmFja0VuZGVkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIGZpbHRlclN0cmVhbTtcbiAgICAgICAgfTtcblxuICAgICAgLy8gdGhlIHJvb3RTdHJlYW0gcmVwcmVzZW50cyB0aGUgc3RyZWFtIGNvbWluZyBmcm9tIHRoZSBhY3R1YWwgZGV2aWNlXG4gICAgICAvLyBlLmcuIGNhbWVyYSBvciBtaWNyb3Bob25lIHN0cmVhbVxuICAgICAgcm9vdFN0cmVhbSA9IHRoaXMuZ2V0U3RyZWFtKGNvbnN0cmFpbnRzIGFzIEMpO1xuICAgICAgLy8gd2UgcHVibGlzaCB0aGUgbGFzdCBNZWRpYVN0cmVhbSBvZiB0aGUgY2hhaW5cbiAgICAgIHN0cmVhbSA9IGF3YWl0IHRoaXMuZmlsdGVycy5yZWR1Y2UoXG4gICAgICAgIChwYXJlbnQsIGVudHJ5KSA9PlxuICAgICAgICAgIHBhcmVudFxuICAgICAgICAgICAgLnRoZW4oKGlucHV0U3RyZWFtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgc3RvcCwgb3V0cHV0IH0gPSBlbnRyeS5zdGFydChpbnB1dFN0cmVhbSk7XG4gICAgICAgICAgICAgIGVudHJ5LnN0b3AgPSBzdG9wO1xuICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGNoYWluV2l0aChwYXJlbnQpLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgICAgICdGaWx0ZXIgZmFpbGVkIHRvIHN0YXJ0IGFuZCB3aWxsIGJlIGlnbm9yZWQnLFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIHJvb3RTdHJlYW0sXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5jYWxsLnN0YXRlLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCkge1xuICAgICAgYXdhaXQgdGhpcy5wdWJsaXNoU3RyZWFtKHN0cmVhbSk7XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlLm1lZGlhU3RyZWFtICE9PSBzdHJlYW0pIHtcbiAgICAgIHRoaXMuc3RhdGUuc2V0TWVkaWFTdHJlYW0oc3RyZWFtLCBhd2FpdCByb290U3RyZWFtKTtcbiAgICAgIGNvbnN0IGhhbmRsZVRyYWNrRW5kZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuc3RhdHVzQ2hhbmdlU2V0dGxlZCgpO1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgdGhpcy5pc1RyYWNrU3RvcHBlZER1ZVRvVHJhY2tFbmQgPSB0cnVlO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1RyYWNrU3RvcHBlZER1ZVRvVHJhY2tFbmQgPSBmYWxzZTtcbiAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHRoaXMuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVUcmFja0VuZGVkKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goKCkgPT5cbiAgICAgICAgICB0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIGhhbmRsZVRyYWNrRW5kZWQpLFxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgbWVkaWFEZXZpY2VLaW5kKCkge1xuICAgIGlmICh0aGlzLnRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLkFVRElPKSB7XG4gICAgICByZXR1cm4gJ2F1ZGlvaW5wdXQnO1xuICAgIH1cbiAgICBpZiAodGhpcy50cmFja1R5cGUgPT09IFRyYWNrVHlwZS5WSURFTykge1xuICAgICAgcmV0dXJuICd2aWRlb2lucHV0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVEaXNjb25uZWN0ZWRPclJlcGxhY2VkRGV2aWNlcygpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbihcbiAgICAgICAgY29tYmluZUxhdGVzdChbXG4gICAgICAgICAgZGV2aWNlSWRzJCEucGlwZShwYWlyd2lzZSgpKSxcbiAgICAgICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkRGV2aWNlJCxcbiAgICAgICAgXSksXG4gICAgICAgIGFzeW5jIChbW3ByZXZEZXZpY2VzLCBjdXJyZW50RGV2aWNlc10sIGRldmljZUlkXSkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIWRldmljZUlkKSByZXR1cm47XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0YXR1c0NoYW5nZVNldHRsZWQoKTtcblxuICAgICAgICAgICAgbGV0IGlzRGV2aWNlRGlzY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgaXNEZXZpY2VSZXBsYWNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERldmljZSA9IHRoaXMuZmluZERldmljZUluTGlzdChcbiAgICAgICAgICAgICAgY3VycmVudERldmljZXMsXG4gICAgICAgICAgICAgIGRldmljZUlkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZEZXZpY2UgPSB0aGlzLmZpbmREZXZpY2VJbkxpc3QocHJldkRldmljZXMsIGRldmljZUlkKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudERldmljZSAmJiBwcmV2RGV2aWNlKSB7XG4gICAgICAgICAgICAgIGlzRGV2aWNlRGlzY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIGN1cnJlbnREZXZpY2UgJiZcbiAgICAgICAgICAgICAgcHJldkRldmljZSAmJlxuICAgICAgICAgICAgICBjdXJyZW50RGV2aWNlLmRldmljZUlkID09PSBwcmV2RGV2aWNlLmRldmljZUlkICYmXG4gICAgICAgICAgICAgIGN1cnJlbnREZXZpY2UuZ3JvdXBJZCAhPT0gcHJldkRldmljZS5ncm91cElkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaXNEZXZpY2VSZXBsYWNlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0RldmljZURpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3QodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RldmljZVJlcGxhY2VkKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmlzVHJhY2tTdG9wcGVkRHVlVG9UcmFja0VuZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc3RhdHVzID09PSAnZGlzYWJsZWQnXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RyYWNrU3RvcHBlZER1ZVRvVHJhY2tFbmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcGx5U2V0dGluZ3NUb1N0cmVhbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgICAnVW5leHBlY3RlZCBlcnJvciB3aGlsZSBoYW5kbGluZyBkaXNjb25uZWN0ZWQgb3IgcmVwbGFjZWQgZGV2aWNlJyxcbiAgICAgICAgICAgICAgZXJyLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGZpbmREZXZpY2VJbkxpc3QoZGV2aWNlczogTWVkaWFEZXZpY2VJbmZvW10sIGRldmljZUlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZGV2aWNlcy5maW5kKFxuICAgICAgKGQpID0+IGQuZGV2aWNlSWQgPT09IGRldmljZUlkICYmIGQua2luZCA9PT0gdGhpcy5tZWRpYURldmljZUtpbmQsXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQmVoYXZpb3JTdWJqZWN0LFxuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCxcbiAgT2JzZXJ2YWJsZSxcbiAgb2YsXG4gIHNoYXJlUmVwbGF5LFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFJ4VXRpbHMgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBCcm93c2VyUGVybWlzc2lvbiB9IGZyb20gJy4vQnJvd3NlclBlcm1pc3Npb24nO1xuXG5leHBvcnQgdHlwZSBJbnB1dERldmljZVN0YXR1cyA9ICdlbmFibGVkJyB8ICdkaXNhYmxlZCcgfCB1bmRlZmluZWQ7XG5leHBvcnQgdHlwZSBUcmFja0Rpc2FibGVNb2RlID0gJ3N0b3AtdHJhY2tzJyB8ICdkaXNhYmxlLXRyYWNrcyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlPEMgPSBNZWRpYVRyYWNrQ29uc3RyYWludHM+IHtcbiAgcHJvdGVjdGVkIHN0YXR1c1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PElucHV0RGV2aWNlU3RhdHVzPih1bmRlZmluZWQpO1xuICBwcm90ZWN0ZWQgb3B0aW1pc3RpY1N0YXR1c1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PElucHV0RGV2aWNlU3RhdHVzPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByb3RlY3RlZCBtZWRpYVN0cmVhbVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByb3RlY3RlZCBzZWxlY3RlZERldmljZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZyB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuICBwcm90ZWN0ZWQgZGVmYXVsdENvbnN0cmFpbnRzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8QyB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByZXZTdGF0dXM6IElucHV0RGV2aWNlU3RhdHVzO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnQgbWVkaWEgc3RyZWFtLCBvciBgdW5kZWZpbmVkYCBpZiB0aGUgZGV2aWNlIGlzIGN1cnJlbnRseSBkaXNhYmxlZC5cbiAgICpcbiAgICovXG4gIG1lZGlhU3RyZWFtJCA9IHRoaXMubWVkaWFTdHJlYW1TdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkZXZpY2VcbiAgICovXG4gIHNlbGVjdGVkRGV2aWNlJCA9IHRoaXMuc2VsZWN0ZWREZXZpY2VTdWJqZWN0XG4gICAgLmFzT2JzZXJ2YWJsZSgpXG4gICAgLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgZGV2aWNlIHN0YXR1c1xuICAgKi9cbiAgc3RhdHVzJCA9IHRoaXMuc3RhdHVzU3ViamVjdC5hc09ic2VydmFibGUoKS5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoZSByZWZsZWN0cyB0aGUgcmVxdWVzdGVkIGRldmljZSBzdGF0dXMuIFVzZWZ1bCBmb3Igb3B0aW1pc3RpYyBVSXNcbiAgICovXG4gIG9wdGltaXN0aWNTdGF0dXMkID0gdGhpcy5vcHRpbWlzdGljU3RhdHVzU3ViamVjdFxuICAgIC5hc09ic2VydmFibGUoKVxuICAgIC5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBjb25zdHJhaW50cyBmb3IgdGhlIGRldmljZS5cbiAgICovXG4gIGRlZmF1bHRDb25zdHJhaW50cyQgPSB0aGlzLmRlZmF1bHRDb25zdHJhaW50c1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIEFuIG9ic2VydmFibGUgdGhhdCB3aWxsIGVtaXQgYHRydWVgIGlmIGJyb3dzZXIvc3lzdGVtIHBlcm1pc3Npb25cbiAgICogaXMgZ3JhbnRlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqL1xuICBoYXNCcm93c2VyUGVybWlzc2lvbiQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgbmV3IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSBkaXNhYmxlTW9kZSB0aGUgZGlzYWJsZSBtb2RlIHRvIHVzZS5cbiAgICogQHBhcmFtIHBlcm1pc3Npb24gdGhlIEJyb3dzZXJQZXJtaXNzaW9uIHRvIHVzZSBmb3IgcXVlcnlpbmcuXG4gICAqIGB1bmRlZmluZWRgIG1lYW5zIG5vIHBlcm1pc3Npb24gaXMgcmVxdWlyZWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGlzYWJsZU1vZGU6IFRyYWNrRGlzYWJsZU1vZGUgPSAnc3RvcC10cmFja3MnLFxuICAgIHBlcm1pc3Npb24/OiBCcm93c2VyUGVybWlzc2lvbixcbiAgKSB7XG4gICAgdGhpcy5oYXNCcm93c2VyUGVybWlzc2lvbiQgPSBwZXJtaXNzaW9uXG4gICAgICA/IHBlcm1pc3Npb24uYXNPYnNlcnZhYmxlKCkucGlwZShzaGFyZVJlcGxheSgxKSlcbiAgICAgIDogb2YodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRldmljZSBzdGF0dXNcbiAgICovXG4gIGdldCBzdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc3RhdHVzJCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlcXVlc3RlZCBkZXZpY2Ugc3RhdHVzLiBVc2VmdWwgZm9yIG9wdGltaXN0aWMgVUlzXG4gICAqL1xuICBnZXQgb3B0aW1pc3RpY1N0YXR1cygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5vcHRpbWlzdGljU3RhdHVzJCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkZXZpY2VcbiAgICovXG4gIGdldCBzZWxlY3RlZERldmljZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5zZWxlY3RlZERldmljZSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IG1lZGlhIHN0cmVhbSwgb3IgYHVuZGVmaW5lZGAgaWYgdGhlIGRldmljZSBpcyBjdXJyZW50bHkgZGlzYWJsZWQuXG4gICAqL1xuICBnZXQgbWVkaWFTdHJlYW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMubWVkaWFTdHJlYW0kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGFuIG9ic2VydmFibGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgb2JzZXJ2YWJsZSBoYXNcbiAgICogbm90IGVtaXR0ZWQgYSB2YWx1ZSB5ZXQuXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZhYmxlJCB0aGUgb2JzZXJ2YWJsZSB0byBnZXQgdGhlIHZhbHVlIGZyb20uXG4gICAqL1xuICBnZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZTtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBzdGF0dXNcbiAgICovXG4gIHNldFN0YXR1cyhzdGF0dXM6IElucHV0RGV2aWNlU3RhdHVzKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zdGF0dXNTdWJqZWN0LCBzdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gcGVuZGluZ1N0YXR1c1xuICAgKi9cbiAgc2V0UGVuZGluZ1N0YXR1cyhwZW5kaW5nU3RhdHVzOiBJbnB1dERldmljZVN0YXR1cykge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMub3B0aW1pc3RpY1N0YXR1c1N1YmplY3QsIHBlbmRpbmdTdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGBtZWRpYVN0cmVhbWAgc3RhdGUgdmFyaWFibGUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gc3RyZWFtIHRoZSBzdHJlYW0gdG8gc2V0LlxuICAgKiBAcGFyYW0gcm9vdFN0cmVhbSB0aGUgcm9vdCBzdHJlYW0sIGFwcGxpY2FibGUgd2hlbiBmaWx0ZXJzIGFyZSB1c2VkXG4gICAqIGFzIHRoaXMgaXMgdGhlIHN0cmVhbSB0aGF0IGhvbGRzIHRoZSBhY3R1YWwgZGV2aWNlSWQgaW5mb3JtYXRpb24uXG4gICAqL1xuICBzZXRNZWRpYVN0cmVhbShcbiAgICBzdHJlYW06IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkLFxuICAgIHJvb3RTdHJlYW06IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkLFxuICApIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLm1lZGlhU3RyZWFtU3ViamVjdCwgc3RyZWFtKTtcbiAgICBpZiAocm9vdFN0cmVhbSkge1xuICAgICAgdGhpcy5zZXREZXZpY2UodGhpcy5nZXREZXZpY2VJZEZyb21TdHJlYW0ocm9vdFN0cmVhbSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIGRldmljZUlkIHRoZSBkZXZpY2UgaWQgdG8gc2V0LlxuICAgKi9cbiAgc2V0RGV2aWNlKGRldmljZUlkOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlbGVjdGVkRGV2aWNlU3ViamVjdCwgZGV2aWNlSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlZmF1bHQgY29uc3RyYWludHMgZm9yIHRoZSBkZXZpY2UuXG4gICAqL1xuICBnZXQgZGVmYXVsdENvbnN0cmFpbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmRlZmF1bHRDb25zdHJhaW50cyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGRlZmF1bHQgY29uc3RyYWludHMgZm9yIHRoZSBkZXZpY2UuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gY29uc3RyYWludHMgdGhlIGNvbnN0cmFpbnRzIHRvIHNldC5cbiAgICovXG4gIHNldERlZmF1bHRDb25zdHJhaW50cyhjb25zdHJhaW50czogQyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuZGVmYXVsdENvbnN0cmFpbnRzU3ViamVjdCwgY29uc3RyYWludHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBTdWJqZWN0LlxuICAgKiBBbiBgdXBkYXRlYCBjYW4gZWl0aGVyIGJlIGEgbmV3IHZhbHVlIG9yIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXNcbiAgICogdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHJldHVybnMgYSBuZXcgdmFsdWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gc3ViamVjdCB0aGUgc3ViamVjdCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAgICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICovXG4gIHByb3RlY3RlZCBzZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLnNldEN1cnJlbnRWYWx1ZTtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0RGV2aWNlSWRGcm9tU3RyZWFtKFxuICAgIHN0cmVhbTogTWVkaWFTdHJlYW0sXG4gICk6IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cbiIsImltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgZGlzdGluY3RVbnRpbENoYW5nZWQsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7IGdldFZpZGVvQnJvd3NlclBlcm1pc3Npb24gfSBmcm9tICcuL2RldmljZXMnO1xuXG5leHBvcnQgdHlwZSBDYW1lcmFEaXJlY3Rpb24gPSAnZnJvbnQnIHwgJ2JhY2snIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgY2xhc3MgQ2FtZXJhTWFuYWdlclN0YXRlIGV4dGVuZHMgSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSB7XG4gIHByaXZhdGUgZGlyZWN0aW9uU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Q2FtZXJhRGlyZWN0aW9uPih1bmRlZmluZWQpO1xuXG4gIC8qKlxuICAgKiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIHByZWZlcnJlZCBjYW1lcmEgZGlyZWN0aW9uXG4gICAqIGZyb250IC0gbWVhbnMgdGhlIGNhbWVyYSBmYWNpbmcgdGhlIHVzZXJcbiAgICogYmFjayAtIG1lYW5zIHRoZSBjYW1lcmEgZmFjaW5nIHRoZSBlbnZpcm9ubWVudFxuICAgKi9cbiAgZGlyZWN0aW9uJDogT2JzZXJ2YWJsZTxDYW1lcmFEaXJlY3Rpb24+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdG9wLXRyYWNrcycsIGdldFZpZGVvQnJvd3NlclBlcm1pc3Npb24oKSk7XG4gICAgdGhpcy5kaXJlY3Rpb24kID0gdGhpcy5kaXJlY3Rpb25TdWJqZWN0XG4gICAgICAuYXNPYnNlcnZhYmxlKClcbiAgICAgIC5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwcmVmZXJyZWQgY2FtZXJhIGRpcmVjdGlvblxuICAgKiBmcm9udCAtIG1lYW5zIHRoZSBjYW1lcmEgZmFjaW5nIHRoZSB1c2VyXG4gICAqIGJhY2sgLSBtZWFucyB0aGUgY2FtZXJhIGZhY2luZyB0aGUgZW52aXJvbm1lbnRcbiAgICovXG4gIGdldCBkaXJlY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuZGlyZWN0aW9uJCk7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXREaXJlY3Rpb24oZGlyZWN0aW9uOiBDYW1lcmFEaXJlY3Rpb24pIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmRpcmVjdGlvblN1YmplY3QsIGRpcmVjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRNZWRpYVN0cmVhbShcbiAgICBzdHJlYW06IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkLFxuICAgIHJvb3RTdHJlYW06IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkLFxuICApOiB2b2lkIHtcbiAgICBzdXBlci5zZXRNZWRpYVN0cmVhbShzdHJlYW0sIHJvb3RTdHJlYW0pO1xuICAgIGlmIChzdHJlYW0pIHtcbiAgICAgIC8vIFJOIGdldFNldHRpbmdzKCkgZG9lc24ndCByZXR1cm4gZmFjaW5nTW9kZSwgc28gd2UgZG9uJ3QgdmVyaWZ5IGNhbWVyYSBkaXJlY3Rpb25cbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGlzUmVhY3ROYXRpdmUoKVxuICAgICAgICA/IHRoaXMuZGlyZWN0aW9uXG4gICAgICAgIDogc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0/LmdldFNldHRpbmdzKCkuZmFjaW5nTW9kZSA9PT0gJ2Vudmlyb25tZW50J1xuICAgICAgICAgID8gJ2JhY2snXG4gICAgICAgICAgOiAnZnJvbnQnO1xuICAgICAgdGhpcy5zZXREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RGV2aWNlSWRGcm9tU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IFt0cmFja10gPSBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICByZXR1cm4gdHJhY2s/LmdldFNldHRpbmdzKCkuZGV2aWNlSWQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IENhbWVyYURpcmVjdGlvbiwgQ2FtZXJhTWFuYWdlclN0YXRlIH0gZnJvbSAnLi9DYW1lcmFNYW5hZ2VyU3RhdGUnO1xuaW1wb3J0IHsgSW5wdXRNZWRpYURldmljZU1hbmFnZXIgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyJztcbmltcG9ydCB7IGdldFZpZGVvRGV2aWNlcywgZ2V0VmlkZW9TdHJlYW0gfSBmcm9tICcuL2RldmljZXMnO1xuaW1wb3J0IHsgVHJhY2tUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IFByZWZlcnJlZENvZGVjLCBQdWJsaXNoT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIENhbWVyYU1hbmFnZXIgZXh0ZW5kcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlcjxDYW1lcmFNYW5hZ2VyU3RhdGU+IHtcbiAgcHJpdmF0ZSB0YXJnZXRSZXNvbHV0aW9uID0ge1xuICAgIHdpZHRoOiAxMjgwLFxuICAgIGhlaWdodDogNzIwLFxuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgb3B0aW9ucyB0byB1c2Ugd2hlbiBwdWJsaXNoaW5nIHRoZSB2aWRlbyBzdHJlYW0uXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHVibGlzaE9wdGlvbnM6IFB1Ymxpc2hPcHRpb25zIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENhbWVyYU1hbmFnZXIuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsIHRoZSBjYWxsIGluc3RhbmNlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoY2FsbDogQ2FsbCkge1xuICAgIHN1cGVyKGNhbGwsIG5ldyBDYW1lcmFNYW5hZ2VyU3RhdGUoKSwgVHJhY2tUeXBlLlZJREVPKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgdGhlIGNhbWVyYSBkaXJlY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBkaXJlY3Rpb24gdGhlIGRpcmVjdGlvbiBvZiB0aGUgY2FtZXJhIHRvIHNlbGVjdC5cbiAgICovXG4gIGFzeW5jIHNlbGVjdERpcmVjdGlvbihkaXJlY3Rpb246IEV4Y2x1ZGU8Q2FtZXJhRGlyZWN0aW9uLCB1bmRlZmluZWQ+KSB7XG4gICAgdGhpcy5zdGF0ZS5zZXREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAvLyBQcm92aWRpbmcgYm90aCBkZXZpY2UgaWQgYW5kIGRpcmVjdGlvbiBkb2Vzbid0IHdvcmssIHNvIHdlIGRlc2VsZWN0IHRoZSBkZXZpY2VcbiAgICB0aGlzLnN0YXRlLnNldERldmljZSh1bmRlZmluZWQpO1xuICAgIGF3YWl0IHRoaXMuYXBwbHlTZXR0aW5nc1RvU3RyZWFtKCk7XG4gIH1cblxuICAvKipcbiAgICogRmxpcHMgdGhlIGNhbWVyYSBkaXJlY3Rpb246IGlmIGl0J3MgZnJvbnQgaXQgd2lsbCBjaGFuZ2UgdG8gYmFjaywgaWYgaXQncyBiYWNrLCBpdCB3aWxsIGNoYW5nZSB0byBmcm9udC5cbiAgICpcbiAgICogTm90ZTogaWYgdGhlcmUgaXMgbm8gYXZhaWxhYmxlIGNhbWVyYSB3aXRoIHRoZSBkZXNpcmVkIGRpcmVjdGlvbiwgdGhpcyBtZXRob2Qgd2lsbCBkbyBub3RoaW5nLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgZmxpcCgpIHtcbiAgICBjb25zdCBuZXdEaXJlY3Rpb24gPSB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9PT0gJ2Zyb250JyA/ICdiYWNrJyA6ICdmcm9udCc7XG4gICAgYXdhaXQgdGhpcy5zZWxlY3REaXJlY3Rpb24obmV3RGlyZWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIHNlbGVjdFRhcmdldFJlc29sdXRpb24ocmVzb2x1dGlvbjogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9KSB7XG4gICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uLmhlaWdodCA9IHJlc29sdXRpb24uaGVpZ2h0O1xuICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbi53aWR0aCA9IHJlc29sdXRpb24ud2lkdGg7XG4gICAgaWYgKHRoaXMuc3RhdGUub3B0aW1pc3RpY1N0YXR1cyA9PT0gJ2VuYWJsZWQnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnN0YXR1c0NoYW5nZVNldHRsZWQoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGNvdWxkbid0IGVuYWJsZSBkZXZpY2UsIHRhcmdldCByZXNvbHV0aW9uIHdpbGwgYmUgYXBwbGllZCB0aGUgbmV4dCB0aW1lIHVzZXIgYXR0ZW1wdHMgdG8gc3RhcnQgdGhlIGRldmljZVxuICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsICdjb3VsZCBub3QgYXBwbHkgdGFyZ2V0IHJlc29sdXRpb24nLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zdGF0ZVxuICAgICAgICAubWVkaWFTdHJlYW0hLmdldFZpZGVvVHJhY2tzKClbMF1cbiAgICAgICAgPy5nZXRTZXR0aW5ncygpO1xuICAgICAgaWYgKFxuICAgICAgICB3aWR0aCAhPT0gdGhpcy50YXJnZXRSZXNvbHV0aW9uLndpZHRoIHx8XG4gICAgICAgIGhlaWdodCAhPT0gdGhpcy50YXJnZXRSZXNvbHV0aW9uLmhlaWdodFxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTZXR0aW5nc1RvU3RyZWFtKCk7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgYCR7d2lkdGh9eCR7aGVpZ2h0fSB0YXJnZXQgcmVzb2x1dGlvbiBhcHBsaWVkIHRvIG1lZGlhIHN0cmVhbWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHByZWZlcnJlZCBjb2RlYyBmb3IgZW5jb2RpbmcgdGhlIHZpZGVvLlxuICAgKlxuICAgKiBAaW50ZXJuYWwgaW50ZXJuYWwgdXNlIG9ubHksIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJLlxuICAgKiBAcGFyYW0gY29kZWMgdGhlIGNvZGVjIHRvIHVzZSBmb3IgZW5jb2RpbmcgdGhlIHZpZGVvLlxuICAgKi9cbiAgc2V0UHJlZmVycmVkQ29kZWMoY29kZWM6IFByZWZlcnJlZENvZGVjIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy51cGRhdGVQdWJsaXNoT3B0aW9ucyh7IHByZWZlcnJlZENvZGVjOiBjb2RlYyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBwcmVmZXJyZWQgcHVibGlzaCBvcHRpb25zIGZvciB0aGUgdmlkZW8gc3RyZWFtLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgdG8gdXNlLlxuICAgKi9cbiAgdXBkYXRlUHVibGlzaE9wdGlvbnMob3B0aW9uczogUHVibGlzaE9wdGlvbnMpIHtcbiAgICB0aGlzLnB1Ymxpc2hPcHRpb25zID0geyAuLi50aGlzLnB1Ymxpc2hPcHRpb25zLCAuLi5vcHRpb25zIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY2FwdHVyZSByZXNvbHV0aW9uIG9mIHRoZSBjYW1lcmEuXG4gICAqL1xuICBnZXRDYXB0dXJlUmVzb2x1dGlvbigpIHtcbiAgICBjb25zdCB7IG1lZGlhU3RyZWFtIH0gPSB0aGlzLnN0YXRlO1xuICAgIGlmICghbWVkaWFTdHJlYW0pIHJldHVybjtcblxuICAgIGNvbnN0IFt2aWRlb1RyYWNrXSA9IG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XG4gICAgaWYgKCF2aWRlb1RyYWNrKSByZXR1cm47XG5cbiAgICBjb25zdCBzZXR0aW5ncyA9IHZpZGVvVHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHNldHRpbmdzLndpZHRoLFxuICAgICAgaGVpZ2h0OiBzZXR0aW5ncy5oZWlnaHQsXG4gICAgICBmcmFtZVJhdGU6IHNldHRpbmdzLmZyYW1lUmF0ZSxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldERldmljZXMoKTogT2JzZXJ2YWJsZTxNZWRpYURldmljZUluZm9bXT4ge1xuICAgIHJldHVybiBnZXRWaWRlb0RldmljZXMoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRTdHJlYW0oXG4gICAgY29uc3RyYWludHM6IE1lZGlhVHJhY2tDb25zdHJhaW50cyxcbiAgKTogUHJvbWlzZTxNZWRpYVN0cmVhbT4ge1xuICAgIGNvbnN0cmFpbnRzLndpZHRoID0gdGhpcy50YXJnZXRSZXNvbHV0aW9uLndpZHRoO1xuICAgIGNvbnN0cmFpbnRzLmhlaWdodCA9IHRoaXMudGFyZ2V0UmVzb2x1dGlvbi5oZWlnaHQ7XG4gICAgLy8gV2UgY2FuJ3Qgc2V0IGJvdGggZGV2aWNlIGlkIGFuZCBmYWNpbmcgbW9kZVxuICAgIC8vIERldmljZSBpZCBoYXMgaGlnaGVyIHByaW9yaXR5XG4gICAgaWYgKCFjb25zdHJhaW50cy5kZXZpY2VJZCAmJiB0aGlzLnN0YXRlLmRpcmVjdGlvbikge1xuICAgICAgY29uc3RyYWludHMuZmFjaW5nTW9kZSA9XG4gICAgICAgIHRoaXMuc3RhdGUuZGlyZWN0aW9uID09PSAnZnJvbnQnID8gJ3VzZXInIDogJ2Vudmlyb25tZW50JztcbiAgICB9XG4gICAgcmV0dXJuIGdldFZpZGVvU3RyZWFtKGNvbnN0cmFpbnRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwdWJsaXNoU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnB1Ymxpc2hWaWRlb1N0cmVhbShzdHJlYW0sIHRoaXMucHVibGlzaE9wdGlvbnMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0b3BQdWJsaXNoU3RyZWFtKHN0b3BUcmFja3M6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnN0b3BQdWJsaXNoKFRyYWNrVHlwZS5WSURFTywgc3RvcFRyYWNrcyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgZGlzdGluY3RVbnRpbENoYW5nZWQsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUsXG4gIFRyYWNrRGlzYWJsZU1vZGUsXG59IGZyb20gJy4vSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSc7XG5pbXBvcnQgeyBnZXRBdWRpb0Jyb3dzZXJQZXJtaXNzaW9uIH0gZnJvbSAnLi9kZXZpY2VzJztcblxuZXhwb3J0IGNsYXNzIE1pY3JvcGhvbmVNYW5hZ2VyU3RhdGUgZXh0ZW5kcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlIHtcbiAgcHJpdmF0ZSBzcGVha2luZ1doaWxlTXV0ZWRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihmYWxzZSk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBgdHJ1ZWAgaWYgdGhlIHVzZXIncyBtaWNyb3Bob25lIGlzIG11dGVkIGJ1dCB0aGV5J2FyZSBzcGVha2luZy5cbiAgICpcbiAgICogVGhpcyBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIFJlYWN0IE5hdGl2ZSBTREsuXG4gICAqL1xuICBzcGVha2luZ1doaWxlTXV0ZWQkOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuXG4gIGNvbnN0cnVjdG9yKGRpc2FibGVNb2RlOiBUcmFja0Rpc2FibGVNb2RlKSB7XG4gICAgc3VwZXIoZGlzYWJsZU1vZGUsIGdldEF1ZGlvQnJvd3NlclBlcm1pc3Npb24oKSk7XG5cbiAgICB0aGlzLnNwZWFraW5nV2hpbGVNdXRlZCQgPSB0aGlzLnNwZWFraW5nV2hpbGVNdXRlZFN1YmplY3RcbiAgICAgIC5hc09ic2VydmFibGUoKVxuICAgICAgLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG4gIH1cblxuICAvKipcbiAgICogYHRydWVgIGlmIHRoZSB1c2VyJ3MgbWljcm9waG9uZSBpcyBtdXRlZCBidXQgdGhleSdhcmUgc3BlYWtpbmcuXG4gICAqXG4gICAqIFRoaXMgZmVhdHVyZSBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBSZWFjdCBOYXRpdmUgU0RLLlxuICAgKi9cbiAgZ2V0IHNwZWFraW5nV2hpbGVNdXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5zcGVha2luZ1doaWxlTXV0ZWQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHNldFNwZWFraW5nV2hpbGVNdXRlZChpc1NwZWFraW5nOiBib29sZWFuKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zcGVha2luZ1doaWxlTXV0ZWRTdWJqZWN0LCBpc1NwZWFraW5nKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREZXZpY2VJZEZyb21TdHJlYW0oc3RyZWFtOiBNZWRpYVN0cmVhbSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgW3RyYWNrXSA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgIHJldHVybiB0cmFjaz8uZ2V0U2V0dGluZ3MoKS5kZXZpY2VJZDtcbiAgfVxufVxuIiwiZXhwb3J0IHR5cGUgU291bmREZXRlY3Rvck9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBEZWZpbmVzIGhvdyBvZnRlbiB0aGUgZGV0ZWN0b3Igc2hvdWxkIGNoZWNrIHdoZXRoZXIgYSBzb3VuZCBpcyBwcmVzZW50LlxuICAgKiBEZWZhdWx0cyB0byA1MDBtcy5cbiAgICovXG4gIGRldGVjdGlvbkZyZXF1ZW5jeUluTXM/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmluZXMgdGhlIGF1ZGlvIGxldmVsIHRocmVzaG9sZCBiZWZvcmUgYSBcImNoYW5nZVwiIGlzIGVtaXR0ZWQuXG4gICAqIERlZmF1bHRzIHRvIDE1MC4gVGhpcyB2YWx1ZSBzaG91bGQgYmUgaW4gdGhlIHJhbmdlIG9mIDAtMjU1LlxuICAgKi9cbiAgYXVkaW9MZXZlbFRocmVzaG9sZD86IG51bWJlcjtcblxuICAvKipcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3Mvd2ViL2FwaS9hbmFseXNlcm5vZGUvZmZ0c2l6ZVxuICAgKlxuICAgKiBEZWZhdWx0cyB0byAxMjguXG4gICAqL1xuICBmZnRTaXplPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGF1ZGlvIHN0cmVhbSBzaG91bGQgYmUgc3RvcHBlZCAoZGVzdHJveWVkKVxuICAgKiB3aGVuIHRoZSBzb3VuZCBkZXRlY3RvciBpcyBzdG9wcGVkLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAqL1xuICBkZXN0cm95U3RyZWFtT25TdG9wPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFNvdW5kRGV0ZWN0b3JTdGF0ZSA9IHtcbiAgaXNTb3VuZERldGVjdGVkOiBib29sZWFuO1xuICAvKipcbiAgICogUmVwcmVzZW50ZWQgYXMgcGVyY2VudGFnZSAoMC0xMDApIHdoZXJlIDEwMCUgaXMgZGVmaW5lZCBieSBgYXVkaW9MZXZlbFRocmVzaG9sZGAgcHJvcGVydHkuXG4gICAqIERlY3JlYXNlIHRpbWUgYmV0d2VlbiBzYW1wbGVzICh0byA1MC0xMDBtcykgd2l0aCBgZGV0ZWN0aW9uRnJlcXVlbmN5SW5Nc2AgcHJvcGVydHkuXG4gICAqL1xuICBhdWRpb0xldmVsOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBTb3VuZFN0YXRlQ2hhbmdlSGFuZGxlciA9IChzdGF0ZTogU291bmREZXRlY3RvclN0YXRlKSA9PiB2b2lkO1xuXG5jb25zdCBERVRFQ1RJT05fRlJFUVVFTkNZX0lOX01TID0gNTAwO1xuY29uc3QgQVVESU9fTEVWRUxfVEhSRVNIT0xEID0gMTUwO1xuY29uc3QgRkZUX1NJWkUgPSAxMjg7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBzb3VuZCBkZXRlY3Rvci5cbiAqXG4gKiBAcGFyYW0gYXVkaW9TdHJlYW0gdGhlIGF1ZGlvIHN0cmVhbSB0byBvYnNlcnZlLiBEZXBlbmRpbmcgb24gdGhlIHByb3ZpZGVkIGNvbmZpZ3VyYXRpb24sIHRoaXMgc3RyZWFtIG1pZ2h0IGJlIGRlc3Ryb3llZCB3aGVuIHRoZSBzb3VuZCBkZXRlY3RvciBpcyBzdG9wcGVkLlxuICogQHBhcmFtIG9uU291bmREZXRlY3RlZFN0YXRlQ2hhbmdlZCBhIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIHRoZSBzb3VuZCBzdGF0ZSBjaGFuZ2VzLlxuICogQHBhcmFtIG9wdGlvbnMgY3VzdG9tIG9wdGlvbnMgZm9yIHRoZSBzb3VuZCBkZXRlY3Rvci5cbiAqIEByZXR1cm5zIGEgY2xlYW4tdXAgZnVuY3Rpb24gd2hpY2ggb25jZSBpbnZva2VkIHN0b3BzIHRoZSBzb3VuZCBkZXRlY3Rvci5cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVNvdW5kRGV0ZWN0b3IgPSAoXG4gIGF1ZGlvU3RyZWFtOiBNZWRpYVN0cmVhbSxcbiAgb25Tb3VuZERldGVjdGVkU3RhdGVDaGFuZ2VkOiBTb3VuZFN0YXRlQ2hhbmdlSGFuZGxlcixcbiAgb3B0aW9uczogU291bmREZXRlY3Rvck9wdGlvbnMgPSB7fSxcbikgPT4ge1xuICBjb25zdCB7XG4gICAgZGV0ZWN0aW9uRnJlcXVlbmN5SW5NcyA9IERFVEVDVElPTl9GUkVRVUVOQ1lfSU5fTVMsXG4gICAgYXVkaW9MZXZlbFRocmVzaG9sZCA9IEFVRElPX0xFVkVMX1RIUkVTSE9MRCxcbiAgICBmZnRTaXplID0gRkZUX1NJWkUsXG4gICAgZGVzdHJveVN0cmVhbU9uU3RvcCA9IHRydWUsXG4gIH0gPSBvcHRpb25zO1xuXG4gIGNvbnN0IGF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgY29uc3QgYW5hbHlzZXIgPSBhdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgYW5hbHlzZXIuZmZ0U2l6ZSA9IGZmdFNpemU7XG5cbiAgY29uc3QgbWljcm9waG9uZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShhdWRpb1N0cmVhbSk7XG4gIG1pY3JvcGhvbmUuY29ubmVjdChhbmFseXNlcik7XG5cbiAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpO1xuICAgIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKGRhdGEpO1xuXG4gICAgY29uc3QgaXNTb3VuZERldGVjdGVkID0gZGF0YS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgPj0gYXVkaW9MZXZlbFRocmVzaG9sZCk7XG5cbiAgICBjb25zdCBhdmVyYWdlZERhdGFWYWx1ZSA9IGRhdGEucmVkdWNlKChwdiwgY3YpID0+IHB2ICsgY3YsIDApIC8gZGF0YS5sZW5ndGg7XG5cbiAgICBjb25zdCBwZXJjZW50YWdlID1cbiAgICAgIGF2ZXJhZ2VkRGF0YVZhbHVlID4gYXVkaW9MZXZlbFRocmVzaG9sZFxuICAgICAgICA/IDEwMFxuICAgICAgICA6IE1hdGgucm91bmQoKGF2ZXJhZ2VkRGF0YVZhbHVlIC8gYXVkaW9MZXZlbFRocmVzaG9sZCkgKiAxMDApO1xuXG4gICAgLy8gV2hlbiB0aGUgdHJhY2sgaXMgZGlzYWJsZWQsIGl0IHRha2VzIHRpbWUgZm9yIHRoZSBidWZmZXIgdG8gZW1wdHlcbiAgICAvLyBUaGlzIGNoZWNrIHdpbGwgZW5zdXJlIHRoYXQgd2UgZG9uJ3Qgc2VuZCBhbnl0aGluZyBpZiB0aGUgdHJhY2sgaXMgZGlzYWJsZWRcbiAgICBpZiAoYXVkaW9TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXT8uZW5hYmxlZCkge1xuICAgICAgb25Tb3VuZERldGVjdGVkU3RhdGVDaGFuZ2VkKHsgaXNTb3VuZERldGVjdGVkLCBhdWRpb0xldmVsOiBwZXJjZW50YWdlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvblNvdW5kRGV0ZWN0ZWRTdGF0ZUNoYW5nZWQoeyBpc1NvdW5kRGV0ZWN0ZWQ6IGZhbHNlLCBhdWRpb0xldmVsOiAwIH0pO1xuICAgIH1cbiAgfSwgZGV0ZWN0aW9uRnJlcXVlbmN5SW5Ncyk7XG5cbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcblxuICAgIC8vIGNsZWFuLXVwIHRoZSBBdWRpb0NvbnRleHQgZWxlbWVudHNcbiAgICBtaWNyb3Bob25lLmRpc2Nvbm5lY3QoKTtcbiAgICBhbmFseXNlci5kaXNjb25uZWN0KCk7XG4gICAgaWYgKGF1ZGlvQ29udGV4dC5zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHtcbiAgICAgIGF3YWl0IGF1ZGlvQ29udGV4dC5jbG9zZSgpO1xuICAgIH1cblxuICAgIC8vIHN0b3AgdGhlIHN0cmVhbVxuICAgIGlmIChkZXN0cm95U3RyZWFtT25TdG9wKSB7XG4gICAgICBhdWRpb1N0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgIGF1ZGlvU3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBCYXNlU3RhdHMgfSBmcm9tICcuLi9zdGF0cyc7XG5pbXBvcnQgeyBTb3VuZFN0YXRlQ2hhbmdlSGFuZGxlciB9IGZyb20gJy4vc291bmQtZGV0ZWN0b3InO1xuaW1wb3J0IHsgZmxhdHRlbiB9IGZyb20gJy4uL3N0YXRzL3V0aWxzJztcblxuY29uc3QgQVVESU9fTEVWRUxfVEhSRVNIT0xEID0gMC4yO1xuXG5leHBvcnQgY2xhc3MgUk5TcGVlY2hEZXRlY3RvciB7XG4gIHByaXZhdGUgcGMxID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHt9KTtcbiAgcHJpdmF0ZSBwYzIgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oe30pO1xuICBwcml2YXRlIGludGVydmFsSWQ6IE5vZGVKUy5UaW1lb3V0IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHNwZWVjaCBkZXRlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc3RhcnQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGF1ZGlvU3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnBjMS5hZGRFdmVudExpc3RlbmVyKCdpY2VjYW5kaWRhdGUnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBjMi5hZGRJY2VDYW5kaWRhdGUoXG4gICAgICAgICAgZS5jYW5kaWRhdGUgYXMgUlRDSWNlQ2FuZGlkYXRlSW5pdCB8IHVuZGVmaW5lZCxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wYzIuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYzEuYWRkSWNlQ2FuZGlkYXRlKFxuICAgICAgICAgIGUuY2FuZGlkYXRlIGFzIFJUQ0ljZUNhbmRpZGF0ZUluaXQgfCB1bmRlZmluZWQsXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgYXVkaW9TdHJlYW1cbiAgICAgICAgLmdldFRyYWNrcygpXG4gICAgICAgIC5mb3JFYWNoKCh0cmFjaykgPT4gdGhpcy5wYzEuYWRkVHJhY2sodHJhY2ssIGF1ZGlvU3RyZWFtKSk7XG4gICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHRoaXMucGMxLmNyZWF0ZU9mZmVyKHt9KTtcbiAgICAgIGF3YWl0IHRoaXMucGMyLnNldFJlbW90ZURlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgIGF3YWl0IHRoaXMucGMxLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgdGhpcy5wYzIuY3JlYXRlQW5zd2VyKCk7XG4gICAgICBhd2FpdCB0aGlzLnBjMS5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgYXdhaXQgdGhpcy5wYzIuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgY29uc3QgYXVkaW9UcmFja3MgPSBhdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgICAgLy8gV2UgbmVlZCB0byBtdXRlIHRoZSBhdWRpbyB0cmFjayBmb3IgdGhpcyB0ZW1wb3Jhcnkgc3RyZWFtLCBvciBlbHNlIHlvdSB3aWxsIGhlYXIgeW91cnNlbGYgdHdpY2Ugd2hpbGUgaW4gdGhlIGNhbGwuXG4gICAgICBhdWRpb1RyYWNrcy5mb3JFYWNoKCh0cmFjaykgPT4gKHRyYWNrLmVuYWJsZWQgPSBmYWxzZSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnRXJyb3IgY29ubmVjdGluZyBhbmQgbmVnb3RpYXRpbmcgYmV0d2VlbiBQZWVyQ29ubmVjdGlvbnM6JyxcbiAgICAgICAgZXJyb3IsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgc3BlZWNoIGRldGVjdGlvbiBhbmQgcmVsZWFzZXMgYWxsIGFsbG9jYXRlZCByZXNvdXJjZXMuXG4gICAqL1xuICBwdWJsaWMgc3RvcCgpIHtcbiAgICB0aGlzLnBjMS5jbG9zZSgpO1xuICAgIHRoaXMucGMyLmNsb3NlKCk7XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWMgbWV0aG9kIHRoYXQgZGV0ZWN0cyB0aGUgYXVkaW8gbGV2ZWxzIGFuZCByZXR1cm5zIHRoZSBzdGF0dXMuXG4gICAqL1xuICBwdWJsaWMgb25TcGVha2luZ0RldGVjdGVkU3RhdGVDaGFuZ2UoXG4gICAgb25Tb3VuZERldGVjdGVkU3RhdGVDaGFuZ2VkOiBTb3VuZFN0YXRlQ2hhbmdlSGFuZGxlcixcbiAgKSB7XG4gICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSAoYXdhaXQgdGhpcy5wYzEuZ2V0U3RhdHMoKSkgYXMgUlRDU3RhdHNSZXBvcnQ7XG4gICAgICBjb25zdCByZXBvcnQgPSBmbGF0dGVuKHN0YXRzKTtcbiAgICAgIC8vIEF1ZGlvIGxldmVscyBhcmUgcHJlc2VudCBpbnNpZGUgc3RhdHMgb2YgdHlwZSBgbWVkaWEtc291cmNlYCBhbmQgb2Yga2luZCBgYXVkaW9gXG4gICAgICBjb25zdCBhdWRpb01lZGlhU291cmNlU3RhdHMgPSByZXBvcnQuZmluZChcbiAgICAgICAgKHN0YXQpID0+XG4gICAgICAgICAgc3RhdC50eXBlID09PSAnbWVkaWEtc291cmNlJyAmJlxuICAgICAgICAgIChzdGF0IGFzIFJUQ1J0cFN0cmVhbVN0YXRzKS5raW5kID09PSAnYXVkaW8nLFxuICAgICAgKSBhcyBCYXNlU3RhdHM7XG4gICAgICBpZiAoYXVkaW9NZWRpYVNvdXJjZVN0YXRzKSB7XG4gICAgICAgIGNvbnN0IHsgYXVkaW9MZXZlbCB9ID0gYXVkaW9NZWRpYVNvdXJjZVN0YXRzO1xuICAgICAgICBpZiAoYXVkaW9MZXZlbCkge1xuICAgICAgICAgIGlmIChhdWRpb0xldmVsID49IEFVRElPX0xFVkVMX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgb25Tb3VuZERldGVjdGVkU3RhdGVDaGFuZ2VkKHtcbiAgICAgICAgICAgICAgaXNTb3VuZERldGVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgICBhdWRpb0xldmVsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uU291bmREZXRlY3RlZFN0YXRlQ2hhbmdlZCh7XG4gICAgICAgICAgICAgIGlzU291bmREZXRlY3RlZDogZmFsc2UsXG4gICAgICAgICAgICAgIGF1ZGlvTGV2ZWw6IDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDAwKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY29tYmluZUxhdGVzdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHR5cGUgeyBJTm9pc2VDYW5jZWxsYXRpb24gfSBmcm9tICdAc3RyZWFtLWlvL2F1ZGlvLWZpbHRlcnMtd2ViJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyIH0gZnJvbSAnLi9JbnB1dE1lZGlhRGV2aWNlTWFuYWdlcic7XG5pbXBvcnQgeyBNaWNyb3Bob25lTWFuYWdlclN0YXRlIH0gZnJvbSAnLi9NaWNyb3Bob25lTWFuYWdlclN0YXRlJztcbmltcG9ydCB7IFRyYWNrRGlzYWJsZU1vZGUgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUnO1xuaW1wb3J0IHsgZ2V0QXVkaW9EZXZpY2VzLCBnZXRBdWRpb1N0cmVhbSB9IGZyb20gJy4vZGV2aWNlcyc7XG5pbXBvcnQgeyBUcmFja1R5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgY3JlYXRlU291bmREZXRlY3RvciB9IGZyb20gJy4uL2hlbHBlcnMvc291bmQtZGV0ZWN0b3InO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7XG4gIE5vaXNlQ2FuY2VsbGF0aW9uU2V0dGluZ3NNb2RlRW51bSxcbiAgT3duQ2FwYWJpbGl0eSxcbn0gZnJvbSAnLi4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCB7IGNyZWF0ZVN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL3N0b3JlL3J4VXRpbHMnO1xuaW1wb3J0IHsgUk5TcGVlY2hEZXRlY3RvciB9IGZyb20gJy4uL2hlbHBlcnMvUk5TcGVlY2hEZXRlY3Rvcic7XG5pbXBvcnQgeyB3aXRob3V0Q29uY3VycmVuY3kgfSBmcm9tICcuLi9oZWxwZXJzL2NvbmN1cnJlbmN5JztcblxuZXhwb3J0IGNsYXNzIE1pY3JvcGhvbmVNYW5hZ2VyIGV4dGVuZHMgSW5wdXRNZWRpYURldmljZU1hbmFnZXI8TWljcm9waG9uZU1hbmFnZXJTdGF0ZT4ge1xuICBwcml2YXRlIHNwZWFraW5nV2hpbGVNdXRlZE5vdGlmaWNhdGlvbkVuYWJsZWQgPSB0cnVlO1xuICBwcml2YXRlIHNvdW5kRGV0ZWN0b3JDb25jdXJyZW5jeVRhZyA9IFN5bWJvbCgnc291bmREZXRlY3RvckNvbmN1cnJlbmN5VGFnJyk7XG4gIHByaXZhdGUgc291bmREZXRlY3RvckNsZWFudXA/OiBGdW5jdGlvbjtcbiAgcHJpdmF0ZSByblNwZWVjaERldGVjdG9yOiBSTlNwZWVjaERldGVjdG9yIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIG5vaXNlQ2FuY2VsbGF0aW9uOiBJTm9pc2VDYW5jZWxsYXRpb24gfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgbm9pc2VDYW5jZWxsYXRpb25DaGFuZ2VVbnN1YnNjcmliZTogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIG5vaXNlQ2FuY2VsbGF0aW9uUmVnaXN0cmF0aW9uPzogUHJvbWlzZTx2b2lkPjtcbiAgcHJpdmF0ZSB1bnJlZ2lzdGVyTm9pc2VDYW5jZWxsYXRpb24/OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhbGw6IENhbGwsXG4gICAgZGlzYWJsZU1vZGU6IFRyYWNrRGlzYWJsZU1vZGUgPSBpc1JlYWN0TmF0aXZlKClcbiAgICAgID8gJ2Rpc2FibGUtdHJhY2tzJ1xuICAgICAgOiAnc3RvcC10cmFja3MnLFxuICApIHtcbiAgICBzdXBlcihjYWxsLCBuZXcgTWljcm9waG9uZU1hbmFnZXJTdGF0ZShkaXNhYmxlTW9kZSksIFRyYWNrVHlwZS5BVURJTyk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbihcbiAgICAgICAgY29tYmluZUxhdGVzdChbXG4gICAgICAgICAgdGhpcy5jYWxsLnN0YXRlLmNhbGxpbmdTdGF0ZSQsXG4gICAgICAgICAgdGhpcy5jYWxsLnN0YXRlLm93bkNhcGFiaWxpdGllcyQsXG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSQsXG4gICAgICAgICAgdGhpcy5zdGF0ZS5zdGF0dXMkLFxuICAgICAgICBdKSxcbiAgICAgICAgYXN5bmMgKFtjYWxsaW5nU3RhdGUsIG93bkNhcGFiaWxpdGllcywgZGV2aWNlSWQsIHN0YXR1c10pID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkxFRlQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdG9wU3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FsbGluZ1N0YXRlICE9PSBDYWxsaW5nU3RhdGUuSk9JTkVEKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3BlYWtpbmdXaGlsZU11dGVkTm90aWZpY2F0aW9uRW5hYmxlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAob3duQ2FwYWJpbGl0aWVzLmluY2x1ZGVzKE93bkNhcGFiaWxpdHkuU0VORF9BVURJTykpIHtcbiAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2Rpc2FibGVkJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24oZGV2aWNlSWQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcFNwZWFraW5nV2hpbGVNdXRlZERldGVjdGlvbigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnN0b3BTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgJ0NvdWxkIG5vdCBlbmFibGUgc3BlYWtpbmcgd2hpbGUgbXV0ZWQnLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKFxuICAgICAgY3JlYXRlU3Vic2NyaXB0aW9uKHRoaXMuY2FsbC5zdGF0ZS5jYWxsaW5nU3RhdGUkLCAoY2FsbGluZ1N0YXRlKSA9PiB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmcgd2hlbiBub2lzZSBmaWx0ZXJpbmcgaXNuJ3QgdHVybmVkIG9uXG4gICAgICAgIGlmICghdGhpcy5ub2lzZUNhbmNlbGxhdGlvblJlZ2lzdHJhdGlvbiB8fCAhdGhpcy5ub2lzZUNhbmNlbGxhdGlvbilcbiAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYXV0b09uID1cbiAgICAgICAgICB0aGlzLmNhbGwuc3RhdGUuc2V0dGluZ3M/LmF1ZGlvLm5vaXNlX2NhbmNlbGxhdGlvbj8ubW9kZSA9PT1cbiAgICAgICAgICBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzTW9kZUVudW0uQVVUT19PTjtcblxuICAgICAgICBpZiAoYXV0b09uICYmIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCkge1xuICAgICAgICAgIHRoaXMubm9pc2VDYW5jZWxsYXRpb25SZWdpc3RyYXRpb25cbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMubm9pc2VDYW5jZWxsYXRpb24/LmVuYWJsZSgpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCBgRmFpbGVkIHRvIGVuYWJsZSBub2lzZSBjYW5jZWxsYXRpb25gLCBlcnIpO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsLm5vdGlmeU5vaXNlQ2FuY2VsbGF0aW9uU3RvcHBlZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuTEVGVCkge1xuICAgICAgICAgIHRoaXMubm9pc2VDYW5jZWxsYXRpb25SZWdpc3RyYXRpb25cbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMubm9pc2VDYW5jZWxsYXRpb24/LmRpc2FibGUoKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYEZhaWxlZCB0byBkaXNhYmxlIG5vaXNlIGNhbmNlbGxhdGlvbmAsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGVzIG5vaXNlIGNhbmNlbGxhdGlvbiBmb3IgdGhlIG1pY3JvcGhvbmUuXG4gICAqXG4gICAqIE5vdGU6IG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlLlxuICAgKiBAcGFyYW0gbm9pc2VDYW5jZWxsYXRpb24gLSBhIG5vaXNlIGNhbmNlbGxhdGlvbiBpbnN0YW5jZSB0byB1c2UuXG4gICAqL1xuICBhc3luYyBlbmFibGVOb2lzZUNhbmNlbGxhdGlvbihub2lzZUNhbmNlbGxhdGlvbjogSU5vaXNlQ2FuY2VsbGF0aW9uKSB7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb2lzZSBjYW5jZWxsYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUnKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IG93bkNhcGFiaWxpdGllcywgc2V0dGluZ3MgfSA9IHRoaXMuY2FsbC5zdGF0ZTtcbiAgICBjb25zdCBoYXNOb2lzZUNhbmNlbGxhdGlvbkNhcGFiaWxpdHkgPSBvd25DYXBhYmlsaXRpZXMuaW5jbHVkZXMoXG4gICAgICBPd25DYXBhYmlsaXR5LkVOQUJMRV9OT0lTRV9DQU5DRUxMQVRJT04sXG4gICAgKTtcbiAgICBpZiAoIWhhc05vaXNlQ2FuY2VsbGF0aW9uQ2FwYWJpbGl0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb2lzZSBjYW5jZWxsYXRpb24gaXMgbm90IGF2YWlsYWJsZS4nKTtcbiAgICB9XG4gICAgY29uc3Qgbm9pc2VDYW5jZWxsYXRpb25TZXR0aW5ncyA9IHNldHRpbmdzPy5hdWRpby5ub2lzZV9jYW5jZWxsYXRpb247XG4gICAgaWYgKFxuICAgICAgIW5vaXNlQ2FuY2VsbGF0aW9uU2V0dGluZ3MgfHxcbiAgICAgIG5vaXNlQ2FuY2VsbGF0aW9uU2V0dGluZ3MubW9kZSA9PT1cbiAgICAgICAgTm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc01vZGVFbnVtLkRJU0FCTEVEXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vaXNlIGNhbmNlbGxhdGlvbiBpcyBkaXNhYmxlZCBmb3IgdGhpcyBjYWxsIHR5cGUuJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLm5vaXNlQ2FuY2VsbGF0aW9uID0gbm9pc2VDYW5jZWxsYXRpb247XG5cbiAgICAgIC8vIGxpc3RlbiBmb3IgY2hhbmdlIGV2ZW50cyBhbmQgbm90aWZ5IHRoZSBTRlVcbiAgICAgIHRoaXMubm9pc2VDYW5jZWxsYXRpb25DaGFuZ2VVbnN1YnNjcmliZSA9IHRoaXMubm9pc2VDYW5jZWxsYXRpb24ub24oXG4gICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAoZW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGwubm90aWZ5Tm9pc2VDYW5jZWxsYXRpb25TdGFydGluZygpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCBgbm90aWZ5Tm9pc2VDYW5jZWxsYXRpb25TdGFydCBmYWlsZWRgLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbC5ub3RpZnlOb2lzZUNhbmNlbGxhdGlvblN0b3BwZWQoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYG5vdGlmeU5vaXNlQ2FuY2VsbGF0aW9uU3RvcCBmYWlsZWRgLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUmVzdWx0ID0gdGhpcy5yZWdpc3RlckZpbHRlcihcbiAgICAgICAgbm9pc2VDYW5jZWxsYXRpb24udG9GaWx0ZXIoKSxcbiAgICAgICk7XG4gICAgICB0aGlzLm5vaXNlQ2FuY2VsbGF0aW9uUmVnaXN0cmF0aW9uID0gcmVnaXN0cmF0aW9uUmVzdWx0LnJlZ2lzdGVyZWQ7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJOb2lzZUNhbmNlbGxhdGlvbiA9IHJlZ2lzdHJhdGlvblJlc3VsdC51bnJlZ2lzdGVyO1xuICAgICAgYXdhaXQgdGhpcy5ub2lzZUNhbmNlbGxhdGlvblJlZ2lzdHJhdGlvbjtcblxuICAgICAgLy8gaGFuZGxlcyBhbiBlZGdlIGNhc2Ugd2hlcmUgYSBub2lzZSBjYW5jZWxsYXRpb24gaXMgZW5hYmxlZCBhZnRlclxuICAgICAgLy8gdGhlIHBhcnRpY2lwYW50IGFzIGpvaW5lZCB0aGUgY2FsbCAtPiB3ZSBpbW1lZGlhdGVseSBlbmFibGUgTkNcbiAgICAgIGlmIChcbiAgICAgICAgbm9pc2VDYW5jZWxsYXRpb25TZXR0aW5ncy5tb2RlID09PVxuICAgICAgICAgIE5vaXNlQ2FuY2VsbGF0aW9uU2V0dGluZ3NNb2RlRW51bS5BVVRPX09OICYmXG4gICAgICAgIHRoaXMuY2FsbC5zdGF0ZS5jYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5KT0lORURcbiAgICAgICkge1xuICAgICAgICBub2lzZUNhbmNlbGxhdGlvbi5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmxvZ2dlcignd2FybicsICdGYWlsZWQgdG8gZW5hYmxlIG5vaXNlIGNhbmNlbGxhdGlvbicsIGUpO1xuICAgICAgYXdhaXQgdGhpcy5kaXNhYmxlTm9pc2VDYW5jZWxsYXRpb24oKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgJ0ZhaWxlZCB0byBkaXNhYmxlIG5vaXNlIGNhbmNlbGxhdGlvbicsIGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgbm9pc2UgY2FuY2VsbGF0aW9uIGZvciB0aGUgbWljcm9waG9uZS5cbiAgICpcbiAgICogTm90ZTogbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUuXG4gICAqL1xuICBhc3luYyBkaXNhYmxlTm9pc2VDYW5jZWxsYXRpb24oKSB7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb2lzZSBjYW5jZWxsYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUnKTtcbiAgICB9XG4gICAgYXdhaXQgKHRoaXMudW5yZWdpc3Rlck5vaXNlQ2FuY2VsbGF0aW9uPy4oKSA/PyBQcm9taXNlLnJlc29sdmUoKSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMubm9pc2VDYW5jZWxsYXRpb24/LmRpc2FibGUoKSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMubm9pc2VDYW5jZWxsYXRpb25DaGFuZ2VVbnN1YnNjcmliZT8uKCkpXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsICdGYWlsZWQgdG8gdW5yZWdpc3RlciBub2lzZSBjYW5jZWxsYXRpb24nLCBlcnIpO1xuICAgICAgfSk7XG5cbiAgICBhd2FpdCB0aGlzLmNhbGwubm90aWZ5Tm9pc2VDYW5jZWxsYXRpb25TdG9wcGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlcyBzcGVha2luZyB3aGlsZSBtdXRlZCBub3RpZmljYXRpb24uXG4gICAqL1xuICBhc3luYyBlbmFibGVTcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb24oKSB7XG4gICAgdGhpcy5zcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb25FbmFibGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5zdGF0ZS5zdGF0dXMgPT09ICdkaXNhYmxlZCcpIHtcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnRTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24odGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGVzIHNwZWFraW5nIHdoaWxlIG11dGVkIG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIGFzeW5jIGRpc2FibGVTcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb24oKSB7XG4gICAgdGhpcy5zcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb25FbmFibGVkID0gZmFsc2U7XG4gICAgYXdhaXQgdGhpcy5zdG9wU3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RGV2aWNlcygpOiBPYnNlcnZhYmxlPE1lZGlhRGV2aWNlSW5mb1tdPiB7XG4gICAgcmV0dXJuIGdldEF1ZGlvRGV2aWNlcygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFN0cmVhbShcbiAgICBjb25zdHJhaW50czogTWVkaWFUcmFja0NvbnN0cmFpbnRzLFxuICApOiBQcm9taXNlPE1lZGlhU3RyZWFtPiB7XG4gICAgcmV0dXJuIGdldEF1ZGlvU3RyZWFtKGNvbnN0cmFpbnRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwdWJsaXNoU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnB1Ymxpc2hBdWRpb1N0cmVhbShzdHJlYW0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0b3BQdWJsaXNoU3RyZWFtKHN0b3BUcmFja3M6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnN0b3BQdWJsaXNoKFRyYWNrVHlwZS5BVURJTywgc3RvcFRyYWNrcyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0YXJ0U3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKGRldmljZUlkPzogc3RyaW5nKSB7XG4gICAgYXdhaXQgd2l0aG91dENvbmN1cnJlbmN5KHRoaXMuc291bmREZXRlY3RvckNvbmN1cnJlbmN5VGFnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnN0b3BTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24oKTtcbiAgICAgIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcbiAgICAgICAgdGhpcy5yblNwZWVjaERldGVjdG9yID0gbmV3IFJOU3BlZWNoRGV0ZWN0b3IoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5yblNwZWVjaERldGVjdG9yLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID1cbiAgICAgICAgICB0aGlzLnJuU3BlZWNoRGV0ZWN0b3I/Lm9uU3BlYWtpbmdEZXRlY3RlZFN0YXRlQ2hhbmdlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZXRTcGVha2luZ1doaWxlTXV0ZWQoZXZlbnQuaXNTb3VuZERldGVjdGVkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zb3VuZERldGVjdG9yQ2xlYW51cCA9ICgpID0+IHtcbiAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHRoaXMucm5TcGVlY2hEZXRlY3Rvcj8uc3RvcCgpO1xuICAgICAgICAgIHRoaXMucm5TcGVlY2hEZXRlY3RvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5lZWQgdG8gc3RhcnQgYSBuZXcgc3RyZWFtIHRoYXQncyBub3QgY29ubmVjdGVkIHRvIHB1Ymxpc2hlclxuICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmdldFN0cmVhbSh7XG4gICAgICAgICAgZGV2aWNlSWQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNvdW5kRGV0ZWN0b3JDbGVhbnVwID0gY3JlYXRlU291bmREZXRlY3RvcihzdHJlYW0sIChldmVudCkgPT4ge1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2V0U3BlYWtpbmdXaGlsZU11dGVkKGV2ZW50LmlzU291bmREZXRlY3RlZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdG9wU3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKCkge1xuICAgIGF3YWl0IHdpdGhvdXRDb25jdXJyZW5jeSh0aGlzLnNvdW5kRGV0ZWN0b3JDb25jdXJyZW5jeVRhZywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnNvdW5kRGV0ZWN0b3JDbGVhbnVwKSByZXR1cm47XG4gICAgICBjb25zdCBzb3VuZERldGVjdG9yQ2xlYW51cCA9IHRoaXMuc291bmREZXRlY3RvckNsZWFudXA7XG4gICAgICB0aGlzLnNvdW5kRGV0ZWN0b3JDbGVhbnVwID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5zdGF0ZS5zZXRTcGVha2luZ1doaWxlTXV0ZWQoZmFsc2UpO1xuICAgICAgYXdhaXQgc291bmREZXRlY3RvckNsZWFudXAoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSB9IGZyb20gJy4vSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSc7XG5pbXBvcnQgeyBTY3JlZW5TaGFyZVNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgU2NyZWVuU2hhcmVTdGF0ZSBleHRlbmRzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGU8RGlzcGxheU1lZGlhU3RyZWFtT3B0aW9ucz4ge1xuICBwcml2YXRlIGF1ZGlvRW5hYmxlZFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KHRydWUpO1xuICBwcml2YXRlIHNldHRpbmdzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8XG4gICAgU2NyZWVuU2hhcmVTZXR0aW5ncyB8IHVuZGVmaW5lZFxuICA+KHVuZGVmaW5lZCk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgY3VycmVudCBzY3JlZW4gc2hhcmUgYXVkaW8gc3RhdHVzLlxuICAgKi9cbiAgYXVkaW9FbmFibGVkJCA9IHRoaXMuYXVkaW9FbmFibGVkU3ViamVjdFxuICAgIC5hc09ic2VydmFibGUoKVxuICAgIC5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnQgc2NyZWVuIHNoYXJlIHNldHRpbmdzLlxuICAgKi9cbiAgc2V0dGluZ3MkID0gdGhpcy5zZXR0aW5nc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJvdGVjdGVkIGdldERldmljZUlkRnJvbVN0cmVhbSA9IChcbiAgICBzdHJlYW06IE1lZGlhU3RyZWFtLFxuICApOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICAgIGNvbnN0IFt0cmFja10gPSBzdHJlYW0uZ2V0VHJhY2tzKCk7XG4gICAgcmV0dXJuIHRyYWNrPy5nZXRTZXR0aW5ncygpLmRldmljZUlkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzY3JlZW4gc2hhcmUgYXVkaW8gc3RhdHVzLlxuICAgKi9cbiAgZ2V0IGF1ZGlvRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5hdWRpb0VuYWJsZWQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgc2NyZWVuIHNoYXJlIGF1ZGlvIHN0YXR1cy5cbiAgICovXG4gIHNldEF1ZGlvRW5hYmxlZChpc0VuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmF1ZGlvRW5hYmxlZFN1YmplY3QsIGlzRW5hYmxlZCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc2NyZWVuIHNoYXJlIHNldHRpbmdzLlxuICAgKi9cbiAgZ2V0IHNldHRpbmdzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnNldHRpbmdzJCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IHNjcmVlbiBzaGFyZSBzZXR0aW5ncy5cbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmdzIHRoZSBzY3JlZW4gc2hhcmUgc2V0dGluZ3MgdG8gc2V0LlxuICAgKi9cbiAgc2V0U2V0dGluZ3Moc2V0dGluZ3M6IFNjcmVlblNoYXJlU2V0dGluZ3MgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNldHRpbmdzU3ViamVjdCwgc2V0dGluZ3MpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSW5wdXRNZWRpYURldmljZU1hbmFnZXIgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyJztcbmltcG9ydCB7IFNjcmVlblNoYXJlU3RhdGUgfSBmcm9tICcuL1NjcmVlblNoYXJlU3RhdGUnO1xuaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHsgVHJhY2tUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IGdldFNjcmVlblNoYXJlU3RyZWFtIH0gZnJvbSAnLi9kZXZpY2VzJztcbmltcG9ydCB7IFNjcmVlblNoYXJlU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9zdG9yZS9yeFV0aWxzJztcblxuZXhwb3J0IGNsYXNzIFNjcmVlblNoYXJlTWFuYWdlciBleHRlbmRzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyPFxuICBTY3JlZW5TaGFyZVN0YXRlLFxuICBEaXNwbGF5TWVkaWFTdHJlYW1PcHRpb25zXG4+IHtcbiAgY29uc3RydWN0b3IoY2FsbDogQ2FsbCkge1xuICAgIHN1cGVyKGNhbGwsIG5ldyBTY3JlZW5TaGFyZVN0YXRlKCksIFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpO1xuXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICBjcmVhdGVTdWJzY3JpcHRpb24oY2FsbC5zdGF0ZS5zZXR0aW5ncyQsIChzZXR0aW5ncykgPT4ge1xuICAgICAgICBjb25zdCBtYXliZVRhcmdldFJlc29sdXRpb24gPSBzZXR0aW5ncz8uc2NyZWVuc2hhcmluZy50YXJnZXRfcmVzb2x1dGlvbjtcblxuICAgICAgICBpZiAobWF5YmVUYXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgdGhpcy5zZXREZWZhdWx0Q29uc3RyYWludHMoe1xuICAgICAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICAgICAgd2lkdGg6IG1heWJlVGFyZ2V0UmVzb2x1dGlvbi53aWR0aCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBtYXliZVRhcmdldFJlc29sdXRpb24uaGVpZ2h0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIGVuYWJsZSBzY3JlZW4gc2hhcmUgYXVkaW8gb3B0aW9ucyBvbiBzdXBwb3J0ZWQgcGxhdGZvcm1zLlxuICAgKlxuICAgKiBOb3RlOiBmb3Igb25nb2luZyBzY3JlZW4gc2hhcmUsIGF1ZGlvIHdvbid0IGJlIGVuYWJsZWQgdW50aWwgeW91XG4gICAqIHJlLXB1Ymxpc2ggdGhlIHNjcmVlbiBzaGFyZSBzdHJlYW0uXG4gICAqL1xuICBlbmFibGVTY3JlZW5TaGFyZUF1ZGlvKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuc2V0QXVkaW9FbmFibGVkKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgZGlzYWJsZSBzY3JlZW4gc2hhcmUgYXVkaW8gb3B0aW9ucyBvbiBzdXBwb3J0ZWQgcGxhdGZvcm1zLlxuICAgKi9cbiAgYXN5bmMgZGlzYWJsZVNjcmVlblNoYXJlQXVkaW8oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zdGF0ZS5zZXRBdWRpb0VuYWJsZWQoZmFsc2UpO1xuICAgIGlmICh0aGlzLmNhbGwucHVibGlzaGVyPy5pc1B1Ymxpc2hpbmcoVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTykpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2FsbC5zdG9wUHVibGlzaChUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBzY3JlZW4gc2hhcmUgc2V0dGluZ3MuXG4gICAqL1xuICBnZXRTZXR0aW5ncygpOiBTY3JlZW5TaGFyZVNldHRpbmdzIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZXR0aW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50IHNjcmVlbiBzaGFyZSBzZXR0aW5ncy5cbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmdzIHRoZSBzZXR0aW5ncyB0byBzZXQuXG4gICAqL1xuICBzZXRTZXR0aW5ncyhzZXR0aW5nczogU2NyZWVuU2hhcmVTZXR0aW5ncyB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuc2V0U2V0dGluZ3Moc2V0dGluZ3MpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldERldmljZXMoKTogT2JzZXJ2YWJsZTxNZWRpYURldmljZUluZm9bXT4ge1xuICAgIHJldHVybiBvZihbXSk7IC8vIHRoZXJlIGFyZSBubyBkZXZpY2VzIHRvIGJlIGxpc3RlZCBmb3IgU2NyZWVuIFNoYXJlXG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0U3RyZWFtKFxuICAgIGNvbnN0cmFpbnRzOiBEaXNwbGF5TWVkaWFTdHJlYW1PcHRpb25zLFxuICApOiBQcm9taXNlPE1lZGlhU3RyZWFtPiB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmF1ZGlvRW5hYmxlZCkge1xuICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFNjcmVlblNoYXJlU3RyZWFtKGNvbnN0cmFpbnRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwdWJsaXNoU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnB1Ymxpc2hTY3JlZW5TaGFyZVN0cmVhbShzdHJlYW0sIHtcbiAgICAgIHNjcmVlblNoYXJlU2V0dGluZ3M6IHRoaXMuc3RhdGUuc2V0dGluZ3MsXG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgc3RvcFB1Ymxpc2hTdHJlYW0oc3RvcFRyYWNrczogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuY2FsbC5zdG9wUHVibGlzaChUcmFja1R5cGUuU0NSRUVOX1NIQVJFLCBzdG9wVHJhY2tzKTtcbiAgICBhd2FpdCB0aGlzLmNhbGwuc3RvcFB1Ymxpc2goVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTywgc3RvcFRyYWNrcyk7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGBzZWxlY3RgIG1ldGhvZCB0byB0aHJvdyBhbiBlcnJvci5cbiAgICpcbiAgICogQHBhcmFtIGRldmljZUlkIGlnbm9yZWQuXG4gICAqL1xuICBhc3luYyBzZWxlY3QoZGV2aWNlSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBpbiBmb3IgU2NyZWVuIFNoYXJlJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFJ4VXRpbHMgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBjaGVja0lmQXVkaW9PdXRwdXRDaGFuZ2VTdXBwb3J0ZWQgfSBmcm9tICcuL2RldmljZXMnO1xuXG5leHBvcnQgY2xhc3MgU3BlYWtlclN0YXRlIHtcbiAgcHJvdGVjdGVkIHNlbGVjdGVkRGV2aWNlU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPignJyk7XG4gIHByb3RlY3RlZCB2b2x1bWVTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXI+KDEpO1xuICAvKipcbiAgICogW1RlbGxzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIGF1ZGlvIG91dHB1dCBjaGFuZ2Ugb24gJ2F1ZGlvJyBlbGVtZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxNZWRpYUVsZW1lbnQvc2V0U2lua0lkKS5cbiAgICovXG4gIHJlYWRvbmx5IGlzRGV2aWNlU2VsZWN0aW9uU3VwcG9ydGVkID0gY2hlY2tJZkF1ZGlvT3V0cHV0Q2hhbmdlU3VwcG9ydGVkKCk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGRldmljZVxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICovXG4gIHNlbGVjdGVkRGV2aWNlJDogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2b2x1bWVcbiAgICpcbiAgICogTm90ZTogdGhpcyBmZWF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlXG4gICAqL1xuICB2b2x1bWUkOiBPYnNlcnZhYmxlPG51bWJlcj47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZWxlY3RlZERldmljZSQgPSB0aGlzLnNlbGVjdGVkRGV2aWNlU3ViamVjdFxuICAgICAgLmFzT2JzZXJ2YWJsZSgpXG4gICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcbiAgICB0aGlzLnZvbHVtZSQgPSB0aGlzLnZvbHVtZVN1YmplY3RcbiAgICAgIC5hc09ic2VydmFibGUoKVxuICAgICAgLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkZXZpY2VcbiAgICpcbiAgICogTm90ZTogdGhpcyBmZWF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlXG4gICAqL1xuICBnZXQgc2VsZWN0ZWREZXZpY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc2VsZWN0ZWREZXZpY2UkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5IHNlbGVjdGVkIHZvbHVtZVxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICovXG4gIGdldCB2b2x1bWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMudm9sdW1lJCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhbiBvYnNlcnZhYmxlLCBvciB1bmRlZmluZWQgaWYgdGhlIG9ic2VydmFibGUgaGFzXG4gICAqIG5vdCBlbWl0dGVkIGEgdmFsdWUgeWV0LlxuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2YWJsZSQgdGhlIG9ic2VydmFibGUgdG8gZ2V0IHRoZSB2YWx1ZSBmcm9tLlxuICAgKi9cbiAgZ2V0Q3VycmVudFZhbHVlID0gUnhVdGlscy5nZXRDdXJyZW50VmFsdWU7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gZGV2aWNlSWRcbiAgICovXG4gIHNldERldmljZShkZXZpY2VJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zZWxlY3RlZERldmljZVN1YmplY3QsIGRldmljZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHZvbHVtZVxuICAgKi9cbiAgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy52b2x1bWVTdWJqZWN0LCB2b2x1bWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBTdWJqZWN0LlxuICAgKiBBbiBgdXBkYXRlYCBjYW4gZWl0aGVyIGJlIGEgbmV3IHZhbHVlIG9yIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXNcbiAgICogdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHJldHVybnMgYSBuZXcgdmFsdWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gc3ViamVjdCB0aGUgc3ViamVjdCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAgICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICovXG4gIHByb3RlY3RlZCBzZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLnNldEN1cnJlbnRWYWx1ZTtcbn1cbiIsImltcG9ydCB7IGNvbWJpbmVMYXRlc3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7IFNwZWFrZXJTdGF0ZSB9IGZyb20gJy4vU3BlYWtlclN0YXRlJztcbmltcG9ydCB7IGRldmljZUlkcyQsIGdldEF1ZGlvT3V0cHV0RGV2aWNlcyB9IGZyb20gJy4vZGV2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBTcGVha2VyTWFuYWdlciB7XG4gIHB1YmxpYyByZWFkb25seSBzdGF0ZSA9IG5ldyBTcGVha2VyU3RhdGUoKTtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuICBwcml2YXRlIHJlYWRvbmx5IGNhbGw6IENhbGw7XG5cbiAgY29uc3RydWN0b3IoY2FsbDogQ2FsbCkge1xuICAgIHRoaXMuY2FsbCA9IGNhbGw7XG4gICAgaWYgKGRldmljZUlkcyQgJiYgIWlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgIGNvbWJpbmVMYXRlc3QoW2RldmljZUlkcyQhLCB0aGlzLnN0YXRlLnNlbGVjdGVkRGV2aWNlJF0pLnN1YnNjcmliZShcbiAgICAgICAgICAoW2RldmljZXMsIGRldmljZUlkXSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkZXZpY2VJZCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkZXZpY2UgPSBkZXZpY2VzLmZpbmQoXG4gICAgICAgICAgICAgIChkKSA9PiBkLmRldmljZUlkID09PSBkZXZpY2VJZCAmJiBkLmtpbmQgPT09ICdhdWRpb291dHB1dCcsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKCFkZXZpY2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgYXZhaWxhYmxlIGF1ZGlvIG91dHB1dCBkZXZpY2VzXG4gICAqXG4gICAqIE5vdGU6IEl0IHByb21wdHMgdGhlIHVzZXIgZm9yIGEgcGVybWlzc2lvbiB0byB1c2UgZGV2aWNlcyAoaWYgbm90IGFscmVhZHkgZ3JhbnRlZClcbiAgICogTm90ZTogVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICpcbiAgICogQHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHdpbGwgYmUgdXBkYXRlZCBpZiBhIGRldmljZSBpcyBjb25uZWN0ZWQgb3IgZGlzY29ubmVjdGVkXG4gICAqL1xuICBsaXN0RGV2aWNlcygpIHtcbiAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUuIFBsZWFzZSB2aXNpdCBodHRwczovL2dldHN0cmVhbS5pby92aWRlby9kb2NzL3JlYWN0bmF0aXZlL2NvcmUvY2FtZXJhLWFuZC1taWNyb3Bob25lLyNzcGVha2VyLW1hbmFnZW1lbnQgZm9yIG1vcmUgZGV0YWlscycsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0QXVkaW9PdXRwdXREZXZpY2VzKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGEgZGV2aWNlLlxuICAgKlxuICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZVxuICAgKlxuICAgKiBAcGFyYW0gZGV2aWNlSWQgZW1wdHkgc3RyaW5nIG1lYW5zIHRoZSBzeXN0ZW0gZGVmYXVsdFxuICAgKi9cbiAgc2VsZWN0KGRldmljZUlkOiBzdHJpbmcpIHtcbiAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUuIFBsZWFzZSB2aXNpdCBodHRwczovL2dldHN0cmVhbS5pby92aWRlby9kb2NzL3JlYWN0bmF0aXZlL2NvcmUvY2FtZXJhLWFuZC1taWNyb3Bob25lLyNzcGVha2VyLW1hbmFnZW1lbnQgZm9yIG1vcmUgZGV0YWlscycsXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnNldERldmljZShkZXZpY2VJZCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZXMgdGhlIG1hbmFnZXIuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGlzcG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgocykgPT4gcy51bnN1YnNjcmliZSgpKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2b2x1bWUgb2YgdGhlIGF1ZGlvIGVsZW1lbnRzXG4gICAqIEBwYXJhbSB2b2x1bWUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLlxuICAgKlxuICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZVxuICAgKi9cbiAgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhpcyBmZWF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlLiBQbGVhc2UgdmlzaXQgaHR0cHM6Ly9nZXRzdHJlYW0uaW8vdmlkZW8vZG9jcy9yZWFjdG5hdGl2ZS9jb3JlL2NhbWVyYS1hbmQtbWljcm9waG9uZS8jc3BlYWtlci1tYW5hZ2VtZW50IGZvciBtb3JlIGRldGFpbHMnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHZvbHVtZSAmJiAodm9sdW1lIDwgMCB8fCB2b2x1bWUgPiAxKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWb2x1bWUgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEnKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zZXRWb2x1bWUodm9sdW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZvbHVtZSBvZiBhIHBhcnRpY2lwYW50LlxuICAgKlxuICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgcGFydGljaXBhbnQncyBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdm9sdW1lIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMS4gU2V0IGl0IHRvIGB1bmRlZmluZWRgIHRvIHVzZSB0aGUgZGVmYXVsdCB2b2x1bWUuXG4gICAqL1xuICBzZXRQYXJ0aWNpcGFudFZvbHVtZShzZXNzaW9uSWQ6IHN0cmluZywgdm9sdW1lOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUuIFBsZWFzZSB2aXNpdCBodHRwczovL2dldHN0cmVhbS5pby92aWRlby9kb2NzL3JlYWN0bmF0aXZlL2NvcmUvY2FtZXJhLWFuZC1taWNyb3Bob25lLyNzcGVha2VyLW1hbmFnZW1lbnQgZm9yIG1vcmUgZGV0YWlscycsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodm9sdW1lICYmICh2b2x1bWUgPCAwIHx8IHZvbHVtZSA+IDEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZvbHVtZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMSwgb3IgdW5kZWZpbmVkJyk7XG4gICAgfVxuICAgIHRoaXMuY2FsbC5zdGF0ZS51cGRhdGVQYXJ0aWNpcGFudChzZXNzaW9uSWQsIHsgYXVkaW9Wb2x1bWU6IHZvbHVtZSB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgU3RyZWFtU2Z1Q2xpZW50IH0gZnJvbSAnLi9TdHJlYW1TZnVDbGllbnQnO1xuaW1wb3J0IHtcbiAgRGlzcGF0Y2hlcixcbiAgZ2V0R2VuZXJpY1NkcCxcbiAgaXNTZnVFdmVudCxcbiAgUHVibGlzaGVyLFxuICBTdWJzY3JpYmVyLFxufSBmcm9tICcuL3J0Yyc7XG5pbXBvcnQgeyBtdXRlVHlwZVRvVHJhY2tUeXBlIH0gZnJvbSAnLi9ydGMvaGVscGVycy90cmFja3MnO1xuaW1wb3J0IHsgdG9SdGNDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9ydGMvaGVscGVycy9ydGNDb25maWd1cmF0aW9uJztcbmltcG9ydCB7XG4gIGhhc1NjcmVlblNoYXJlLFxuICBoYXNTY3JlZW5TaGFyZUF1ZGlvLFxuICBoYXNWaWRlbyxcbn0gZnJvbSAnLi9oZWxwZXJzL3BhcnRpY2lwYW50VXRpbHMnO1xuaW1wb3J0IHtcbiAgcmVnaXN0ZXJFdmVudEhhbmRsZXJzLFxuICByZWdpc3RlclJpbmdpbmdDYWxsRXZlbnRIYW5kbGVycyxcbn0gZnJvbSAnLi9ldmVudHMvY2FsbEV2ZW50SGFuZGxlcnMnO1xuaW1wb3J0IHtcbiAgQ2FsbGluZ1N0YXRlLFxuICBDYWxsU3RhdGUsXG4gIFN0cmVhbVZpZGVvV3JpdGVhYmxlU3RhdGVTdG9yZSxcbn0gZnJvbSAnLi9zdG9yZSc7XG5pbXBvcnQge1xuICBjcmVhdGVTYWZlQXN5bmNTdWJzY3JpcHRpb24sXG4gIGNyZWF0ZVN1YnNjcmlwdGlvbixcbiAgZ2V0Q3VycmVudFZhbHVlLFxufSBmcm9tICcuL3N0b3JlL3J4VXRpbHMnO1xuaW1wb3J0IHR5cGUge1xuICBBY2NlcHRDYWxsUmVzcG9uc2UsXG4gIEJsb2NrVXNlclJlcXVlc3QsXG4gIEJsb2NrVXNlclJlc3BvbnNlLFxuICBDb2xsZWN0VXNlckZlZWRiYWNrUmVxdWVzdCxcbiAgQ29sbGVjdFVzZXJGZWVkYmFja1Jlc3BvbnNlLFxuICBDcmVkZW50aWFscyxcbiAgRW5kQ2FsbFJlc3BvbnNlLFxuICBHZXRDYWxsUmVzcG9uc2UsXG4gIEdldENhbGxTdGF0c1Jlc3BvbnNlLFxuICBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0LFxuICBHZXRPckNyZWF0ZUNhbGxSZXNwb25zZSxcbiAgR29MaXZlUmVxdWVzdCxcbiAgR29MaXZlUmVzcG9uc2UsXG4gIEpvaW5DYWxsUmVxdWVzdCxcbiAgSm9pbkNhbGxSZXNwb25zZSxcbiAgTGlzdFJlY29yZGluZ3NSZXNwb25zZSxcbiAgTGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2UsXG4gIE11dGVVc2Vyc1JlcXVlc3QsXG4gIE11dGVVc2Vyc1Jlc3BvbnNlLFxuICBQaW5SZXF1ZXN0LFxuICBQaW5SZXNwb25zZSxcbiAgUXVlcnlDYWxsTWVtYmVyc1JlcXVlc3QsXG4gIFF1ZXJ5Q2FsbE1lbWJlcnNSZXNwb25zZSxcbiAgUmVqZWN0Q2FsbFJlcXVlc3QsXG4gIFJlamVjdENhbGxSZXNwb25zZSxcbiAgUmVxdWVzdFBlcm1pc3Npb25SZXF1ZXN0LFxuICBSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlLFxuICBTZW5kQ2FsbEV2ZW50UmVxdWVzdCxcbiAgU2VuZENhbGxFdmVudFJlc3BvbnNlLFxuICBTZW5kUmVhY3Rpb25SZXF1ZXN0LFxuICBTZW5kUmVhY3Rpb25SZXNwb25zZSxcbiAgU3RhcnRITFNCcm9hZGNhc3RpbmdSZXNwb25zZSxcbiAgU3RhcnRSZWNvcmRpbmdSZXF1ZXN0LFxuICBTdGFydFJlY29yZGluZ1Jlc3BvbnNlLFxuICBTdGFydFRyYW5zY3JpcHRpb25SZXF1ZXN0LFxuICBTdGFydFRyYW5zY3JpcHRpb25SZXNwb25zZSxcbiAgU3RhdHNPcHRpb25zLFxuICBTdG9wSExTQnJvYWRjYXN0aW5nUmVzcG9uc2UsXG4gIFN0b3BMaXZlUmVzcG9uc2UsXG4gIFN0b3BSZWNvcmRpbmdSZXNwb25zZSxcbiAgU3RvcFRyYW5zY3JpcHRpb25SZXNwb25zZSxcbiAgVW5ibG9ja1VzZXJSZXF1ZXN0LFxuICBVbmJsb2NrVXNlclJlc3BvbnNlLFxuICBVbnBpblJlcXVlc3QsXG4gIFVucGluUmVzcG9uc2UsXG4gIFVwZGF0ZUNhbGxNZW1iZXJzUmVxdWVzdCxcbiAgVXBkYXRlQ2FsbE1lbWJlcnNSZXNwb25zZSxcbiAgVXBkYXRlQ2FsbFJlcXVlc3QsXG4gIFVwZGF0ZUNhbGxSZXNwb25zZSxcbiAgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdCxcbiAgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVzcG9uc2UsXG59IGZyb20gJy4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IE93bkNhcGFiaWxpdHkgfSBmcm9tICcuL2dlbi9jb29yZGluYXRvcic7XG5pbXBvcnQge1xuICBBdWRpb1RyYWNrVHlwZSxcbiAgQ2FsbENvbnN0cnVjdG9yLFxuICBDYWxsTGVhdmVPcHRpb25zLFxuICBEZWJvdW5jZVR5cGUsXG4gIEpvaW5DYWxsRGF0YSxcbiAgUHVibGlzaE9wdGlvbnMsXG4gIFN0cmVhbVZpZGVvUGFydGljaXBhbnQsXG4gIFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaGVzLFxuICBTdWJzY3JpcHRpb25DaGFuZ2VzLFxuICBUcmFja011dGVUeXBlLFxuICBWaWRlb1RyYWNrVHlwZSxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge1xuICBCZWhhdmlvclN1YmplY3QsXG4gIGRlYm91bmNlLFxuICBtYXAsXG4gIFN1YmplY3QsXG4gIHRha2VXaGlsZSxcbiAgdGltZXIsXG59IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIH0gZnJvbSAnLi9nZW4vdmlkZW8vc2Z1L3NpZ25hbF9ycGMvc2lnbmFsJztcbmltcG9ydCB7XG4gIFJlY29ubmVjdERldGFpbHMsXG4gIFZpZGVvTGF5ZXJTZXR0aW5nLFxufSBmcm9tICcuL2dlbi92aWRlby9zZnUvZXZlbnQvZXZlbnRzJztcbmltcG9ydCB7XG4gIENsaWVudERldGFpbHMsXG4gIFRyYWNrVHlwZSxcbiAgV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3ksXG59IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IGNyZWF0ZVN0YXRzUmVwb3J0ZXIsIFNmdVN0YXRzUmVwb3J0ZXIsIFN0YXRzUmVwb3J0ZXIgfSBmcm9tICcuL3N0YXRzJztcbmltcG9ydCB7IER5bmFzY2FsZU1hbmFnZXIgfSBmcm9tICcuL2hlbHBlcnMvRHluYXNjYWxlTWFuYWdlcic7XG5pbXBvcnQgeyBQZXJtaXNzaW9uc0NvbnRleHQgfSBmcm9tICcuL3Blcm1pc3Npb25zJztcbmltcG9ydCB7IENhbGxUeXBlcyB9IGZyb20gJy4vQ2FsbFR5cGUnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL2NsaWVudCc7XG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gJy4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi91dGlscyc7XG5pbXBvcnQge1xuICBBbGxDYWxsRXZlbnRzLFxuICBDYWxsRXZlbnRMaXN0ZW5lcixcbiAgRXJyb3JGcm9tUmVzcG9uc2UsXG4gIExvZ2dlcixcbiAgUmVqZWN0UmVhc29uLFxuICBTdHJlYW1DYWxsRXZlbnQsXG59IGZyb20gJy4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5pbXBvcnQgeyBnZXRDbGllbnREZXRhaWxzIH0gZnJvbSAnLi9jbGllbnQtZGV0YWlscyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQge1xuICBDYW1lcmFEaXJlY3Rpb24sXG4gIENhbWVyYU1hbmFnZXIsXG4gIE1pY3JvcGhvbmVNYW5hZ2VyLFxuICBTY3JlZW5TaGFyZU1hbmFnZXIsXG4gIFNwZWFrZXJNYW5hZ2VyLFxufSBmcm9tICcuL2RldmljZXMnO1xuaW1wb3J0IHsgZ2V0U2RrU2lnbmF0dXJlIH0gZnJvbSAnLi9zdGF0cy91dGlscyc7XG5pbXBvcnQgeyB3aXRob3V0Q29uY3VycmVuY3kgfSBmcm9tICcuL2hlbHBlcnMvY29uY3VycmVuY3knO1xuaW1wb3J0IHsgZW5zdXJlRXhoYXVzdGVkIH0gZnJvbSAnLi9oZWxwZXJzL2Vuc3VyZUV4aGF1c3RlZCc7XG5pbXBvcnQge1xuICBQcm9taXNlV2l0aFJlc29sdmVycyxcbiAgcHJvbWlzZVdpdGhSZXNvbHZlcnMsXG59IGZyb20gJy4vaGVscGVycy93aXRoUmVzb2x2ZXJzJztcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50YXRpb24gb2YgYSBgQ2FsbGAuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsIHtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIHRoZSBjYWxsLlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgdGhlIGNhbGwuXG4gICAqL1xuICByZWFkb25seSBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBDSUQuXG4gICAqL1xuICByZWFkb25seSBjaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHN0YXRlIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHJlYWRvbmx5IHN0YXRlID0gbmV3IENhbGxTdGF0ZSgpO1xuXG4gIC8qKlxuICAgKiBGbGFnIGluZGljYXRpbmcgd2hldGhlciB0aGlzIGNhbGwgaXMgXCJ3YXRjaGVkXCIgYW5kIHJlY2VpdmVzXG4gICAqIHVwZGF0ZXMgZnJvbSB0aGUgYmFja2VuZC5cbiAgICovXG4gIHdhdGNoaW5nOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEZXZpY2UgbWFuYWdlciBmb3IgdGhlIGNhbWVyYVxuICAgKi9cbiAgcmVhZG9ubHkgY2FtZXJhOiBDYW1lcmFNYW5hZ2VyO1xuXG4gIC8qKlxuICAgKiBEZXZpY2UgbWFuYWdlciBmb3IgdGhlIG1pY3JvcGhvbmUuXG4gICAqL1xuICByZWFkb25seSBtaWNyb3Bob25lOiBNaWNyb3Bob25lTWFuYWdlcjtcblxuICAvKipcbiAgICogRGV2aWNlIG1hbmFnZXIgZm9yIHRoZSBzcGVha2VyLlxuICAgKi9cbiAgcmVhZG9ubHkgc3BlYWtlcjogU3BlYWtlck1hbmFnZXI7XG5cbiAgLyoqXG4gICAqIERldmljZSBtYW5hZ2VyIGZvciB0aGUgc2NyZWVuLlxuICAgKi9cbiAgcmVhZG9ubHkgc2NyZWVuU2hhcmU6IFNjcmVlblNoYXJlTWFuYWdlcjtcblxuICAvKipcbiAgICogVGhlIER5bmFzY2FsZU1hbmFnZXIgaW5zdGFuY2UuXG4gICAqL1xuICByZWFkb25seSBkeW5hc2NhbGVNYW5hZ2VyID0gbmV3IER5bmFzY2FsZU1hbmFnZXIodGhpcyk7XG5cbiAgc3Vic2NyaWJlcj86IFN1YnNjcmliZXI7XG4gIHB1Ymxpc2hlcj86IFB1Ymxpc2hlcjtcblxuICAvKipcbiAgICogRmxhZyB0ZWxsaW5nIHdoZXRoZXIgdGhpcyBjYWxsIGlzIGEgXCJyaW5naW5nXCIgY2FsbC5cbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgcmluZ2luZ1N1YmplY3Q6IFN1YmplY3Q8Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIFRoZSBwZXJtaXNzaW9ucyBjb250ZXh0IG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIHJlYWRvbmx5IHBlcm1pc3Npb25zQ29udGV4dCA9IG5ldyBQZXJtaXNzaW9uc0NvbnRleHQoKTtcbiAgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCBkaXNwYXRjaGVyIGluc3RhbmNlIGRlZGljYXRlZCB0byB0aGlzIENhbGwgaW5zdGFuY2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGRpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuXG4gIHByaXZhdGUgdHJhY2tTdWJzY3JpcHRpb25zU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8e1xuICAgIHR5cGU6IERlYm91bmNlVHlwZTtcbiAgICBkYXRhOiBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHNbXTtcbiAgfT4oeyB0eXBlOiBEZWJvdW5jZVR5cGUuTUVESVVNLCBkYXRhOiBbXSB9KTtcblxuICBwcml2YXRlIHN0YXRzUmVwb3J0ZXI/OiBTdGF0c1JlcG9ydGVyO1xuICBwcml2YXRlIHNmdVN0YXRzUmVwb3J0ZXI/OiBTZnVTdGF0c1JlcG9ydGVyO1xuICBwcml2YXRlIGRyb3BUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIHJlYWRvbmx5IGNsaWVudFN0b3JlOiBTdHJlYW1WaWRlb1dyaXRlYWJsZVN0YXRlU3RvcmU7XG4gIHB1YmxpYyByZWFkb25seSBzdHJlYW1DbGllbnQ6IFN0cmVhbUNsaWVudDtcbiAgcHJpdmF0ZSBzZnVDbGllbnQ/OiBTdHJlYW1TZnVDbGllbnQ7XG4gIHByaXZhdGUgc2Z1Q2xpZW50VGFnID0gMDtcblxuICBwcml2YXRlIHJlYWRvbmx5IHJlY29ubmVjdENvbmN1cnJlbmN5VGFnID0gU3ltYm9sKCdyZWNvbm5lY3RDb25jdXJyZW5jeVRhZycpO1xuICBwcml2YXRlIHJlY29ubmVjdEF0dGVtcHRzID0gMDtcbiAgcHJpdmF0ZSByZWNvbm5lY3RTdHJhdGVneSA9IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LlVOU1BFQ0lGSUVEO1xuICBwcml2YXRlIGZhc3RSZWNvbm5lY3REZWFkbGluZVNlY29uZHM6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgbGFzdE9mZmxpbmVUaW1lc3RhbXA6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgbmV0d29ya0F2YWlsYWJsZVRhc2s6IFByb21pc2VXaXRoUmVzb2x2ZXJzPHZvaWQ+IHwgdW5kZWZpbmVkO1xuICAvLyBtYWludGFpbiB0aGUgb3JkZXIgb2YgcHVibGlzaGluZyB0cmFja3MgdG8gcmVzdG9yZSB0aGVtIGFmdGVyIGEgcmVjb25uZWN0aW9uXG4gIC8vIGl0IHNob3VsZG4ndCBjb250YWluIGR1cGxpY2F0ZXNcbiAgcHJpdmF0ZSB0cmFja1B1Ymxpc2hPcmRlcjogVHJhY2tUeXBlW10gPSBbXTtcbiAgcHJpdmF0ZSBqb2luQ2FsbERhdGE/OiBKb2luQ2FsbERhdGE7XG4gIHByaXZhdGUgaGFzSm9pbmVkT25jZSA9IGZhbHNlO1xuICBwcml2YXRlIGRldmljZVNldHRpbmdzQXBwbGllZE9uY2UgPSBmYWxzZTtcbiAgcHJpdmF0ZSBjcmVkZW50aWFscz86IENyZWRlbnRpYWxzO1xuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWFkb25seSBqb2luTGVhdmVDb25jdXJyZW5jeVRhZyA9IFN5bWJvbCgnam9pbkxlYXZlQ29uY3VycmVuY3lUYWcnKTtcblxuICAvKipcbiAgICogQSBsaXN0IGhvb2tzL2Z1bmN0aW9ucyB0byBpbnZva2Ugd2hlbiB0aGUgY2FsbCBpcyBsZWZ0LlxuICAgKiBBIHR5cGljYWwgdXNlIGNhc2UgaXMgdG8gY2xlYW4gdXAgc29tZSBnbG9iYWwgZXZlbnQgaGFuZGxlcnMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGxlYXZlQ2FsbEhvb2tzOiBTZXQ8RnVuY3Rpb24+ID0gbmV3IFNldCgpO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgc3RyZWFtQ2xpZW50QmFzZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBzdHJlYW1DbGllbnRFdmVudEhhbmRsZXJzID0gbmV3IE1hcDxGdW5jdGlvbiwgKCkgPT4gdm9pZD4oKTtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBgQ2FsbGAgaW5zdGFuY2UuXG4gICAqXG4gICAqIE5PVEU6IERvbid0IGNhbGwgdGhlIGNvbnN0cnVjdG9yIGRpcmVjdGx5LCBpbnN0ZWFkXG4gICAqIFVzZSB0aGUgW2BTdHJlYW1WaWRlb0NsaWVudC5jYWxsYF0oLi9TdHJlYW1WaWRlb0NsaWVudC5tZC8jY2FsbClcbiAgICogbWV0aG9kIHRvIGNvbnN0cnVjdCBhIGBDYWxsYCBpbnN0YW5jZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB0eXBlLFxuICAgIGlkLFxuICAgIHN0cmVhbUNsaWVudCxcbiAgICBtZW1iZXJzLFxuICAgIG93bkNhcGFiaWxpdGllcyxcbiAgICBzb3J0UGFydGljaXBhbnRzQnksXG4gICAgY2xpZW50U3RvcmUsXG4gICAgcmluZ2luZyA9IGZhbHNlLFxuICAgIHdhdGNoaW5nID0gZmFsc2UsXG4gIH06IENhbGxDb25zdHJ1Y3Rvcikge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuY2lkID0gYCR7dHlwZX06JHtpZH1gO1xuICAgIHRoaXMucmluZ2luZ1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHJpbmdpbmcpO1xuICAgIHRoaXMud2F0Y2hpbmcgPSB3YXRjaGluZztcbiAgICB0aGlzLnN0cmVhbUNsaWVudCA9IHN0cmVhbUNsaWVudDtcbiAgICB0aGlzLmNsaWVudFN0b3JlID0gY2xpZW50U3RvcmU7XG4gICAgdGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aCA9IGAvY2FsbC8ke3RoaXMudHlwZX0vJHt0aGlzLmlkfWA7XG4gICAgdGhpcy5sb2dnZXIgPSBnZXRMb2dnZXIoWydDYWxsJ10pO1xuXG4gICAgY29uc3QgY2FsbFR5cGVDb25maWcgPSBDYWxsVHlwZXMuZ2V0KHR5cGUpO1xuICAgIGNvbnN0IHBhcnRpY2lwYW50U29ydGVyID1cbiAgICAgIHNvcnRQYXJ0aWNpcGFudHNCeSB8fCBjYWxsVHlwZUNvbmZpZy5vcHRpb25zLnNvcnRQYXJ0aWNpcGFudHNCeTtcbiAgICBpZiAocGFydGljaXBhbnRTb3J0ZXIpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2V0U29ydFBhcnRpY2lwYW50c0J5KHBhcnRpY2lwYW50U29ydGVyKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLnNldE1lbWJlcnMobWVtYmVycyB8fCBbXSk7XG4gICAgdGhpcy5zdGF0ZS5zZXRPd25DYXBhYmlsaXRpZXMob3duQ2FwYWJpbGl0aWVzIHx8IFtdKTtcbiAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShcbiAgICAgIHJpbmdpbmcgPyBDYWxsaW5nU3RhdGUuUklOR0lORyA6IENhbGxpbmdTdGF0ZS5JRExFLFxuICAgICk7XG5cbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmFNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMubWljcm9waG9uZSA9IG5ldyBNaWNyb3Bob25lTWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLnNwZWFrZXIgPSBuZXcgU3BlYWtlck1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5zY3JlZW5TaGFyZSA9IG5ldyBTY3JlZW5TaGFyZU1hbmFnZXIodGhpcyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNldHVwKCkge1xuICAgIGF3YWl0IHdpdGhvdXRDb25jdXJyZW5jeSh0aGlzLmpvaW5MZWF2ZUNvbmN1cnJlbmN5VGFnLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChcbiAgICAgICAgdGhpcy5vbignYWxsJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgLy8gdXBkYXRlIHN0YXRlIHdpdGggdGhlIGxhdGVzdCBldmVudCBkYXRhXG4gICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGVGcm9tRXZlbnQoZXZlbnQpO1xuICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMubGVhdmVDYWxsSG9va3MuYWRkKHJlZ2lzdGVyRXZlbnRIYW5kbGVycyh0aGlzLCB0aGlzLmRpc3BhdGNoZXIpKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJFZmZlY3RzKCk7XG4gICAgICB0aGlzLnJlZ2lzdGVyUmVjb25uZWN0SGFuZGxlcnMoKTtcblxuICAgICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoXG4gICAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbihcbiAgICAgICAgICB0aGlzLnRyYWNrU3Vic2NyaXB0aW9uc1N1YmplY3QucGlwZShcbiAgICAgICAgICAgIGRlYm91bmNlKCh2KSA9PiB0aW1lcih2LnR5cGUpKSxcbiAgICAgICAgICAgIG1hcCgodikgPT4gdi5kYXRhKSxcbiAgICAgICAgICApLFxuICAgICAgICAgIChzdWJzY3JpcHRpb25zKSA9PlxuICAgICAgICAgICAgdGhpcy5zZnVDbGllbnQ/LnVwZGF0ZVN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucykuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgRmFpbGVkIHRvIHVwZGF0ZSB0cmFjayBzdWJzY3JpcHRpb25zYCwgZXJyKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApLFxuICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuTEVGVCkge1xuICAgICAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuSURMRSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZWdpc3RlckVmZmVjdHMoKSB7XG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoXG4gICAgICAvLyBoYW5kbGVzIHVwZGF0aW5nIHRoZSBwZXJtaXNzaW9ucyBjb250ZXh0IHdoZW4gdGhlIHNldHRpbmdzIGNoYW5nZS5cbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbih0aGlzLnN0YXRlLnNldHRpbmdzJCwgKHNldHRpbmdzKSA9PiB7XG4gICAgICAgIGlmICghc2V0dGluZ3MpIHJldHVybjtcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9uc0NvbnRleHQuc2V0Q2FsbFNldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChcbiAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVuIHRoZSB1c2VyIHBlcm1pc3Npb25zIGFyZSBtb2RpZmllZC5cbiAgICAgIGNyZWF0ZVNhZmVBc3luY1N1YnNjcmlwdGlvbihcbiAgICAgICAgdGhpcy5zdGF0ZS5vd25DYXBhYmlsaXRpZXMkLFxuICAgICAgICB0aGlzLmhhbmRsZU93bkNhcGFiaWxpdGllc1VwZGF0ZWQsXG4gICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChcbiAgICAgIC8vIGhhbmRsZXMgdGhlIGNhc2Ugd2hlbiB0aGUgdXNlciBpcyBibG9ja2VkIGJ5IHRoZSBjYWxsIG93bmVyLlxuICAgICAgY3JlYXRlU3Vic2NyaXB0aW9uKHRoaXMuc3RhdGUuYmxvY2tlZFVzZXJJZHMkLCBhc3luYyAoYmxvY2tlZFVzZXJJZHMpID0+IHtcbiAgICAgICAgaWYgKCFibG9ja2VkVXNlcklkcyB8fCBibG9ja2VkVXNlcklkcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJJZCA9IHRoaXMuY3VycmVudFVzZXJJZDtcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VySWQgJiYgYmxvY2tlZFVzZXJJZHMuaW5jbHVkZXMoY3VycmVudFVzZXJJZCkpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcignaW5mbycsICdMZWF2aW5nIGNhbGwgYmVjYXVzZSBvZiBiZWluZyBibG9ja2VkJyk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5sZWF2ZSh7IHJlYXNvbjogJ3VzZXIgYmxvY2tlZCcgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgJ0Vycm9yIGxlYXZpbmcgY2FsbCBhZnRlciBiZWluZyBibG9ja2VkJywgZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMubGVhdmVDYWxsSG9va3MuYWRkKFxuICAgICAgLy8gd2F0Y2ggZm9yIGF1dG8gZHJvcCBjYW5jZWxsYXRpb25cbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbih0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSQsIChjYWxsaW5nU3RhdGUpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnJpbmdpbmcpIHJldHVybjtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCB8fFxuICAgICAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5JTkcgfHxcbiAgICAgICAgICBjYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5MRUZUXG4gICAgICAgICkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRyb3BUaW1lb3V0KTtcbiAgICAgICAgICB0aGlzLmRyb3BUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoXG4gICAgICAvLyBcInJpbmdpbmdcIiBtb2RlIGVmZmVjdHMgYW5kIGV2ZW50IGhhbmRsZXJzXG4gICAgICBjcmVhdGVTdWJzY3JpcHRpb24odGhpcy5yaW5naW5nU3ViamVjdCwgKGlzUmluZ2luZykgPT4ge1xuICAgICAgICBpZiAoIWlzUmluZ2luZykgcmV0dXJuO1xuICAgICAgICBjb25zdCBjYWxsU2Vzc2lvbiA9IHRoaXMuc3RhdGUuc2Vzc2lvbjtcbiAgICAgICAgY29uc3QgcmVjZWl2ZXJfaWQgPSB0aGlzLmNsaWVudFN0b3JlLmNvbm5lY3RlZFVzZXI/LmlkO1xuICAgICAgICBjb25zdCBlbmRlZF9hdCA9IGNhbGxTZXNzaW9uPy5lbmRlZF9hdDtcbiAgICAgICAgY29uc3QgY3JlYXRlZF9ieV9pZCA9IHRoaXMuc3RhdGUuY3JlYXRlZEJ5Py5pZDtcbiAgICAgICAgY29uc3QgcmVqZWN0ZWRfYnkgPSBjYWxsU2Vzc2lvbj8ucmVqZWN0ZWRfYnk7XG4gICAgICAgIGNvbnN0IGFjY2VwdGVkX2J5ID0gY2FsbFNlc3Npb24/LmFjY2VwdGVkX2J5O1xuICAgICAgICBsZXQgbGVhdmVDYWxsSWRsZSA9IGZhbHNlO1xuICAgICAgICBpZiAoZW5kZWRfYXQpIHtcbiAgICAgICAgICAvLyBjYWxsIHdhcyBlbmRlZCBiZWZvcmUgaXQgd2FzIGFjY2VwdGVkIG9yIHJlamVjdGVkIHNvIHdlIHNob3VsZCBsZWF2ZSBpdCB0byBpZGxlXG4gICAgICAgICAgbGVhdmVDYWxsSWRsZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoY3JlYXRlZF9ieV9pZCAmJiByZWplY3RlZF9ieSkge1xuICAgICAgICAgIGlmIChyZWplY3RlZF9ieVtjcmVhdGVkX2J5X2lkXSkge1xuICAgICAgICAgICAgLy8gY2FsbCB3YXMgY2FuY2VsbGVkIGJ5IHRoZSBjYWxsZXJcbiAgICAgICAgICAgIGxlYXZlQ2FsbElkbGUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZWNlaXZlcl9pZCAmJiByZWplY3RlZF9ieSkge1xuICAgICAgICAgIGlmIChyZWplY3RlZF9ieVtyZWNlaXZlcl9pZF0pIHtcbiAgICAgICAgICAgIC8vIGNhbGwgd2FzIHJlamVjdGVkIGJ5IHRoZSByZWNlaXZlciBpbiBzb21lIG90aGVyIGRldmljZVxuICAgICAgICAgICAgbGVhdmVDYWxsSWRsZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlY2VpdmVyX2lkICYmIGFjY2VwdGVkX2J5KSB7XG4gICAgICAgICAgaWYgKGFjY2VwdGVkX2J5W3JlY2VpdmVyX2lkXSkge1xuICAgICAgICAgICAgLy8gY2FsbCB3YXMgYWNjZXB0ZWQgYnkgdGhlIHJlY2VpdmVyIGluIHNvbWUgb3RoZXIgZGV2aWNlXG4gICAgICAgICAgICBsZWF2ZUNhbGxJZGxlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlYXZlQ2FsbElkbGUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5jYWxsaW5nU3RhdGUgIT09IENhbGxpbmdTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuSURMRSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5SSU5HSU5HKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZUF1dG9Ecm9wKCk7XG4gICAgICAgICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQocmVnaXN0ZXJSaW5naW5nQ2FsbEV2ZW50SGFuZGxlcnModGhpcykpO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVPd25DYXBhYmlsaXRpZXNVcGRhdGVkID0gYXN5bmMgKFxuICAgIG93bkNhcGFiaWxpdGllczogT3duQ2FwYWJpbGl0eVtdLFxuICApID0+IHtcbiAgICAvLyB1cGRhdGUgdGhlIHBlcm1pc3Npb24gY29udGV4dC5cbiAgICB0aGlzLnBlcm1pc3Npb25zQ29udGV4dC5zZXRQZXJtaXNzaW9ucyhvd25DYXBhYmlsaXRpZXMpO1xuXG4gICAgaWYgKCF0aGlzLnB1Ymxpc2hlcikgcmV0dXJuO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhlIHVzZXIgc3RpbGwgaGFzIHB1Ymxpc2hpbmcgcGVybWlzc2lvbnMgYW5kIHN0b3AgcHVibGlzaGluZyBpZiBub3QuXG4gICAgY29uc3QgcGVybWlzc2lvblRvVHJhY2tUeXBlID0ge1xuICAgICAgW093bkNhcGFiaWxpdHkuU0VORF9BVURJT106IFRyYWNrVHlwZS5BVURJTyxcbiAgICAgIFtPd25DYXBhYmlsaXR5LlNFTkRfVklERU9dOiBUcmFja1R5cGUuVklERU8sXG4gICAgICBbT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRV06IFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUsXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IFtwZXJtaXNzaW9uLCB0cmFja1R5cGVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgcGVybWlzc2lvblRvVHJhY2tUeXBlLFxuICAgICkpIHtcbiAgICAgIGNvbnN0IGhhc1Blcm1pc3Npb24gPSB0aGlzLnBlcm1pc3Npb25zQ29udGV4dC5oYXNQZXJtaXNzaW9uKFxuICAgICAgICBwZXJtaXNzaW9uIGFzIE93bkNhcGFiaWxpdHksXG4gICAgICApO1xuICAgICAgaWYgKGhhc1Blcm1pc3Npb24pIGNvbnRpbnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3dpdGNoICh0cmFja1R5cGUpIHtcbiAgICAgICAgICBjYXNlIFRyYWNrVHlwZS5BVURJTzpcbiAgICAgICAgICAgIGlmICh0aGlzLm1pY3JvcGhvbmUuZW5hYmxlZCkgYXdhaXQgdGhpcy5taWNyb3Bob25lLmRpc2FibGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgVHJhY2tUeXBlLlZJREVPOlxuICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLmVuYWJsZWQpIGF3YWl0IHRoaXMuY2FtZXJhLmRpc2FibGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgVHJhY2tUeXBlLlNDUkVFTl9TSEFSRTpcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcmVlblNoYXJlLmVuYWJsZWQpIGF3YWl0IHRoaXMuc2NyZWVuU2hhcmUuZGlzYWJsZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgIGBDYW4ndCBkaXNhYmxlIG1pYy9jYW1lcmEvc2NyZWVuc2hhcmUgYWZ0ZXIgcmV2b2tlZCBwZXJtaXNzaW9uc2AsXG4gICAgICAgICAgZXJyLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogWW91IGNhbiBzdWJzY3JpYmUgdG8gV2ViU29ja2V0IGV2ZW50cyBwcm92aWRlZCBieSB0aGUgQVBJLiBUbyByZW1vdmUgYSBzdWJzY3JpcHRpb24sIGNhbGwgdGhlIGBvZmZgIG1ldGhvZC5cbiAgICogUGxlYXNlIG5vdGUgdGhhdCBzdWJzY3JpYmluZyB0byBXZWJTb2NrZXQgZXZlbnRzIGlzIGFuIGFkdmFuY2VkIHVzZS1jYXNlLlxuICAgKiBGb3IgbW9zdCB1c2UtY2FzZXMsIGl0IHNob3VsZCBiZSBlbm91Z2ggdG8gd2F0Y2ggZm9yIHN0YXRlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUuXG4gICAqIEBwYXJhbSBmbiB0aGUgZXZlbnQgaGFuZGxlci5cbiAgICovXG4gIG9uID0gPEUgZXh0ZW5kcyBrZXlvZiBBbGxDYWxsRXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgZm46IENhbGxFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICBpZiAoaXNTZnVFdmVudChldmVudE5hbWUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaGVyLm9uKGV2ZW50TmFtZSwgZm4pO1xuICAgIH1cblxuICAgIGNvbnN0IG9mZkhhbmRsZXIgPSB0aGlzLnN0cmVhbUNsaWVudC5vbihldmVudE5hbWUsIChlKSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IGUgYXMgU3RyZWFtQ2FsbEV2ZW50O1xuICAgICAgaWYgKGV2ZW50LmNhbGxfY2lkICYmIGV2ZW50LmNhbGxfY2lkID09PSB0aGlzLmNpZCkge1xuICAgICAgICBmbihldmVudCBhcyBBbGxDYWxsRXZlbnRzW0VdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGtlZXAgdGhlICdvZmYnIHJlZmVyZW5jZSByZXR1cm5lZCBieSB0aGUgc3RyZWFtIGNsaWVudFxuICAgIHRoaXMuc3RyZWFtQ2xpZW50RXZlbnRIYW5kbGVycy5zZXQoZm4sIG9mZkhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLm9mZihldmVudE5hbWUsIGZuKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgc3Vic2NyaXB0aW9uIGZvciBXZWJTb2NrZXQgZXZlbnRzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IHRoZSBgb25gIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50TmFtZSB0aGUgZXZlbnQgbmFtZS5cbiAgICogQHBhcmFtIGZuIHRoZSBldmVudCBoYW5kbGVyLlxuICAgKi9cbiAgb2ZmID0gPEUgZXh0ZW5kcyBrZXlvZiBBbGxDYWxsRXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgZm46IENhbGxFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICBpZiAoaXNTZnVFdmVudChldmVudE5hbWUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaGVyLm9mZihldmVudE5hbWUsIGZuKTtcbiAgICB9XG5cbiAgICAvLyB1bnN1YnNjcmliZSBmcm9tIHRoZSBzdHJlYW0gY2xpZW50IGV2ZW50IGJ5IHVzaW5nIHRoZSAnb2ZmJyByZWZlcmVuY2VcbiAgICBjb25zdCByZWdpc3RlcmVkT2ZmSGFuZGxlciA9IHRoaXMuc3RyZWFtQ2xpZW50RXZlbnRIYW5kbGVycy5nZXQoZm4pO1xuICAgIGlmIChyZWdpc3RlcmVkT2ZmSGFuZGxlcikge1xuICAgICAgcmVnaXN0ZXJlZE9mZkhhbmRsZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExlYXZlIHRoZSBjYWxsIGFuZCBzdG9wIHRoZSBtZWRpYSBzdHJlYW1zIHRoYXQgd2VyZSBwdWJsaXNoZWQgYnkgdGhlIGNhbGwuXG4gICAqL1xuICBsZWF2ZSA9IGFzeW5jICh7XG4gICAgcmVqZWN0ID0gZmFsc2UsXG4gICAgcmVhc29uID0gJ3VzZXIgaXMgbGVhdmluZyB0aGUgY2FsbCcsXG4gIH06IENhbGxMZWF2ZU9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGF3YWl0IHdpdGhvdXRDb25jdXJyZW5jeSh0aGlzLmpvaW5MZWF2ZUNvbmN1cnJlbmN5VGFnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWxsaW5nU3RhdGUgPSB0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZTtcbiAgICAgIGlmIChjYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5MRUZUKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxlYXZlIGNhbGwgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGxlZnQuJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5KT0lOSU5HKSB7XG4gICAgICAgIGNvbnN0IHdhaXRVbnRpbENhbGxKb2luZWQgPSAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSRcbiAgICAgICAgICAgICAgLnBpcGUodGFrZVdoaWxlKChzdGF0ZSkgPT4gc3RhdGUgIT09IENhbGxpbmdTdGF0ZS5KT0lORUQsIHRydWUpKVxuICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHdhaXRVbnRpbENhbGxKb2luZWQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucmluZ2luZykge1xuICAgICAgICAvLyBJJ20gdGhlIG9uZSB3aG8gc3RhcnRlZCB0aGUgY2FsbCwgc28gSSBzaG91bGQgY2FuY2VsIGl0LlxuICAgICAgICBjb25zdCBoYXNPdGhlclBhcnRpY2lwYW50cyA9IHRoaXMuc3RhdGUucmVtb3RlUGFydGljaXBhbnRzLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmlzQ3JlYXRlZEJ5TWUgJiZcbiAgICAgICAgICAhaGFzT3RoZXJQYXJ0aWNpcGFudHMgJiZcbiAgICAgICAgICBjYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5SSU5HSU5HXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIFNpZ25hbHMgb3RoZXIgdXNlcnMgdGhhdCBJIGhhdmUgY2FuY2VsbGVkIG15IGNhbGwgdG8gdGhlbVxuICAgICAgICAgIC8vIGJlZm9yZSB0aGV5IGFjY2VwdGVkIGl0LlxuICAgICAgICAgIGF3YWl0IHRoaXMucmVqZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVqZWN0ICYmIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcpIHtcbiAgICAgICAgICAvLyBTaWduYWxzIG90aGVyIHVzZXJzIHRoYXQgSSBoYXZlIHJlamVjdGVkIHRoZSBpbmNvbWluZyBjYWxsLlxuICAgICAgICAgIGF3YWl0IHRoaXMucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGF0c1JlcG9ydGVyPy5zdG9wKCk7XG4gICAgICB0aGlzLnN0YXRzUmVwb3J0ZXIgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMuc2Z1U3RhdHNSZXBvcnRlcj8uc3RvcCgpO1xuICAgICAgdGhpcy5zZnVTdGF0c1JlcG9ydGVyID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnN1YnNjcmliZXI/LmNsb3NlKCk7XG4gICAgICB0aGlzLnN1YnNjcmliZXIgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMucHVibGlzaGVyPy5jbG9zZSh7IHN0b3BUcmFja3M6IHRydWUgfSk7XG4gICAgICB0aGlzLnB1Ymxpc2hlciA9IHVuZGVmaW5lZDtcblxuICAgICAgYXdhaXQgdGhpcy5zZnVDbGllbnQ/LmxlYXZlQW5kQ2xvc2UocmVhc29uKTtcbiAgICAgIHRoaXMuc2Z1Q2xpZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuTEVGVCk7XG5cbiAgICAgIC8vIENhbGwgYWxsIGxlYXZlIGNhbGwgaG9va3MsIGUuZy4gdG8gY2xlYW4gdXAgZ2xvYmFsIGV2ZW50IGhhbmRsZXJzXG4gICAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmZvckVhY2goKGhvb2spID0+IGhvb2soKSk7XG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0pvaW5lZE9uY2UgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xpZW50U3RvcmUudW5yZWdpc3RlckNhbGwodGhpcyk7XG5cbiAgICAgIHRoaXMuY2FtZXJhLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMubWljcm9waG9uZS5kaXNwb3NlKCk7XG4gICAgICB0aGlzLnNjcmVlblNoYXJlLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuc3BlYWtlci5kaXNwb3NlKCk7XG5cbiAgICAgIGNvbnN0IHN0b3BPbkxlYXZlUHJvbWlzZXM6IFByb21pc2U8dm9pZD5bXSA9IFtdO1xuICAgICAgaWYgKHRoaXMuY2FtZXJhLnN0b3BPbkxlYXZlKSB7XG4gICAgICAgIHN0b3BPbkxlYXZlUHJvbWlzZXMucHVzaCh0aGlzLmNhbWVyYS5kaXNhYmxlKHRydWUpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1pY3JvcGhvbmUuc3RvcE9uTGVhdmUpIHtcbiAgICAgICAgc3RvcE9uTGVhdmVQcm9taXNlcy5wdXNoKHRoaXMubWljcm9waG9uZS5kaXNhYmxlKHRydWUpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNjcmVlblNoYXJlLnN0b3BPbkxlYXZlKSB7XG4gICAgICAgIHN0b3BPbkxlYXZlUHJvbWlzZXMucHVzaCh0aGlzLnNjcmVlblNoYXJlLmRpc2FibGUodHJ1ZSkpO1xuICAgICAgfVxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoc3RvcE9uTGVhdmVQcm9taXNlcyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGNhbGwgaXMgXCJyaW5naW5nXCIgdHlwZSBvZiBjYWxsLlxuICAgKi9cbiAgZ2V0IHJpbmdpbmcoKSB7XG4gICAgcmV0dXJuIGdldEN1cnJlbnRWYWx1ZSh0aGlzLnJpbmdpbmdTdWJqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdXNlciBJRC5cbiAgICovXG4gIGdldCBjdXJyZW50VXNlcklkKCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudFN0b3JlLmNvbm5lY3RlZFVzZXI/LmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGNhbGwgd2FzIGNyZWF0ZWQgYnkgdGhlIGN1cnJlbnQgdXNlci5cbiAgICovXG4gIGdldCBpc0NyZWF0ZWRCeU1lKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmNyZWF0ZWRCeT8uaWQgPT09IHRoaXMuY3VycmVudFVzZXJJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkcyB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNhbGwuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMucmluZyBpZiBzZXQgdG8gdHJ1ZSwgYSBgY2FsbC5yaW5nYCBldmVudCB3aWxsIGJlIHNlbnQgdG8gdGhlIGNhbGwgbWVtYmVycy5cbiAgICogQHBhcmFtIHBhcmFtcy5ub3RpZnkgaWYgc2V0IHRvIHRydWUsIGEgYGNhbGwubm90aWZpY2F0aW9uYCBldmVudCB3aWxsIGJlIHNlbnQgdG8gdGhlIGNhbGwgbWVtYmVycy5cbiAgICogQHBhcmFtIHBhcmFtcy5tZW1iZXJzX2xpbWl0IHRoZSB0b3RhbCBudW1iZXIgb2YgbWVtYmVycyB0byByZXR1cm4gYXMgcGFydCBvZiB0aGUgcmVzcG9uc2UuXG4gICAqL1xuICBnZXQgPSBhc3luYyAocGFyYW1zPzoge1xuICAgIHJpbmc/OiBib29sZWFuO1xuICAgIG5vdGlmeT86IGJvb2xlYW47XG4gICAgbWVtYmVyc19saW1pdD86IG51bWJlcjtcbiAgfSkgPT4ge1xuICAgIGF3YWl0IHRoaXMuc2V0dXAoKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc3RyZWFtQ2xpZW50LmdldDxHZXRDYWxsUmVzcG9uc2U+KFxuICAgICAgdGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aCxcbiAgICAgIHBhcmFtcyxcbiAgICApO1xuXG4gICAgdGhpcy5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKHJlc3BvbnNlLmNhbGwpO1xuICAgIHRoaXMuc3RhdGUuc2V0TWVtYmVycyhyZXNwb25zZS5tZW1iZXJzKTtcbiAgICB0aGlzLnN0YXRlLnNldE93bkNhcGFiaWxpdGllcyhyZXNwb25zZS5vd25fY2FwYWJpbGl0aWVzKTtcblxuICAgIGlmIChwYXJhbXM/LnJpbmcgfHwgdGhpcy5yaW5naW5nKSB7XG4gICAgICAvLyB0aGUgY2FsbCByZXNwb25zZSBjYW4gaW5kaWNhdGUgd2hlcmUgdGhlIGNhbGwgaXMgc3RpbGwgcmluZ2luZyBvciBub3RcbiAgICAgIHRoaXMucmluZ2luZ1N1YmplY3QubmV4dCh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdHJlYW1DbGllbnQuX2hhc0Nvbm5lY3Rpb25JRCgpKSB7XG4gICAgICB0aGlzLndhdGNoaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2xpZW50U3RvcmUucmVnaXN0ZXJDYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuYXBwbHlEZXZpY2VDb25maWcoZmFsc2UpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2FkcyB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNhbGwgYW5kIGNyZWF0ZXMgaXQgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdG8gY3JlYXRlIHRoZSBjYWxsIHdpdGguXG4gICAqL1xuICBnZXRPckNyZWF0ZSA9IGFzeW5jIChkYXRhPzogR2V0T3JDcmVhdGVDYWxsUmVxdWVzdCkgPT4ge1xuICAgIGF3YWl0IHRoaXMuc2V0dXAoKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBHZXRPckNyZWF0ZUNhbGxSZXNwb25zZSxcbiAgICAgIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3RcbiAgICA+KHRoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGgsIGRhdGEpO1xuXG4gICAgdGhpcy5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKHJlc3BvbnNlLmNhbGwpO1xuICAgIHRoaXMuc3RhdGUuc2V0TWVtYmVycyhyZXNwb25zZS5tZW1iZXJzKTtcbiAgICB0aGlzLnN0YXRlLnNldE93bkNhcGFiaWxpdGllcyhyZXNwb25zZS5vd25fY2FwYWJpbGl0aWVzKTtcblxuICAgIGlmIChkYXRhPy5yaW5nIHx8IHRoaXMucmluZ2luZykge1xuICAgICAgLy8gdGhlIGNhbGwgcmVzcG9uc2UgY2FuIGluZGljYXRlIHdoZXJlIHRoZSBjYWxsIGlzIHN0aWxsIHJpbmdpbmcgb3Igbm90XG4gICAgICB0aGlzLnJpbmdpbmdTdWJqZWN0Lm5leHQodHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RyZWFtQ2xpZW50Ll9oYXNDb25uZWN0aW9uSUQoKSkge1xuICAgICAgdGhpcy53YXRjaGluZyA9IHRydWU7XG4gICAgICB0aGlzLmNsaWVudFN0b3JlLnJlZ2lzdGVyQ2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLmFwcGx5RGV2aWNlQ29uZmlnKGZhbHNlKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNhbGxcbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdG8gY3JlYXRlIHRoZSBjYWxsIHdpdGguXG4gICAqL1xuICBjcmVhdGUgPSBhc3luYyAoZGF0YT86IEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRPckNyZWF0ZShkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogQSBzaG9ydGN1dCBmb3Ige0BsaW5rIENhbGwuZ2V0fSB3aXRoIGByaW5nYCBwYXJhbWV0ZXIgc2V0IHRvIGB0cnVlYC5cbiAgICogV2lsbCBzZW5kIGEgYGNhbGwucmluZ2AgZXZlbnQgdG8gdGhlIGNhbGwgbWVtYmVycy5cbiAgICovXG4gIHJpbmcgPSBhc3luYyAoKTogUHJvbWlzZTxHZXRDYWxsUmVzcG9uc2U+ID0+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXQoeyByaW5nOiB0cnVlIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIHNob3J0Y3V0IGZvciB7QGxpbmsgQ2FsbC5nZXR9IHdpdGggYG5vdGlmeWAgcGFyYW1ldGVyIHNldCB0byBgdHJ1ZWAuXG4gICAqIFdpbGwgc2VuZCBhIGBjYWxsLm5vdGlmaWNhdGlvbmAgZXZlbnQgdG8gdGhlIGNhbGwgbWVtYmVycy5cbiAgICovXG4gIG5vdGlmeSA9IGFzeW5jICgpOiBQcm9taXNlPEdldENhbGxSZXNwb25zZT4gPT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldCh7IG5vdGlmeTogdHJ1ZSB9KTtcbiAgfTtcblxuICAvKipcbiAgICogTWFya3MgdGhlIGluY29taW5nIGNhbGwgYXMgYWNjZXB0ZWQuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIG9ubHkgZm9yIFwicmluZ2luZ1wiIGNhbGwgZmxvd3MuXG4gICAqIHtAbGluayBDYWxsLmpvaW59IGludm9rZXMgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseSBmb3IgeW91IHdoZW4gam9pbmluZyBhIGNhbGwuXG4gICAqIFVubGVzcyB5b3UgYXJlIGltcGxlbWVudGluZyBhIGN1c3RvbSBcInJpbmdpbmdcIiBmbG93LCB5b3Ugc2hvdWxkIG5vdCB1c2UgdGhpcyBtZXRob2QuXG4gICAqL1xuICBhY2NlcHQgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8QWNjZXB0Q2FsbFJlc3BvbnNlPihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L2FjY2VwdGAsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFya3MgdGhlIGluY29taW5nIGNhbGwgYXMgcmVqZWN0ZWQuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIG9ubHkgZm9yIFwicmluZ2luZ1wiIGNhbGwgZmxvd3MuXG4gICAqIHtAbGluayBDYWxsLmxlYXZlfSBpbnZva2VzIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkgZm9yIHlvdSB3aGVuIHlvdSBsZWF2ZSBvciByZWplY3QgdGhpcyBjYWxsLlxuICAgKiBVbmxlc3MgeW91IGFyZSBpbXBsZW1lbnRpbmcgYSBjdXN0b20gXCJyaW5naW5nXCIgZmxvdywgeW91IHNob3VsZCBub3QgdXNlIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0gcmVhc29uIHRoZSByZWFzb24gZm9yIHJlamVjdGluZyB0aGUgY2FsbC5cbiAgICovXG4gIHJlamVjdCA9IGFzeW5jIChyZWFzb24/OiBSZWplY3RSZWFzb24pOiBQcm9taXNlPFJlamVjdENhbGxSZXNwb25zZT4gPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFJlamVjdENhbGxSZXNwb25zZSwgUmVqZWN0Q2FsbFJlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vcmVqZWN0YCxcbiAgICAgIHsgcmVhc29uOiByZWFzb24gfSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIHN0YXJ0IHRvIHdhdGNoIGZvciBjYWxsIHJlbGF0ZWQgV2ViU29ja2V0IGV2ZW50cyBhbmQgaW5pdGlhdGUgYSBjYWxsIHNlc3Npb24gd2l0aCB0aGUgc2VydmVyLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgb25jZSB0aGUgY2FsbCBqb2luLWZsb3cgaGFzIGZpbmlzaGVkLlxuICAgKi9cbiAgam9pbiA9IGFzeW5jIChkYXRhPzogSm9pbkNhbGxEYXRhKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgYXdhaXQgdGhpcy5zZXR1cCgpO1xuICAgIGNvbnN0IGNhbGxpbmdTdGF0ZSA9IHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlO1xuICAgIGlmIChbQ2FsbGluZ1N0YXRlLkpPSU5FRCwgQ2FsbGluZ1N0YXRlLkpPSU5JTkddLmluY2x1ZGVzKGNhbGxpbmdTdGF0ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSWxsZWdhbCBTdGF0ZTogY2FsbC5qb2luKCkgc2hhbGwgYmUgY2FsbGVkIG9ubHkgb25jZWApO1xuICAgIH1cblxuICAgIHRoaXMuam9pbkNhbGxEYXRhID0gZGF0YTtcblxuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdTdGFydGluZyBqb2luIGZsb3cnKTtcbiAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuSk9JTklORyk7XG5cbiAgICBjb25zdCBwZXJmb3JtaW5nTWlncmF0aW9uID1cbiAgICAgIHRoaXMucmVjb25uZWN0U3RyYXRlZ3kgPT09IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5Lk1JR1JBVEU7XG4gICAgY29uc3QgcGVyZm9ybWluZ1Jlam9pbiA9XG4gICAgICB0aGlzLnJlY29ubmVjdFN0cmF0ZWd5ID09PSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5SRUpPSU47XG4gICAgY29uc3QgcGVyZm9ybWluZ0Zhc3RSZWNvbm5lY3QgPVxuICAgICAgdGhpcy5yZWNvbm5lY3RTdHJhdGVneSA9PT0gV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3kuRkFTVDtcblxuICAgIGxldCBzdGF0c09wdGlvbnMgPSB0aGlzLnNmdVN0YXRzUmVwb3J0ZXI/Lm9wdGlvbnM7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuY3JlZGVudGlhbHMgfHxcbiAgICAgICFzdGF0c09wdGlvbnMgfHxcbiAgICAgIHBlcmZvcm1pbmdSZWpvaW4gfHxcbiAgICAgIHBlcmZvcm1pbmdNaWdyYXRpb25cbiAgICApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpvaW5SZXNwb25zZSA9IGF3YWl0IHRoaXMuZG9Kb2luUmVxdWVzdChkYXRhKTtcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGpvaW5SZXNwb25zZS5jcmVkZW50aWFscztcbiAgICAgICAgc3RhdHNPcHRpb25zID0gam9pblJlc3BvbnNlLnN0YXRzX29wdGlvbnM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyByZXN0b3JlIHRoZSBwcmV2aW91cyBjYWxsIHN0YXRlIGlmIHRoZSBqb2luLWZsb3cgZmFpbHNcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoY2FsbGluZ1N0YXRlKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJldmlvdXNTZnVDbGllbnQgPSB0aGlzLnNmdUNsaWVudDtcbiAgICBjb25zdCBwcmV2aW91c1Nlc3Npb25JZCA9IHByZXZpb3VzU2Z1Q2xpZW50Py5zZXNzaW9uSWQ7XG4gICAgY29uc3QgaXNXc0hlYWx0aHkgPSAhIXByZXZpb3VzU2Z1Q2xpZW50Py5pc0hlYWx0aHk7XG4gICAgY29uc3Qgc2Z1Q2xpZW50ID1cbiAgICAgIHBlcmZvcm1pbmdSZWpvaW4gfHwgcGVyZm9ybWluZ01pZ3JhdGlvbiB8fCAhaXNXc0hlYWx0aHlcbiAgICAgICAgPyBuZXcgU3RyZWFtU2Z1Q2xpZW50KHtcbiAgICAgICAgICAgIGxvZ1RhZzogU3RyaW5nKHRoaXMuc2Z1Q2xpZW50VGFnKyspLFxuICAgICAgICAgICAgZGlzcGF0Y2hlcjogdGhpcy5kaXNwYXRjaGVyLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IHRoaXMuY3JlZGVudGlhbHMsXG4gICAgICAgICAgICBzdHJlYW1DbGllbnQ6IHRoaXMuc3RyZWFtQ2xpZW50LFxuICAgICAgICAgICAgLy8gYSBuZXcgc2Vzc2lvbl9pZCBpcyBuZWNlc3NhcnkgZm9yIHRoZSBSRUpPSU4gc3RyYXRlZ3kuXG4gICAgICAgICAgICAvLyB3ZSB1c2UgdGhlIHByZXZpb3VzIHNlc3Npb25faWQgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHBlcmZvcm1pbmdSZWpvaW4gPyB1bmRlZmluZWQgOiBwcmV2aW91c1Nlc3Npb25JZCxcbiAgICAgICAgICAgIG9uU2lnbmFsQ2xvc2U6ICgpID0+IHRoaXMuaGFuZGxlU2Z1U2lnbmFsQ2xvc2Uoc2Z1Q2xpZW50KSxcbiAgICAgICAgICB9KVxuICAgICAgICA6IHByZXZpb3VzU2Z1Q2xpZW50O1xuICAgIHRoaXMuc2Z1Q2xpZW50ID0gc2Z1Q2xpZW50O1xuXG4gICAgY29uc3QgY2xpZW50RGV0YWlscyA9IGdldENsaWVudERldGFpbHMoKTtcbiAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHNlbmQgSm9pblJlcXVlc3QgaWYgd2UgYXJlIHJlLXVzaW5nIGFuIGV4aXN0aW5nIGhlYWx0aHkgU0ZVIGNsaWVudFxuICAgIGlmIChwcmV2aW91c1NmdUNsaWVudCAhPT0gc2Z1Q2xpZW50KSB7XG4gICAgICAvLyBwcmVwYXJlIGEgZ2VuZXJpYyBTRFAgYW5kIHNlbmQgaXQgdG8gdGhlIFNGVS5cbiAgICAgIC8vIHRoaXMgaXMgYSB0aHJvdy1hd2F5IFNEUCB0aGF0IHRoZSBTRlUgd2lsbCB1c2UgdG8gZGV0ZXJtaW5lXG4gICAgICAvLyB0aGUgY2FwYWJpbGl0aWVzIG9mIHRoZSBjbGllbnQgKGNvZGVjIHN1cHBvcnQsIGV0Yy4pXG4gICAgICBjb25zdCByZWNlaXZpbmdDYXBhYmlsaXRpZXNTZHAgPSBhd2FpdCBnZXRHZW5lcmljU2RwKCdyZWN2b25seScpO1xuICAgICAgY29uc3QgcmVjb25uZWN0RGV0YWlscyA9XG4gICAgICAgIHRoaXMucmVjb25uZWN0U3RyYXRlZ3kgIT09IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LlVOU1BFQ0lGSUVEXG4gICAgICAgICAgPyB0aGlzLmdldFJlY29ubmVjdERldGFpbHMoZGF0YT8ubWlncmF0aW5nX2Zyb20sIHByZXZpb3VzU2Vzc2lvbklkKVxuICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3QgeyBjYWxsU3RhdGUsIGZhc3RSZWNvbm5lY3REZWFkbGluZVNlY29uZHMgfSA9IGF3YWl0IHNmdUNsaWVudC5qb2luKHtcbiAgICAgICAgc3Vic2NyaWJlclNkcDogcmVjZWl2aW5nQ2FwYWJpbGl0aWVzU2RwLFxuICAgICAgICBjbGllbnREZXRhaWxzLFxuICAgICAgICBmYXN0UmVjb25uZWN0OiBwZXJmb3JtaW5nRmFzdFJlY29ubmVjdCxcbiAgICAgICAgcmVjb25uZWN0RGV0YWlscyxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmZhc3RSZWNvbm5lY3REZWFkbGluZVNlY29uZHMgPSBmYXN0UmVjb25uZWN0RGVhZGxpbmVTZWNvbmRzO1xuICAgICAgaWYgKGNhbGxTdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZUZyb21TZnVDYWxsU3RhdGUoXG4gICAgICAgICAgY2FsbFN0YXRlLFxuICAgICAgICAgIHNmdUNsaWVudC5zZXNzaW9uSWQsXG4gICAgICAgICAgcmVjb25uZWN0RGV0YWlscyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXBlcmZvcm1pbmdNaWdyYXRpb24pIHtcbiAgICAgIC8vIGluIE1JR1JBVElPTiwgYEpPSU5FRGAgc3RhdGUgaXMgc2V0IGluIGB0aGlzLnJlY29ubmVjdE1pZ3JhdGUoKWBcbiAgICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5KT0lORUQpO1xuICAgIH1cbiAgICB0aGlzLmhhc0pvaW5lZE9uY2UgPSB0cnVlO1xuXG4gICAgLy8gd2hlbiBwZXJmb3JtaW5nIGZhc3QgcmVjb25uZWN0LCBvciB3aGVuIHdlIHJldXNlIHRoZSBzYW1lIFNGVSBjbGllbnQsXG4gICAgLy8gKHdzIHJlbWFpbmVkIGhlYWx0aHkpLCB3ZSBqdXN0IG5lZWQgdG8gcmVzdG9yZSB0aGUgSUNFIGNvbm5lY3Rpb25cbiAgICBpZiAocGVyZm9ybWluZ0Zhc3RSZWNvbm5lY3QpIHtcbiAgICAgIC8vIHRoZSBTRlUgYXV0b21hdGljYWxseSBpc3N1ZXMgYW4gSUNFIHJlc3RhcnQgb24gdGhlIHN1YnNjcmliZXJcbiAgICAgIC8vIHdlIGRvbid0IGhhdmUgdG8gZG8gaXQgb3Vyc2VsdmVzXG4gICAgICBhd2FpdCB0aGlzLnJlc3RvcmVJQ0Uoc2Z1Q2xpZW50LCB7IGluY2x1ZGVTdWJzY3JpYmVyOiBmYWxzZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY29ubmVjdGlvbkNvbmZpZyA9IHRvUnRjQ29uZmlndXJhdGlvbih0aGlzLmNyZWRlbnRpYWxzLmljZV9zZXJ2ZXJzKTtcbiAgICAgIHRoaXMuaW5pdFB1Ymxpc2hlckFuZFN1YnNjcmliZXIoe1xuICAgICAgICBzZnVDbGllbnQsXG4gICAgICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgICAgIGNsaWVudERldGFpbHMsXG4gICAgICAgIHN0YXRzT3B0aW9ucyxcbiAgICAgICAgY2xvc2VQcmV2aW91c0luc3RhbmNlczogIXBlcmZvcm1pbmdNaWdyYXRpb24sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocGVyZm9ybWluZ1Jlam9pbikge1xuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneVt0aGlzLnJlY29ubmVjdFN0cmF0ZWd5XTtcbiAgICAgIGF3YWl0IHByZXZpb3VzU2Z1Q2xpZW50Py5sZWF2ZUFuZENsb3NlKFxuICAgICAgICBgQ2xvc2luZyBwcmV2aW91cyBXUyBhZnRlciByZWNvbm5lY3Qgd2l0aCBzdHJhdGVneTogJHtzdHJhdGVneX1gLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKCFpc1dzSGVhbHRoeSkge1xuICAgICAgcHJldmlvdXNTZnVDbGllbnQ/LmNsb3NlKFxuICAgICAgICBTdHJlYW1TZnVDbGllbnQuRElTUE9TRV9PTERfU09DS0VULFxuICAgICAgICAnQ2xvc2luZyB1bmhlYWx0aHkgV1MgYWZ0ZXIgcmVjb25uZWN0JyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gZGV2aWNlIHNldHRpbmdzIHNob3VsZCBiZSBhcHBsaWVkIG9ubHkgb25jZSwgd2UgZG9uJ3QgaGF2ZSB0b1xuICAgIC8vIHJlLWFwcGx5IHRoZW0gb24gbGF0ZXIgcmVjb25uZWN0aW9ucyBvciBzZXJ2ZXItc2lkZSBkYXRhIGZldGNoZXNcbiAgICBpZiAoIXRoaXMuZGV2aWNlU2V0dGluZ3NBcHBsaWVkT25jZSkge1xuICAgICAgYXdhaXQgdGhpcy5hcHBseURldmljZUNvbmZpZyh0cnVlKTtcbiAgICAgIHRoaXMuZGV2aWNlU2V0dGluZ3NBcHBsaWVkT25jZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gV2Ugc2hvdWxkbid0IHBlcnNpc3QgdGhlIGByaW5nYCBhbmQgYG5vdGlmeWAgc3RhdGUgYWZ0ZXIgam9pbmluZyB0aGUgY2FsbFxuICAgIC8vIGFzIGl0J3MgYSBvbmUtdGltZSBldmVudCBhbmQgY2xhc2hlcyB3aXRoIHRoZSBwb3RlbnRpYWwgcmVjb25uZWN0aW9uIGF0dGVtcHRzLlxuICAgIC8vIFdoZW4gcmVjb25uZWN0aW5nLCBpZiBwcm92aWRlZCB3aXRoIGByaW5nOiB0cnVlYCBvciBgbm90aWZ5OiB0cnVlYCxcbiAgICAvLyB3ZSB3aWxsIHNwYW0gdGhlIG90aGVyIHBhcnRpY2lwYW50cyB3aXRoIHB1c2ggbm90aWZpY2F0aW9ucyBhbmQgYGNhbGwucmluZ2AgZXZlbnRzLlxuICAgIGRlbGV0ZSB0aGlzLmpvaW5DYWxsRGF0YT8ucmluZztcbiAgICBkZWxldGUgdGhpcy5qb2luQ2FsbERhdGE/Lm5vdGlmeTtcblxuICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgYEpvaW5lZCBjYWxsICR7dGhpcy5jaWR9YCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBhcmVzIFJlY29ubmVjdCBEZXRhaWxzIG9iamVjdC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIGdldFJlY29ubmVjdERldGFpbHMgPSAoXG4gICAgbWlncmF0aW5nRnJvbVNmdUlkOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgcHJldmlvdXNTZXNzaW9uSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgKTogUmVjb25uZWN0RGV0YWlscyA9PiB7XG4gICAgY29uc3Qgc3RyYXRlZ3kgPSB0aGlzLnJlY29ubmVjdFN0cmF0ZWd5O1xuICAgIGNvbnN0IHBlcmZvcm1pbmdSZWpvaW4gPSBzdHJhdGVneSA9PT0gV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3kuUkVKT0lOO1xuICAgIGNvbnN0IGFubm91bmNlZFRyYWNrcyA9IHRoaXMucHVibGlzaGVyPy5nZXRBbm5vdW5jZWRUcmFja3MoKSB8fCBbXTtcbiAgICBjb25zdCBzdWJzY3JpYmVkVHJhY2tzID0gZ2V0Q3VycmVudFZhbHVlKHRoaXMudHJhY2tTdWJzY3JpcHRpb25zU3ViamVjdCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmF0ZWd5LFxuICAgICAgYW5ub3VuY2VkVHJhY2tzLFxuICAgICAgc3Vic2NyaXB0aW9uczogc3Vic2NyaWJlZFRyYWNrcy5kYXRhIHx8IFtdLFxuICAgICAgcmVjb25uZWN0QXR0ZW1wdDogdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyxcbiAgICAgIGZyb21TZnVJZDogbWlncmF0aW5nRnJvbVNmdUlkIHx8ICcnLFxuICAgICAgcHJldmlvdXNTZXNzaW9uSWQ6IHBlcmZvcm1pbmdSZWpvaW4gPyBwcmV2aW91c1Nlc3Npb25JZCB8fCAnJyA6ICcnLFxuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIElDRSByZXN0YXJ0IG9uIGJvdGggdGhlIFB1Ymxpc2hlciBhbmQgU3Vic2NyaWJlciBQZWVyIENvbm5lY3Rpb25zLlxuICAgKiBVc2VzIHRoZSBwcm92aWRlZCBTRlUgY2xpZW50IHRvIHJlc3RvcmUgdGhlIElDRSBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gdGhyb3cgYW4gZXJyb3IgaWYgdGhlIElDRSByZXN0YXJ0IGZhaWxzLlxuICAgKiBUaGlzIGVycm9yIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSByZWNvbm5lY3QgbG9vcCxcbiAgICogYW5kIGEgbmV3IHJlY29ubmVjdGlvbiBzaGFsbCBiZSBhdHRlbXB0ZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSByZXN0b3JlSUNFID0gYXN5bmMgKFxuICAgIG5leHRTZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudCxcbiAgICBvcHRzOiB7IGluY2x1ZGVTdWJzY3JpYmVyPzogYm9vbGVhbjsgaW5jbHVkZVB1Ymxpc2hlcj86IGJvb2xlYW4gfSA9IHt9LFxuICApID0+IHtcbiAgICBjb25zdCB7IGluY2x1ZGVTdWJzY3JpYmVyID0gdHJ1ZSwgaW5jbHVkZVB1Ymxpc2hlciA9IHRydWUgfSA9IG9wdHM7XG4gICAgaWYgKHRoaXMuc3Vic2NyaWJlcikge1xuICAgICAgdGhpcy5zdWJzY3JpYmVyLnNldFNmdUNsaWVudChuZXh0U2Z1Q2xpZW50KTtcbiAgICAgIGlmIChpbmNsdWRlU3Vic2NyaWJlcikge1xuICAgICAgICBhd2FpdCB0aGlzLnN1YnNjcmliZXIucmVzdGFydEljZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5wdWJsaXNoZXIpIHtcbiAgICAgIHRoaXMucHVibGlzaGVyLnNldFNmdUNsaWVudChuZXh0U2Z1Q2xpZW50KTtcbiAgICAgIGlmIChpbmNsdWRlUHVibGlzaGVyKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnJlc3RhcnRJY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBQdWJsaXNoZXIgYW5kIFN1YnNjcmliZXIgUGVlciBDb25uZWN0aW9ucy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIGluaXRQdWJsaXNoZXJBbmRTdWJzY3JpYmVyID0gKG9wdHM6IHtcbiAgICBzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudDtcbiAgICBjb25uZWN0aW9uQ29uZmlnOiBSVENDb25maWd1cmF0aW9uO1xuICAgIHN0YXRzT3B0aW9uczogU3RhdHNPcHRpb25zO1xuICAgIGNsaWVudERldGFpbHM6IENsaWVudERldGFpbHM7XG4gICAgY2xvc2VQcmV2aW91c0luc3RhbmNlczogYm9vbGVhbjtcbiAgfSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHNmdUNsaWVudCxcbiAgICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgICBjbGllbnREZXRhaWxzLFxuICAgICAgc3RhdHNPcHRpb25zLFxuICAgICAgY2xvc2VQcmV2aW91c0luc3RhbmNlcyxcbiAgICB9ID0gb3B0cztcbiAgICBpZiAoY2xvc2VQcmV2aW91c0luc3RhbmNlcyAmJiB0aGlzLnN1YnNjcmliZXIpIHtcbiAgICAgIHRoaXMuc3Vic2NyaWJlci5jbG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLnN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcih7XG4gICAgICBzZnVDbGllbnQsXG4gICAgICBkaXNwYXRjaGVyOiB0aGlzLmRpc3BhdGNoZXIsXG4gICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgICBsb2dUYWc6IFN0cmluZyh0aGlzLnNmdUNsaWVudFRhZyksXG4gICAgICBvblVucmVjb3ZlcmFibGVFcnJvcjogKCkgPT4ge1xuICAgICAgICB0aGlzLnJlY29ubmVjdChXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5SRUpPSU4pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAgICdbUmVjb25uZWN0XSBFcnJvciByZWNvbm5lY3RpbmcgYWZ0ZXIgYSBzdWJzY3JpYmVyIGVycm9yJyxcbiAgICAgICAgICAgIGVycixcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBhbm9ueW1vdXMgdXNlcnMgY2FuJ3QgcHVibGlzaCBhbnl0aGluZyBoZW5jZSwgdGhlcmUgaXMgbm8gbmVlZFxuICAgIC8vIHRvIGNyZWF0ZSBQdWJsaXNoZXIgUGVlciBDb25uZWN0aW9uIGZvciB0aGVtXG4gICAgY29uc3QgaXNBbm9ueW1vdXMgPSB0aGlzLnN0cmVhbUNsaWVudC51c2VyPy50eXBlID09PSAnYW5vbnltb3VzJztcbiAgICBpZiAoIWlzQW5vbnltb3VzKSB7XG4gICAgICBpZiAoY2xvc2VQcmV2aW91c0luc3RhbmNlcyAmJiB0aGlzLnB1Ymxpc2hlcikge1xuICAgICAgICB0aGlzLnB1Ymxpc2hlci5jbG9zZSh7IHN0b3BUcmFja3M6IGZhbHNlIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYXVkaW9TZXR0aW5ncyA9IHRoaXMuc3RhdGUuc2V0dGluZ3M/LmF1ZGlvO1xuICAgICAgY29uc3QgaXNEdHhFbmFibGVkID0gISFhdWRpb1NldHRpbmdzPy5vcHVzX2R0eF9lbmFibGVkO1xuICAgICAgY29uc3QgaXNSZWRFbmFibGVkID0gISFhdWRpb1NldHRpbmdzPy5yZWR1bmRhbnRfY29kaW5nX2VuYWJsZWQ7XG4gICAgICB0aGlzLnB1Ymxpc2hlciA9IG5ldyBQdWJsaXNoZXIoe1xuICAgICAgICBzZnVDbGllbnQsXG4gICAgICAgIGRpc3BhdGNoZXI6IHRoaXMuZGlzcGF0Y2hlcixcbiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgICAgIGlzRHR4RW5hYmxlZCxcbiAgICAgICAgaXNSZWRFbmFibGVkLFxuICAgICAgICBsb2dUYWc6IFN0cmluZyh0aGlzLnNmdUNsaWVudFRhZyksXG4gICAgICAgIG9uVW5yZWNvdmVyYWJsZUVycm9yOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZWNvbm5lY3QoV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3kuUkVKT0lOKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgICAnW1JlY29ubmVjdF0gRXJyb3IgcmVjb25uZWN0aW5nIGFmdGVyIGEgcHVibGlzaGVyIGVycm9yJyxcbiAgICAgICAgICAgICAgZXJyLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdHNSZXBvcnRlcj8uc3RvcCgpO1xuICAgIHRoaXMuc3RhdHNSZXBvcnRlciA9IGNyZWF0ZVN0YXRzUmVwb3J0ZXIoe1xuICAgICAgc3Vic2NyaWJlcjogdGhpcy5zdWJzY3JpYmVyLFxuICAgICAgcHVibGlzaGVyOiB0aGlzLnB1Ymxpc2hlcixcbiAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgZGF0YWNlbnRlcjogc2Z1Q2xpZW50LmVkZ2VOYW1lLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZnVTdGF0c1JlcG9ydGVyPy5zdG9wKCk7XG4gICAgaWYgKHN0YXRzT3B0aW9ucz8ucmVwb3J0aW5nX2ludGVydmFsX21zID4gMCkge1xuICAgICAgdGhpcy5zZnVTdGF0c1JlcG9ydGVyID0gbmV3IFNmdVN0YXRzUmVwb3J0ZXIoc2Z1Q2xpZW50LCB7XG4gICAgICAgIGNsaWVudERldGFpbHMsXG4gICAgICAgIG9wdGlvbnM6IHN0YXRzT3B0aW9ucyxcbiAgICAgICAgc3Vic2NyaWJlcjogdGhpcy5zdWJzY3JpYmVyLFxuICAgICAgICBwdWJsaXNoZXI6IHRoaXMucHVibGlzaGVyLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnNmdVN0YXRzUmVwb3J0ZXIuc3RhcnQoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBjcmVkZW50aWFscyBmb3Igam9pbmluZyB0aGUgY2FsbC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBqb2luIGNhbGwgZGF0YS5cbiAgICovXG4gIGRvSm9pblJlcXVlc3QgPSBhc3luYyAoZGF0YT86IEpvaW5DYWxsRGF0YSk6IFByb21pc2U8Sm9pbkNhbGxSZXNwb25zZT4gPT4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQuZ2V0TG9jYXRpb25IaW50KCk7XG4gICAgY29uc3QgcmVxdWVzdDogSm9pbkNhbGxSZXF1ZXN0ID0geyAuLi5kYXRhLCBsb2NhdGlvbiB9O1xuICAgIGNvbnN0IGpvaW5SZXNwb25zZSA9IGF3YWl0IHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBKb2luQ2FsbFJlc3BvbnNlLFxuICAgICAgSm9pbkNhbGxSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9qb2luYCwgcmVxdWVzdCk7XG4gICAgdGhpcy5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGpvaW5SZXNwb25zZS5jYWxsKTtcbiAgICB0aGlzLnN0YXRlLnNldE1lbWJlcnMoam9pblJlc3BvbnNlLm1lbWJlcnMpO1xuICAgIHRoaXMuc3RhdGUuc2V0T3duQ2FwYWJpbGl0aWVzKGpvaW5SZXNwb25zZS5vd25fY2FwYWJpbGl0aWVzKTtcblxuICAgIGlmIChkYXRhPy5yaW5nICYmICF0aGlzLnJpbmdpbmcpIHtcbiAgICAgIHRoaXMucmluZ2luZ1N1YmplY3QubmV4dCh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yaW5naW5nICYmICF0aGlzLmlzQ3JlYXRlZEJ5TWUpIHtcbiAgICAgIC8vIHNpZ25hbHMgb3RoZXIgdXNlcnMgdGhhdCBJIGhhdmUgYWNjZXB0ZWQgdGhlIGluY29taW5nIGNhbGwuXG4gICAgICBhd2FpdCB0aGlzLmFjY2VwdCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0cmVhbUNsaWVudC5faGFzQ29ubmVjdGlvbklEKCkpIHtcbiAgICAgIHRoaXMud2F0Y2hpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5jbGllbnRTdG9yZS5yZWdpc3RlckNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpvaW5SZXNwb25zZTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY2xvc2luZyBvZiB0aGUgU0ZVIHNpZ25hbCBjb25uZWN0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHNmdUNsaWVudCB0aGUgU0ZVIGNsaWVudCBpbnN0YW5jZSB0aGF0IHdhcyBjbG9zZWQuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVNmdVNpZ25hbENsb3NlID0gKHNmdUNsaWVudDogU3RyZWFtU2Z1Q2xpZW50KSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgJ1tSZWNvbm5lY3RdIFNGVSBzaWduYWwgY29ubmVjdGlvbiBjbG9zZWQnKTtcbiAgICAvLyBub3JtYWwgY2xvc2UsIG5vIG5lZWQgdG8gcmVjb25uZWN0XG4gICAgaWYgKHNmdUNsaWVudC5pc0xlYXZpbmcpIHJldHVybjtcbiAgICB0aGlzLnJlY29ubmVjdChXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5SRUpPSU4pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgJ1tSZWNvbm5lY3RdIEVycm9yIHJlY29ubmVjdGluZycsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHJlY29ubmVjdGlvbiBmbG93LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIHN0cmF0ZWd5IHRoZSByZWNvbm5lY3Rpb24gc3RyYXRlZ3kgdG8gdXNlLlxuICAgKi9cbiAgcHJpdmF0ZSByZWNvbm5lY3QgPSBhc3luYyAoXG4gICAgc3RyYXRlZ3k6IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LFxuICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICByZXR1cm4gd2l0aG91dENvbmN1cnJlbmN5KHRoaXMucmVjb25uZWN0Q29uY3VycmVuY3lUYWcsIGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgIGBbUmVjb25uZWN0XSBSZWNvbm5lY3Rpbmcgd2l0aCBzdHJhdGVneSAke1dlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5W3N0cmF0ZWd5XX1gLFxuICAgICAgKTtcblxuICAgICAgdGhpcy5yZWNvbm5lY3RTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgICAgZG8ge1xuICAgICAgICAvLyB3ZSBkb24ndCBpbmNyZW1lbnQgcmVjb25uZWN0IGF0dGVtcHRzIGZvciB0aGUgRkFTVCBzdHJhdGVneS5cbiAgICAgICAgaWYgKHRoaXMucmVjb25uZWN0U3RyYXRlZ3kgIT09IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LkZBU1QpIHtcbiAgICAgICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudCA9IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5W3RoaXMucmVjb25uZWN0U3RyYXRlZ3ldO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIHdhaXQgdW50aWwgdGhlIG5ldHdvcmsgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgYXdhaXQgdGhpcy5uZXR3b3JrQXZhaWxhYmxlVGFzaz8ucHJvbWlzZTtcbiAgICAgICAgICBzd2l0Y2ggKHRoaXMucmVjb25uZWN0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNhc2UgV2Vic29ja2V0UmVjb25uZWN0U3RyYXRlZ3kuVU5TUEVDSUZJRUQ6XG4gICAgICAgICAgICBjYXNlIFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBbUmVjb25uZWN0XSBOby1vcCBzdHJhdGVneSAke2N1cnJlbnR9YCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5GQVNUOlxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlY29ubmVjdEZhc3QoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LlJFSk9JTjpcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWNvbm5lY3RSZWpvaW4oKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5Lk1JR1JBVEU6XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVjb25uZWN0TWlncmF0ZSgpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGVuc3VyZUV4aGF1c3RlZChcbiAgICAgICAgICAgICAgICB0aGlzLnJlY29ubmVjdFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICdVbmtub3duIHJlY29ubmVjdGlvbiBzdHJhdGVneScsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhazsgLy8gZG8td2hpbGUgbG9vcCwgcmVjb25uZWN0aW9uIHdvcmtlZCwgZXhpdCB0aGUgbG9vcFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yRnJvbVJlc3BvbnNlICYmIGVycm9yLnVucmVjb3ZlcmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICAgICAnd2FybicsXG4gICAgICAgICAgICAgIGBbUmVjb25uZWN0XSBDYW4ndCByZWNvbm5lY3QgZHVlIHRvIGNvb3JkaW5hdG9yIHVucmVjb3ZlcmFibGUgZXJyb3JgLFxuICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HX0ZBSUxFRCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgYFtSZWNvbm5lY3RdICR7Y3VycmVudH0gKCR7dGhpcy5yZWNvbm5lY3RBdHRlbXB0c30pIGZhaWxlZC4gQXR0ZW1wdGluZyB3aXRoIFJFSk9JTmAsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICApO1xuICAgICAgICAgIGF3YWl0IHNsZWVwKDUwMCk7XG4gICAgICAgICAgdGhpcy5yZWNvbm5lY3RTdHJhdGVneSA9IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LlJFSk9JTjtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoXG4gICAgICAgIHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlICE9PSBDYWxsaW5nU3RhdGUuSk9JTkVEICYmXG4gICAgICAgIHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlICE9PSBDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HX0ZBSUxFRCAmJlxuICAgICAgICB0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSAhPT0gQ2FsbGluZ1N0YXRlLkxFRlRcbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyB0aGUgcmVjb25uZWN0aW9uIGZsb3cgd2l0aCB0aGUgXCJmYXN0XCIgc3RyYXRlZ3kuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSByZWNvbm5lY3RGYXN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHRoaXMucmVjb25uZWN0U3RyYXRlZ3kgPSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5GQVNUO1xuICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5SRUNPTk5FQ1RJTkcpO1xuICAgIHJldHVybiB0aGlzLmpvaW4odGhpcy5qb2luQ2FsbERhdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgdGhlIHJlY29ubmVjdGlvbiBmbG93IHdpdGggdGhlIFwicmVqb2luXCIgc3RyYXRlZ3kuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSByZWNvbm5lY3RSZWpvaW4gPSBhc3luYyAoKSA9PiB7XG4gICAgdGhpcy5yZWNvbm5lY3RTdHJhdGVneSA9IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LlJFSk9JTjtcbiAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HKTtcbiAgICBhd2FpdCB0aGlzLmpvaW4odGhpcy5qb2luQ2FsbERhdGEpO1xuICAgIGF3YWl0IHRoaXMucmVzdG9yZVB1Ymxpc2hlZFRyYWNrcygpO1xuICAgIHRoaXMucmVzdG9yZVN1YnNjcmliZWRUcmFja3MoKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhdGVzIHRoZSByZWNvbm5lY3Rpb24gZmxvdyB3aXRoIHRoZSBcIm1pZ3JhdGVcIiBzdHJhdGVneS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIHJlY29ubmVjdE1pZ3JhdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFNmdUNsaWVudCA9IHRoaXMuc2Z1Q2xpZW50O1xuICAgIGlmICghY3VycmVudFNmdUNsaWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgbWlncmF0ZSB3aXRob3V0IGFuIGFjdGl2ZSBTRlUgY2xpZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZWNvbm5lY3RTdHJhdGVneSA9IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5Lk1JR1JBVEU7XG4gICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoQ2FsbGluZ1N0YXRlLk1JR1JBVElORyk7XG4gICAgY29uc3QgY3VycmVudFN1YnNjcmliZXIgPSB0aGlzLnN1YnNjcmliZXI7XG4gICAgY29uc3QgY3VycmVudFB1Ymxpc2hlciA9IHRoaXMucHVibGlzaGVyO1xuXG4gICAgY3VycmVudFN1YnNjcmliZXI/LmRldGFjaEV2ZW50SGFuZGxlcnMoKTtcbiAgICBjdXJyZW50UHVibGlzaGVyPy5kZXRhY2hFdmVudEhhbmRsZXJzKCk7XG5cbiAgICBjb25zdCBtaWdyYXRpb25UYXNrID0gY3VycmVudFNmdUNsaWVudC5lbnRlck1pZ3JhdGlvbigpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZnUgPSBjdXJyZW50U2Z1Q2xpZW50LmVkZ2VOYW1lO1xuICAgICAgYXdhaXQgdGhpcy5qb2luKHsgLi4udGhpcy5qb2luQ2FsbERhdGEsIG1pZ3JhdGluZ19mcm9tOiBjdXJyZW50U2Z1IH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBjbGVhbnVwIHRoZSBtaWdyYXRpb25fZnJvbSBmaWVsZCBhZnRlciB0aGUgbWlncmF0aW9uIGlzIGNvbXBsZXRlIG9yIGZhaWxlZFxuICAgICAgLy8gYXMgd2UgZG9uJ3Qgd2FudCB0byBrZWVwIGRpcnR5IGRhdGEgaW4gdGhlIGpvaW4gY2FsbCBkYXRhXG4gICAgICBkZWxldGUgdGhpcy5qb2luQ2FsbERhdGE/Lm1pZ3JhdGluZ19mcm9tO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucmVzdG9yZVB1Ymxpc2hlZFRyYWNrcygpO1xuICAgIHRoaXMucmVzdG9yZVN1YnNjcmliZWRUcmFja3MoKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBXYWl0IGZvciB0aGUgbWlncmF0aW9uIHRvIGNvbXBsZXRlLCB0aGVuIGNsb3NlIHRoZSBwcmV2aW91cyBTRlUgY2xpZW50XG4gICAgICAvLyBhbmQgdGhlIHBlZXIgY29ubmVjdGlvbiBpbnN0YW5jZXMuIEluIGNhc2Ugb2YgZmFpbHVyZSwgdGhlIG1pZ3JhdGlvblxuICAgICAgLy8gdGFzayB3b3VsZCB0aHJvdyBhbiBlcnJvciBhbmQgUkVKT0lOIHdvdWxkIGJlIGF0dGVtcHRlZC5cbiAgICAgIGF3YWl0IG1pZ3JhdGlvblRhc2s7XG5cbiAgICAgIC8vIGluIE1JR1JBVEUsIHdlIGNhbiBjb25zaWRlciB0aGUgY2FsbCBhcyBqb2luZWQgb25seSBhZnRlclxuICAgICAgLy8gYHBhcnRpY2lwYW50TWlncmF0aW9uQ29tcGxldGVgIGV2ZW50IGlzIHJlY2VpdmVkLCBzaWduYWxlZCBieVxuICAgICAgLy8gdGhlIGBtaWdyYXRpb25UYXNrYFxuICAgICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoQ2FsbGluZ1N0YXRlLkpPSU5FRCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGN1cnJlbnRTdWJzY3JpYmVyPy5jbG9zZSgpO1xuICAgICAgY3VycmVudFB1Ymxpc2hlcj8uY2xvc2UoeyBzdG9wVHJhY2tzOiBmYWxzZSB9KTtcblxuICAgICAgLy8gYW5kIGNsb3NlIHRoZSBwcmV2aW91cyBTRlUgY2xpZW50LCB3aXRob3V0IHNwZWNpZnlpbmcgY2xvc2UgY29kZVxuICAgICAgY3VycmVudFNmdUNsaWVudC5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSB2YXJpb3VzIGV2ZW50IGhhbmRsZXJzIGZvciByZWNvbm5lY3Rpb24uXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSByZWdpc3RlclJlY29ubmVjdEhhbmRsZXJzID0gKCkgPT4ge1xuICAgIC8vIGhhbmRsZXMgdGhlIGxlZ2FjeSBcImdvQXdheVwiIGV2ZW50XG4gICAgY29uc3QgdW5yZWdpc3RlckdvQXdheSA9IHRoaXMub24oJ2dvQXdheScsICgpID0+IHtcbiAgICAgIHRoaXMucmVjb25uZWN0KFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5Lk1JR1JBVEUpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCAnW1JlY29ubmVjdF0gRXJyb3IgcmVjb25uZWN0aW5nJywgZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gaGFuZGxlcyB0aGUgXCJlcnJvclwiIGV2ZW50LCB0aHJvdWdoIHdoaWNoIHRoZSBTRlUgY2FuIHJlcXVlc3QgYSByZWNvbm5lY3RcbiAgICBjb25zdCB1bnJlZ2lzdGVyT25FcnJvciA9IHRoaXMub24oJ2Vycm9yJywgKGUpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVjb25uZWN0U3RyYXRlZ3k6IHN0cmF0ZWd5IH0gPSBlO1xuICAgICAgaWYgKHN0cmF0ZWd5ID09PSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5VTlNQRUNJRklFRCkgcmV0dXJuO1xuICAgICAgaWYgKHN0cmF0ZWd5ID09PSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5ESVNDT05ORUNUKSB7XG4gICAgICAgIHRoaXMubGVhdmUoeyByZWFzb246ICdTRlUgaW5zdHJ1Y3RlZCB0byBkaXNjb25uZWN0JyB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCBgQ2FuJ3QgbGVhdmUgY2FsbCBhZnRlciBkaXNjb25uZWN0IHJlcXVlc3RgLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVjb25uZWN0KHN0cmF0ZWd5KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCAnW1JlY29ubmVjdF0gRXJyb3IgcmVjb25uZWN0aW5nJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCB1bnJlZ2lzdGVyTmV0d29ya0NoYW5nZWQgPSB0aGlzLnN0cmVhbUNsaWVudC5vbihcbiAgICAgICduZXR3b3JrLmNoYW5nZWQnLFxuICAgICAgKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLm9ubGluZSkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdbUmVjb25uZWN0XSBHb2luZyBvZmZsaW5lJyk7XG4gICAgICAgICAgaWYgKCF0aGlzLmhhc0pvaW5lZE9uY2UpIHJldHVybjtcbiAgICAgICAgICB0aGlzLmxhc3RPZmZsaW5lVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgdGFzayB0aGF0IHdvdWxkIHJlc29sdmUgd2hlbiB0aGUgbmV0d29yayBpcyBhdmFpbGFibGVcbiAgICAgICAgICBjb25zdCBuZXR3b3JrQXZhaWxhYmxlVGFzayA9IHByb21pc2VXaXRoUmVzb2x2ZXJzKCk7XG4gICAgICAgICAgbmV0d29ya0F2YWlsYWJsZVRhc2sucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBzdHJhdGVneSA9IFdlYnNvY2tldFJlY29ubmVjdFN0cmF0ZWd5LkZBU1Q7XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0T2ZmbGluZVRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICBjb25zdCBvZmZsaW5lID0gKERhdGUubm93KCkgLSB0aGlzLmxhc3RPZmZsaW5lVGltZXN0YW1wKSAvIDEwMDA7XG4gICAgICAgICAgICAgIGlmIChvZmZsaW5lID4gdGhpcy5mYXN0UmVjb25uZWN0RGVhZGxpbmVTZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkbid0IGF0dGVtcHQgRkFTVCBpZiB3ZSBoYXZlIGV4Y2VlZGVkIHRoZSBkZWFkbGluZS5cbiAgICAgICAgICAgICAgICAvLyBUaGUgU0ZVIHdvdWxkIGhhdmUgYWxyZWFkeSB3aXBlZCBvdXQgdGhlIHNlc3Npb24uXG4gICAgICAgICAgICAgICAgc3RyYXRlZ3kgPSBXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneS5SRUpPSU47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3Qoc3RyYXRlZ3kpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgICAgICdbUmVjb25uZWN0XSBFcnJvciByZWNvbm5lY3RpbmcgYWZ0ZXIgZ29pbmcgb25saW5lJyxcbiAgICAgICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLm5ldHdvcmtBdmFpbGFibGVUYXNrID0gbmV0d29ya0F2YWlsYWJsZVRhc2s7XG4gICAgICAgICAgdGhpcy5zZnVTdGF0c1JlcG9ydGVyPy5zdG9wKCk7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoQ2FsbGluZ1N0YXRlLk9GRkxJTkUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdbUmVjb25uZWN0XSBHb2luZyBvbmxpbmUnKTtcbiAgICAgICAgICB0aGlzLnNmdUNsaWVudD8uY2xvc2UoXG4gICAgICAgICAgICBTdHJlYW1TZnVDbGllbnQuRElTUE9TRV9PTERfU09DS0VULFxuICAgICAgICAgICAgJ0Nsb3NpbmcgV1MgdG8gcmVjb25uZWN0IGFmdGVyIGdvaW5nIG9ubGluZScsXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyB3ZSB3ZW50IG9ubGluZSwgcmVsZWFzZSB0aGUgcHJldmlvdXMgd2FpdGVycyBhbmQgcmVzZXQgdGhlIHN0YXRlXG4gICAgICAgICAgdGhpcy5uZXR3b3JrQXZhaWxhYmxlVGFzaz8ucmVzb2x2ZSgpO1xuICAgICAgICAgIHRoaXMubmV0d29ya0F2YWlsYWJsZVRhc2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy5zZnVTdGF0c1JlcG9ydGVyPy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICk7XG5cbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZCh1bnJlZ2lzdGVyR29Bd2F5KTtcbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZCh1bnJlZ2lzdGVyT25FcnJvcik7XG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQodW5yZWdpc3Rlck5ldHdvcmtDaGFuZ2VkKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzdG9yZXMgdGhlIHB1Ymxpc2hlZCB0cmFja3MgYWZ0ZXIgYSByZWNvbm5lY3Rpb24uXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJpdmF0ZSByZXN0b3JlUHVibGlzaGVkVHJhY2tzID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIHRoZSB0cmFja3MgbmVlZCB0byBiZSByZXN0b3JlZCBpbiB0aGVpciBvcmlnaW5hbCBvcmRlciBvZiBwdWJsaXNoaW5nXG4gICAgLy8gb3RoZXJ3aXNlLCB3ZSBtaWdodCBnZXQgYG0tbGluZXMgb3JkZXIgbWlzbWF0Y2hgIGVycm9yc1xuICAgIGZvciAoY29uc3QgdHJhY2tUeXBlIG9mIHRoaXMudHJhY2tQdWJsaXNoT3JkZXIpIHtcbiAgICAgIHN3aXRjaCAodHJhY2tUeXBlKSB7XG4gICAgICAgIGNhc2UgVHJhY2tUeXBlLkFVRElPOlxuICAgICAgICAgIGNvbnN0IGF1ZGlvU3RyZWFtID0gdGhpcy5taWNyb3Bob25lLnN0YXRlLm1lZGlhU3RyZWFtO1xuICAgICAgICAgIGlmIChhdWRpb1N0cmVhbSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wdWJsaXNoQXVkaW9TdHJlYW0oYXVkaW9TdHJlYW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUcmFja1R5cGUuVklERU86XG4gICAgICAgICAgY29uc3QgdmlkZW9TdHJlYW0gPSB0aGlzLmNhbWVyYS5zdGF0ZS5tZWRpYVN0cmVhbTtcbiAgICAgICAgICBpZiAodmlkZW9TdHJlYW0pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFZpZGVvU3RyZWFtKFxuICAgICAgICAgICAgICB2aWRlb1N0cmVhbSxcbiAgICAgICAgICAgICAgdGhpcy5jYW1lcmEucHVibGlzaE9wdGlvbnMsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFOlxuICAgICAgICAgIGNvbnN0IHNjcmVlblNoYXJlU3RyZWFtID0gdGhpcy5zY3JlZW5TaGFyZS5zdGF0ZS5tZWRpYVN0cmVhbTtcbiAgICAgICAgICBpZiAoc2NyZWVuU2hhcmVTdHJlYW0pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFNjcmVlblNoYXJlU3RyZWFtKHNjcmVlblNoYXJlU3RyZWFtLCB7XG4gICAgICAgICAgICAgIHNjcmVlblNoYXJlU2V0dGluZ3M6IHRoaXMuc2NyZWVuU2hhcmUuZ2V0U2V0dGluZ3MoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gc2NyZWVuIHNoYXJlIGF1ZGlvIGNhbid0IGV4aXN0IHdpdGhvdXQgYSBzY3JlZW4gc2hhcmUsIHNvIHdlIGhhbmRsZSBpdCB0aGVyZVxuICAgICAgICBjYXNlIFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU86XG4gICAgICAgIGNhc2UgVHJhY2tUeXBlLlVOU1BFQ0lGSUVEOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGVuc3VyZUV4aGF1c3RlZCh0cmFja1R5cGUsICdVbmtub3duIHRyYWNrIHR5cGUnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc3RvcmVzIHRoZSBzdWJzY3JpYmVkIHRyYWNrcyBhZnRlciBhIHJlY29ubmVjdGlvbi5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIHJlc3RvcmVTdWJzY3JpYmVkVHJhY2tzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVtb3RlUGFydGljaXBhbnRzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGlmIChyZW1vdGVQYXJ0aWNpcGFudHMubGVuZ3RoIDw9IDApIHJldHVybjtcbiAgICB0aGlzLnVwZGF0ZVN1YnNjcmlwdGlvbnMocmVtb3RlUGFydGljaXBhbnRzLCBEZWJvdW5jZVR5cGUuRkFTVCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBwdWJsaXNoaW5nIHRoZSBnaXZlbiB2aWRlbyBzdHJlYW0gdG8gdGhlIGNhbGwuXG4gICAqIFRoZSBzdHJlYW0gd2lsbCBiZSBzdG9wcGVkIGlmIHRoZSB1c2VyIGNoYW5nZXMgYW4gaW5wdXQgZGV2aWNlLCBvciBpZiB0aGUgdXNlciBsZWF2ZXMgdGhlIGNhbGwuXG4gICAqXG4gICAqIENvbnNlY3V0aXZlIGNhbGxzIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmVwbGFjZSB0aGUgcHJldmlvdXNseSBwdWJsaXNoZWQgc3RyZWFtLlxuICAgKiBUaGUgcHJldmlvdXMgdmlkZW8gc3RyZWFtIHdpbGwgYmUgc3RvcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIHZpZGVvU3RyZWFtIHRoZSB2aWRlbyBzdHJlYW0gdG8gcHVibGlzaC5cbiAgICogQHBhcmFtIG9wdHMgdGhlIG9wdGlvbnMgdG8gdXNlIHdoZW4gcHVibGlzaGluZyB0aGUgc3RyZWFtLlxuICAgKi9cbiAgcHVibGlzaFZpZGVvU3RyZWFtID0gYXN5bmMgKFxuICAgIHZpZGVvU3RyZWFtOiBNZWRpYVN0cmVhbSxcbiAgICBvcHRzOiBQdWJsaXNoT3B0aW9ucyA9IHt9LFxuICApID0+IHtcbiAgICBpZiAoIXRoaXMuc2Z1Q2xpZW50KSB0aHJvdyBuZXcgRXJyb3IoYENhbGwgbm90IGpvaW5lZCB5ZXQuYCk7XG4gICAgLy8gam9pbmluZyBpcyBpbiBwcm9ncmVzcywgYW5kIHdlIHNob3VsZCB3YWl0IHVudGlsIHRoZSBjbGllbnQgaXMgcmVhZHlcbiAgICBhd2FpdCB0aGlzLnNmdUNsaWVudC5qb2luVGFzaztcblxuICAgIGlmICghdGhpcy5wZXJtaXNzaW9uc0NvbnRleHQuaGFzUGVybWlzc2lvbihPd25DYXBhYmlsaXR5LlNFTkRfVklERU8pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHBlcm1pc3Npb24gdG8gcHVibGlzaCB2aWRlbycpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wdWJsaXNoZXIpIHRocm93IG5ldyBFcnJvcignUHVibGlzaGVyIGlzIG5vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgY29uc3QgW3ZpZGVvVHJhY2tdID0gdmlkZW9TdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICBpZiAoIXZpZGVvVHJhY2spIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gdmlkZW8gdHJhY2sgaW4gdGhlIHN0cmVhbScpO1xuXG4gICAgaWYgKCF0aGlzLnRyYWNrUHVibGlzaE9yZGVyLmluY2x1ZGVzKFRyYWNrVHlwZS5WSURFTykpIHtcbiAgICAgIHRoaXMudHJhY2tQdWJsaXNoT3JkZXIucHVzaChUcmFja1R5cGUuVklERU8pO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnB1Ymxpc2hTdHJlYW0oXG4gICAgICB2aWRlb1N0cmVhbSxcbiAgICAgIHZpZGVvVHJhY2ssXG4gICAgICBUcmFja1R5cGUuVklERU8sXG4gICAgICBvcHRzLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBwdWJsaXNoaW5nIHRoZSBnaXZlbiBhdWRpbyBzdHJlYW0gdG8gdGhlIGNhbGwuXG4gICAqIFRoZSBzdHJlYW0gd2lsbCBiZSBzdG9wcGVkIGlmIHRoZSB1c2VyIGNoYW5nZXMgYW4gaW5wdXQgZGV2aWNlLCBvciBpZiB0aGUgdXNlciBsZWF2ZXMgdGhlIGNhbGwuXG4gICAqXG4gICAqIENvbnNlY3V0aXZlIGNhbGxzIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmVwbGFjZSB0aGUgYXVkaW8gc3RyZWFtIHRoYXQgaXMgY3VycmVudGx5IGJlaW5nIHB1Ymxpc2hlZC5cbiAgICogVGhlIHByZXZpb3VzIGF1ZGlvIHN0cmVhbSB3aWxsIGJlIHN0b3BwZWQuXG4gICAqXG4gICAqIEBwYXJhbSBhdWRpb1N0cmVhbSB0aGUgYXVkaW8gc3RyZWFtIHRvIHB1Ymxpc2guXG4gICAqL1xuICBwdWJsaXNoQXVkaW9TdHJlYW0gPSBhc3luYyAoYXVkaW9TdHJlYW06IE1lZGlhU3RyZWFtKSA9PiB7XG4gICAgaWYgKCF0aGlzLnNmdUNsaWVudCkgdGhyb3cgbmV3IEVycm9yKGBDYWxsIG5vdCBqb2luZWQgeWV0LmApO1xuICAgIC8vIGpvaW5pbmcgaXMgaW4gcHJvZ3Jlc3MsIGFuZCB3ZSBzaG91bGQgd2FpdCB1bnRpbCB0aGUgY2xpZW50IGlzIHJlYWR5XG4gICAgYXdhaXQgdGhpcy5zZnVDbGllbnQuam9pblRhc2s7XG5cbiAgICBpZiAoIXRoaXMucGVybWlzc2lvbnNDb250ZXh0Lmhhc1Blcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TRU5EX0FVRElPKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBwZXJtaXNzaW9uIHRvIHB1Ymxpc2ggYXVkaW8nKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucHVibGlzaGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1B1Ymxpc2hlciBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIGNvbnN0IFthdWRpb1RyYWNrXSA9IGF1ZGlvU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7XG4gICAgaWYgKCFhdWRpb1RyYWNrKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vIGF1ZGlvIHRyYWNrIGluIHRoZSBzdHJlYW0nKTtcblxuICAgIGlmICghdGhpcy50cmFja1B1Ymxpc2hPcmRlci5pbmNsdWRlcyhUcmFja1R5cGUuQVVESU8pKSB7XG4gICAgICB0aGlzLnRyYWNrUHVibGlzaE9yZGVyLnB1c2goVHJhY2tUeXBlLkFVRElPKTtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5wdWJsaXNoZXIucHVibGlzaFN0cmVhbShcbiAgICAgIGF1ZGlvU3RyZWFtLFxuICAgICAgYXVkaW9UcmFjayxcbiAgICAgIFRyYWNrVHlwZS5BVURJTyxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydHMgcHVibGlzaGluZyB0aGUgZ2l2ZW4gc2NyZWVuLXNoYXJlIHN0cmVhbSB0byB0aGUgY2FsbC5cbiAgICpcbiAgICogQ29uc2VjdXRpdmUgY2FsbHMgdG8gdGhpcyBtZXRob2Qgd2lsbCByZXBsYWNlIHRoZSBwcmV2aW91cyBzY3JlZW4tc2hhcmUgc3RyZWFtLlxuICAgKiBUaGUgcHJldmlvdXMgc2NyZWVuLXNoYXJlIHN0cmVhbSB3aWxsIGJlIHN0b3BwZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzY3JlZW5TaGFyZVN0cmVhbSB0aGUgc2NyZWVuLXNoYXJlIHN0cmVhbSB0byBwdWJsaXNoLlxuICAgKiBAcGFyYW0gb3B0cyB0aGUgb3B0aW9ucyB0byB1c2Ugd2hlbiBwdWJsaXNoaW5nIHRoZSBzdHJlYW0uXG4gICAqL1xuICBwdWJsaXNoU2NyZWVuU2hhcmVTdHJlYW0gPSBhc3luYyAoXG4gICAgc2NyZWVuU2hhcmVTdHJlYW06IE1lZGlhU3RyZWFtLFxuICAgIG9wdHM6IFB1Ymxpc2hPcHRpb25zID0ge30sXG4gICkgPT4ge1xuICAgIGlmICghdGhpcy5zZnVDbGllbnQpIHRocm93IG5ldyBFcnJvcihgQ2FsbCBub3Qgam9pbmVkIHlldC5gKTtcbiAgICAvLyBqb2luaW5nIGlzIGluIHByb2dyZXNzLCBhbmQgd2Ugc2hvdWxkIHdhaXQgdW50aWwgdGhlIGNsaWVudCBpcyByZWFkeVxuICAgIGF3YWl0IHRoaXMuc2Z1Q2xpZW50LmpvaW5UYXNrO1xuXG4gICAgaWYgKCF0aGlzLnBlcm1pc3Npb25zQ29udGV4dC5oYXNQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0NSRUVOU0hBUkUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHBlcm1pc3Npb24gdG8gcHVibGlzaCBzY3JlZW4gc2hhcmUnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucHVibGlzaGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1B1Ymxpc2hlciBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIGNvbnN0IFtzY3JlZW5TaGFyZVRyYWNrXSA9IHNjcmVlblNoYXJlU3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XG4gICAgaWYgKCFzY3JlZW5TaGFyZVRyYWNrKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vIHNjcmVlbiBzaGFyZSB0cmFjayBpbiB0aGUgc3RyZWFtJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRyYWNrUHVibGlzaE9yZGVyLmluY2x1ZGVzKFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpKSB7XG4gICAgICB0aGlzLnRyYWNrUHVibGlzaE9yZGVyLnB1c2goVHJhY2tUeXBlLlNDUkVFTl9TSEFSRSk7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnB1Ymxpc2hTdHJlYW0oXG4gICAgICBzY3JlZW5TaGFyZVN0cmVhbSxcbiAgICAgIHNjcmVlblNoYXJlVHJhY2ssXG4gICAgICBUcmFja1R5cGUuU0NSRUVOX1NIQVJFLFxuICAgICAgb3B0cyxcbiAgICApO1xuXG4gICAgY29uc3QgW3NjcmVlblNoYXJlQXVkaW9UcmFja10gPSBzY3JlZW5TaGFyZVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgIGlmIChzY3JlZW5TaGFyZUF1ZGlvVHJhY2spIHtcbiAgICAgIGlmICghdGhpcy50cmFja1B1Ymxpc2hPcmRlci5pbmNsdWRlcyhUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPKSkge1xuICAgICAgICB0aGlzLnRyYWNrUHVibGlzaE9yZGVyLnB1c2goVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTyk7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnB1Ymxpc2hlci5wdWJsaXNoU3RyZWFtKFxuICAgICAgICBzY3JlZW5TaGFyZVN0cmVhbSxcbiAgICAgICAgc2NyZWVuU2hhcmVBdWRpb1RyYWNrLFxuICAgICAgICBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPLFxuICAgICAgICBvcHRzLFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3BzIHB1Ymxpc2hpbmcgdGhlIGdpdmVuIHRyYWNrIHR5cGUgdG8gdGhlIGNhbGwsIGlmIGl0IGlzIGN1cnJlbnRseSBiZWluZyBwdWJsaXNoZWQuXG4gICAqIFVuZGVybHlpbmcgdHJhY2sgd2lsbCBiZSBzdG9wcGVkIGFuZCByZW1vdmVkIGZyb20gdGhlIHB1Ymxpc2hlci5cbiAgICpcbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUgdHJhY2sgdHlwZSB0byBzdG9wIHB1Ymxpc2hpbmcuXG4gICAqIEBwYXJhbSBzdG9wVHJhY2sgaWYgYHRydWVgIHRoZSB0cmFjayB3aWxsIGJlIHN0b3BwZWQsIGVsc2UgaXQgd2lsbCBiZSBqdXN0IGRpc2FibGVkXG4gICAqL1xuICBzdG9wUHVibGlzaCA9IGFzeW5jICh0cmFja1R5cGU6IFRyYWNrVHlwZSwgc3RvcFRyYWNrOiBib29sZWFuID0gdHJ1ZSkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKFxuICAgICAgJ2luZm8nLFxuICAgICAgYHN0b3BQdWJsaXNoICR7VHJhY2tUeXBlW3RyYWNrVHlwZV19LCBzdG9wIHRyYWNrczogJHtzdG9wVHJhY2t9YCxcbiAgICApO1xuICAgIGF3YWl0IHRoaXMucHVibGlzaGVyPy51bnB1Ymxpc2hTdHJlYW0odHJhY2tUeXBlLCBzdG9wVHJhY2spO1xuICB9O1xuXG4gIC8qKlxuICAgKiBOb3RpZmllcyB0aGUgU0ZVIHRoYXQgYSBub2lzZSBjYW5jZWxsYXRpb24gcHJvY2VzcyBoYXMgc3RhcnRlZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnlOb2lzZUNhbmNlbGxhdGlvblN0YXJ0aW5nID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnNmdUNsaWVudD8uc3RhcnROb2lzZUNhbmNlbGxhdGlvbigpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgJ0ZhaWxlZCB0byBub3RpZnkgc3RhcnQgb2Ygbm9pc2UgY2FuY2VsbGF0aW9uJywgZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogTm90aWZpZXMgdGhlIFNGVSB0aGF0IGEgbm9pc2UgY2FuY2VsbGF0aW9uIHByb2Nlc3MgaGFzIHN0b3BwZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbm90aWZ5Tm9pc2VDYW5jZWxsYXRpb25TdG9wcGVkID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnNmdUNsaWVudD8uc3RvcE5vaXNlQ2FuY2VsbGF0aW9uKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCAnRmFpbGVkIHRvIG5vdGlmeSBzdG9wIG9mIG5vaXNlIGNhbmNlbGxhdGlvbicsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0cmFjayBzdWJzY3JpcHRpb24gY29uZmlndXJhdGlvbiBmb3Igb25lIG9yIG1vcmUgcGFydGljaXBhbnRzLlxuICAgKiBZb3UgaGF2ZSB0byBjcmVhdGUgYSBzdWJzY3JpcHRpb24gZm9yIGVhY2ggcGFydGljaXBhbnQgZm9yIGFsbCB0aGUgZGlmZmVyZW50IGtpbmRzIG9mIHRyYWNrcyB5b3Ugd2FudCB0byByZWNlaXZlLlxuICAgKiBZb3UgY2FuIG9ubHkgc3Vic2NyaWJlIGZvciB0cmFja3MgYWZ0ZXIgdGhlIHBhcnRpY2lwYW50IHN0YXJ0ZWQgcHVibGlzaGluZyB0aGUgZ2l2ZW4ga2luZCBvZiB0cmFjay5cbiAgICpcbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUga2luZCBvZiBzdWJzY3JpcHRpb24gdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0gY2hhbmdlcyB0aGUgbGlzdCBvZiBzdWJzY3JpcHRpb24gY2hhbmdlcyB0byBkby5cbiAgICogQHBhcmFtIHR5cGUgdGhlIGRlYm91bmNlIHR5cGUgdG8gdXNlIGZvciB0aGUgdXBkYXRlLlxuICAgKi9cbiAgdXBkYXRlU3Vic2NyaXB0aW9uc1BhcnRpYWwgPSAoXG4gICAgdHJhY2tUeXBlOiBWaWRlb1RyYWNrVHlwZSxcbiAgICBjaGFuZ2VzOiBTdWJzY3JpcHRpb25DaGFuZ2VzLFxuICAgIHR5cGU6IERlYm91bmNlVHlwZSA9IERlYm91bmNlVHlwZS5TTE9XLFxuICApID0+IHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50cyhcbiAgICAgIE9iamVjdC5lbnRyaWVzKGNoYW5nZXMpLnJlZHVjZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcz4oXG4gICAgICAgIChhY2MsIFtzZXNzaW9uSWQsIGNoYW5nZV0pID0+IHtcbiAgICAgICAgICBpZiAoY2hhbmdlLmRpbWVuc2lvbikge1xuICAgICAgICAgICAgY2hhbmdlLmRpbWVuc2lvbi5oZWlnaHQgPSBNYXRoLmNlaWwoY2hhbmdlLmRpbWVuc2lvbi5oZWlnaHQpO1xuICAgICAgICAgICAgY2hhbmdlLmRpbWVuc2lvbi53aWR0aCA9IE1hdGguY2VpbChjaGFuZ2UuZGltZW5zaW9uLndpZHRoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcHJvcDoga2V5b2YgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB8IHVuZGVmaW5lZCA9XG4gICAgICAgICAgICB0cmFja1R5cGUgPT09ICd2aWRlb1RyYWNrJ1xuICAgICAgICAgICAgICA/ICd2aWRlb0RpbWVuc2lvbidcbiAgICAgICAgICAgICAgOiB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZVRyYWNrJ1xuICAgICAgICAgICAgICAgID8gJ3NjcmVlblNoYXJlRGltZW5zaW9uJ1xuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChwcm9wKSB7XG4gICAgICAgICAgICBhY2Nbc2Vzc2lvbklkXSA9IHtcbiAgICAgICAgICAgICAgW3Byb3BdOiBjaGFuZ2UuZGltZW5zaW9uLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLnVwZGF0ZVN1YnNjcmlwdGlvbnMocGFydGljaXBhbnRzLCB0eXBlKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZVN1YnNjcmlwdGlvbnMgPSAoXG4gICAgcGFydGljaXBhbnRzOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50W10sXG4gICAgdHlwZTogRGVib3VuY2VUeXBlID0gRGVib3VuY2VUeXBlLlNMT1csXG4gICkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbnM6IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1tdID0gW107XG4gICAgZm9yIChjb25zdCBwIG9mIHBhcnRpY2lwYW50cykge1xuICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBzdWJzY3JpYmUgdG8gb3VyIG93biB0cmFja3NcbiAgICAgIGlmIChwLmlzTG9jYWxQYXJ0aWNpcGFudCkgY29udGludWU7XG5cbiAgICAgIC8vIE5PVEU6IGF1ZGlvIHRyYWNrcyBkb24ndCBoYXZlIHRvIGJlIHJlcXVlc3RlZCBleHBsaWNpdGx5XG4gICAgICAvLyBhcyB0aGUgU0ZVIHdpbGwgaW1wbGljaXRseSBzdWJzY3JpYmUgdXMgdG8gYWxsIG9mIHRoZW0sXG4gICAgICAvLyBvbmNlIHRoZXkgYmVjb21lIGF2YWlsYWJsZS5cbiAgICAgIGlmIChwLnZpZGVvRGltZW5zaW9uICYmIGhhc1ZpZGVvKHApKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaCh7XG4gICAgICAgICAgdXNlcklkOiBwLnVzZXJJZCxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHAuc2Vzc2lvbklkLFxuICAgICAgICAgIHRyYWNrVHlwZTogVHJhY2tUeXBlLlZJREVPLFxuICAgICAgICAgIGRpbWVuc2lvbjogcC52aWRlb0RpbWVuc2lvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocC5zY3JlZW5TaGFyZURpbWVuc2lvbiAmJiBoYXNTY3JlZW5TaGFyZShwKSkge1xuICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goe1xuICAgICAgICAgIHVzZXJJZDogcC51c2VySWQsXG4gICAgICAgICAgc2Vzc2lvbklkOiBwLnNlc3Npb25JZCxcbiAgICAgICAgICB0cmFja1R5cGU6IFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUsXG4gICAgICAgICAgZGltZW5zaW9uOiBwLnNjcmVlblNoYXJlRGltZW5zaW9uLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChoYXNTY3JlZW5TaGFyZUF1ZGlvKHApKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaCh7XG4gICAgICAgICAgdXNlcklkOiBwLnVzZXJJZCxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHAuc2Vzc2lvbklkLFxuICAgICAgICAgIHRyYWNrVHlwZTogVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHNjaGVkdWxlIHVwZGF0ZVxuICAgIHRoaXMudHJhY2tTdWJzY3JpcHRpb25zU3ViamVjdC5uZXh0KHsgdHlwZSwgZGF0YTogc3Vic2NyaXB0aW9ucyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogV2lsbCBlbmhhbmNlIHRoZSByZXBvcnRlZCBzdGF0cyB3aXRoIGFkZGl0aW9uYWwgcGFydGljaXBhbnQtc3BlY2lmaWMgaW5mb3JtYXRpb24gKGBjYWxsU3RhdHNSZXBvcnQkYCBzdGF0ZSBbc3RvcmUgdmFyaWFibGVdKC4vU3RyZWFtVmlkZW9DbGllbnQubWQvI3JlYWRvbmx5c3RhdGVzdG9yZSkpLlxuICAgKiBUaGlzIGlzIHVzdWFsbHkgaGVscGZ1bCB3aGVuIGRldGFpbGVkIHN0YXRzIGZvciBhIHNwZWNpZmljIHBhcnRpY2lwYW50IGFyZSBuZWVkZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb25JZCB0byBzdGFydCByZXBvcnRpbmcgZm9yLlxuICAgKi9cbiAgc3RhcnRSZXBvcnRpbmdTdGF0c0ZvciA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0YXRzUmVwb3J0ZXI/LnN0YXJ0UmVwb3J0aW5nU3RhdHNGb3Ioc2Vzc2lvbklkKTtcbiAgfTtcblxuICAvKipcbiAgICogT3Bwb3NpdGUgb2YgYHN0YXJ0UmVwb3J0aW5nU3RhdHNGb3JgLlxuICAgKiBXaWxsIHR1cm4gb2ZmIHN0YXRzIHJlcG9ydGluZyBmb3IgYSBzcGVjaWZpYyBwYXJ0aWNpcGFudC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbklkIHRvIHN0b3AgcmVwb3J0aW5nIGZvci5cbiAgICovXG4gIHN0b3BSZXBvcnRpbmdTdGF0c0ZvciA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0YXRzUmVwb3J0ZXI/LnN0b3BSZXBvcnRpbmdTdGF0c0ZvcihzZXNzaW9uSWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIGxhc3Qgc2VudCByZWFjdGlvbiBmb3IgdGhlIHVzZXIgaG9sZGluZyB0aGUgZ2l2ZW4gYHNlc3Npb25JZGAuIFRoaXMgaXMgYSBsb2NhbCBhY3Rpb24sIGl0IHdvbid0IHJlc2V0IHRoZSByZWFjdGlvbiBvbiB0aGUgYmFja2VuZC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBpZC5cbiAgICovXG4gIHJlc2V0UmVhY3Rpb24gPSAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwge1xuICAgICAgcmVhY3Rpb246IHVuZGVmaW5lZCxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgbGlzdCBvZiBjcml0ZXJpYSB0byBzb3J0IHRoZSBwYXJ0aWNpcGFudHMgYnkuXG4gICAqXG4gICAqIEBwYXJhbSBjcml0ZXJpYSB0aGUgbGlzdCBvZiBjcml0ZXJpYSB0byBzb3J0IHRoZSBwYXJ0aWNpcGFudHMgYnkuXG4gICAqL1xuICBzZXRTb3J0UGFydGljaXBhbnRzQnk6IENhbGxTdGF0ZVsnc2V0U29ydFBhcnRpY2lwYW50c0J5J10gPSAoY3JpdGVyaWEpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZXRTb3J0UGFydGljaXBhbnRzQnkoY3JpdGVyaWEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBsaXN0IG9mIHZpZGVvIGxheWVycyB0byBwdWJsaXNoLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIGVuYWJsZWRMYXllcnMgdGhlIGxpc3Qgb2YgbGF5ZXJzIHRvIGVuYWJsZS5cbiAgICovXG4gIHVwZGF0ZVB1Ymxpc2hRdWFsaXR5ID0gYXN5bmMgKGVuYWJsZWRMYXllcnM6IFZpZGVvTGF5ZXJTZXR0aW5nW10pID0+IHtcbiAgICByZXR1cm4gdGhpcy5wdWJsaXNoZXI/LnVwZGF0ZVZpZGVvUHVibGlzaFF1YWxpdHkoZW5hYmxlZExheWVycyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgcmVhY3Rpb24gdG8gdGhlIG90aGVyIGNhbGwgcGFydGljaXBhbnRzLlxuICAgKlxuICAgKiBAcGFyYW0gcmVhY3Rpb24gdGhlIHJlYWN0aW9uIHRvIHNlbmQuXG4gICAqL1xuICBzZW5kUmVhY3Rpb24gPSBhc3luYyAoXG4gICAgcmVhY3Rpb246IFNlbmRSZWFjdGlvblJlcXVlc3QsXG4gICk6IFByb21pc2U8U2VuZFJlYWN0aW9uUmVzcG9uc2U+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxTZW5kUmVhY3Rpb25SZXNwb25zZSwgU2VuZFJlYWN0aW9uUmVxdWVzdD4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9yZWFjdGlvbmAsXG4gICAgICByZWFjdGlvbixcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCbG9ja3MgdGhlIHVzZXIgd2l0aCB0aGUgZ2l2ZW4gYHVzZXJJZGAuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VySWQgdGhlIGlkIG9mIHRoZSB1c2VyIHRvIGJsb2NrLlxuICAgKi9cbiAgYmxvY2tVc2VyID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8QmxvY2tVc2VyUmVzcG9uc2UsIEJsb2NrVXNlclJlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vYmxvY2tgLFxuICAgICAge1xuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuYmxvY2tzIHRoZSB1c2VyIHdpdGggdGhlIGdpdmVuIGB1c2VySWRgLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlciB0byB1bmJsb2NrLlxuICAgKi9cbiAgdW5ibG9ja1VzZXIgPSBhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxVbmJsb2NrVXNlclJlc3BvbnNlLCBVbmJsb2NrVXNlclJlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vdW5ibG9ja2AsXG4gICAgICB7XG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIH0sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogTXV0ZXMgdGhlIGN1cnJlbnQgdXNlci5cbiAgICpcbiAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIG11dGUgb3BlcmF0aW9uLlxuICAgKi9cbiAgbXV0ZVNlbGYgPSAodHlwZTogVHJhY2tNdXRlVHlwZSkgPT4ge1xuICAgIGNvbnN0IG15VXNlcklkID0gdGhpcy5jdXJyZW50VXNlcklkO1xuICAgIGlmIChteVVzZXJJZCkge1xuICAgICAgcmV0dXJuIHRoaXMubXV0ZVVzZXIobXlVc2VySWQsIHR5cGUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogTXV0ZXMgYWxsIHRoZSBvdGhlciBwYXJ0aWNpcGFudHMuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBtdXRlIG9wZXJhdGlvbi5cbiAgICovXG4gIG11dGVPdGhlcnMgPSAodHlwZTogVHJhY2tNdXRlVHlwZSkgPT4ge1xuICAgIGNvbnN0IHRyYWNrVHlwZSA9IG11dGVUeXBlVG9UcmFja1R5cGUodHlwZSk7XG4gICAgaWYgKCF0cmFja1R5cGUpIHJldHVybjtcbiAgICBjb25zdCB1c2VySWRzVG9NdXRlOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFydGljaXBhbnQgb2YgdGhpcy5zdGF0ZS5yZW1vdGVQYXJ0aWNpcGFudHMpIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXModHJhY2tUeXBlKSkge1xuICAgICAgICB1c2VySWRzVG9NdXRlLnB1c2gocGFydGljaXBhbnQudXNlcklkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXNlcklkc1RvTXV0ZS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5tdXRlVXNlcih1c2VySWRzVG9NdXRlLCB0eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE11dGVzIHRoZSB1c2VyIHdpdGggdGhlIGdpdmVuIGB1c2VySWRgLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlciB0byBtdXRlLlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgbXV0ZSBvcGVyYXRpb24uXG4gICAqL1xuICBtdXRlVXNlciA9ICh1c2VySWQ6IHN0cmluZyB8IHN0cmluZ1tdLCB0eXBlOiBUcmFja011dGVUeXBlKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8TXV0ZVVzZXJzUmVzcG9uc2UsIE11dGVVc2Vyc1JlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vbXV0ZV91c2Vyc2AsXG4gICAgICB7XG4gICAgICAgIHVzZXJfaWRzOiBBcnJheS5pc0FycmF5KHVzZXJJZCkgPyB1c2VySWQgOiBbdXNlcklkXSxcbiAgICAgICAgW3R5cGVdOiB0cnVlLFxuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIG11dGUgYWxsIHVzZXJzIGluIHRoZSBjYWxsLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgbXV0ZSBvcGVyYXRpb24uXG4gICAqL1xuICBtdXRlQWxsVXNlcnMgPSAodHlwZTogVHJhY2tNdXRlVHlwZSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PE11dGVVc2Vyc1Jlc3BvbnNlLCBNdXRlVXNlcnNSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L211dGVfdXNlcnNgLFxuICAgICAge1xuICAgICAgICBtdXRlX2FsbF91c2VyczogdHJ1ZSxcbiAgICAgICAgW3R5cGVdOiB0cnVlLFxuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydHMgcmVjb3JkaW5nIHRoZSBjYWxsXG4gICAqL1xuICBzdGFydFJlY29yZGluZyA9IGFzeW5jIChyZXF1ZXN0PzogU3RhcnRSZWNvcmRpbmdSZXF1ZXN0KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBTdGFydFJlY29yZGluZ1Jlc3BvbnNlLFxuICAgICAgU3RhcnRSZWNvcmRpbmdSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdGFydF9yZWNvcmRpbmdgLCByZXF1ZXN0ID8gcmVxdWVzdCA6IHt9KTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgcmVjb3JkaW5nIHRoZSBjYWxsXG4gICAqL1xuICBzdG9wUmVjb3JkaW5nID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFN0b3BSZWNvcmRpbmdSZXNwb25zZT4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdG9wX3JlY29yZGluZ2AsXG4gICAgICB7fSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHRyYW5zY3JpcHRpb24gb2YgdGhlIGNhbGwuXG4gICAqXG4gICAqIEBwYXJhbSByZXF1ZXN0IHRoZSByZXF1ZXN0IGRhdGEuXG4gICAqL1xuICBzdGFydFRyYW5zY3JpcHRpb24gPSBhc3luYyAoXG4gICAgcmVxdWVzdD86IFN0YXJ0VHJhbnNjcmlwdGlvblJlcXVlc3QsXG4gICk6IFByb21pc2U8U3RhcnRUcmFuc2NyaXB0aW9uUmVzcG9uc2U+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxcbiAgICAgIFN0YXJ0VHJhbnNjcmlwdGlvblJlc3BvbnNlLFxuICAgICAgU3RhcnRUcmFuc2NyaXB0aW9uUmVxdWVzdFxuICAgID4oYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vc3RhcnRfdHJhbnNjcmlwdGlvbmAsIHJlcXVlc3QpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgdHJhbnNjcmlwdGlvbiBvZiB0aGUgY2FsbC5cbiAgICovXG4gIHN0b3BUcmFuc2NyaXB0aW9uID0gYXN5bmMgKCk6IFByb21pc2U8U3RvcFRyYW5zY3JpcHRpb25SZXNwb25zZT4gPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFN0b3BUcmFuc2NyaXB0aW9uUmVzcG9uc2U+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vc3RvcF90cmFuc2NyaXB0aW9uYCxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGBjYWxsLnBlcm1pc3Npb25fcmVxdWVzdGAgZXZlbnQgdG8gYWxsIHVzZXJzIGNvbm5lY3RlZCB0byB0aGUgY2FsbC4gVGhlIGNhbGwgc2V0dGluZ3Mgb2JqZWN0IGNvbnRhaW5zIGluZm9tcmF0aW9uIGFib3V0IHdoaWNoIHBlcm1pc3Npb25zIGNhbiBiZSByZXF1ZXN0ZWQgZHVyaW5nIGEgY2FsbCAoZm9yIGV4YW1wbGUgYSB1c2VyIG1pZ2h0IGJlIGFsbG93ZWQgdG8gcmVxdWVzdCBwZXJtaXNzaW9uIHRvIHB1Ymxpc2ggYXVkaW8sIGJ1dCBub3QgdmlkZW8pLlxuICAgKi9cbiAgcmVxdWVzdFBlcm1pc3Npb25zID0gYXN5bmMgKFxuICAgIGRhdGE6IFJlcXVlc3RQZXJtaXNzaW9uUmVxdWVzdCxcbiAgKTogUHJvbWlzZTxSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlPiA9PiB7XG4gICAgY29uc3QgeyBwZXJtaXNzaW9ucyB9ID0gZGF0YTtcbiAgICBjb25zdCBjYW5SZXF1ZXN0UGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucy5ldmVyeSgocGVybWlzc2lvbikgPT5cbiAgICAgIHRoaXMucGVybWlzc2lvbnNDb250ZXh0LmNhblJlcXVlc3QocGVybWlzc2lvbiBhcyBPd25DYXBhYmlsaXR5KSxcbiAgICApO1xuICAgIGlmICghY2FuUmVxdWVzdFBlcm1pc3Npb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHJlcXVlc3QgcGVybWlzc2lvbnM6ICR7cGVybWlzc2lvbnMuam9pbignLCAnKX1gLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlLFxuICAgICAgUmVxdWVzdFBlcm1pc3Npb25SZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9yZXF1ZXN0X3Blcm1pc3Npb25gLCBkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogQWxsb3dzIHlvdSB0byBncmFudCBjZXJ0YWluIHBlcm1pc3Npb25zIHRvIGEgdXNlciBpbiBhIGNhbGwuXG4gICAqIFRoZSBwZXJtaXNzaW9ucyBhcmUgc3BlY2lmaWMgdG8gdGhlIGNhbGwgZXhwZXJpZW5jZSBhbmQgZG8gbm90IHN1cnZpdmUgdGhlIGNhbGwgaXRzZWxmLlxuICAgKlxuICAgKiBTdXBwb3J0ZWQgcGVybWlzc2lvbnMgdGhhdCBjYW4gYmUgZ3JhbnRlZCBhcmU6XG4gICAqIC0gYHNlbmQtYXVkaW9gXG4gICAqIC0gYHNlbmQtdmlkZW9gXG4gICAqIC0gYHNjcmVlbnNoYXJlYFxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlciB0byBncmFudCBwZXJtaXNzaW9ucyB0by5cbiAgICogQHBhcmFtIHBlcm1pc3Npb25zIHRoZSBwZXJtaXNzaW9ucyB0byBncmFudC5cbiAgICovXG4gIGdyYW50UGVybWlzc2lvbnMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIHBlcm1pc3Npb25zOiBzdHJpbmdbXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVVzZXJQZXJtaXNzaW9ucyh7XG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBncmFudF9wZXJtaXNzaW9uczogcGVybWlzc2lvbnMsXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFsbG93cyB5b3UgdG8gcmV2b2tlIGNlcnRhaW4gcGVybWlzc2lvbnMgZnJvbSBhIHVzZXIgaW4gYSBjYWxsLlxuICAgKiBUaGUgcGVybWlzc2lvbnMgYXJlIHNwZWNpZmljIHRvIHRoZSBjYWxsIGV4cGVyaWVuY2UgYW5kIGRvIG5vdCBzdXJ2aXZlIHRoZSBjYWxsIGl0c2VsZi5cbiAgICpcbiAgICogU3VwcG9ydGVkIHBlcm1pc3Npb25zIHRoYXQgY2FuIGJlIHJldm9rZWQgYXJlOlxuICAgKiAtIGBzZW5kLWF1ZGlvYFxuICAgKiAtIGBzZW5kLXZpZGVvYFxuICAgKiAtIGBzY3JlZW5zaGFyZWBcbiAgICpcbiAgICogQHBhcmFtIHVzZXJJZCB0aGUgaWQgb2YgdGhlIHVzZXIgdG8gcmV2b2tlIHBlcm1pc3Npb25zIGZyb20uXG4gICAqIEBwYXJhbSBwZXJtaXNzaW9ucyB0aGUgcGVybWlzc2lvbnMgdG8gcmV2b2tlLlxuICAgKi9cbiAgcmV2b2tlUGVybWlzc2lvbnMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIHBlcm1pc3Npb25zOiBzdHJpbmdbXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVVzZXJQZXJtaXNzaW9ucyh7XG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICByZXZva2VfcGVybWlzc2lvbnM6IHBlcm1pc3Npb25zLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgeW91IHRvIGdyYW50IG9yIHJldm9rZSBhIHNwZWNpZmljIHBlcm1pc3Npb24gdG8gYSB1c2VyIGluIGEgY2FsbC4gVGhlIHBlcm1pc3Npb25zIGFyZSBzcGVjaWZpYyB0byB0aGUgY2FsbCBleHBlcmllbmNlIGFuZCBkbyBub3Qgc3Vydml2ZSB0aGUgY2FsbCBpdHNlbGYuXG4gICAqXG4gICAqIFdoZW4gcmV2b2tpbmcgYSBwZXJtaXNzaW9uLCB0aGlzIGVuZHBvaW50IHdpbGwgYWxzbyBtdXRlIHRoZSByZWxldmFudCB0cmFjayBmcm9tIHRoZSB1c2VyLiBUaGlzIGlzIHNpbWlsYXIgdG8gbXV0aW5nIGEgdXNlciB3aXRoIHRoZSBkaWZmZXJlbmNlIHRoYXQgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byB1bm11dGUgYWZ0ZXJ3YXJkcy5cbiAgICpcbiAgICogU3VwcG9ydGVkIHBlcm1pc3Npb25zIHRoYXQgY2FuIGJlIGdyYW50ZWQgb3IgcmV2b2tlZDogYHNlbmQtYXVkaW9gLCBgc2VuZC12aWRlb2AgYW5kIGBzY3JlZW5zaGFyZWAuXG4gICAqXG4gICAqIGBjYWxsLnBlcm1pc3Npb25zX3VwZGF0ZWRgIGV2ZW50IGlzIHNlbnQgdG8gYWxsIG1lbWJlcnMgb2YgdGhlIGNhbGwuXG4gICAqXG4gICAqL1xuICB1cGRhdGVVc2VyUGVybWlzc2lvbnMgPSBhc3luYyAoZGF0YTogVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFxuICAgICAgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVzcG9uc2UsXG4gICAgICBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS91c2VyX3Blcm1pc3Npb25zYCwgZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgbGl2ZXN0cmVhbWluZyBvZiB0aGUgY2FsbC5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIHJlcXVlc3QgZGF0YS5cbiAgICogQHBhcmFtIHBhcmFtcyB0aGUgcmVxdWVzdCBwYXJhbXMuXG4gICAqL1xuICBnb0xpdmUgPSBhc3luYyAoZGF0YTogR29MaXZlUmVxdWVzdCA9IHt9LCBwYXJhbXM/OiB7IG5vdGlmeT86IGJvb2xlYW4gfSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PEdvTGl2ZVJlc3BvbnNlLCBHb0xpdmVSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L2dvX2xpdmVgLFxuICAgICAgZGF0YSxcbiAgICAgIHBhcmFtcyxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgbGl2ZXN0cmVhbWluZyBvZiB0aGUgY2FsbC5cbiAgICovXG4gIHN0b3BMaXZlID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFN0b3BMaXZlUmVzcG9uc2U+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vc3RvcF9saXZlYCxcbiAgICAgIHt9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgYnJvYWRjYXN0aW5nIG9mIHRoZSBjYWxsLlxuICAgKi9cbiAgc3RhcnRITFMgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8U3RhcnRITFNCcm9hZGNhc3RpbmdSZXNwb25zZT4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdGFydF9icm9hZGNhc3RpbmdgLFxuICAgICAge30sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgdGhlIGJyb2FkY2FzdGluZyBvZiB0aGUgY2FsbC5cbiAgICovXG4gIHN0b3BITFMgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8U3RvcEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlPihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L3N0b3BfYnJvYWRjYXN0aW5nYCxcbiAgICAgIHt9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNhbGwgc2V0dGluZ3Mgb3IgY3VzdG9tIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB1cGRhdGVzIHRoZSB1cGRhdGVzIHRvIGFwcGx5IHRvIHRoZSBjYWxsLlxuICAgKi9cbiAgdXBkYXRlID0gYXN5bmMgKHVwZGF0ZXM6IFVwZGF0ZUNhbGxSZXF1ZXN0KSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnN0cmVhbUNsaWVudC5wYXRjaDxcbiAgICAgIFVwZGF0ZUNhbGxSZXNwb25zZSxcbiAgICAgIFVwZGF0ZUNhbGxSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofWAsIHVwZGF0ZXMpO1xuXG4gICAgY29uc3QgeyBjYWxsLCBtZW1iZXJzLCBvd25fY2FwYWJpbGl0aWVzIH0gPSByZXNwb25zZTtcbiAgICB0aGlzLnN0YXRlLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoY2FsbCk7XG4gICAgdGhpcy5zdGF0ZS5zZXRNZW1iZXJzKG1lbWJlcnMpO1xuICAgIHRoaXMuc3RhdGUuc2V0T3duQ2FwYWJpbGl0aWVzKG93bl9jYXBhYmlsaXRpZXMpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmRzIHRoZSBjYWxsLiBPbmNlIHRoZSBjYWxsIGlzIGVuZGVkLCBpdCBjYW5ub3QgYmUgcmUtam9pbmVkLlxuICAgKi9cbiAgZW5kQ2FsbCA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxFbmRDYWxsUmVzcG9uc2U+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vbWFya19lbmRlZGAsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogUGlucyB0aGUgZ2l2ZW4gc2Vzc2lvbiB0byB0aGUgdG9wIG9mIHRoZSBwYXJ0aWNpcGFudHMgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbklkIHRvIHBpbi5cbiAgICovXG4gIHBpbiA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuc3RhdGUudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCB7XG4gICAgICBwaW46IHtcbiAgICAgICAgaXNMb2NhbFBpbjogdHJ1ZSxcbiAgICAgICAgcGlubmVkQXQ6IERhdGUubm93KCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnBpbnMgdGhlIGdpdmVuIHNlc3Npb24gZnJvbSB0aGUgdG9wIG9mIHRoZSBwYXJ0aWNpcGFudHMgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbklkIHRvIHVucGluLlxuICAgKi9cbiAgdW5waW4gPSAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwge1xuICAgICAgcGluOiB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBpbnMgdGhlIGdpdmVuIHNlc3Npb24gdG8gdGhlIHRvcCBvZiB0aGUgcGFydGljaXBhbnRzIGxpc3QgZm9yIGV2ZXJ5b25lXG4gICAqIGluIHRoZSBjYWxsLlxuICAgKiBZb3UgY2FuIGV4ZWN1dGUgdGhpcyBtZXRob2Qgb25seSBpZiB5b3UgaGF2ZSB0aGUgYHBpbi1mb3ItZXZlcnlvbmVgIGNhcGFiaWxpdHkuXG4gICAqXG4gICAqIEBwYXJhbSByZXF1ZXN0IHRoZSByZXF1ZXN0IG9iamVjdC5cbiAgICovXG4gIHBpbkZvckV2ZXJ5b25lID0gYXN5bmMgKHJlcXVlc3Q6IFBpblJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxQaW5SZXNwb25zZSwgUGluUmVxdWVzdD4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9waW5gLFxuICAgICAgcmVxdWVzdCxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnBpbnMgdGhlIGdpdmVuIHNlc3Npb24gZnJvbSB0aGUgdG9wIG9mIHRoZSBwYXJ0aWNpcGFudHMgbGlzdCBmb3IgZXZlcnlvbmVcbiAgICogaW4gdGhlIGNhbGwuXG4gICAqIFlvdSBjYW4gZXhlY3V0ZSB0aGlzIG1ldGhvZCBvbmx5IGlmIHlvdSBoYXZlIHRoZSBgcGluLWZvci1ldmVyeW9uZWAgY2FwYWJpbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIHJlcXVlc3QgdGhlIHJlcXVlc3Qgb2JqZWN0LlxuICAgKi9cbiAgdW5waW5Gb3JFdmVyeW9uZSA9IGFzeW5jIChyZXF1ZXN0OiBVbnBpblJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxVbnBpblJlc3BvbnNlLCBVbnBpblJlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vdW5waW5gLFxuICAgICAgcmVxdWVzdCxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBRdWVyeSBjYWxsIG1lbWJlcnMgd2l0aCBmaWx0ZXIgcXVlcnkuIFRoZSByZXN1bHQgd29uJ3QgYmUgc3RvcmVkIGluIGNhbGwgc3RhdGUuXG4gICAqIEBwYXJhbSByZXF1ZXN0XG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBxdWVyeU1lbWJlcnMgPSAocmVxdWVzdD86IE9taXQ8UXVlcnlDYWxsTWVtYmVyc1JlcXVlc3QsICd0eXBlJyB8ICdpZCc+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBRdWVyeUNhbGxNZW1iZXJzUmVzcG9uc2UsXG4gICAgICBRdWVyeUNhbGxNZW1iZXJzUmVxdWVzdFxuICAgID4oJy9jYWxsL21lbWJlcnMnLCB7XG4gICAgICAuLi4ocmVxdWVzdCB8fCB7fSksXG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogV2lsbCB1cGRhdGUgdGhlIGNhbGwgbWVtYmVycy5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIHJlcXVlc3QgZGF0YS5cbiAgICovXG4gIHVwZGF0ZUNhbGxNZW1iZXJzID0gYXN5bmMgKFxuICAgIGRhdGE6IFVwZGF0ZUNhbGxNZW1iZXJzUmVxdWVzdCxcbiAgKTogUHJvbWlzZTxVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlPiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlLFxuICAgICAgVXBkYXRlQ2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9tZW1iZXJzYCwgZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyBhbiBhdXRvLWRyb3AgdGltZW91dCBiYXNlZCBvbiB0aGUgY2FsbCBzZXR0aW5ncy5cbiAgICogQXBwbGljYWJsZSBvbmx5IGZvciByaW5naW5nIGNhbGxzLlxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUF1dG9Ecm9wID0gKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmRyb3BUaW1lb3V0KTtcbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChcbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbih0aGlzLnN0YXRlLnNldHRpbmdzJCwgKHNldHRpbmdzKSA9PiB7XG4gICAgICAgIGlmICghc2V0dGluZ3MpIHJldHVybjtcbiAgICAgICAgLy8gaWdub3JlIGlmIHRoZSBjYWxsIGlzIG5vdCByaW5naW5nXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSAhPT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0aW1lb3V0SW5NcyA9IHNldHRpbmdzLnJpbmcuYXV0b19jYW5jZWxfdGltZW91dF9tcztcbiAgICAgICAgLy8gMCBtZWFucyBubyBhdXRvLWRyb3BcbiAgICAgICAgaWYgKHRpbWVvdXRJbk1zIDw9IDApIHJldHVybjtcblxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kcm9wVGltZW91dCk7XG4gICAgICAgIHRoaXMuZHJvcFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmxlYXZlKHsgcmVhc29uOiAncmluZzogdGltZW91dCcgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgJ0ZhaWxlZCB0byBkcm9wIGNhbGwnLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCB0aW1lb3V0SW5Ncyk7XG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGxpc3Qgb2YgcmVjb3JkaW5ncyBmb3IgdGhlIGN1cnJlbnQgY2FsbCBvciBjYWxsIHNlc3Npb24uXG4gICAqXG4gICAqIElmIGBjYWxsU2Vzc2lvbklkYCBpcyBwcm92aWRlZCwgaXQgd2lsbCByZXR1cm4gdGhlIHJlY29yZGluZ3MgZm9yIHRoYXQgY2FsbCBzZXNzaW9uLlxuICAgKiBPdGhlcndpc2UsIGFsbCByZWNvcmRpbmdzIGZvciB0aGUgY3VycmVudCBjYWxsIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsU2Vzc2lvbklkIHRoZSBjYWxsIHNlc3Npb24gaWQgdG8gcmV0cmlldmUgcmVjb3JkaW5ncyBmb3IuXG4gICAqL1xuICBxdWVyeVJlY29yZGluZ3MgPSBhc3luYyAoXG4gICAgY2FsbFNlc3Npb25JZD86IHN0cmluZyxcbiAgKTogUHJvbWlzZTxMaXN0UmVjb3JkaW5nc1Jlc3BvbnNlPiA9PiB7XG4gICAgbGV0IGVuZHBvaW50ID0gdGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aDtcbiAgICBpZiAoY2FsbFNlc3Npb25JZCkge1xuICAgICAgZW5kcG9pbnQgPSBgJHtlbmRwb2ludH0vJHtjYWxsU2Vzc2lvbklkfWA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5nZXQ8TGlzdFJlY29yZGluZ3NSZXNwb25zZT4oXG4gICAgICBgJHtlbmRwb2ludH0vcmVjb3JkaW5nc2AsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBsaXN0IG9mIHRyYW5zY3JpcHRpb25zIGZvciB0aGUgY3VycmVudCBjYWxsLlxuICAgKlxuICAgKiBAcmV0dXJucyB0aGUgbGlzdCBvZiB0cmFuc2NyaXB0aW9ucy5cbiAgICovXG4gIHF1ZXJ5VHJhbnNjcmlwdGlvbnMgPSBhc3luYyAoKTogUHJvbWlzZTxMaXN0VHJhbnNjcmlwdGlvbnNSZXNwb25zZT4gPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5nZXQ8TGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2U+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vdHJhbnNjcmlwdGlvbnNgLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGNhbGwgc3RhdGlzdGljcyBmb3IgYSBwYXJ0aWN1bGFyIGNhbGwgc2Vzc2lvbiAoaGlzdG9yaWNhbCkuXG4gICAqIEhlcmUgYGNhbGxTZXNzaW9uSURgIGlzIG1hbmRhdG9yeS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxTZXNzaW9uSUQgdGhlIGNhbGwgc2Vzc2lvbiBJRCB0byByZXRyaWV2ZSBzdGF0aXN0aWNzIGZvci5cbiAgICogQHJldHVybnMgVGhlIGNhbGwgc3RhdHMuXG4gICAqL1xuICBnZXRDYWxsU3RhdHMgPSBhc3luYyAoY2FsbFNlc3Npb25JRDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdGF0cy8ke2NhbGxTZXNzaW9uSUR9YDtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZ2V0PEdldENhbGxTdGF0c1Jlc3BvbnNlPihlbmRwb2ludCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN1Ym1pdCB1c2VyIGZlZWRiYWNrIGZvciB0aGUgY2FsbFxuICAgKlxuICAgKiBAcGFyYW0gcmF0aW5nIFJhdGluZyBiZXR3ZWVuIDEgYW5kIDUgZGVub3RpbmcgdGhlIGV4cGVyaWVuY2Ugb2YgdGhlIHVzZXIgaW4gdGhlIGNhbGxcbiAgICogQHBhcmFtIHJlYXNvbiBUaGUgcmVhc29uL2Rlc2NyaXB0aW9uIGZvciB0aGUgcmF0aW5nXG4gICAqIEBwYXJhbSBjdXN0b20gQ3VzdG9tIGRhdGFcbiAgICogQHJldHVybnNcbiAgICovXG4gIHN1Ym1pdEZlZWRiYWNrID0gYXN5bmMgKFxuICAgIHJhdGluZzogbnVtYmVyLFxuICAgIHtcbiAgICAgIHJlYXNvbixcbiAgICAgIGN1c3RvbSxcbiAgICB9OiB7XG4gICAgICByZWFzb24/OiBzdHJpbmc7XG4gICAgICBjdXN0b20/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIH0gPSB7fSxcbiAgKSA9PiB7XG4gICAgaWYgKHJhdGluZyA8IDEgfHwgcmF0aW5nID4gNSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYXRpbmcgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDUnKTtcbiAgICB9XG4gICAgY29uc3QgY2FsbFNlc3Npb25JZCA9IHRoaXMuc3RhdGUuc2Vzc2lvbj8uaWQ7XG4gICAgaWYgKCFjYWxsU2Vzc2lvbklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdGZWVkYmFjayBjYW4gYmUgc3VibWl0dGVkIG9ubHkgaW4gdGhlIGNvbnRleHQgb2YgYSBjYWxsIHNlc3Npb24nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNka05hbWUsIHNka1ZlcnNpb24sIC4uLnBsYXRmb3JtIH0gPVxuICAgICAgZ2V0U2RrU2lnbmF0dXJlKGdldENsaWVudERldGFpbHMoKSk7XG5cbiAgICAvLyB1c2VyIHNlc3Npb25JZCBpcyBub3QgYXZhaWxhYmxlIG9uY2UgdGhlIGNhbGwgaGFzIGJlZW4gbGVmdFxuICAgIC8vIHVudGlsIHdlIHJlbGF4IHRoZSBiYWNrZW5kIHZhbGlkYXRpb24sIHdlJ2xsIHNlbmQgTi9BXG4gICAgY29uc3QgdXNlclNlc3Npb25JZCA9IHRoaXMuc2Z1Q2xpZW50Py5zZXNzaW9uSWQgPz8gJ04vQSc7XG4gICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9mZWVkYmFjay8ke2NhbGxTZXNzaW9uSWR9YDtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxcbiAgICAgIENvbGxlY3RVc2VyRmVlZGJhY2tSZXNwb25zZSxcbiAgICAgIENvbGxlY3RVc2VyRmVlZGJhY2tSZXF1ZXN0XG4gICAgPihlbmRwb2ludCwge1xuICAgICAgcmF0aW5nLFxuICAgICAgcmVhc29uLFxuICAgICAgdXNlcl9zZXNzaW9uX2lkOiB1c2VyU2Vzc2lvbklkLFxuICAgICAgc2RrOiBzZGtOYW1lLFxuICAgICAgc2RrX3ZlcnNpb246IHNka1ZlcnNpb24sXG4gICAgICBjdXN0b206IHtcbiAgICAgICAgLi4uY3VzdG9tLFxuICAgICAgICAneC1zdHJlYW0tcGxhdGZvcm0tZGF0YSc6IHBsYXRmb3JtLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU2VuZHMgYSBjdXN0b20gZXZlbnQgdG8gYWxsIGNhbGwgcGFydGljaXBhbnRzLlxuICAgKlxuICAgKiBAcGFyYW0gcGF5bG9hZCB0aGUgcGF5bG9hZCB0byBzZW5kLlxuICAgKi9cbiAgc2VuZEN1c3RvbUV2ZW50ID0gYXN5bmMgKHBheWxvYWQ6IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxTZW5kQ2FsbEV2ZW50UmVzcG9uc2UsIFNlbmRDYWxsRXZlbnRSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L2V2ZW50YCxcbiAgICAgIHsgY3VzdG9tOiBwYXlsb2FkIH0sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwbGllcyB0aGUgZGV2aWNlIGNvbmZpZ3VyYXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhcHBseURldmljZUNvbmZpZyA9IGFzeW5jIChzdGF0dXM6IGJvb2xlYW4pID0+IHtcbiAgICBhd2FpdCB0aGlzLmluaXRDYW1lcmEoeyBzZXRTdGF0dXM6IHN0YXR1cyB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlcignd2FybicsICdDYW1lcmEgaW5pdCBmYWlsZWQnLCBlcnIpO1xuICAgIH0pO1xuICAgIGF3YWl0IHRoaXMuaW5pdE1pYyh7IHNldFN0YXR1czogc3RhdHVzIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgJ01pYyBpbml0IGZhaWxlZCcsIGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBpbml0Q2FtZXJhID0gYXN5bmMgKG9wdGlvbnM6IHsgc2V0U3RhdHVzOiBib29sZWFuIH0pID0+IHtcbiAgICAvLyBXYWl0IGZvciBhbnkgaW4gcHJvZ3Jlc3MgY2FtZXJhIG9wZXJhdGlvblxuICAgIGF3YWl0IHRoaXMuY2FtZXJhLnN0YXR1c0NoYW5nZVNldHRsZWQoKTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUubG9jYWxQYXJ0aWNpcGFudD8udmlkZW9TdHJlYW0gfHxcbiAgICAgICF0aGlzLnBlcm1pc3Npb25zQ29udGV4dC5oYXNQZXJtaXNzaW9uKCdzZW5kLXZpZGVvJylcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXQgY2FtZXJhIGRpcmVjdGlvbiBpZiBpdCdzIG5vdCB5ZXQgc2V0XG4gICAgaWYgKCF0aGlzLmNhbWVyYS5zdGF0ZS5kaXJlY3Rpb24gJiYgIXRoaXMuY2FtZXJhLnN0YXRlLnNlbGVjdGVkRGV2aWNlKSB7XG4gICAgICBsZXQgZGVmYXVsdERpcmVjdGlvbjogQ2FtZXJhRGlyZWN0aW9uID0gJ2Zyb250JztcbiAgICAgIGNvbnN0IGJhY2tlbmRTZXR0aW5nID0gdGhpcy5zdGF0ZS5zZXR0aW5ncz8udmlkZW8uY2FtZXJhX2ZhY2luZztcbiAgICAgIGlmIChiYWNrZW5kU2V0dGluZykge1xuICAgICAgICBkZWZhdWx0RGlyZWN0aW9uID0gYmFja2VuZFNldHRpbmcgPT09ICdmcm9udCcgPyAnZnJvbnQnIDogJ2JhY2snO1xuICAgICAgfVxuICAgICAgdGhpcy5jYW1lcmEuc3RhdGUuc2V0RGlyZWN0aW9uKGRlZmF1bHREaXJlY3Rpb24pO1xuICAgIH1cblxuICAgIC8vIFNldCB0YXJnZXQgcmVzb2x1dGlvblxuICAgIGNvbnN0IHRhcmdldFJlc29sdXRpb24gPSB0aGlzLnN0YXRlLnNldHRpbmdzPy52aWRlby50YXJnZXRfcmVzb2x1dGlvbjtcbiAgICBpZiAodGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgYXdhaXQgdGhpcy5jYW1lcmEuc2VsZWN0VGFyZ2V0UmVzb2x1dGlvbih0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5zZXRTdGF0dXMpIHtcbiAgICAgIC8vIFB1Ymxpc2ggYWxyZWFkeSB0aGF0IHdhcyBzZXQgYmVmb3JlIHdlIGpvaW5lZFxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmNhbWVyYS5lbmFibGVkICYmXG4gICAgICAgIHRoaXMuY2FtZXJhLnN0YXRlLm1lZGlhU3RyZWFtICYmXG4gICAgICAgICF0aGlzLnB1Ymxpc2hlcj8uaXNQdWJsaXNoaW5nKFRyYWNrVHlwZS5WSURFTylcbiAgICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLnB1Ymxpc2hWaWRlb1N0cmVhbShcbiAgICAgICAgICB0aGlzLmNhbWVyYS5zdGF0ZS5tZWRpYVN0cmVhbSxcbiAgICAgICAgICB0aGlzLmNhbWVyYS5wdWJsaXNoT3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhcnQgY2FtZXJhIGlmIGJhY2tlbmQgY29uZmlnIHNwZWNpZmllcywgYW5kIHRoZXJlIGlzIG5vIGxvY2FsIHNldHRpbmdcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5jYW1lcmEuc3RhdGUuc3RhdHVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXR0aW5ncz8udmlkZW8uY2FtZXJhX2RlZmF1bHRfb25cbiAgICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLmNhbWVyYS5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBpbml0TWljID0gYXN5bmMgKG9wdGlvbnM6IHsgc2V0U3RhdHVzOiBib29sZWFuIH0pID0+IHtcbiAgICAvLyBXYWl0IGZvciBhbnkgaW4gcHJvZ3Jlc3MgbWljIG9wZXJhdGlvblxuICAgIGF3YWl0IHRoaXMubWljcm9waG9uZS5zdGF0dXNDaGFuZ2VTZXR0bGVkKCk7XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLmxvY2FsUGFydGljaXBhbnQ/LmF1ZGlvU3RyZWFtIHx8XG4gICAgICAhdGhpcy5wZXJtaXNzaW9uc0NvbnRleHQuaGFzUGVybWlzc2lvbignc2VuZC1hdWRpbycpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc2V0U3RhdHVzKSB7XG4gICAgICAvLyBQdWJsaXNoIG1lZGlhIHN0cmVhbSB0aGF0IHdhcyBzZXQgYmVmb3JlIHdlIGpvaW5lZFxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLm1pY3JvcGhvbmUuZW5hYmxlZCAmJlxuICAgICAgICB0aGlzLm1pY3JvcGhvbmUuc3RhdGUubWVkaWFTdHJlYW0gJiZcbiAgICAgICAgIXRoaXMucHVibGlzaGVyPy5pc1B1Ymxpc2hpbmcoVHJhY2tUeXBlLkFVRElPKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucHVibGlzaEF1ZGlvU3RyZWFtKHRoaXMubWljcm9waG9uZS5zdGF0ZS5tZWRpYVN0cmVhbSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0YXJ0IG1pYyBpZiBiYWNrZW5kIGNvbmZpZyBzcGVjaWZpZXMsIGFuZCB0aGVyZSBpcyBubyBsb2NhbCBzZXR0aW5nXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMubWljcm9waG9uZS5zdGF0ZS5zdGF0dXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdzPy5hdWRpby5taWNfZGVmYXVsdF9vblxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubWljcm9waG9uZS5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFdpbGwgYmVnaW4gdHJhY2tpbmcgdGhlIGdpdmVuIGVsZW1lbnQgZm9yIHZpc2liaWxpdHkgY2hhbmdlcyB3aXRoaW4gdGhlXG4gICAqIGNvbmZpZ3VyZWQgdmlld3BvcnQgZWxlbWVudCAoYGNhbGwuc2V0Vmlld3BvcnRgKS5cbiAgICpcbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIGVsZW1lbnQgdG8gdHJhY2suXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb24gaWQuXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIHZpZGVvIG1vZGUuXG4gICAqL1xuICB0cmFja0VsZW1lbnRWaXNpYmlsaXR5ID0gPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXG4gICAgZWxlbWVudDogVCxcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICB0cmFja1R5cGU6IFZpZGVvVHJhY2tUeXBlLFxuICApID0+IHtcbiAgICByZXR1cm4gdGhpcy5keW5hc2NhbGVNYW5hZ2VyLnRyYWNrRWxlbWVudFZpc2liaWxpdHkoXG4gICAgICBlbGVtZW50LFxuICAgICAgc2Vzc2lvbklkLFxuICAgICAgdHJhY2tUeXBlLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZpZXdwb3J0IGVsZW1lbnQgdG8gdHJhY2sgYm91bmQgdmlkZW8gZWxlbWVudHMgZm9yIHZpc2liaWxpdHkuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50IHRoZSB2aWV3cG9ydCBlbGVtZW50LlxuICAgKi9cbiAgc2V0Vmlld3BvcnQgPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50PihlbGVtZW50OiBUKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZHluYXNjYWxlTWFuYWdlci5zZXRWaWV3cG9ydChlbGVtZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogQmluZHMgYSBET00gPHZpZGVvPiBlbGVtZW50IHRvIHRoZSBnaXZlbiBzZXNzaW9uIGlkLlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRoZSB2aWRlbyBlbGVtZW50IHdpbGwgcGxheVxuICAgKiB0aGUgY29ycmVjdCB2aWRlbyBzdHJlYW0gZm9yIHRoZSBnaXZlbiBzZXNzaW9uIGlkLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgaXQgd291bGQgYWxzbyBrZWVwIHRyYWNrIG9mIHRoZSB2aWRlbyBlbGVtZW50IGRpbWVuc2lvbnNcbiAgICogYW5kIHVwZGF0ZSB0aGUgc3Vic2NyaXB0aW9uIGFjY29yZGluZ2x5IGluIG9yZGVyIHRvIG9wdGltaXplIHRoZSBiYW5kd2lkdGguXG4gICAqXG4gICAqIElmIGEgXCJ2aWV3cG9ydFwiIGlzIGNvbmZpZ3VyZWQsIHRoZSB2aWRlbyBlbGVtZW50IHdpbGwgYmUgYXV0b21hdGljYWxseVxuICAgKiB0cmFja2VkIGZvciB2aXNpYmlsaXR5IGFuZCB0aGUgc3Vic2NyaXB0aW9uIHdpbGwgYmUgdXBkYXRlZCBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogQHBhcmFtIHZpZGVvRWxlbWVudCB0aGUgdmlkZW8gZWxlbWVudCB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSBraW5kIG9mIHZpZGVvLlxuICAgKi9cbiAgYmluZFZpZGVvRWxlbWVudCA9IChcbiAgICB2aWRlb0VsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQsXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgdHJhY2tUeXBlOiBWaWRlb1RyYWNrVHlwZSxcbiAgKSA9PiB7XG4gICAgY29uc3QgdW5iaW5kID0gdGhpcy5keW5hc2NhbGVNYW5hZ2VyLmJpbmRWaWRlb0VsZW1lbnQoXG4gICAgICB2aWRlb0VsZW1lbnQsXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICB0cmFja1R5cGUsXG4gICAgKTtcblxuICAgIGlmICghdW5iaW5kKSByZXR1cm47XG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQodW5iaW5kKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5kZWxldGUodW5iaW5kKTtcbiAgICAgIHVuYmluZCgpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEJpbmRzIGEgRE9NIDxhdWRpbz4gZWxlbWVudCB0byB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgYXVkaW8gZWxlbWVudCB3aWxsXG4gICAqIHBsYXkgdGhlIGNvcnJlY3QgYXVkaW8gc3RyZWFtIGZvciB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogQHBhcmFtIGF1ZGlvRWxlbWVudCB0aGUgYXVkaW8gZWxlbWVudCB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSBraW5kIG9mIGF1ZGlvLlxuICAgKi9cbiAgYmluZEF1ZGlvRWxlbWVudCA9IChcbiAgICBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQsXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgdHJhY2tUeXBlOiBBdWRpb1RyYWNrVHlwZSA9ICdhdWRpb1RyYWNrJyxcbiAgKSA9PiB7XG4gICAgY29uc3QgdW5iaW5kID0gdGhpcy5keW5hc2NhbGVNYW5hZ2VyLmJpbmRBdWRpb0VsZW1lbnQoXG4gICAgICBhdWRpb0VsZW1lbnQsXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICB0cmFja1R5cGUsXG4gICAgKTtcblxuICAgIGlmICghdW5iaW5kKSByZXR1cm47XG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQodW5iaW5kKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5kZWxldGUodW5iaW5kKTtcbiAgICAgIHVuYmluZCgpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEJpbmRzIGEgRE9NIDxpbWc+IGVsZW1lbnQgdG8gdGhpcyBjYWxsJ3MgdGh1bWJuYWlsIChpZiBlbmFibGVkIGluIHNldHRpbmdzKS5cbiAgICpcbiAgICogQHBhcmFtIGltYWdlRWxlbWVudCB0aGUgaW1hZ2UgZWxlbWVudCB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gb3B0cyBvcHRpb25zIGZvciB0aGUgYmluZGluZy5cbiAgICovXG4gIGJpbmRDYWxsVGh1bWJuYWlsRWxlbWVudCA9IChcbiAgICBpbWFnZUVsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnQsXG4gICAgb3B0czoge1xuICAgICAgZmFsbGJhY2tJbWFnZVNvdXJjZT86IHN0cmluZztcbiAgICB9ID0ge30sXG4gICkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKCkgPT4ge1xuICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9XG4gICAgICAgIG9wdHMuZmFsbGJhY2tJbWFnZVNvdXJjZSB8fFxuICAgICAgICAnaHR0cHM6Ly9nZXRzdHJlYW0uaW8vcmFuZG9tX3N2Zy8/bmFtZT14JmlkPXgnO1xuICAgIH07XG5cbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IGNyZWF0ZVN1YnNjcmlwdGlvbihcbiAgICAgIHRoaXMuc3RhdGUudGh1bWJuYWlscyQsXG4gICAgICAodGh1bWJuYWlscykgPT4ge1xuICAgICAgICBpZiAoIXRodW1ibmFpbHMpIHJldHVybjtcbiAgICAgICAgaW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgaGFuZGxlRXJyb3IpO1xuXG4gICAgICAgIGNvbnN0IHRodW1ibmFpbFVybCA9IG5ldyBVUkwodGh1bWJuYWlscy5pbWFnZV91cmwpO1xuICAgICAgICB0aHVtYm5haWxVcmwuc2VhcmNoUGFyYW1zLnNldCgndycsIFN0cmluZyhpbWFnZUVsZW1lbnQuY2xpZW50V2lkdGgpKTtcbiAgICAgICAgdGh1bWJuYWlsVXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2gnLCBTdHJpbmcoaW1hZ2VFbGVtZW50LmNsaWVudEhlaWdodCkpO1xuXG4gICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSB0aHVtYm5haWxVcmwudG9TdHJpbmcoKTtcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgaW1hZ2VFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgaGFuZGxlRXJyb3IpO1xuICAgIH07XG4gIH07XG59XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgU3RhYmxlV1NDb25uZWN0aW9uIH0gZnJvbSAnLi9jb25uZWN0aW9uJztcbmltcG9ydCB7IHJhbmRvbUlkLCBzbGVlcCB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBJbnNpZ2h0VHlwZXMgPVxuICB8ICd3c19mYXRhbCdcbiAgfCAnd3Nfc3VjY2Vzc19hZnRlcl9mYWlsdXJlJ1xuICB8ICdodHRwX2hpX2ZhaWxlZCc7XG5leHBvcnQgY2xhc3MgSW5zaWdodE1ldHJpY3Mge1xuICBjb25uZWN0aW9uU3RhcnRUaW1lc3RhbXA6IG51bWJlciB8IG51bGw7XG4gIHdzQ29uc2VjdXRpdmVGYWlsdXJlczogbnVtYmVyO1xuICB3c1RvdGFsRmFpbHVyZXM6IG51bWJlcjtcbiAgaW5zdGFuY2VDbGllbnRJZDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29ubmVjdGlvblN0YXJ0VGltZXN0YW1wID0gbnVsbDtcbiAgICB0aGlzLndzVG90YWxGYWlsdXJlcyA9IDA7XG4gICAgdGhpcy53c0NvbnNlY3V0aXZlRmFpbHVyZXMgPSAwO1xuICAgIHRoaXMuaW5zdGFuY2VDbGllbnRJZCA9IHJhbmRvbUlkKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBwb3N0SW5zaWdodHMgaXMgbm90IHN1cHBvc2VkIHRvIGJlIHVzZWQgYnkgZW5kIHVzZXJzIGRpcmVjdGx5IHdpdGhpbiBjaGF0IGFwcGxpY2F0aW9uLCBhbmQgdGh1cyBpcyBrZXB0IGlzb2xhdGVkXG4gKiBmcm9tIGFsbCB0aGUgY2xpZW50L2Nvbm5lY3Rpb24gY29kZS9sb2dpYy5cbiAqXG4gKiBAcGFyYW0gaW5zaWdodFR5cGVcbiAqIEBwYXJhbSBpbnNpZ2h0c1xuICovXG5leHBvcnQgY29uc3QgcG9zdEluc2lnaHRzID0gYXN5bmMgKFxuICBpbnNpZ2h0VHlwZTogSW5zaWdodFR5cGVzLFxuICBpbnNpZ2h0czogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4pID0+IHtcbiAgY29uc3QgbWF4QXR0ZW1wdHMgPSAzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEF0dGVtcHRzOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYXhpb3MucG9zdChcbiAgICAgICAgYGh0dHBzOi8vY2hhdC1pbnNpZ2h0cy5nZXRzdHJlYW0uaW8vaW5zaWdodHMvJHtpbnNpZ2h0VHlwZX1gLFxuICAgICAgICBpbnNpZ2h0cyxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgYXdhaXQgc2xlZXAoKGkgKyAxKSAqIDMwMDApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGJyZWFrO1xuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRXc0ZhdGFsSW5zaWdodChcbiAgY29ubmVjdGlvbjogU3RhYmxlV1NDb25uZWN0aW9uLFxuICBldmVudDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ldmVudCxcbiAgICAuLi5idWlsZFdzQmFzZUluc2lnaHQoY29ubmVjdGlvbiksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkV3NCYXNlSW5zaWdodChjb25uZWN0aW9uOiBTdGFibGVXU0Nvbm5lY3Rpb24pIHtcbiAgY29uc3QgeyBjbGllbnQgfSA9IGNvbm5lY3Rpb247XG4gIHJldHVybiB7XG4gICAgcmVhZHlfc3RhdGU6IGNvbm5lY3Rpb24ud3M/LnJlYWR5U3RhdGUsXG4gICAgdXJsOiBjb25uZWN0aW9uLl9idWlsZFVybCgpLFxuICAgIGFwaV9rZXk6IGNsaWVudC5rZXksXG4gICAgc3RhcnRfdHM6IGNsaWVudC5pbnNpZ2h0TWV0cmljcy5jb25uZWN0aW9uU3RhcnRUaW1lc3RhbXAsXG4gICAgZW5kX3RzOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICBhdXRoX3R5cGU6IGNsaWVudC5nZXRBdXRoVHlwZSgpLFxuICAgIHRva2VuOiBjbGllbnQudG9rZW5NYW5hZ2VyLnRva2VuLFxuICAgIHVzZXJfaWQ6IGNsaWVudC51c2VySUQsXG4gICAgdXNlcl9kZXRhaWxzOiBjbGllbnQuX3VzZXIsXG4gICAgLy8gZGV2aWNlOiBjbGllbnQub3B0aW9ucy5kZXZpY2UsXG4gICAgZGV2aWNlOiAnYnJvd3NlcicsXG4gICAgY2xpZW50X2lkOiBjb25uZWN0aW9uLmNvbm5lY3Rpb25JRCxcbiAgICB3c19kZXRhaWxzOiBjb25uZWN0aW9uLndzLFxuICAgIHdzX2NvbnNlY3V0aXZlX2ZhaWx1cmVzOiBjbGllbnQuaW5zaWdodE1ldHJpY3Mud3NDb25zZWN1dGl2ZUZhaWx1cmVzLFxuICAgIHdzX3RvdGFsX2ZhaWx1cmVzOiBjbGllbnQuaW5zaWdodE1ldHJpY3Mud3NUb3RhbEZhaWx1cmVzLFxuICAgIHJlcXVlc3RfaWQ6IGNvbm5lY3Rpb24ucmVxdWVzdElELFxuICAgIG9ubGluZTogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3I/Lm9uTGluZSA6IG51bGwsXG4gICAgdXNlcl9hZ2VudDogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3I/LnVzZXJBZ2VudCA6IG51bGwsXG4gICAgaW5zdGFuY2VfY2xpZW50X2lkOiBjbGllbnQuaW5zaWdodE1ldHJpY3MuaW5zdGFuY2VDbGllbnRJZCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkV3NTdWNjZXNzQWZ0ZXJGYWlsdXJlSW5zaWdodChcbiAgY29ubmVjdGlvbjogU3RhYmxlV1NDb25uZWN0aW9uLFxuKSB7XG4gIHJldHVybiBidWlsZFdzQmFzZUluc2lnaHQoY29ubmVjdGlvbik7XG59XG4iLCJpbXBvcnQgV2ViU29ja2V0IGZyb20gJ2lzb21vcnBoaWMtd3MnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xuaW1wb3J0IHtcbiAgYnVpbGRXc0ZhdGFsSW5zaWdodCxcbiAgYnVpbGRXc1N1Y2Nlc3NBZnRlckZhaWx1cmVJbnNpZ2h0LFxuICBwb3N0SW5zaWdodHMsXG59IGZyb20gJy4vaW5zaWdodHMnO1xuaW1wb3J0IHtcbiAgYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzLFxuICBjb252ZXJ0RXJyb3JUb0pzb24sXG4gIGlzUHJvbWlzZVBlbmRpbmcsXG4gIEtub3duQ29kZXMsXG4gIHJhbmRvbUlkLFxuICByZW1vdmVDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnMsXG4gIHJldHJ5SW50ZXJ2YWwsXG4gIHNsZWVwLFxufSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB0eXBlIHtcbiAgQ29ubmVjdEFQSVJlc3BvbnNlLFxuICBMb2dMZXZlbCxcbiAgU3RyZWFtVmlkZW9FdmVudCxcbiAgVVIsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBDb25uZWN0ZWRFdmVudCwgV1NBdXRoTWVzc2FnZSB9IGZyb20gJy4uLy4uL2dlbi9jb29yZGluYXRvcic7XG5cbi8vIFR5cGUgZ3VhcmRzIHRvIGNoZWNrIFdlYlNvY2tldCBlcnJvciB0eXBlXG5jb25zdCBpc0Nsb3NlRXZlbnQgPSAoXG4gIHJlczogV2ViU29ja2V0LkNsb3NlRXZlbnQgfCBXZWJTb2NrZXQuRGF0YSB8IFdlYlNvY2tldC5FcnJvckV2ZW50LFxuKTogcmVzIGlzIFdlYlNvY2tldC5DbG9zZUV2ZW50ID0+XG4gIChyZXMgYXMgV2ViU29ja2V0LkNsb3NlRXZlbnQpLmNvZGUgIT09IHVuZGVmaW5lZDtcblxuY29uc3QgaXNFcnJvckV2ZW50ID0gKFxuICByZXM6IFdlYlNvY2tldC5DbG9zZUV2ZW50IHwgV2ViU29ja2V0LkRhdGEgfCBXZWJTb2NrZXQuRXJyb3JFdmVudCxcbik6IHJlcyBpcyBXZWJTb2NrZXQuRXJyb3JFdmVudCA9PlxuICAocmVzIGFzIFdlYlNvY2tldC5FcnJvckV2ZW50KS5lcnJvciAhPT0gdW5kZWZpbmVkO1xuXG4vKipcbiAqIFN0YWJsZVdTQ29ubmVjdGlvbiAtIEEgV1MgY29ubmVjdGlvbiB0aGF0IHJlY29ubmVjdHMgdXBvbiBmYWlsdXJlLlxuICogLSB0aGUgYnJvd3NlciB3aWxsIHNvbWV0aW1lcyByZXBvcnQgdGhhdCB5b3UncmUgb25saW5lIG9yIG9mZmxpbmVcbiAqIC0gdGhlIFdTIGNvbm5lY3Rpb24gY2FuIGJyZWFrIGFuZCBmYWlsICh0aGVyZSBpcyBhIDMwcyBoZWFsdGggY2hlY2spXG4gKiAtIHNvbWV0aW1lcyB5b3VyIFdTIGNvbm5lY3Rpb24gd2lsbCBzZWVtIHRvIHdvcmsgd2hpbGUgdGhlIHVzZXIgaXMgaW4gZmFjdCBvZmZsaW5lXG4gKiAtIHRvIHNwZWVkIHVwIG9ubGluZS9vZmZsaW5lIGRldGVjdGlvbiB5b3UgY2FuIHVzZSB0aGUgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnKTtcbiAqXG4gKiBUaGVyZSBhcmUgNCB3YXlzIGluIHdoaWNoIGEgY29ubmVjdGlvbiBjYW4gYmVjb21lIHVuaGVhbHRoeTpcbiAqIC0gd2Vic29ja2V0Lm9uZXJyb3IgaXMgY2FsbGVkXG4gKiAtIHdlYnNvY2tldC5vbmNsb3NlIGlzIGNhbGxlZFxuICogLSB0aGUgaGVhbHRoIGNoZWNrIGZhaWxzIGFuZCBubyBldmVudCBpcyByZWNlaXZlZCBmb3IgfjQwIHNlY29uZHNcbiAqIC0gdGhlIGJyb3dzZXIgaW5kaWNhdGVzIHRoZSBjb25uZWN0aW9uIGlzIG5vdyBvZmZsaW5lXG4gKlxuICogVGhlcmUgYXJlIDIgYXNzdW1wdGlvbnMgd2UgbWFrZSBhYm91dCB0aGUgc2VydmVyOlxuICogLSBzdGF0ZSBjYW4gYmUgcmVjb3ZlcmVkIGJ5IHF1ZXJ5aW5nIHRoZSBjaGFubmVsIGFnYWluXG4gKiAtIGlmIHRoZSBzZXJ2ZXJzIGZhaWxzIHRvIHB1Ymxpc2ggYSBtZXNzYWdlIHRvIHRoZSBjbGllbnQsIHRoZSBXUyBjb25uZWN0aW9uIGlzIGRlc3Ryb3llZFxuICovXG5leHBvcnQgY2xhc3MgU3RhYmxlV1NDb25uZWN0aW9uIHtcbiAgLy8gbG9jYWwgdmFyc1xuICBjb25uZWN0aW9uSUQ/OiBzdHJpbmc7XG4gIGNvbm5lY3Rpb25PcGVuPzogQ29ubmVjdEFQSVJlc3BvbnNlO1xuICBhdXRoZW50aWNhdGlvblNlbnQ6IGJvb2xlYW47XG4gIGNvbnNlY3V0aXZlRmFpbHVyZXM6IG51bWJlcjtcbiAgcGluZ0ludGVydmFsOiBudW1iZXI7XG4gIGhlYWx0aENoZWNrVGltZW91dFJlZj86IE5vZGVKUy5UaW1lb3V0O1xuICBpc0Nvbm5lY3Rpbmc6IGJvb2xlYW47XG4gIGlzRGlzY29ubmVjdGVkOiBib29sZWFuO1xuICBpc0hlYWx0aHk6IGJvb2xlYW47XG4gIGlzUmVzb2x2ZWQ/OiBib29sZWFuO1xuICBsYXN0RXZlbnQ6IERhdGUgfCBudWxsO1xuICBjb25uZWN0aW9uQ2hlY2tUaW1lb3V0OiBudW1iZXI7XG4gIGNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWY/OiBOb2RlSlMuVGltZW91dDtcbiAgcmVqZWN0UHJvbWlzZT86IChcbiAgICByZWFzb24/OiBFcnJvciAmIHtcbiAgICAgIGNvZGU/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgICBpc1dTRmFpbHVyZT86IGJvb2xlYW47XG4gICAgICBTdGF0dXNDb2RlPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgIH0sXG4gICkgPT4gdm9pZDtcbiAgcmVxdWVzdElEOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHJlc29sdmVQcm9taXNlPzogKHZhbHVlOiBDb25uZWN0ZWRFdmVudCkgPT4gdm9pZDtcbiAgdG90YWxGYWlsdXJlczogbnVtYmVyO1xuICB3cz86IFdlYlNvY2tldDtcbiAgd3NJRDogbnVtYmVyO1xuXG4gIGNsaWVudDogU3RyZWFtQ2xpZW50O1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogU3RyZWFtQ2xpZW50KSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgLyoqIGNvbnNlY3V0aXZlIGZhaWx1cmVzIGluZmx1ZW5jZSB0aGUgZHVyYXRpb24gb2YgdGhlIHRpbWVvdXQgKi9cbiAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgPSAwO1xuICAgIC8qKiBrZWVwIHRyYWNrIG9mIHRoZSB0b3RhbCBudW1iZXIgb2YgZmFpbHVyZXMgKi9cbiAgICB0aGlzLnRvdGFsRmFpbHVyZXMgPSAwO1xuICAgIC8qKiBXZSBvbmx5IG1ha2UgMSBhdHRlbXB0IHRvIHJlY29ubmVjdCBhdCB0aGUgc2FtZSB0aW1lLi4gKi9cbiAgICB0aGlzLmlzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgIC8qKiBUcnVlIGFmdGVyIHRoZSBhdXRoIHBheWxvYWQgaXMgc2VudCB0byB0aGUgc2VydmVyICovXG4gICAgdGhpcy5hdXRoZW50aWNhdGlvblNlbnQgPSBmYWxzZTtcbiAgICAvKiogVG8gYXZvaWQgcmVjb25uZWN0IGlmIGNsaWVudCBpcyBkaXNjb25uZWN0ZWQgKi9cbiAgICB0aGlzLmlzRGlzY29ubmVjdGVkID0gZmFsc2U7XG4gICAgLyoqIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIGNvbm5lY3Rpb24gcHJvbWlzZSBpcyByZXNvbHZlZCAqL1xuICAgIHRoaXMuaXNSZXNvbHZlZCA9IGZhbHNlO1xuICAgIC8qKiBCb29sZWFuIHRoYXQgaW5kaWNhdGVzIGlmIHdlIGhhdmUgYSB3b3JraW5nIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciAqL1xuICAgIHRoaXMuaXNIZWFsdGh5ID0gZmFsc2U7XG4gICAgLyoqIEluY3JlbWVudGVkIHdoZW4gYSBuZXcgV1MgY29ubmVjdGlvbiBpcyBtYWRlICovXG4gICAgdGhpcy53c0lEID0gMTtcbiAgICAvKiogU3RvcmUgdGhlIGxhc3QgZXZlbnQgdGltZSBmb3IgaGVhbHRoIGNoZWNrcyAqL1xuICAgIHRoaXMubGFzdEV2ZW50ID0gbnVsbDtcbiAgICAvKiogU2VuZCBhIGhlYWx0aCBjaGVjayBtZXNzYWdlIGV2ZXJ5IDI1IHNlY29uZHMgKi9cbiAgICB0aGlzLnBpbmdJbnRlcnZhbCA9IDI1ICogMTAwMDtcbiAgICB0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXQgPSB0aGlzLnBpbmdJbnRlcnZhbCArIDEwICogMTAwMDtcblxuICAgIGFkZENvbm5lY3Rpb25FdmVudExpc3RlbmVycyh0aGlzLm9ubGluZVN0YXR1c0NoYW5nZWQpO1xuICB9XG5cbiAgX2xvZyA9IChtc2c6IHN0cmluZywgZXh0cmE6IFVSID0ge30sIGxldmVsOiBMb2dMZXZlbCA9ICdpbmZvJykgPT4ge1xuICAgIHRoaXMuY2xpZW50LmxvZ2dlcihsZXZlbCwgJ2Nvbm5lY3Rpb246JyArIG1zZywge1xuICAgICAgLi4uZXh0cmEsXG4gICAgfSk7XG4gIH07XG5cbiAgc2V0Q2xpZW50ID0gKGNsaWVudDogU3RyZWFtQ2xpZW50KSA9PiB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIGNvbm5lY3QgLSBDb25uZWN0IHRvIHRoZSBXUyBVUkxcbiAgICogdGhlIGRlZmF1bHQgMTVzIHRpbWVvdXQgYWxsb3dzIGJldHdlZW4gMn4zIHRyaWVzXG4gICAqIEByZXR1cm4ge0Nvbm5lY3RBUElSZXNwb25zZTxDb25uZWN0ZWRFdmVudD59IFByb21pc2UgdGhhdCBjb21wbGV0ZXMgb25jZSB0aGUgZmlyc3QgaGVhbHRoIGNoZWNrIG1lc3NhZ2UgaXMgcmVjZWl2ZWRcbiAgICovXG4gIGFzeW5jIGNvbm5lY3QodGltZW91dCA9IDE1MDAwKSB7XG4gICAgaWYgKHRoaXMuaXNDb25uZWN0aW5nKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgYFlvdSd2ZSBjYWxsZWQgY29ubmVjdCB0d2ljZSwgY2FuIG9ubHkgYXR0ZW1wdCAxIGNvbm5lY3Rpb24gYXQgdGhlIHRpbWVgLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzRGlzY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaGVhbHRoQ2hlY2sgPSBhd2FpdCB0aGlzLl9jb25uZWN0KCk7XG4gICAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgPSAwO1xuXG4gICAgICB0aGlzLl9sb2coXG4gICAgICAgIGBjb25uZWN0KCkgLSBFc3RhYmxpc2hlZCB3cyBjb25uZWN0aW9uIHdpdGggaGVhbHRoY2hlY2s6ICR7aGVhbHRoQ2hlY2t9YCxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaXNIZWFsdGh5ID0gZmFsc2U7XG4gICAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgKz0gMTtcblxuICAgICAgaWYgKFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGVycm9yLmNvZGUgPT09IEtub3duQ29kZXMuVE9LRU5fRVhQSVJFRCAmJlxuICAgICAgICAhdGhpcy5jbGllbnQudG9rZW5NYW5hZ2VyLmlzU3RhdGljKClcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9sb2coXG4gICAgICAgICAgJ2Nvbm5lY3QoKSAtIFdTIGZhaWx1cmUgZHVlIHRvIGV4cGlyZWQgdG9rZW4sIHNvIGdvaW5nIHRvIHRyeSB0byByZWxvYWQgdG9rZW4gYW5kIHJlY29ubmVjdCcsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdCh7IHJlZnJlc2hUb2tlbjogdHJ1ZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKCFlcnJvci5pc1dTRmFpbHVyZSkge1xuICAgICAgICAgIC8vIEFQSSByZWplY3RlZCB0aGUgY29ubmVjdGlvbiBhbmQgd2Ugc2hvdWxkIG5vdCByZXRyeVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIFN0YXR1c0NvZGU6IGVycm9yLlN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBpc1dTRmFpbHVyZTogZXJyb3IuaXNXU0ZhaWx1cmUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRGb3JIZWFsdGh5KHRpbWVvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIF93YWl0Rm9ySGVhbHRoeSBwb2xscyB0aGUgcHJvbWlzZSBjb25uZWN0aW9uIHRvIHNlZSBpZiBpdHMgcmVzb2x2ZWQgdW50aWwgaXQgdGltZXMgb3V0XG4gICAqIHRoZSBkZWZhdWx0IDE1cyB0aW1lb3V0IGFsbG93cyBiZXR3ZWVuIDJ+MyB0cmllc1xuICAgKiBAcGFyYW0gdGltZW91dCBkdXJhdGlvbihtcylcbiAgICovXG4gIGFzeW5jIF93YWl0Rm9ySGVhbHRoeSh0aW1lb3V0ID0gMTUwMDApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGludGVydmFsID0gNTA7IC8vIG1zXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRpbWVvdXQ7IGkgKz0gaW50ZXJ2YWwpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29ubmVjdGlvbk9wZW47XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgaWYgKGkgPT09IHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgICAgICAgICBTdGF0dXNDb2RlOiBlcnJvci5TdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIGlzV1NGYWlsdXJlOiBlcnJvci5pc1dTRmFpbHVyZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNsZWVwKGludGVydmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pKCksXG4gICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzbGVlcCh0aW1lb3V0KTtcbiAgICAgICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGNvZGU6ICcnLFxuICAgICAgICAgICAgU3RhdHVzQ29kZTogJycsXG4gICAgICAgICAgICBtZXNzYWdlOiAnaW5pdGlhbCBXUyBjb25uZWN0aW9uIGNvdWxkIG5vdCBiZSBlc3RhYmxpc2hlZCcsXG4gICAgICAgICAgICBpc1dTRmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICAgIH0pKCksXG4gICAgXSk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGRzIGFuZCByZXR1cm5zIHRoZSB1cmwgZm9yIHdlYnNvY2tldC5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMgdXJsIHN0cmluZ1xuICAgKi9cbiAgX2J1aWxkVXJsID0gKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAvLyBjb25zdCBxcyA9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNsaWVudC5fYnVpbGRXU1BheWxvYWQodGhpcy5yZXF1ZXN0SUQpKTtcbiAgICAvLyBwYXJhbXMuc2V0KCdqc29uJywgcXMpO1xuICAgIHBhcmFtcy5zZXQoJ2FwaV9rZXknLCB0aGlzLmNsaWVudC5rZXkpO1xuICAgIHBhcmFtcy5zZXQoJ3N0cmVhbS1hdXRoLXR5cGUnLCB0aGlzLmNsaWVudC5nZXRBdXRoVHlwZSgpKTtcbiAgICBwYXJhbXMuc2V0KCdYLVN0cmVhbS1DbGllbnQnLCB0aGlzLmNsaWVudC5nZXRVc2VyQWdlbnQoKSk7XG4gICAgLy8gcGFyYW1zLmFwcGVuZCgnYXV0aG9yaXphdGlvbicsIHRoaXMuY2xpZW50Ll9nZXRUb2tlbigpISk7XG5cbiAgICByZXR1cm4gYCR7dGhpcy5jbGllbnQud3NCYXNlVVJMfS9jb25uZWN0PyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgfTtcblxuICAvKipcbiAgICogZGlzY29ubmVjdCAtIERpc2Nvbm5lY3QgdGhlIGNvbm5lY3Rpb24gYW5kIGRvZXNuJ3QgcmVjb3Zlci4uLlxuICAgKlxuICAgKi9cbiAgZGlzY29ubmVjdCh0aW1lb3V0PzogbnVtYmVyKSB7XG4gICAgdGhpcy5fbG9nKFxuICAgICAgYGRpc2Nvbm5lY3QoKSAtIENsb3NpbmcgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGZvciB3c0lEICR7dGhpcy53c0lEfWAsXG4gICAgKTtcblxuICAgIHRoaXMud3NJRCArPSAxO1xuICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5pc0Rpc2Nvbm5lY3RlZCA9IHRydWU7XG5cbiAgICAvLyBzdGFydCBieSByZW1vdmluZyBhbGwgdGhlIGxpc3RlbmVyc1xuICAgIGlmICh0aGlzLmhlYWx0aENoZWNrVGltZW91dFJlZikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmhlYWx0aENoZWNrVGltZW91dFJlZik7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0UmVmKTtcbiAgICB9XG5cbiAgICByZW1vdmVDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnModGhpcy5vbmxpbmVTdGF0dXNDaGFuZ2VkKTtcblxuICAgIHRoaXMuaXNIZWFsdGh5ID0gZmFsc2U7XG5cbiAgICAvLyByZW1vdmUgd3MgaGFuZGxlcnMuLi5cbiAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlbW92ZUFsbExpc3RlbmVycykge1xuICAgICAgdGhpcy53cy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBsZXQgaXNDbG9zZWRQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xuICAgIC8vIGFuZCBmaW5hbGx5IGNsb3NlLi4uXG4gICAgLy8gQXNzaWduaW5nIHRvIGxvY2FsIGhlcmUgYmVjYXVzZSB3ZSB3aWxsIHJlbW92ZSBpdCBmcm9tIHRoaXMgYmVmb3JlIHRoZVxuICAgIC8vIHByb21pc2UgcmVzb2x2ZXMuXG4gICAgY29uc3QgeyB3cyB9ID0gdGhpcztcbiAgICBpZiAod3MgJiYgd3MuY2xvc2UgJiYgd3MucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTikge1xuICAgICAgaXNDbG9zZWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgY29uc3Qgb25jbG9zZSA9IChldmVudDogV2ViU29ja2V0LkNsb3NlRXZlbnQpID0+IHtcbiAgICAgICAgICB0aGlzLl9sb2coXG4gICAgICAgICAgICBgZGlzY29ubmVjdCgpIC0gcmVzb2x2aW5nIGlzQ2xvc2VkUHJvbWlzZSAke1xuICAgICAgICAgICAgICBldmVudCA/ICd3aXRoJyA6ICd3aXRob3V0J1xuICAgICAgICAgICAgfSBjbG9zZSBmcmFtZWAsXG4gICAgICAgICAgICB7IGV2ZW50IH0sXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgd3Mub25jbG9zZSA9IG9uY2xvc2U7XG4gICAgICAgIC8vIEluIGNhc2Ugd2UgZG9uJ3QgcmVjZWl2ZSBjbG9zZSBmcmFtZSB3ZWJzb2NrZXQgc2VydmVyIGluIHRpbWUsXG4gICAgICAgIC8vIGxldHMgbm90IHdhaXQgZm9yIG1vcmUgdGhhbiAxIHNlY29uZC5cbiAgICAgICAgc2V0VGltZW91dChvbmNsb3NlLCB0aW1lb3V0ICE9IG51bGwgPyB0aW1lb3V0IDogMTAwMCk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fbG9nKFxuICAgICAgICBgZGlzY29ubmVjdCgpIC0gTWFudWFsbHkgY2xvc2VkIGNvbm5lY3Rpb24gYnkgY2FsbGluZyBjbGllbnQuZGlzY29ubmVjdCgpYCxcbiAgICAgICk7XG5cbiAgICAgIHdzLmNsb3NlKFxuICAgICAgICBLbm93bkNvZGVzLldTX0NMT1NFRF9TVUNDRVNTLFxuICAgICAgICAnTWFudWFsbHkgY2xvc2VkIGNvbm5lY3Rpb24gYnkgY2FsbGluZyBjbGllbnQuZGlzY29ubmVjdCgpJyxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgYGRpc2Nvbm5lY3QoKSAtIHdzIGNvbm5lY3Rpb24gZG9lc24ndCBleGlzdCBvciBpdCBpcyBhbHJlYWR5IGNsb3NlZC5gLFxuICAgICAgKTtcbiAgICAgIGlzQ2xvc2VkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLndzO1xuXG4gICAgcmV0dXJuIGlzQ2xvc2VkUHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBfY29ubmVjdCAtIENvbm5lY3QgdG8gdGhlIFdTIGVuZHBvaW50XG4gICAqXG4gICAqIEByZXR1cm4ge0Nvbm5lY3RBUElSZXNwb25zZTxDb25uZWN0ZWRFdmVudD59IFByb21pc2UgdGhhdCBjb21wbGV0ZXMgb25jZSB0aGUgZmlyc3QgaGVhbHRoIGNoZWNrIG1lc3NhZ2UgaXMgcmVjZWl2ZWRcbiAgICovXG4gIGFzeW5jIF9jb25uZWN0KCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuaXNDb25uZWN0aW5nIHx8XG4gICAgICAodGhpcy5pc0Rpc2Nvbm5lY3RlZCAmJiB0aGlzLmNsaWVudC5vcHRpb25zLmVuYWJsZVdTRmFsbGJhY2spXG4gICAgKVxuICAgICAgcmV0dXJuOyAvLyBzaW1wbHkgaWdub3JlIF9jb25uZWN0IGlmIGl0J3MgY3VycmVudGx5IHRyeWluZyB0byBjb25uZWN0XG4gICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSB0cnVlO1xuICAgIHRoaXMucmVxdWVzdElEID0gcmFuZG9tSWQoKTtcbiAgICB0aGlzLmNsaWVudC5pbnNpZ2h0TWV0cmljcy5jb25uZWN0aW9uU3RhcnRUaW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBsZXQgaXNUb2tlblJlYWR5ID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2xvZyhgX2Nvbm5lY3QoKSAtIHdhaXRpbmcgZm9yIHRva2VuYCk7XG4gICAgICBhd2FpdCB0aGlzLmNsaWVudC50b2tlbk1hbmFnZXIudG9rZW5SZWFkeSgpO1xuICAgICAgaXNUb2tlblJlYWR5ID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyB0b2tlbiBwcm92aWRlciBoYXMgZmFpbGVkIGJlZm9yZSwgc28gdHJ5IGFnYWluXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmICghaXNUb2tlblJlYWR5KSB7XG4gICAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgICBgX2Nvbm5lY3QoKSAtIHRva2VuUHJvdmlkZXIgZmFpbGVkIGJlZm9yZSwgc28gZ29pbmcgdG8gcmV0cnlgLFxuICAgICAgICApO1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC50b2tlbk1hbmFnZXIubG9hZFRva2VuKCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBtdXN0U2V0dXBDb25uZWN0aW9uSWRQcm9taXNlID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmNsaWVudC5jb25uZWN0aW9uSWRQcm9taXNlKSB7XG4gICAgICAgIGlmIChhd2FpdCBpc1Byb21pc2VQZW5kaW5nKHRoaXMuY2xpZW50LmNvbm5lY3Rpb25JZFByb21pc2UpKSB7XG4gICAgICAgICAgbXVzdFNldHVwQ29ubmVjdGlvbklkUHJvbWlzZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobXVzdFNldHVwQ29ubmVjdGlvbklkUHJvbWlzZSkge1xuICAgICAgICB0aGlzLmNsaWVudC5fc2V0dXBDb25uZWN0aW9uSWRQcm9taXNlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zZXR1cENvbm5lY3Rpb25Qcm9taXNlKCk7XG4gICAgICBjb25zdCB3c1VSTCA9IHRoaXMuX2J1aWxkVXJsKCk7XG4gICAgICB0aGlzLl9sb2coYF9jb25uZWN0KCkgLSBDb25uZWN0aW5nIHRvICR7d3NVUkx9YCwge1xuICAgICAgICB3c1VSTCxcbiAgICAgICAgcmVxdWVzdElEOiB0aGlzLnJlcXVlc3RJRCxcbiAgICAgIH0pO1xuICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQod3NVUkwpO1xuICAgICAgdGhpcy53cy5vbm9wZW4gPSB0aGlzLm9ub3Blbi5iaW5kKHRoaXMsIHRoaXMud3NJRCk7XG4gICAgICB0aGlzLndzLm9uY2xvc2UgPSB0aGlzLm9uY2xvc2UuYmluZCh0aGlzLCB0aGlzLndzSUQpO1xuICAgICAgdGhpcy53cy5vbmVycm9yID0gdGhpcy5vbmVycm9yLmJpbmQodGhpcywgdGhpcy53c0lEKTtcbiAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gdGhpcy5vbm1lc3NhZ2UuYmluZCh0aGlzLCB0aGlzLndzSUQpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb25PcGVuO1xuICAgICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSBmYWxzZTtcblxuICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklEID0gcmVzcG9uc2UuY29ubmVjdGlvbl9pZDtcbiAgICAgICAgdGhpcy5jbGllbnQucmVzb2x2ZUNvbm5lY3Rpb25JZD8uKHRoaXMuY29ubmVjdGlvbklEKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuY2xpZW50Lmluc2lnaHRNZXRyaWNzLndzQ29uc2VjdXRpdmVGYWlsdXJlcyA+IDAgJiZcbiAgICAgICAgICB0aGlzLmNsaWVudC5vcHRpb25zLmVuYWJsZUluc2lnaHRzXG4gICAgICAgICkge1xuICAgICAgICAgIHBvc3RJbnNpZ2h0cyhcbiAgICAgICAgICAgICd3c19zdWNjZXNzX2FmdGVyX2ZhaWx1cmUnLFxuICAgICAgICAgICAgYnVpbGRXc1N1Y2Nlc3NBZnRlckZhaWx1cmVJbnNpZ2h0KFxuICAgICAgICAgICAgICB0aGlzIGFzIHVua25vd24gYXMgU3RhYmxlV1NDb25uZWN0aW9uLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuY2xpZW50Lmluc2lnaHRNZXRyaWNzLndzQ29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgYXdhaXQgdGhpcy5jbGllbnQuX3NldHVwQ29ubmVjdGlvbklkUHJvbWlzZSgpO1xuICAgICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHRoaXMuX2xvZyhgX2Nvbm5lY3QoKSAtIEVycm9yIC0gYCwgZXJyKTtcbiAgICAgIGlmICh0aGlzLmNsaWVudC5vcHRpb25zLmVuYWJsZUluc2lnaHRzKSB7XG4gICAgICAgIHRoaXMuY2xpZW50Lmluc2lnaHRNZXRyaWNzLndzQ29uc2VjdXRpdmVGYWlsdXJlcysrO1xuICAgICAgICB0aGlzLmNsaWVudC5pbnNpZ2h0TWV0cmljcy53c1RvdGFsRmFpbHVyZXMrKztcblxuICAgICAgICBjb25zdCBpbnNpZ2h0cyA9IGJ1aWxkV3NGYXRhbEluc2lnaHQoXG4gICAgICAgICAgdGhpcyBhcyB1bmtub3duIGFzIFN0YWJsZVdTQ29ubmVjdGlvbixcbiAgICAgICAgICBjb252ZXJ0RXJyb3JUb0pzb24oZXJyIGFzIEVycm9yKSxcbiAgICAgICAgKTtcbiAgICAgICAgcG9zdEluc2lnaHRzPy4oJ3dzX2ZhdGFsJywgaW5zaWdodHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5jbGllbnQucmVqZWN0Q29ubmVjdGlvbklkPy4oZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogX3JlY29ubmVjdCAtIFJldHJ5IHRoZSBjb25uZWN0aW9uIHRvIFdTIGVuZHBvaW50XG4gICAqXG4gICAqIEBwYXJhbSB7eyBpbnRlcnZhbD86IG51bWJlcjsgcmVmcmVzaFRva2VuPzogYm9vbGVhbiB9fSBvcHRpb25zIEZvbGxvd2luZyBvcHRpb25zIGFyZSBhdmFpbGFibGVcbiAgICpcbiAgICogLSBgaW50ZXJ2YWxgXHR7aW50fVx0XHRcdG51bWJlciBvZiBtcyB0aGF0IGZ1bmN0aW9uIHNob3VsZCB3YWl0IGJlZm9yZSByZWNvbm5lY3RpbmdcbiAgICogLSBgcmVmcmVzaFRva2VuYCB7Ym9vbGVhbn1cdHJlbG9hZC9yZWZyZXNoIHVzZXIgdG9rZW4gYmUgcmVmcmVzaGVkIGJlZm9yZSBhdHRlbXB0aW5nIHJlY29ubmVjdGlvbi5cbiAgICovXG4gIGFzeW5jIF9yZWNvbm5lY3QoXG4gICAgb3B0aW9uczogeyBpbnRlcnZhbD86IG51bWJlcjsgcmVmcmVzaFRva2VuPzogYm9vbGVhbiB9ID0ge30sXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gSW5pdGlhdGluZyB0aGUgcmVjb25uZWN0Jyk7XG5cbiAgICAvLyBvbmx5IGFsbG93IDEgY29ubmVjdGlvbiBhdCB0aGUgdGltZVxuICAgIGlmICh0aGlzLmlzQ29ubmVjdGluZyB8fCB0aGlzLmlzSGVhbHRoeSkge1xuICAgICAgdGhpcy5fbG9nKCdfcmVjb25uZWN0KCkgLSBBYm9ydCAoMSkgc2luY2UgYWxyZWFkeSBjb25uZWN0aW5nIG9yIGhlYWx0aHknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByZWNvbm5lY3QgaW4gY2FzZSBvZiBvbiBlcnJvciBvciBvbiBjbG9zZVxuICAgIC8vIGFsc28gcmVjb25uZWN0IGlmIHRoZSBoZWFsdGggY2hlY2sgY3ljbGUgZmFpbHNcbiAgICBsZXQgaW50ZXJ2YWwgPSBvcHRpb25zLmludGVydmFsO1xuICAgIGlmICghaW50ZXJ2YWwpIHtcbiAgICAgIGludGVydmFsID0gcmV0cnlJbnRlcnZhbCh0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMpO1xuICAgIH1cbiAgICAvLyByZWNvbm5lY3QsIG9yIHRyeSBhZ2FpbiBhZnRlciBhIGxpdHRsZSB3aGlsZS4uLlxuICAgIGF3YWl0IHNsZWVwKGludGVydmFsKTtcblxuICAgIC8vIENoZWNrIG9uY2UgYWdhaW4gaWYgYnkgc29tZSBvdGhlciBjYWxsIHRvIF9yZWNvbm5lY3QgaXMgYWN0aXZlIG9yIGNvbm5lY3Rpb24gaXNcbiAgICAvLyBhbHJlYWR5IHJlc3RvcmVkLCB0aGVuIG5vIG5lZWQgdG8gcHJvY2VlZC5cbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RpbmcgfHwgdGhpcy5pc0hlYWx0aHkpIHtcbiAgICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gQWJvcnQgKDIpIHNpbmNlIGFscmVhZHkgY29ubmVjdGluZyBvciBoZWFsdGh5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNEaXNjb25uZWN0ZWQgJiYgdGhpcy5jbGllbnQub3B0aW9ucy5lbmFibGVXU0ZhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9sb2coJ19yZWNvbm5lY3QoKSAtIEFib3J0ICgzKSBzaW5jZSBkaXNjb25uZWN0KCkgaXMgY2FsbGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fbG9nKCdfcmVjb25uZWN0KCkgLSBEZXN0cm95aW5nIGN1cnJlbnQgV1MgY29ubmVjdGlvbicpO1xuXG4gICAgLy8gY2xlYW51cCB0aGUgb2xkIGNvbm5lY3Rpb25cbiAgICB0aGlzLl9kZXN0cm95Q3VycmVudFdTQ29ubmVjdGlvbigpO1xuXG4gICAgaWYgKG9wdGlvbnMucmVmcmVzaFRva2VuKSB7XG4gICAgICBhd2FpdCB0aGlzLmNsaWVudC50b2tlbk1hbmFnZXIubG9hZFRva2VuKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuX2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gV2FpdGluZyBmb3IgcmVjb3ZlckNhbGxCYWNrJyk7XG4gICAgICAvLyBhd2FpdCB0aGlzLmNsaWVudC5yZWNvdmVyU3RhdGUoKTtcbiAgICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gRmluaXNoZWQgcmVjb3ZlckNhbGxCYWNrJyk7XG5cbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgdGhpcy5pc0hlYWx0aHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyArPSAxO1xuICAgICAgaWYgKFxuICAgICAgICBlcnJvci5jb2RlID09PSBLbm93bkNvZGVzLlRPS0VOX0VYUElSRUQgJiZcbiAgICAgICAgIXRoaXMuY2xpZW50LnRva2VuTWFuYWdlci5pc1N0YXRpYygpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5fbG9nKFxuICAgICAgICAgICdfcmVjb25uZWN0KCkgLSBXUyBmYWlsdXJlIGR1ZSB0byBleHBpcmVkIHRva2VuLCBzbyBnb2luZyB0byB0cnkgdG8gcmVsb2FkIHRva2VuIGFuZCByZWNvbm5lY3QnLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWNvbm5lY3QoeyByZWZyZXNoVG9rZW46IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlY29ubmVjdCBvbiBXUyBmYWlsdXJlcywgZG9uJ3QgcmVjb25uZWN0IGlmIHRoZXJlIGlzIGEgY29kZSBidWdcbiAgICAgIGlmIChlcnJvci5pc1dTRmFpbHVyZSkge1xuICAgICAgICB0aGlzLl9sb2coJ19yZWNvbm5lY3QoKSAtIFdTIGZhaWx1cmUsIHNvIGdvaW5nIHRvIHRyeSB0byByZWNvbm5lY3QnKTtcblxuICAgICAgICB0aGlzLl9yZWNvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbG9nKCdfcmVjb25uZWN0KCkgLSA9PSBFTkQgPT0nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBvbmxpbmVTdGF0dXNDaGFuZ2VkIC0gdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgYnJvd3NlciBjb25uZWN0cyBvciBkaXNjb25uZWN0cyBmcm9tIHRoZSBpbnRlcm5ldC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgRXZlbnQgd2l0aCB0eXBlIG9ubGluZSBvciBvZmZsaW5lXG4gICAqXG4gICAqL1xuICBvbmxpbmVTdGF0dXNDaGFuZ2VkID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGlmIChldmVudC50eXBlID09PSAnb2ZmbGluZScpIHtcbiAgICAgIC8vIG1hcmsgdGhlIGNvbm5lY3Rpb24gYXMgZG93blxuICAgICAgdGhpcy5fbG9nKCdvbmxpbmVTdGF0dXNDaGFuZ2VkKCkgLSBTdGF0dXMgY2hhbmdpbmcgdG8gb2ZmbGluZScpO1xuICAgICAgLy8gd2Uga25vdyB0aGF0IHRoZSBhcHAgaXMgb2ZmbGluZSBzbyBkaXNwYXRjaCB0aGUgdW5oZWFsdGh5IGNvbm5lY3Rpb24gZXZlbnQgaW1tZWRpYXRlbHlcbiAgICAgIHRoaXMuX3NldEhlYWx0aChmYWxzZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChldmVudC50eXBlID09PSAnb25saW5lJykge1xuICAgICAgLy8gcmV0cnkgcmlnaHQgbm93Li4uXG4gICAgICAvLyBXZSBjaGVjayB0aGlzLmlzSGVhbHRoeSwgbm90IHN1cmUgaWYgaXQncyBhbHdheXNcbiAgICAgIC8vIHNtYXJ0IHRvIGNyZWF0ZSBhIG5ldyBXUyBjb25uZWN0aW9uIGlmIHRoZSBvbGQgb25lIGlzIHN0aWxsIHVwIGFuZCBydW5uaW5nLlxuICAgICAgLy8gaXQncyBwb3NzaWJsZSB3ZSBkaWRuJ3QgbWlzcyBhbnkgbWVzc2FnZXMsIHNvIHRoaXMgcHJvY2VzcyBpcyBqdXN0IGV4cGVuc2l2ZSBhbmQgbm90IG5lZWRlZC5cbiAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgYG9ubGluZVN0YXR1c0NoYW5nZWQoKSAtIFN0YXR1cyBjaGFuZ2luZyB0byBvbmxpbmUuIGlzSGVhbHRoeTogJHt0aGlzLmlzSGVhbHRoeX1gLFxuICAgICAgKTtcbiAgICAgIGlmICghdGhpcy5pc0hlYWx0aHkpIHtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0KHsgaW50ZXJ2YWw6IDEwIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBvbm9wZW4gPSAod3NJRDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKHRoaXMud3NJRCAhPT0gd3NJRCkgcmV0dXJuO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuY2xpZW50LnVzZXI7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aGlzLmNsaWVudC5sb2dnZXIoJ2Vycm9yJywgYFVzZXIgbm90IHNldCwgY2FuJ3QgY29ubmVjdCB0byBXU2ApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gdGhpcy5jbGllbnQuX2dldFRva2VuKCk7XG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgdGhpcy5jbGllbnQubG9nZ2VyKCdlcnJvcicsIGBUb2tlbiBub3Qgc2V0LCBjYW4ndCBjb25uZWN0IGF1dGhlbnRpY2F0ZWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGF1dGhNZXNzYWdlOiBXU0F1dGhNZXNzYWdlID0ge1xuICAgICAgdG9rZW4sXG4gICAgICB1c2VyX2RldGFpbHM6IHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UsXG4gICAgICAgIGN1c3RvbTogdXNlci5jdXN0b20sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uU2VudCA9IHRydWU7XG4gICAgdGhpcy53cz8uc2VuZChKU09OLnN0cmluZ2lmeShhdXRoTWVzc2FnZSkpO1xuICAgIHRoaXMuX2xvZygnb25vcGVuKCkgLSBvbm9wZW4gY2FsbGJhY2snLCB7IHdzSUQgfSk7XG4gIH07XG5cbiAgb25tZXNzYWdlID0gKHdzSUQ6IG51bWJlciwgZXZlbnQ6IFdlYlNvY2tldC5NZXNzYWdlRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy53c0lEICE9PSB3c0lEKSByZXR1cm47XG5cbiAgICB0aGlzLl9sb2coJ29ubWVzc2FnZSgpIC0gb25tZXNzYWdlIGNhbGxiYWNrJywgeyBldmVudCwgd3NJRCB9KTtcbiAgICBjb25zdCBkYXRhID1cbiAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSAnc3RyaW5nJ1xuICAgICAgICA/IChKU09OLnBhcnNlKGV2ZW50LmRhdGEpIGFzIFN0cmVhbVZpZGVvRXZlbnQpXG4gICAgICAgIDogbnVsbDtcblxuICAgIC8vIHdlIHdhaXQgdGlsbCB0aGUgZmlyc3QgbWVzc2FnZSBiZWZvcmUgd2UgY29uc2lkZXIgdGhlIGNvbm5lY3Rpb24gb3Blbi5cbiAgICAvLyB0aGUgcmVhc29uIGZvciB0aGlzIGlzIHRoYXQgYXV0aCBlcnJvcnMgYW5kIHNpbWlsYXIgZXJyb3JzIHRyaWdnZXIgYSB3cy5vbm9wZW4gYW5kIGltbWVkaWF0ZWx5XG4gICAgLy8gYWZ0ZXIgdGhhdCBhIHdzLm9uY2xvc2UuXG4gICAgaWYgKCF0aGlzLmlzUmVzb2x2ZWQgJiYgZGF0YSAmJiBkYXRhLnR5cGUgPT09ICdjb25uZWN0aW9uLmVycm9yJykge1xuICAgICAgdGhpcy5pc1Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSB0aGUgdHlwZXMgb2YgX2Vycm9yRnJvbVdTRXZlbnQgYXJlIGluY29ycmVjdFxuICAgICAgICB0aGlzLnJlamVjdFByb21pc2U/Lih0aGlzLl9lcnJvckZyb21XU0V2ZW50KGRhdGEsIGZhbHNlKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0cmlnZ2VyIHRoZSBldmVudC4uXG4gICAgdGhpcy5sYXN0RXZlbnQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgaWYgKFxuICAgICAgZGF0YSAmJlxuICAgICAgKGRhdGEudHlwZSA9PT0gJ2hlYWx0aC5jaGVjaycgfHwgZGF0YS50eXBlID09PSAnY29ubmVjdGlvbi5vaycpXG4gICAgKSB7XG4gICAgICAvLyB0aGUgaW5pdGlhbCBoZWFsdGgtY2hlY2sgc2hvdWxkIGNvbWUgZnJvbSB0aGUgY2xpZW50XG4gICAgICB0aGlzLnNjaGVkdWxlTmV4dFBpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSAmJiBkYXRhLnR5cGUgPT09ICdjb25uZWN0aW9uLm9rJykge1xuICAgICAgdGhpcy5yZXNvbHZlUHJvbWlzZT8uKGRhdGEpO1xuICAgICAgdGhpcy5fc2V0SGVhbHRoKHRydWUpO1xuICAgIH1cblxuICAgIGlmIChkYXRhICYmIGRhdGEudHlwZSA9PT0gJ2Nvbm5lY3Rpb24uZXJyb3InICYmIGRhdGEuZXJyb3IpIHtcbiAgICAgIGNvbnN0IHsgY29kZSB9ID0gZGF0YS5lcnJvcjtcbiAgICAgIHRoaXMuaXNIZWFsdGh5ID0gZmFsc2U7XG4gICAgICB0aGlzLmlzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzICs9IDE7XG4gICAgICBpZiAoXG4gICAgICAgIGNvZGUgPT09IEtub3duQ29kZXMuVE9LRU5fRVhQSVJFRCAmJlxuICAgICAgICAhdGhpcy5jbGllbnQudG9rZW5NYW5hZ2VyLmlzU3RhdGljKClcbiAgICAgICkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0UmVmKTtcbiAgICAgICAgdGhpcy5fbG9nKFxuICAgICAgICAgICdjb25uZWN0KCkgLSBXUyBmYWlsdXJlIGR1ZSB0byBleHBpcmVkIHRva2VuLCBzbyBnb2luZyB0byB0cnkgdG8gcmVsb2FkIHRva2VuIGFuZCByZWNvbm5lY3QnLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9yZWNvbm5lY3QoeyByZWZyZXNoVG9rZW46IHRydWUgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGRhdGEucmVjZWl2ZWRfYXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcy5jbGllbnQuZGlzcGF0Y2hFdmVudChkYXRhKTtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZUNvbm5lY3Rpb25DaGVjaygpO1xuICB9O1xuXG4gIG9uY2xvc2UgPSAod3NJRDogbnVtYmVyLCBldmVudDogV2ViU29ja2V0LkNsb3NlRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy53c0lEICE9PSB3c0lEKSByZXR1cm47XG5cbiAgICB0aGlzLl9sb2coJ29uY2xvc2UoKSAtIG9uY2xvc2UgY2FsbGJhY2sgLSAnICsgZXZlbnQuY29kZSwgeyBldmVudCwgd3NJRCB9KTtcblxuICAgIGlmIChldmVudC5jb2RlID09PSBLbm93bkNvZGVzLldTX0NMT1NFRF9TVUNDRVNTKSB7XG4gICAgICAvLyB0aGlzIGlzIGEgcGVybWFuZW50IGVycm9yIHJhaXNlZCBieSBzdHJlYW0uLlxuICAgICAgLy8gdXN1YWxseSBjYXVzZWQgYnkgaW52YWxpZCBhdXRoIGRldGFpbHNcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBgV1MgY29ubmVjdGlvbiByZWplY3Qgd2l0aCBlcnJvciAke2V2ZW50LnJlYXNvbn1gLFxuICAgICAgKSBhcyBFcnJvciAmIFdlYlNvY2tldC5DbG9zZUV2ZW50O1xuXG4gICAgICBlcnJvci5yZWFzb24gPSBldmVudC5yZWFzb247XG4gICAgICBlcnJvci5jb2RlID0gZXZlbnQuY29kZTtcbiAgICAgIGVycm9yLndhc0NsZWFuID0gZXZlbnQud2FzQ2xlYW47XG4gICAgICBlcnJvci50YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgIHRoaXMucmVqZWN0UHJvbWlzZT8uKGVycm9yKTtcbiAgICAgIHRoaXMuX2xvZyhgb25jbG9zZSgpIC0gV1MgY29ubmVjdGlvbiByZWplY3Qgd2l0aCBlcnJvciAke2V2ZW50LnJlYXNvbn1gLCB7XG4gICAgICAgIGV2ZW50LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyArPSAxO1xuICAgICAgdGhpcy50b3RhbEZhaWx1cmVzICs9IDE7XG4gICAgICB0aGlzLl9zZXRIZWFsdGgoZmFsc2UpO1xuICAgICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSBmYWxzZTtcblxuICAgICAgdGhpcy5yZWplY3RQcm9taXNlPy4odGhpcy5fZXJyb3JGcm9tV1NFdmVudChldmVudCkpO1xuXG4gICAgICB0aGlzLl9sb2coYG9uY2xvc2UoKSAtIFdTIGNvbm5lY3Rpb24gY2xvc2VkLiBDYWxsaW5nIHJlY29ubmVjdCAuLi5gLCB7XG4gICAgICAgIGV2ZW50LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIHJlY29ubmVjdCBpZiBpdHMgYW4gYWJub3JtYWwgZmFpbHVyZVxuICAgICAgdGhpcy5fcmVjb25uZWN0KCk7XG4gICAgfVxuICB9O1xuXG4gIG9uZXJyb3IgPSAod3NJRDogbnVtYmVyLCBldmVudDogV2ViU29ja2V0LkVycm9yRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy53c0lEICE9PSB3c0lEKSByZXR1cm47XG5cbiAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgKz0gMTtcbiAgICB0aGlzLnRvdGFsRmFpbHVyZXMgKz0gMTtcbiAgICB0aGlzLl9zZXRIZWFsdGgoZmFsc2UpO1xuICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5yZWplY3RQcm9taXNlPy4odGhpcy5fZXJyb3JGcm9tV1NFdmVudChldmVudCkpO1xuICAgIHRoaXMuX2xvZyhgb25lcnJvcigpIC0gV1MgY29ubmVjdGlvbiByZXN1bHRlZCBpbnRvIGVycm9yYCwgeyBldmVudCB9KTtcblxuICAgIHRoaXMuX3JlY29ubmVjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBfc2V0SGVhbHRoIC0gU2V0cyB0aGUgY29ubmVjdGlvbiB0byBoZWFsdGh5IG9yIHVuaGVhbHRoeS5cbiAgICogQnJvYWRjYXN0cyBhbiBldmVudCBpbiBjYXNlIHRoZSBjb25uZWN0aW9uIHN0YXR1cyBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhlYWx0aHkgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBjb25uZWN0aW9uIGlzIGhlYWx0aHkgb3Igbm90XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcGF0Y2hJbW1lZGlhdGVseSBib29sZWFuIGluZGljYXRpbmcgdG8gZGlzcGF0Y2ggZXZlbnQgaW1tZWRpYXRlbHkgZXZlbiBpZiB0aGUgY29ubmVjdGlvbiBpcyB1bmhlYWx0aHlcbiAgICpcbiAgICovXG4gIF9zZXRIZWFsdGggPSAoaGVhbHRoeTogYm9vbGVhbiwgZGlzcGF0Y2hJbW1lZGlhdGVseSA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGhlYWx0aHkgPT09IHRoaXMuaXNIZWFsdGh5KSByZXR1cm47XG5cbiAgICB0aGlzLmlzSGVhbHRoeSA9IGhlYWx0aHk7XG5cbiAgICBpZiAodGhpcy5pc0hlYWx0aHkgfHwgZGlzcGF0Y2hJbW1lZGlhdGVseSkge1xuICAgICAgdGhpcy5jbGllbnQuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgIHR5cGU6ICdjb25uZWN0aW9uLmNoYW5nZWQnLFxuICAgICAgICBvbmxpbmU6IHRoaXMuaXNIZWFsdGh5LFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gd2UncmUgb2ZmbGluZSwgd2FpdCBmZXcgc2Vjb25kcyBhbmQgZmlyZSBhbmQgZXZlbnQgaWYgc3RpbGwgb2ZmbGluZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNIZWFsdGh5KSByZXR1cm47XG4gICAgICB0aGlzLmNsaWVudC5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgdHlwZTogJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsXG4gICAgICAgIG9ubGluZTogdGhpcy5pc0hlYWx0aHksXG4gICAgICB9KTtcbiAgICB9LCA1MDAwKTtcbiAgfTtcblxuICAvKipcbiAgICogX2Vycm9yRnJvbVdTRXZlbnQgLSBDcmVhdGVzIGFuIGVycm9yIG9iamVjdCBmb3IgdGhlIFdTIGV2ZW50XG4gICAqXG4gICAqL1xuICBfZXJyb3JGcm9tV1NFdmVudCA9IChcbiAgICBldmVudDogV2ViU29ja2V0LkNsb3NlRXZlbnQgfCBXZWJTb2NrZXQuRGF0YSB8IFdlYlNvY2tldC5FcnJvckV2ZW50LFxuICAgIGlzV1NGYWlsdXJlID0gdHJ1ZSxcbiAgKSA9PiB7XG4gICAgbGV0IGNvZGU7XG4gICAgbGV0IHN0YXR1c0NvZGU7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgaWYgKGlzQ2xvc2VFdmVudChldmVudCkpIHtcbiAgICAgIGNvZGUgPSBldmVudC5jb2RlO1xuICAgICAgc3RhdHVzQ29kZSA9ICd1bmtub3duJztcbiAgICAgIG1lc3NhZ2UgPSBldmVudC5yZWFzb247XG4gICAgfVxuXG4gICAgaWYgKGlzRXJyb3JFdmVudChldmVudCkpIHtcbiAgICAgIGNvZGUgPSBldmVudC5lcnJvci5jb2RlO1xuICAgICAgc3RhdHVzQ29kZSA9IGV2ZW50LmVycm9yLlN0YXR1c0NvZGU7XG4gICAgICBtZXNzYWdlID0gZXZlbnQuZXJyb3IubWVzc2FnZTtcbiAgICB9XG5cbiAgICAvLyBLZWVwaW5nIHRoaXMgYHdhcm5gIGxldmVsIGxvZywgdG8gYXZvaWQgY2x1dHRlcmluZyBvZiBlcnJvciBsb2dzIGZyb20gd3MgZmFpbHVyZXMuXG4gICAgdGhpcy5fbG9nKFxuICAgICAgYF9lcnJvckZyb21XU0V2ZW50KCkgLSBXUyBmYWlsZWQgd2l0aCBjb2RlICR7Y29kZX1gLFxuICAgICAgeyBldmVudCB9LFxuICAgICAgJ3dhcm4nLFxuICAgICk7XG5cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgIGBXUyBmYWlsZWQgd2l0aCBjb2RlICR7Y29kZX0gYW5kIHJlYXNvbiAtICR7bWVzc2FnZX1gLFxuICAgICkgYXMgRXJyb3IgJiB7XG4gICAgICBjb2RlPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgaXNXU0ZhaWx1cmU/OiBib29sZWFuO1xuICAgICAgU3RhdHVzQ29kZT86IHN0cmluZyB8IG51bWJlcjtcbiAgICB9O1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICAgIC8qKlxuICAgICAqIFN0YXR1c0NvZGUgZG9lcyBub3QgZXhpc3Qgb24gYW55IGV2ZW50IHR5cGVzIGJ1dCBoYXMgYmVlbiBsZWZ0XG4gICAgICogYXMgaXMgdG8gcHJlc2VydmUgSlMgZnVuY3Rpb25hbGl0eSBkdXJpbmcgdGhlIFRTIGltcGxlbWVudGF0aW9uXG4gICAgICovXG4gICAgZXJyb3IuU3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgZXJyb3IuaXNXU0ZhaWx1cmUgPSBpc1dTRmFpbHVyZTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH07XG5cbiAgLyoqXG4gICAqIF9kZXN0cm95Q3VycmVudFdTQ29ubmVjdGlvbiAtIFJlbW92ZXMgdGhlIGN1cnJlbnQgV1MgY29ubmVjdGlvblxuICAgKlxuICAgKi9cbiAgX2Rlc3Ryb3lDdXJyZW50V1NDb25uZWN0aW9uKCkge1xuICAgIC8vIGluY3JlbWVudCB0aGUgSUQsIG1lYW5pbmcgd2Ugd2lsbCBpZ25vcmUgYWxsIG1lc3NhZ2VzIGZyb20gdGhlIG9sZFxuICAgIC8vIHdzIGNvbm5lY3Rpb24gZnJvbSBub3cgb24uXG4gICAgdGhpcy53c0lEICs9IDE7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcz8ud3M/LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgdGhpcz8ud3M/LmNsb3NlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gd2UgZG9uJ3QgY2FyZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBfc2V0dXBQcm9taXNlIC0gc2V0cyB1cCB0aGUgdGhpcy5jb25uZWN0T3BlbiBwcm9taXNlXG4gICAqL1xuICBfc2V0dXBDb25uZWN0aW9uUHJvbWlzZSA9ICgpID0+IHtcbiAgICB0aGlzLmlzUmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAvKiogYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB3cy5vcGVuIGlzIGNhbGxlZCAqL1xuICAgIHRoaXMuY29ubmVjdGlvbk9wZW4gPSBuZXcgUHJvbWlzZTxDb25uZWN0ZWRFdmVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLnJlamVjdFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyBhIG5leHQgaGVhbHRoIGNoZWNrIHBpbmcgZm9yIHdlYnNvY2tldC5cbiAgICovXG4gIHNjaGVkdWxlTmV4dFBpbmcgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuaGVhbHRoQ2hlY2tUaW1lb3V0UmVmKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFsdGhDaGVja1RpbWVvdXRSZWYpO1xuICAgIH1cblxuICAgIC8vIDMwIHNlY29uZHMgaXMgdGhlIHJlY29tbWVuZGVkIGludGVydmFsIChtZXNzZW5nZXIgdXNlcyB0aGlzKVxuICAgIHRoaXMuaGVhbHRoQ2hlY2tUaW1lb3V0UmVmID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBzZW5kIHRoZSBoZWFsdGhjaGVjay4uLiwgc2VydmVyIHJlcGxpZXMgd2l0aCBhIGhlYWx0aCBjaGVjayBldmVudFxuICAgICAgY29uc3QgZGF0YSA9IFt7IHR5cGU6ICdoZWFsdGguY2hlY2snLCBjbGllbnRfaWQ6IHRoaXMuY2xpZW50LmNsaWVudElEIH1dO1xuICAgICAgLy8gdHJ5IHRvIHNlbmQgb24gdGhlIGNvbm5lY3Rpb25cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMud3M/LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlcnJvciB3aWxsIGFscmVhZHkgYmUgZGV0ZWN0ZWQgZWxzZXdoZXJlXG4gICAgICB9XG4gICAgfSwgdGhpcy5waW5nSW50ZXJ2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBzY2hlZHVsZUNvbm5lY3Rpb25DaGVjayAtIHNjaGVkdWxlcyBhIGNoZWNrIGZvciB0aW1lIGRpZmZlcmVuY2UgYmV0d2VlbiBsYXN0IHJlY2VpdmVkIGV2ZW50IGFuZCBub3cuXG4gICAqIElmIHRoZSBkaWZmZXJlbmNlIGlzIG1vcmUgdGhhbiAzNSBzZWNvbmRzLCBpdCBtZWFucyBvdXIgaGVhbHRoIGNoZWNrIGxvZ2ljIGhhcyBmYWlsZWQgYW5kIHdlYnNvY2tldCBuZWVkc1xuICAgKiB0byBiZSByZWNvbm5lY3RlZC5cbiAgICovXG4gIHNjaGVkdWxlQ29ubmVjdGlvbkNoZWNrID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dFJlZiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5sYXN0RXZlbnQgJiZcbiAgICAgICAgbm93LmdldFRpbWUoKSAtIHRoaXMubGFzdEV2ZW50LmdldFRpbWUoKSA+IHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2xvZygnc2NoZWR1bGVDb25uZWN0aW9uQ2hlY2sgLSBnb2luZyB0byByZWNvbm5lY3QnKTtcbiAgICAgICAgdGhpcy5fc2V0SGVhbHRoKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfSwgdGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0KTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IGZyb21CeXRlQXJyYXkgfSBmcm9tICdiYXNlNjQtanMnO1xuXG5mdW5jdGlvbiBpc1N0cmluZzxUPihhcnJheU9yU3RyaW5nOiBzdHJpbmcgfCBUW10pOiBhcnJheU9yU3RyaW5nIGlzIHN0cmluZyB7XG4gIHJldHVybiB0eXBlb2YgKGFycmF5T3JTdHJpbmcgYXMgc3RyaW5nKSA9PT0gJ3N0cmluZyc7XG59XG5cbnR5cGUgTWFwR2VuZXJpY0NhbGxiYWNrPFQsIFU+ID0gKHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBhcnJheTogVFtdKSA9PiBVO1xudHlwZSBNYXBTdHJpbmdDYWxsYmFjazxVPiA9ICh2YWx1ZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBzdHJpbmc6IHN0cmluZykgPT4gVTtcblxuZnVuY3Rpb24gaXNNYXBTdHJpbmdDYWxsYmFjazxULCBVPihcbiAgYXJyYXlPclN0cmluZzogc3RyaW5nIHwgVFtdLFxuICBjYWxsYmFjazogTWFwR2VuZXJpY0NhbGxiYWNrPFQsIFU+IHwgTWFwU3RyaW5nQ2FsbGJhY2s8VT4sXG4pOiBjYWxsYmFjayBpcyBNYXBTdHJpbmdDYWxsYmFjazxVPiB7XG4gIHJldHVybiAhIWNhbGxiYWNrICYmIGlzU3RyaW5nKGFycmF5T3JTdHJpbmcpO1xufVxuXG4vLyBzb3VyY2UgLSBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvYmxvYi9tYXN0ZXIvdGVzdC9jb252ZXJ0LmpzI0w3MlxuZnVuY3Rpb24gbWFwPFQsIFU+KGFycmF5OiBUW10sIGNhbGxiYWNrOiBNYXBHZW5lcmljQ2FsbGJhY2s8VCwgVT4pOiBVW107XG5mdW5jdGlvbiBtYXA8VT4oc3RyaW5nOiBzdHJpbmcsIGNhbGxiYWNrOiBNYXBTdHJpbmdDYWxsYmFjazxVPik6IFVbXTtcbmZ1bmN0aW9uIG1hcDxULCBVPihcbiAgYXJyYXlPclN0cmluZzogc3RyaW5nIHwgVFtdLFxuICBjYWxsYmFjazogTWFwR2VuZXJpY0NhbGxiYWNrPFQsIFU+IHwgTWFwU3RyaW5nQ2FsbGJhY2s8VT4sXG4pOiBVW10ge1xuICBjb25zdCByZXMgPSBbXTtcblxuICBpZiAoaXNTdHJpbmcoYXJyYXlPclN0cmluZykgJiYgaXNNYXBTdHJpbmdDYWxsYmFjayhhcnJheU9yU3RyaW5nLCBjYWxsYmFjaykpIHtcbiAgICBmb3IgKGxldCBrID0gMCwgbGVuID0gYXJyYXlPclN0cmluZy5sZW5ndGg7IGsgPCBsZW47IGsrKykge1xuICAgICAgaWYgKGFycmF5T3JTdHJpbmcuY2hhckF0KGspKSB7XG4gICAgICAgIGNvbnN0IGtWYWx1ZSA9IGFycmF5T3JTdHJpbmcuY2hhckF0KGspO1xuICAgICAgICBjb25zdCBtYXBwZWRWYWx1ZSA9IGNhbGxiYWNrKGtWYWx1ZSwgaywgYXJyYXlPclN0cmluZyk7XG4gICAgICAgIHJlc1trXSA9IG1hcHBlZFZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChcbiAgICAhaXNTdHJpbmcoYXJyYXlPclN0cmluZykgJiZcbiAgICAhaXNNYXBTdHJpbmdDYWxsYmFjayhhcnJheU9yU3RyaW5nLCBjYWxsYmFjaylcbiAgKSB7XG4gICAgZm9yIChsZXQgayA9IDAsIGxlbiA9IGFycmF5T3JTdHJpbmcubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcbiAgICAgIGlmIChrIGluIGFycmF5T3JTdHJpbmcpIHtcbiAgICAgICAgY29uc3Qga1ZhbHVlID0gYXJyYXlPclN0cmluZ1trXTtcbiAgICAgICAgY29uc3QgbWFwcGVkVmFsdWUgPSBjYWxsYmFjayhrVmFsdWUsIGssIGFycmF5T3JTdHJpbmcpO1xuICAgICAgICByZXNba10gPSBtYXBwZWRWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgY29uc3QgZW5jb2RlQmFzZTY0ID0gKGRhdGE6IHN0cmluZyk6IHN0cmluZyA9PlxuICBmcm9tQnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KG1hcChkYXRhLCAoY2hhcikgPT4gY2hhci5jaGFyQ29kZUF0KDApKSkpO1xuXG4vLyBiYXNlLTY0IGRlY29kZXIgdGhyb3dzIGV4Y2VwdGlvbiBpZiBlbmNvZGVkIHN0cmluZyBpcyBub3QgcGFkZGVkIGJ5ICc9JyB0byBtYWtlIHN0cmluZyBsZW5ndGhcbi8vIGluIG11bHRpcGxlcyBvZiA0LiBTbyBnb25uYSB1c2Ugb3VyIG93biBtZXRob2QgZm9yIHRoaXMgcHVycG9zZSB0byBrZWVwIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvYmxvYi9tYXN0ZXIvaW5kZXguanMjTDI2XG5leHBvcnQgY29uc3QgZGVjb2RlQmFzZTY0ID0gKHM6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGUgPSB7fSBhcyB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9LFxuICAgIHcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLFxuICAgIEwgPSBzLmxlbmd0aDtcbiAgbGV0IGksXG4gICAgYiA9IDAsXG4gICAgYyxcbiAgICB4LFxuICAgIGwgPSAwLFxuICAgIGEsXG4gICAgciA9ICcnO1xuICBjb25zdCBBID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgIGVbQS5jaGFyQXQoaSldID0gaTtcbiAgfVxuICBmb3IgKHggPSAwOyB4IDwgTDsgeCsrKSB7XG4gICAgYyA9IGVbcy5jaGFyQXQoeCldO1xuICAgIGIgPSAoYiA8PCA2KSArIGM7XG4gICAgbCArPSA2O1xuICAgIHdoaWxlIChsID49IDgpIHtcbiAgICAgICgoYSA9IChiID4+PiAobCAtPSA4KSkgJiAweGZmKSB8fCB4IDwgTCAtIDIpICYmIChyICs9IHcoYSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcjtcbn07XG4iLCJpbXBvcnQgeyBkZWNvZGVCYXNlNjQsIGVuY29kZUJhc2U2NCB9IGZyb20gJy4vYmFzZTY0JztcblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCB0aGUgaWQgb2YgdGhlIHVzZXJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIERldlRva2VuKHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBbXG4gICAgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOScsIC8ve1wiYWxnXCI6IFwiSFMyNTZcIiwgXCJ0eXBcIjogXCJKV1RcIn1cbiAgICBlbmNvZGVCYXNlNjQoSlNPTi5zdHJpbmdpZnkoeyB1c2VyX2lkOiB1c2VySWQgfSkpLFxuICAgICdkZXZ0b2tlbicsIC8vIGhhcmRjb2RlZCBzaWduYXR1cmVcbiAgXS5qb2luKCcuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBVc2VyRnJvbVRva2VuKHRva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgZnJhZ21lbnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgaWYgKGZyYWdtZW50cy5sZW5ndGggIT09IDMpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3QgYjY0UGF5bG9hZCA9IGZyYWdtZW50c1sxXTtcbiAgY29uc3QgcGF5bG9hZCA9IGRlY29kZUJhc2U2NChiNjRQYXlsb2FkKTtcbiAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG4gIHJldHVybiBkYXRhLnVzZXJfaWQgYXMgc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgVXNlckZyb21Ub2tlbiB9IGZyb20gJy4vc2lnbmluZyc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgdHlwZSB7IFRva2VuT3JQcm92aWRlciwgVXNlcldpdGhJZCB9IGZyb20gJy4vdHlwZXMnO1xuXG4vKipcbiAqIFRva2VuTWFuYWdlclxuICpcbiAqIEhhbmRsZXMgYWxsIHRoZSBvcGVyYXRpb25zIGFyb3VuZCB1c2VyIHRva2VuLlxuICovXG5leHBvcnQgY2xhc3MgVG9rZW5NYW5hZ2VyIHtcbiAgbG9hZFRva2VuUHJvbWlzZTogUHJvbWlzZTxzdHJpbmc+IHwgbnVsbDtcbiAgdHlwZTogJ3N0YXRpYycgfCAncHJvdmlkZXInO1xuICBzZWNyZXQ/OiBzdHJpbmc7XG4gIHRva2VuPzogc3RyaW5nO1xuICB0b2tlblByb3ZpZGVyPzogVG9rZW5PclByb3ZpZGVyO1xuICB1c2VyPzogVXNlcldpdGhJZDtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7U2VjcmV0fSBzZWNyZXRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNlY3JldD86IHN0cmluZykge1xuICAgIHRoaXMubG9hZFRva2VuUHJvbWlzZSA9IG51bGw7XG4gICAgaWYgKHNlY3JldCkge1xuICAgICAgdGhpcy5zZWNyZXQgPSBzZWNyZXQ7XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ3N0YXRpYyc7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0aWMgc3RyaW5nIHRva2VuIG9yIHRva2VuIHByb3ZpZGVyLlxuICAgKiBUb2tlbiBwcm92aWRlciBzaG91bGQgcmV0dXJuIGEgdG9rZW4gc3RyaW5nIG9yIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBzdHJpbmcgdG9rZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7VG9rZW5PclByb3ZpZGVyfSB0b2tlbk9yUHJvdmlkZXIgLSB0aGUgdG9rZW4gb3IgdG9rZW4gcHJvdmlkZXIuXG4gICAqIEBwYXJhbSB7VXNlclJlc3BvbnNlfSB1c2VyIC0gdGhlIHVzZXIgb2JqZWN0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQW5vbnltb3VzIC0gd2hldGhlciB0aGUgdXNlciBpcyBhbm9ueW1vdXMgb3Igbm90LlxuICAgKi9cbiAgc2V0VG9rZW5PclByb3ZpZGVyID0gYXN5bmMgKFxuICAgIHRva2VuT3JQcm92aWRlcjogVG9rZW5PclByb3ZpZGVyLFxuICAgIHVzZXI6IFVzZXJXaXRoSWQsXG4gICAgaXNBbm9ueW1vdXM6IGJvb2xlYW4sXG4gICkgPT4ge1xuICAgIHRoaXMudmFsaWRhdGVUb2tlbih0b2tlbk9yUHJvdmlkZXIsIHVzZXIsIGlzQW5vbnltb3VzKTtcbiAgICB0aGlzLnVzZXIgPSB1c2VyO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24odG9rZW5PclByb3ZpZGVyKSkge1xuICAgICAgdGhpcy50b2tlblByb3ZpZGVyID0gdG9rZW5PclByb3ZpZGVyO1xuICAgICAgdGhpcy50eXBlID0gJ3Byb3ZpZGVyJztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRva2VuT3JQcm92aWRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMudG9rZW4gPSB0b2tlbk9yUHJvdmlkZXI7XG4gICAgICB0aGlzLnR5cGUgPSAnc3RhdGljJztcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLmxvYWRUb2tlbigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIHRva2VuIG1hbmFnZXIuXG4gICAqIFVzZWZ1bCBmb3IgY2xpZW50IGRpc2Nvbm5lY3Rpb24gb3Igc3dpdGNoaW5nIHVzZXIuXG4gICAqL1xuICByZXNldCA9ICgpID0+IHtcbiAgICB0aGlzLnRva2VuID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxvYWRUb2tlblByb21pc2UgPSBudWxsO1xuICB9O1xuXG4gIC8vIFZhbGlkYXRlcyB0aGUgdXNlciB0b2tlbi5cbiAgdmFsaWRhdGVUb2tlbiA9IChcbiAgICB0b2tlbk9yUHJvdmlkZXI6IFRva2VuT3JQcm92aWRlcixcbiAgICB1c2VyOiBVc2VyV2l0aElkLFxuICAgIGlzQW5vbnltb3VzOiBib29sZWFuLFxuICApID0+IHtcbiAgICAvLyBhbGxvdyBlbXB0eSB0b2tlbiBmb3IgYW5vbiB1c2VyXG4gICAgaWYgKHVzZXIgJiYgaXNBbm9ueW1vdXMgJiYgIXRva2VuT3JQcm92aWRlcikgcmV0dXJuO1xuXG4gICAgLy8gRG9uJ3QgYWxsb3cgZW1wdHkgdG9rZW4gZm9yIG5vbi1zZXJ2ZXIgc2lkZSBjbGllbnQuXG4gICAgaWYgKCF0aGlzLnNlY3JldCAmJiAhdG9rZW5PclByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXJXaXRoSWQgdG9rZW4gY2FuIG5vdCBiZSBlbXB0eScpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRva2VuT3JQcm92aWRlciAmJlxuICAgICAgdHlwZW9mIHRva2VuT3JQcm92aWRlciAhPT0gJ3N0cmluZycgJiZcbiAgICAgICFpc0Z1bmN0aW9uKHRva2VuT3JQcm92aWRlcilcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndXNlciB0b2tlbiBzaG91bGQgZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRva2VuT3JQcm92aWRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEFsbG93IGVtcHR5IHRva2VuIGZvciBhbm9ueW1vdXMgdXNlcnNcbiAgICAgIGlmIChpc0Fub255bW91cyAmJiB0b2tlbk9yUHJvdmlkZXIgPT09ICcnKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHRva2VuVXNlcklkID0gVXNlckZyb21Ub2tlbih0b2tlbk9yUHJvdmlkZXIpO1xuICAgICAgaWYgKFxuICAgICAgICB0b2tlbk9yUHJvdmlkZXIgIT0gbnVsbCAmJlxuICAgICAgICAodG9rZW5Vc2VySWQgPT0gbnVsbCB8fFxuICAgICAgICAgIHRva2VuVXNlcklkID09PSAnJyB8fFxuICAgICAgICAgICghaXNBbm9ueW1vdXMgJiYgdG9rZW5Vc2VySWQgIT09IHVzZXIuaWQpKVxuICAgICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAndXNlclRva2VuIGRvZXMgbm90IGhhdmUgYSB1c2VyX2lkIG9yIGlzIG5vdCBtYXRjaGluZyB3aXRoIHVzZXIuaWQnLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBSZXNvbHZlcyB3aGVuIHRva2VuIGlzIHJlYWR5LiBUaGlzIGZ1bmN0aW9uIGlzIHNpbXBseSB0byBjaGVjayBpZiBsb2FkVG9rZW4gaXMgaW4gcHJvZ3Jlc3MsIGluIHdoaWNoXG4gIC8vIGNhc2UgYSBmdW5jdGlvbiBzaG91bGQgd2FpdC5cbiAgdG9rZW5SZWFkeSA9ICgpID0+IHRoaXMubG9hZFRva2VuUHJvbWlzZTtcblxuICAvLyBGZXRjaGVzIGEgdG9rZW4gZnJvbSB0b2tlblByb3ZpZGVyIGZ1bmN0aW9uIGFuZCBzZXRzIGluIHRva2VuTWFuYWdlci5cbiAgLy8gSW4gY2FzZSBvZiBzdGF0aWMgdG9rZW4sIGl0IHdpbGwgc2ltcGx5IHJlc29sdmUgdG8gc3RhdGljIHRva2VuLlxuICBsb2FkVG9rZW4gPSAoKSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3JcbiAgICB0aGlzLmxvYWRUb2tlblByb21pc2UgPSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAodGhpcy50eXBlID09PSAnc3RhdGljJykge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh0aGlzLnRva2VuIGFzIHN0cmluZyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRva2VuUHJvdmlkZXIgJiYgdHlwZW9mIHRoaXMudG9rZW5Qcm92aWRlciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnRva2VuID0gYXdhaXQgdGhpcy50b2tlblByb3ZpZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgbmV3IEVycm9yKGBDYWxsIHRvIHRva2VuUHJvdmlkZXIgZmFpbGVkIHdpdGggbWVzc2FnZTogJHtlfWApLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmxvYWRUb2tlblByb21pc2U7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGN1cnJlbnQgdG9rZW5cbiAgZ2V0VG9rZW4gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLnRva2VuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVzZXIgJiYgIXRoaXMudG9rZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLnRva2VuO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVc2VyIHRva2VuIGlzIG5vdCBzZXQuIEVpdGhlciBjbGllbnQuY29ubmVjdFVzZXIgd2Fzbid0IGNhbGxlZCBvciBjbGllbnQuZGlzY29ubmVjdCB3YXMgY2FsbGVkYCxcbiAgICApO1xuICB9O1xuXG4gIGlzU3RhdGljID0gKCkgPT4gdGhpcy50eXBlID09PSAnc3RhdGljJztcbn1cbiIsImltcG9ydCB7IEF4aW9zUmVzcG9uc2UgfSBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBBUElFcnJvclJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBBUElFcnJvckNvZGVzOiBSZWNvcmQ8XG4gIHN0cmluZyxcbiAgeyBuYW1lOiBzdHJpbmc7IHJldHJ5YWJsZTogYm9vbGVhbiB9XG4+ID0ge1xuICAnLTEnOiB7IG5hbWU6ICdJbnRlcm5hbFN5c3RlbUVycm9yJywgcmV0cnlhYmxlOiB0cnVlIH0sXG4gICcyJzogeyBuYW1lOiAnQWNjZXNzS2V5RXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICczJzogeyBuYW1lOiAnQXV0aGVudGljYXRpb25GYWlsZWRFcnJvcicsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnNCc6IHsgbmFtZTogJ0lucHV0RXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc2JzogeyBuYW1lOiAnRHVwbGljYXRlVXNlcm5hbWVFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzknOiB7IG5hbWU6ICdSYXRlTGltaXRFcnJvcicsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnMTYnOiB7IG5hbWU6ICdEb2VzTm90RXhpc3RFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzE3JzogeyBuYW1lOiAnTm90QWxsb3dlZEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMTgnOiB7IG5hbWU6ICdFdmVudE5vdFN1cHBvcnRlZEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMTknOiB7IG5hbWU6ICdDaGFubmVsRmVhdHVyZU5vdFN1cHBvcnRlZEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMjAnOiB7IG5hbWU6ICdNZXNzYWdlVG9vTG9uZ0Vycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMjEnOiB7IG5hbWU6ICdNdWx0aXBsZU5lc3RpbmdMZXZlbEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMjInOiB7IG5hbWU6ICdQYXlsb2FkVG9vQmlnRXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICcyMyc6IHsgbmFtZTogJ1JlcXVlc3RUaW1lb3V0RXJyb3InLCByZXRyeWFibGU6IHRydWUgfSxcbiAgJzI0JzogeyBuYW1lOiAnTWF4SGVhZGVyU2l6ZUV4Y2VlZGVkRXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc0MCc6IHsgbmFtZTogJ0F1dGhFcnJvclRva2VuRXhwaXJlZCcsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzQxJzogeyBuYW1lOiAnQXV0aEVycm9yVG9rZW5Ob3RWYWxpZFlldCcsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzQyJzogeyBuYW1lOiAnQXV0aEVycm9yVG9rZW5Vc2VkQmVmb3JlSXNzdWVkQXQnLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc0Myc6IHsgbmFtZTogJ0F1dGhFcnJvclRva2VuU2lnbmF0dXJlSW52YWxpZCcsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzQ0JzogeyBuYW1lOiAnQ3VzdG9tQ29tbWFuZEVuZHBvaW50TWlzc2luZ0Vycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnNDUnOiB7IG5hbWU6ICdDdXN0b21Db21tYW5kRW5kcG9pbnRDYWxsRXJyb3InLCByZXRyeWFibGU6IHRydWUgfSxcbiAgJzQ2JzogeyBuYW1lOiAnQ29ubmVjdGlvbklETm90Rm91bmRFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzYwJzogeyBuYW1lOiAnQ29vbERvd25FcnJvcicsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnNjknOiB7IG5hbWU6ICdFcnJXcm9uZ1JlZ2lvbicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzcwJzogeyBuYW1lOiAnRXJyUXVlcnlDaGFubmVsUGVybWlzc2lvbnMnLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc3MSc6IHsgbmFtZTogJ0VyclRvb01hbnlDb25uZWN0aW9ucycsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnOTknOiB7IG5hbWU6ICdBcHBTdXNwZW5kZWRFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbn07XG5cbi8vIHRvZG86IHRoaXMgaXMgbm90IGEgY29ycmVjdCBlcnJvciBkZWNsYXJhdGlvbi4gL3JlY29yZGluZ3MgZW5kcG9pbnQgcmV0dXJucyBlcnJvciBvYmplY3RzIGFzIGZvbGxvd3M6XG4vLyB7XG4vLyAgICAgXCJjb2RlXCI6IDE2LFxuLy8gICAgIFwibWVzc2FnZVwiOiBcIkxpc3RSZWNvcmRpbmdzIGZhaWxlZCB3aXRoIGVycm9yOiBcXFwiQ2FuJ3QgZmluZCBjYWxsIHdpdGggaWQgZGVmYXVsdDpiYmJiXFxcIlwiLFxuLy8gICAgIFwiU3RhdHVzQ29kZVwiOiA0MDQsXG4vLyAgICAgXCJkdXJhdGlvblwiOiBcIjAuMDBtc1wiLFxuLy8gICAgIFwibW9yZV9pbmZvXCI6IFwiaHR0cHM6Ly9nZXRzdHJlYW0uaW8vY2hhdC9kb2NzL2FwaV9lcnJvcnNfcmVzcG9uc2VcIixcbi8vICAgICBcImRldGFpbHNcIjogW11cbi8vIH1cblxudHlwZSBBUElFcnJvciA9IEVycm9yICYgeyBjb2RlOiBudW1iZXI7IGlzV1NGYWlsdXJlPzogYm9vbGVhbiB9O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNBUElFcnJvcihlcnJvcjogRXJyb3IpOiBlcnJvciBpcyBBUElFcnJvciB7XG4gIHJldHVybiAoZXJyb3IgYXMgQVBJRXJyb3IpLmNvZGUgIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3JSZXRyeWFibGUoZXJyb3I6IEFQSUVycm9yKSB7XG4gIGlmICghZXJyb3IuY29kZSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBlcnIgPSBBUElFcnJvckNvZGVzW2Ake2Vycm9yLmNvZGV9YF07XG4gIGlmICghZXJyKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBlcnIucmV0cnlhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb25uZWN0aW9uSURFcnJvcihlcnJvcjogQVBJRXJyb3IpIHtcbiAgcmV0dXJuIGVycm9yLmNvZGUgPT09IDQ2OyAvLyBDb25uZWN0aW9uSUROb3RGb3VuZEVycm9yXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dTRmFpbHVyZShlcnI6IEFQSUVycm9yKTogYm9vbGVhbiB7XG4gIGlmICh0eXBlb2YgZXJyLmlzV1NGYWlsdXJlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gZXJyLmlzV1NGYWlsdXJlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShlcnIubWVzc2FnZSkuaXNXU0ZhaWx1cmU7XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3JSZXNwb25zZShcbiAgcmVzOiBBeGlvc1Jlc3BvbnNlPHVua25vd24+LFxuKTogcmVzIGlzIEF4aW9zUmVzcG9uc2U8QVBJRXJyb3JSZXNwb25zZT4ge1xuICByZXR1cm4gIXJlcy5zdGF0dXMgfHwgcmVzLnN0YXR1cyA8IDIwMCB8fCAzMDAgPD0gcmVzLnN0YXR1cztcbn1cbiIsImltcG9ydCBheGlvcywgeyBBeGlvc1JlcXVlc3RDb25maWcsIENhbmNlbFRva2VuU291cmNlIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xuaW1wb3J0IHtcbiAgYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzLFxuICByZW1vdmVDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnMsXG4gIHJldHJ5SW50ZXJ2YWwsXG4gIHNsZWVwLFxufSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGlzQVBJRXJyb3IsIGlzQ29ubmVjdGlvbklERXJyb3IsIGlzRXJyb3JSZXRyeWFibGUgfSBmcm9tICcuL2Vycm9ycyc7XG5pbXBvcnQgeyBMb2dMZXZlbCwgU3RyZWFtVmlkZW9FdmVudCwgVVIgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IENvbm5lY3RlZEV2ZW50IH0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuZXhwb3J0IGVudW0gQ29ubmVjdGlvblN0YXRlIHtcbiAgQ2xvc2VkID0gJ0NMT1NFRCcsXG4gIENvbm5lY3RlZCA9ICdDT05ORUNURUQnLFxuICBDb25uZWN0aW5nID0gJ0NPTk5FQ1RJTkcnLFxuICBEaXNjb25uZWN0ZWQgPSAnRElTQ09OTkVDVEVEJyxcbiAgSW5pdCA9ICdJTklUJyxcbn1cblxuZXhwb3J0IGNsYXNzIFdTQ29ubmVjdGlvbkZhbGxiYWNrIHtcbiAgY2xpZW50OiBTdHJlYW1DbGllbnQ7XG4gIHN0YXRlOiBDb25uZWN0aW9uU3RhdGU7XG4gIGNvbnNlY3V0aXZlRmFpbHVyZXM6IG51bWJlcjtcbiAgY29ubmVjdGlvbklEPzogc3RyaW5nO1xuICBjYW5jZWxUb2tlbj86IENhbmNlbFRva2VuU291cmNlO1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogU3RyZWFtQ2xpZW50KSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgdGhpcy5zdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5Jbml0O1xuICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG5cbiAgICBhZGRDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnModGhpcy5fb25saW5lU3RhdHVzQ2hhbmdlZCk7XG4gIH1cblxuICBfbG9nKG1zZzogc3RyaW5nLCBleHRyYTogVVIgPSB7fSwgbGV2ZWw6IExvZ0xldmVsID0gJ2luZm8nKSB7XG4gICAgdGhpcy5jbGllbnQubG9nZ2VyKGxldmVsLCAnV1NDb25uZWN0aW9uRmFsbGJhY2s6JyArIG1zZywge1xuICAgICAgLi4uZXh0cmEsXG4gICAgfSk7XG4gIH1cblxuICBfc2V0U3RhdGUoc3RhdGU6IENvbm5lY3Rpb25TdGF0ZSkge1xuICAgIHRoaXMuX2xvZyhgX3NldFN0YXRlKCkgLSAke3N0YXRlfWApO1xuXG4gICAgLy8gdHJhbnNpdGlvbiBmcm9tIGNvbm5lY3RpbmcgPT4gY29ubmVjdGVkXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RpbmcgJiZcbiAgICAgIHN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkXG4gICAgKSB7XG4gICAgICB0aGlzLmNsaWVudC5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsIG9ubGluZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBzdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNsb3NlZCB8fFxuICAgICAgc3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWRcbiAgICApIHtcbiAgICAgIHRoaXMuY2xpZW50LmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnY29ubmVjdGlvbi5jaGFuZ2VkJywgb25saW5lOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgX29ubGluZVN0YXR1c0NoYW5nZWQgPSAoZXZlbnQ6IHsgdHlwZTogc3RyaW5nIH0pID0+IHtcbiAgICB0aGlzLl9sb2coYF9vbmxpbmVTdGF0dXNDaGFuZ2VkKCkgLSAke2V2ZW50LnR5cGV9YCk7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ29mZmxpbmUnKSB7XG4gICAgICB0aGlzLl9zZXRTdGF0ZShDb25uZWN0aW9uU3RhdGUuQ2xvc2VkKTtcbiAgICAgIHRoaXMuY2FuY2VsVG9rZW4/LmNhbmNlbCgnZGlzY29ubmVjdCgpIGlzIGNhbGxlZCcpO1xuICAgICAgdGhpcy5jYW5jZWxUb2tlbiA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ29ubGluZScgJiYgdGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNsb3NlZCkge1xuICAgICAgdGhpcy5jb25uZWN0KHRydWUpO1xuICAgIH1cbiAgfTtcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX3JlcSA9IGFzeW5jIDxUID0gVVI+KFxuICAgIHBhcmFtczogVVIsXG4gICAgY29uZmlnOiBBeGlvc1JlcXVlc3RDb25maWcsXG4gICAgcmV0cnk6IGJvb2xlYW4sXG4gICk6IFByb21pc2U8VD4gPT4ge1xuICAgIGlmICghdGhpcy5jYW5jZWxUb2tlbiAmJiAhcGFyYW1zLmNsb3NlKSB7XG4gICAgICB0aGlzLmNhbmNlbFRva2VuID0gYXhpb3MuQ2FuY2VsVG9rZW4uc291cmNlKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmRvQXhpb3NSZXF1ZXN0PFQ+KFxuICAgICAgICAnZ2V0JyxcbiAgICAgICAgKHRoaXMuY2xpZW50LmJhc2VVUkwgYXMgc3RyaW5nKS5yZXBsYWNlKCc6MzAzMCcsICc6ODkwMCcpICsgJy9sb25ncG9sbCcsIC8vIHJlcGxhY2UgcG9ydCBpZiBwcmVzZW50IGZvciB0ZXN0aW5nIHdpdGggbG9jYWwgQVBJXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAge1xuICAgICAgICAgIGNvbmZpZzogeyAuLi5jb25maWcsIGNhbmNlbFRva2VuOiB0aGlzLmNhbmNlbFRva2VuPy50b2tlbiB9LFxuICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICBwdWJsaWNFbmRwb2ludDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7IC8vIGFsd2F5cyByZXNldCBpbiBjYXNlIG9mIG5vIGVycm9yXG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzICs9IDE7XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGlmIChyZXRyeSAmJiBpc0Vycm9yUmV0cnlhYmxlKGVycikpIHtcbiAgICAgICAgdGhpcy5fbG9nKGBfcmVxKCkgLSBSZXRyeWFibGUgZXJyb3IsIHJldHJ5aW5nIHJlcXVlc3RgKTtcbiAgICAgICAgYXdhaXQgc2xlZXAocmV0cnlJbnRlcnZhbCh0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcTxUPihwYXJhbXMsIGNvbmZpZywgcmV0cnkpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBfcG9sbCA9IGFzeW5jICgpID0+IHtcbiAgICB3aGlsZSAodGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3JlcTx7XG4gICAgICAgICAgZXZlbnRzOiBTdHJlYW1WaWRlb0V2ZW50W107XG4gICAgICAgIH0+KFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKTsgLy8gMzBzID0+IEFQSSByZXNwb25kcyBpbiAyMHMgaWYgdGhlcmUgaXMgbm8gZXZlbnRcblxuICAgICAgICBpZiAoZGF0YS5ldmVudHM/Lmxlbmd0aCkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5ldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LmRpc3BhdGNoRXZlbnQoZGF0YS5ldmVudHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChheGlvcy5pc0NhbmNlbChlcnIpKSB7XG4gICAgICAgICAgdGhpcy5fbG9nKGBfcG9sbCgpIC0gYXhpb3MgY2FuY2VsZWQgcmVxdWVzdGApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBjbGllbnQuZG9BeGlvc1JlcXVlc3Qgd2lsbCB0YWtlIGNhcmUgb2YgVE9LRU5fRVhQSVJFRCBlcnJvciAqL1xuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGlzQ29ubmVjdGlvbklERXJyb3IoZXJyKSkge1xuICAgICAgICAgIHRoaXMuX2xvZyhgX3BvbGwoKSAtIENvbm5lY3Rpb25JRCBlcnJvciwgY29ubmVjdGluZyB3aXRob3V0IElELi4uYCk7XG4gICAgICAgICAgdGhpcy5fc2V0U3RhdGUoQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCk7XG4gICAgICAgICAgdGhpcy5jb25uZWN0KHRydWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGlzQVBJRXJyb3IoZXJyKSAmJiAhaXNFcnJvclJldHJ5YWJsZShlcnIpKSB7XG4gICAgICAgICAgdGhpcy5fc2V0U3RhdGUoQ29ubmVjdGlvblN0YXRlLkNsb3NlZCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgc2xlZXAocmV0cnlJbnRlcnZhbCh0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIGNvbm5lY3QgdHJ5IHRvIG9wZW4gYSBsb25ncG9sbCByZXF1ZXN0XG4gICAqIEBwYXJhbSByZWNvbm5lY3Qgc2hvdWxkIGJlIGZhbHNlIGZvciBmaXJzdCBjYWxsIGFuZCB0cnVlIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIGtlZXAgdGhlIGNvbm5lY3Rpb24gYWxpdmUgYW5kIGNhbGwgcmVjb3ZlclN0YXRlXG4gICAqL1xuICBjb25uZWN0ID0gYXN5bmMgKHJlY29ubmVjdCA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nKSB7XG4gICAgICB0aGlzLl9sb2coXG4gICAgICAgICdjb25uZWN0KCkgLSBjb25uZWN0aW5nIGFscmVhZHkgaW4gcHJvZ3Jlc3MnLFxuICAgICAgICB7IHJlY29ubmVjdCB9LFxuICAgICAgICAnd2FybicsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgdGhpcy5fbG9nKFxuICAgICAgICAnY29ubmVjdCgpIC0gYWxyZWFkeSBjb25uZWN0ZWQgYW5kIHBvbGxpbmcnLFxuICAgICAgICB7IHJlY29ubmVjdCB9LFxuICAgICAgICAnd2FybicsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NldFN0YXRlKENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nKTtcbiAgICB0aGlzLmNvbm5lY3Rpb25JRCA9IHVuZGVmaW5lZDsgLy8gY29ubmVjdCBzaG91bGQgYmUgc2VudCB3aXRoIGVtcHR5IGNvbm5lY3Rpb25faWQgc28gQVBJIGNyZWF0ZXMgb25lXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXZlbnQgfSA9IGF3YWl0IHRoaXMuX3JlcTx7XG4gICAgICAgIGV2ZW50OiBDb25uZWN0ZWRFdmVudDtcbiAgICAgIH0+KFxuICAgICAgICB7IGpzb246IHRoaXMuY2xpZW50Ll9idWlsZFdTUGF5bG9hZCgpIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aW1lb3V0OiA4MDAwLCAvLyA4c1xuICAgICAgICB9LFxuICAgICAgICByZWNvbm5lY3QsXG4gICAgICApO1xuXG4gICAgICB0aGlzLl9zZXRTdGF0ZShDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKTtcbiAgICAgIHRoaXMuY29ubmVjdGlvbklEID0gZXZlbnQuY29ubmVjdGlvbl9pZDtcbiAgICAgIHRoaXMuY2xpZW50LnJlc29sdmVDb25uZWN0aW9uSWQ/LigpO1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgdGhpcy5jbGllbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB0aGlzLl9wb2xsKCk7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLl9zZXRTdGF0ZShDb25uZWN0aW9uU3RhdGUuQ2xvc2VkKTtcbiAgICAgIHRoaXMuY2xpZW50LnJlamVjdENvbm5lY3Rpb25JZD8uKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBpc0hlYWx0aHkgY2hlY2tzIGlmIHRoZXJlIGlzIGEgY29ubmVjdGlvbklEIGFuZCBjb25uZWN0aW9uIGlzIGluIENvbm5lY3RlZCBzdGF0ZVxuICAgKi9cbiAgaXNIZWFsdGh5ID0gKCkgPT4ge1xuICAgIHJldHVybiAhIXRoaXMuY29ubmVjdGlvbklEICYmIHRoaXMuc3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQ7XG4gIH07XG5cbiAgZGlzY29ubmVjdCA9IGFzeW5jICh0aW1lb3V0ID0gMjAwMCkgPT4ge1xuICAgIHJlbW92ZUNvbm5lY3Rpb25FdmVudExpc3RlbmVycyh0aGlzLl9vbmxpbmVTdGF0dXNDaGFuZ2VkKTtcblxuICAgIHRoaXMuX3NldFN0YXRlKENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpO1xuICAgIHRoaXMuY2FuY2VsVG9rZW4/LmNhbmNlbCgnZGlzY29ubmVjdCgpIGlzIGNhbGxlZCcpO1xuICAgIHRoaXMuY2FuY2VsVG9rZW4gPSB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBjb25uZWN0aW9uX2lkID0gdGhpcy5jb25uZWN0aW9uSUQ7XG4gICAgdGhpcy5jb25uZWN0aW9uSUQgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5fcmVxKFxuICAgICAgICB7IGNsb3NlOiB0cnVlLCBjb25uZWN0aW9uX2lkIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aW1lb3V0LFxuICAgICAgICB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aGlzLl9sb2coYGRpc2Nvbm5lY3QoKSAtIENsb3NlZCBjb25uZWN0aW9uSURgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuX2xvZyhgZGlzY29ubmVjdCgpIC0gRmFpbGVkYCwgeyBlcnIgfSwgJ2Vycm9yJyk7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vLi4vbG9nZ2VyJztcblxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnbG9jYXRpb24nXSk7XG5jb25zdCBISU5UX1VSTCA9IGBodHRwczovL2hpbnQuc3RyZWFtLWlvLXZpZGVvLmNvbS9gO1xuXG5leHBvcnQgY29uc3QgZ2V0TG9jYXRpb25IaW50ID0gYXN5bmMgKFxuICBoaW50VXJsOiBzdHJpbmcgPSBISU5UX1VSTCxcbiAgdGltZW91dDogbnVtYmVyID0gMjAwMCxcbikgPT4ge1xuICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gYWJvcnRDb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXQpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaGludFVybCwge1xuICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgfSk7XG4gICAgY29uc3QgYXdzUG9wID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtYW16LWNmLXBvcCcpIHx8ICdFUlInO1xuICAgIGxvZ2dlcignZGVidWcnLCBgTG9jYXRpb24gaGVhZGVyOiAke2F3c1BvcH1gKTtcbiAgICByZXR1cm4gYXdzUG9wLnN1YnN0cmluZygwLCAzKTsgLy8gQU1TMS1QMiAtPiBBTVNcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ2dlcignd2FybicsIGBGYWlsZWQgdG8gZ2V0IGxvY2F0aW9uIGhpbnQgZnJvbSAke2hpbnRVcmx9YCwgZSk7XG4gICAgcmV0dXJuICdFUlInO1xuICB9IGZpbmFsbHkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICB9XG59O1xuIiwiaW1wb3J0IGF4aW9zLCB7XG4gIEF4aW9zRXJyb3IsXG4gIEF4aW9zSGVhZGVycyxcbiAgQXhpb3NJbnN0YW5jZSxcbiAgQXhpb3NSZXF1ZXN0Q29uZmlnLFxuICBBeGlvc1Jlc3BvbnNlLFxufSBmcm9tICdheGlvcyc7XG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xuaW1wb3J0IHsgU3RhYmxlV1NDb25uZWN0aW9uIH0gZnJvbSAnLi9jb25uZWN0aW9uJztcbmltcG9ydCB7IERldlRva2VuIH0gZnJvbSAnLi9zaWduaW5nJztcbmltcG9ydCB7IFRva2VuTWFuYWdlciB9IGZyb20gJy4vdG9rZW5fbWFuYWdlcic7XG5pbXBvcnQgeyBXU0Nvbm5lY3Rpb25GYWxsYmFjayB9IGZyb20gJy4vY29ubmVjdGlvbl9mYWxsYmFjayc7XG5pbXBvcnQgeyBpc0Vycm9yUmVzcG9uc2UsIGlzV1NGYWlsdXJlIH0gZnJvbSAnLi9lcnJvcnMnO1xuaW1wb3J0IHtcbiAgYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzLFxuICBpc0Z1bmN0aW9uLFxuICBpc09ubGluZSxcbiAgS25vd25Db2RlcyxcbiAgcmFuZG9tSWQsXG4gIHJlbW92ZUNvbm5lY3Rpb25FdmVudExpc3RlbmVycyxcbiAgcmV0cnlJbnRlcnZhbCxcbiAgc2xlZXAsXG59IGZyb20gJy4vdXRpbHMnO1xuXG5pbXBvcnQge1xuICBBbGxDbGllbnRFdmVudHMsXG4gIEFsbENsaWVudEV2ZW50VHlwZXMsXG4gIEFQSUVycm9yUmVzcG9uc2UsXG4gIENsaWVudEV2ZW50TGlzdGVuZXIsXG4gIENvbm5lY3RBUElSZXNwb25zZSxcbiAgRXJyb3JGcm9tUmVzcG9uc2UsXG4gIExvZ2dlcixcbiAgU3RyZWFtQ2xpZW50T3B0aW9ucyxcbiAgU3RyZWFtVmlkZW9FdmVudCxcbiAgVG9rZW5PclByb3ZpZGVyLFxuICBVc2VyLFxuICBVc2VyV2l0aElkLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEluc2lnaHRNZXRyaWNzLCBwb3N0SW5zaWdodHMgfSBmcm9tICcuL2luc2lnaHRzJztcbmltcG9ydCB7IGdldExvY2F0aW9uSGludCB9IGZyb20gJy4vbG9jYXRpb24nO1xuaW1wb3J0IHsgQ3JlYXRlR3Vlc3RSZXF1ZXN0LCBDcmVhdGVHdWVzdFJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuZXhwb3J0IGNsYXNzIFN0cmVhbUNsaWVudCB7XG4gIF91c2VyPzogVXNlcldpdGhJZDtcbiAgYW5vbnltb3VzOiBib29sZWFuO1xuICBwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmU/OiBib29sZWFuO1xuICBheGlvc0luc3RhbmNlOiBBeGlvc0luc3RhbmNlO1xuICBiYXNlVVJMPzogc3RyaW5nO1xuICBicm93c2VyOiBib29sZWFuO1xuICBjbGllbnRJRD86IHN0cmluZztcbiAga2V5OiBzdHJpbmc7XG4gIGxpc3RlbmVyczogUGFydGlhbDxcbiAgICBSZWNvcmQ8QWxsQ2xpZW50RXZlbnRUeXBlcywgQ2xpZW50RXZlbnRMaXN0ZW5lcjxhbnk+W10gfCB1bmRlZmluZWQ+XG4gID4gPSB7fTtcbiAgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgcHJpdmF0ZSBsb2NhdGlvbkhpbnQ6IFByb21pc2U8c3RyaW5nPiB8IHVuZGVmaW5lZDtcblxuICBub2RlOiBib29sZWFuO1xuICBvcHRpb25zOiBTdHJlYW1DbGllbnRPcHRpb25zO1xuICBzZWNyZXQ/OiBzdHJpbmc7XG4gIHNldFVzZXJQcm9taXNlOiBDb25uZWN0QVBJUmVzcG9uc2UgfCBudWxsO1xuICB0b2tlbk1hbmFnZXI6IFRva2VuTWFuYWdlcjtcbiAgdXNlcj86IFVzZXJXaXRoSWQ7XG4gIHVzZXJBZ2VudD86IHN0cmluZztcbiAgdXNlcklEPzogc3RyaW5nO1xuICB3c0Jhc2VVUkw/OiBzdHJpbmc7XG4gIHdzQ29ubmVjdGlvbjogU3RhYmxlV1NDb25uZWN0aW9uIHwgbnVsbDtcbiAgd3NGYWxsYmFjaz86IFdTQ29ubmVjdGlvbkZhbGxiYWNrO1xuICB3c1Byb21pc2U6IENvbm5lY3RBUElSZXNwb25zZSB8IG51bGw7XG4gIGNvbnNlY3V0aXZlRmFpbHVyZXM6IG51bWJlcjtcbiAgaW5zaWdodE1ldHJpY3M6IEluc2lnaHRNZXRyaWNzO1xuICBkZWZhdWx0V1NUaW1lb3V0V2l0aEZhbGxiYWNrOiBudW1iZXI7XG4gIGRlZmF1bHRXU1RpbWVvdXQ6IG51bWJlcjtcbiAgcmVzb2x2ZUNvbm5lY3Rpb25JZD86IEZ1bmN0aW9uO1xuICByZWplY3RDb25uZWN0aW9uSWQ/OiBGdW5jdGlvbjtcbiAgY29ubmVjdGlvbklkUHJvbWlzZT86IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPjtcbiAgZ3Vlc3RVc2VyQ3JlYXRlUHJvbWlzZT86IFByb21pc2U8Q3JlYXRlR3Vlc3RSZXNwb25zZT47XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYSBjbGllbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSB0aGUgYXBpIGtleVxuICAgKiBAcGFyYW0ge1N0cmVhbUNsaWVudE9wdGlvbnN9IFtvcHRpb25zXSAtIGFkZGl0aW9uYWwgb3B0aW9ucywgaGVyZSB5b3UgY2FuIHBhc3MgY3VzdG9tIG9wdGlvbnMgdG8gYXhpb3MgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNlY3JldF0gLSB0aGUgYXBpIHNlY3JldFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmJyb3dzZXJdIC0gZW5mb3JjZSB0aGUgY2xpZW50IHRvIGJlIGluIGJyb3dzZXIgbW9kZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLndhcm1VcF0gLSBkZWZhdWx0IHRvIGZhbHNlLCBpZiB0cnVlLCBjbGllbnQgd2lsbCBvcGVuIGEgY29ubmVjdGlvbiBhcyBzb29uIGFzIHBvc3NpYmxlIHRvIHNwZWVkIHVwIGZvbGxvd2luZyByZXF1ZXN0c1xuICAgKiBAcGFyYW0ge0xvZ2dlcn0gW29wdGlvbnMuTG9nZ2VyXSAtIGN1c3RvbSBsb2dnZXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnRpbWVvdXRdIC0gZGVmYXVsdCB0byAzMDAwXG4gICAqIEBwYXJhbSB7aHR0cHNBZ2VudH0gW29wdGlvbnMuaHR0cHNBZ2VudF0gLSBjdXN0b20gaHR0cHNBZ2VudCwgaW4gbm9kZSBpdCdzIGRlZmF1bHQgdG8gaHR0cHMuYWdlbnQoKVxuICAgKi9cbiAgY29uc3RydWN0b3Ioa2V5OiBzdHJpbmcsIG9wdGlvbnM/OiBTdHJlYW1DbGllbnRPcHRpb25zKSB7XG4gICAgLy8gc2V0IHRoZSBrZXlcbiAgICB0aGlzLmtleSA9IGtleTtcblxuICAgIC8vIHNldCB0aGUgc2VjcmV0XG4gICAgdGhpcy5zZWNyZXQgPSBvcHRpb25zPy5zZWNyZXQ7XG5cbiAgICAvLyBzZXQgdGhlIG9wdGlvbnMuLi4gYW5kIGZpZ3VyZSBvdXQgZGVmYXVsdHMuLi5cbiAgICBjb25zdCBpbnB1dE9wdGlvbnMgPSBvcHRpb25zXG4gICAgICA/IG9wdGlvbnNcbiAgICAgIDogKHtcbiAgICAgICAgICBicm93c2VyOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyxcbiAgICAgICAgfSBhcyBQYXJ0aWFsPFN0cmVhbUNsaWVudE9wdGlvbnM+KTtcblxuICAgIHRoaXMuYnJvd3NlciA9IGlucHV0T3B0aW9ucy5icm93c2VyIHx8IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuICAgIHRoaXMubm9kZSA9ICF0aGlzLmJyb3dzZXI7XG5cbiAgICBpZiAodGhpcy5icm93c2VyKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uSGludCA9IGdldExvY2F0aW9uSGludChcbiAgICAgICAgb3B0aW9ucz8ubG9jYXRpb25IaW50VXJsLFxuICAgICAgICBvcHRpb25zPy5sb2NhdGlvbkhpbnRUaW1lb3V0LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICB0aW1lb3V0OiA1MDAwLFxuICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSwgLy8gbWFraW5nIHN1cmUgY29va2llcyBhcmUgbm90IHNlbnRcbiAgICAgIHdhcm1VcDogZmFsc2UsXG4gICAgICAuLi5pbnB1dE9wdGlvbnMsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLm5vZGUgJiYgIXRoaXMub3B0aW9ucy5odHRwc0FnZW50KSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaHR0cHNBZ2VudCA9IG5ldyBodHRwcy5BZ2VudCh7XG4gICAgICAgIGtlZXBBbGl2ZTogdHJ1ZSxcbiAgICAgICAga2VlcEFsaXZlTXNlY3M6IDMwMDAsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEJhc2VVUkwoXG4gICAgICB0aGlzLm9wdGlvbnMuYmFzZVVSTCB8fCAnaHR0cHM6Ly92aWRlby5zdHJlYW0taW8tYXBpLmNvbS92aWRlbycsXG4gICAgKTtcblxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgJ2VudicgaW4gcHJvY2VzcyAmJlxuICAgICAgcHJvY2Vzcy5lbnYuU1RSRUFNX0xPQ0FMX1RFU1RfUlVOXG4gICAgKSB7XG4gICAgICB0aGlzLnNldEJhc2VVUkwoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAzMC92aWRlbycpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgJ2VudicgaW4gcHJvY2VzcyAmJlxuICAgICAgcHJvY2Vzcy5lbnYuU1RSRUFNX0xPQ0FMX1RFU1RfSE9TVFxuICAgICkge1xuICAgICAgdGhpcy5zZXRCYXNlVVJMKGBodHRwOi8vJHtwcm9jZXNzLmVudi5TVFJFQU1fTE9DQUxfVEVTVF9IT1NUfS92aWRlb2ApO1xuICAgIH1cblxuICAgIHRoaXMuYXhpb3NJbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7XG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICBiYXNlVVJMOiB0aGlzLmJhc2VVUkwsXG4gICAgfSk7XG5cbiAgICAvLyBXUyBjb25uZWN0aW9uIGlzIGluaXRpYWxpemVkIHdoZW4gc2V0VXNlciBpcyBjYWxsZWRcbiAgICB0aGlzLndzQ29ubmVjdGlvbiA9IG51bGw7XG4gICAgdGhpcy53c1Byb21pc2UgPSBudWxsO1xuICAgIHRoaXMuc2V0VXNlclByb21pc2UgPSBudWxsO1xuXG4gICAgLy8gbWFwcGluZyBiZXR3ZWVuIGNoYW5uZWwgZ3JvdXBzIGFuZCBjb25maWdzXG4gICAgdGhpcy5hbm9ueW1vdXMgPSBmYWxzZTtcbiAgICB0aGlzLnBlcnNpc3RVc2VyT25Db25uZWN0aW9uRmFpbHVyZSA9XG4gICAgICB0aGlzLm9wdGlvbnM/LnBlcnNpc3RVc2VyT25Db25uZWN0aW9uRmFpbHVyZTtcblxuICAgIC8vIElmIGl0IGlzIGEgc2VydmVyLXNpZGUgY2xpZW50LCB0aGVuIGxldHMgaW5pdGlhbGl6ZSB0aGUgdG9rZW5NYW5hZ2VyLCBzaW5jZSB0b2tlbiB3aWxsIGJlXG4gICAgLy8gZ2VuZXJhdGVkIGZyb20gc2VjcmV0LlxuICAgIHRoaXMudG9rZW5NYW5hZ2VyID0gbmV3IFRva2VuTWFuYWdlcih0aGlzLnNlY3JldCk7XG4gICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzID0gMDtcbiAgICB0aGlzLmluc2lnaHRNZXRyaWNzID0gbmV3IEluc2lnaHRNZXRyaWNzKCk7XG5cbiAgICB0aGlzLmRlZmF1bHRXU1RpbWVvdXRXaXRoRmFsbGJhY2sgPSA2MDAwO1xuICAgIHRoaXMuZGVmYXVsdFdTVGltZW91dCA9IDE1MDAwO1xuXG4gICAgdGhpcy5sb2dnZXIgPSBpc0Z1bmN0aW9uKGlucHV0T3B0aW9ucy5sb2dnZXIpXG4gICAgICA/IGlucHV0T3B0aW9ucy5sb2dnZXJcbiAgICAgIDogKCkgPT4gbnVsbDtcbiAgfVxuXG4gIGRldlRva2VuID0gKHVzZXJJRDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIERldlRva2VuKHVzZXJJRCk7XG4gIH07XG5cbiAgZ2V0QXV0aFR5cGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuYW5vbnltb3VzID8gJ2Fub255bW91cycgOiAnand0JztcbiAgfTtcblxuICBzZXRCYXNlVVJMID0gKGJhc2VVUkw6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgdGhpcy53c0Jhc2VVUkwgPSB0aGlzLmJhc2VVUkxcbiAgICAgIC5yZXBsYWNlKCdodHRwJywgJ3dzJylcbiAgICAgIC5yZXBsYWNlKCc6MzAzMCcsICc6ODgwMCcpO1xuICB9O1xuXG4gIGdldExvY2F0aW9uSGludCA9IGFzeW5jIChcbiAgICBoaW50VXJsPzogc3RyaW5nLFxuICAgIHRpbWVvdXQ/OiBudW1iZXIsXG4gICk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgaGludCA9IGF3YWl0IHRoaXMubG9jYXRpb25IaW50O1xuICAgIGlmICghaGludCB8fCBoaW50ID09PSAnRVJSJykge1xuICAgICAgdGhpcy5sb2NhdGlvbkhpbnQgPSBnZXRMb2NhdGlvbkhpbnQoXG4gICAgICAgIGhpbnRVcmwgPz8gdGhpcy5vcHRpb25zLmxvY2F0aW9uSGludFVybCxcbiAgICAgICAgdGltZW91dCA/PyB0aGlzLm9wdGlvbnMubG9jYXRpb25IaW50VGltZW91dCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbkhpbnQ7XG4gICAgfVxuICAgIHJldHVybiBoaW50O1xuICB9O1xuXG4gIF9nZXRDb25uZWN0aW9uSUQgPSAoKSA9PlxuICAgIHRoaXMud3NDb25uZWN0aW9uPy5jb25uZWN0aW9uSUQgfHwgdGhpcy53c0ZhbGxiYWNrPy5jb25uZWN0aW9uSUQ7XG5cbiAgX2hhc0Nvbm5lY3Rpb25JRCA9ICgpID0+IEJvb2xlYW4odGhpcy5fZ2V0Q29ubmVjdGlvbklEKCkpO1xuXG4gIC8qKlxuICAgKiBjb25uZWN0VXNlciAtIFNldCB0aGUgY3VycmVudCB1c2VyIGFuZCBvcGVuIGEgV2ViU29ja2V0IGNvbm5lY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHVzZXIgRGF0YSBhYm91dCB0aGlzIHVzZXIuIElFIHtuYW1lOiBcImpvaG5cIn1cbiAgICogQHBhcmFtIHtUb2tlbk9yUHJvdmlkZXJ9IHVzZXJUb2tlbk9yUHJvdmlkZXIgVG9rZW4gb3IgcHJvdmlkZXJcbiAgICpcbiAgICogQHJldHVybiB7Q29ubmVjdEFQSVJlc3BvbnNlfSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgc2V0dXBcbiAgICovXG4gIGNvbm5lY3RVc2VyID0gYXN5bmMgKFxuICAgIHVzZXI6IFVzZXJXaXRoSWQsXG4gICAgdXNlclRva2VuT3JQcm92aWRlcjogVG9rZW5PclByb3ZpZGVyLFxuICApID0+IHtcbiAgICBpZiAoIXVzZXIuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwiaWRcIiBmaWVsZCBvbiB0aGUgdXNlciBpcyBtaXNzaW5nJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGluZyBjb25uZWN0VXNlciBtdWx0aXBsZSB0aW1lcyBpcyBwb3RlbnRpYWxseSB0aGUgcmVzdWx0IG9mIGEgIGJhZCBpbnRlZ3JhdGlvbiwgaG93ZXZlcixcbiAgICAgKiBJZiB0aGUgdXNlciBpZCByZW1haW5zIHRoZSBzYW1lIHdlIGRvbid0IHRocm93IGVycm9yXG4gICAgICovXG4gICAgaWYgKHRoaXMudXNlcklEID09PSB1c2VyLmlkICYmIHRoaXMuc2V0VXNlclByb21pc2UpIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnd2FybicsXG4gICAgICAgICdDb25zZWN1dGl2ZSBjYWxscyB0byBjb25uZWN0VXNlciBpcyBkZXRlY3RlZCwgaWRlYWxseSB5b3Ugc2hvdWxkIG9ubHkgY2FsbCB0aGlzIGZ1bmN0aW9uIG9uY2UgaW4geW91ciBhcHAuJyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5zZXRVc2VyUHJvbWlzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51c2VySUQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VzZSBjbGllbnQuZGlzY29ubmVjdCgpIGJlZm9yZSB0cnlpbmcgdG8gY29ubmVjdCBhcyBhIGRpZmZlcmVudCB1c2VyLiBjb25uZWN0VXNlciB3YXMgY2FsbGVkIHR3aWNlLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICh0aGlzLl9pc1VzaW5nU2VydmVyQXV0aCgpIHx8IHRoaXMubm9kZSkgJiZcbiAgICAgICF0aGlzLm9wdGlvbnMuYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdFxuICAgICkge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICd3YXJuJyxcbiAgICAgICAgJ1BsZWFzZSBkbyBub3QgdXNlIGNvbm5lY3RVc2VyIHNlcnZlciBzaWRlLiBjb25uZWN0VXNlciBpbXBhY3RzIE1BVSBhbmQgY29uY3VycmVudCBjb25uZWN0aW9uIHVzYWdlIGFuZCB0aHVzIHlvdXIgYmlsbC4gSWYgeW91IGhhdmUgYSB2YWxpZCB1c2UtY2FzZSwgYWRkIFwiYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdDogdHJ1ZVwiIHRvIHRoZSBjbGllbnQgb3B0aW9ucyB0byBkaXNhYmxlIHRoaXMgd2FybmluZy4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyB3ZSBnZW5lcmF0ZSB0aGUgY2xpZW50IGlkIGNsaWVudCBzaWRlXG4gICAgdGhpcy51c2VySUQgPSB1c2VyLmlkO1xuICAgIHRoaXMuYW5vbnltb3VzID0gZmFsc2U7XG5cbiAgICBjb25zdCBzZXRUb2tlblByb21pc2UgPSB0aGlzLl9zZXRUb2tlbihcbiAgICAgIHVzZXIsXG4gICAgICB1c2VyVG9rZW5PclByb3ZpZGVyLFxuICAgICAgdGhpcy5hbm9ueW1vdXMsXG4gICAgKTtcbiAgICB0aGlzLl9zZXRVc2VyKHVzZXIpO1xuXG4gICAgY29uc3Qgd3NQcm9taXNlID0gdGhpcy5vcGVuQ29ubmVjdGlvbigpO1xuXG4gICAgdGhpcy5zZXRVc2VyUHJvbWlzZSA9IFByb21pc2UuYWxsKFtzZXRUb2tlblByb21pc2UsIHdzUHJvbWlzZV0pLnRoZW4oXG4gICAgICAocmVzdWx0KSA9PiByZXN1bHRbMV0sIC8vIFdlIG9ubHkgcmV0dXJuIGNvbm5lY3Rpb24gcHJvbWlzZTtcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGFkZENvbm5lY3Rpb25FdmVudExpc3RlbmVycyh0aGlzLnVwZGF0ZU5ldHdvcmtDb25uZWN0aW9uU3RhdHVzKTtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNldFVzZXJQcm9taXNlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHRoaXMucGVyc2lzdFVzZXJPbkNvbm5lY3Rpb25GYWlsdXJlKSB7XG4gICAgICAgIC8vIGNsZWFudXAgY2xpZW50IHRvIGFsbG93IHRoZSB1c2VyIHRvIHJldHJ5IGNvbm5lY3RVc2VyIGFnYWluXG4gICAgICAgIHRoaXMuY2xvc2VDb25uZWN0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RVc2VyKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRUb2tlbiA9IChcbiAgICB1c2VyOiBVc2VyV2l0aElkLFxuICAgIHVzZXJUb2tlbk9yUHJvdmlkZXI6IFRva2VuT3JQcm92aWRlcixcbiAgICBpc0Fub255bW91czogYm9vbGVhbixcbiAgKSA9PlxuICAgIHRoaXMudG9rZW5NYW5hZ2VyLnNldFRva2VuT3JQcm92aWRlcihcbiAgICAgIHVzZXJUb2tlbk9yUHJvdmlkZXIsXG4gICAgICB1c2VyLFxuICAgICAgaXNBbm9ueW1vdXMsXG4gICAgKTtcblxuICBfc2V0VXNlciA9ICh1c2VyOiBVc2VyV2l0aElkKSA9PiB7XG4gICAgLyoqXG4gICAgICogVGhpcyBvbmUgaXMgdXNlZCBieSB0aGUgZnJvbnRlbmQuIFRoaXMgaXMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IHVzZXIgb2JqZWN0IHN0b3JlZCBvbiBiYWNrZW5kLlxuICAgICAqIEl0IGNvbnRhaW5zIHJlc2VydmVkIHByb3BlcnRpZXMgYW5kIG93biB1c2VyIHByb3BlcnRpZXMgd2hpY2ggYXJlIG5vdCBwcmVzZW50IGluIGB0aGlzLl91c2VyYC5cbiAgICAgKi9cbiAgICB0aGlzLnVzZXIgPSB1c2VyO1xuICAgIHRoaXMudXNlcklEID0gdXNlci5pZDtcbiAgICAvLyB0aGlzIG9uZSBpcyBhY3R1YWxseSB1c2VkIGZvciByZXF1ZXN0cy4gVGhpcyBpcyBhIGNvcHkgb2YgY3VycmVudCB1c2VyIHByb3ZpZGVkIHRvIGBjb25uZWN0VXNlcmAgZnVuY3Rpb24uXG4gICAgdGhpcy5fdXNlciA9IHsgLi4udXNlciB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb24sIHdpdGhvdXQgcmVtb3ZpbmcgdGhlIHVzZXIgc2V0IG9uIGNsaWVudC5cbiAgICogY2xpZW50LmNsb3NlQ29ubmVjdGlvbiB3aWxsIG5vdCB0cmlnZ2VyIGRlZmF1bHQgYXV0by1yZXRyeSBtZWNoYW5pc20gZm9yIHJlY29ubmVjdGlvbi4gWW91IG5lZWRcbiAgICogdG8gY2FsbCBjbGllbnQub3BlbkNvbm5lY3Rpb24gdG8gcmVjb25uZWN0IHRvIHdlYnNvY2tldC5cbiAgICpcbiAgICogVGhpcyBpcyBtYWlubHkgdXNlZnVsIG9uIG1vYmlsZSBzaWRlLiBZb3UgY2FuIG9ubHkgcmVjZWl2ZSBwdXNoIG5vdGlmaWNhdGlvbnNcbiAgICogaWYgeW91IGRvbid0IGhhdmUgYWN0aXZlIHdlYnNvY2tldCBjb25uZWN0aW9uLlxuICAgKiBTbyB3aGVuIHlvdXIgYXBwIGdvZXMgdG8gYmFja2dyb3VuZCwgeW91IGNhbiBjYWxsIGBjbGllbnQuY2xvc2VDb25uZWN0aW9uYC5cbiAgICogQW5kIHdoZW4gYXBwIGNvbWVzIGJhY2sgdG8gZm9yZWdyb3VuZCwgY2FsbCBgY2xpZW50Lm9wZW5Db25uZWN0aW9uYC5cbiAgICpcbiAgICogQHBhcmFtIHRpbWVvdXQgTWF4IG51bWJlciBvZiBtcywgdG8gd2FpdCBmb3IgY2xvc2UgZXZlbnQgb2Ygd2Vic29ja2V0LCBiZWZvcmUgZm9yY2VmdWxseSBhc3N1bWluZyBzdWNjZXNmdWwgZGlzY29ubmVjdGlvbi5cbiAgICogICAgICAgICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Nsb3NlRXZlbnRcbiAgICovXG4gIGNsb3NlQ29ubmVjdGlvbiA9IGFzeW5jICh0aW1lb3V0PzogbnVtYmVyKSA9PiB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy53c0Nvbm5lY3Rpb24/LmRpc2Nvbm5lY3QodGltZW91dCksXG4gICAgICB0aGlzLndzRmFsbGJhY2s/LmRpc2Nvbm5lY3QodGltZW91dCksXG4gICAgXSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFdlYlNvY2tldCBjb25uZWN0aW9uIHdpdGggdGhlIGN1cnJlbnQgdXNlci4gUmV0dXJucyBlbXB0eSBwcm9taXNlLCBpZiB0aGVyZSBpcyBhbiBhY3RpdmUgY29ubmVjdGlvblxuICAgKi9cbiAgb3BlbkNvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnVzZXJJRCkge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICdVc2VyV2l0aElkIGlzIG5vdCBzZXQgb24gY2xpZW50LCB1c2UgY2xpZW50LmNvbm5lY3RVc2VyIG9yIGNsaWVudC5jb25uZWN0QW5vbnltb3VzVXNlciBpbnN0ZWFkJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud3NDb25uZWN0aW9uPy5pc0Nvbm5lY3RpbmcgJiYgdGhpcy53c1Byb21pc2UpIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgICdjbGllbnQ6b3BlbkNvbm5lY3Rpb24oKSAtIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcycsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMud3NQcm9taXNlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICh0aGlzLndzQ29ubmVjdGlvbj8uaXNIZWFsdGh5IHx8IHRoaXMud3NGYWxsYmFjaz8uaXNIZWFsdGh5KCkpICYmXG4gICAgICB0aGlzLl9oYXNDb25uZWN0aW9uSUQoKVxuICAgICkge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgJ2NsaWVudDpvcGVuQ29ubmVjdGlvbigpIC0gb3BlbkNvbm5lY3Rpb24gY2FsbGVkIHR3aWNlLCBoZWFsdGh5IGNvbm5lY3Rpb24gYWxyZWFkeSBleGlzdHMnLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3NldHVwQ29ubmVjdGlvbklkUHJvbWlzZSgpO1xuXG4gICAgdGhpcy5jbGllbnRJRCA9IGAke3RoaXMudXNlcklEfS0tJHtyYW5kb21JZCgpfWA7XG4gICAgdGhpcy53c1Byb21pc2UgPSB0aGlzLmNvbm5lY3QoKTtcbiAgICByZXR1cm4gdGhpcy53c1Byb21pc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSB3ZWJzb2NrZXQgYW5kIHJlbW92ZXMgdGhlIHVzZXIgZnJvbSBjbGllbnQuXG4gICAqXG4gICAqIEBwYXJhbSB0aW1lb3V0IE1heCBudW1iZXIgb2YgbXMsIHRvIHdhaXQgZm9yIGNsb3NlIGV2ZW50IG9mIHdlYnNvY2tldCwgYmVmb3JlIGZvcmNlZnVsbHkgYXNzdW1pbmcgc3VjY2Vzc2Z1bCBkaXNjb25uZWN0aW9uLlxuICAgKiAgICAgICAgICAgICAgICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2xvc2VFdmVudFxuICAgKi9cbiAgZGlzY29ubmVjdFVzZXIgPSBhc3luYyAodGltZW91dD86IG51bWJlcikgPT4ge1xuICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgJ2NsaWVudDpkaXNjb25uZWN0KCkgLSBEaXNjb25uZWN0aW5nIHRoZSBjbGllbnQnKTtcblxuICAgIC8vIHJlbW92ZSB0aGUgdXNlciBzcGVjaWZpYyBmaWVsZHNcbiAgICBkZWxldGUgdGhpcy51c2VyO1xuICAgIGRlbGV0ZSB0aGlzLl91c2VyO1xuICAgIGRlbGV0ZSB0aGlzLnVzZXJJRDtcblxuICAgIHRoaXMuYW5vbnltb3VzID0gZmFsc2U7XG5cbiAgICBhd2FpdCB0aGlzLmNsb3NlQ29ubmVjdGlvbih0aW1lb3V0KTtcbiAgICByZW1vdmVDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnModGhpcy51cGRhdGVOZXR3b3JrQ29ubmVjdGlvblN0YXR1cyk7XG5cbiAgICB0aGlzLnRva2VuTWFuYWdlci5yZXNldCgpO1xuXG4gICAgdGhpcy5jb25uZWN0aW9uSWRQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVqZWN0Q29ubmVjdGlvbklkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb25JZCA9IHVuZGVmaW5lZDtcbiAgfTtcblxuICBjb25uZWN0R3Vlc3RVc2VyID0gYXN5bmMgKHVzZXI6IFVzZXIgJiB7IHR5cGU6ICdndWVzdCcgfSkgPT4ge1xuICAgIHRoaXMuZ3Vlc3RVc2VyQ3JlYXRlUHJvbWlzZSA9IHRoaXMuZG9BeGlvc1JlcXVlc3Q8XG4gICAgICBDcmVhdGVHdWVzdFJlc3BvbnNlLFxuICAgICAgQ3JlYXRlR3Vlc3RSZXF1ZXN0XG4gICAgPihcbiAgICAgICdwb3N0JyxcbiAgICAgICcvZ3Vlc3QnLFxuICAgICAge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHB1YmxpY0VuZHBvaW50OiB0cnVlIH0sXG4gICAgKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5ndWVzdFVzZXJDcmVhdGVQcm9taXNlO1xuICAgIHRoaXMuZ3Vlc3RVc2VyQ3JlYXRlUHJvbWlzZS5maW5hbGx5KFxuICAgICAgKCkgPT4gKHRoaXMuZ3Vlc3RVc2VyQ3JlYXRlUHJvbWlzZSA9IHVuZGVmaW5lZCksXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLmNvbm5lY3RVc2VyKHJlc3BvbnNlLnVzZXIsIHJlc3BvbnNlLmFjY2Vzc190b2tlbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIGNvbm5lY3RBbm9ueW1vdXNVc2VyIC0gU2V0IGFuIGFub255bW91cyB1c2VyIGFuZCBvcGVuIGEgV2ViU29ja2V0IGNvbm5lY3Rpb25cbiAgICovXG4gIGNvbm5lY3RBbm9ueW1vdXNVc2VyID0gYXN5bmMgKFxuICAgIHVzZXI6IFVzZXJXaXRoSWQsXG4gICAgdG9rZW5PclByb3ZpZGVyOiBUb2tlbk9yUHJvdmlkZXIsXG4gICkgPT4ge1xuICAgIGFkZENvbm5lY3Rpb25FdmVudExpc3RlbmVycyh0aGlzLnVwZGF0ZU5ldHdvcmtDb25uZWN0aW9uU3RhdHVzKTtcbiAgICB0aGlzLl9zZXR1cENvbm5lY3Rpb25JZFByb21pc2UoKTtcblxuICAgIHRoaXMuYW5vbnltb3VzID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLl9zZXRUb2tlbih1c2VyLCB0b2tlbk9yUHJvdmlkZXIsIHRoaXMuYW5vbnltb3VzKTtcblxuICAgIHRoaXMuX3NldFVzZXIodXNlcik7XG4gICAgLy8gc29tZSBlbmRwb2ludHMgcmVxdWlyZSBhIGNvbm5lY3Rpb25faWQgdG8gYmUgcmVzb2x2ZWQuXG4gICAgLy8gYXMgYW5vbnltb3VzIHVzZXJzIGFyZW4ndCBhbGxvd2VkIHRvIG9wZW4gV1MgY29ubmVjdGlvbnMsIHdlIGp1c3RcbiAgICAvLyByZXNvbHZlIHRoZSBjb25uZWN0aW9uX2lkIGhlcmUuXG4gICAgdGhpcy5yZXNvbHZlQ29ubmVjdGlvbklkPy4oKTtcbiAgfTtcblxuICAvKipcbiAgICogb24gLSBMaXN0ZW4gdG8gZXZlbnRzIG9uIGFsbCBjaGFubmVscyBhbmQgdXNlcnMgeW91ciB3YXRjaGluZ1xuICAgKlxuICAgKiBjbGllbnQub24oJ21lc3NhZ2UubmV3JywgZXZlbnQgPT4ge2NvbnNvbGUubG9nKFwibXkgbmV3IG1lc3NhZ2VcIiwgZXZlbnQsIGNoYW5uZWwuc3RhdGUubWVzc2FnZXMpfSlcbiAgICpcbiAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgZXZlbnQgdHlwZSB0byBsaXN0ZW4gZm9yIChvcHRpb25hbClcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBjYWxsXG4gICAqXG4gICAqIEByZXR1cm4gIFJldHVybnMgYSBmdW5jdGlvbiB3aGljaCwgd2hlbiBjYWxsZWQsIHVuc3Vic2NyaWJlcyB0aGUgZXZlbnQgaGFuZGxlci5cbiAgICovXG4gIG9uID0gPEUgZXh0ZW5kcyBrZXlvZiBBbGxDbGllbnRFdmVudHM+KFxuICAgIGV2ZW50TmFtZTogRSxcbiAgICBjYWxsYmFjazogQ2xpZW50RXZlbnRMaXN0ZW5lcjxFPixcbiAgKSA9PiB7XG4gICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdID0gW107XG4gICAgfVxuXG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgYEFkZGluZyBsaXN0ZW5lciBmb3IgJHtldmVudE5hbWV9IGV2ZW50YCk7XG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXT8ucHVzaChjYWxsYmFjayBhcyBDbGllbnRFdmVudExpc3RlbmVyPGFueT4pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLm9mZihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBvZmYgLSBSZW1vdmUgdGhlIGV2ZW50IGhhbmRsZXJcbiAgICovXG4gIG9mZiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsQ2xpZW50RXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgY2FsbGJhY2s6IENsaWVudEV2ZW50TGlzdGVuZXI8RT4sXG4gICkgPT4ge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBSZW1vdmluZyBsaXN0ZW5lciBmb3IgJHtldmVudE5hbWV9IGV2ZW50YCk7XG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSA9IHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0/LmZpbHRlcihcbiAgICAgICh2YWx1ZSkgPT4gdmFsdWUgIT09IGNhbGxiYWNrLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIHNldHMgdXAgdGhlIHRoaXMuY29ubmVjdGlvbklkUHJvbWlzZVxuICAgKi9cbiAgX3NldHVwQ29ubmVjdGlvbklkUHJvbWlzZSA9IGFzeW5jICgpID0+IHtcbiAgICAvKiogYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSBjb25uZWN0aW9uIGlkIGlzIHNldCAqL1xuICAgIHRoaXMuY29ubmVjdGlvbklkUHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4oXG4gICAgICAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb25JZCA9IHJlc29sdmU7XG4gICAgICAgIHRoaXMucmVqZWN0Q29ubmVjdGlvbklkID0gcmVqZWN0O1xuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIF9sb2dBcGlSZXF1ZXN0ID0gKFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICB1cmw6IHN0cmluZyxcbiAgICBkYXRhOiB1bmtub3duLFxuICAgIGNvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnICYge1xuICAgICAgY29uZmlnPzogQXhpb3NSZXF1ZXN0Q29uZmlnICYgeyBtYXhCb2R5TGVuZ3RoPzogbnVtYmVyIH07XG4gICAgfSxcbiAgKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ3RyYWNlJywgYGNsaWVudDogJHt0eXBlfSAtIFJlcXVlc3QgLSAke3VybH1gLCB7XG4gICAgICBwYXlsb2FkOiBkYXRhLFxuICAgICAgY29uZmlnLFxuICAgIH0pO1xuICB9O1xuXG4gIF9sb2dBcGlSZXNwb25zZSA9IDxUPihcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8VD4sXG4gICkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKFxuICAgICAgJ3RyYWNlJyxcbiAgICAgIGBjbGllbnQ6JHt0eXBlfSAtIFJlc3BvbnNlIC0gdXJsOiAke3VybH0gPiBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YCxcbiAgICAgIHtcbiAgICAgICAgcmVzcG9uc2UsXG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgX2xvZ0FwaUVycm9yID0gKHR5cGU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYGNsaWVudDoke3R5cGV9IC0gRXJyb3IgLSB1cmw6ICR7dXJsfWAsIHtcbiAgICAgIHVybCxcbiAgICAgIGVycm9yLFxuICAgIH0pO1xuICB9O1xuXG4gIGRvQXhpb3NSZXF1ZXN0ID0gYXN5bmMgPFQsIEQgPSB1bmtub3duPihcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZGF0YT86IEQsXG4gICAgb3B0aW9uczogQXhpb3NSZXF1ZXN0Q29uZmlnICYge1xuICAgICAgY29uZmlnPzogQXhpb3NSZXF1ZXN0Q29uZmlnICYgeyBtYXhCb2R5TGVuZ3RoPzogbnVtYmVyIH07XG4gICAgfSAmIHsgcHVibGljRW5kcG9pbnQ/OiBib29sZWFuIH0gPSB7fSxcbiAgKTogUHJvbWlzZTxUPiA9PiB7XG4gICAgaWYgKCFvcHRpb25zLnB1YmxpY0VuZHBvaW50KSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMudG9rZW5NYW5hZ2VyLnRva2VuUmVhZHkoKSxcbiAgICAgICAgdGhpcy5ndWVzdFVzZXJDcmVhdGVQcm9taXNlLFxuICAgICAgXSk7XG4gICAgICAvLyB3ZSBuZWVkIHRvIHdhaXQgZm9yIHByZXNlbmNlIG9mIGNvbm5lY3Rpb24gaWQgYmVmb3JlIG1ha2luZyByZXF1ZXN0c1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uSWRQcm9taXNlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpbiBjYXNlIGNvbm5lY3Rpb24gaWQgd2FzIHJlamVjdGVkXG4gICAgICAgIC8vIHJlY29ubmVjdGlvbiBtYXliZSBpbiBwcm9ncmVzc1xuICAgICAgICAvLyB3ZSBjYW4gd2FpdCBmb3IgaGVhbHRoeSBjb25uZWN0aW9uIHRvIHJlc29sdmUsIHdoaWNoIHJlamVjdHMgd2hlbiAxNXMgdGltZW91dCBpcyByZWFjaGVkXG4gICAgICAgIGF3YWl0IHRoaXMud3NDb25uZWN0aW9uPy5fd2FpdEZvckhlYWx0aHkoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uSWRQcm9taXNlO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0Q29uZmlnID0gdGhpcy5fZW5yaWNoQXhpb3NPcHRpb25zKG9wdGlvbnMpO1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8VD47XG4gICAgICB0aGlzLl9sb2dBcGlSZXF1ZXN0KHR5cGUsIHVybCwgZGF0YSwgcmVxdWVzdENvbmZpZyk7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnZ2V0JzpcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXhpb3NJbnN0YW5jZS5nZXQodXJsLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXhpb3NJbnN0YW5jZS5kZWxldGUodXJsLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncG9zdCc6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UucG9zdCh1cmwsIGRhdGEsIHJlcXVlc3RDb25maWcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwdXQnOlxuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvc0luc3RhbmNlLnB1dCh1cmwsIGRhdGEsIHJlcXVlc3RDb25maWcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwYXRjaCc6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UucGF0Y2godXJsLCBkYXRhLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb3B0aW9ucyc6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2Uub3B0aW9ucyh1cmwsIHJlcXVlc3RDb25maWcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXF1ZXN0IHR5cGUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xvZ0FwaVJlc3BvbnNlPFQ+KHR5cGUsIHVybCwgcmVzcG9uc2UpO1xuICAgICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzID0gMDtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgfSBjYXRjaCAoZTogYW55IC8qKlRPRE86IGdlbmVyYWxpemUgZXJyb3IgdHlwZXMgICovKSB7XG4gICAgICBlLmNsaWVudF9yZXF1ZXN0X2lkID0gcmVxdWVzdENvbmZpZy5oZWFkZXJzPy5bJ3gtY2xpZW50LXJlcXVlc3QtaWQnXTtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyArPSAxO1xuICAgICAgaWYgKGUucmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5fbG9nQXBpRXJyb3IodHlwZSwgdXJsLCBlLnJlc3BvbnNlKTtcbiAgICAgICAgLyoqIGNvbm5lY3Rpb25fZmFsbGJhY2sgZGVwZW5kcyBvbiB0aGlzIHRva2VuIGV4cGlyYXRpb24gbG9naWMgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGUucmVzcG9uc2UuZGF0YS5jb2RlID09PSBLbm93bkNvZGVzLlRPS0VOX0VYUElSRUQgJiZcbiAgICAgICAgICAhdGhpcy50b2tlbk1hbmFnZXIuaXNTdGF0aWMoKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzID4gMSkge1xuICAgICAgICAgICAgYXdhaXQgc2xlZXAocmV0cnlJbnRlcnZhbCh0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy50b2tlbk1hbmFnZXIubG9hZFRva2VuKCk7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZG9BeGlvc1JlcXVlc3Q8VCwgRD4odHlwZSwgdXJsLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVSZXNwb25zZShlLnJlc3BvbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xvZ0FwaUVycm9yKHR5cGUsIHVybCwgZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsXG4gICAgICAgIHRocm93IGUgYXMgQXhpb3NFcnJvcjxBUElFcnJvclJlc3BvbnNlPjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZ2V0ID0gPFQ+KHVybDogc3RyaW5nLCBwYXJhbXM/OiBBeGlvc1JlcXVlc3RDb25maWdbJ3BhcmFtcyddKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZG9BeGlvc1JlcXVlc3Q8VCwgdW5rbm93bj4oJ2dldCcsIHVybCwgbnVsbCwge1xuICAgICAgcGFyYW1zLFxuICAgIH0pO1xuICB9O1xuXG4gIHB1dCA9IDxULCBEID0gdW5rbm93bj4oXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZGF0YT86IEQsXG4gICAgcGFyYW1zPzogQXhpb3NSZXF1ZXN0Q29uZmlnWydwYXJhbXMnXSxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZG9BeGlvc1JlcXVlc3Q8VCwgRD4oJ3B1dCcsIHVybCwgZGF0YSwgeyBwYXJhbXMgfSk7XG4gIH07XG5cbiAgcG9zdCA9IDxULCBEID0gdW5rbm93bj4oXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZGF0YT86IEQsXG4gICAgcGFyYW1zPzogQXhpb3NSZXF1ZXN0Q29uZmlnWydwYXJhbXMnXSxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZG9BeGlvc1JlcXVlc3Q8VCwgRD4oJ3Bvc3QnLCB1cmwsIGRhdGEsIHsgcGFyYW1zIH0pO1xuICB9O1xuXG4gIHBhdGNoID0gPFQsIEQgPSB1bmtub3duPihcbiAgICB1cmw6IHN0cmluZyxcbiAgICBkYXRhPzogRCxcbiAgICBwYXJhbXM/OiBBeGlvc1JlcXVlc3RDb25maWdbJ3BhcmFtcyddLFxuICApID0+IHtcbiAgICByZXR1cm4gdGhpcy5kb0F4aW9zUmVxdWVzdDxULCBEPigncGF0Y2gnLCB1cmwsIGRhdGEsIHsgcGFyYW1zIH0pO1xuICB9O1xuXG4gIGRlbGV0ZSA9IDxUPih1cmw6IHN0cmluZywgcGFyYW1zPzogQXhpb3NSZXF1ZXN0Q29uZmlnWydwYXJhbXMnXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLmRvQXhpb3NSZXF1ZXN0PFQsIHVua25vd24+KCdkZWxldGUnLCB1cmwsIG51bGwsIHtcbiAgICAgIHBhcmFtcyxcbiAgICB9KTtcbiAgfTtcblxuICBlcnJvckZyb21SZXNwb25zZSA9IChcbiAgICByZXNwb25zZTogQXhpb3NSZXNwb25zZTxBUElFcnJvclJlc3BvbnNlPixcbiAgKTogRXJyb3JGcm9tUmVzcG9uc2U8QVBJRXJyb3JSZXNwb25zZT4gPT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgc3RhdHVzIH0gPSByZXNwb25zZTtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3JGcm9tUmVzcG9uc2U8QVBJRXJyb3JSZXNwb25zZT4oKTtcbiAgICBlcnIubWVzc2FnZSA9IGBTdHJlYW0gZXJyb3IgY29kZSAke2RhdGEuY29kZX06ICR7ZGF0YS5tZXNzYWdlfWA7XG4gICAgZXJyLmNvZGUgPSBkYXRhLmNvZGU7XG4gICAgZXJyLnVucmVjb3ZlcmFibGUgPSBkYXRhLnVucmVjb3ZlcmFibGU7XG4gICAgZXJyLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgZXJyLnN0YXR1cyA9IHN0YXR1cztcbiAgICByZXR1cm4gZXJyO1xuICB9O1xuXG4gIGhhbmRsZVJlc3BvbnNlID0gPFQ+KHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlPFQ+KSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgaWYgKGlzRXJyb3JSZXNwb25zZShyZXNwb25zZSkpIHtcbiAgICAgIHRocm93IHRoaXMuZXJyb3JGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBkaXNwYXRjaEV2ZW50ID0gKGV2ZW50OiBTdHJlYW1WaWRlb0V2ZW50KSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgYERpc3BhdGNoaW5nIGV2ZW50OiAke2V2ZW50LnR5cGV9YCwgZXZlbnQpO1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnMpIHJldHVybjtcblxuICAgIC8vIGNhbGwgZ2VuZXJpYyBsaXN0ZW5lcnNcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzLmFsbCB8fCBbXSkge1xuICAgICAgbGlzdGVuZXIoZXZlbnQpO1xuICAgIH1cblxuICAgIC8vIGNhbGwgdHlwZSBzcGVjaWZpYyBsaXN0ZW5lcnNcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzW2V2ZW50LnR5cGVdIHx8IFtdKSB7XG4gICAgICBsaXN0ZW5lcihldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29ubmVjdCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXRoaXMudXNlcklEIHx8ICF0aGlzLl91c2VyKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgJ0NhbGwgY29ubmVjdFVzZXIgb3IgY29ubmVjdEFub255bW91c1VzZXIgYmVmb3JlIHN0YXJ0aW5nIHRoZSBjb25uZWN0aW9uJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghdGhpcy53c0Jhc2VVUkwpIHtcbiAgICAgIHRocm93IEVycm9yKCdXZWJzb2NrZXQgYmFzZSB1cmwgbm90IHNldCcpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuY2xpZW50SUQpIHtcbiAgICAgIHRocm93IEVycm9yKCdjbGllbnRJRCBpcyBub3Qgc2V0Jyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgIXRoaXMud3NDb25uZWN0aW9uICYmXG4gICAgICAodGhpcy5vcHRpb25zLndhcm1VcCB8fCB0aGlzLm9wdGlvbnMuZW5hYmxlSW5zaWdodHMpXG4gICAgKSB7XG4gICAgICB0aGlzLl9zYXlIaSgpO1xuICAgIH1cbiAgICAvLyBUaGUgU3RhYmxlV1NDb25uZWN0aW9uIGhhbmRsZXMgYWxsIHRoZSByZWNvbm5lY3Rpb24gbG9naWMuXG4gICAgaWYgKHRoaXMub3B0aW9ucy53c0Nvbm5lY3Rpb24gJiYgdGhpcy5ub2RlKSB7XG4gICAgICAvLyBJbnRlbnRpb25hbGx5IGF2b2lkaW5nIGFkZGluZyB0cyBnZW5lcmljcyBvbiB3c0Nvbm5lY3Rpb24gaW4gb3B0aW9ucyBzaW5jZSBpdHMgb25seSB1c2VmdWwgZm9yIHVuaXQgdGVzdCBwdXJwb3NlLlxuICAgICAgKHRoaXMub3B0aW9ucy53c0Nvbm5lY3Rpb24gYXMgdW5rbm93biBhcyBTdGFibGVXU0Nvbm5lY3Rpb24pLnNldENsaWVudChcbiAgICAgICAgdGhpcyxcbiAgICAgICk7XG4gICAgICB0aGlzLndzQ29ubmVjdGlvbiA9IHRoaXMub3B0aW9uc1xuICAgICAgICAud3NDb25uZWN0aW9uIGFzIHVua25vd24gYXMgU3RhYmxlV1NDb25uZWN0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLndzQ29ubmVjdGlvbiA9IG5ldyBTdGFibGVXU0Nvbm5lY3Rpb24odGhpcyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIGlmIGZhbGxiYWNrIGlzIHVzZWQgYmVmb3JlLCBjb250aW51ZSB1c2luZyBpdCBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIFdTIHRvIGZhaWxcbiAgICAgIGlmICh0aGlzLndzRmFsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud3NGYWxsYmFjay5jb25uZWN0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmxvZ2dlcignaW5mbycsICdTdHJlYW1DbGllbnQuY29ubmVjdDogdGhpcy53c0Nvbm5lY3Rpb24uY29ubmVjdCgpJyk7XG4gICAgICAvLyBpZiBXU0ZhbGxiYWNrIGlzIGVuYWJsZWQsIHdzIGNvbm5lY3Qgc2hvdWxkIHRpbWVvdXQgZmFzdGVyIHNvIGZhbGxiYWNrIGNhbiB0cnlcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLndzQ29ubmVjdGlvbi5jb25uZWN0KFxuICAgICAgICB0aGlzLm9wdGlvbnMuZW5hYmxlV1NGYWxsYmFja1xuICAgICAgICAgID8gdGhpcy5kZWZhdWx0V1NUaW1lb3V0V2l0aEZhbGxiYWNrXG4gICAgICAgICAgOiB0aGlzLmRlZmF1bHRXU1RpbWVvdXQsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gcnVuIGZhbGxiYWNrIG9ubHkgaWYgaXQncyBXUy9OZXR3b3JrIGVycm9yIGFuZCBub3QgYSBub3JtYWwgQVBJIGVycm9yXG4gICAgICAvLyBtYWtlIHN1cmUgYnJvd3NlciBpcyBvbmxpbmUgYmVmb3JlIGV2ZW4gdHJ5aW5nIHRoZSBsb25ncG9sbFxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLm9wdGlvbnMuZW5hYmxlV1NGYWxsYmFjayAmJlxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlzV1NGYWlsdXJlKGVycikgJiZcbiAgICAgICAgaXNPbmxpbmUodGhpcy5sb2dnZXIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICdjbGllbnQ6Y29ubmVjdCgpIC0gV1MgZmFpbGVkLCBmYWxsYmFjayB0byBsb25ncG9sbCcsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7IHR5cGU6ICd0cmFuc3BvcnQuY2hhbmdlZCcsIG1vZGU6ICdsb25ncG9sbCcgfSk7XG5cbiAgICAgICAgdGhpcy53c0Nvbm5lY3Rpb24uX2Rlc3Ryb3lDdXJyZW50V1NDb25uZWN0aW9uKCk7XG4gICAgICAgIHRoaXMud3NDb25uZWN0aW9uLmRpc2Nvbm5lY3QoKS50aGVuKCk7IC8vIGNsb3NlIFdTIHNvIG5vIHJldHJ5XG4gICAgICAgIHRoaXMud3NGYWxsYmFjayA9IG5ldyBXU0Nvbm5lY3Rpb25GYWxsYmFjayh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud3NGYWxsYmFjay5jb25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSBjb25uZWN0aXZpdHkgd2l0aCBzZXJ2ZXIgZm9yIHdhcm11cCBwdXJwb3NlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NheUhpID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsaWVudF9yZXF1ZXN0X2lkID0gcmFuZG9tSWQoKTtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgaGVhZGVyczogQXhpb3NIZWFkZXJzLmZyb20oe1xuICAgICAgICAneC1jbGllbnQtcmVxdWVzdC1pZCc6IGNsaWVudF9yZXF1ZXN0X2lkLFxuICAgICAgfSksXG4gICAgfTtcbiAgICB0aGlzLmRvQXhpb3NSZXF1ZXN0KCdnZXQnLCB0aGlzLmJhc2VVUkwgKyAnL2hpJywgbnVsbCwgb3B0cykuY2F0Y2goKGUpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlSW5zaWdodHMpIHtcbiAgICAgICAgcG9zdEluc2lnaHRzKCdodHRwX2hpX2ZhaWxlZCcsIHtcbiAgICAgICAgICBhcGlfa2V5OiB0aGlzLmtleSxcbiAgICAgICAgICBlcnI6IGUsXG4gICAgICAgICAgY2xpZW50X3JlcXVlc3RfaWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGdldFVzZXJBZ2VudCA9ICgpID0+IHtcbiAgICBjb25zdCB2ZXJzaW9uID0gcHJvY2Vzcy5lbnYuUEtHX1ZFUlNJT04gfHwgJzAuMC4wLWRldmVsb3BtZW50JztcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy51c2VyQWdlbnQgfHxcbiAgICAgIGBzdHJlYW0tdmlkZW8tamF2YXNjcmlwdC1jbGllbnQtJHtcbiAgICAgICAgdGhpcy5ub2RlID8gJ25vZGUnIDogJ2Jyb3dzZXInXG4gICAgICB9LSR7dmVyc2lvbn1gXG4gICAgKTtcbiAgfTtcblxuICBzZXRVc2VyQWdlbnQgPSAodXNlckFnZW50OiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLnVzZXJBZ2VudCA9IHVzZXJBZ2VudDtcbiAgfTtcblxuICAvKipcbiAgICogX2lzVXNpbmdTZXJ2ZXJBdXRoIC0gUmV0dXJucyB0cnVlIGlmIHdlJ3JlIHVzaW5nIHNlcnZlciBzaWRlIGF1dGhcbiAgICovXG4gIF9pc1VzaW5nU2VydmVyQXV0aCA9ICgpID0+ICEhdGhpcy5zZWNyZXQ7XG5cbiAgX2VucmljaEF4aW9zT3B0aW9ucyA9IChcbiAgICBvcHRpb25zOiBBeGlvc1JlcXVlc3RDb25maWcgJiB7IGNvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZyB9ICYge1xuICAgICAgcHVibGljRW5kcG9pbnQ/OiBib29sZWFuO1xuICAgIH0gPSB7XG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICBjb25maWc6IHt9LFxuICAgIH0sXG4gICk6IEF4aW9zUmVxdWVzdENvbmZpZyA9PiB7XG4gICAgY29uc3QgdG9rZW4gPVxuICAgICAgb3B0aW9ucy5wdWJsaWNFbmRwb2ludCAmJiAhdGhpcy51c2VyID8gdW5kZWZpbmVkIDogdGhpcy5fZ2V0VG9rZW4oKTtcbiAgICBjb25zdCBhdXRob3JpemF0aW9uID0gdG9rZW4gPyB7IEF1dGhvcml6YXRpb246IHRva2VuIH0gOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIW9wdGlvbnMuaGVhZGVycz8uWyd4LWNsaWVudC1yZXF1ZXN0LWlkJ10pIHtcbiAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAneC1jbGllbnQtcmVxdWVzdC1pZCc6IHJhbmRvbUlkKCksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgdXNlcl9pZDogdGhpcy51c2VySUQsXG4gICAgICAgIGNvbm5lY3Rpb25faWQ6IHRoaXMuX2dldENvbm5lY3Rpb25JRCgpLFxuICAgICAgICBhcGlfa2V5OiB0aGlzLmtleSxcbiAgICAgICAgLi4ub3B0aW9ucy5wYXJhbXMsXG4gICAgICB9LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi5hdXRob3JpemF0aW9uLFxuICAgICAgICAnc3RyZWFtLWF1dGgtdHlwZSc6XG4gICAgICAgICAgb3B0aW9ucy5wdWJsaWNFbmRwb2ludCAmJiAhdGhpcy51c2VyXG4gICAgICAgICAgICA/ICdhbm9ueW1vdXMnXG4gICAgICAgICAgICA6IHRoaXMuZ2V0QXV0aFR5cGUoKSxcbiAgICAgICAgJ1gtU3RyZWFtLUNsaWVudCc6IHRoaXMuZ2V0VXNlckFnZW50KCksXG4gICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgIH0sXG4gICAgICAuLi5vcHRpb25zLmNvbmZpZyxcbiAgICAgIC4uLnRoaXMub3B0aW9ucy5heGlvc1JlcXVlc3RDb25maWcsXG4gICAgfTtcbiAgfTtcblxuICBfZ2V0VG9rZW4gPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnRva2VuTWFuYWdlcikgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4gdGhpcy50b2tlbk1hbmFnZXIuZ2V0VG9rZW4oKTtcbiAgfTtcblxuICAvKipcbiAgICogZW5jb2RlIHdzIHVybCBwYXlsb2FkXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIGpzb24gc3RyaW5nXG4gICAqL1xuICBfYnVpbGRXU1BheWxvYWQgPSAoY2xpZW50X3JlcXVlc3RfaWQ/OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgdXNlcl9pZDogdGhpcy51c2VySUQsXG4gICAgICB1c2VyX2RldGFpbHM6IHRoaXMuX3VzZXIsXG4gICAgICBjbGllbnRfcmVxdWVzdF9pZCxcbiAgICB9KTtcbiAgfTtcblxuICB1cGRhdGVOZXR3b3JrQ29ubmVjdGlvblN0YXR1cyA9IChcbiAgICBldmVudDogeyB0eXBlOiAnb25saW5lJyB8ICdvZmZsaW5lJyB9IHwgRXZlbnQsXG4gICkgPT4ge1xuICAgIGlmIChldmVudC50eXBlID09PSAnb2ZmbGluZScpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdkZXZpY2Ugd2VudCBvZmZsaW5lJyk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnbmV0d29yay5jaGFuZ2VkJywgb25saW5lOiBmYWxzZSB9KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09ICdvbmxpbmUnKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnZGV2aWNlIHdlbnQgb25saW5lJyk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnbmV0d29yay5jaGFuZ2VkJywgb25saW5lOiB0cnVlIH0pO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IENhbGwgfSBmcm9tICcuL0NhbGwnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL2NsaWVudCc7XG5pbXBvcnQge1xuICBTdHJlYW1WaWRlb1JlYWRPbmx5U3RhdGVTdG9yZSxcbiAgU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlLFxufSBmcm9tICcuL3N0b3JlJztcbmltcG9ydCB0eXBlIHtcbiAgQ29ubmVjdGVkRXZlbnQsXG4gIENyZWF0ZURldmljZVJlcXVlc3QsXG4gIENyZWF0ZUd1ZXN0UmVxdWVzdCxcbiAgQ3JlYXRlR3Vlc3RSZXNwb25zZSxcbiAgR2V0RWRnZXNSZXNwb25zZSxcbiAgTGlzdERldmljZXNSZXNwb25zZSxcbiAgUXVlcnlDYWxsc1JlcXVlc3QsXG4gIFF1ZXJ5Q2FsbHNSZXNwb25zZSxcbiAgUXVlcnlDYWxsU3RhdHNSZXF1ZXN0LFxuICBRdWVyeUNhbGxTdGF0c1Jlc3BvbnNlLFxufSBmcm9tICcuL2dlbi9jb29yZGluYXRvcic7XG5pbXBvcnQge1xuICBBbGxDbGllbnRFdmVudHMsXG4gIENsaWVudEV2ZW50TGlzdGVuZXIsXG4gIExvZ2dlcixcbiAgTG9nTGV2ZWwsXG4gIFN0cmVhbUNsaWVudE9wdGlvbnMsXG4gIFRva2VuT3JQcm92aWRlcixcbiAgVG9rZW5Qcm92aWRlcixcbiAgVXNlcixcbiAgVXNlcldpdGhJZCxcbn0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL3R5cGVzJztcbmltcG9ydCB7IGdldExvZ2dlciwgbG9nVG9Db25zb2xlLCBzZXRMb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBnZXRTZGtJbmZvIH0gZnJvbSAnLi9jbGllbnQtZGV0YWlscyc7XG5pbXBvcnQgeyBTZGtUeXBlIH0gZnJvbSAnLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuXG4vKipcbiAqIEEgYFN0cmVhbVZpZGVvQ2xpZW50YCBpbnN0YW5jZSBsZXRzIHlvdSBjb21tdW5pY2F0ZSB3aXRoIG91ciBBUEksIGFuZCBhdXRoZW50aWNhdGUgdXNlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW1WaWRlb0NsaWVudCB7XG4gIC8qKlxuICAgKiBBIHJlYWN0aXZlIHN0b3JlIHRoYXQgZXhwb3NlcyBhbGwgdGhlIHN0YXRlIHZhcmlhYmxlcyByZWFjdGl2ZWx5LlxuICAgKiBZb3UgY2FuIHN1YnNjcmliZSB0byBjaGFuZ2VzIG9mIHRoZSBkaWZmZXJlbnQgc3RhdGUgdmFyaWFibGVzLlxuICAgKiBPdXIgbGlicmFyeSBpcyBidWlsdCBpbiBhIHdheSB0aGF0IGFsbCBzdGF0ZSBjaGFuZ2VzIGFyZSBleHBvc2VkIGluIHRoaXMgc3RvcmUsXG4gICAqIG8gYWxsIFVJIGNoYW5nZXMgaW4geW91ciBhcHBsaWNhdGlvbiBzaG91bGQgYmUgaGFuZGxlZCBieSBzdWJzY3JpYmluZyB0byB0aGVzZSB2YXJpYWJsZXMuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIHVzZSB0aGUgYGNsaWVudC5zdGF0ZWAgZ2V0dGVyLlxuICAgKi9cbiAgcmVhZG9ubHkgcmVhZE9ubHlTdGF0ZVN0b3JlOiBTdHJlYW1WaWRlb1JlYWRPbmx5U3RhdGVTdG9yZTtcbiAgcmVhZG9ubHkgbG9nTGV2ZWw6IExvZ0xldmVsID0gJ3dhcm4nO1xuICByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgd3JpdGVhYmxlU3RhdGVTdG9yZTogU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlO1xuICBzdHJlYW1DbGllbnQ6IFN0cmVhbUNsaWVudDtcblxuICBwcm90ZWN0ZWQgZXZlbnRIYW5kbGVyc1RvVW5yZWdpc3RlcjogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcbiAgcHJvdGVjdGVkIGNvbm5lY3Rpb25Qcm9taXNlOiBQcm9taXNlPHZvaWQgfCBDb25uZWN0ZWRFdmVudD4gfCB1bmRlZmluZWQ7XG4gIHByb3RlY3RlZCBkaXNjb25uZWN0aW9uUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2VNYXA6IE1hcDxzdHJpbmcsIFN0cmVhbVZpZGVvQ2xpZW50PiA9IG5ldyBNYXAoKTtcblxuICAvKipcbiAgICogWW91IHNob3VsZCBjcmVhdGUgb25seSBvbmUgaW5zdGFuY2Ugb2YgYFN0cmVhbVZpZGVvQ2xpZW50YC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nLCBvcHRzPzogU3RyZWFtQ2xpZW50T3B0aW9ucyk7XG4gIGNvbnN0cnVjdG9yKGFyZ3M6IHtcbiAgICBhcGlLZXk6IHN0cmluZztcbiAgICBvcHRpb25zPzogU3RyZWFtQ2xpZW50T3B0aW9ucztcbiAgICB1c2VyPzogVXNlcjtcbiAgICB0b2tlbj86IHN0cmluZztcbiAgICB0b2tlblByb3ZpZGVyPzogVG9rZW5Qcm92aWRlcjtcbiAgfSk7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwaUtleU9yQXJnczpcbiAgICAgIHwgc3RyaW5nXG4gICAgICB8IHtcbiAgICAgICAgICBhcGlLZXk6IHN0cmluZztcbiAgICAgICAgICBvcHRpb25zPzogU3RyZWFtQ2xpZW50T3B0aW9ucztcbiAgICAgICAgICB1c2VyPzogVXNlcjtcbiAgICAgICAgICB0b2tlbj86IHN0cmluZztcbiAgICAgICAgICB0b2tlblByb3ZpZGVyPzogVG9rZW5Qcm92aWRlcjtcbiAgICAgICAgfSxcbiAgICBvcHRzPzogU3RyZWFtQ2xpZW50T3B0aW9ucyxcbiAgKSB7XG4gICAgbGV0IGxvZ2dlcjogTG9nZ2VyID0gbG9nVG9Db25zb2xlO1xuICAgIGxldCBsb2dMZXZlbDogTG9nTGV2ZWwgPSAnd2Fybic7XG4gICAgaWYgKHR5cGVvZiBhcGlLZXlPckFyZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsb2dMZXZlbCA9IG9wdHM/LmxvZ0xldmVsIHx8IGxvZ0xldmVsO1xuICAgICAgbG9nZ2VyID0gb3B0cz8ubG9nZ2VyIHx8IGxvZ2dlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nTGV2ZWwgPSBhcGlLZXlPckFyZ3Mub3B0aW9ucz8ubG9nTGV2ZWwgfHwgbG9nTGV2ZWw7XG4gICAgICBsb2dnZXIgPSBhcGlLZXlPckFyZ3Mub3B0aW9ucz8ubG9nZ2VyIHx8IGxvZ2dlcjtcbiAgICB9XG5cbiAgICBzZXRMb2dnZXIobG9nZ2VyLCBsb2dMZXZlbCk7XG4gICAgdGhpcy5sb2dnZXIgPSBnZXRMb2dnZXIoWydjbGllbnQnXSk7XG4gICAgY29uc3QgY29vcmRpbmF0b3JMb2dnZXIgPSBnZXRMb2dnZXIoWydjb29yZGluYXRvciddKTtcblxuICAgIGlmICh0eXBlb2YgYXBpS2V5T3JBcmdzID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5zdHJlYW1DbGllbnQgPSBuZXcgU3RyZWFtQ2xpZW50KGFwaUtleU9yQXJncywge1xuICAgICAgICBwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmU6IHRydWUsXG4gICAgICAgIC4uLm9wdHMsXG4gICAgICAgIGxvZ0xldmVsLFxuICAgICAgICBsb2dnZXI6IGNvb3JkaW5hdG9yTG9nZ2VyLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RyZWFtQ2xpZW50ID0gbmV3IFN0cmVhbUNsaWVudChhcGlLZXlPckFyZ3MuYXBpS2V5LCB7XG4gICAgICAgIHBlcnNpc3RVc2VyT25Db25uZWN0aW9uRmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgLi4uYXBpS2V5T3JBcmdzLm9wdGlvbnMsXG4gICAgICAgIGxvZ0xldmVsLFxuICAgICAgICBsb2dnZXI6IGNvb3JkaW5hdG9yTG9nZ2VyLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNka0luZm8gPSBnZXRTZGtJbmZvKCk7XG4gICAgICBpZiAoc2RrSW5mbykge1xuICAgICAgICBjb25zdCBzZGtOYW1lID0gU2RrVHlwZVtzZGtJbmZvLnR5cGVdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IHNka1ZlcnNpb24gPSBgJHtzZGtJbmZvLm1ham9yfS4ke3Nka0luZm8ubWlub3J9LiR7c2RrSW5mby5wYXRjaH1gO1xuICAgICAgICBjb25zdCB1c2VyQWdlbnQgPSB0aGlzLnN0cmVhbUNsaWVudC5nZXRVc2VyQWdlbnQoKTtcbiAgICAgICAgdGhpcy5zdHJlYW1DbGllbnQuc2V0VXNlckFnZW50KFxuICAgICAgICAgIGAke3VzZXJBZ2VudH0tdmlkZW8tJHtzZGtOYW1lfS1zZGstJHtzZGtWZXJzaW9ufWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlID0gbmV3IFN0cmVhbVZpZGVvV3JpdGVhYmxlU3RhdGVTdG9yZSgpO1xuICAgIHRoaXMucmVhZE9ubHlTdGF0ZVN0b3JlID0gbmV3IFN0cmVhbVZpZGVvUmVhZE9ubHlTdGF0ZVN0b3JlKFxuICAgICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLFxuICAgICk7XG5cbiAgICBpZiAodHlwZW9mIGFwaUtleU9yQXJncyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhcGlLZXlPckFyZ3MudXNlcjtcbiAgICAgIGNvbnN0IHRva2VuID0gYXBpS2V5T3JBcmdzLnRva2VuIHx8IGFwaUtleU9yQXJncy50b2tlblByb3ZpZGVyO1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgbGV0IGlkID0gdXNlci5pZDtcbiAgICAgICAgaWYgKHVzZXIudHlwZSA9PT0gJ2Fub255bW91cycpIHtcbiAgICAgICAgICBpZCA9ICchYW5vbic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgaWYgKFN0cmVhbVZpZGVvQ2xpZW50Ll9pbnN0YW5jZU1hcC5oYXMoYXBpS2V5T3JBcmdzLmFwaUtleSArIGlkKSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAgICAgYEEgU3RyZWFtVmlkZW9DbGllbnQgYWxyZWFkeSBleGlzdHMgZm9yICR7dXNlci50eXBlID09PSAnYW5vbnltb3VzJyA/ICdhbiBhbm9ueW1vdXMgdXNlcicgOiBpZH07IFByZWZlciB1c2luZyBnZXRPckNyZWF0ZUluc3RhbmNlIG1ldGhvZGAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1c2VyLmlkID0gaWQ7XG4gICAgICAgICAgU3RyZWFtVmlkZW9DbGllbnQuX2luc3RhbmNlTWFwLnNldChhcGlLZXlPckFyZ3MuYXBpS2V5ICsgaWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdFVzZXIodXNlciwgdG9rZW4pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcignZXJyb3InLCAnRmFpbGVkIHRvIGNvbm5lY3QnLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldE9yQ3JlYXRlSW5zdGFuY2UoYXJnczoge1xuICAgIGFwaUtleTogc3RyaW5nO1xuICAgIHVzZXI6IFVzZXI7XG4gICAgdG9rZW4/OiBzdHJpbmc7XG4gICAgdG9rZW5Qcm92aWRlcj86IFRva2VuUHJvdmlkZXI7XG4gICAgb3B0aW9ucz86IFN0cmVhbUNsaWVudE9wdGlvbnM7XG4gIH0pOiBTdHJlYW1WaWRlb0NsaWVudCB7XG4gICAgY29uc3QgdXNlciA9IGFyZ3MudXNlcjtcbiAgICBpZiAoIXVzZXIuaWQpIHtcbiAgICAgIGlmIChhcmdzLnVzZXIudHlwZSA9PT0gJ2Fub255bW91cycpIHtcbiAgICAgICAgdXNlci5pZCA9ICchYW5vbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgSUQgaXMgcmVxdWlyZWQgZm9yIGEgbm9uLWFub255bW91cyB1c2VyJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghYXJncy50b2tlbiAmJiAhYXJncy50b2tlblByb3ZpZGVyKSB7XG4gICAgICBpZiAoYXJncy51c2VyLnR5cGUgIT09ICdhbm9ueW1vdXMnICYmIGFyZ3MudXNlci50eXBlICE9PSAnZ3Vlc3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnVG9rZW5Qcm92aWRlciBvciB0b2tlbiBpcyByZXF1aXJlZCBmb3IgYSB1c2VyIHRoYXQgaXMgbm90IGEgZ3Vlc3Qgb3IgYW5vbnltb3VzJyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGluc3RhbmNlID0gU3RyZWFtVmlkZW9DbGllbnQuX2luc3RhbmNlTWFwLmdldChhcmdzLmFwaUtleSArIHVzZXIuaWQpO1xuICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgIGluc3RhbmNlID0gbmV3IFN0cmVhbVZpZGVvQ2xpZW50KHsgLi4uYXJncywgdXNlciB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcmVhY3RpdmUgc3RhdGUgc3RvcmUsIHVzZSB0aGlzIGlmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG8gdGhlIGNsaWVudCBzdGF0ZVxuICAgKi9cbiAgZ2V0IHN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWRPbmx5U3RhdGVTdG9yZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25uZWN0cyB0aGUgZ2l2ZW4gdXNlciB0byB0aGUgY2xpZW50LlxuICAgKiBPbmx5IG9uZSB1c2VyIGNhbiBjb25uZWN0IGF0IGEgdGltZSwgaWYgeW91IHdhbnQgdG8gY2hhbmdlIHVzZXJzLCBjYWxsIGBkaXNjb25uZWN0VXNlcmAgYmVmb3JlIGNvbm5lY3RpbmcgYSBuZXcgdXNlci5cbiAgICogSWYgdGhlIGNvbm5lY3Rpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlIGNvbm5lY3RlZCB1c2VyIFtzdGF0ZSB2YXJpYWJsZV0oI3JlYWRvbmx5c3RhdGVzdG9yZSkgd2lsbCBiZSB1cGRhdGVkIGFjY29yZGluZ2x5LlxuICAgKlxuICAgKiBAcGFyYW0gdXNlciB0aGUgdXNlciB0byBjb25uZWN0LlxuICAgKiBAcGFyYW0gdG9rZW4gYSB0b2tlbiBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRva2VuLlxuICAgKi9cbiAgY29ubmVjdFVzZXIgPSBhc3luYyAoXG4gICAgdXNlcjogVXNlcixcbiAgICB0b2tlbj86IFRva2VuT3JQcm92aWRlcixcbiAgKTogUHJvbWlzZTx2b2lkIHwgQ29ubmVjdGVkRXZlbnQ+ID0+IHtcbiAgICBpZiAodXNlci50eXBlID09PSAnYW5vbnltb3VzJykge1xuICAgICAgdXNlci5pZCA9ICchYW5vbic7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0QW5vbnltb3VzVXNlcih1c2VyIGFzIFVzZXJXaXRoSWQsIHRva2VuKTtcbiAgICB9XG4gICAgbGV0IGNvbm5lY3RVc2VyID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LmNvbm5lY3RVc2VyKHVzZXIsIHRva2VuKTtcbiAgICB9O1xuICAgIGlmICh1c2VyLnR5cGUgPT09ICdndWVzdCcpIHtcbiAgICAgIGNvbm5lY3RVc2VyID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuY29ubmVjdEd1ZXN0VXNlcih1c2VyKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuY29ubmVjdGlvblByb21pc2UgPSB0aGlzLmRpc2Nvbm5lY3Rpb25Qcm9taXNlXG4gICAgICA/IHRoaXMuZGlzY29ubmVjdGlvblByb21pc2UudGhlbigoKSA9PiBjb25uZWN0VXNlcigpKVxuICAgICAgOiBjb25uZWN0VXNlcigpO1xuXG4gICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZT8uZmluYWxseSgoKSA9PiAodGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IHVuZGVmaW5lZCkpO1xuICAgIGNvbnN0IGNvbm5lY3RVc2VyUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb25Qcm9taXNlO1xuICAgIC8vIGNvbm5lY3RVc2VyUmVzcG9uc2Ugd2lsbCBiZSB2b2lkIGlmIGNvbm5lY3RVc2VyIGNhbGxlZCB0d2ljZSBmb3IgdGhlIHNhbWUgdXNlclxuICAgIGlmIChjb25uZWN0VXNlclJlc3BvbnNlPy5tZSkge1xuICAgICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLnNldENvbm5lY3RlZFVzZXIoY29ubmVjdFVzZXJSZXNwb25zZS5tZSk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudEhhbmRsZXJzVG9VbnJlZ2lzdGVyLnB1c2goXG4gICAgICB0aGlzLm9uKCdjb25uZWN0aW9uLmNoYW5nZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50Lm9ubGluZSkge1xuICAgICAgICAgIGNvbnN0IGNhbGxzVG9SZVdhdGNoID0gdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLmNhbGxzXG4gICAgICAgICAgICAuZmlsdGVyKChjYWxsKSA9PiBjYWxsLndhdGNoaW5nKVxuICAgICAgICAgICAgLm1hcCgoY2FsbCkgPT4gY2FsbC5jaWQpO1xuXG4gICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAnaW5mbycsXG4gICAgICAgICAgICBgUmV3YXRjaGluZyBjYWxscyBhZnRlciBjb25uZWN0aW9uIGNoYW5nZWQgJHtjYWxsc1RvUmVXYXRjaC5qb2luKFxuICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX1gLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGNhbGxzVG9SZVdhdGNoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlDYWxscyh7XG4gICAgICAgICAgICAgIHdhdGNoOiB0cnVlLFxuICAgICAgICAgICAgICBmaWx0ZXJfY29uZGl0aW9uczoge1xuICAgICAgICAgICAgICAgIGNpZDogeyAkaW46IGNhbGxzVG9SZVdhdGNoIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNvcnQ6IFt7IGZpZWxkOiAnY2lkJywgZGlyZWN0aW9uOiAxIH1dLFxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvZ2dlcignZXJyb3InLCAnRmFpbGVkIHRvIHJlLXdhdGNoIGNhbGxzJywgZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMuZXZlbnRIYW5kbGVyc1RvVW5yZWdpc3Rlci5wdXNoKFxuICAgICAgdGhpcy5vbignY2FsbC5jcmVhdGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY2FsbCwgbWVtYmVycyB9ID0gZXZlbnQ7XG4gICAgICAgIGlmICh1c2VyLmlkID09PSBjYWxsLmNyZWF0ZWRfYnkuaWQpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAgICdSZWNlaXZlZCBgY2FsbC5jcmVhdGVkYCBzZW50IGJ5IHRoZSBjdXJyZW50IHVzZXInLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2dnZXIoJ2luZm8nLCBgTmV3IGNhbGwgY3JlYXRlZCBhbmQgcmVnaXN0ZXJlZDogJHtjYWxsLmNpZH1gKTtcbiAgICAgICAgY29uc3QgbmV3Q2FsbCA9IG5ldyBDYWxsKHtcbiAgICAgICAgICBzdHJlYW1DbGllbnQ6IHRoaXMuc3RyZWFtQ2xpZW50LFxuICAgICAgICAgIHR5cGU6IGNhbGwudHlwZSxcbiAgICAgICAgICBpZDogY2FsbC5pZCxcbiAgICAgICAgICBtZW1iZXJzLFxuICAgICAgICAgIGNsaWVudFN0b3JlOiB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUsXG4gICAgICAgIH0pO1xuICAgICAgICBuZXdDYWxsLnN0YXRlLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoY2FsbCk7XG4gICAgICAgIHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZS5yZWdpc3RlckNhbGwobmV3Q2FsbCk7XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5ldmVudEhhbmRsZXJzVG9VbnJlZ2lzdGVyLnB1c2goXG4gICAgICB0aGlzLm9uKCdjYWxsLnJpbmcnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyBjYWxsLCBtZW1iZXJzIH0gPSBldmVudDtcbiAgICAgICAgaWYgKHVzZXIuaWQgPT09IGNhbGwuY3JlYXRlZF9ieS5pZCkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICAgJ2RlYnVnJyxcbiAgICAgICAgICAgICdSZWNlaXZlZCBgY2FsbC5yaW5nYCBzZW50IGJ5IHRoZSBjdXJyZW50IHVzZXIgc28gaWdub3JpbmcgdGhlIGV2ZW50JyxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSBjYWxsIG1pZ2h0IGFscmVhZHkgYmUgdHJhY2tlZCBieSB0aGUgY2xpZW50LFxuICAgICAgICAvLyBpZiBgY2FsbC5jcmVhdGVkYCB3YXMgcmVjZWl2ZWQgYmVmb3JlIGBjYWxsLnJpbmdgLlxuICAgICAgICAvLyBJbiB0aGF0IGNhc2UsIHdlIGNsZWFudXAgdGhlIGFscmVhZHkgdHJhY2tlZCBjYWxsLlxuICAgICAgICBjb25zdCBwcmV2Q2FsbCA9IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZS5maW5kQ2FsbChjYWxsLnR5cGUsIGNhbGwuaWQpO1xuICAgICAgICBhd2FpdCBwcmV2Q2FsbD8ubGVhdmUoeyByZWFzb246ICdjbGVhbmluZy11cCBpbiBjYWxsLnJpbmcnIH0pO1xuICAgICAgICAvLyB3ZSBjcmVhdGUgYSBuZXcgY2FsbFxuICAgICAgICBjb25zdCB0aGVDYWxsID0gbmV3IENhbGwoe1xuICAgICAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICAgICAgdHlwZTogY2FsbC50eXBlLFxuICAgICAgICAgIGlkOiBjYWxsLmlkLFxuICAgICAgICAgIG1lbWJlcnMsXG4gICAgICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICAgICAgICByaW5naW5nOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhlQ2FsbC5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGNhbGwpO1xuICAgICAgICAvLyB3ZSBmZXRjaCB0aGUgbGF0ZXN0IG1ldGFkYXRhIGZvciB0aGUgY2FsbCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgYXdhaXQgdGhlQ2FsbC5nZXQoKTtcbiAgICAgICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLnJlZ2lzdGVyQ2FsbCh0aGVDYWxsKTtcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICByZXR1cm4gY29ubmVjdFVzZXJSZXNwb25zZTtcbiAgfTtcblxuICAvKipcbiAgICogRGlzY29ubmVjdHMgdGhlIGN1cnJlbnRseSBjb25uZWN0ZWQgdXNlciBmcm9tIHRoZSBjbGllbnQuXG4gICAqXG4gICAqIElmIHRoZSBjb25uZWN0aW9uIGlzIHN1Y2Nlc3NmdWxseSBkaXNjb25uZWN0ZWQsIHRoZSBjb25uZWN0ZWQgdXNlciBbc3RhdGUgdmFyaWFibGVdKCNyZWFkb25seXN0YXRlc3RvcmUpIHdpbGwgYmUgdXBkYXRlZCBhY2NvcmRpbmdseVxuICAgKlxuICAgKiBAcGFyYW0gdGltZW91dCBNYXggbnVtYmVyIG9mIG1zLCB0byB3YWl0IGZvciBjbG9zZSBldmVudCBvZiB3ZWJzb2NrZXQsIGJlZm9yZSBmb3JjZWZ1bGx5IGFzc3VtaW5nIHN1Y2Nlc3NmdWwgZGlzY29ubmVjdGlvbi5cbiAgICogICAgICAgICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Nsb3NlRXZlbnRcbiAgICovXG4gIGRpc2Nvbm5lY3RVc2VyID0gYXN5bmMgKHRpbWVvdXQ/OiBudW1iZXIpID0+IHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtQ2xpZW50LnVzZXIgJiYgIXRoaXMuY29ubmVjdGlvblByb21pc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdXNlcklkID0gdGhpcy5zdHJlYW1DbGllbnQudXNlcj8uaWQ7XG4gICAgY29uc3QgYXBpS2V5ID0gdGhpcy5zdHJlYW1DbGllbnQua2V5O1xuICAgIGNvbnN0IGRpc2Nvbm5lY3RVc2VyID0gKCkgPT4gdGhpcy5zdHJlYW1DbGllbnQuZGlzY29ubmVjdFVzZXIodGltZW91dCk7XG4gICAgdGhpcy5kaXNjb25uZWN0aW9uUHJvbWlzZSA9IHRoaXMuY29ubmVjdGlvblByb21pc2VcbiAgICAgID8gdGhpcy5jb25uZWN0aW9uUHJvbWlzZS50aGVuKCgpID0+IGRpc2Nvbm5lY3RVc2VyKCkpXG4gICAgICA6IGRpc2Nvbm5lY3RVc2VyKCk7XG4gICAgdGhpcy5kaXNjb25uZWN0aW9uUHJvbWlzZS5maW5hbGx5KFxuICAgICAgKCkgPT4gKHRoaXMuZGlzY29ubmVjdGlvblByb21pc2UgPSB1bmRlZmluZWQpLFxuICAgICk7XG4gICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0aW9uUHJvbWlzZTtcbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBTdHJlYW1WaWRlb0NsaWVudC5faW5zdGFuY2VNYXAuZGVsZXRlKGFwaUtleSArIHVzZXJJZCk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRIYW5kbGVyc1RvVW5yZWdpc3Rlci5mb3JFYWNoKCh1bnJlZ2lzdGVyKSA9PiB1bnJlZ2lzdGVyKCkpO1xuICAgIHRoaXMuZXZlbnRIYW5kbGVyc1RvVW5yZWdpc3RlciA9IFtdO1xuICAgIHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZS5zZXRDb25uZWN0ZWRVc2VyKHVuZGVmaW5lZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFlvdSBjYW4gc3Vic2NyaWJlIHRvIFdlYlNvY2tldCBldmVudHMgcHJvdmlkZWQgYnkgdGhlIEFQSS5cbiAgICogVG8gcmVtb3ZlIGEgc3Vic2NyaXB0aW9uLCBjYWxsIHRoZSBgb2ZmYCBtZXRob2Qgb3IsIGV4ZWN1dGUgdGhlIHJldHVybmVkIHVuc3Vic2NyaWJlIGZ1bmN0aW9uLlxuICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHN1YnNjcmliaW5nIHRvIFdlYlNvY2tldCBldmVudHMgaXMgYW4gYWR2YW5jZWQgdXNlLWNhc2UsIGZvciBtb3N0IHVzZS1jYXNlcyBpdCBzaG91bGQgYmUgZW5vdWdoIHRvIHdhdGNoIGZvciBjaGFuZ2VzIGluIHRoZSByZWFjdGl2ZSBbc3RhdGUgc3RvcmVdKCNyZWFkb25seXN0YXRlc3RvcmUpLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnROYW1lIHRoZSBldmVudCBuYW1lIG9yICdhbGwnLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIGVtaXR0ZWQuXG4gICAqIEByZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uLlxuICAgKi9cbiAgb24gPSA8RSBleHRlbmRzIGtleW9mIEFsbENsaWVudEV2ZW50cz4oXG4gICAgZXZlbnROYW1lOiBFLFxuICAgIGNhbGxiYWNrOiBDbGllbnRFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQub24oZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBzdWJzY3JpcHRpb24gZm9yIFdlYlNvY2tldCBldmVudHMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgdGhlIGBvbmAgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnROYW1lIHRoZSBldmVudCBuYW1lLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHdoaWNoIHdhcyBwYXNzZWQgdG8gdGhlIGBvbmAgbWV0aG9kLlxuICAgKi9cbiAgb2ZmID0gPEUgZXh0ZW5kcyBrZXlvZiBBbGxDbGllbnRFdmVudHM+KFxuICAgIGV2ZW50TmFtZTogRSxcbiAgICBjYWxsYmFjazogQ2xpZW50RXZlbnRMaXN0ZW5lcjxFPixcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50Lm9mZihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjYWxsLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgY2FsbC5cbiAgICogQHBhcmFtIGlkIHRoZSBpZCBvZiB0aGUgY2FsbC5cbiAgICovXG4gIGNhbGwgPSAodHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBDYWxsKHtcbiAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICBpZDogaWQsXG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBndWVzdCB1c2VyIHdpdGggdGhlIGdpdmVuIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIGZvciB0aGUgZ3Vlc3QgdXNlci5cbiAgICovXG4gIGNyZWF0ZUd1ZXN0VXNlciA9IGFzeW5jIChkYXRhOiBDcmVhdGVHdWVzdFJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZG9BeGlvc1JlcXVlc3Q8XG4gICAgICBDcmVhdGVHdWVzdFJlc3BvbnNlLFxuICAgICAgQ3JlYXRlR3Vlc3RSZXF1ZXN0XG4gICAgPigncG9zdCcsICcvZ3Vlc3QnLCBkYXRhLCB7IHB1YmxpY0VuZHBvaW50OiB0cnVlIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIHF1ZXJ5IHRoZSBBUEkgZm9yIGNhbGxzIG1hdGNoaW5nIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSB0aGUgcXVlcnkgZGF0YS5cbiAgICovXG4gIHF1ZXJ5Q2FsbHMgPSBhc3luYyAoZGF0YTogUXVlcnlDYWxsc1JlcXVlc3QgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQucG9zdDxcbiAgICAgIFF1ZXJ5Q2FsbHNSZXNwb25zZSxcbiAgICAgIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAgPignL2NhbGxzJywgZGF0YSk7XG4gICAgY29uc3QgY2FsbHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGMgb2YgcmVzcG9uc2UuY2FsbHMpIHtcbiAgICAgIGNvbnN0IGNhbGwgPSBuZXcgQ2FsbCh7XG4gICAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICAgIGlkOiBjLmNhbGwuaWQsXG4gICAgICAgIHR5cGU6IGMuY2FsbC50eXBlLFxuICAgICAgICBtZW1iZXJzOiBjLm1lbWJlcnMsXG4gICAgICAgIG93bkNhcGFiaWxpdGllczogYy5vd25fY2FwYWJpbGl0aWVzLFxuICAgICAgICB3YXRjaGluZzogZGF0YS53YXRjaCxcbiAgICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICAgIH0pO1xuICAgICAgY2FsbC5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGMuY2FsbCk7XG4gICAgICBhd2FpdCBjYWxsLmFwcGx5RGV2aWNlQ29uZmlnKGZhbHNlKTtcbiAgICAgIGlmIChkYXRhLndhdGNoKSB7XG4gICAgICAgIHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZS5yZWdpc3RlckNhbGwoY2FsbCk7XG4gICAgICB9XG4gICAgICBjYWxscy5wdXNoKGNhbGwpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVzcG9uc2UsXG4gICAgICBjYWxsczogY2FsbHMsXG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGNhbGwgc3RhdGlzdGljcyByZXBvcnRzIG1hdGNoaW5nIGEgcGFydGljdWxhciBjb25kaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIEZpbHRlciBhbmQgc29ydCBjb25kaXRpb25zIGZvciByZXRyaWV2aW5nIGF2YWlsYWJsZSBjYWxsIHJlcG9ydCBzdW1tYXJpZXMuXG4gICAqIEByZXR1cm5zIExpc3Qgd2l0aCBzdW1tYXJ5IG9mIGF2YWlsYWJsZSBjYWxsIHJlcG9ydHMgbWF0Y2hpbmcgdGhlIGNvbmRpdGlvbi5cbiAgICovXG4gIHF1ZXJ5Q2FsbFN0YXRzID0gYXN5bmMgKGRhdGE6IFF1ZXJ5Q2FsbFN0YXRzUmVxdWVzdCA9IHt9KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBRdWVyeUNhbGxTdGF0c1Jlc3BvbnNlLFxuICAgICAgUXVlcnlDYWxsU3RhdHNSZXF1ZXN0XG4gICAgPihgL2NhbGwvc3RhdHNgLCBkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgYXZhaWxhYmxlIGRhdGEgY2VudGVycyBhdmFpbGFibGUgZm9yIGhvc3RpbmcgY2FsbHMuXG4gICAqL1xuICBlZGdlcyA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZ2V0PEdldEVkZ2VzUmVzcG9uc2U+KGAvZWRnZXNgKTtcbiAgfTtcblxuICAvKipcbiAgICogYWRkRGV2aWNlIC0gQWRkcyBhIHB1c2ggZGV2aWNlIGZvciBhIHVzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCB0aGUgZGV2aWNlIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwdXNoX3Byb3ZpZGVyIHRoZSBwdXNoIHByb3ZpZGVyIG5hbWUgKGVnLiBhcG4sIGZpcmViYXNlKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHVzaF9wcm92aWRlcl9uYW1lIHVzZXIgcHJvdmlkZWQgcHVzaCBwcm92aWRlciBuYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcklEXSB0aGUgdXNlciBpZCAoZGVmYXVsdHMgdG8gY3VycmVudCB1c2VyKVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt2b2lwX3Rva2VuXSBlbmFibGVzIHVzZSBvZiBWb0lQIHRva2VuIGZvciBwdXNoIG5vdGlmaWNhdGlvbnMgb24gaU9TIHBsYXRmb3JtXG4gICAqL1xuICBhZGREZXZpY2UgPSBhc3luYyAoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBwdXNoX3Byb3ZpZGVyOiBzdHJpbmcsXG4gICAgcHVzaF9wcm92aWRlcl9uYW1lPzogc3RyaW5nLFxuICAgIHVzZXJJRD86IHN0cmluZyxcbiAgICB2b2lwX3Rva2VuPzogYm9vbGVhbixcbiAgKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8Q3JlYXRlRGV2aWNlUmVxdWVzdD4oJy9kZXZpY2VzJywge1xuICAgICAgaWQsXG4gICAgICBwdXNoX3Byb3ZpZGVyLFxuICAgICAgdm9pcF90b2tlbixcbiAgICAgIC4uLih1c2VySUQgIT0gbnVsbCA/IHsgdXNlcl9pZDogdXNlcklEIH0gOiB7fSksXG4gICAgICAuLi4ocHVzaF9wcm92aWRlcl9uYW1lICE9IG51bGwgPyB7IHB1c2hfcHJvdmlkZXJfbmFtZSB9IDoge30pLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBhZGREZXZpY2UgLSBBZGRzIGEgcHVzaCBkZXZpY2UgZm9yIGEgdXNlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIHRoZSBkZXZpY2UgaWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHB1c2hfcHJvdmlkZXIgdGhlIHB1c2ggcHJvdmlkZXIgbmFtZSAoZWcuIGFwbiwgZmlyZWJhc2UpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwdXNoX3Byb3ZpZGVyX25hbWUgdXNlciBwcm92aWRlZCBwdXNoIHByb3ZpZGVyIG5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VySURdIHRoZSB1c2VyIGlkIChkZWZhdWx0cyB0byBjdXJyZW50IHVzZXIpXG4gICAqL1xuICBhZGRWb2lwRGV2aWNlID0gYXN5bmMgKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgcHVzaF9wcm92aWRlcjogc3RyaW5nLFxuICAgIHB1c2hfcHJvdmlkZXJfbmFtZTogc3RyaW5nLFxuICAgIHVzZXJJRD86IHN0cmluZyxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYWRkRGV2aWNlKFxuICAgICAgaWQsXG4gICAgICBwdXNoX3Byb3ZpZGVyLFxuICAgICAgcHVzaF9wcm92aWRlcl9uYW1lLFxuICAgICAgdXNlcklELFxuICAgICAgdHJ1ZSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBnZXREZXZpY2VzIC0gUmV0dXJucyB0aGUgZGV2aWNlcyBhc3NvY2lhdGVkIHdpdGggYSBjdXJyZW50IHVzZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VySURdIFVzZXIgSUQuIE9ubHkgd29ya3Mgb24gc2VydmVyc2lkZVxuICAgKi9cbiAgZ2V0RGV2aWNlcyA9IGFzeW5jICh1c2VySUQ/OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQuZ2V0PExpc3REZXZpY2VzUmVzcG9uc2U+KFxuICAgICAgJy9kZXZpY2VzJyxcbiAgICAgIHVzZXJJRCA/IHsgdXNlcl9pZDogdXNlcklEIH0gOiB7fSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiByZW1vdmVEZXZpY2UgLSBSZW1vdmVzIHRoZSBkZXZpY2Ugd2l0aCB0aGUgZ2l2ZW4gaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgZGV2aWNlIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcklEXSBUaGUgdXNlciBpZC4gT25seSBzcGVjaWZ5IHRoaXMgZm9yIHNlcnZlcnNpZGUgcmVxdWVzdHNcbiAgICovXG4gIHJlbW92ZURldmljZSA9IGFzeW5jIChpZDogc3RyaW5nLCB1c2VySUQ/OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQuZGVsZXRlKCcvZGV2aWNlcycsIHtcbiAgICAgIGlkLFxuICAgICAgLi4uKHVzZXJJRCA/IHsgdXNlcl9pZDogdXNlcklEIH0gOiB7fSksXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgcmluZ2luZyBjYWxscyBmcm9tIHB1c2ggbm90aWZpY2F0aW9ucy4gSWYgdGhlIGNhbGwgYWxyZWFkeSBleGlzdHMsIGl0IHdpbGwgZG8gbm90aGluZy5cbiAgICogQHBhcmFtIGNhbGxfY2lkXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBvblJpbmdpbmdDYWxsID0gYXN5bmMgKGNhbGxfY2lkOiBzdHJpbmcpID0+IHtcbiAgICAvLyBpZiB3ZSBmaW5kIHRoZSBjYWxsIGFuZCBpcyBhbHJlYWR5IHJpbmdpbmcsIHdlIGRvbid0IG5lZWQgdG8gY3JlYXRlIGEgbmV3IGNhbGxcbiAgICAvLyBhcyBjbGllbnQgd291bGQgaGF2ZSByZWNlaXZlZCB0aGUgY2FsbC5yaW5nIHN0YXRlIGJlY2F1c2UgdGhlIGFwcCBoYWQgV1MgYWxpdmUgd2hlbiByZWNlaXZpbmcgcHVzaCBub3RpZmljYXRpb25zXG4gICAgbGV0IGNhbGwgPSB0aGlzLnN0YXRlLmNhbGxzLmZpbmQoKGMpID0+IGMuY2lkID09PSBjYWxsX2NpZCAmJiBjLnJpbmdpbmcpO1xuICAgIGlmICghY2FsbCkge1xuICAgICAgLy8gaWYgbm90IGl0IG1lYW5zIHRoYXQgV1MgaXMgbm90IGFsaXZlIHdoZW4gcmVjZWl2aW5nIHRoZSBwdXNoIG5vdGlmaWNhdGlvbnMgYW5kIHdlIG5lZWQgdG8gZmV0Y2ggdGhlIGNhbGxcbiAgICAgIGNvbnN0IFtjYWxsVHlwZSwgY2FsbElkXSA9IGNhbGxfY2lkLnNwbGl0KCc6Jyk7XG4gICAgICBjYWxsID0gbmV3IENhbGwoe1xuICAgICAgICBzdHJlYW1DbGllbnQ6IHRoaXMuc3RyZWFtQ2xpZW50LFxuICAgICAgICB0eXBlOiBjYWxsVHlwZSxcbiAgICAgICAgaWQ6IGNhbGxJZCxcbiAgICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICAgICAgcmluZ2luZzogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgY2FsbC5nZXQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbDtcbiAgfTtcblxuICAvKipcbiAgICogQ29ubmVjdHMgdGhlIGdpdmVuIGFub255bW91cyB1c2VyIHRvIHRoZSBjbGllbnQuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyIHRoZSB1c2VyIHRvIGNvbm5lY3QuXG4gICAqIEBwYXJhbSB0b2tlbk9yUHJvdmlkZXIgYSB0b2tlbiBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRva2VuLlxuICAgKi9cbiAgcHJvdGVjdGVkIGNvbm5lY3RBbm9ueW1vdXNVc2VyID0gYXN5bmMgKFxuICAgIHVzZXI6IFVzZXJXaXRoSWQsXG4gICAgdG9rZW5PclByb3ZpZGVyOiBUb2tlbk9yUHJvdmlkZXIsXG4gICkgPT4ge1xuICAgIGNvbnN0IGNvbm5lY3RBbm9ueW1vdXNVc2VyID0gKCkgPT5cbiAgICAgIHRoaXMuc3RyZWFtQ2xpZW50LmNvbm5lY3RBbm9ueW1vdXNVc2VyKHVzZXIsIHRva2VuT3JQcm92aWRlcik7XG4gICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IHRoaXMuZGlzY29ubmVjdGlvblByb21pc2VcbiAgICAgID8gdGhpcy5kaXNjb25uZWN0aW9uUHJvbWlzZS50aGVuKCgpID0+IGNvbm5lY3RBbm9ueW1vdXNVc2VyKCkpXG4gICAgICA6IGNvbm5lY3RBbm9ueW1vdXNVc2VyKCk7XG4gICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZS5maW5hbGx5KCgpID0+ICh0aGlzLmNvbm5lY3Rpb25Qcm9taXNlID0gdW5kZWZpbmVkKSk7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvblByb21pc2U7XG4gIH07XG59XG4iXSwibmFtZXMiOlsiQXVkaW9TZXR0aW5nc1JlcXVlc3REZWZhdWx0RGV2aWNlRW51bSIsIlNQRUFLRVIiLCJFQVJQSUVDRSIsIkF1ZGlvU2V0dGluZ3NSZXNwb25zZURlZmF1bHREZXZpY2VFbnVtIiwiQmxvY2tMaXN0T3B0aW9uc0JlaGF2aW9yRW51bSIsIkZMQUciLCJCTE9DSyIsIlNIQURPV19CTE9DSyIsIkNoYW5uZWxDb25maWdXaXRoSW5mb0F1dG9tb2RFbnVtIiwiRElTQUJMRUQiLCJTSU1QTEUiLCJBSSIsIkNoYW5uZWxDb25maWdXaXRoSW5mb0F1dG9tb2RCZWhhdmlvckVudW0iLCJDaGFubmVsQ29uZmlnV2l0aEluZm9CbG9ja2xpc3RCZWhhdmlvckVudW0iLCJDcmVhdGVEZXZpY2VSZXF1ZXN0UHVzaFByb3ZpZGVyRW51bSIsIkZJUkVCQVNFIiwiQVBOIiwiSFVBV0VJIiwiWElBT01JIiwiTm9pc2VDYW5jZWxsYXRpb25TZXR0aW5nc01vZGVFbnVtIiwiQVZBSUxBQkxFIiwiQVVUT19PTiIsIk93bkNhcGFiaWxpdHkiLCJCTE9DS19VU0VSUyIsIkNIQU5HRV9NQVhfRFVSQVRJT04iLCJDUkVBVEVfQ0FMTCIsIkNSRUFURV9SRUFDVElPTiIsIkVOQUJMRV9OT0lTRV9DQU5DRUxMQVRJT04iLCJFTkRfQ0FMTCIsIkpPSU5fQkFDS1NUQUdFIiwiSk9JTl9DQUxMIiwiSk9JTl9FTkRFRF9DQUxMIiwiTVVURV9VU0VSUyIsIlBJTl9GT1JfRVZFUllPTkUiLCJSRUFEX0NBTEwiLCJSRU1PVkVfQ0FMTF9NRU1CRVIiLCJTQ1JFRU5TSEFSRSIsIlNFTkRfQVVESU8iLCJTRU5EX1ZJREVPIiwiU1RBUlRfQlJPQURDQVNUX0NBTEwiLCJTVEFSVF9SRUNPUkRfQ0FMTCIsIlNUQVJUX1RSQU5TQ1JJUFRJT05fQ0FMTCIsIlNUT1BfQlJPQURDQVNUX0NBTEwiLCJTVE9QX1JFQ09SRF9DQUxMIiwiU1RPUF9UUkFOU0NSSVBUSU9OX0NBTEwiLCJVUERBVEVfQ0FMTCIsIlVQREFURV9DQUxMX01FTUJFUiIsIlVQREFURV9DQUxMX1BFUk1JU1NJT05TIiwiVVBEQVRFX0NBTExfU0VUVElOR1MiLCJSZWNvcmRTZXR0aW5nc1JlcXVlc3RNb2RlRW51bSIsIlJlY29yZFNldHRpbmdzUmVxdWVzdFF1YWxpdHlFbnVtIiwiXzM2MFAiLCJfNDgwUCIsIl83MjBQIiwiXzEwODBQIiwiXzE0NDBQIiwiUE9SVFJBSVRfMzYwWDY0MCIsIlBPUlRSQUlUXzQ4MFg4NTQiLCJQT1JUUkFJVF83MjBYMTI4MCIsIlBPUlRSQUlUXzEwODBYMTkyMCIsIlBPUlRSQUlUXzE0NDBYMjU2MCIsIlRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3RNb2RlRW51bSIsIlRyYW5zY3JpcHRpb25TZXR0aW5nc1Jlc3BvbnNlTW9kZUVudW0iLCJWaWRlb1NldHRpbmdzUmVxdWVzdENhbWVyYUZhY2luZ0VudW0iLCJGUk9OVCIsIkJBQ0siLCJFWFRFUk5BTCIsIlZpZGVvU2V0dGluZ3NSZXNwb25zZUNhbWVyYUZhY2luZ0VudW0iLCJFcnJvckZyb21SZXNwb25zZSIsIkVycm9yIiwiTnVsbFZhbHVlIiwiU3RydWN0JFR5cGUiLCJNZXNzYWdlVHlwZSIsImNvbnN0cnVjdG9yIiwibm8iLCJuYW1lIiwia2luZCIsIksiLCJWIiwiVCIsIlZhbHVlIiwiaW50ZXJuYWxKc29uV3JpdGUiLCJtZXNzYWdlIiwib3B0aW9ucyIsImpzb24iLCJrIiwidiIsIk9iamVjdCIsImVudHJpZXMiLCJmaWVsZHMiLCJ0b0pzb24iLCJpbnRlcm5hbEpzb25SZWFkIiwidGFyZ2V0IiwiaXNKc29uT2JqZWN0IiwiZ2xvYmFsVGhpcyIsInR5cGVOYW1lIiwidHlwZW9mSnNvblZhbHVlIiwiY3JlYXRlIiwiZnJvbUpzb24iLCJTdHJ1Y3QiLCJWYWx1ZSRUeXBlIiwib25lb2YiLCJMaXN0VmFsdWUiLCJvbmVvZktpbmQiLCJ1bmRlZmluZWQiLCJib29sVmFsdWUiLCJudW1iZXJWYWx1ZSIsIk51bWJlciIsImlzRmluaXRlIiwic3RyaW5nVmFsdWUiLCJsaXN0VmFsdWVGaWVsZCIsImZpbmQiLCJmIiwibGlzdFZhbHVlIiwic3RydWN0VmFsdWVGaWVsZCIsInN0cnVjdFZhbHVlIiwibnVsbFZhbHVlIiwiTlVMTF9WQUxVRSIsIkFycmF5IiwiaXNBcnJheSIsIkxpc3RWYWx1ZSRUeXBlIiwicmVwZWF0IiwidmFsdWVzIiwibWFwIiwicHVzaCIsIlRpbWVzdGFtcCRUeXBlIiwibm93IiwibXNnIiwibXMiLCJEYXRlIiwic2Vjb25kcyIsIlBiTG9uZyIsImZyb20iLCJNYXRoIiwiZmxvb3IiLCJ0b1N0cmluZyIsIm5hbm9zIiwidG9EYXRlIiwidG9OdW1iZXIiLCJjZWlsIiwiZnJvbURhdGUiLCJkYXRlIiwiZ2V0VGltZSIsInBhcnNlIiwieiIsIm5hbm9zU3RyIiwic3Vic3RyaW5nIiwidG9JU09TdHJpbmciLCJyZXBsYWNlIiwibWF0Y2hlcyIsIm1hdGNoIiwiaXNOYU4iLCJwYXJzZUludCIsImxlbmd0aCIsIlRpbWVzdGFtcCIsIlBlZXJUeXBlIiwiQ29ubmVjdGlvblF1YWxpdHkiLCJWaWRlb1F1YWxpdHkiLCJUcmFja1R5cGUiLCJFcnJvckNvZGUiLCJTZGtUeXBlIiwiVHJhY2tVbnB1Ymxpc2hSZWFzb24iLCJHb0F3YXlSZWFzb24iLCJDYWxsRW5kZWRSZWFzb24iLCJXZWJzb2NrZXRSZWNvbm5lY3RTdHJhdGVneSIsIkNhbGxTdGF0ZSRUeXBlIiwiUGFydGljaXBhbnQiLCJQYXJ0aWNpcGFudENvdW50IiwiUGluIiwiQ2FsbFN0YXRlIiwiUGFydGljaXBhbnRDb3VudCRUeXBlIiwiUGluJFR5cGUiLCJQYXJ0aWNpcGFudCRUeXBlIiwiU3RyZWFtUXVhbGl0eSRUeXBlIiwiU3RyZWFtUXVhbGl0eSIsIlZpZGVvRGltZW5zaW9uJFR5cGUiLCJWaWRlb0RpbWVuc2lvbiIsIlZpZGVvTGF5ZXIkVHlwZSIsIlZpZGVvTGF5ZXIiLCJDb2RlYyRUeXBlIiwiQ29kZWMiLCJJQ0VUcmlja2xlJFR5cGUiLCJJQ0VUcmlja2xlIiwiVHJhY2tJbmZvJFR5cGUiLCJUcmFja0luZm8iLCJFcnJvciRUeXBlIiwiQ2xpZW50RGV0YWlscyRUeXBlIiwiU2RrIiwiT1MiLCJCcm93c2VyIiwiRGV2aWNlIiwiQ2xpZW50RGV0YWlscyIsIlNkayRUeXBlIiwiT1MkVHlwZSIsIkJyb3dzZXIkVHlwZSIsIkRldmljZSRUeXBlIiwiQ2FsbCRUeXBlIiwiQ2FsbCIsIkNhbGxHcmFudHMkVHlwZSIsIkNhbGxHcmFudHMiLCJTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVxdWVzdCRUeXBlIiwiU3RhcnROb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QiLCJTdGFydE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2UkVHlwZSIsIlN0YXJ0Tm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSIsIlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QkVHlwZSIsIlN0b3BOb2lzZUNhbmNlbGxhdGlvblJlcXVlc3QiLCJTdG9wTm9pc2VDYW5jZWxsYXRpb25SZXNwb25zZSRUeXBlIiwiU3RvcE5vaXNlQ2FuY2VsbGF0aW9uUmVzcG9uc2UiLCJTZW5kU3RhdHNSZXF1ZXN0JFR5cGUiLCJTZW5kU3RhdHNSZXF1ZXN0IiwiU2VuZFN0YXRzUmVzcG9uc2UkVHlwZSIsIlNlbmRTdGF0c1Jlc3BvbnNlIiwiSUNFUmVzdGFydFJlcXVlc3QkVHlwZSIsIklDRVJlc3RhcnRSZXF1ZXN0IiwiSUNFUmVzdGFydFJlc3BvbnNlJFR5cGUiLCJJQ0VSZXN0YXJ0UmVzcG9uc2UiLCJVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCRUeXBlIiwiVHJhY2tNdXRlU3RhdGUiLCJVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCIsIlVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSRUeXBlIiwiVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlIiwiVHJhY2tNdXRlU3RhdGUkVHlwZSIsIkF1ZGlvTXV0ZUNoYW5nZWQkVHlwZSIsIlZpZGVvTXV0ZUNoYW5nZWQkVHlwZSIsIlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0JFR5cGUiLCJUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMiLCJVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCIsIlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSRUeXBlIiwiVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlIiwiVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzJFR5cGUiLCJTZW5kQW5zd2VyUmVxdWVzdCRUeXBlIiwiU2VuZEFuc3dlclJlcXVlc3QiLCJTZW5kQW5zd2VyUmVzcG9uc2UkVHlwZSIsIlNlbmRBbnN3ZXJSZXNwb25zZSIsIklDRVRyaWNrbGVSZXNwb25zZSRUeXBlIiwiSUNFVHJpY2tsZVJlc3BvbnNlIiwiU2V0UHVibGlzaGVyUmVxdWVzdCRUeXBlIiwiU2V0UHVibGlzaGVyUmVxdWVzdCIsIlNldFB1Ymxpc2hlclJlc3BvbnNlJFR5cGUiLCJTZXRQdWJsaXNoZXJSZXNwb25zZSIsIlNpZ25hbFNlcnZlciIsIlNlcnZpY2VUeXBlIiwiSSIsIk8iLCJWaWRlb0xheWVyU2V0dGluZ19Qcmlvcml0eSIsIlNmdUV2ZW50JFR5cGUiLCJTdWJzY3JpYmVyT2ZmZXIiLCJQdWJsaXNoZXJBbnN3ZXIiLCJDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQiLCJBdWRpb0xldmVsQ2hhbmdlZCIsIklDRVRyaWNrbGUkIiwiQ2hhbmdlUHVibGlzaFF1YWxpdHkiLCJQYXJ0aWNpcGFudEpvaW5lZCIsIlBhcnRpY2lwYW50TGVmdCIsIkRvbWluYW50U3BlYWtlckNoYW5nZWQiLCJKb2luUmVzcG9uc2UiLCJIZWFsdGhDaGVja1Jlc3BvbnNlIiwiVHJhY2tQdWJsaXNoZWQiLCJUcmFja1VucHVibGlzaGVkIiwiQ2FsbEdyYW50c1VwZGF0ZWQiLCJHb0F3YXkiLCJJQ0VSZXN0YXJ0IiwiUGluc0NoYW5nZWQiLCJDYWxsRW5kZWQiLCJQYXJ0aWNpcGFudFVwZGF0ZWQiLCJQYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlIiwiU2Z1RXZlbnQiLCJQYXJ0aWNpcGFudE1pZ3JhdGlvbkNvbXBsZXRlJFR5cGUiLCJQaW5zQ2hhbmdlZCRUeXBlIiwiRXJyb3IkIiwiSUNFUmVzdGFydCRUeXBlIiwiU2Z1UmVxdWVzdCRUeXBlIiwiSm9pblJlcXVlc3QiLCJIZWFsdGhDaGVja1JlcXVlc3QiLCJMZWF2ZUNhbGxSZXF1ZXN0IiwiU2Z1UmVxdWVzdCIsIkxlYXZlQ2FsbFJlcXVlc3QkVHlwZSIsIkhlYWx0aENoZWNrUmVxdWVzdCRUeXBlIiwiSGVhbHRoQ2hlY2tSZXNwb25zZSRUeXBlIiwiVHJhY2tQdWJsaXNoZWQkVHlwZSIsIlRyYWNrVW5wdWJsaXNoZWQkVHlwZSIsIkpvaW5SZXF1ZXN0JFR5cGUiLCJNaWdyYXRpb24iLCJSZWNvbm5lY3REZXRhaWxzIiwiUmVjb25uZWN0RGV0YWlscyRUeXBlIiwiTWlncmF0aW9uJFR5cGUiLCJKb2luUmVzcG9uc2UkVHlwZSIsIlBhcnRpY2lwYW50Sm9pbmVkJFR5cGUiLCJQYXJ0aWNpcGFudExlZnQkVHlwZSIsIlBhcnRpY2lwYW50VXBkYXRlZCRUeXBlIiwiU3Vic2NyaWJlck9mZmVyJFR5cGUiLCJQdWJsaXNoZXJBbnN3ZXIkVHlwZSIsIkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCRUeXBlIiwiQ29ubmVjdGlvblF1YWxpdHlJbmZvIiwiQ29ubmVjdGlvblF1YWxpdHlJbmZvJFR5cGUiLCJEb21pbmFudFNwZWFrZXJDaGFuZ2VkJFR5cGUiLCJBdWRpb0xldmVsJFR5cGUiLCJBdWRpb0xldmVsIiwiQXVkaW9MZXZlbENoYW5nZWQkVHlwZSIsIkF1ZGlvTWVkaWFSZXF1ZXN0JFR5cGUiLCJBdWRpb01lZGlhUmVxdWVzdCIsIkF1ZGlvU2VuZGVyJFR5cGUiLCJBdWRpb1NlbmRlciIsIlZpZGVvTWVkaWFSZXF1ZXN0JFR5cGUiLCJWaWRlb01lZGlhUmVxdWVzdCIsIlZpZGVvTGF5ZXJTZXR0aW5nJFR5cGUiLCJWaWRlb0xheWVyU2V0dGluZyIsIlZpZGVvU2VuZGVyJFR5cGUiLCJWaWRlb1NlbmRlciIsIkNoYW5nZVB1Ymxpc2hRdWFsaXR5JFR5cGUiLCJDYWxsR3JhbnRzVXBkYXRlZCRUeXBlIiwiR29Bd2F5JFR5cGUiLCJDYWxsRW5kZWQkVHlwZSIsIlZpc2liaWxpdHlTdGF0ZSIsIkRlYm91bmNlVHlwZSIsIlNpZ25hbFNlcnZlckNsaWVudCIsIl90cmFuc3BvcnQiLCJtZXRob2RzIiwic2V0UHVibGlzaGVyIiwiaW5wdXQiLCJtZXRob2QiLCJvcHQiLCJtZXJnZU9wdGlvbnMiLCJzdGFja0ludGVyY2VwdCIsInNlbmRBbnN3ZXIiLCJpY2VUcmlja2xlIiwidXBkYXRlU3Vic2NyaXB0aW9ucyIsInVwZGF0ZU11dGVTdGF0ZXMiLCJpY2VSZXN0YXJ0Iiwic2VuZFN0YXRzIiwic3RhcnROb2lzZUNhbmNlbGxhdGlvbiIsInN0b3BOb2lzZUNhbmNlbGxhdGlvbiIsImRlZmF1bHRPcHRpb25zIiwiYmFzZVVybCIsInNlbmRKc29uIiwidGltZW91dCIsImpzb25PcHRpb25zIiwiaWdub3JlVW5rbm93bkZpZWxkcyIsIndpdGhIZWFkZXJzIiwiaGVhZGVycyIsImludGVyY2VwdFVuYXJ5IiwibmV4dCIsIm1ldGEiLCJ3aXRoUmVxdWVzdExvZ2dlciIsImxvZ2dlciIsImxldmVsIiwiY3JlYXRlU2lnbmFsQ2xpZW50IiwidHJhbnNwb3J0IiwiVHdpcnBGZXRjaFRyYW5zcG9ydCIsInNsZWVwIiwibSIsIlByb21pc2UiLCJyIiwic2V0VGltZW91dCIsImlzRnVuY3Rpb24iLCJ2YWx1ZSIsInByb3RvdHlwZSIsImNhbGwiLCJGdW5jdGlvbiIsIktub3duQ29kZXMiLCJUT0tFTl9FWFBJUkVEIiwiV1NfQ0xPU0VEX1NVQ0NFU1MiLCJXU19DTE9TRURfQUJSVVBUTFkiLCJXU19QT0xJQ1lfVklPTEFUSU9OIiwicmV0cnlJbnRlcnZhbCIsIm51bWJlck9mRmFpbHVyZXMiLCJtYXgiLCJtaW4iLCJyYW5kb20iLCJyYW5kb21JZCIsImdlbmVyYXRlVVVJRHY0IiwiaGV4IiwiYnl0ZXMiLCJzIiwiaSIsInBhZFN0YXJ0IiwiZ2V0UmFuZG9tQnl0ZXMiLCJzdWJhcnJheSIsImdldFJhbmRvbVZhbHVlc1dpdGhNYXRoUmFuZG9tIiwicG93IiwiYnl0ZUxlbmd0aCIsImdldFJhbmRvbVZhbHVlcyIsImNyeXB0byIsImJpbmQiLCJtc0NyeXB0byIsIlVpbnQ4QXJyYXkiLCJjb252ZXJ0RXJyb3JUb0pzb24iLCJlcnIiLCJqc29uT2JqIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJrZXkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfIiwiZXJyb3IiLCJpc1Byb21pc2VQZW5kaW5nIiwicHJvbWlzZSIsImVtcHR5T2JqIiwicmFjZSIsInRoZW4iLCJpc09ubGluZSIsIm5hdiIsIm5hdmlnYXRvciIsIndpbmRvdyIsIm9uTGluZSIsImFkZENvbm5lY3Rpb25FdmVudExpc3RlbmVycyIsImNiIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUNvbm5lY3Rpb25FdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpc1JlYWN0TmF0aXZlIiwicHJvZHVjdCIsInRvTG93ZXJDYXNlIiwibG9nTGV2ZWxzIiwiZnJlZXplIiwidHJhY2UiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwibG9nVG9Db25zb2xlIiwibG9nTGV2ZWwiLCJhcmdzIiwibG9nTWV0aG9kIiwiY29uc29sZSIsImxvZyIsInNldExvZ2dlciIsImwiLCJsdmwiLCJzZXRMb2dMZXZlbCIsImdldExvZ0xldmVsIiwiZ2V0TG9nZ2VyIiwid2l0aFRhZ3MiLCJsb2dnZXJNZXRob2QiLCJ0YWdzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJyZXN1bHQiLCJyZXRyeWFibGUiLCJycGMiLCJzaWduYWwiLCJhdHRlbXB0IiwiaXNSZXF1ZXN0Q2FuY2VsbGVkIiwiUnBjRXJyb3IiLCJjb2RlIiwiVHdpcnBFcnJvckNvZGUiLCJjYW5jZWxsZWQiLCJpc0Fib3J0ZWQiLCJhYm9ydGVkIiwicmVzcG9uc2UiLCJzaG91bGRSZXRyeSIsInZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwicGF0Y2giLCJzcGxpdCIsInNka0luZm8iLCJ0eXBlIiwiUExBSU5fSkFWQVNDUklQVCIsIm9zSW5mbyIsImRldmljZUluZm8iLCJ3ZWJSdGNJbmZvIiwic2V0U2RrSW5mbyIsImdldFNka0luZm8iLCJzZXRPU0luZm8iLCJnZXRPU0luZm8iLCJzZXREZXZpY2VJbmZvIiwiZ2V0RGV2aWNlSW5mbyIsImdldFdlYlJUQ0luZm8iLCJzZXRXZWJSVENJbmZvIiwiZ2V0Q2xpZW50RGV0YWlscyIsInNkayIsIm9zIiwiZGV2aWNlIiwidXNlckFnZW50IiwiVUFQYXJzZXIiLCJicm93c2VyIiwiY3B1IiwiZ2V0UmVzdWx0IiwiYXJjaGl0ZWN0dXJlIiwidmVuZG9yIiwibW9kZWwiLCJnZXRQcmVmZXJyZWRDb2RlY3MiLCJwcmVmZXJyZWRDb2RlYyIsImNvZGVjVG9SZW1vdmUiLCJSVENSdHBSZWNlaXZlciIsImNhcGFiaWxpdGllcyIsImdldENhcGFiaWxpdGllcyIsInByZWZlcnJlZCIsInBhcnRpYWxseVByZWZlcnJlZCIsInVucHJlZmVycmVkIiwicHJlZmVycmVkQ29kZWNNaW1lVHlwZSIsImNvZGVjVG9SZW1vdmVNaW1lVHlwZSIsImNvZGVjIiwiY29kZWNzIiwiY29kZWNNaW1lVHlwZSIsIm1pbWVUeXBlIiwic2hvdWxkUmVtb3ZlQ29kZWMiLCJpc1ByZWZlcnJlZENvZGVjIiwic2RwRm10cExpbmUiLCJpbmNsdWRlcyIsInVuc2hpZnQiLCJnZXRHZW5lcmljU2RwIiwiZGlyZWN0aW9uIiwidGVtcFBjIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJhZGRUcmFuc2NlaXZlciIsIm9mZmVyIiwiY3JlYXRlT2ZmZXIiLCJzZHAiLCJnZXRUcmFuc2NlaXZlcnMiLCJ0Iiwic3RvcCIsImNsb3NlIiwiZ2V0Uk5PcHRpbWFsQ29kZWMiLCJvc05hbWUiLCJzZnVFdmVudEtpbmRzIiwic3Vic2NyaWJlck9mZmVyIiwicHVibGlzaGVyQW5zd2VyIiwiY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkIiwiYXVkaW9MZXZlbENoYW5nZWQiLCJjaGFuZ2VQdWJsaXNoUXVhbGl0eSIsInBhcnRpY2lwYW50Sm9pbmVkIiwicGFydGljaXBhbnRMZWZ0IiwiZG9taW5hbnRTcGVha2VyQ2hhbmdlZCIsImpvaW5SZXNwb25zZSIsImhlYWx0aENoZWNrUmVzcG9uc2UiLCJ0cmFja1B1Ymxpc2hlZCIsInRyYWNrVW5wdWJsaXNoZWQiLCJjYWxsR3JhbnRzVXBkYXRlZCIsImdvQXdheSIsInBpbnNVcGRhdGVkIiwiY2FsbEVuZGVkIiwicGFydGljaXBhbnRVcGRhdGVkIiwicGFydGljaXBhbnRNaWdyYXRpb25Db21wbGV0ZSIsImlzU2Z1RXZlbnQiLCJldmVudE5hbWUiLCJoYXNPd25Qcm9wZXJ0eSIsIkRpc3BhdGNoZXIiLCJzdWJzY3JpYmVycyIsImRpc3BhdGNoIiwibG9nVGFnIiwiZXZlbnRLaW5kIiwiZXZlbnRQYXlsb2FkIiwicGF5bG9hZCIsImxpc3RlbmVycyIsImZuIiwiZSIsIm9uIiwiX2EiLCJvZmYiLCJvZmZBbGwiLCJJY2VUcmlja2xlQnVmZmVyIiwic3Vic2NyaWJlckNhbmRpZGF0ZXMiLCJSZXBsYXlTdWJqZWN0IiwicHVibGlzaGVyQ2FuZGlkYXRlcyIsInBlZXJUeXBlIiwiU1VCU0NSSUJFUiIsIlBVQkxJU0hFUl9VTlNQRUNJRklFRCIsImdldEljZUNhbmRpZGF0ZSIsImNhbmRpZGF0ZSIsInVzZXJuYW1lRnJhZ21lbnQiLCJzcGxpdHRlZENhbmRpZGF0ZSIsInVmcmFnSW5kZXgiLCJmaW5kSW5kZXgiLCJKU09OIiwic3RyaW5naWZ5IiwidG9KU09OIiwiREVGQVVMVF9CSVRSQVRFIiwiZGVmYXVsdFRhcmdldFJlc29sdXRpb24iLCJiaXRyYXRlIiwid2lkdGgiLCJoZWlnaHQiLCJkZWZhdWx0Qml0cmF0ZVBlclJpZCIsInEiLCJoIiwiZmluZE9wdGltYWxWaWRlb0xheWVycyIsInZpZGVvVHJhY2siLCJ0YXJnZXRSZXNvbHV0aW9uIiwicHVibGlzaE9wdGlvbnMiLCJvcHRpbWFsVmlkZW9MYXllcnMiLCJzZXR0aW5ncyIsImdldFNldHRpbmdzIiwidyIsInByZWZlcnJlZEJpdHJhdGUiLCJiaXRyYXRlRG93bnNjYWxlRmFjdG9yIiwibWF4Qml0cmF0ZSIsImdldENvbXB1dGVkTWF4Qml0cmF0ZSIsImRvd25zY2FsZUZhY3RvciIsImJpdHJhdGVGYWN0b3IiLCJyaWQiLCJhY3RpdmUiLCJyb3VuZCIsInNjYWxlUmVzb2x1dGlvbkRvd25CeSIsIm1heEZyYW1lcmF0ZSIsIndpdGhTaW11bGNhc3RDb25zdHJhaW50cyIsImN1cnJlbnRXaWR0aCIsImN1cnJlbnRIZWlnaHQiLCJ0YXJnZXRXaWR0aCIsInRhcmdldEhlaWdodCIsInRhcmdldEJpdHJhdGUiLCJjdXJyZW50UGl4ZWxzIiwidGFyZ2V0UGl4ZWxzIiwicmVkdWN0aW9uRmFjdG9yIiwibGF5ZXJzIiwic2l6ZSIsImxheWVyIiwicmlkTWFwcGluZyIsImluZGV4IiwiZmluZE9wdGltYWxTY3JlZW5TaGFyaW5nTGF5ZXJzIiwiZGVmYXVsdE1heEJpdHJhdGUiLCJzY3JlZW5TaGFyZVNldHRpbmdzIiwicHJlZmVyZW5jZXMiLCJlbnN1cmVFeGhhdXN0ZWQiLCJ4IiwidHJhY2tUeXBlVG9QYXJ0aWNpcGFudFN0cmVhbUtleSIsInRyYWNrVHlwZSIsIlNDUkVFTl9TSEFSRSIsIlNDUkVFTl9TSEFSRV9BVURJTyIsIlZJREVPIiwiQVVESU8iLCJVTlNQRUNJRklFRCIsIm11dGVUeXBlVG9UcmFja1R5cGUiLCJtdXRlVHlwZSIsInRvVHJhY2tUeXBlIiwid2l0aG91dENvbmN1cnJlbmN5IiwiY3JlYXRlUnVubmVyIiwid3JhcFdpdGhDb250aW51YXRpb25UcmFja2luZyIsIndpdGhDYW5jZWxsYXRpb24iLCJ3cmFwV2l0aENhbmNlbGxhdGlvbiIsInBlbmRpbmdQcm9taXNlcyIsIk1hcCIsInNldHRsZWQiLCJ0YWciLCJnZXQiLCJ3cmFwcGVyIiwicnVuIiwid3JhcHBlZCIsIm9uQ29udGludWVkIiwicGVuZGluZyIsInNldCIsImhhc0NvbnRpbnVhdGlvbiIsImZpbmFsbHkiLCJkZWxldGUiLCJhYyIsIkFib3J0Q29udHJvbGxlciIsInJlc29sdmUiLCJhYm9ydCIsImlzRnVuY3Rpb25QYXRjaCIsInVwZGF0ZSIsImdldEN1cnJlbnRWYWx1ZSIsIm9ic2VydmFibGUkIiwiY29tYmluZUxhdGVzdCIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwic2V0Q3VycmVudFZhbHVlIiwic3ViamVjdCIsImNyZWF0ZVN1YnNjcmlwdGlvbiIsIm9ic2VydmFibGUiLCJoYW5kbGVyIiwic3Vic2NyaXB0aW9uIiwiY3JlYXRlU2FmZUFzeW5jU3Vic2NyaXB0aW9uIiwiU3ltYm9sIiwiQ2FsbGluZ1N0YXRlIiwiU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlIiwiY29ubmVjdGVkVXNlclN1YmplY3QiLCJCZWhhdmlvclN1YmplY3QiLCJjYWxsc1N1YmplY3QiLCJzZXRDb25uZWN0ZWRVc2VyIiwidXNlciIsIlJ4VXRpbHMuc2V0Q3VycmVudFZhbHVlIiwic2V0Q2FsbHMiLCJjYWxscyIsInJlZ2lzdGVyQ2FsbCIsImMiLCJjaWQiLCJ1bnJlZ2lzdGVyQ2FsbCIsImZpbmRDYWxsIiwiaWQiLCJzdGF0ZSIsImNhbGxpbmdTdGF0ZSIsIkxFRlQiLCJsZWF2ZSIsInJlYXNvbiIsImNhdGNoIiwiY29ubmVjdGVkVXNlciIsIlJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlIiwiU3RyZWFtVmlkZW9SZWFkT25seVN0YXRlU3RvcmUiLCJzdG9yZSIsImNvbm5lY3RlZFVzZXIkIiwiYXNPYnNlcnZhYmxlIiwiY2FsbHMkIiwiY29tYmluZUNvbXBhcmF0b3JzIiwiY29tcGFyYXRvcnMiLCJhIiwiYiIsImNvbXBhcmF0b3IiLCJkZXNjZW5kaW5nIiwiY29uZGl0aW9uYWwiLCJwcmVkaWNhdGUiLCJub29wQ29tcGFyYXRvciIsImhhc1ZpZGVvIiwicCIsInB1Ymxpc2hlZFRyYWNrcyIsImhhc0F1ZGlvIiwiaGFzU2NyZWVuU2hhcmUiLCJoYXNTY3JlZW5TaGFyZUF1ZGlvIiwiaXNQaW5uZWQiLCJwaW4iLCJpc0xvY2FsUGluIiwicGlubmVkQXQiLCJkb21pbmFudFNwZWFrZXIiLCJpc0RvbWluYW50U3BlYWtlciIsInNwZWFraW5nIiwiaXNTcGVha2luZyIsInNjcmVlblNoYXJpbmciLCJwdWJsaXNoaW5nVmlkZW8iLCJwdWJsaXNoaW5nQXVkaW8iLCJwaW5uZWQiLCJyZWFjdGlvblR5cGUiLCJyZWFjdGlvbiIsInJvbGUiLCJyb2xlcyIsImhhc0FueVJvbGUiLCJzb21lIiwiaWZJbnZpc2libGVCeSIsInZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlIiwiSU5WSVNJQkxFIiwiaWZJbnZpc2libGVPclVua25vd25CeSIsIlVOS05PV04iLCJkZWZhdWx0U29ydFByZXNldCIsInNwZWFrZXJMYXlvdXRTb3J0UHJlc2V0IiwicGFnaW5hdGVkTGF5b3V0U29ydFByZXNldCIsImxpdmVzdHJlYW1PckF1ZGlvUm9vbVNvcnRQcmVzZXQiLCJkZWZhdWx0RWdyZXNzIiwiYnJvYWRjYXN0aW5nIiwiaGxzIiwicGxheWxpc3RfdXJsIiwicnRtcHMiLCJiYWNrc3RhZ2VTdWJqZWN0IiwiYmxvY2tlZFVzZXJJZHNTdWJqZWN0IiwiY3JlYXRlZEF0U3ViamVjdCIsImVuZGVkQXRTdWJqZWN0Iiwic3RhcnRzQXRTdWJqZWN0IiwidXBkYXRlZEF0U3ViamVjdCIsImNyZWF0ZWRCeVN1YmplY3QiLCJjdXN0b21TdWJqZWN0IiwiZWdyZXNzU3ViamVjdCIsImluZ3Jlc3NTdWJqZWN0IiwicmVjb3JkaW5nU3ViamVjdCIsInNlc3Npb25TdWJqZWN0Iiwic2V0dGluZ3NTdWJqZWN0IiwidHJhbnNjcmliaW5nU3ViamVjdCIsImVuZGVkQnlTdWJqZWN0IiwidGh1bWJuYWlsc1N1YmplY3QiLCJtZW1iZXJzU3ViamVjdCIsIm93bkNhcGFiaWxpdGllc1N1YmplY3QiLCJjYWxsaW5nU3RhdGVTdWJqZWN0Iiwic3RhcnRlZEF0U3ViamVjdCIsInBhcnRpY2lwYW50Q291bnRTdWJqZWN0IiwiYW5vbnltb3VzUGFydGljaXBhbnRDb3VudFN1YmplY3QiLCJwYXJ0aWNpcGFudHNTdWJqZWN0IiwiY2FsbFN0YXRzUmVwb3J0U3ViamVjdCIsIm9ycGhhbmVkVHJhY2tzIiwic29ydFBhcnRpY2lwYW50c0J5Iiwic2V0U29ydFBhcnRpY2lwYW50c0J5IiwicHMiLCJzZXRQYXJ0aWNpcGFudENvdW50IiwiY291bnQiLCJzZXRTdGFydGVkQXQiLCJzdGFydGVkQXQiLCJzZXRBbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50Iiwic2V0UGFydGljaXBhbnRzIiwicGFydGljaXBhbnRzIiwic2V0Q2FsbGluZ1N0YXRlIiwic2V0Q2FsbFN0YXRzUmVwb3J0IiwicmVwb3J0Iiwic2V0TWVtYmVycyIsIm1lbWJlcnMiLCJzZXRPd25DYXBhYmlsaXRpZXMiLCJzZXRFbmRlZEF0IiwiZW5kZWRBdCIsImZpbmRQYXJ0aWNpcGFudEJ5U2Vzc2lvbklkIiwic2Vzc2lvbklkIiwiZ2V0UGFydGljaXBhbnRMb29rdXBCeVNlc3Npb25JZCIsInJlZHVjZSIsImxvb2t1cFRhYmxlIiwicGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudCIsInRoZVBhdGNoIiwidXBkYXRlZFBhcnRpY2lwYW50IiwidXBkYXRlT3JBZGRQYXJ0aWNpcGFudCIsImFkZCIsIm5leHRQYXJ0aWNpcGFudHMiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJrZXlzIiwidXBkYXRlRnJvbUV2ZW50IiwiZXZlbnQiLCJldmVudEhhbmRsZXJzIiwic2V0U2VydmVyU2lkZVBpbnMiLCJwaW5zIiwicGluc0xvb2t1cCIsImxvb2t1cCIsInNlcnZlclNpZGVQaW5uZWRBdCIsInJlZ2lzdGVyT3JwaGFuZWRUcmFjayIsIm9ycGhhbmVkVHJhY2siLCJyZW1vdmVPcnBoYW5lZFRyYWNrIiwibyIsInRha2VPcnBoYW5lZFRyYWNrcyIsInRyYWNrTG9va3VwUHJlZml4Iiwib3JwaGFucyIsIm9ycGhhbiIsInVwZGF0ZUZyb21DYWxsUmVzcG9uc2UiLCJiYWNrc3RhZ2UiLCJibG9ja2VkX3VzZXJfaWRzIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJzdGFydHNfYXQiLCJlbmRlZF9hdCIsImNyZWF0ZWRfYnkiLCJjdXN0b20iLCJlZ3Jlc3MiLCJpbmdyZXNzIiwicmVjb3JkaW5nIiwic2Vzc2lvbiIsInVwZGF0ZVBhcnRpY2lwYW50Q291bnRGcm9tU2Vzc2lvbiIsInRyYW5zY3JpYmluZyIsInRodW1ibmFpbHMiLCJ1cGRhdGVGcm9tU2Z1Q2FsbFN0YXRlIiwiY2FsbFN0YXRlIiwiY3VycmVudFNlc3Npb25JZCIsInJlY29ubmVjdERldGFpbHMiLCJwYXJ0aWNpcGFudENvdW50IiwibG9jYWxQdWJsaXNoZWRUcmFja3MiLCJhbm5vdW5jZWRUcmFja3MiLCJwYXJ0aWNpcGFudExvb2t1cCIsImV4aXN0aW5nUGFydGljaXBhbnQiLCJpc0xvY2FsUGFydGljaXBhbnQiLCJhc3NpZ24iLCJzY3JlZW5TaGFyZVRyYWNrIiwidG90YWwiLCJhbm9ueW1vdXMiLCJ1cGRhdGVGcm9tTWVtYmVyUmVtb3ZlZCIsImluZGV4T2YiLCJ1c2VyX2lkIiwidXBkYXRlRnJvbU1lbWJlckFkZGVkIiwidXBkYXRlRnJvbUhMU0Jyb2FkY2FzdFN0b3BwZWQiLCJ1cGRhdGVGcm9tSExTQnJvYWRjYXN0aW5nRmFpbGVkIiwidXBkYXRlRnJvbUhMU0Jyb2FkY2FzdFN0YXJ0ZWQiLCJobHNfcGxheWxpc3RfdXJsIiwiSk9JTkVEIiwiYnlSb2xlQ291bnQiLCJwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZSIsImNvdW50QnlSb2xlIiwiYW5vbnltb3VzX3BhcnRpY2lwYW50X2NvdW50IiwidXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudENvdW50VXBkYXRlIiwidXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudExlZnQiLCJ1c2VyX3Nlc3Npb25faWQiLCJ1cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkIiwic2hvdWxkSW5zZXJ0UGFydGljaXBhbnQiLCJ1cGRhdGVkUGFydGljaXBhbnRzIiwiaW5jcmVtZW50IiwidXBkYXRlTWVtYmVycyIsIm1lbWJlciIsIm1lbWJlclVwZGF0ZSIsInVwZGF0ZVBhcnRpY2lwYW50UmVhY3Rpb24iLCJlbW9qaV9jb2RlIiwidXNlcklkIiwidW5ibG9ja1VzZXIiLCJjdXJyZW50IiwiYmxvY2tVc2VyIiwidXBkYXRlT3duQ2FwYWJpbGl0aWVzIiwibG9jYWxQYXJ0aWNpcGFudCIsIm93bl9jYXBhYmlsaXRpZXMiLCJwYXJ0aWNpcGFudHMkIiwicGlwZSIsInNvcnQiLCJzaGFyZVJlcGxheSIsImJ1ZmZlclNpemUiLCJyZWZDb3VudCIsImxvY2FsUGFydGljaXBhbnQkIiwicmVtb3RlUGFydGljaXBhbnRzJCIsInBpbm5lZFBhcnRpY2lwYW50cyQiLCJkb21pbmFudFNwZWFrZXIkIiwiaGFzT25nb2luZ1NjcmVlblNoYXJlJCIsImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwiY3JlYXRlZEF0JCIsImVuZGVkQXQkIiwic3RhcnRzQXQkIiwic3RhcnRlZEF0JCIsInVwZGF0ZWRBdCQiLCJjYWxsU3RhdHNSZXBvcnQkIiwibWVtYmVycyQiLCJjcmVhdGVkQnkkIiwiY3VzdG9tJCIsImVncmVzcyQiLCJpbmdyZXNzJCIsInNlc3Npb24kIiwic2V0dGluZ3MkIiwiZW5kZWRCeSQiLCJ0aHVtYm5haWxzJCIsImlzU2hhbGxvd0VxdWFsIiwiaXRlbSIsImR1YyIsImFub255bW91c1BhcnRpY2lwYW50Q291bnQkIiwiYmxvY2tlZFVzZXJJZHMkIiwiYmFja3N0YWdlJCIsImNhbGxpbmdTdGF0ZSQiLCJvd25DYXBhYmlsaXRpZXMkIiwicGFydGljaXBhbnRDb3VudCQiLCJyZWNvcmRpbmckIiwidHJhbnNjcmliaW5nJCIsImFub255bW91c1BhcnRpY2lwYW50Q291bnQiLCJyZW1vdGVQYXJ0aWNpcGFudHMiLCJwaW5uZWRQYXJ0aWNpcGFudHMiLCJoYXNPbmdvaW5nU2NyZWVuU2hhcmUiLCJjYWxsU3RhdHNSZXBvcnQiLCJvd25DYXBhYmlsaXRpZXMiLCJibG9ja2VkVXNlcklkcyIsImNyZWF0ZWRBdCIsInN0YXJ0c0F0IiwidXBkYXRlZEF0IiwiY3JlYXRlZEJ5IiwiZW5kZWRCeSIsImdldFJ0cE1hcCIsImxpbmUiLCJydHBSZWdleCIsInJ0cE1hdGNoIiwiZXhlYyIsIm9yaWdpbmFsIiwiZ2V0Rm10cCIsImZtdHBSZWdleCIsImZtdHBNYXRjaCIsImNvbmZpZyIsImdldE1lZGlhIiwibWVkaWFUeXBlIiwicmVnZXgiLCJSZWdFeHAiLCJtZWRpYVdpdGhQb3J0cyIsImNvZGVjT3JkZXIiLCJnZXRNZWRpYVNlY3Rpb24iLCJtZWRpYSIsInJ0cE1hcCIsImZtdHAiLCJpc1RoZVJlcXVpcmVkTWVkaWFTZWN0aW9uIiwiaXNWYWxpZExpbmUiLCJ0ZXN0IiwiX21lZGlhIiwicnRwTWFwTGluZSIsImZtdHBMaW5lIiwiZ2V0T3B1c0ZtdHAiLCJzZWN0aW9uIiwiY29kZWNJZCIsInRvZ2dsZUR0eCIsImVuYWJsZSIsIm9wdXNGbXRwIiwibWF0Y2hEdHgiLCJyZXF1aXJlZER0eENvbmZpZyIsIm5ld0ZtdHAiLCJlbmFibGVIaWdoUXVhbGl0eUF1ZGlvIiwidHJhY2tNaWQiLCJwYXJzZWRTZHAiLCJTRFAiLCJhdWRpb01lZGlhIiwiU3RyaW5nIiwibWlkIiwib3B1c1J0cCIsInJ0cCIsIndyaXRlIiwiUHVibGlzaGVyIiwiY29ubmVjdGlvbkNvbmZpZyIsInNmdUNsaWVudCIsImRpc3BhdGNoZXIiLCJpc0R0eEVuYWJsZWQiLCJpc1JlZEVuYWJsZWQiLCJvblVucmVjb3ZlcmFibGVFcnJvciIsInRyYW5zY2VpdmVyUmVnaXN0cnkiLCJwdWJsaXNoT3B0aW9uc1BlclRyYWNrVHlwZSIsInRyYW5zY2VpdmVySW5pdE9yZGVyIiwidHJhY2tLaW5kTWFwcGluZyIsInRyYWNrTGF5ZXJzQ2FjaGUiLCJpc0ljZVJlc3RhcnRpbmciLCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsInBjIiwib25JY2VDYW5kaWRhdGUiLCJvbk5lZ290aWF0aW9uTmVlZGVkIiwib25JY2VDYW5kaWRhdGVFcnJvciIsIm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlIiwib25JY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZSIsIm9uU2lnbmFsaW5nU3RhdGVDaGFuZ2UiLCJzdG9wVHJhY2tzIiwic3RvcFB1Ymxpc2hpbmciLCJkZXRhY2hFdmVudEhhbmRsZXJzIiwidW5zdWJzY3JpYmVPbkljZVJlc3RhcnQiLCJwdWJsaXNoU3RyZWFtIiwibWVkaWFTdHJlYW0iLCJ0cmFjayIsIm9wdHMiLCJyZWFkeVN0YXRlIiwidHJhbnNjZWl2ZXIiLCJzZW5kZXIiLCJoYW5kbGVUcmFja0VuZGVkIiwibm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkIiwidmlkZW8iLCJ0YXJnZXRfcmVzb2x1dGlvbiIsInNjcmVlblNoYXJlQml0cmF0ZSIsInNjcmVlbnNoYXJpbmciLCJ2aWRlb0VuY29kaW5ncyIsImVuYWJsZWQiLCJzdHJlYW1zIiwic2VuZEVuY29kaW5ncyIsImNvZGVjUHJlZmVyZW5jZXMiLCJnZXRDb2RlY1ByZWZlcmVuY2VzIiwic2V0Q29kZWNQcmVmZXJlbmNlcyIsInByZXZpb3VzVHJhY2siLCJyZXBsYWNlVHJhY2siLCJ1bnB1Ymxpc2hTdHJlYW0iLCJzdG9wVHJhY2siLCJpc1B1Ymxpc2hpbmciLCJpc011dGVkIiwidXBkYXRlTXV0ZVN0YXRlIiwiYXVkaW9PclZpZGVvT3JTY3JlZW5TaGFyZVN0cmVhbSIsImdldFNlbmRlcnMiLCJzaWduYWxpbmdTdGF0ZSIsInJlbW92ZVRyYWNrIiwidXBkYXRlVmlkZW9QdWJsaXNoUXVhbGl0eSIsImVuYWJsZWRMYXllcnMiLCJ2aWRlb1NlbmRlciIsInBhcmFtcyIsImdldFBhcmFtZXRlcnMiLCJlbmNvZGluZ3MiLCJjaGFuZ2VkIiwiZW5hYmxlZFJpZHMiLCJseSIsImVuYyIsInNob3VsZEVuYWJsZSIsInZscyIsImFjdGl2ZUxheWVycyIsInNldFBhcmFtZXRlcnMiLCJnZXRTdGF0cyIsInNlbGVjdG9yIiwiZGVmYXVsdEF1ZGlvQ29kZWMiLCJpY2VDYW5kaWRhdGUiLCJzZXRTZnVDbGllbnQiLCJyZXN0YXJ0SWNlIiwibmVnb3RpYXRlIiwibXVuZ2VDb2RlY3MiLCJ0cmFja0luZm9zIiwiZ2V0QW5ub3VuY2VkVHJhY2tzIiwic2V0TG9jYWxEZXNjcmlwdGlvbiIsInRyYWNrcyIsInNldFJlbW90ZURlc2NyaXB0aW9uIiwiaWNlVHJpY2tsZUJ1ZmZlciIsImFkZEljZUNhbmRpZGF0ZSIsImV4dHJhY3RNaWQiLCJtc2lkIiwiaGV1cmlzdGljTWlkIiwibG9jYWxEZXNjcmlwdGlvbiIsIm9wdGltYWxMYXllcnMiLCJpc1RyYWNrTGl2ZSIsInB1Ymxpc2hPcHRzIiwib3B0aW1hbExheWVyIiwiZnBzIiwicXVhbGl0eSIsInJpZFRvVmlkZW9RdWFsaXR5IiwidmlkZW9EaW1lbnNpb24iLCJpc0F1ZGlvVHJhY2siLCJ0cmFja1NldHRpbmdzIiwiaXNTdGVyZW8iLCJjaGFubmVsQ291bnQiLCJ0cmFja0lkIiwic3RlcmVvIiwiZHR4IiwicmVkIiwibXV0ZWQiLCJlcnJvck1lc3NhZ2UiLCJSVENQZWVyQ29ubmVjdGlvbkljZUVycm9yRXZlbnQiLCJlcnJvckNvZGUiLCJlcnJvclRleHQiLCJpY2VTdGF0ZSIsImljZUNvbm5lY3Rpb25TdGF0ZSIsIlJFQ09OTkVDVElORyIsImljZUdhdGhlcmluZ1N0YXRlIiwiTE9XX1VOU1BFQ0lGSUVEIiwiTUlEIiwiSElHSCIsIlN1YnNjcmliZXIiLCJoYW5kbGVPblRyYWNrIiwidW5yZWdpc3Rlck9uU3Vic2NyaWJlck9mZmVyIiwidW5yZWdpc3Rlck9uSWNlUmVzdGFydCIsImNvbm5lY3Rpb25TdGF0ZSIsInByZXZpb3VzSXNJY2VSZXN0YXJ0aW5nIiwicHJpbWFyeVN0cmVhbSIsInJhd1RyYWNrVHlwZSIsInBhcnRpY2lwYW50VG9VcGRhdGUiLCJ0cmFja0RlYnVnSW5mbyIsInN0cmVhbUtpbmRQcm9wIiwicHJldmlvdXNTdHJlYW0iLCJnZXRUcmFja3MiLCJhbnN3ZXIiLCJjcmVhdGVBbnN3ZXIiLCJzdWJzY3JpYmVyT2ZmZXJDb25jdXJyZW5jeVRhZyIsImljZVJlc3RhcnRDb25jdXJyZW5jeVRhZyIsImNyZWF0ZVdlYlNvY2tldFNpZ25hbENoYW5uZWwiLCJlbmRwb2ludCIsIm9uTWVzc2FnZSIsIndzIiwiV2ViU29ja2V0IiwiYmluYXJ5VHlwZSIsImRhdGEiLCJBcnJheUJ1ZmZlciIsImZyb21CaW5hcnkiLCJmcm9tSnNvblN0cmluZyIsInByb21pc2VXaXRoUmVzb2x2ZXJzIiwicmVqZWN0IiwiX3Jlc29sdmUiLCJfcmVqZWN0IiwiaXNSZXNvbHZlZCIsImlzUmVqZWN0ZWQiLCJyZXNvbHZlciIsInJlamVjdGVyIiwiU3RyZWFtU2Z1Q2xpZW50IiwiY3JlZGVudGlhbHMiLCJqb2luUmVzcG9uc2VUaW1lb3V0Iiwib25TaWduYWxDbG9zZSIsInN0cmVhbUNsaWVudCIsImlzTGVhdmluZyIsInBpbmdJbnRlcnZhbEluTXMiLCJ1bmhlYWx0aHlUaW1lb3V0SW5NcyIsInJlc3RvcmVXZWJTb2NrZXRDb25jdXJyZW5jeVRhZyIsImpvaW5SZXNwb25zZVRhc2siLCJhYm9ydENvbnRyb2xsZXIiLCJjcmVhdGVXZWJTb2NrZXQiLCJzaWduYWxXcyIsInNlcnZlciIsIndzX2VuZHBvaW50IiwibGFzdE1lc3NhZ2VUaW1lc3RhbXAiLCJzY2hlZHVsZUNvbm5lY3Rpb25DaGVjayIsImhhbmRsZVdlYlNvY2tldENsb3NlIiwicmVzdG9yZVdlYlNvY2tldCIsInNpZ25hbFJlYWR5Iiwib25PcGVuIiwiY2xlYW5VcFdlYlNvY2tldCIsIm5ldHdvcmtBdmFpbGFibGVUYXNrIiwiY2xlYXJJbnRlcnZhbCIsImtlZXBBbGl2ZUludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwiY29ubmVjdGlvbkNoZWNrVGltZW91dCIsIk5PUk1BTF9DTE9TVVJFIiwiT1BFTiIsImRpc3Bvc2UiLCJ1bnN1YnNjcmliZUljZVRyaWNrbGUiLCJ1bnN1YnNjcmliZU5ldHdvcmtDaGFuZ2VkIiwibWlncmF0ZUF3YXlUaW1lb3V0IiwibWlncmF0aW9uVGFzayIsImxlYXZlQW5kQ2xvc2UiLCJqb2luVGFzayIsIm5vdGlmeUxlYXZlIiwibXV0ZVN0YXRlcyIsInN0YXRzIiwiZW50ZXJNaWdyYXRpb24iLCJ0YXNrIiwidGltZW91dElkIiwia2VlcEFsaXZlIiwic2VuZCIsInJlcXVlc3RQYXlsb2FkIiwiam9pblJlcXVlc3QiLCJ0b2tlbiIsInBpbmciLCJoZWFsdGhDaGVja1JlcXVlc3QiLCJsZWF2ZUNhbGxSZXF1ZXN0IiwibXNnSnNvbiIsImVkZ2VOYW1lIiwidG9CaW5hcnkiLCJzZXRJbnRlcnZhbCIsInRpbWVTaW5jZUxhc3RNZXNzYWdlIiwiRVJST1JfQ09OTkVDVElPTl9VTkhFQUxUSFkiLCJlZGdlX25hbWUiLCJ1cmwiLCJpbnRlcmNlcHRvcnMiLCJBdXRob3JpemF0aW9uIiwib25saW5lIiwiaXNIZWFsdGh5IiwiRElTUE9TRV9PTERfU09DS0VUIiwidG9SdGNDb25maWd1cmF0aW9uIiwiaWNlU2VydmVycyIsImljZSIsInVybHMiLCJ1c2VybmFtZSIsImNyZWRlbnRpYWwiLCJwYXNzd29yZCIsIndhdGNoQ2FsbEFjY2VwdGVkIiwib25DYWxsQWNjZXB0ZWQiLCJjdXJyZW50VXNlcklkIiwiUklOR0lORyIsIndhdGNoQ2FsbFJlamVjdGVkIiwib25DYWxsUmVqZWN0ZWQiLCJldmVudENhbGwiLCJjYWxsU2Vzc2lvbiIsInJlamVjdGVkQnkiLCJyZWplY3RlZF9ieSIsImlzQ3JlYXRlZEJ5TWUiLCJldmVyeW9uZUVsc2VSZWplY3RlZCIsImV2ZXJ5Iiwid2F0Y2hDYWxsRW5kZWQiLCJvbkNhbGxFbmRlZCIsIkpPSU5JTkciLCJ3YXRjaFNmdUNhbGxFbmRlZCIsIndhdGNoQ2FsbEdyYW50c1VwZGF0ZWQiLCJvbkNhbGxHcmFudHNVcGRhdGVkIiwiY3VycmVudEdyYW50cyIsImNhblB1Ymxpc2hBdWRpbyIsImNhblB1Ymxpc2hWaWRlbyIsImNhblNjcmVlbnNoYXJlIiwibmV4dENhcGFiaWxpdGllcyIsImNhcGFiaWxpdHkiLCJ3YXRjaENoYW5nZVB1Ymxpc2hRdWFsaXR5IiwidmlkZW9TZW5kZXJzIiwidXBkYXRlUHVibGlzaFF1YWxpdHkiLCJ3YXRjaENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCIsImNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlcyIsInBhdGNoZXMiLCJjb25uZWN0aW9uUXVhbGl0eSIsIndhdGNoUGFydGljaXBhbnRDb3VudENoYW5nZWQiLCJ3YXRjaExpdmVFbmRlZCIsIkxJVkVfRU5ERUQiLCJwZXJtaXNzaW9uc0NvbnRleHQiLCJoYXNQZXJtaXNzaW9uIiwid2F0Y2hTZnVFcnJvclJlcG9ydHMiLCJyZWNvbm5lY3RTdHJhdGVneSIsIndhdGNoUGluc1VwZGF0ZWQiLCJvblBpbnNVcGRhdGVkIiwiaGFuZGxlUmVtb3RlU29mdE11dGUiLCJjYXVzZSIsIk1PREVSQVRJT04iLCJjYW1lcmEiLCJkaXNhYmxlIiwibWljcm9waG9uZSIsInNjcmVlblNoYXJlIiwid2F0Y2hQYXJ0aWNpcGFudEpvaW5lZCIsIm9uUGFydGljaXBhbnRKb2luZWQiLCJyZWNvbmNpbGVPcnBoYW5lZFRyYWNrcyIsIndhdGNoUGFydGljaXBhbnRMZWZ0Iiwib25QYXJ0aWNpcGFudExlZnQiLCJ3YXRjaFBhcnRpY2lwYW50VXBkYXRlZCIsIm9uUGFydGljaXBhbnRVcGRhdGVkIiwid2F0Y2hUcmFja1B1Ymxpc2hlZCIsIm9uVHJhY2tQdWJsaXNoZWQiLCJ1bmlxdWUiLCJ3YXRjaFRyYWNrVW5wdWJsaXNoZWQiLCJvblRyYWNrVW5wdWJsaXNoZWQiLCJhcnIiLCJvcnBoYW5UcmFja3MiLCJyZWNvbmNpbGVkVHJhY2tzIiwid2F0Y2hEb21pbmFudFNwZWFrZXJDaGFuZ2VkIiwid2F0Y2hBdWRpb0xldmVsQ2hhbmdlZCIsImF1ZGlvTGV2ZWxzIiwiYXVkaW9MZXZlbCIsInJlZ2lzdGVyRXZlbnRIYW5kbGVycyIsInJpbmdpbmciLCJyZWdpc3RlclJpbmdpbmdDYWxsRXZlbnRIYW5kbGVycyIsImNvb3JkaW5hdG9yUmluZ0V2ZW50cyIsImZsYXR0ZW4iLCJnZXRTZGtTaWduYXR1cmUiLCJjbGllbnREZXRhaWxzIiwicGxhdGZvcm0iLCJzZGtOYW1lIiwiZ2V0U2RrTmFtZSIsInNka1ZlcnNpb24iLCJnZXRTZGtWZXJzaW9uIiwiUkVBQ1QiLCJSRUFDVF9OQVRJVkUiLCJjcmVhdGVTdGF0c1JlcG9ydGVyIiwic3Vic2NyaWJlciIsInB1Ymxpc2hlciIsImRhdGFjZW50ZXIiLCJwb2xsaW5nSW50ZXJ2YWxJbk1zIiwiZ2V0UmF3U3RhdHNGb3JUcmFjayIsImdldFN0YXRzRm9yU3RyZWFtIiwic3RhdHNGb3JTdHJlYW0iLCJ0cmFuc2Zvcm0iLCJ0cmFja0tpbmQiLCJzdGFydFJlcG9ydGluZ1N0YXRzRm9yIiwic2Vzc2lvbklkc1RvVHJhY2siLCJzdG9wUmVwb3J0aW5nU3RhdHNGb3IiLCJTZXQiLCJwYXJ0aWNpcGFudFN0YXRzIiwic2Vzc2lvbklkcyIsImhhcyIsIm1lcmdlZFN0cmVhbSIsIk1lZGlhU3RyZWFtIiwidmlkZW9TdHJlYW0iLCJnZXRWaWRlb1RyYWNrcyIsImF1ZGlvU3RyZWFtIiwiZ2V0QXVkaW9UcmFja3MiLCJzdWJzY3JpYmVyU3RhdHMiLCJwdWJsaXNoZXJTdGF0cyIsImFsbCIsImFnZ3JlZ2F0ZSIsImdldEVtcHR5U3RhdHMiLCJzdWJzY3JpYmVyUmF3U3RhdHMiLCJwdWJsaXNoZXJSYXdTdGF0cyIsInRpbWVzdGFtcCIsImxvb3AiLCJzdGF0IiwicnRjU3RyZWFtU3RhdHMiLCJ0cmFuc3BvcnRJZCIsInJvdW5kVHJpcFRpbWUiLCJkdGxzU3RhdGUiLCJjYW5kaWRhdGVQYWlyIiwic2VsZWN0ZWRDYW5kaWRhdGVQYWlySWQiLCJjdXJyZW50Um91bmRUcmlwVGltZSIsImJ5dGVzU2VudCIsImJ5dGVzUmVjZWl2ZWQiLCJmcmFtZUhlaWdodCIsImZyYW1lV2lkdGgiLCJmcmFtZXNQZXJTZWNvbmQiLCJqaXR0ZXIiLCJxdWFsaXR5TGltaXRhdGlvblJlYXNvbiIsInNzcmMiLCJyYXdTdGF0cyIsInJhd1JlcG9ydCIsInRvdGFsQnl0ZXNTZW50IiwidG90YWxCeXRlc1JlY2VpdmVkIiwiYXZlcmFnZUppdHRlckluTXMiLCJhdmVyYWdlUm91bmRUcmlwVGltZUluTXMiLCJxdWFsaXR5TGltaXRhdGlvblJlYXNvbnMiLCJoaWdoZXN0RnJhbWVXaWR0aCIsImhpZ2hlc3RGcmFtZUhlaWdodCIsImhpZ2hlc3RGcmFtZXNQZXJTZWNvbmQiLCJhZ2dyZWdhdGVkU3RhdHMiLCJtYXhBcmVhIiwiYXJlYSIsImFjYyIsInN0cmVhbSIsInN0cmVhbUFyZWEiLCJTZnVTdGF0c1JlcG9ydGVyIiwid2VicnRjVmVyc2lvbiIsIndlYlJUQ1ZlcnNpb24iLCJzdGFydCIsInJlcG9ydGluZ19pbnRlcnZhbF9tcyIsImludGVydmFsSWQiLCJ3ZWJSVENJbmZvIiwiREVGQVVMVF9USFJFU0hPTEQiLCJWaWV3cG9ydFRyYWNrZXIiLCJlbGVtZW50SGFuZGxlck1hcCIsIm9ic2VydmVyIiwicXVldWVTZXQiLCJzZXRWaWV3cG9ydCIsInZpZXdwb3J0RWxlbWVudCIsImNsZWFudXAiLCJkaXNjb25uZWN0IiwiY2xlYXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJ5Iiwicm9vdCIsInRocmVzaG9sZCIsInF1ZXVlRWxlbWVudCIsInF1ZXVlSGFuZGxlciIsImNvbnRhaW5zIiwib2JzZXJ2ZSIsImVsZW1lbnQiLCJxdWV1ZUl0ZW0iLCJ1bm9ic2VydmUiLCJpc1NhZmFyaSIsImlzRmlyZWZveCIsImlzQ2hyb21lIiwiREVGQVVMVF9WSUVXUE9SVF9WSVNJQklMSVRZX1NUQVRFIiwiRHluYXNjYWxlTWFuYWdlciIsInZpZXdwb3J0VHJhY2tlciIsInRyYWNrRWxlbWVudFZpc2liaWxpdHkiLCJwcmV2aW91c1Zpc2liaWxpdHlTdGF0ZSIsImlzVmlzaWJsZSIsImlzSW50ZXJzZWN0aW5nIiwiZG9jdW1lbnQiLCJmdWxsc2NyZWVuRWxlbWVudCIsIlZJU0lCTEUiLCJiaW5kVmlkZW9FbGVtZW50IiwidmlkZW9FbGVtZW50IiwiYm91bmRQYXJ0aWNpcGFudCIsInJlcXVlc3RUcmFja1dpdGhEaW1lbnNpb25zIiwiZGVib3VuY2VUeXBlIiwiZGltZW5zaW9uIiwidXBkYXRlU3Vic2NyaXB0aW9uc1BhcnRpYWwiLCJwYXJ0aWNpcGFudCQiLCJ0YWtlV2hpbGUiLCJ2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZVN1YnNjcmlwdGlvbiIsIm5leHRWaWV3cG9ydFZpc2liaWxpdHlTdGF0ZSIsIk1FRElVTSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwibGFzdERpbWVuc2lvbnMiLCJyZXNpemVPYnNlcnZlciIsIlJlc2l6ZU9ic2VydmVyIiwiY3VycmVudERpbWVuc2lvbnMiLCJTTE9XIiwicHVibGlzaGVkVHJhY2tzU3Vic2NyaXB0aW9uIiwiZGlzdGluY3RVbnRpbEtleUNoYW5nZWQiLCJGQVNUIiwiYXV0b3BsYXkiLCJwbGF5c0lubGluZSIsInN0cmVhbVN1YnNjcmlwdGlvbiIsInNvdXJjZSIsInNjcmVlblNoYXJlU3RyZWFtIiwic3JjT2JqZWN0IiwicGxheSIsImJpbmRBdWRpb0VsZW1lbnQiLCJhdWRpb0VsZW1lbnQiLCJ1cGRhdGVNZWRpYVN0cmVhbVN1YnNjcmlwdGlvbiIsInNjcmVlblNoYXJlQXVkaW9TdHJlYW0iLCJzZWxlY3RlZERldmljZSIsInNwZWFrZXIiLCJzZXRTaW5rSWQiLCJzaW5rSWRTdWJzY3JpcHRpb24iLCJzZWxlY3RlZERldmljZSQiLCJkZXZpY2VJZCIsInZvbHVtZVN1YnNjcmlwdGlvbiIsInZvbHVtZSQiLCJ2b2x1bWUiLCJhdWRpb1ZvbHVtZSIsIlBlcm1pc3Npb25zQ29udGV4dCIsInBlcm1pc3Npb25zIiwic2V0UGVybWlzc2lvbnMiLCJzZXRDYWxsU2V0dGluZ3MiLCJwZXJtaXNzaW9uIiwiY2FuUmVxdWVzdCIsImF1ZGlvIiwiYWNjZXNzX3JlcXVlc3RfZW5hYmxlZCIsIkNhbGxUeXBlIiwiQ2FsbFR5cGVzUmVnaXN0cnkiLCJjYWxsVHlwZXMiLCJyZWdpc3RlciIsImNhbGxUeXBlIiwidW5yZWdpc3RlciIsIkNhbGxUeXBlcyIsIkJyb3dzZXJQZXJtaXNzaW9uIiwiZGlzcG9zZUNvbnRyb2xsZXIiLCJ3YXNQcm9tcHRlZCIsInJlYWR5IiwiYXNzdW1lR3JhbnRlZCIsInNldFN0YXRlIiwiY2FuUXVlcnlQZXJtaXNzaW9ucyIsInN0YXR1cyIsInF1ZXJ5IiwicXVlcnlOYW1lIiwiZ2V0U3RhdGUiLCJwcm9tcHQiLCJmb3JjZVByb21wdCIsInRocm93T25Ob3RBbGxvd2VkIiwiaXNHcmFudGVkIiwiRE9NRXhjZXB0aW9uIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiY29uc3RyYWludHMiLCJkaXNwb3NlT2ZNZWRpYVN0cmVhbSIsImxpc3RlbiIsImZyb21FdmVudFBhdHRlcm4iLCJ1bmxpc3RlbiIsImxpc3RlbmVyIiwidW5pbml0aWFsaXplZCIsImxhenkiLCJmYWN0b3J5IiwiZ2V0RGV2aWNlcyIsImRldmljZXMiLCJlbnVtZXJhdGVEZXZpY2VzIiwic2hvdWxkUHJvbXB0Rm9yQnJvd3NlclBlcm1pc3Npb24iLCJsYWJlbCIsImQiLCJjaGVja0lmQXVkaW9PdXRwdXRDaGFuZ2VTdXBwb3J0ZWQiLCJjcmVhdGVFbGVtZW50IiwiYXVkaW9EZXZpY2VDb25zdHJhaW50cyIsImF1dG9HYWluQ29udHJvbCIsIm5vaXNlU3VwcHJlc3Npb24iLCJlY2hvQ2FuY2VsbGF0aW9uIiwidmlkZW9EZXZpY2VDb25zdHJhaW50cyIsImdldEF1ZGlvQnJvd3NlclBlcm1pc3Npb24iLCJnZXRWaWRlb0Jyb3dzZXJQZXJtaXNzaW9uIiwiZ2V0RGV2aWNlQ2hhbmdlT2JzZXJ2ZXIiLCJmcm9tRXZlbnQiLCJkZWJvdW5jZVRpbWUiLCJnZXRBdWRpb0RldmljZXMiLCJtZXJnZSIsInN0YXJ0V2l0aCIsImNvbmNhdE1hcCIsImdldFZpZGVvRGV2aWNlcyIsImdldEF1ZGlvT3V0cHV0RGV2aWNlcyIsImdldFN0cmVhbSIsImdldEF1ZGlvU3RyZWFtIiwidHJhY2tDb25zdHJhaW50cyIsImdldFZpZGVvU3RyZWFtIiwiZ2V0U2NyZWVuU2hhcmVTdHJlYW0iLCJnZXREaXNwbGF5TWVkaWEiLCJpZGVhbCIsInN5c3RlbUF1ZGlvIiwiZGV2aWNlSWRzJCIsInJlbGVhc2UiLCJJbnB1dE1lZGlhRGV2aWNlTWFuYWdlciIsInN0b3BPbkxlYXZlIiwic3Vic2NyaXB0aW9ucyIsImlzVHJhY2tTdG9wcGVkRHVlVG9UcmFja0VuZCIsImZpbHRlcnMiLCJzdGF0dXNDaGFuZ2VDb25jdXJyZW5jeVRhZyIsImZpbHRlclJlZ2lzdHJhdGlvbkNvbmN1cnJlbmN5VGFnIiwiaGFuZGxlRGlzY29ubmVjdGVkT3JSZXBsYWNlZERldmljZXMiLCJsaXN0RGV2aWNlcyIsIm9wdGltaXN0aWNTdGF0dXMiLCJzZXRQZW5kaW5nU3RhdHVzIiwidW5tdXRlU3RyZWFtIiwic2V0U3RhdHVzIiwiZm9yY2VTdG9wIiwicHJldlN0YXR1cyIsImRpc2FibGVNb2RlIiwibXV0ZVN0cmVhbSIsInN0YXR1c0NoYW5nZVNldHRsZWQiLCJyZXN1bWUiLCJ0b2dnbGUiLCJyZWdpc3RlckZpbHRlciIsInJlZ2lzdGVyZWQiLCJhcHBseVNldHRpbmdzVG9TdHJlYW0iLCJzZXREZWZhdWx0Q29uc3RyYWludHMiLCJzZWxlY3QiLCJzZXREZXZpY2UiLCJzdG9wUHVibGlzaFN0cmVhbSIsIm11dGVMb2NhbFN0cmVhbSIsImFsbEVuZGVkIiwic2V0TWVkaWFTdHJlYW0iLCJtdXRlVHJhY2tzIiwidW5tdXRlVHJhY2tzIiwicm9vdFN0cmVhbSIsImRlZmF1bHRDb25zdHJhaW50cyIsImNoYWluV2l0aCIsInBhcmVudFN0cmVhbSIsImZpbHRlclN0cmVhbSIsInBhcmVudCIsIm9yaWdpbmFsU3RvcCIsInBhcmVudFRyYWNrIiwiaGFuZGxlUGFyZW50VHJhY2tFbmRlZCIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImlucHV0U3RyZWFtIiwib3V0cHV0IiwibWVkaWFEZXZpY2VLaW5kIiwicGFpcndpc2UiLCJwcmV2RGV2aWNlcyIsImN1cnJlbnREZXZpY2VzIiwiaXNEZXZpY2VEaXNjb25uZWN0ZWQiLCJpc0RldmljZVJlcGxhY2VkIiwiY3VycmVudERldmljZSIsImZpbmREZXZpY2VJbkxpc3QiLCJwcmV2RGV2aWNlIiwiZ3JvdXBJZCIsIklucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUiLCJzdGF0dXNTdWJqZWN0Iiwib3B0aW1pc3RpY1N0YXR1c1N1YmplY3QiLCJtZWRpYVN0cmVhbVN1YmplY3QiLCJzZWxlY3RlZERldmljZVN1YmplY3QiLCJkZWZhdWx0Q29uc3RyYWludHNTdWJqZWN0IiwibWVkaWFTdHJlYW0kIiwic3RhdHVzJCIsIm9wdGltaXN0aWNTdGF0dXMkIiwiZGVmYXVsdENvbnN0cmFpbnRzJCIsImhhc0Jyb3dzZXJQZXJtaXNzaW9uJCIsIm9mIiwicGVuZGluZ1N0YXR1cyIsImdldERldmljZUlkRnJvbVN0cmVhbSIsIkNhbWVyYU1hbmFnZXJTdGF0ZSIsImRpcmVjdGlvblN1YmplY3QiLCJkaXJlY3Rpb24kIiwic2V0RGlyZWN0aW9uIiwiZmFjaW5nTW9kZSIsIkNhbWVyYU1hbmFnZXIiLCJzZWxlY3REaXJlY3Rpb24iLCJmbGlwIiwibmV3RGlyZWN0aW9uIiwic2VsZWN0VGFyZ2V0UmVzb2x1dGlvbiIsInJlc29sdXRpb24iLCJzZXRQcmVmZXJyZWRDb2RlYyIsInVwZGF0ZVB1Ymxpc2hPcHRpb25zIiwiZ2V0Q2FwdHVyZVJlc29sdXRpb24iLCJmcmFtZVJhdGUiLCJwdWJsaXNoVmlkZW9TdHJlYW0iLCJzdG9wUHVibGlzaCIsIk1pY3JvcGhvbmVNYW5hZ2VyU3RhdGUiLCJzcGVha2luZ1doaWxlTXV0ZWRTdWJqZWN0Iiwic3BlYWtpbmdXaGlsZU11dGVkJCIsInNwZWFraW5nV2hpbGVNdXRlZCIsInNldFNwZWFraW5nV2hpbGVNdXRlZCIsIkRFVEVDVElPTl9GUkVRVUVOQ1lfSU5fTVMiLCJBVURJT19MRVZFTF9USFJFU0hPTEQiLCJGRlRfU0laRSIsImNyZWF0ZVNvdW5kRGV0ZWN0b3IiLCJvblNvdW5kRGV0ZWN0ZWRTdGF0ZUNoYW5nZWQiLCJkZXRlY3Rpb25GcmVxdWVuY3lJbk1zIiwiYXVkaW9MZXZlbFRocmVzaG9sZCIsImZmdFNpemUiLCJkZXN0cm95U3RyZWFtT25TdG9wIiwiYXVkaW9Db250ZXh0IiwiQXVkaW9Db250ZXh0IiwiYW5hbHlzZXIiLCJjcmVhdGVBbmFseXNlciIsImNyZWF0ZU1lZGlhU3RyZWFtU291cmNlIiwiY29ubmVjdCIsImZyZXF1ZW5jeUJpbkNvdW50IiwiZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEiLCJpc1NvdW5kRGV0ZWN0ZWQiLCJhdmVyYWdlZERhdGFWYWx1ZSIsInB2IiwiY3YiLCJwZXJjZW50YWdlIiwiUk5TcGVlY2hEZXRlY3RvciIsInBjMSIsInBjMiIsImFkZFRyYWNrIiwiYXVkaW9UcmFja3MiLCJvblNwZWFraW5nRGV0ZWN0ZWRTdGF0ZUNoYW5nZSIsImF1ZGlvTWVkaWFTb3VyY2VTdGF0cyIsIk1pY3JvcGhvbmVNYW5hZ2VyIiwic3BlYWtpbmdXaGlsZU11dGVkTm90aWZpY2F0aW9uRW5hYmxlZCIsInNvdW5kRGV0ZWN0b3JDb25jdXJyZW5jeVRhZyIsInN0b3BTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24iLCJzdGFydFNwZWFraW5nV2hpbGVNdXRlZERldGVjdGlvbiIsIm5vaXNlQ2FuY2VsbGF0aW9uUmVnaXN0cmF0aW9uIiwibm9pc2VDYW5jZWxsYXRpb24iLCJhdXRvT24iLCJub2lzZV9jYW5jZWxsYXRpb24iLCJtb2RlIiwibm90aWZ5Tm9pc2VDYW5jZWxsYXRpb25TdG9wcGVkIiwiZW5hYmxlTm9pc2VDYW5jZWxsYXRpb24iLCJoYXNOb2lzZUNhbmNlbGxhdGlvbkNhcGFiaWxpdHkiLCJub2lzZUNhbmNlbGxhdGlvblNldHRpbmdzIiwibm9pc2VDYW5jZWxsYXRpb25DaGFuZ2VVbnN1YnNjcmliZSIsIm5vdGlmeU5vaXNlQ2FuY2VsbGF0aW9uU3RhcnRpbmciLCJyZWdpc3RyYXRpb25SZXN1bHQiLCJ0b0ZpbHRlciIsInVucmVnaXN0ZXJOb2lzZUNhbmNlbGxhdGlvbiIsImRpc2FibGVOb2lzZUNhbmNlbGxhdGlvbiIsImVuYWJsZVNwZWFraW5nV2hpbGVNdXRlZE5vdGlmaWNhdGlvbiIsImRpc2FibGVTcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb24iLCJwdWJsaXNoQXVkaW9TdHJlYW0iLCJyblNwZWVjaERldGVjdG9yIiwic291bmREZXRlY3RvckNsZWFudXAiLCJTY3JlZW5TaGFyZVN0YXRlIiwiYXVkaW9FbmFibGVkU3ViamVjdCIsImF1ZGlvRW5hYmxlZCQiLCJhdWRpb0VuYWJsZWQiLCJzZXRBdWRpb0VuYWJsZWQiLCJpc0VuYWJsZWQiLCJzZXRTZXR0aW5ncyIsIlNjcmVlblNoYXJlTWFuYWdlciIsIm1heWJlVGFyZ2V0UmVzb2x1dGlvbiIsImVuYWJsZVNjcmVlblNoYXJlQXVkaW8iLCJkaXNhYmxlU2NyZWVuU2hhcmVBdWRpbyIsInB1Ymxpc2hTY3JlZW5TaGFyZVN0cmVhbSIsIlNwZWFrZXJTdGF0ZSIsInZvbHVtZVN1YmplY3QiLCJpc0RldmljZVNlbGVjdGlvblN1cHBvcnRlZCIsInNldFZvbHVtZSIsIlNwZWFrZXJNYW5hZ2VyIiwic2V0UGFydGljaXBhbnRWb2x1bWUiLCJjbGllbnRTdG9yZSIsIndhdGNoaW5nIiwiZHluYXNjYWxlTWFuYWdlciIsInRyYWNrU3Vic2NyaXB0aW9uc1N1YmplY3QiLCJzZnVDbGllbnRUYWciLCJyZWNvbm5lY3RDb25jdXJyZW5jeVRhZyIsInJlY29ubmVjdEF0dGVtcHRzIiwiZmFzdFJlY29ubmVjdERlYWRsaW5lU2Vjb25kcyIsImxhc3RPZmZsaW5lVGltZXN0YW1wIiwidHJhY2tQdWJsaXNoT3JkZXIiLCJoYXNKb2luZWRPbmNlIiwiZGV2aWNlU2V0dGluZ3NBcHBsaWVkT25jZSIsImluaXRpYWxpemVkIiwiam9pbkxlYXZlQ29uY3VycmVuY3lUYWciLCJsZWF2ZUNhbGxIb29rcyIsInN0cmVhbUNsaWVudEV2ZW50SGFuZGxlcnMiLCJoYW5kbGVPd25DYXBhYmlsaXRpZXNVcGRhdGVkIiwicGVybWlzc2lvblRvVHJhY2tUeXBlIiwib2ZmSGFuZGxlciIsImNhbGxfY2lkIiwicmVnaXN0ZXJlZE9mZkhhbmRsZXIiLCJ3YWl0VW50aWxDYWxsSm9pbmVkIiwiaGFzT3RoZXJQYXJ0aWNpcGFudHMiLCJzdGF0c1JlcG9ydGVyIiwic2Z1U3RhdHNSZXBvcnRlciIsImhvb2siLCJzdG9wT25MZWF2ZVByb21pc2VzIiwic2V0dXAiLCJzdHJlYW1DbGllbnRCYXNlUGF0aCIsInJpbmciLCJyaW5naW5nU3ViamVjdCIsIl9oYXNDb25uZWN0aW9uSUQiLCJhcHBseURldmljZUNvbmZpZyIsImdldE9yQ3JlYXRlIiwicG9zdCIsIm5vdGlmeSIsImFjY2VwdCIsImpvaW5DYWxsRGF0YSIsInBlcmZvcm1pbmdNaWdyYXRpb24iLCJNSUdSQVRFIiwicGVyZm9ybWluZ1Jlam9pbiIsIlJFSk9JTiIsInBlcmZvcm1pbmdGYXN0UmVjb25uZWN0Iiwic3RhdHNPcHRpb25zIiwiZG9Kb2luUmVxdWVzdCIsInN0YXRzX29wdGlvbnMiLCJwcmV2aW91c1NmdUNsaWVudCIsInByZXZpb3VzU2Vzc2lvbklkIiwiaXNXc0hlYWx0aHkiLCJoYW5kbGVTZnVTaWduYWxDbG9zZSIsInJlY2VpdmluZ0NhcGFiaWxpdGllc1NkcCIsImdldFJlY29ubmVjdERldGFpbHMiLCJtaWdyYXRpbmdfZnJvbSIsInN1YnNjcmliZXJTZHAiLCJmYXN0UmVjb25uZWN0IiwicmVzdG9yZUlDRSIsImluY2x1ZGVTdWJzY3JpYmVyIiwiaWNlX3NlcnZlcnMiLCJpbml0UHVibGlzaGVyQW5kU3Vic2NyaWJlciIsImNsb3NlUHJldmlvdXNJbnN0YW5jZXMiLCJzdHJhdGVneSIsIm1pZ3JhdGluZ0Zyb21TZnVJZCIsInN1YnNjcmliZWRUcmFja3MiLCJyZWNvbm5lY3RBdHRlbXB0IiwiZnJvbVNmdUlkIiwibmV4dFNmdUNsaWVudCIsImluY2x1ZGVQdWJsaXNoZXIiLCJyZWNvbm5lY3QiLCJpc0Fub255bW91cyIsImF1ZGlvU2V0dGluZ3MiLCJvcHVzX2R0eF9lbmFibGVkIiwicmVkdW5kYW50X2NvZGluZ19lbmFibGVkIiwibG9jYXRpb24iLCJnZXRMb2NhdGlvbkhpbnQiLCJyZXF1ZXN0IiwiRElTQ09OTkVDVCIsInJlY29ubmVjdEZhc3QiLCJyZWNvbm5lY3RSZWpvaW4iLCJyZWNvbm5lY3RNaWdyYXRlIiwidW5yZWNvdmVyYWJsZSIsIlJFQ09OTkVDVElOR19GQUlMRUQiLCJyZXN0b3JlUHVibGlzaGVkVHJhY2tzIiwicmVzdG9yZVN1YnNjcmliZWRUcmFja3MiLCJjdXJyZW50U2Z1Q2xpZW50IiwiTUlHUkFUSU5HIiwiY3VycmVudFN1YnNjcmliZXIiLCJjdXJyZW50UHVibGlzaGVyIiwiY3VycmVudFNmdSIsInJlZ2lzdGVyUmVjb25uZWN0SGFuZGxlcnMiLCJ1bnJlZ2lzdGVyR29Bd2F5IiwidW5yZWdpc3Rlck9uRXJyb3IiLCJ1bnJlZ2lzdGVyTmV0d29ya0NoYW5nZWQiLCJvZmZsaW5lIiwiT0ZGTElORSIsImF1ZGlvVHJhY2siLCJzY3JlZW5TaGFyZUF1ZGlvVHJhY2siLCJjaGFuZ2VzIiwiY2hhbmdlIiwicHJvcCIsInNjcmVlblNoYXJlRGltZW5zaW9uIiwicmVzZXRSZWFjdGlvbiIsImNyaXRlcmlhIiwic2VuZFJlYWN0aW9uIiwibXV0ZVNlbGYiLCJteVVzZXJJZCIsIm11dGVVc2VyIiwibXV0ZU90aGVycyIsInVzZXJJZHNUb011dGUiLCJ1c2VyX2lkcyIsIm11dGVBbGxVc2VycyIsIm11dGVfYWxsX3VzZXJzIiwic3RhcnRSZWNvcmRpbmciLCJzdG9wUmVjb3JkaW5nIiwic3RhcnRUcmFuc2NyaXB0aW9uIiwic3RvcFRyYW5zY3JpcHRpb24iLCJyZXF1ZXN0UGVybWlzc2lvbnMiLCJjYW5SZXF1ZXN0UGVybWlzc2lvbnMiLCJncmFudFBlcm1pc3Npb25zIiwidXBkYXRlVXNlclBlcm1pc3Npb25zIiwiZ3JhbnRfcGVybWlzc2lvbnMiLCJyZXZva2VQZXJtaXNzaW9ucyIsInJldm9rZV9wZXJtaXNzaW9ucyIsImdvTGl2ZSIsInN0b3BMaXZlIiwic3RhcnRITFMiLCJzdG9wSExTIiwidXBkYXRlcyIsImVuZENhbGwiLCJ1bnBpbiIsInBpbkZvckV2ZXJ5b25lIiwidW5waW5Gb3JFdmVyeW9uZSIsInF1ZXJ5TWVtYmVycyIsInVwZGF0ZUNhbGxNZW1iZXJzIiwic2NoZWR1bGVBdXRvRHJvcCIsImRyb3BUaW1lb3V0IiwidGltZW91dEluTXMiLCJhdXRvX2NhbmNlbF90aW1lb3V0X21zIiwicXVlcnlSZWNvcmRpbmdzIiwiY2FsbFNlc3Npb25JZCIsInF1ZXJ5VHJhbnNjcmlwdGlvbnMiLCJnZXRDYWxsU3RhdHMiLCJjYWxsU2Vzc2lvbklEIiwic3VibWl0RmVlZGJhY2siLCJyYXRpbmciLCJ1c2VyU2Vzc2lvbklkIiwic2RrX3ZlcnNpb24iLCJzZW5kQ3VzdG9tRXZlbnQiLCJpbml0Q2FtZXJhIiwiaW5pdE1pYyIsImRlZmF1bHREaXJlY3Rpb24iLCJiYWNrZW5kU2V0dGluZyIsImNhbWVyYV9mYWNpbmciLCJjYW1lcmFfZGVmYXVsdF9vbiIsIm1pY19kZWZhdWx0X29uIiwidW5iaW5kIiwiYmluZENhbGxUaHVtYm5haWxFbGVtZW50IiwiaW1hZ2VFbGVtZW50IiwiaGFuZGxlRXJyb3IiLCJzcmMiLCJmYWxsYmFja0ltYWdlU291cmNlIiwidGh1bWJuYWlsVXJsIiwiVVJMIiwiaW1hZ2VfdXJsIiwic2VhcmNoUGFyYW1zIiwiY2FsbFR5cGVDb25maWciLCJwYXJ0aWNpcGFudFNvcnRlciIsIklETEUiLCJyZWdpc3RlckVmZmVjdHMiLCJkZWJvdW5jZSIsInRpbWVyIiwiaXNSaW5naW5nIiwicmVjZWl2ZXJfaWQiLCJjcmVhdGVkX2J5X2lkIiwiYWNjZXB0ZWRfYnkiLCJsZWF2ZUNhbGxJZGxlIiwiSW5zaWdodE1ldHJpY3MiLCJjb25uZWN0aW9uU3RhcnRUaW1lc3RhbXAiLCJ3c1RvdGFsRmFpbHVyZXMiLCJ3c0NvbnNlY3V0aXZlRmFpbHVyZXMiLCJpbnN0YW5jZUNsaWVudElkIiwicG9zdEluc2lnaHRzIiwiaW5zaWdodFR5cGUiLCJpbnNpZ2h0cyIsIm1heEF0dGVtcHRzIiwiYXhpb3MiLCJidWlsZFdzRmF0YWxJbnNpZ2h0IiwiY29ubmVjdGlvbiIsImJ1aWxkV3NCYXNlSW5zaWdodCIsImNsaWVudCIsInJlYWR5X3N0YXRlIiwiX2J1aWxkVXJsIiwiYXBpX2tleSIsInN0YXJ0X3RzIiwiaW5zaWdodE1ldHJpY3MiLCJlbmRfdHMiLCJhdXRoX3R5cGUiLCJnZXRBdXRoVHlwZSIsInRva2VuTWFuYWdlciIsInVzZXJJRCIsInVzZXJfZGV0YWlscyIsIl91c2VyIiwiY2xpZW50X2lkIiwiY29ubmVjdGlvbklEIiwid3NfZGV0YWlscyIsIndzX2NvbnNlY3V0aXZlX2ZhaWx1cmVzIiwid3NfdG90YWxfZmFpbHVyZXMiLCJyZXF1ZXN0X2lkIiwicmVxdWVzdElEIiwidXNlcl9hZ2VudCIsImluc3RhbmNlX2NsaWVudF9pZCIsImJ1aWxkV3NTdWNjZXNzQWZ0ZXJGYWlsdXJlSW5zaWdodCIsImlzQ2xvc2VFdmVudCIsInJlcyIsImlzRXJyb3JFdmVudCIsIlN0YWJsZVdTQ29ubmVjdGlvbiIsIl9sb2ciLCJleHRyYSIsInNldENsaWVudCIsIlVSTFNlYXJjaFBhcmFtcyIsImdldFVzZXJBZ2VudCIsIndzQmFzZVVSTCIsIm9ubGluZVN0YXR1c0NoYW5nZWQiLCJfc2V0SGVhbHRoIiwiX3JlY29ubmVjdCIsImludGVydmFsIiwib25vcGVuIiwid3NJRCIsIl9nZXRUb2tlbiIsImF1dGhNZXNzYWdlIiwiaW1hZ2UiLCJhdXRoZW50aWNhdGlvblNlbnQiLCJvbm1lc3NhZ2UiLCJyZWplY3RQcm9taXNlIiwiX2Vycm9yRnJvbVdTRXZlbnQiLCJsYXN0RXZlbnQiLCJzY2hlZHVsZU5leHRQaW5nIiwicmVzb2x2ZVByb21pc2UiLCJpc0Nvbm5lY3RpbmciLCJjb25zZWN1dGl2ZUZhaWx1cmVzIiwiaXNTdGF0aWMiLCJjb25uZWN0aW9uQ2hlY2tUaW1lb3V0UmVmIiwicmVmcmVzaFRva2VuIiwicmVjZWl2ZWRfYXQiLCJvbmNsb3NlIiwid2FzQ2xlYW4iLCJ0b3RhbEZhaWx1cmVzIiwib25lcnJvciIsImhlYWx0aHkiLCJkaXNwYXRjaEltbWVkaWF0ZWx5IiwiaXNXU0ZhaWx1cmUiLCJzdGF0dXNDb2RlIiwiU3RhdHVzQ29kZSIsIl9zZXR1cENvbm5lY3Rpb25Qcm9taXNlIiwiY29ubmVjdGlvbk9wZW4iLCJoZWFsdGhDaGVja1RpbWVvdXRSZWYiLCJjbGllbnRJRCIsInBpbmdJbnRlcnZhbCIsImlzRGlzY29ubmVjdGVkIiwiaGVhbHRoQ2hlY2siLCJfY29ubmVjdCIsIl93YWl0Rm9ySGVhbHRoeSIsInJlbW92ZUFsbExpc3RlbmVycyIsImlzQ2xvc2VkUHJvbWlzZSIsImVuYWJsZVdTRmFsbGJhY2siLCJpc1Rva2VuUmVhZHkiLCJ0b2tlblJlYWR5IiwibG9hZFRva2VuIiwibXVzdFNldHVwQ29ubmVjdGlvbklkUHJvbWlzZSIsImNvbm5lY3Rpb25JZFByb21pc2UiLCJfc2V0dXBDb25uZWN0aW9uSWRQcm9taXNlIiwid3NVUkwiLCJjb25uZWN0aW9uX2lkIiwicmVzb2x2ZUNvbm5lY3Rpb25JZCIsImVuYWJsZUluc2lnaHRzIiwicmVqZWN0Q29ubmVjdGlvbklkIiwiX2Rlc3Ryb3lDdXJyZW50V1NDb25uZWN0aW9uIiwiaXNTdHJpbmciLCJhcnJheU9yU3RyaW5nIiwiaXNNYXBTdHJpbmdDYWxsYmFjayIsImNhbGxiYWNrIiwibGVuIiwiY2hhckF0Iiwia1ZhbHVlIiwibWFwcGVkVmFsdWUiLCJlbmNvZGVCYXNlNjQiLCJmcm9tQnl0ZUFycmF5IiwiY2hhciIsImNoYXJDb2RlQXQiLCJkZWNvZGVCYXNlNjQiLCJmcm9tQ2hhckNvZGUiLCJMIiwiQSIsIkRldlRva2VuIiwiVXNlckZyb21Ub2tlbiIsImZyYWdtZW50cyIsImI2NFBheWxvYWQiLCJUb2tlbk1hbmFnZXIiLCJzZWNyZXQiLCJzZXRUb2tlbk9yUHJvdmlkZXIiLCJ0b2tlbk9yUHJvdmlkZXIiLCJ2YWxpZGF0ZVRva2VuIiwidG9rZW5Qcm92aWRlciIsInJlc2V0IiwibG9hZFRva2VuUHJvbWlzZSIsInRva2VuVXNlcklkIiwiZ2V0VG9rZW4iLCJBUElFcnJvckNvZGVzIiwiaXNBUElFcnJvciIsImlzRXJyb3JSZXRyeWFibGUiLCJpc0Nvbm5lY3Rpb25JREVycm9yIiwiaXNFcnJvclJlc3BvbnNlIiwiQ29ubmVjdGlvblN0YXRlIiwiV1NDb25uZWN0aW9uRmFsbGJhY2siLCJfb25saW5lU3RhdHVzQ2hhbmdlZCIsIl9zZXRTdGF0ZSIsIkNsb3NlZCIsImNhbmNlbFRva2VuIiwiY2FuY2VsIiwiX3JlcSIsInJldHJ5IiwiQ2FuY2VsVG9rZW4iLCJkb0F4aW9zUmVxdWVzdCIsImJhc2VVUkwiLCJwdWJsaWNFbmRwb2ludCIsIl9wb2xsIiwiQ29ubmVjdGVkIiwiZXZlbnRzIiwiaXNDYW5jZWwiLCJEaXNjb25uZWN0ZWQiLCJDb25uZWN0aW5nIiwiX2J1aWxkV1NQYXlsb2FkIiwiSW5pdCIsIkhJTlRfVVJMIiwiaGludFVybCIsImZldGNoIiwiYXdzUG9wIiwiU3RyZWFtQ2xpZW50IiwiZGV2VG9rZW4iLCJzZXRCYXNlVVJMIiwiaGludCIsImxvY2F0aW9uSGludCIsImxvY2F0aW9uSGludFVybCIsImxvY2F0aW9uSGludFRpbWVvdXQiLCJfZ2V0Q29ubmVjdGlvbklEIiwid3NDb25uZWN0aW9uIiwid3NGYWxsYmFjayIsImNvbm5lY3RVc2VyIiwidXNlclRva2VuT3JQcm92aWRlciIsInNldFVzZXJQcm9taXNlIiwiX2lzVXNpbmdTZXJ2ZXJBdXRoIiwibm9kZSIsImFsbG93U2VydmVyU2lkZUNvbm5lY3QiLCJzZXRUb2tlblByb21pc2UiLCJfc2V0VG9rZW4iLCJfc2V0VXNlciIsIndzUHJvbWlzZSIsIm9wZW5Db25uZWN0aW9uIiwidXBkYXRlTmV0d29ya0Nvbm5lY3Rpb25TdGF0dXMiLCJwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmUiLCJjbG9zZUNvbm5lY3Rpb24iLCJkaXNjb25uZWN0VXNlciIsImNvbm5lY3RHdWVzdFVzZXIiLCJndWVzdFVzZXJDcmVhdGVQcm9taXNlIiwiYWNjZXNzX3Rva2VuIiwiY29ubmVjdEFub255bW91c1VzZXIiLCJfbG9nQXBpUmVxdWVzdCIsIl9sb2dBcGlSZXNwb25zZSIsIl9sb2dBcGlFcnJvciIsInJlcXVlc3RDb25maWciLCJfZW5yaWNoQXhpb3NPcHRpb25zIiwiYXhpb3NJbnN0YW5jZSIsInB1dCIsImhhbmRsZVJlc3BvbnNlIiwiY2xpZW50X3JlcXVlc3RfaWQiLCJlcnJvckZyb21SZXNwb25zZSIsIndhcm1VcCIsIl9zYXlIaSIsImRlZmF1bHRXU1RpbWVvdXRXaXRoRmFsbGJhY2siLCJkZWZhdWx0V1NUaW1lb3V0IiwiQXhpb3NIZWFkZXJzIiwic2V0VXNlckFnZW50IiwiYXV0aG9yaXphdGlvbiIsImF4aW9zUmVxdWVzdENvbmZpZyIsImlucHV0T3B0aW9ucyIsIndpdGhDcmVkZW50aWFscyIsImh0dHBzQWdlbnQiLCJodHRwcyIsIkFnZW50Iiwia2VlcEFsaXZlTXNlY3MiLCJwcm9jZXNzIiwiZW52IiwiU1RSRUFNX0xPQ0FMX1RFU1RfUlVOIiwiU1RSRUFNX0xPQ0FMX1RFU1RfSE9TVCIsIlN0cmVhbVZpZGVvQ2xpZW50IiwiYXBpS2V5T3JBcmdzIiwiZXZlbnRIYW5kbGVyc1RvVW5yZWdpc3RlciIsImNvbm5lY3Rpb25Qcm9taXNlIiwiZGlzY29ubmVjdGlvblByb21pc2UiLCJjb25uZWN0VXNlclJlc3BvbnNlIiwibWUiLCJ3cml0ZWFibGVTdGF0ZVN0b3JlIiwiY2FsbHNUb1JlV2F0Y2giLCJxdWVyeUNhbGxzIiwid2F0Y2giLCJmaWx0ZXJfY29uZGl0aW9ucyIsIiRpbiIsImZpZWxkIiwibmV3Q2FsbCIsInByZXZDYWxsIiwidGhlQ2FsbCIsImFwaUtleSIsIl9pbnN0YW5jZU1hcCIsImNyZWF0ZUd1ZXN0VXNlciIsInF1ZXJ5Q2FsbFN0YXRzIiwiZWRnZXMiLCJhZGREZXZpY2UiLCJwdXNoX3Byb3ZpZGVyIiwicHVzaF9wcm92aWRlcl9uYW1lIiwidm9pcF90b2tlbiIsImFkZFZvaXBEZXZpY2UiLCJyZW1vdmVEZXZpY2UiLCJvblJpbmdpbmdDYWxsIiwiY2FsbElkIiwiY29vcmRpbmF0b3JMb2dnZXIiLCJyZWFkT25seVN0YXRlU3RvcmUiLCJnZXRPckNyZWF0ZUluc3RhbmNlIiwiaW5zdGFuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stream-io/video-filters-web/dist/index.es.js":
/*!********************************************************************!*\
  !*** ./node_modules/@stream-io/video-filters-web/dist/index.es.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SegmentationLevel: () => (/* binding */ SegmentationLevel),\n/* harmony export */   createRenderer: () => (/* binding */ createRenderer),\n/* harmony export */   isPlatformSupported: () => (/* binding */ isPlatformSupported),\n/* harmony export */   loadTFLite: () => (/* binding */ loadTFLite)\n/* harmony export */ });\n/* harmony import */ var wasm_feature_detect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wasm-feature-detect */ \"(ssr)/./node_modules/wasm-feature-detect/dist/esm/index.js\");\n\n\n/**\n * Checks if the current platform is a mobile device.\n *\n * See:\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\n */\nconst isMobile = () => /Mobi/i.test(navigator.userAgent);\n/**\n * Runs a check to see if the current platform supports\n * the necessary APIs required for the video filters.\n */\nconst isPlatformSupported = async () => typeof document !== 'undefined' &&\n    typeof window !== 'undefined' &&\n    typeof navigator !== 'undefined' &&\n    !isMobile() && // we don't support mobile devices yet due to performance issues\n    typeof WebAssembly !== 'undefined' &&\n    !!window.WebGL2RenderingContext && // WebGL2 is required for the video filters\n    !!document.createElement('canvas').getContext('webgl2') &&\n    (await (0,wasm_feature_detect__WEBPACK_IMPORTED_MODULE_0__.simd)()); // SIMD is required for the wasm module\n\n/**\n * Use it along with boyswan.glsl-literal VSCode extension\n * to get GLSL syntax highlighting.\n * https://marketplace.visualstudio.com/items?itemName=boyswan.glsl-literal\n *\n * On VSCode OSS, boyswan.glsl-literal requires slevesque.shader extension\n * to be installed as well.\n * https://marketplace.visualstudio.com/items?itemName=slevesque.shader\n */\nconst glsl = String.raw;\nfunction createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer) {\n    const program = createProgram(gl, vertexShader, fragmentShader);\n    const positionAttributeLocation = gl.getAttribLocation(program, 'a_position');\n    gl.enableVertexAttribArray(positionAttributeLocation);\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n    gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);\n    const texCoordAttributeLocation = gl.getAttribLocation(program, 'a_texCoord');\n    gl.enableVertexAttribArray(texCoordAttributeLocation);\n    gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n    gl.vertexAttribPointer(texCoordAttributeLocation, 2, gl.FLOAT, false, 0, 0);\n    return program;\n}\nfunction createProgram(gl, vertexShader, fragmentShader) {\n    const program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        throw new Error(`Could not link WebGL program: ${gl.getProgramInfoLog(program)}`);\n    }\n    return program;\n}\nfunction compileShader(gl, shaderType, shaderSource) {\n    const shader = gl.createShader(shaderType);\n    gl.shaderSource(shader, shaderSource);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        throw new Error(`Could not compile shader: ${gl.getShaderInfoLog(shader)}`);\n    }\n    return shader;\n}\nfunction createTexture(gl, internalformat, width, height, minFilter = gl.NEAREST, magFilter = gl.NEAREST) {\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n    gl.texStorage2D(gl.TEXTURE_2D, 1, internalformat, width, height);\n    return texture;\n}\nasync function readPixelsAsync(gl, x, y, width, height, format, type, dest) {\n    const buf = gl.createBuffer();\n    gl.bindBuffer(gl.PIXEL_PACK_BUFFER, buf);\n    gl.bufferData(gl.PIXEL_PACK_BUFFER, dest.byteLength, gl.STREAM_READ);\n    gl.readPixels(x, y, width, height, format, type, 0);\n    gl.bindBuffer(gl.PIXEL_PACK_BUFFER, null);\n    await getBufferSubDataAsync(gl, gl.PIXEL_PACK_BUFFER, buf, 0, dest);\n    gl.deleteBuffer(buf);\n    return dest;\n}\nasync function getBufferSubDataAsync(gl, target, buffer, srcByteOffset, dstBuffer, dstOffset, length) {\n    const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);\n    gl.flush();\n    const res = await clientWaitAsync(gl, sync);\n    gl.deleteSync(sync);\n    if (res !== gl.WAIT_FAILED) {\n        gl.bindBuffer(target, buffer);\n        gl.getBufferSubData(target, srcByteOffset, dstBuffer, dstOffset, length);\n        gl.bindBuffer(target, null);\n    }\n}\nfunction clientWaitAsync(gl, sync) {\n    return new Promise((resolve) => {\n        function test() {\n            const res = gl.clientWaitSync(sync, 0, 0);\n            if (res === gl.WAIT_FAILED) {\n                resolve(res);\n                return;\n            }\n            if (res === gl.TIMEOUT_EXPIRED) {\n                setTimeout(test);\n                return;\n            }\n            resolve(res);\n        }\n        setTimeout(test);\n    });\n}\n\nfunction buildBackgroundBlurStage(gl, vertexShader, positionBuffer, texCoordBuffer, personMaskTexture, canvas, blurLevel) {\n    const blurPass = buildBlurPass(gl, vertexShader, positionBuffer, texCoordBuffer, personMaskTexture, canvas, blurLevel);\n    const blendPass = buildBlendPass(gl, positionBuffer, texCoordBuffer, canvas);\n    function render() {\n        blurPass.render();\n        blendPass.render();\n    }\n    function updateCoverage(coverage) {\n        blendPass.updateCoverage(coverage);\n    }\n    function cleanUp() {\n        blendPass.cleanUp();\n        blurPass.cleanUp();\n    }\n    return {\n        render,\n        updateCoverage,\n        cleanUp,\n    };\n}\nfunction buildBlurPass(gl, vertexShader, positionBuffer, texCoordBuffer, personMaskTexture, canvas, blurLevel) {\n    const sigma = typeof blurLevel === 'number'\n        ? blurLevel\n        : blurLevel === 'low'\n            ? 2\n            : blurLevel === 'medium'\n                ? 4\n                : 6;\n    const windowSize = Math.max(1, Math.floor(sigma * 3));\n    const offset = new Array(windowSize).fill(0).map((v, index) => index);\n    const variance = sigma ** 2;\n    const weights = offset.map((x) => {\n        var m = sigma * Math.sqrt(2 * Math.PI);\n        var e = Math.exp(-(x ** 2) / (2 * variance));\n        return e / m;\n    });\n    const fragmentShaderSource = glsl `#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform vec2 u_texelSize;\n\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    const float offset[${windowSize}] = float[](${offset.map((i) => i.toFixed(10)).join(', ')});\n    const float weight[${windowSize}] = float[](${weights.map((i) => i.toFixed(10)).join(', ')});\n\n    void main() {\n      vec4 centerColor = texture(u_inputFrame, v_texCoord);\n      float personMask = texture(u_personMask, v_texCoord).a;\n\n      vec4 frameColor = centerColor * weight[0] * (1.0 - personMask);\n\n      for (int i = 1; i < ${windowSize}; i++) {\n        vec2 offset = vec2(offset[i]) * u_texelSize;\n\n        vec2 texCoord = v_texCoord + offset;\n        frameColor += texture(u_inputFrame, texCoord)\n           * weight[i]\n           * (1.0 - texture(u_personMask, texCoord).a);\n\n        texCoord = v_texCoord - offset;\n        frameColor += texture(u_inputFrame, texCoord)\n          * weight[i]\n          * (1.0 - texture(u_personMask, texCoord).a);\n      }\n      outColor = vec4(frameColor.rgb + (1.0 - frameColor.a) * centerColor.rgb, 1.0);\n    }\n  `;\n    const scale = 0.5;\n    const outputWidth = canvas.width * scale;\n    const outputHeight = canvas.height * scale;\n    const texelWidth = 1 / outputWidth;\n    const texelHeight = 1 / outputHeight;\n    const fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const program = createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer);\n    const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n    const personMaskLocation = gl.getUniformLocation(program, 'u_personMask');\n    const texelSizeLocation = gl.getUniformLocation(program, 'u_texelSize');\n    const texture1 = createTexture(gl, gl.RGBA8, outputWidth, outputHeight, gl.NEAREST, \n    // @ts-expect-error types are incomplete\n    gl.LINEAR);\n    const texture2 = createTexture(gl, gl.RGBA8, outputWidth, outputHeight, gl.NEAREST, \n    // @ts-expect-error types are incomplete\n    gl.LINEAR);\n    const frameBuffer1 = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer1);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture1, 0);\n    const frameBuffer2 = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer2);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture2, 0);\n    gl.useProgram(program);\n    gl.uniform1i(personMaskLocation, 1);\n    function render() {\n        gl.viewport(0, 0, outputWidth, outputHeight);\n        gl.useProgram(program);\n        gl.uniform1i(inputFrameLocation, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, personMaskTexture);\n        for (let i = 0; i < 3; i++) {\n            gl.uniform2f(texelSizeLocation, 0, texelHeight);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer1);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n            gl.activeTexture(gl.TEXTURE2);\n            gl.bindTexture(gl.TEXTURE_2D, texture1);\n            gl.uniform1i(inputFrameLocation, 2);\n            gl.uniform2f(texelSizeLocation, texelWidth, 0);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer2);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n            gl.bindTexture(gl.TEXTURE_2D, texture2);\n        }\n    }\n    function cleanUp() {\n        gl.deleteFramebuffer(frameBuffer2);\n        gl.deleteFramebuffer(frameBuffer1);\n        gl.deleteTexture(texture2);\n        gl.deleteTexture(texture1);\n        gl.deleteProgram(program);\n        gl.deleteShader(fragmentShader);\n    }\n    return {\n        render,\n        cleanUp,\n    };\n}\nfunction buildBlendPass(gl, positionBuffer, texCoordBuffer, canvas) {\n    const vertexShaderSource = glsl `#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  `;\n    const fragmentShaderSource = glsl `#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_blurredInputFrame;\n    uniform vec2 u_coverage;\n\n    in vec2 v_texCoord;\n\n    out vec4 outColor;\n\n    void main() {\n      vec3 color = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 blurredColor = texture(u_blurredInputFrame, v_texCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(mix(blurredColor, color, personMask), 1.0);\n    }\n  `;\n    const { width: outputWidth, height: outputHeight } = canvas;\n    const vertexShader = compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const program = createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer);\n    const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n    const personMaskLocation = gl.getUniformLocation(program, 'u_personMask');\n    const blurredInputFrame = gl.getUniformLocation(program, 'u_blurredInputFrame');\n    const coverageLocation = gl.getUniformLocation(program, 'u_coverage');\n    gl.useProgram(program);\n    gl.uniform1i(inputFrameLocation, 0);\n    gl.uniform1i(personMaskLocation, 1);\n    gl.uniform1i(blurredInputFrame, 2);\n    gl.uniform2f(coverageLocation, 0, 1);\n    function render() {\n        gl.viewport(0, 0, outputWidth, outputHeight);\n        gl.useProgram(program);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n    function updateCoverage(coverage) {\n        gl.useProgram(program);\n        gl.uniform2f(coverageLocation, coverage[0], coverage[1]);\n    }\n    function cleanUp() {\n        gl.deleteProgram(program);\n        gl.deleteShader(fragmentShader);\n        gl.deleteShader(vertexShader);\n    }\n    return {\n        render,\n        updateCoverage,\n        cleanUp,\n    };\n}\n\nfunction buildBackgroundImageStage(gl, positionBuffer, texCoordBuffer, personMaskTexture, backgroundImage, canvas) {\n    const vertexShaderSource = glsl `#version 300 es\n\n    uniform vec2 u_backgroundScale;\n    uniform vec2 u_backgroundOffset;\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n\n    out vec2 v_texCoord;\n    out vec2 v_backgroundCoord;\n\n    void main() {\n      // Flipping Y is required when rendering to canvas\n      gl_Position = vec4(a_position * vec2(1.0, -1.0), 0.0, 1.0);\n      v_texCoord = a_texCoord;\n      v_backgroundCoord = a_texCoord * u_backgroundScale + u_backgroundOffset;\n    }\n  `;\n    const fragmentShaderSource = glsl `#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_personMask;\n    uniform sampler2D u_background;\n    uniform vec2 u_coverage;\n    uniform float u_lightWrapping;\n    uniform float u_blendMode;\n\n    in vec2 v_texCoord;\n    in vec2 v_backgroundCoord;\n\n    out vec4 outColor;\n\n    vec3 screen(vec3 a, vec3 b) {\n      return 1.0 - (1.0 - a) * (1.0 - b);\n    }\n\n    vec3 linearDodge(vec3 a, vec3 b) {\n      return a + b;\n    }\n\n    void main() {\n      vec3 frameColor = texture(u_inputFrame, v_texCoord).rgb;\n      vec3 backgroundColor = texture(u_background, v_backgroundCoord).rgb;\n      float personMask = texture(u_personMask, v_texCoord).a;\n      float lightWrapMask = 1.0 - max(0.0, personMask - u_coverage.y) / (1.0 - u_coverage.y);\n      vec3 lightWrap = u_lightWrapping * lightWrapMask * backgroundColor;\n\n      frameColor = u_blendMode * linearDodge(frameColor, lightWrap)\n        + (1.0 - u_blendMode) * screen(frameColor, lightWrap);\n      personMask = smoothstep(u_coverage.x, u_coverage.y, personMask);\n      outColor = vec4(frameColor * personMask + backgroundColor * (1.0 - personMask), 1.0);\n    }\n  `;\n    const { width: outputWidth, height: outputHeight } = canvas;\n    const outputRatio = outputWidth / outputHeight;\n    const vertexShader = compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const program = createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer);\n    const backgroundScaleLocation = gl.getUniformLocation(program, 'u_backgroundScale');\n    const backgroundOffsetLocation = gl.getUniformLocation(program, 'u_backgroundOffset');\n    const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n    const personMaskLocation = gl.getUniformLocation(program, 'u_personMask');\n    const backgroundLocation = gl.getUniformLocation(program, 'u_background');\n    const coverageLocation = gl.getUniformLocation(program, 'u_coverage');\n    const lightWrappingLocation = gl.getUniformLocation(program, 'u_lightWrapping');\n    const blendModeLocation = gl.getUniformLocation(program, 'u_blendMode');\n    gl.useProgram(program);\n    gl.uniform2f(backgroundScaleLocation, 1, 1);\n    gl.uniform2f(backgroundOffsetLocation, 0, 0);\n    gl.uniform1i(inputFrameLocation, 0);\n    gl.uniform1i(personMaskLocation, 1);\n    gl.uniform2f(coverageLocation, 0, 1);\n    gl.uniform1f(lightWrappingLocation, 0);\n    gl.uniform1f(blendModeLocation, 0);\n    let backgroundTexture = null;\n    // TODO Find a better to handle background being loaded\n    if (backgroundImage?.complete) {\n        updateBackgroundImage(backgroundImage);\n    }\n    else if (backgroundImage) {\n        backgroundImage.onload = () => {\n            updateBackgroundImage(backgroundImage);\n        };\n    }\n    function render() {\n        gl.viewport(0, 0, outputWidth, outputHeight);\n        gl.useProgram(program);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, personMaskTexture);\n        if (backgroundTexture !== null) {\n            gl.activeTexture(gl.TEXTURE2);\n            gl.bindTexture(gl.TEXTURE_2D, backgroundTexture);\n            // TODO Handle correctly the background not loaded yet\n            gl.uniform1i(backgroundLocation, 2);\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n    function updateBackgroundImage(bgImage) {\n        backgroundTexture = createTexture(gl, gl.RGBA8, bgImage.naturalWidth, bgImage.naturalHeight, \n        // @ts-expect-error types are incomplete\n        gl.LINEAR, gl.LINEAR);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, bgImage.naturalWidth, bgImage.naturalHeight, gl.RGBA, gl.UNSIGNED_BYTE, bgImage);\n        let xOffset = 0;\n        let yOffset = 0;\n        let backgroundWidth = bgImage.naturalWidth;\n        let backgroundHeight = bgImage.naturalHeight;\n        const backgroundRatio = backgroundWidth / backgroundHeight;\n        if (backgroundRatio < outputRatio) {\n            backgroundHeight = backgroundWidth / outputRatio;\n            yOffset = (bgImage.naturalHeight - backgroundHeight) / 2;\n        }\n        else {\n            backgroundWidth = backgroundHeight * outputRatio;\n            xOffset = (bgImage.naturalWidth - backgroundWidth) / 2;\n        }\n        const xScale = backgroundWidth / bgImage.naturalWidth;\n        const yScale = backgroundHeight / bgImage.naturalHeight;\n        xOffset /= bgImage.naturalWidth;\n        yOffset /= bgImage.naturalHeight;\n        gl.uniform2f(backgroundScaleLocation, xScale, yScale);\n        gl.uniform2f(backgroundOffsetLocation, xOffset, yOffset);\n    }\n    function updateCoverage(coverage) {\n        gl.useProgram(program);\n        gl.uniform2f(coverageLocation, coverage[0], coverage[1]);\n    }\n    function updateLightWrapping(lightWrapping) {\n        gl.useProgram(program);\n        gl.uniform1f(lightWrappingLocation, lightWrapping);\n    }\n    function updateBlendMode(blendMode) {\n        gl.useProgram(program);\n        gl.uniform1f(blendModeLocation, blendMode === 'screen' ? 0 : 1);\n    }\n    function cleanUp() {\n        gl.deleteTexture(backgroundTexture);\n        gl.deleteProgram(program);\n        gl.deleteShader(fragmentShader);\n        gl.deleteShader(vertexShader);\n    }\n    return {\n        render,\n        updateCoverage,\n        updateLightWrapping,\n        updateBlendMode,\n        cleanUp,\n    };\n}\n\nfunction buildJointBilateralFilterStage(gl, vertexShader, positionBuffer, texCoordBuffer, inputTexture, outputTexture, canvas, segmentationConfig) {\n    const fragmentShaderSource = glsl `#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputFrame;\n    uniform sampler2D u_segmentationMask;\n    uniform vec2 u_texelSize;\n    uniform float u_step;\n    uniform float u_radius;\n    uniform float u_offset;\n    uniform float u_sigmaTexel;\n    uniform float u_sigmaColor;\n\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    float gaussian(float x, float sigma) {\n      float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);\n      return exp((x * x) * coeff);\n    }\n\n    void main() {\n      vec2 centerCoord = v_texCoord;\n      vec3 centerColor = texture(u_inputFrame, centerCoord).rgb;\n      float newVal = 0.0;\n\n      float spaceWeight = 0.0;\n      float colorWeight = 0.0;\n      float totalWeight = 0.0;\n\n      // Subsample kernel space.\n      for (float i = -u_radius + u_offset; i <= u_radius; i += u_step) {\n        for (float j = -u_radius + u_offset; j <= u_radius; j += u_step) {\n          vec2 shift = vec2(j, i) * u_texelSize;\n          vec2 coord = vec2(centerCoord + shift);\n          vec3 frameColor = texture(u_inputFrame, coord).rgb;\n          float outVal = texture(u_segmentationMask, coord).a;\n\n          spaceWeight = gaussian(distance(centerCoord, coord), u_sigmaTexel);\n          colorWeight = gaussian(distance(centerColor, frameColor), u_sigmaColor);\n          totalWeight += spaceWeight * colorWeight;\n\n          newVal += spaceWeight * colorWeight * outVal;\n        }\n      }\n      newVal /= totalWeight;\n\n      outColor = vec4(vec3(0.0), newVal);\n    }\n  `;\n    const { width: segmentationWidth, height: segmentationHeight } = segmentationConfig;\n    const { width: outputWidth, height: outputHeight } = canvas;\n    const texelWidth = 1 / outputWidth;\n    const texelHeight = 1 / outputHeight;\n    const fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const program = createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer);\n    const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n    const segmentationMaskLocation = gl.getUniformLocation(program, 'u_segmentationMask');\n    const texelSizeLocation = gl.getUniformLocation(program, 'u_texelSize');\n    const stepLocation = gl.getUniformLocation(program, 'u_step');\n    const radiusLocation = gl.getUniformLocation(program, 'u_radius');\n    const offsetLocation = gl.getUniformLocation(program, 'u_offset');\n    const sigmaTexelLocation = gl.getUniformLocation(program, 'u_sigmaTexel');\n    const sigmaColorLocation = gl.getUniformLocation(program, 'u_sigmaColor');\n    const frameBuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, outputTexture, 0);\n    gl.useProgram(program);\n    gl.uniform1i(inputFrameLocation, 0);\n    gl.uniform1i(segmentationMaskLocation, 1);\n    gl.uniform2f(texelSizeLocation, texelWidth, texelHeight);\n    // Ensures default values are configured to prevent infinite\n    // loop in fragment shader\n    updateSigmaSpace(0);\n    updateSigmaColor(0);\n    function render() {\n        gl.viewport(0, 0, outputWidth, outputHeight);\n        gl.useProgram(program);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, inputTexture);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n    function updateSigmaSpace(sigmaSpace) {\n        sigmaSpace *= Math.max(outputWidth / segmentationWidth, outputHeight / segmentationHeight);\n        const kSparsityFactor = 0.66; // Higher is sparser.\n        const step = Math.max(1, Math.sqrt(sigmaSpace) * kSparsityFactor);\n        const radius = sigmaSpace;\n        const offset = step > 1 ? step * 0.5 : 0;\n        const sigmaTexel = Math.max(texelWidth, texelHeight) * sigmaSpace;\n        gl.useProgram(program);\n        gl.uniform1f(stepLocation, step);\n        gl.uniform1f(radiusLocation, radius);\n        gl.uniform1f(offsetLocation, offset);\n        gl.uniform1f(sigmaTexelLocation, sigmaTexel);\n    }\n    function updateSigmaColor(sigmaColor) {\n        gl.useProgram(program);\n        gl.uniform1f(sigmaColorLocation, sigmaColor);\n    }\n    function cleanUp() {\n        gl.deleteFramebuffer(frameBuffer);\n        gl.deleteProgram(program);\n        gl.deleteShader(fragmentShader);\n    }\n    return { render, updateSigmaSpace, updateSigmaColor, cleanUp };\n}\n\nfunction buildResizingStage(gl, vertexShader, positionBuffer, texCoordBuffer, tflite, segmentationConfig) {\n    const fragmentShaderSource = glsl `#version 300 es\n\n    precision highp float;\n    uniform sampler2D u_inputFrame;\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    void main() {\n      outColor = texture(u_inputFrame, v_texCoord);\n    }\n  `;\n    // TFLite memory will be accessed as float32\n    const tfliteInputMemoryOffset = tflite._getInputMemoryOffset() / 4;\n    const { width: outputWidth, height: outputHeight } = segmentationConfig;\n    const outputPixelCount = outputWidth * outputHeight;\n    const fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const program = createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer);\n    const inputFrameLocation = gl.getUniformLocation(program, 'u_inputFrame');\n    const outputTexture = createTexture(gl, gl.RGBA8, outputWidth, outputHeight);\n    const frameBuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, outputTexture, 0);\n    const outputPixels = new Uint8Array(outputPixelCount * 4);\n    gl.useProgram(program);\n    gl.uniform1i(inputFrameLocation, 0);\n    function render() {\n        gl.viewport(0, 0, outputWidth, outputHeight);\n        gl.useProgram(program);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        // Downloads pixels asynchronously from GPU while rendering the current frame.\n        // The pixels will be available in the next frame render which results\n        // in offsets in the segmentation output but increases the frame rate.\n        readPixelsAsync(gl, 0, 0, outputWidth, outputHeight, gl.RGBA, gl.UNSIGNED_BYTE, outputPixels);\n        for (let i = 0; i < outputPixelCount; i++) {\n            const tfliteIndex = tfliteInputMemoryOffset + i * 3;\n            const outputIndex = i * 4;\n            tflite.HEAPF32[tfliteIndex] = outputPixels[outputIndex] / 255;\n            tflite.HEAPF32[tfliteIndex + 1] = outputPixels[outputIndex + 1] / 255;\n            tflite.HEAPF32[tfliteIndex + 2] = outputPixels[outputIndex + 2] / 255;\n        }\n    }\n    function cleanUp() {\n        gl.deleteFramebuffer(frameBuffer);\n        gl.deleteTexture(outputTexture);\n        gl.deleteProgram(program);\n        gl.deleteShader(fragmentShader);\n    }\n    return { render, cleanUp };\n}\n\nfunction buildSoftmaxStage(gl, vertexShader, positionBuffer, texCoordBuffer, tflite, outputTexture, segmentationConfig) {\n    const fragmentShaderSource = glsl `#version 300 es\n\n    precision highp float;\n\n    uniform sampler2D u_inputSegmentation;\n    in vec2 v_texCoord;\n    out vec4 outColor;\n\n    void main() {\n      vec2 segmentation = texture(u_inputSegmentation, v_texCoord).rg;\n      float shift = max(segmentation.r, segmentation.g);\n      float backgroundExp = exp(segmentation.r - shift);\n      float personExp = exp(segmentation.g - shift);\n      outColor = vec4(vec3(0.0), personExp / (backgroundExp + personExp));\n    }\n  `;\n    // TFLite memory will be accessed as float32\n    const tfliteOutputMemoryOffset = tflite._getOutputMemoryOffset() / 4;\n    const { width: segmentationWidth, height: segmentationHeight } = segmentationConfig;\n    const fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\n    const program = createPipelineStageProgram(gl, vertexShader, fragmentShader, positionBuffer, texCoordBuffer);\n    const inputLocation = gl.getUniformLocation(program, 'u_inputSegmentation');\n    const inputTexture = createTexture(gl, gl.RG32F, segmentationWidth, segmentationHeight);\n    const frameBuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, outputTexture, 0);\n    gl.useProgram(program);\n    gl.uniform1i(inputLocation, 1);\n    function render() {\n        gl.viewport(0, 0, segmentationWidth, segmentationHeight);\n        gl.useProgram(program);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, inputTexture);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, segmentationWidth, segmentationHeight, gl.RG, gl.FLOAT, tflite.HEAPF32, tfliteOutputMemoryOffset);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n    function cleanUp() {\n        gl.deleteFramebuffer(frameBuffer);\n        gl.deleteTexture(inputTexture);\n        gl.deleteProgram(program);\n        gl.deleteShader(fragmentShader);\n    }\n    return { render, cleanUp };\n}\n\nfunction buildWebGL2Pipeline(videoSource, backgroundImage, blurLevel, backgroundFilter, canvas, tflite, segmentationConfig) {\n    const gl = canvas.getContext('webgl2');\n    if (!gl)\n        throw new Error('WebGL2 is not supported');\n    if (gl.isContextLost())\n        throw new Error('WebGL2 context was lost');\n    const { width: frameWidth, height: frameHeight } = videoSource;\n    const { width: segmentationWidth, height: segmentationHeight } = segmentationConfig;\n    const vertexShaderSource = glsl `#version 300 es\n\n    in vec2 a_position;\n    in vec2 a_texCoord;\n    out vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  `;\n    const vertexShader = compileShader(gl, gl.VERTEX_SHADER, vertexShaderSource);\n    const vertexArray = gl.createVertexArray();\n    gl.bindVertexArray(vertexArray);\n    const positionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0]), gl.STATIC_DRAW);\n    const texCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0]), gl.STATIC_DRAW);\n    // We don't use texStorage2D here because texImage2D seems faster\n    // to upload video texture than texSubImage2D even though the latter\n    // is supposed to be the recommended way:\n    // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#use_texstorage_to_create_textures\n    const inputFrameTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, inputFrameTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    // TODO Rename segmentation and person mask to be more specific\n    const segmentationTexture = createTexture(gl, gl.RGBA8, segmentationWidth, segmentationHeight);\n    const personMaskTexture = createTexture(gl, gl.RGBA8, frameWidth, frameHeight);\n    const resizingStage = buildResizingStage(gl, vertexShader, positionBuffer, texCoordBuffer, tflite, segmentationConfig);\n    const loadSegmentationStage = buildSoftmaxStage(gl, vertexShader, positionBuffer, texCoordBuffer, tflite, segmentationTexture, segmentationConfig);\n    const jointBilateralFilterStage = buildJointBilateralFilterStage(gl, vertexShader, positionBuffer, texCoordBuffer, segmentationTexture, personMaskTexture, canvas, segmentationConfig);\n    const backgroundStage = backgroundFilter === 'blur'\n        ? buildBackgroundBlurStage(gl, vertexShader, positionBuffer, texCoordBuffer, personMaskTexture, canvas, blurLevel || 'high')\n        : buildBackgroundImageStage(gl, positionBuffer, texCoordBuffer, personMaskTexture, backgroundImage, canvas);\n    function render() {\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, inputFrameTexture);\n        // texImage2D seems faster than texSubImage2D to upload\n        // video texture\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, videoSource);\n        gl.bindVertexArray(vertexArray);\n        resizingStage.render();\n        tflite._runInference();\n        loadSegmentationStage.render();\n        jointBilateralFilterStage.render();\n        backgroundStage.render();\n    }\n    function updatePostProcessingConfig() {\n        jointBilateralFilterStage.updateSigmaSpace(1);\n        jointBilateralFilterStage.updateSigmaColor(0.1);\n        if (backgroundFilter === 'image') {\n            const backgroundImageStage = backgroundStage;\n            backgroundImageStage.updateCoverage([0.5, 0.75]);\n            backgroundImageStage.updateLightWrapping(0.3);\n            backgroundImageStage.updateBlendMode('screen');\n        }\n        else if (backgroundFilter === 'blur') {\n            const backgroundBlurStage = backgroundStage;\n            backgroundBlurStage.updateCoverage([0.5, 0.75]);\n        }\n        else {\n            // TODO Handle no background in a separate pipeline path\n            const backgroundImageStage = backgroundStage;\n            backgroundImageStage.updateCoverage([0, 0.9999]);\n            backgroundImageStage.updateLightWrapping(0);\n        }\n    }\n    function cleanUp() {\n        backgroundStage.cleanUp();\n        jointBilateralFilterStage.cleanUp();\n        loadSegmentationStage.cleanUp();\n        resizingStage.cleanUp();\n        gl.deleteTexture(personMaskTexture);\n        gl.deleteTexture(segmentationTexture);\n        gl.deleteTexture(inputFrameTexture);\n        gl.deleteBuffer(texCoordBuffer);\n        gl.deleteBuffer(positionBuffer);\n        gl.deleteVertexArray(vertexArray);\n        gl.deleteShader(vertexShader);\n    }\n    return { render, updatePostProcessingConfig, cleanUp };\n}\n\nvar SegmentationLevel;\n(function (SegmentationLevel) {\n    SegmentationLevel[\"LOW\"] = \"low\";\n    SegmentationLevel[\"HIGH\"] = \"high\";\n})(SegmentationLevel || (SegmentationLevel = {}));\nconst getSegmentationParams = (level) => {\n    if (level === SegmentationLevel.HIGH) {\n        return { width: 256, height: 144 };\n    }\n    return { width: 160, height: 96 };\n};\n\nfunction createRenderer(tflite, videoSource, targetCanvas, options, onError) {\n    const { backgroundFilter, backgroundImage, backgroundBlurLevel, segmentationLevel = SegmentationLevel.HIGH, fps = 30, } = options;\n    if (backgroundFilter === 'image' && !backgroundImage) {\n        throw new Error(`backgroundImage element is required when backgroundFilter is image`);\n    }\n    const pipeline = buildWebGL2Pipeline(videoSource, backgroundImage, backgroundBlurLevel, backgroundFilter, targetCanvas, tflite, getSegmentationParams(segmentationLevel));\n    const id = setInterval(() => {\n        try {\n            pipeline.render();\n            if (backgroundFilter === 'image') {\n                pipeline.updatePostProcessingConfig();\n            }\n        }\n        catch (error) {\n            onError?.(error);\n        }\n    }, 1000 / (fps <= 0 ? 30 : fps));\n    return {\n        dispose: () => {\n            pipeline.cleanUp();\n            clearInterval(id);\n        },\n    };\n}\n\nconst createTFLiteSIMDModule = (__Module) => {\n  __Module = __Module || {};\n\n  var _scriptDir =\n    typeof document !== 'undefined' && document.currentScript\n      ? document.currentScript.src\n      : undefined;\n\n  var Module = typeof __Module != 'undefined' ? __Module : {};\n  var readyPromiseResolve, readyPromiseReject;\n  Module['ready'] = new Promise(function (resolve, reject) {\n    readyPromiseResolve = resolve;\n    readyPromiseReject = reject;\n  });\n  var moduleOverrides = Object.assign({}, Module);\n  var thisProgram = './this.program';\n  var quit_ = (status, toThrow) => {\n    throw toThrow;\n  };\n  var ENVIRONMENT_IS_WEB = true;\n  var scriptDirectory = '';\n\n  function locateFile(path) {\n    if (Module['locateFile']) {\n      return Module['locateFile'](path, scriptDirectory);\n    }\n    return scriptDirectory + path;\n  }\n\n  var readBinary;\n  {\n    if (typeof document != 'undefined' && document.currentScript) {\n      scriptDirectory = document.currentScript.src;\n    }\n    if (_scriptDir) {\n      scriptDirectory = _scriptDir;\n    }\n    if (scriptDirectory.indexOf('blob:') !== 0) {\n      scriptDirectory = scriptDirectory.substr(\n        0,\n        scriptDirectory.replace(/[?#].*/, '').lastIndexOf('/') + 1,\n      );\n    } else {\n      scriptDirectory = '';\n    }\n  }\n  var out = Module['print'] || console.log.bind(console);\n  var err = Module['printErr'] || console.warn.bind(console);\n  Object.assign(Module, moduleOverrides);\n  moduleOverrides = null;\n  if (Module['arguments']) Module['arguments'];\n  if (Module['thisProgram']) thisProgram = Module['thisProgram'];\n  if (Module['quit']) quit_ = Module['quit'];\n  var wasmBinary;\n  if (Module['wasmBinary']) wasmBinary = Module['wasmBinary'];\n  var noExitRuntime = Module['noExitRuntime'] || true;\n  if (typeof WebAssembly != 'object') {\n    abort('no native wasm support detected');\n  }\n  var wasmMemory;\n  var ABORT = false;\n\n  var UTF8Decoder =\n    typeof TextDecoder != 'undefined' ? new TextDecoder('utf8') : undefined;\n\n  function UTF8ArrayToString(heapOrArray, idx, maxBytesToRead) {\n    var endIdx = idx + maxBytesToRead;\n    var endPtr = idx;\n    while (heapOrArray[endPtr] && !(endPtr >= endIdx)) ++endPtr;\n    if (endPtr - idx > 16 && heapOrArray.buffer && UTF8Decoder) {\n      return UTF8Decoder.decode(heapOrArray.subarray(idx, endPtr));\n    }\n    var str = '';\n    while (idx < endPtr) {\n      var u0 = heapOrArray[idx++];\n      if (!(u0 & 128)) {\n        str += String.fromCharCode(u0);\n        continue;\n      }\n      var u1 = heapOrArray[idx++] & 63;\n      if ((u0 & 224) == 192) {\n        str += String.fromCharCode(((u0 & 31) << 6) | u1);\n        continue;\n      }\n      var u2 = heapOrArray[idx++] & 63;\n      if ((u0 & 240) == 224) {\n        u0 = ((u0 & 15) << 12) | (u1 << 6) | u2;\n      } else {\n        u0 =\n          ((u0 & 7) << 18) | (u1 << 12) | (u2 << 6) | (heapOrArray[idx++] & 63);\n      }\n      if (u0 < 65536) {\n        str += String.fromCharCode(u0);\n      } else {\n        var ch = u0 - 65536;\n        str += String.fromCharCode(55296 | (ch >> 10), 56320 | (ch & 1023));\n      }\n    }\n    return str;\n  }\n\n  var buffer, HEAP8, HEAPU8, HEAPU32;\n\n  function updateGlobalBufferAndViews(buf) {\n    buffer = buf;\n    Module['HEAP8'] = HEAP8 = new Int8Array(buf);\n    Module['HEAP16'] = new Int16Array(buf);\n    Module['HEAP32'] = new Int32Array(buf);\n    Module['HEAPU8'] = HEAPU8 = new Uint8Array(buf);\n    Module['HEAPU16'] = new Uint16Array(buf);\n    Module['HEAPU32'] = HEAPU32 = new Uint32Array(buf);\n    Module['HEAPF32'] = new Float32Array(buf);\n    Module['HEAPF64'] = new Float64Array(buf);\n  }\n\n  Module['INITIAL_MEMORY'] || 16777216;\n  var __ATPRERUN__ = [];\n  var __ATINIT__ = [];\n  var __ATPOSTRUN__ = [];\n\n  function keepRuntimeAlive() {\n    return noExitRuntime;\n  }\n\n  function preRun() {\n    if (Module['preRun']) {\n      if (typeof Module['preRun'] == 'function')\n        Module['preRun'] = [Module['preRun']];\n      while (Module['preRun'].length) {\n        addOnPreRun(Module['preRun'].shift());\n      }\n    }\n    callRuntimeCallbacks(__ATPRERUN__);\n  }\n\n  function initRuntime() {\n    callRuntimeCallbacks(__ATINIT__);\n  }\n\n  function postRun() {\n    if (Module['postRun']) {\n      if (typeof Module['postRun'] == 'function')\n        Module['postRun'] = [Module['postRun']];\n      while (Module['postRun'].length) {\n        addOnPostRun(Module['postRun'].shift());\n      }\n    }\n    callRuntimeCallbacks(__ATPOSTRUN__);\n  }\n\n  function addOnPreRun(cb) {\n    __ATPRERUN__.unshift(cb);\n  }\n\n  function addOnInit(cb) {\n    __ATINIT__.unshift(cb);\n  }\n\n  function addOnPostRun(cb) {\n    __ATPOSTRUN__.unshift(cb);\n  }\n\n  var runDependencies = 0;\n  var dependenciesFulfilled = null;\n\n  function addRunDependency(id) {\n    runDependencies++;\n    if (Module['monitorRunDependencies']) {\n      Module['monitorRunDependencies'](runDependencies);\n    }\n  }\n\n  function removeRunDependency(id) {\n    runDependencies--;\n    if (Module['monitorRunDependencies']) {\n      Module['monitorRunDependencies'](runDependencies);\n    }\n    if (runDependencies == 0) {\n      if (dependenciesFulfilled) {\n        var callback = dependenciesFulfilled;\n        dependenciesFulfilled = null;\n        callback();\n      }\n    }\n  }\n\n  function abort(what) {\n    {\n      if (Module['onAbort']) {\n        Module['onAbort'](what);\n      }\n    }\n    what = 'Aborted(' + what + ')';\n    err(what);\n    ABORT = true;\n    what += '. Build with -sASSERTIONS for more info.';\n    var e = new WebAssembly.RuntimeError(what);\n    readyPromiseReject(e);\n    throw e;\n  }\n\n  var dataURIPrefix = 'data:application/octet-stream;base64,';\n\n  function isDataURI(filename) {\n    return filename.startsWith(dataURIPrefix);\n  }\n\n  var wasmBinaryFile;\n  wasmBinaryFile = 'tflite-simd.wasm';\n  if (!isDataURI(wasmBinaryFile)) {\n    wasmBinaryFile = locateFile(wasmBinaryFile);\n  }\n\n  function getBinary(file) {\n    try {\n      if (file == wasmBinaryFile && wasmBinary) {\n        return new Uint8Array(wasmBinary);\n      }\n      if (readBinary) ;\n      throw 'both async and sync fetching of the wasm failed';\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n    } catch (err) {\n      abort(err);\n    }\n  }\n\n  function getBinaryPromise() {\n    if (!wasmBinary && (ENVIRONMENT_IS_WEB)) {\n      if (typeof fetch == 'function') {\n        return fetch(wasmBinaryFile, { credentials: 'same-origin' })\n          .then(function (response) {\n            if (!response['ok']) {\n              throw (\n                \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\"\n              );\n            }\n            return response['arrayBuffer']();\n          })\n          .catch(function () {\n            return getBinary(wasmBinaryFile);\n          });\n      }\n    }\n    return Promise.resolve().then(function () {\n      return getBinary(wasmBinaryFile);\n    });\n  }\n\n  function createWasm() {\n    var info = {\n      env: asmLibraryArg,\n      wasi_snapshot_preview1: asmLibraryArg,\n    };\n\n    function receiveInstance(instance, module) {\n      var exports = instance.exports;\n      Module['asm'] = exports;\n      wasmMemory = Module['asm']['memory'];\n      updateGlobalBufferAndViews(wasmMemory.buffer);\n      Module['asm']['__indirect_function_table'];\n      addOnInit(Module['asm']['__wasm_call_ctors']);\n      removeRunDependency();\n    }\n\n    addRunDependency();\n\n    function receiveInstantiationResult(result) {\n      receiveInstance(result['instance']);\n    }\n\n    function instantiateArrayBuffer(receiver) {\n      return getBinaryPromise()\n        .then(function (binary) {\n          return WebAssembly.instantiate(binary, info);\n        })\n        .then(function (instance) {\n          return instance;\n        })\n        .then(receiver, function (reason) {\n          err('failed to asynchronously prepare wasm: ' + reason);\n          abort(reason);\n        });\n    }\n\n    function instantiateAsync() {\n      if (\n        !wasmBinary &&\n        typeof WebAssembly.instantiateStreaming == 'function' &&\n        !isDataURI(wasmBinaryFile) &&\n        typeof fetch == 'function'\n      ) {\n        return fetch(wasmBinaryFile, { credentials: 'same-origin' }).then(\n          function (response) {\n            var result = WebAssembly.instantiateStreaming(response, info);\n            return result.then(receiveInstantiationResult, function (reason) {\n              err('wasm streaming compile failed: ' + reason);\n              err('falling back to ArrayBuffer instantiation');\n              return instantiateArrayBuffer(receiveInstantiationResult);\n            });\n          },\n        );\n      } else {\n        return instantiateArrayBuffer(receiveInstantiationResult);\n      }\n    }\n\n    if (Module['instantiateWasm']) {\n      try {\n        var exports = Module['instantiateWasm'](info, receiveInstance);\n        return exports;\n      } catch (e) {\n        err('Module.instantiateWasm callback failed with error: ' + e);\n        readyPromiseReject(e);\n      }\n    }\n    instantiateAsync().catch(readyPromiseReject);\n    return {};\n  }\n\n  function ExitStatus(status) {\n    this.name = 'ExitStatus';\n    this.message = 'Program terminated with exit(' + status + ')';\n    this.status = status;\n  }\n\n  function callRuntimeCallbacks(callbacks) {\n    while (callbacks.length > 0) {\n      callbacks.shift()(Module);\n    }\n  }\n\n  function __dlinit(main_dso_handle) {}\n\n  var dlopenMissingError =\n    'To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking';\n\n  function __dlopen_js(filename, flag) {\n    abort(dlopenMissingError);\n  }\n\n  function __dlsym_js(handle, symbol) {\n    abort(dlopenMissingError);\n  }\n\n  var nowIsMonotonic = true;\n\n  function __emscripten_get_now_is_monotonic() {\n    return nowIsMonotonic;\n  }\n\n  function __mmap_js(len, prot, flags, fd, off, allocated) {\n    return -52;\n  }\n\n  function __munmap_js(addr, len, prot, flags, fd, offset) {}\n\n  function _abort() {\n    abort('');\n  }\n\n  function _emscripten_date_now() {\n    return Date.now();\n  }\n\n  function getHeapMax() {\n    return 2147483648;\n  }\n\n  function _emscripten_get_heap_max() {\n    return getHeapMax();\n  }\n\n  var _emscripten_get_now;\n  _emscripten_get_now = () => performance.now();\n\n  function _emscripten_memcpy_big(dest, src, num) {\n    HEAPU8.copyWithin(dest, src, src + num);\n  }\n\n  function emscripten_realloc_buffer(size) {\n    try {\n      wasmMemory.grow((size - buffer.byteLength + 65535) >>> 16);\n      updateGlobalBufferAndViews(wasmMemory.buffer);\n      return 1;\n    } catch (e) {}\n  }\n\n  function _emscripten_resize_heap(requestedSize) {\n    var oldSize = HEAPU8.length;\n    requestedSize = requestedSize >>> 0;\n    var maxHeapSize = getHeapMax();\n    if (requestedSize > maxHeapSize) {\n      return false;\n    }\n    let alignUp = (x, multiple) => x + ((multiple - (x % multiple)) % multiple);\n    for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n      var overGrownHeapSize = oldSize * (1 + 0.2 / cutDown);\n      overGrownHeapSize = Math.min(\n        overGrownHeapSize,\n        requestedSize + 100663296,\n      );\n      var newSize = Math.min(\n        maxHeapSize,\n        alignUp(Math.max(requestedSize, overGrownHeapSize), 65536),\n      );\n      var replacement = emscripten_realloc_buffer(newSize);\n      if (replacement) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  var ENV = {};\n\n  function getExecutableName() {\n    return thisProgram || './this.program';\n  }\n\n  function getEnvStrings() {\n    if (!getEnvStrings.strings) {\n      var lang =\n        (\n          (typeof navigator == 'object' &&\n            navigator.languages &&\n            navigator.languages[0]) ||\n          'C'\n        ).replace('-', '_') + '.UTF-8';\n      var env = {\n        USER: 'web_user',\n        LOGNAME: 'web_user',\n        PATH: '/',\n        PWD: '/',\n        HOME: '/home/web_user',\n        LANG: lang,\n        _: getExecutableName(),\n      };\n      for (var x in ENV) {\n        if (ENV[x] === undefined) delete env[x];\n        else env[x] = ENV[x];\n      }\n      var strings = [];\n      for (var x in env) {\n        strings.push(x + '=' + env[x]);\n      }\n      getEnvStrings.strings = strings;\n    }\n    return getEnvStrings.strings;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function writeAsciiToMemory(str, buffer, dontAddNull) {\n    for (var i = 0; i < str.length; ++i) {\n      HEAP8[buffer++ >> 0] = str.charCodeAt(i);\n    }\n    HEAP8[buffer >> 0] = 0;\n  }\n\n  function _environ_get(__environ, environ_buf) {\n    var bufSize = 0;\n    getEnvStrings().forEach(function (string, i) {\n      var ptr = environ_buf + bufSize;\n      HEAPU32[(__environ + i * 4) >> 2] = ptr;\n      writeAsciiToMemory(string, ptr);\n      bufSize += string.length + 1;\n    });\n    return 0;\n  }\n\n  function _environ_sizes_get(penviron_count, penviron_buf_size) {\n    var strings = getEnvStrings();\n    HEAPU32[penviron_count >> 2] = strings.length;\n    var bufSize = 0;\n    strings.forEach(function (string) {\n      bufSize += string.length + 1;\n    });\n    HEAPU32[penviron_buf_size >> 2] = bufSize;\n    return 0;\n  }\n\n  function _proc_exit(code) {\n    if (!keepRuntimeAlive()) {\n      if (Module['onExit']) Module['onExit'](code);\n      ABORT = true;\n    }\n    quit_(code, new ExitStatus(code));\n  }\n\n  function exitJS(status, implicit) {\n    _proc_exit(status);\n  }\n\n  var _exit = exitJS;\n\n  function _fd_close(fd) {\n    return 52;\n  }\n\n  function _fd_seek(fd, offset_low, offset_high, whence, newOffset) {\n    return 70;\n  }\n\n  var printCharBuffers = [null, [], []];\n\n  function printChar(stream, curr) {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    var buffer = printCharBuffers[stream];\n    if (curr === 0 || curr === 10) {\n      (stream === 1 ? out : err)(UTF8ArrayToString(buffer, 0));\n      buffer.length = 0;\n    } else {\n      buffer.push(curr);\n    }\n  }\n\n  function _fd_write(fd, iov, iovcnt, pnum) {\n    var num = 0;\n    for (var i = 0; i < iovcnt; i++) {\n      var ptr = HEAPU32[iov >> 2];\n      var len = HEAPU32[(iov + 4) >> 2];\n      iov += 8;\n      for (var j = 0; j < len; j++) {\n        printChar(fd, HEAPU8[ptr + j]);\n      }\n      num += len;\n    }\n    HEAPU32[pnum >> 2] = num;\n    return 0;\n  }\n\n  function getRandomDevice() {\n    if (\n      typeof crypto == 'object' &&\n      typeof crypto['getRandomValues'] == 'function'\n    ) {\n      var randomBuffer = new Uint8Array(1);\n      return () => {\n        crypto.getRandomValues(randomBuffer);\n        return randomBuffer[0];\n      };\n    } else return () => abort('randomDevice');\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  function _getentropy(buffer, size) {\n    if (!_getentropy.randomDevice) {\n      _getentropy.randomDevice = getRandomDevice();\n    }\n    for (var i = 0; i < size; i++) {\n      HEAP8[(buffer + i) >> 0] = _getentropy.randomDevice();\n    }\n    return 0;\n  }\n\n  var asmLibraryArg = {\n    _dlinit: __dlinit,\n    _dlopen_js: __dlopen_js,\n    _dlsym_js: __dlsym_js,\n    _emscripten_get_now_is_monotonic: __emscripten_get_now_is_monotonic,\n    _mmap_js: __mmap_js,\n    _munmap_js: __munmap_js,\n    abort: _abort,\n    emscripten_date_now: _emscripten_date_now,\n    emscripten_get_heap_max: _emscripten_get_heap_max,\n    emscripten_get_now: _emscripten_get_now,\n    emscripten_memcpy_big: _emscripten_memcpy_big,\n    emscripten_resize_heap: _emscripten_resize_heap,\n    environ_get: _environ_get,\n    environ_sizes_get: _environ_sizes_get,\n    exit: _exit,\n    fd_close: _fd_close,\n    fd_seek: _fd_seek,\n    fd_write: _fd_write,\n    getentropy: _getentropy,\n  };\n  createWasm();\n  (Module['___wasm_call_ctors'] = function () {\n    return (Module['___wasm_call_ctors'] =\n      Module['asm']['__wasm_call_ctors']).apply(null, arguments);\n  });\n  (Module['_getModelBufferMemoryOffset'] =\n    function () {\n      return (Module[\n        '_getModelBufferMemoryOffset'\n      ] =\n        Module['asm']['getModelBufferMemoryOffset']).apply(null, arguments);\n    });\n  (Module['_getInputMemoryOffset'] = function () {\n    return (Module['_getInputMemoryOffset'] =\n      Module['asm']['getInputMemoryOffset']).apply(null, arguments);\n  });\n  (Module['_getInputHeight'] = function () {\n    return (Module['_getInputHeight'] =\n      Module['asm']['getInputHeight']).apply(null, arguments);\n  });\n  (Module['_getInputWidth'] = function () {\n    return (Module['_getInputWidth'] =\n      Module['asm']['getInputWidth']).apply(null, arguments);\n  });\n  (Module['_getInputChannelCount'] = function () {\n    return (Module['_getInputChannelCount'] =\n      Module['asm']['getInputChannelCount']).apply(null, arguments);\n  });\n  (Module['_getOutputMemoryOffset'] = function () {\n    return (Module['_getOutputMemoryOffset'] =\n      Module['asm']['getOutputMemoryOffset']).apply(null, arguments);\n  });\n  (Module['_getOutputHeight'] = function () {\n    return (Module['_getOutputHeight'] =\n      Module['asm']['getOutputHeight']).apply(null, arguments);\n  });\n  (Module['_getOutputWidth'] = function () {\n    return (Module['_getOutputWidth'] =\n      Module['asm']['getOutputWidth']).apply(null, arguments);\n  });\n  (Module['_getOutputChannelCount'] = function () {\n    return (Module['_getOutputChannelCount'] =\n      Module['asm']['getOutputChannelCount']).apply(null, arguments);\n  });\n  (Module['_loadModel'] = function () {\n    return (Module['_loadModel'] =\n      Module['asm']['loadModel']).apply(null, arguments);\n  });\n  (Module['_runInference'] = function () {\n    return (Module['_runInference'] =\n      Module['asm']['runInference']).apply(null, arguments);\n  });\n  (Module['_malloc'] = function () {\n    return (Module['_malloc'] = Module['asm']['malloc']).apply(\n      null,\n      arguments,\n    );\n  });\n  (Module['___errno_location'] = function () {\n    return (Module['___errno_location'] =\n      Module['asm']['__errno_location']).apply(null, arguments);\n  });\n  (Module['___dl_seterr'] = function () {\n    return (Module['___dl_seterr'] =\n      Module['asm']['__dl_seterr']).apply(null, arguments);\n  });\n  (Module['stackSave'] = function () {\n    return (Module['stackSave'] = Module['asm']['stackSave']).apply(\n      null,\n      arguments,\n    );\n  });\n  (Module['stackRestore'] = function () {\n    return (Module['stackRestore'] =\n      Module['asm']['stackRestore']).apply(null, arguments);\n  });\n  (Module['stackAlloc'] = function () {\n    return (Module['stackAlloc'] =\n      Module['asm']['stackAlloc']).apply(null, arguments);\n  });\n  (Module['dynCall_jjj'] = function () {\n    return (Module['dynCall_jjj'] =\n      Module['asm']['dynCall_jjj']).apply(null, arguments);\n  });\n  (Module['dynCall_jiii'] = function () {\n    return (Module['dynCall_jiii'] =\n      Module['asm']['dynCall_jiii']).apply(null, arguments);\n  });\n  (Module['dynCall_iiiijj'] = function () {\n    return (Module['dynCall_iiiijj'] =\n      Module['asm']['dynCall_iiiijj']).apply(null, arguments);\n  });\n  (Module['dynCall_viijj'] = function () {\n    return (Module['dynCall_viijj'] =\n      Module['asm']['dynCall_viijj']).apply(null, arguments);\n  });\n  (Module['dynCall_viiijjj'] = function () {\n    return (Module['dynCall_viiijjj'] =\n      Module['asm']['dynCall_viiijjj']).apply(null, arguments);\n  });\n  (Module['dynCall_iijjiiii'] = function () {\n    return (Module['dynCall_iijjiiii'] =\n      Module['asm']['dynCall_iijjiiii']).apply(null, arguments);\n  });\n  (Module['dynCall_jiji'] = function () {\n    return (Module['dynCall_jiji'] =\n      Module['asm']['dynCall_jiji']).apply(null, arguments);\n  });\n  var calledRun;\n  dependenciesFulfilled = function runCaller() {\n    if (!calledRun) run();\n    if (!calledRun) dependenciesFulfilled = runCaller;\n  };\n\n  function run(args) {\n    if (runDependencies > 0) {\n      return;\n    }\n    preRun();\n    if (runDependencies > 0) {\n      return;\n    }\n\n    function doRun() {\n      if (calledRun) return;\n      calledRun = true;\n      Module['calledRun'] = true;\n      if (ABORT) return;\n      initRuntime();\n      readyPromiseResolve(Module);\n      if (Module['onRuntimeInitialized']) Module['onRuntimeInitialized']();\n      postRun();\n    }\n\n    if (Module['setStatus']) {\n      Module['setStatus']('Running...');\n      setTimeout(function () {\n        setTimeout(function () {\n          Module['setStatus']('');\n        }, 1);\n        doRun();\n      }, 1);\n    } else {\n      doRun();\n    }\n  }\n\n  if (Module['preInit']) {\n    if (typeof Module['preInit'] == 'function')\n      Module['preInit'] = [Module['preInit']];\n    while (Module['preInit'].length > 0) {\n      Module['preInit'].pop()();\n    }\n  }\n  run();\n\n  return __Module.ready;\n};\n\nconst version = \"0.1.4\";\nconst packageName = \"@stream-io/video-filters-web\";\n\n// @ts-expect-error - module is not declared\n// This is a WebAssembly module compiled from the TensorFlow Lite C++ library.\nconst createTFLite = createTFLiteSIMDModule;\nconst loadTFLite = async (options = {}) => {\n    const { basePath = `https://unpkg.com/${packageName}@${version}/tf`, tfFilePath = `${basePath}/tflite/tflite-simd.wasm`, modelFilePath = `${basePath}/models/segm_full_v679.tflite`, } = options;\n    const [tfLite, model] = await Promise.all([\n        createTFLite({ locateFile: () => tfFilePath }),\n        fetchModel(modelFilePath),\n    ]);\n    const modelBufferOffset = tfLite._getModelBufferMemoryOffset();\n    tfLite.HEAPU8.set(new Uint8Array(model), modelBufferOffset);\n    tfLite._loadModel(model.byteLength);\n    return tfLite;\n};\nlet lastModelFilePath = '';\nlet modelFileCache;\nconst fetchModel = async (modelFilePath) => {\n    const model = modelFilePath === lastModelFilePath && modelFileCache\n        ? modelFileCache\n        : await fetch(modelFilePath).then((r) => r.arrayBuffer());\n    // Cache the model file for future use.\n    modelFileCache = model;\n    lastModelFilePath = modelFilePath;\n    return model;\n};\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1maWx0ZXJzLXdlYi9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJDOztBQUUzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlEQUFJLEtBQUs7O0FBRXBCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELDhCQUE4QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDRCQUE0QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHlCQUF5QixXQUFXLGNBQWMsNENBQTRDO0FBQzlGLHlCQUF5QixXQUFXLGNBQWMsNkNBQTZDOztBQUUvRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsc0JBQXNCLE1BQU0sYUFBYTtBQUN6Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMkNBQTJDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyQ0FBMkM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQ0FBMkMsZUFBZTtBQUMxRCw2Q0FBNkMsZUFBZTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Es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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscURBQXFEOztBQUVyRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNEJBQTRCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDRCQUE0QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixjQUFjO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7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TDtBQUNBLHVCQUF1Qiw4QkFBOEI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4RTtBQUM5RSIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb21pZS8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL3ZpZGVvLWZpbHRlcnMtd2ViL2Rpc3QvaW5kZXguZXMuanM/YzM1YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaW1kIH0gZnJvbSAnd2FzbS1mZWF0dXJlLWRldGVjdCc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHBsYXRmb3JtIGlzIGEgbW9iaWxlIGRldmljZS5cbiAqXG4gKiBTZWU6XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0Jyb3dzZXJfZGV0ZWN0aW9uX3VzaW5nX3RoZV91c2VyX2FnZW50XG4gKi9cbmNvbnN0IGlzTW9iaWxlID0gKCkgPT4gL01vYmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuLyoqXG4gKiBSdW5zIGEgY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHBsYXRmb3JtIHN1cHBvcnRzXG4gKiB0aGUgbmVjZXNzYXJ5IEFQSXMgcmVxdWlyZWQgZm9yIHRoZSB2aWRlbyBmaWx0ZXJzLlxuICovXG5jb25zdCBpc1BsYXRmb3JtU3VwcG9ydGVkID0gYXN5bmMgKCkgPT4gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAhaXNNb2JpbGUoKSAmJiAvLyB3ZSBkb24ndCBzdXBwb3J0IG1vYmlsZSBkZXZpY2VzIHlldCBkdWUgdG8gcGVyZm9ybWFuY2UgaXNzdWVzXG4gICAgdHlwZW9mIFdlYkFzc2VtYmx5ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICEhd2luZG93LldlYkdMMlJlbmRlcmluZ0NvbnRleHQgJiYgLy8gV2ViR0wyIGlzIHJlcXVpcmVkIGZvciB0aGUgdmlkZW8gZmlsdGVyc1xuICAgICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykuZ2V0Q29udGV4dCgnd2ViZ2wyJykgJiZcbiAgICAoYXdhaXQgc2ltZCgpKTsgLy8gU0lNRCBpcyByZXF1aXJlZCBmb3IgdGhlIHdhc20gbW9kdWxlXG5cbi8qKlxuICogVXNlIGl0IGFsb25nIHdpdGggYm95c3dhbi5nbHNsLWxpdGVyYWwgVlNDb2RlIGV4dGVuc2lvblxuICogdG8gZ2V0IEdMU0wgc3ludGF4IGhpZ2hsaWdodGluZy5cbiAqIGh0dHBzOi8vbWFya2V0cGxhY2UudmlzdWFsc3R1ZGlvLmNvbS9pdGVtcz9pdGVtTmFtZT1ib3lzd2FuLmdsc2wtbGl0ZXJhbFxuICpcbiAqIE9uIFZTQ29kZSBPU1MsIGJveXN3YW4uZ2xzbC1saXRlcmFsIHJlcXVpcmVzIHNsZXZlc3F1ZS5zaGFkZXIgZXh0ZW5zaW9uXG4gKiB0byBiZSBpbnN0YWxsZWQgYXMgd2VsbC5cbiAqIGh0dHBzOi8vbWFya2V0cGxhY2UudmlzdWFsc3R1ZGlvLmNvbS9pdGVtcz9pdGVtTmFtZT1zbGV2ZXNxdWUuc2hhZGVyXG4gKi9cbmNvbnN0IGdsc2wgPSBTdHJpbmcucmF3O1xuZnVuY3Rpb24gY3JlYXRlUGlwZWxpbmVTdGFnZVByb2dyYW0oZ2wsIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlcikge1xuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcbiAgICBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2FfcG9zaXRpb24nKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcG9zaXRpb25CdWZmZXIpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICBjb25zdCB0ZXhDb29yZEF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2FfdGV4Q29vcmQnKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0ZXhDb29yZEF0dHJpYnV0ZUxvY2F0aW9uKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGV4Q29vcmRCdWZmZXIpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGV4Q29vcmRBdHRyaWJ1dGVMb2NhdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oZ2wsIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIpIHtcbiAgICBjb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBsaW5rIFdlYkdMIHByb2dyYW06ICR7Z2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSl9YCk7XG4gICAgfVxuICAgIHJldHVybiBwcm9ncmFtO1xufVxuZnVuY3Rpb24gY29tcGlsZVNoYWRlcihnbCwgc2hhZGVyVHlwZSwgc2hhZGVyU291cmNlKSB7XG4gICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvbXBpbGUgc2hhZGVyOiAke2dsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRleHR1cmUoZ2wsIGludGVybmFsZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCBtaW5GaWx0ZXIgPSBnbC5ORUFSRVNULCBtYWdGaWx0ZXIgPSBnbC5ORUFSRVNUKSB7XG4gICAgY29uc3QgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgbWluRmlsdGVyKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgbWFnRmlsdGVyKTtcbiAgICBnbC50ZXhTdG9yYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMSwgaW50ZXJuYWxmb3JtYXQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIHJldHVybiB0ZXh0dXJlO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVhZFBpeGVsc0FzeW5jKGdsLCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIHR5cGUsIGRlc3QpIHtcbiAgICBjb25zdCBidWYgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLlBJWEVMX1BBQ0tfQlVGRkVSLCBidWYpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuUElYRUxfUEFDS19CVUZGRVIsIGRlc3QuYnl0ZUxlbmd0aCwgZ2wuU1RSRUFNX1JFQUQpO1xuICAgIGdsLnJlYWRQaXhlbHMoeCwgeSwgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCB0eXBlLCAwKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLlBJWEVMX1BBQ0tfQlVGRkVSLCBudWxsKTtcbiAgICBhd2FpdCBnZXRCdWZmZXJTdWJEYXRhQXN5bmMoZ2wsIGdsLlBJWEVMX1BBQ0tfQlVGRkVSLCBidWYsIDAsIGRlc3QpO1xuICAgIGdsLmRlbGV0ZUJ1ZmZlcihidWYpO1xuICAgIHJldHVybiBkZXN0O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QnVmZmVyU3ViRGF0YUFzeW5jKGdsLCB0YXJnZXQsIGJ1ZmZlciwgc3JjQnl0ZU9mZnNldCwgZHN0QnVmZmVyLCBkc3RPZmZzZXQsIGxlbmd0aCkge1xuICAgIGNvbnN0IHN5bmMgPSBnbC5mZW5jZVN5bmMoZ2wuU1lOQ19HUFVfQ09NTUFORFNfQ09NUExFVEUsIDApO1xuICAgIGdsLmZsdXNoKCk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50V2FpdEFzeW5jKGdsLCBzeW5jKTtcbiAgICBnbC5kZWxldGVTeW5jKHN5bmMpO1xuICAgIGlmIChyZXMgIT09IGdsLldBSVRfRkFJTEVEKSB7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIodGFyZ2V0LCBidWZmZXIpO1xuICAgICAgICBnbC5nZXRCdWZmZXJTdWJEYXRhKHRhcmdldCwgc3JjQnl0ZU9mZnNldCwgZHN0QnVmZmVyLCBkc3RPZmZzZXQsIGxlbmd0aCk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIodGFyZ2V0LCBudWxsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGllbnRXYWl0QXN5bmMoZ2wsIHN5bmMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgZnVuY3Rpb24gdGVzdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGdsLmNsaWVudFdhaXRTeW5jKHN5bmMsIDAsIDApO1xuICAgICAgICAgICAgaWYgKHJlcyA9PT0gZ2wuV0FJVF9GQUlMRUQpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcyA9PT0gZ2wuVElNRU9VVF9FWFBJUkVEKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0ZXN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dCh0ZXN0KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYnVpbGRCYWNrZ3JvdW5kQmx1clN0YWdlKGdsLCB2ZXJ0ZXhTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlciwgcGVyc29uTWFza1RleHR1cmUsIGNhbnZhcywgYmx1ckxldmVsKSB7XG4gICAgY29uc3QgYmx1clBhc3MgPSBidWlsZEJsdXJQYXNzKGdsLCB2ZXJ0ZXhTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlciwgcGVyc29uTWFza1RleHR1cmUsIGNhbnZhcywgYmx1ckxldmVsKTtcbiAgICBjb25zdCBibGVuZFBhc3MgPSBidWlsZEJsZW5kUGFzcyhnbCwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyLCBjYW52YXMpO1xuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgYmx1clBhc3MucmVuZGVyKCk7XG4gICAgICAgIGJsZW5kUGFzcy5yZW5kZXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQ292ZXJhZ2UoY292ZXJhZ2UpIHtcbiAgICAgICAgYmxlbmRQYXNzLnVwZGF0ZUNvdmVyYWdlKGNvdmVyYWdlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYW5VcCgpIHtcbiAgICAgICAgYmxlbmRQYXNzLmNsZWFuVXAoKTtcbiAgICAgICAgYmx1clBhc3MuY2xlYW5VcCgpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXIsXG4gICAgICAgIHVwZGF0ZUNvdmVyYWdlLFxuICAgICAgICBjbGVhblVwLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZEJsdXJQYXNzKGdsLCB2ZXJ0ZXhTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlciwgcGVyc29uTWFza1RleHR1cmUsIGNhbnZhcywgYmx1ckxldmVsKSB7XG4gICAgY29uc3Qgc2lnbWEgPSB0eXBlb2YgYmx1ckxldmVsID09PSAnbnVtYmVyJ1xuICAgICAgICA/IGJsdXJMZXZlbFxuICAgICAgICA6IGJsdXJMZXZlbCA9PT0gJ2xvdydcbiAgICAgICAgICAgID8gMlxuICAgICAgICAgICAgOiBibHVyTGV2ZWwgPT09ICdtZWRpdW0nXG4gICAgICAgICAgICAgICAgPyA0XG4gICAgICAgICAgICAgICAgOiA2O1xuICAgIGNvbnN0IHdpbmRvd1NpemUgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHNpZ21hICogMykpO1xuICAgIGNvbnN0IG9mZnNldCA9IG5ldyBBcnJheSh3aW5kb3dTaXplKS5maWxsKDApLm1hcCgodiwgaW5kZXgpID0+IGluZGV4KTtcbiAgICBjb25zdCB2YXJpYW5jZSA9IHNpZ21hICoqIDI7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IG9mZnNldC5tYXAoKHgpID0+IHtcbiAgICAgICAgdmFyIG0gPSBzaWdtYSAqIE1hdGguc3FydCgyICogTWF0aC5QSSk7XG4gICAgICAgIHZhciBlID0gTWF0aC5leHAoLSh4ICoqIDIpIC8gKDIgKiB2YXJpYW5jZSkpO1xuICAgICAgICByZXR1cm4gZSAvIG07XG4gICAgfSk7XG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBnbHNsIGAjdmVyc2lvbiAzMDAgZXNcblxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW5wdXRGcmFtZTtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X3BlcnNvbk1hc2s7XG4gICAgdW5pZm9ybSB2ZWMyIHVfdGV4ZWxTaXplO1xuXG4gICAgaW4gdmVjMiB2X3RleENvb3JkO1xuICAgIG91dCB2ZWM0IG91dENvbG9yO1xuXG4gICAgY29uc3QgZmxvYXQgb2Zmc2V0WyR7d2luZG93U2l6ZX1dID0gZmxvYXRbXSgke29mZnNldC5tYXAoKGkpID0+IGkudG9GaXhlZCgxMCkpLmpvaW4oJywgJyl9KTtcbiAgICBjb25zdCBmbG9hdCB3ZWlnaHRbJHt3aW5kb3dTaXplfV0gPSBmbG9hdFtdKCR7d2VpZ2h0cy5tYXAoKGkpID0+IGkudG9GaXhlZCgxMCkpLmpvaW4oJywgJyl9KTtcblxuICAgIHZvaWQgbWFpbigpIHtcbiAgICAgIHZlYzQgY2VudGVyQ29sb3IgPSB0ZXh0dXJlKHVfaW5wdXRGcmFtZSwgdl90ZXhDb29yZCk7XG4gICAgICBmbG9hdCBwZXJzb25NYXNrID0gdGV4dHVyZSh1X3BlcnNvbk1hc2ssIHZfdGV4Q29vcmQpLmE7XG5cbiAgICAgIHZlYzQgZnJhbWVDb2xvciA9IGNlbnRlckNvbG9yICogd2VpZ2h0WzBdICogKDEuMCAtIHBlcnNvbk1hc2spO1xuXG4gICAgICBmb3IgKGludCBpID0gMTsgaSA8ICR7d2luZG93U2l6ZX07IGkrKykge1xuICAgICAgICB2ZWMyIG9mZnNldCA9IHZlYzIob2Zmc2V0W2ldKSAqIHVfdGV4ZWxTaXplO1xuXG4gICAgICAgIHZlYzIgdGV4Q29vcmQgPSB2X3RleENvb3JkICsgb2Zmc2V0O1xuICAgICAgICBmcmFtZUNvbG9yICs9IHRleHR1cmUodV9pbnB1dEZyYW1lLCB0ZXhDb29yZClcbiAgICAgICAgICAgKiB3ZWlnaHRbaV1cbiAgICAgICAgICAgKiAoMS4wIC0gdGV4dHVyZSh1X3BlcnNvbk1hc2ssIHRleENvb3JkKS5hKTtcblxuICAgICAgICB0ZXhDb29yZCA9IHZfdGV4Q29vcmQgLSBvZmZzZXQ7XG4gICAgICAgIGZyYW1lQ29sb3IgKz0gdGV4dHVyZSh1X2lucHV0RnJhbWUsIHRleENvb3JkKVxuICAgICAgICAgICogd2VpZ2h0W2ldXG4gICAgICAgICAgKiAoMS4wIC0gdGV4dHVyZSh1X3BlcnNvbk1hc2ssIHRleENvb3JkKS5hKTtcbiAgICAgIH1cbiAgICAgIG91dENvbG9yID0gdmVjNChmcmFtZUNvbG9yLnJnYiArICgxLjAgLSBmcmFtZUNvbG9yLmEpICogY2VudGVyQ29sb3IucmdiLCAxLjApO1xuICAgIH1cbiAgYDtcbiAgICBjb25zdCBzY2FsZSA9IDAuNTtcbiAgICBjb25zdCBvdXRwdXRXaWR0aCA9IGNhbnZhcy53aWR0aCAqIHNjYWxlO1xuICAgIGNvbnN0IG91dHB1dEhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKiBzY2FsZTtcbiAgICBjb25zdCB0ZXhlbFdpZHRoID0gMSAvIG91dHB1dFdpZHRoO1xuICAgIGNvbnN0IHRleGVsSGVpZ2h0ID0gMSAvIG91dHB1dEhlaWdodDtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQaXBlbGluZVN0YWdlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlciwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyKTtcbiAgICBjb25zdCBpbnB1dEZyYW1lTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfaW5wdXRGcmFtZScpO1xuICAgIGNvbnN0IHBlcnNvbk1hc2tMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9wZXJzb25NYXNrJyk7XG4gICAgY29uc3QgdGV4ZWxTaXplTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfdGV4ZWxTaXplJyk7XG4gICAgY29uc3QgdGV4dHVyZTEgPSBjcmVhdGVUZXh0dXJlKGdsLCBnbC5SR0JBOCwgb3V0cHV0V2lkdGgsIG91dHB1dEhlaWdodCwgZ2wuTkVBUkVTVCwgXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0eXBlcyBhcmUgaW5jb21wbGV0ZVxuICAgIGdsLkxJTkVBUik7XG4gICAgY29uc3QgdGV4dHVyZTIgPSBjcmVhdGVUZXh0dXJlKGdsLCBnbC5SR0JBOCwgb3V0cHV0V2lkdGgsIG91dHB1dEhlaWdodCwgZ2wuTkVBUkVTVCwgXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciB0eXBlcyBhcmUgaW5jb21wbGV0ZVxuICAgIGdsLkxJTkVBUik7XG4gICAgY29uc3QgZnJhbWVCdWZmZXIxID0gZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lQnVmZmVyMSk7XG4gICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0ZXh0dXJlMSwgMCk7XG4gICAgY29uc3QgZnJhbWVCdWZmZXIyID0gZ2wuY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lQnVmZmVyMik7XG4gICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCB0ZXh0dXJlMiwgMCk7XG4gICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBnbC51bmlmb3JtMWkocGVyc29uTWFza0xvY2F0aW9uLCAxKTtcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQpO1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC51bmlmb3JtMWkoaW5wdXRGcmFtZUxvY2F0aW9uLCAwKTtcbiAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMSk7XG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHBlcnNvbk1hc2tUZXh0dXJlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGdsLnVuaWZvcm0yZih0ZXhlbFNpemVMb2NhdGlvbiwgMCwgdGV4ZWxIZWlnaHQpO1xuICAgICAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZUJ1ZmZlcjEpO1xuICAgICAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XG4gICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUyKTtcbiAgICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUxKTtcbiAgICAgICAgICAgIGdsLnVuaWZvcm0xaShpbnB1dEZyYW1lTG9jYXRpb24sIDIpO1xuICAgICAgICAgICAgZ2wudW5pZm9ybTJmKHRleGVsU2l6ZUxvY2F0aW9uLCB0ZXhlbFdpZHRoLCAwKTtcbiAgICAgICAgICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZnJhbWVCdWZmZXIyKTtcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZTIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lQnVmZmVyMik7XG4gICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lQnVmZmVyMSk7XG4gICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGV4dHVyZTIpO1xuICAgICAgICBnbC5kZWxldGVUZXh0dXJlKHRleHR1cmUxKTtcbiAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyLFxuICAgICAgICBjbGVhblVwLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZEJsZW5kUGFzcyhnbCwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyLCBjYW52YXMpIHtcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBnbHNsIGAjdmVyc2lvbiAzMDAgZXNcblxuICAgIGluIHZlYzIgYV9wb3NpdGlvbjtcbiAgICBpbiB2ZWMyIGFfdGV4Q29vcmQ7XG5cbiAgICBvdXQgdmVjMiB2X3RleENvb3JkO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgLy8gRmxpcHBpbmcgWSBpcyByZXF1aXJlZCB3aGVuIHJlbmRlcmluZyB0byBjYW52YXNcbiAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhX3Bvc2l0aW9uICogdmVjMigxLjAsIC0xLjApLCAwLjAsIDEuMCk7XG4gICAgICB2X3RleENvb3JkID0gYV90ZXhDb29yZDtcbiAgICB9XG4gIGA7XG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBnbHNsIGAjdmVyc2lvbiAzMDAgZXNcblxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfaW5wdXRGcmFtZTtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X3BlcnNvbk1hc2s7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9ibHVycmVkSW5wdXRGcmFtZTtcbiAgICB1bmlmb3JtIHZlYzIgdV9jb3ZlcmFnZTtcblxuICAgIGluIHZlYzIgdl90ZXhDb29yZDtcblxuICAgIG91dCB2ZWM0IG91dENvbG9yO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgdmVjMyBjb2xvciA9IHRleHR1cmUodV9pbnB1dEZyYW1lLCB2X3RleENvb3JkKS5yZ2I7XG4gICAgICB2ZWMzIGJsdXJyZWRDb2xvciA9IHRleHR1cmUodV9ibHVycmVkSW5wdXRGcmFtZSwgdl90ZXhDb29yZCkucmdiO1xuICAgICAgZmxvYXQgcGVyc29uTWFzayA9IHRleHR1cmUodV9wZXJzb25NYXNrLCB2X3RleENvb3JkKS5hO1xuICAgICAgcGVyc29uTWFzayA9IHNtb290aHN0ZXAodV9jb3ZlcmFnZS54LCB1X2NvdmVyYWdlLnksIHBlcnNvbk1hc2spO1xuICAgICAgb3V0Q29sb3IgPSB2ZWM0KG1peChibHVycmVkQ29sb3IsIGNvbG9yLCBwZXJzb25NYXNrKSwgMS4wKTtcbiAgICB9XG4gIGA7XG4gICAgY29uc3QgeyB3aWR0aDogb3V0cHV0V2lkdGgsIGhlaWdodDogb3V0cHV0SGVpZ2h0IH0gPSBjYW52YXM7XG4gICAgY29uc3QgdmVydGV4U2hhZGVyID0gY29tcGlsZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdmVydGV4U2hhZGVyU291cmNlKTtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQaXBlbGluZVN0YWdlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlciwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyKTtcbiAgICBjb25zdCBpbnB1dEZyYW1lTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfaW5wdXRGcmFtZScpO1xuICAgIGNvbnN0IHBlcnNvbk1hc2tMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9wZXJzb25NYXNrJyk7XG4gICAgY29uc3QgYmx1cnJlZElucHV0RnJhbWUgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfYmx1cnJlZElucHV0RnJhbWUnKTtcbiAgICBjb25zdCBjb3ZlcmFnZUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X2NvdmVyYWdlJyk7XG4gICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBnbC51bmlmb3JtMWkoaW5wdXRGcmFtZUxvY2F0aW9uLCAwKTtcbiAgICBnbC51bmlmb3JtMWkocGVyc29uTWFza0xvY2F0aW9uLCAxKTtcbiAgICBnbC51bmlmb3JtMWkoYmx1cnJlZElucHV0RnJhbWUsIDIpO1xuICAgIGdsLnVuaWZvcm0yZihjb3ZlcmFnZUxvY2F0aW9uLCAwLCAxKTtcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQpO1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQ292ZXJhZ2UoY292ZXJhZ2UpIHtcbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmKGNvdmVyYWdlTG9jYXRpb24sIGNvdmVyYWdlWzBdLCBjb3ZlcmFnZVsxXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnbWVudFNoYWRlcik7XG4gICAgICAgIGdsLmRlbGV0ZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXIsXG4gICAgICAgIHVwZGF0ZUNvdmVyYWdlLFxuICAgICAgICBjbGVhblVwLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkQmFja2dyb3VuZEltYWdlU3RhZ2UoZ2wsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlciwgcGVyc29uTWFza1RleHR1cmUsIGJhY2tncm91bmRJbWFnZSwgY2FudmFzKSB7XG4gICAgY29uc3QgdmVydGV4U2hhZGVyU291cmNlID0gZ2xzbCBgI3ZlcnNpb24gMzAwIGVzXG5cbiAgICB1bmlmb3JtIHZlYzIgdV9iYWNrZ3JvdW5kU2NhbGU7XG4gICAgdW5pZm9ybSB2ZWMyIHVfYmFja2dyb3VuZE9mZnNldDtcblxuICAgIGluIHZlYzIgYV9wb3NpdGlvbjtcbiAgICBpbiB2ZWMyIGFfdGV4Q29vcmQ7XG5cbiAgICBvdXQgdmVjMiB2X3RleENvb3JkO1xuICAgIG91dCB2ZWMyIHZfYmFja2dyb3VuZENvb3JkO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgLy8gRmxpcHBpbmcgWSBpcyByZXF1aXJlZCB3aGVuIHJlbmRlcmluZyB0byBjYW52YXNcbiAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNChhX3Bvc2l0aW9uICogdmVjMigxLjAsIC0xLjApLCAwLjAsIDEuMCk7XG4gICAgICB2X3RleENvb3JkID0gYV90ZXhDb29yZDtcbiAgICAgIHZfYmFja2dyb3VuZENvb3JkID0gYV90ZXhDb29yZCAqIHVfYmFja2dyb3VuZFNjYWxlICsgdV9iYWNrZ3JvdW5kT2Zmc2V0O1xuICAgIH1cbiAgYDtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGdsc2wgYCN2ZXJzaW9uIDMwMCBlc1xuXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbnB1dEZyYW1lO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfcGVyc29uTWFzaztcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2JhY2tncm91bmQ7XG4gICAgdW5pZm9ybSB2ZWMyIHVfY292ZXJhZ2U7XG4gICAgdW5pZm9ybSBmbG9hdCB1X2xpZ2h0V3JhcHBpbmc7XG4gICAgdW5pZm9ybSBmbG9hdCB1X2JsZW5kTW9kZTtcblxuICAgIGluIHZlYzIgdl90ZXhDb29yZDtcbiAgICBpbiB2ZWMyIHZfYmFja2dyb3VuZENvb3JkO1xuXG4gICAgb3V0IHZlYzQgb3V0Q29sb3I7XG5cbiAgICB2ZWMzIHNjcmVlbih2ZWMzIGEsIHZlYzMgYikge1xuICAgICAgcmV0dXJuIDEuMCAtICgxLjAgLSBhKSAqICgxLjAgLSBiKTtcbiAgICB9XG5cbiAgICB2ZWMzIGxpbmVhckRvZGdlKHZlYzMgYSwgdmVjMyBiKSB7XG4gICAgICByZXR1cm4gYSArIGI7XG4gICAgfVxuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgdmVjMyBmcmFtZUNvbG9yID0gdGV4dHVyZSh1X2lucHV0RnJhbWUsIHZfdGV4Q29vcmQpLnJnYjtcbiAgICAgIHZlYzMgYmFja2dyb3VuZENvbG9yID0gdGV4dHVyZSh1X2JhY2tncm91bmQsIHZfYmFja2dyb3VuZENvb3JkKS5yZ2I7XG4gICAgICBmbG9hdCBwZXJzb25NYXNrID0gdGV4dHVyZSh1X3BlcnNvbk1hc2ssIHZfdGV4Q29vcmQpLmE7XG4gICAgICBmbG9hdCBsaWdodFdyYXBNYXNrID0gMS4wIC0gbWF4KDAuMCwgcGVyc29uTWFzayAtIHVfY292ZXJhZ2UueSkgLyAoMS4wIC0gdV9jb3ZlcmFnZS55KTtcbiAgICAgIHZlYzMgbGlnaHRXcmFwID0gdV9saWdodFdyYXBwaW5nICogbGlnaHRXcmFwTWFzayAqIGJhY2tncm91bmRDb2xvcjtcblxuICAgICAgZnJhbWVDb2xvciA9IHVfYmxlbmRNb2RlICogbGluZWFyRG9kZ2UoZnJhbWVDb2xvciwgbGlnaHRXcmFwKVxuICAgICAgICArICgxLjAgLSB1X2JsZW5kTW9kZSkgKiBzY3JlZW4oZnJhbWVDb2xvciwgbGlnaHRXcmFwKTtcbiAgICAgIHBlcnNvbk1hc2sgPSBzbW9vdGhzdGVwKHVfY292ZXJhZ2UueCwgdV9jb3ZlcmFnZS55LCBwZXJzb25NYXNrKTtcbiAgICAgIG91dENvbG9yID0gdmVjNChmcmFtZUNvbG9yICogcGVyc29uTWFzayArIGJhY2tncm91bmRDb2xvciAqICgxLjAgLSBwZXJzb25NYXNrKSwgMS4wKTtcbiAgICB9XG4gIGA7XG4gICAgY29uc3QgeyB3aWR0aDogb3V0cHV0V2lkdGgsIGhlaWdodDogb3V0cHV0SGVpZ2h0IH0gPSBjYW52YXM7XG4gICAgY29uc3Qgb3V0cHV0UmF0aW8gPSBvdXRwdXRXaWR0aCAvIG91dHB1dEhlaWdodDtcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBjb21waWxlU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UpO1xuICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gY29tcGlsZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBmcmFnbWVudFNoYWRlclNvdXJjZSk7XG4gICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVBpcGVsaW5lU3RhZ2VQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyLCBwb3NpdGlvbkJ1ZmZlciwgdGV4Q29vcmRCdWZmZXIpO1xuICAgIGNvbnN0IGJhY2tncm91bmRTY2FsZUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X2JhY2tncm91bmRTY2FsZScpO1xuICAgIGNvbnN0IGJhY2tncm91bmRPZmZzZXRMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9iYWNrZ3JvdW5kT2Zmc2V0Jyk7XG4gICAgY29uc3QgaW5wdXRGcmFtZUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X2lucHV0RnJhbWUnKTtcbiAgICBjb25zdCBwZXJzb25NYXNrTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfcGVyc29uTWFzaycpO1xuICAgIGNvbnN0IGJhY2tncm91bmRMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9iYWNrZ3JvdW5kJyk7XG4gICAgY29uc3QgY292ZXJhZ2VMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9jb3ZlcmFnZScpO1xuICAgIGNvbnN0IGxpZ2h0V3JhcHBpbmdMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9saWdodFdyYXBwaW5nJyk7XG4gICAgY29uc3QgYmxlbmRNb2RlTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfYmxlbmRNb2RlJyk7XG4gICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBnbC51bmlmb3JtMmYoYmFja2dyb3VuZFNjYWxlTG9jYXRpb24sIDEsIDEpO1xuICAgIGdsLnVuaWZvcm0yZihiYWNrZ3JvdW5kT2Zmc2V0TG9jYXRpb24sIDAsIDApO1xuICAgIGdsLnVuaWZvcm0xaShpbnB1dEZyYW1lTG9jYXRpb24sIDApO1xuICAgIGdsLnVuaWZvcm0xaShwZXJzb25NYXNrTG9jYXRpb24sIDEpO1xuICAgIGdsLnVuaWZvcm0yZihjb3ZlcmFnZUxvY2F0aW9uLCAwLCAxKTtcbiAgICBnbC51bmlmb3JtMWYobGlnaHRXcmFwcGluZ0xvY2F0aW9uLCAwKTtcbiAgICBnbC51bmlmb3JtMWYoYmxlbmRNb2RlTG9jYXRpb24sIDApO1xuICAgIGxldCBiYWNrZ3JvdW5kVGV4dHVyZSA9IG51bGw7XG4gICAgLy8gVE9ETyBGaW5kIGEgYmV0dGVyIHRvIGhhbmRsZSBiYWNrZ3JvdW5kIGJlaW5nIGxvYWRlZFxuICAgIGlmIChiYWNrZ3JvdW5kSW1hZ2U/LmNvbXBsZXRlKSB7XG4gICAgICAgIHVwZGF0ZUJhY2tncm91bmRJbWFnZShiYWNrZ3JvdW5kSW1hZ2UpO1xuICAgIH1cbiAgICBlbHNlIGlmIChiYWNrZ3JvdW5kSW1hZ2UpIHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZUJhY2tncm91bmRJbWFnZShiYWNrZ3JvdW5kSW1hZ2UpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQpO1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUxKTtcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgcGVyc29uTWFza1RleHR1cmUpO1xuICAgICAgICBpZiAoYmFja2dyb3VuZFRleHR1cmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTIpO1xuICAgICAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgYmFja2dyb3VuZFRleHR1cmUpO1xuICAgICAgICAgICAgLy8gVE9ETyBIYW5kbGUgY29ycmVjdGx5IHRoZSBiYWNrZ3JvdW5kIG5vdCBsb2FkZWQgeWV0XG4gICAgICAgICAgICBnbC51bmlmb3JtMWkoYmFja2dyb3VuZExvY2F0aW9uLCAyKTtcbiAgICAgICAgfVxuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQmFja2dyb3VuZEltYWdlKGJnSW1hZ2UpIHtcbiAgICAgICAgYmFja2dyb3VuZFRleHR1cmUgPSBjcmVhdGVUZXh0dXJlKGdsLCBnbC5SR0JBOCwgYmdJbWFnZS5uYXR1cmFsV2lkdGgsIGJnSW1hZ2UubmF0dXJhbEhlaWdodCwgXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgdHlwZXMgYXJlIGluY29tcGxldGVcbiAgICAgICAgZ2wuTElORUFSLCBnbC5MSU5FQVIpO1xuICAgICAgICBnbC50ZXhTdWJJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIDAsIDAsIGJnSW1hZ2UubmF0dXJhbFdpZHRoLCBiZ0ltYWdlLm5hdHVyYWxIZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGJnSW1hZ2UpO1xuICAgICAgICBsZXQgeE9mZnNldCA9IDA7XG4gICAgICAgIGxldCB5T2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGJhY2tncm91bmRXaWR0aCA9IGJnSW1hZ2UubmF0dXJhbFdpZHRoO1xuICAgICAgICBsZXQgYmFja2dyb3VuZEhlaWdodCA9IGJnSW1hZ2UubmF0dXJhbEhlaWdodDtcbiAgICAgICAgY29uc3QgYmFja2dyb3VuZFJhdGlvID0gYmFja2dyb3VuZFdpZHRoIC8gYmFja2dyb3VuZEhlaWdodDtcbiAgICAgICAgaWYgKGJhY2tncm91bmRSYXRpbyA8IG91dHB1dFJhdGlvKSB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kSGVpZ2h0ID0gYmFja2dyb3VuZFdpZHRoIC8gb3V0cHV0UmF0aW87XG4gICAgICAgICAgICB5T2Zmc2V0ID0gKGJnSW1hZ2UubmF0dXJhbEhlaWdodCAtIGJhY2tncm91bmRIZWlnaHQpIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJhY2tncm91bmRXaWR0aCA9IGJhY2tncm91bmRIZWlnaHQgKiBvdXRwdXRSYXRpbztcbiAgICAgICAgICAgIHhPZmZzZXQgPSAoYmdJbWFnZS5uYXR1cmFsV2lkdGggLSBiYWNrZ3JvdW5kV2lkdGgpIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB4U2NhbGUgPSBiYWNrZ3JvdW5kV2lkdGggLyBiZ0ltYWdlLm5hdHVyYWxXaWR0aDtcbiAgICAgICAgY29uc3QgeVNjYWxlID0gYmFja2dyb3VuZEhlaWdodCAvIGJnSW1hZ2UubmF0dXJhbEhlaWdodDtcbiAgICAgICAgeE9mZnNldCAvPSBiZ0ltYWdlLm5hdHVyYWxXaWR0aDtcbiAgICAgICAgeU9mZnNldCAvPSBiZ0ltYWdlLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgIGdsLnVuaWZvcm0yZihiYWNrZ3JvdW5kU2NhbGVMb2NhdGlvbiwgeFNjYWxlLCB5U2NhbGUpO1xuICAgICAgICBnbC51bmlmb3JtMmYoYmFja2dyb3VuZE9mZnNldExvY2F0aW9uLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQ292ZXJhZ2UoY292ZXJhZ2UpIHtcbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTJmKGNvdmVyYWdlTG9jYXRpb24sIGNvdmVyYWdlWzBdLCBjb3ZlcmFnZVsxXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZUxpZ2h0V3JhcHBpbmcobGlnaHRXcmFwcGluZykge1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC51bmlmb3JtMWYobGlnaHRXcmFwcGluZ0xvY2F0aW9uLCBsaWdodFdyYXBwaW5nKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQmxlbmRNb2RlKGJsZW5kTW9kZSkge1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC51bmlmb3JtMWYoYmxlbmRNb2RlTG9jYXRpb24sIGJsZW5kTW9kZSA9PT0gJ3NjcmVlbicgPyAwIDogMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgIGdsLmRlbGV0ZVRleHR1cmUoYmFja2dyb3VuZFRleHR1cmUpO1xuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xuICAgICAgICBnbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyLFxuICAgICAgICB1cGRhdGVDb3ZlcmFnZSxcbiAgICAgICAgdXBkYXRlTGlnaHRXcmFwcGluZyxcbiAgICAgICAgdXBkYXRlQmxlbmRNb2RlLFxuICAgICAgICBjbGVhblVwLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkSm9pbnRCaWxhdGVyYWxGaWx0ZXJTdGFnZShnbCwgdmVydGV4U2hhZGVyLCBwb3NpdGlvbkJ1ZmZlciwgdGV4Q29vcmRCdWZmZXIsIGlucHV0VGV4dHVyZSwgb3V0cHV0VGV4dHVyZSwgY2FudmFzLCBzZWdtZW50YXRpb25Db25maWcpIHtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGdsc2wgYCN2ZXJzaW9uIDMwMCBlc1xuXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbnB1dEZyYW1lO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVfc2VnbWVudGF0aW9uTWFzaztcbiAgICB1bmlmb3JtIHZlYzIgdV90ZXhlbFNpemU7XG4gICAgdW5pZm9ybSBmbG9hdCB1X3N0ZXA7XG4gICAgdW5pZm9ybSBmbG9hdCB1X3JhZGl1cztcbiAgICB1bmlmb3JtIGZsb2F0IHVfb2Zmc2V0O1xuICAgIHVuaWZvcm0gZmxvYXQgdV9zaWdtYVRleGVsO1xuICAgIHVuaWZvcm0gZmxvYXQgdV9zaWdtYUNvbG9yO1xuXG4gICAgaW4gdmVjMiB2X3RleENvb3JkO1xuICAgIG91dCB2ZWM0IG91dENvbG9yO1xuXG4gICAgZmxvYXQgZ2F1c3NpYW4oZmxvYXQgeCwgZmxvYXQgc2lnbWEpIHtcbiAgICAgIGZsb2F0IGNvZWZmID0gLTAuNSAvIChzaWdtYSAqIHNpZ21hICogNC4wICsgMS4wZS02KTtcbiAgICAgIHJldHVybiBleHAoKHggKiB4KSAqIGNvZWZmKTtcbiAgICB9XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIGNlbnRlckNvb3JkID0gdl90ZXhDb29yZDtcbiAgICAgIHZlYzMgY2VudGVyQ29sb3IgPSB0ZXh0dXJlKHVfaW5wdXRGcmFtZSwgY2VudGVyQ29vcmQpLnJnYjtcbiAgICAgIGZsb2F0IG5ld1ZhbCA9IDAuMDtcblxuICAgICAgZmxvYXQgc3BhY2VXZWlnaHQgPSAwLjA7XG4gICAgICBmbG9hdCBjb2xvcldlaWdodCA9IDAuMDtcbiAgICAgIGZsb2F0IHRvdGFsV2VpZ2h0ID0gMC4wO1xuXG4gICAgICAvLyBTdWJzYW1wbGUga2VybmVsIHNwYWNlLlxuICAgICAgZm9yIChmbG9hdCBpID0gLXVfcmFkaXVzICsgdV9vZmZzZXQ7IGkgPD0gdV9yYWRpdXM7IGkgKz0gdV9zdGVwKSB7XG4gICAgICAgIGZvciAoZmxvYXQgaiA9IC11X3JhZGl1cyArIHVfb2Zmc2V0OyBqIDw9IHVfcmFkaXVzOyBqICs9IHVfc3RlcCkge1xuICAgICAgICAgIHZlYzIgc2hpZnQgPSB2ZWMyKGosIGkpICogdV90ZXhlbFNpemU7XG4gICAgICAgICAgdmVjMiBjb29yZCA9IHZlYzIoY2VudGVyQ29vcmQgKyBzaGlmdCk7XG4gICAgICAgICAgdmVjMyBmcmFtZUNvbG9yID0gdGV4dHVyZSh1X2lucHV0RnJhbWUsIGNvb3JkKS5yZ2I7XG4gICAgICAgICAgZmxvYXQgb3V0VmFsID0gdGV4dHVyZSh1X3NlZ21lbnRhdGlvbk1hc2ssIGNvb3JkKS5hO1xuXG4gICAgICAgICAgc3BhY2VXZWlnaHQgPSBnYXVzc2lhbihkaXN0YW5jZShjZW50ZXJDb29yZCwgY29vcmQpLCB1X3NpZ21hVGV4ZWwpO1xuICAgICAgICAgIGNvbG9yV2VpZ2h0ID0gZ2F1c3NpYW4oZGlzdGFuY2UoY2VudGVyQ29sb3IsIGZyYW1lQ29sb3IpLCB1X3NpZ21hQ29sb3IpO1xuICAgICAgICAgIHRvdGFsV2VpZ2h0ICs9IHNwYWNlV2VpZ2h0ICogY29sb3JXZWlnaHQ7XG5cbiAgICAgICAgICBuZXdWYWwgKz0gc3BhY2VXZWlnaHQgKiBjb2xvcldlaWdodCAqIG91dFZhbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbmV3VmFsIC89IHRvdGFsV2VpZ2h0O1xuXG4gICAgICBvdXRDb2xvciA9IHZlYzQodmVjMygwLjApLCBuZXdWYWwpO1xuICAgIH1cbiAgYDtcbiAgICBjb25zdCB7IHdpZHRoOiBzZWdtZW50YXRpb25XaWR0aCwgaGVpZ2h0OiBzZWdtZW50YXRpb25IZWlnaHQgfSA9IHNlZ21lbnRhdGlvbkNvbmZpZztcbiAgICBjb25zdCB7IHdpZHRoOiBvdXRwdXRXaWR0aCwgaGVpZ2h0OiBvdXRwdXRIZWlnaHQgfSA9IGNhbnZhcztcbiAgICBjb25zdCB0ZXhlbFdpZHRoID0gMSAvIG91dHB1dFdpZHRoO1xuICAgIGNvbnN0IHRleGVsSGVpZ2h0ID0gMSAvIG91dHB1dEhlaWdodDtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQaXBlbGluZVN0YWdlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlciwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyKTtcbiAgICBjb25zdCBpbnB1dEZyYW1lTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfaW5wdXRGcmFtZScpO1xuICAgIGNvbnN0IHNlZ21lbnRhdGlvbk1hc2tMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9zZWdtZW50YXRpb25NYXNrJyk7XG4gICAgY29uc3QgdGV4ZWxTaXplTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfdGV4ZWxTaXplJyk7XG4gICAgY29uc3Qgc3RlcExvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X3N0ZXAnKTtcbiAgICBjb25zdCByYWRpdXNMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9yYWRpdXMnKTtcbiAgICBjb25zdCBvZmZzZXRMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9vZmZzZXQnKTtcbiAgICBjb25zdCBzaWdtYVRleGVsTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3Vfc2lnbWFUZXhlbCcpO1xuICAgIGNvbnN0IHNpZ21hQ29sb3JMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9zaWdtYUNvbG9yJyk7XG4gICAgY29uc3QgZnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZnJhbWVCdWZmZXIpO1xuICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVSRV8yRCwgb3V0cHV0VGV4dHVyZSwgMCk7XG4gICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBnbC51bmlmb3JtMWkoaW5wdXRGcmFtZUxvY2F0aW9uLCAwKTtcbiAgICBnbC51bmlmb3JtMWkoc2VnbWVudGF0aW9uTWFza0xvY2F0aW9uLCAxKTtcbiAgICBnbC51bmlmb3JtMmYodGV4ZWxTaXplTG9jYXRpb24sIHRleGVsV2lkdGgsIHRleGVsSGVpZ2h0KTtcbiAgICAvLyBFbnN1cmVzIGRlZmF1bHQgdmFsdWVzIGFyZSBjb25maWd1cmVkIHRvIHByZXZlbnQgaW5maW5pdGVcbiAgICAvLyBsb29wIGluIGZyYWdtZW50IHNoYWRlclxuICAgIHVwZGF0ZVNpZ21hU3BhY2UoMCk7XG4gICAgdXBkYXRlU2lnbWFDb2xvcigwKTtcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQpO1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUxKTtcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgaW5wdXRUZXh0dXJlKTtcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZUJ1ZmZlcik7XG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVTaWdtYVNwYWNlKHNpZ21hU3BhY2UpIHtcbiAgICAgICAgc2lnbWFTcGFjZSAqPSBNYXRoLm1heChvdXRwdXRXaWR0aCAvIHNlZ21lbnRhdGlvbldpZHRoLCBvdXRwdXRIZWlnaHQgLyBzZWdtZW50YXRpb25IZWlnaHQpO1xuICAgICAgICBjb25zdCBrU3BhcnNpdHlGYWN0b3IgPSAwLjY2OyAvLyBIaWdoZXIgaXMgc3BhcnNlci5cbiAgICAgICAgY29uc3Qgc3RlcCA9IE1hdGgubWF4KDEsIE1hdGguc3FydChzaWdtYVNwYWNlKSAqIGtTcGFyc2l0eUZhY3Rvcik7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IHNpZ21hU3BhY2U7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHN0ZXAgPiAxID8gc3RlcCAqIDAuNSA6IDA7XG4gICAgICAgIGNvbnN0IHNpZ21hVGV4ZWwgPSBNYXRoLm1heCh0ZXhlbFdpZHRoLCB0ZXhlbEhlaWdodCkgKiBzaWdtYVNwYWNlO1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC51bmlmb3JtMWYoc3RlcExvY2F0aW9uLCBzdGVwKTtcbiAgICAgICAgZ2wudW5pZm9ybTFmKHJhZGl1c0xvY2F0aW9uLCByYWRpdXMpO1xuICAgICAgICBnbC51bmlmb3JtMWYob2Zmc2V0TG9jYXRpb24sIG9mZnNldCk7XG4gICAgICAgIGdsLnVuaWZvcm0xZihzaWdtYVRleGVsTG9jYXRpb24sIHNpZ21hVGV4ZWwpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVTaWdtYUNvbG9yKHNpZ21hQ29sb3IpIHtcbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wudW5pZm9ybTFmKHNpZ21hQ29sb3JMb2NhdGlvbiwgc2lnbWFDb2xvcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lQnVmZmVyKTtcbiAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcmVuZGVyLCB1cGRhdGVTaWdtYVNwYWNlLCB1cGRhdGVTaWdtYUNvbG9yLCBjbGVhblVwIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVzaXppbmdTdGFnZShnbCwgdmVydGV4U2hhZGVyLCBwb3NpdGlvbkJ1ZmZlciwgdGV4Q29vcmRCdWZmZXIsIHRmbGl0ZSwgc2VnbWVudGF0aW9uQ29uZmlnKSB7XG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBnbHNsIGAjdmVyc2lvbiAzMDAgZXNcblxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X2lucHV0RnJhbWU7XG4gICAgaW4gdmVjMiB2X3RleENvb3JkO1xuICAgIG91dCB2ZWM0IG91dENvbG9yO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgb3V0Q29sb3IgPSB0ZXh0dXJlKHVfaW5wdXRGcmFtZSwgdl90ZXhDb29yZCk7XG4gICAgfVxuICBgO1xuICAgIC8vIFRGTGl0ZSBtZW1vcnkgd2lsbCBiZSBhY2Nlc3NlZCBhcyBmbG9hdDMyXG4gICAgY29uc3QgdGZsaXRlSW5wdXRNZW1vcnlPZmZzZXQgPSB0ZmxpdGUuX2dldElucHV0TWVtb3J5T2Zmc2V0KCkgLyA0O1xuICAgIGNvbnN0IHsgd2lkdGg6IG91dHB1dFdpZHRoLCBoZWlnaHQ6IG91dHB1dEhlaWdodCB9ID0gc2VnbWVudGF0aW9uQ29uZmlnO1xuICAgIGNvbnN0IG91dHB1dFBpeGVsQ291bnQgPSBvdXRwdXRXaWR0aCAqIG91dHB1dEhlaWdodDtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xuICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQaXBlbGluZVN0YWdlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlciwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyKTtcbiAgICBjb25zdCBpbnB1dEZyYW1lTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfaW5wdXRGcmFtZScpO1xuICAgIGNvbnN0IG91dHB1dFRleHR1cmUgPSBjcmVhdGVUZXh0dXJlKGdsLCBnbC5SR0JBOCwgb3V0cHV0V2lkdGgsIG91dHB1dEhlaWdodCk7XG4gICAgY29uc3QgZnJhbWVCdWZmZXIgPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZnJhbWVCdWZmZXIpO1xuICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKGdsLkZSQU1FQlVGRkVSLCBnbC5DT0xPUl9BVFRBQ0hNRU5UMCwgZ2wuVEVYVFVSRV8yRCwgb3V0cHV0VGV4dHVyZSwgMCk7XG4gICAgY29uc3Qgb3V0cHV0UGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkob3V0cHV0UGl4ZWxDb3VudCAqIDQpO1xuICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgZ2wudW5pZm9ybTFpKGlucHV0RnJhbWVMb2NhdGlvbiwgMCk7XG4gICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCBvdXRwdXRXaWR0aCwgb3V0cHV0SGVpZ2h0KTtcbiAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZUJ1ZmZlcik7XG4gICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICAgICAgICAvLyBEb3dubG9hZHMgcGl4ZWxzIGFzeW5jaHJvbm91c2x5IGZyb20gR1BVIHdoaWxlIHJlbmRlcmluZyB0aGUgY3VycmVudCBmcmFtZS5cbiAgICAgICAgLy8gVGhlIHBpeGVscyB3aWxsIGJlIGF2YWlsYWJsZSBpbiB0aGUgbmV4dCBmcmFtZSByZW5kZXIgd2hpY2ggcmVzdWx0c1xuICAgICAgICAvLyBpbiBvZmZzZXRzIGluIHRoZSBzZWdtZW50YXRpb24gb3V0cHV0IGJ1dCBpbmNyZWFzZXMgdGhlIGZyYW1lIHJhdGUuXG4gICAgICAgIHJlYWRQaXhlbHNBc3luYyhnbCwgMCwgMCwgb3V0cHV0V2lkdGgsIG91dHB1dEhlaWdodCwgZ2wuUkdCQSwgZ2wuVU5TSUdORURfQllURSwgb3V0cHV0UGl4ZWxzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRwdXRQaXhlbENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHRmbGl0ZUluZGV4ID0gdGZsaXRlSW5wdXRNZW1vcnlPZmZzZXQgKyBpICogMztcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dEluZGV4ID0gaSAqIDQ7XG4gICAgICAgICAgICB0ZmxpdGUuSEVBUEYzMlt0ZmxpdGVJbmRleF0gPSBvdXRwdXRQaXhlbHNbb3V0cHV0SW5kZXhdIC8gMjU1O1xuICAgICAgICAgICAgdGZsaXRlLkhFQVBGMzJbdGZsaXRlSW5kZXggKyAxXSA9IG91dHB1dFBpeGVsc1tvdXRwdXRJbmRleCArIDFdIC8gMjU1O1xuICAgICAgICAgICAgdGZsaXRlLkhFQVBGMzJbdGZsaXRlSW5kZXggKyAyXSA9IG91dHB1dFBpeGVsc1tvdXRwdXRJbmRleCArIDJdIC8gMjU1O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lQnVmZmVyKTtcbiAgICAgICAgZ2wuZGVsZXRlVGV4dHVyZShvdXRwdXRUZXh0dXJlKTtcbiAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcmVuZGVyLCBjbGVhblVwIH07XG59XG5cbmZ1bmN0aW9uIGJ1aWxkU29mdG1heFN0YWdlKGdsLCB2ZXJ0ZXhTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlciwgdGZsaXRlLCBvdXRwdXRUZXh0dXJlLCBzZWdtZW50YXRpb25Db25maWcpIHtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGdsc2wgYCN2ZXJzaW9uIDMwMCBlc1xuXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbnB1dFNlZ21lbnRhdGlvbjtcbiAgICBpbiB2ZWMyIHZfdGV4Q29vcmQ7XG4gICAgb3V0IHZlYzQgb3V0Q29sb3I7XG5cbiAgICB2b2lkIG1haW4oKSB7XG4gICAgICB2ZWMyIHNlZ21lbnRhdGlvbiA9IHRleHR1cmUodV9pbnB1dFNlZ21lbnRhdGlvbiwgdl90ZXhDb29yZCkucmc7XG4gICAgICBmbG9hdCBzaGlmdCA9IG1heChzZWdtZW50YXRpb24uciwgc2VnbWVudGF0aW9uLmcpO1xuICAgICAgZmxvYXQgYmFja2dyb3VuZEV4cCA9IGV4cChzZWdtZW50YXRpb24uciAtIHNoaWZ0KTtcbiAgICAgIGZsb2F0IHBlcnNvbkV4cCA9IGV4cChzZWdtZW50YXRpb24uZyAtIHNoaWZ0KTtcbiAgICAgIG91dENvbG9yID0gdmVjNCh2ZWMzKDAuMCksIHBlcnNvbkV4cCAvIChiYWNrZ3JvdW5kRXhwICsgcGVyc29uRXhwKSk7XG4gICAgfVxuICBgO1xuICAgIC8vIFRGTGl0ZSBtZW1vcnkgd2lsbCBiZSBhY2Nlc3NlZCBhcyBmbG9hdDMyXG4gICAgY29uc3QgdGZsaXRlT3V0cHV0TWVtb3J5T2Zmc2V0ID0gdGZsaXRlLl9nZXRPdXRwdXRNZW1vcnlPZmZzZXQoKSAvIDQ7XG4gICAgY29uc3QgeyB3aWR0aDogc2VnbWVudGF0aW9uV2lkdGgsIGhlaWdodDogc2VnbWVudGF0aW9uSGVpZ2h0IH0gPSBzZWdtZW50YXRpb25Db25maWc7XG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXIgPSBjb21waWxlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZyYWdtZW50U2hhZGVyU291cmNlKTtcbiAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUGlwZWxpbmVTdGFnZVByb2dyYW0oZ2wsIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlcik7XG4gICAgY29uc3QgaW5wdXRMb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndV9pbnB1dFNlZ21lbnRhdGlvbicpO1xuICAgIGNvbnN0IGlucHV0VGV4dHVyZSA9IGNyZWF0ZVRleHR1cmUoZ2wsIGdsLlJHMzJGLCBzZWdtZW50YXRpb25XaWR0aCwgc2VnbWVudGF0aW9uSGVpZ2h0KTtcbiAgICBjb25zdCBmcmFtZUJ1ZmZlciA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBmcmFtZUJ1ZmZlcik7XG4gICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCBvdXRwdXRUZXh0dXJlLCAwKTtcbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgIGdsLnVuaWZvcm0xaShpbnB1dExvY2F0aW9uLCAxKTtcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHNlZ21lbnRhdGlvbldpZHRoLCBzZWdtZW50YXRpb25IZWlnaHQpO1xuICAgICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUxKTtcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgaW5wdXRUZXh0dXJlKTtcbiAgICAgICAgZ2wudGV4U3ViSW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCAwLCAwLCBzZWdtZW50YXRpb25XaWR0aCwgc2VnbWVudGF0aW9uSGVpZ2h0LCBnbC5SRywgZ2wuRkxPQVQsIHRmbGl0ZS5IRUFQRjMyLCB0ZmxpdGVPdXRwdXRNZW1vcnlPZmZzZXQpO1xuICAgICAgICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIGZyYW1lQnVmZmVyKTtcbiAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lQnVmZmVyKTtcbiAgICAgICAgZ2wuZGVsZXRlVGV4dHVyZShpbnB1dFRleHR1cmUpO1xuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBnbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xuICAgIH1cbiAgICByZXR1cm4geyByZW5kZXIsIGNsZWFuVXAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRXZWJHTDJQaXBlbGluZSh2aWRlb1NvdXJjZSwgYmFja2dyb3VuZEltYWdlLCBibHVyTGV2ZWwsIGJhY2tncm91bmRGaWx0ZXIsIGNhbnZhcywgdGZsaXRlLCBzZWdtZW50YXRpb25Db25maWcpIHtcbiAgICBjb25zdCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInKTtcbiAgICBpZiAoIWdsKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYkdMMiBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgaWYgKGdsLmlzQ29udGV4dExvc3QoKSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJHTDIgY29udGV4dCB3YXMgbG9zdCcpO1xuICAgIGNvbnN0IHsgd2lkdGg6IGZyYW1lV2lkdGgsIGhlaWdodDogZnJhbWVIZWlnaHQgfSA9IHZpZGVvU291cmNlO1xuICAgIGNvbnN0IHsgd2lkdGg6IHNlZ21lbnRhdGlvbldpZHRoLCBoZWlnaHQ6IHNlZ21lbnRhdGlvbkhlaWdodCB9ID0gc2VnbWVudGF0aW9uQ29uZmlnO1xuICAgIGNvbnN0IHZlcnRleFNoYWRlclNvdXJjZSA9IGdsc2wgYCN2ZXJzaW9uIDMwMCBlc1xuXG4gICAgaW4gdmVjMiBhX3Bvc2l0aW9uO1xuICAgIGluIHZlYzIgYV90ZXhDb29yZDtcbiAgICBvdXQgdmVjMiB2X3RleENvb3JkO1xuXG4gICAgdm9pZCBtYWluKCkge1xuICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFfcG9zaXRpb24sIDAuMCwgMS4wKTtcbiAgICAgIHZfdGV4Q29vcmQgPSBhX3RleENvb3JkO1xuICAgIH1cbiAgYDtcbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBjb21waWxlU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UpO1xuICAgIGNvbnN0IHZlcnRleEFycmF5ID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcbiAgICBnbC5iaW5kVmVydGV4QXJyYXkodmVydGV4QXJyYXkpO1xuICAgIGNvbnN0IHBvc2l0aW9uQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbLTEuMCwgLTEuMCwgMS4wLCAtMS4wLCAtMS4wLCAxLjAsIDEuMCwgMS4wXSksIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBjb25zdCB0ZXhDb29yZEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXhDb29yZEJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzAuMCwgMC4wLCAxLjAsIDAuMCwgMC4wLCAxLjAsIDEuMCwgMS4wXSksIGdsLlNUQVRJQ19EUkFXKTtcbiAgICAvLyBXZSBkb24ndCB1c2UgdGV4U3RvcmFnZTJEIGhlcmUgYmVjYXVzZSB0ZXhJbWFnZTJEIHNlZW1zIGZhc3RlclxuICAgIC8vIHRvIHVwbG9hZCB2aWRlbyB0ZXh0dXJlIHRoYW4gdGV4U3ViSW1hZ2UyRCBldmVuIHRob3VnaCB0aGUgbGF0dGVyXG4gICAgLy8gaXMgc3VwcG9zZWQgdG8gYmUgdGhlIHJlY29tbWVuZGVkIHdheTpcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViR0xfQVBJL1dlYkdMX2Jlc3RfcHJhY3RpY2VzI3VzZV90ZXhzdG9yYWdlX3RvX2NyZWF0ZV90ZXh0dXJlc1xuICAgIGNvbnN0IGlucHV0RnJhbWVUZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIGlucHV0RnJhbWVUZXh0dXJlKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIC8vIFRPRE8gUmVuYW1lIHNlZ21lbnRhdGlvbiBhbmQgcGVyc29uIG1hc2sgdG8gYmUgbW9yZSBzcGVjaWZpY1xuICAgIGNvbnN0IHNlZ21lbnRhdGlvblRleHR1cmUgPSBjcmVhdGVUZXh0dXJlKGdsLCBnbC5SR0JBOCwgc2VnbWVudGF0aW9uV2lkdGgsIHNlZ21lbnRhdGlvbkhlaWdodCk7XG4gICAgY29uc3QgcGVyc29uTWFza1RleHR1cmUgPSBjcmVhdGVUZXh0dXJlKGdsLCBnbC5SR0JBOCwgZnJhbWVXaWR0aCwgZnJhbWVIZWlnaHQpO1xuICAgIGNvbnN0IHJlc2l6aW5nU3RhZ2UgPSBidWlsZFJlc2l6aW5nU3RhZ2UoZ2wsIHZlcnRleFNoYWRlciwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyLCB0ZmxpdGUsIHNlZ21lbnRhdGlvbkNvbmZpZyk7XG4gICAgY29uc3QgbG9hZFNlZ21lbnRhdGlvblN0YWdlID0gYnVpbGRTb2Z0bWF4U3RhZ2UoZ2wsIHZlcnRleFNoYWRlciwgcG9zaXRpb25CdWZmZXIsIHRleENvb3JkQnVmZmVyLCB0ZmxpdGUsIHNlZ21lbnRhdGlvblRleHR1cmUsIHNlZ21lbnRhdGlvbkNvbmZpZyk7XG4gICAgY29uc3Qgam9pbnRCaWxhdGVyYWxGaWx0ZXJTdGFnZSA9IGJ1aWxkSm9pbnRCaWxhdGVyYWxGaWx0ZXJTdGFnZShnbCwgdmVydGV4U2hhZGVyLCBwb3NpdGlvbkJ1ZmZlciwgdGV4Q29vcmRCdWZmZXIsIHNlZ21lbnRhdGlvblRleHR1cmUsIHBlcnNvbk1hc2tUZXh0dXJlLCBjYW52YXMsIHNlZ21lbnRhdGlvbkNvbmZpZyk7XG4gICAgY29uc3QgYmFja2dyb3VuZFN0YWdlID0gYmFja2dyb3VuZEZpbHRlciA9PT0gJ2JsdXInXG4gICAgICAgID8gYnVpbGRCYWNrZ3JvdW5kQmx1clN0YWdlKGdsLCB2ZXJ0ZXhTaGFkZXIsIHBvc2l0aW9uQnVmZmVyLCB0ZXhDb29yZEJ1ZmZlciwgcGVyc29uTWFza1RleHR1cmUsIGNhbnZhcywgYmx1ckxldmVsIHx8ICdoaWdoJylcbiAgICAgICAgOiBidWlsZEJhY2tncm91bmRJbWFnZVN0YWdlKGdsLCBwb3NpdGlvbkJ1ZmZlciwgdGV4Q29vcmRCdWZmZXIsIHBlcnNvbk1hc2tUZXh0dXJlLCBiYWNrZ3JvdW5kSW1hZ2UsIGNhbnZhcyk7XG4gICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgaW5wdXRGcmFtZVRleHR1cmUpO1xuICAgICAgICAvLyB0ZXhJbWFnZTJEIHNlZW1zIGZhc3RlciB0aGFuIHRleFN1YkltYWdlMkQgdG8gdXBsb2FkXG4gICAgICAgIC8vIHZpZGVvIHRleHR1cmVcbiAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCB2aWRlb1NvdXJjZSk7XG4gICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh2ZXJ0ZXhBcnJheSk7XG4gICAgICAgIHJlc2l6aW5nU3RhZ2UucmVuZGVyKCk7XG4gICAgICAgIHRmbGl0ZS5fcnVuSW5mZXJlbmNlKCk7XG4gICAgICAgIGxvYWRTZWdtZW50YXRpb25TdGFnZS5yZW5kZXIoKTtcbiAgICAgICAgam9pbnRCaWxhdGVyYWxGaWx0ZXJTdGFnZS5yZW5kZXIoKTtcbiAgICAgICAgYmFja2dyb3VuZFN0YWdlLnJlbmRlcigpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVQb3N0UHJvY2Vzc2luZ0NvbmZpZygpIHtcbiAgICAgICAgam9pbnRCaWxhdGVyYWxGaWx0ZXJTdGFnZS51cGRhdGVTaWdtYVNwYWNlKDEpO1xuICAgICAgICBqb2ludEJpbGF0ZXJhbEZpbHRlclN0YWdlLnVwZGF0ZVNpZ21hQ29sb3IoMC4xKTtcbiAgICAgICAgaWYgKGJhY2tncm91bmRGaWx0ZXIgPT09ICdpbWFnZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhY2tncm91bmRJbWFnZVN0YWdlID0gYmFja2dyb3VuZFN0YWdlO1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlU3RhZ2UudXBkYXRlQ292ZXJhZ2UoWzAuNSwgMC43NV0pO1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlU3RhZ2UudXBkYXRlTGlnaHRXcmFwcGluZygwLjMpO1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlU3RhZ2UudXBkYXRlQmxlbmRNb2RlKCdzY3JlZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiYWNrZ3JvdW5kRmlsdGVyID09PSAnYmx1cicpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhY2tncm91bmRCbHVyU3RhZ2UgPSBiYWNrZ3JvdW5kU3RhZ2U7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQmx1clN0YWdlLnVwZGF0ZUNvdmVyYWdlKFswLjUsIDAuNzVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRPRE8gSGFuZGxlIG5vIGJhY2tncm91bmQgaW4gYSBzZXBhcmF0ZSBwaXBlbGluZSBwYXRoXG4gICAgICAgICAgICBjb25zdCBiYWNrZ3JvdW5kSW1hZ2VTdGFnZSA9IGJhY2tncm91bmRTdGFnZTtcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZVN0YWdlLnVwZGF0ZUNvdmVyYWdlKFswLCAwLjk5OTldKTtcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZVN0YWdlLnVwZGF0ZUxpZ2h0V3JhcHBpbmcoMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYW5VcCgpIHtcbiAgICAgICAgYmFja2dyb3VuZFN0YWdlLmNsZWFuVXAoKTtcbiAgICAgICAgam9pbnRCaWxhdGVyYWxGaWx0ZXJTdGFnZS5jbGVhblVwKCk7XG4gICAgICAgIGxvYWRTZWdtZW50YXRpb25TdGFnZS5jbGVhblVwKCk7XG4gICAgICAgIHJlc2l6aW5nU3RhZ2UuY2xlYW5VcCgpO1xuICAgICAgICBnbC5kZWxldGVUZXh0dXJlKHBlcnNvbk1hc2tUZXh0dXJlKTtcbiAgICAgICAgZ2wuZGVsZXRlVGV4dHVyZShzZWdtZW50YXRpb25UZXh0dXJlKTtcbiAgICAgICAgZ2wuZGVsZXRlVGV4dHVyZShpbnB1dEZyYW1lVGV4dHVyZSk7XG4gICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0ZXhDb29yZEJ1ZmZlcik7XG4gICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcihwb3NpdGlvbkJ1ZmZlcik7XG4gICAgICAgIGdsLmRlbGV0ZVZlcnRleEFycmF5KHZlcnRleEFycmF5KTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcik7XG4gICAgfVxuICAgIHJldHVybiB7IHJlbmRlciwgdXBkYXRlUG9zdFByb2Nlc3NpbmdDb25maWcsIGNsZWFuVXAgfTtcbn1cblxudmFyIFNlZ21lbnRhdGlvbkxldmVsO1xuKGZ1bmN0aW9uIChTZWdtZW50YXRpb25MZXZlbCkge1xuICAgIFNlZ21lbnRhdGlvbkxldmVsW1wiTE9XXCJdID0gXCJsb3dcIjtcbiAgICBTZWdtZW50YXRpb25MZXZlbFtcIkhJR0hcIl0gPSBcImhpZ2hcIjtcbn0pKFNlZ21lbnRhdGlvbkxldmVsIHx8IChTZWdtZW50YXRpb25MZXZlbCA9IHt9KSk7XG5jb25zdCBnZXRTZWdtZW50YXRpb25QYXJhbXMgPSAobGV2ZWwpID0+IHtcbiAgICBpZiAobGV2ZWwgPT09IFNlZ21lbnRhdGlvbkxldmVsLkhJR0gpIHtcbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6IDI1NiwgaGVpZ2h0OiAxNDQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgd2lkdGg6IDE2MCwgaGVpZ2h0OiA5NiB9O1xufTtcblxuZnVuY3Rpb24gY3JlYXRlUmVuZGVyZXIodGZsaXRlLCB2aWRlb1NvdXJjZSwgdGFyZ2V0Q2FudmFzLCBvcHRpb25zLCBvbkVycm9yKSB7XG4gICAgY29uc3QgeyBiYWNrZ3JvdW5kRmlsdGVyLCBiYWNrZ3JvdW5kSW1hZ2UsIGJhY2tncm91bmRCbHVyTGV2ZWwsIHNlZ21lbnRhdGlvbkxldmVsID0gU2VnbWVudGF0aW9uTGV2ZWwuSElHSCwgZnBzID0gMzAsIH0gPSBvcHRpb25zO1xuICAgIGlmIChiYWNrZ3JvdW5kRmlsdGVyID09PSAnaW1hZ2UnICYmICFiYWNrZ3JvdW5kSW1hZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBiYWNrZ3JvdW5kSW1hZ2UgZWxlbWVudCBpcyByZXF1aXJlZCB3aGVuIGJhY2tncm91bmRGaWx0ZXIgaXMgaW1hZ2VgKTtcbiAgICB9XG4gICAgY29uc3QgcGlwZWxpbmUgPSBidWlsZFdlYkdMMlBpcGVsaW5lKHZpZGVvU291cmNlLCBiYWNrZ3JvdW5kSW1hZ2UsIGJhY2tncm91bmRCbHVyTGV2ZWwsIGJhY2tncm91bmRGaWx0ZXIsIHRhcmdldENhbnZhcywgdGZsaXRlLCBnZXRTZWdtZW50YXRpb25QYXJhbXMoc2VnbWVudGF0aW9uTGV2ZWwpKTtcbiAgICBjb25zdCBpZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBpcGVsaW5lLnJlbmRlcigpO1xuICAgICAgICAgICAgaWYgKGJhY2tncm91bmRGaWx0ZXIgPT09ICdpbWFnZScpIHtcbiAgICAgICAgICAgICAgICBwaXBlbGluZS51cGRhdGVQb3N0UHJvY2Vzc2luZ0NvbmZpZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgb25FcnJvcj8uKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0sIDEwMDAgLyAoZnBzIDw9IDAgPyAzMCA6IGZwcykpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIHBpcGVsaW5lLmNsZWFuVXAoKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaWQpO1xuICAgICAgICB9LFxuICAgIH07XG59XG5cbmNvbnN0IGNyZWF0ZVRGTGl0ZVNJTURNb2R1bGUgPSAoX19Nb2R1bGUpID0+IHtcbiAgX19Nb2R1bGUgPSBfX01vZHVsZSB8fCB7fTtcblxuICB2YXIgX3NjcmlwdERpciA9XG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0XG4gICAgICA/IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICB2YXIgTW9kdWxlID0gdHlwZW9mIF9fTW9kdWxlICE9ICd1bmRlZmluZWQnID8gX19Nb2R1bGUgOiB7fTtcbiAgdmFyIHJlYWR5UHJvbWlzZVJlc29sdmUsIHJlYWR5UHJvbWlzZVJlamVjdDtcbiAgTW9kdWxlWydyZWFkeSddID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlYWR5UHJvbWlzZVJlc29sdmUgPSByZXNvbHZlO1xuICAgIHJlYWR5UHJvbWlzZVJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG4gIHZhciBtb2R1bGVPdmVycmlkZXMgPSBPYmplY3QuYXNzaWduKHt9LCBNb2R1bGUpO1xuICB2YXIgdGhpc1Byb2dyYW0gPSAnLi90aGlzLnByb2dyYW0nO1xuICB2YXIgcXVpdF8gPSAoc3RhdHVzLCB0b1Rocm93KSA9PiB7XG4gICAgdGhyb3cgdG9UaHJvdztcbiAgfTtcbiAgdmFyIEVOVklST05NRU5UX0lTX1dFQiA9IHRydWU7XG4gIHZhciBzY3JpcHREaXJlY3RvcnkgPSAnJztcblxuICBmdW5jdGlvbiBsb2NhdGVGaWxlKHBhdGgpIHtcbiAgICBpZiAoTW9kdWxlWydsb2NhdGVGaWxlJ10pIHtcbiAgICAgIHJldHVybiBNb2R1bGVbJ2xvY2F0ZUZpbGUnXShwYXRoLCBzY3JpcHREaXJlY3RvcnkpO1xuICAgIH1cbiAgICByZXR1cm4gc2NyaXB0RGlyZWN0b3J5ICsgcGF0aDtcbiAgfVxuXG4gIHZhciByZWFkQmluYXJ5O1xuICB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0KSB7XG4gICAgICBzY3JpcHREaXJlY3RvcnkgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcbiAgICB9XG4gICAgaWYgKF9zY3JpcHREaXIpIHtcbiAgICAgIHNjcmlwdERpcmVjdG9yeSA9IF9zY3JpcHREaXI7XG4gICAgfVxuICAgIGlmIChzY3JpcHREaXJlY3RvcnkuaW5kZXhPZignYmxvYjonKSAhPT0gMCkge1xuICAgICAgc2NyaXB0RGlyZWN0b3J5ID0gc2NyaXB0RGlyZWN0b3J5LnN1YnN0cihcbiAgICAgICAgMCxcbiAgICAgICAgc2NyaXB0RGlyZWN0b3J5LnJlcGxhY2UoL1s/I10uKi8sICcnKS5sYXN0SW5kZXhPZignLycpICsgMSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjcmlwdERpcmVjdG9yeSA9ICcnO1xuICAgIH1cbiAgfVxuICB2YXIgb3V0ID0gTW9kdWxlWydwcmludCddIHx8IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7XG4gIHZhciBlcnIgPSBNb2R1bGVbJ3ByaW50RXJyJ10gfHwgY29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7XG4gIE9iamVjdC5hc3NpZ24oTW9kdWxlLCBtb2R1bGVPdmVycmlkZXMpO1xuICBtb2R1bGVPdmVycmlkZXMgPSBudWxsO1xuICBpZiAoTW9kdWxlWydhcmd1bWVudHMnXSkgTW9kdWxlWydhcmd1bWVudHMnXTtcbiAgaWYgKE1vZHVsZVsndGhpc1Byb2dyYW0nXSkgdGhpc1Byb2dyYW0gPSBNb2R1bGVbJ3RoaXNQcm9ncmFtJ107XG4gIGlmIChNb2R1bGVbJ3F1aXQnXSkgcXVpdF8gPSBNb2R1bGVbJ3F1aXQnXTtcbiAgdmFyIHdhc21CaW5hcnk7XG4gIGlmIChNb2R1bGVbJ3dhc21CaW5hcnknXSkgd2FzbUJpbmFyeSA9IE1vZHVsZVsnd2FzbUJpbmFyeSddO1xuICB2YXIgbm9FeGl0UnVudGltZSA9IE1vZHVsZVsnbm9FeGl0UnVudGltZSddIHx8IHRydWU7XG4gIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkgIT0gJ29iamVjdCcpIHtcbiAgICBhYm9ydCgnbm8gbmF0aXZlIHdhc20gc3VwcG9ydCBkZXRlY3RlZCcpO1xuICB9XG4gIHZhciB3YXNtTWVtb3J5O1xuICB2YXIgQUJPUlQgPSBmYWxzZTtcblxuICB2YXIgVVRGOERlY29kZXIgPVxuICAgIHR5cGVvZiBUZXh0RGVjb2RlciAhPSAndW5kZWZpbmVkJyA/IG5ldyBUZXh0RGVjb2RlcigndXRmOCcpIDogdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIFVURjhBcnJheVRvU3RyaW5nKGhlYXBPckFycmF5LCBpZHgsIG1heEJ5dGVzVG9SZWFkKSB7XG4gICAgdmFyIGVuZElkeCA9IGlkeCArIG1heEJ5dGVzVG9SZWFkO1xuICAgIHZhciBlbmRQdHIgPSBpZHg7XG4gICAgd2hpbGUgKGhlYXBPckFycmF5W2VuZFB0cl0gJiYgIShlbmRQdHIgPj0gZW5kSWR4KSkgKytlbmRQdHI7XG4gICAgaWYgKGVuZFB0ciAtIGlkeCA+IDE2ICYmIGhlYXBPckFycmF5LmJ1ZmZlciAmJiBVVEY4RGVjb2Rlcikge1xuICAgICAgcmV0dXJuIFVURjhEZWNvZGVyLmRlY29kZShoZWFwT3JBcnJheS5zdWJhcnJheShpZHgsIGVuZFB0cikpO1xuICAgIH1cbiAgICB2YXIgc3RyID0gJyc7XG4gICAgd2hpbGUgKGlkeCA8IGVuZFB0cikge1xuICAgICAgdmFyIHUwID0gaGVhcE9yQXJyYXlbaWR4KytdO1xuICAgICAgaWYgKCEodTAgJiAxMjgpKSB7XG4gICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHUwKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgdTEgPSBoZWFwT3JBcnJheVtpZHgrK10gJiA2MztcbiAgICAgIGlmICgodTAgJiAyMjQpID09IDE5Mikge1xuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKHUwICYgMzEpIDw8IDYpIHwgdTEpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciB1MiA9IGhlYXBPckFycmF5W2lkeCsrXSAmIDYzO1xuICAgICAgaWYgKCh1MCAmIDI0MCkgPT0gMjI0KSB7XG4gICAgICAgIHUwID0gKCh1MCAmIDE1KSA8PCAxMikgfCAodTEgPDwgNikgfCB1MjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHUwID1cbiAgICAgICAgICAoKHUwICYgNykgPDwgMTgpIHwgKHUxIDw8IDEyKSB8ICh1MiA8PCA2KSB8IChoZWFwT3JBcnJheVtpZHgrK10gJiA2Myk7XG4gICAgICB9XG4gICAgICBpZiAodTAgPCA2NTUzNikge1xuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh1MCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2ggPSB1MCAtIDY1NTM2O1xuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NiB8IChjaCA+PiAxMCksIDU2MzIwIHwgKGNoICYgMTAyMykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgdmFyIGJ1ZmZlciwgSEVBUDgsIEhFQVBVOCwgSEVBUFUzMjtcblxuICBmdW5jdGlvbiB1cGRhdGVHbG9iYWxCdWZmZXJBbmRWaWV3cyhidWYpIHtcbiAgICBidWZmZXIgPSBidWY7XG4gICAgTW9kdWxlWydIRUFQOCddID0gSEVBUDggPSBuZXcgSW50OEFycmF5KGJ1Zik7XG4gICAgTW9kdWxlWydIRUFQMTYnXSA9IG5ldyBJbnQxNkFycmF5KGJ1Zik7XG4gICAgTW9kdWxlWydIRUFQMzInXSA9IG5ldyBJbnQzMkFycmF5KGJ1Zik7XG4gICAgTW9kdWxlWydIRUFQVTgnXSA9IEhFQVBVOCA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgTW9kdWxlWydIRUFQVTE2J10gPSBuZXcgVWludDE2QXJyYXkoYnVmKTtcbiAgICBNb2R1bGVbJ0hFQVBVMzInXSA9IEhFQVBVMzIgPSBuZXcgVWludDMyQXJyYXkoYnVmKTtcbiAgICBNb2R1bGVbJ0hFQVBGMzInXSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmKTtcbiAgICBNb2R1bGVbJ0hFQVBGNjQnXSA9IG5ldyBGbG9hdDY0QXJyYXkoYnVmKTtcbiAgfVxuXG4gIE1vZHVsZVsnSU5JVElBTF9NRU1PUlknXSB8fCAxNjc3NzIxNjtcbiAgdmFyIF9fQVRQUkVSVU5fXyA9IFtdO1xuICB2YXIgX19BVElOSVRfXyA9IFtdO1xuICB2YXIgX19BVFBPU1RSVU5fXyA9IFtdO1xuXG4gIGZ1bmN0aW9uIGtlZXBSdW50aW1lQWxpdmUoKSB7XG4gICAgcmV0dXJuIG5vRXhpdFJ1bnRpbWU7XG4gIH1cblxuICBmdW5jdGlvbiBwcmVSdW4oKSB7XG4gICAgaWYgKE1vZHVsZVsncHJlUnVuJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgTW9kdWxlWydwcmVSdW4nXSA9PSAnZnVuY3Rpb24nKVxuICAgICAgICBNb2R1bGVbJ3ByZVJ1biddID0gW01vZHVsZVsncHJlUnVuJ11dO1xuICAgICAgd2hpbGUgKE1vZHVsZVsncHJlUnVuJ10ubGVuZ3RoKSB7XG4gICAgICAgIGFkZE9uUHJlUnVuKE1vZHVsZVsncHJlUnVuJ10uc2hpZnQoKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRQUkVSVU5fXyk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0UnVudGltZSgpIHtcbiAgICBjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUSU5JVF9fKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvc3RSdW4oKSB7XG4gICAgaWYgKE1vZHVsZVsncG9zdFJ1biddKSB7XG4gICAgICBpZiAodHlwZW9mIE1vZHVsZVsncG9zdFJ1biddID09ICdmdW5jdGlvbicpXG4gICAgICAgIE1vZHVsZVsncG9zdFJ1biddID0gW01vZHVsZVsncG9zdFJ1biddXTtcbiAgICAgIHdoaWxlIChNb2R1bGVbJ3Bvc3RSdW4nXS5sZW5ndGgpIHtcbiAgICAgICAgYWRkT25Qb3N0UnVuKE1vZHVsZVsncG9zdFJ1biddLnNoaWZ0KCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUUE9TVFJVTl9fKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE9uUHJlUnVuKGNiKSB7XG4gICAgX19BVFBSRVJVTl9fLnVuc2hpZnQoY2IpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkT25Jbml0KGNiKSB7XG4gICAgX19BVElOSVRfXy51bnNoaWZ0KGNiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE9uUG9zdFJ1bihjYikge1xuICAgIF9fQVRQT1NUUlVOX18udW5zaGlmdChjYik7XG4gIH1cblxuICB2YXIgcnVuRGVwZW5kZW5jaWVzID0gMDtcbiAgdmFyIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYWRkUnVuRGVwZW5kZW5jeShpZCkge1xuICAgIHJ1bkRlcGVuZGVuY2llcysrO1xuICAgIGlmIChNb2R1bGVbJ21vbml0b3JSdW5EZXBlbmRlbmNpZXMnXSkge1xuICAgICAgTW9kdWxlWydtb25pdG9yUnVuRGVwZW5kZW5jaWVzJ10ocnVuRGVwZW5kZW5jaWVzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVSdW5EZXBlbmRlbmN5KGlkKSB7XG4gICAgcnVuRGVwZW5kZW5jaWVzLS07XG4gICAgaWYgKE1vZHVsZVsnbW9uaXRvclJ1bkRlcGVuZGVuY2llcyddKSB7XG4gICAgICBNb2R1bGVbJ21vbml0b3JSdW5EZXBlbmRlbmNpZXMnXShydW5EZXBlbmRlbmNpZXMpO1xuICAgIH1cbiAgICBpZiAocnVuRGVwZW5kZW5jaWVzID09IDApIHtcbiAgICAgIGlmIChkZXBlbmRlbmNpZXNGdWxmaWxsZWQpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gZGVwZW5kZW5jaWVzRnVsZmlsbGVkO1xuICAgICAgICBkZXBlbmRlbmNpZXNGdWxmaWxsZWQgPSBudWxsO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFib3J0KHdoYXQpIHtcbiAgICB7XG4gICAgICBpZiAoTW9kdWxlWydvbkFib3J0J10pIHtcbiAgICAgICAgTW9kdWxlWydvbkFib3J0J10od2hhdCk7XG4gICAgICB9XG4gICAgfVxuICAgIHdoYXQgPSAnQWJvcnRlZCgnICsgd2hhdCArICcpJztcbiAgICBlcnIod2hhdCk7XG4gICAgQUJPUlQgPSB0cnVlO1xuICAgIHdoYXQgKz0gJy4gQnVpbGQgd2l0aCAtc0FTU0VSVElPTlMgZm9yIG1vcmUgaW5mby4nO1xuICAgIHZhciBlID0gbmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcih3aGF0KTtcbiAgICByZWFkeVByb21pc2VSZWplY3QoZSk7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIHZhciBkYXRhVVJJUHJlZml4ID0gJ2RhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwnO1xuXG4gIGZ1bmN0aW9uIGlzRGF0YVVSSShmaWxlbmFtZSkge1xuICAgIHJldHVybiBmaWxlbmFtZS5zdGFydHNXaXRoKGRhdGFVUklQcmVmaXgpO1xuICB9XG5cbiAgdmFyIHdhc21CaW5hcnlGaWxlO1xuICB3YXNtQmluYXJ5RmlsZSA9ICd0ZmxpdGUtc2ltZC53YXNtJztcbiAgaWYgKCFpc0RhdGFVUkkod2FzbUJpbmFyeUZpbGUpKSB7XG4gICAgd2FzbUJpbmFyeUZpbGUgPSBsb2NhdGVGaWxlKHdhc21CaW5hcnlGaWxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJpbmFyeShmaWxlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlID09IHdhc21CaW5hcnlGaWxlICYmIHdhc21CaW5hcnkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHdhc21CaW5hcnkpO1xuICAgICAgfVxuICAgICAgaWYgKHJlYWRCaW5hcnkpIDtcbiAgICAgIHRocm93ICdib3RoIGFzeW5jIGFuZCBzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZCc7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXNoYWRvd1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgYWJvcnQoZXJyKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRCaW5hcnlQcm9taXNlKCkge1xuICAgIGlmICghd2FzbUJpbmFyeSAmJiAoRU5WSVJPTk1FTlRfSVNfV0VCKSkge1xuICAgICAgaWYgKHR5cGVvZiBmZXRjaCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh3YXNtQmluYXJ5RmlsZSwgeyBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJyB9KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVsnb2snXSkge1xuICAgICAgICAgICAgICB0aHJvdyAoXG4gICAgICAgICAgICAgICAgXCJmYWlsZWQgdG8gbG9hZCB3YXNtIGJpbmFyeSBmaWxlIGF0ICdcIiArIHdhc21CaW5hcnlGaWxlICsgXCInXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVsnYXJyYXlCdWZmZXInXSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRCaW5hcnkod2FzbUJpbmFyeUZpbGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2V0QmluYXJ5KHdhc21CaW5hcnlGaWxlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVdhc20oKSB7XG4gICAgdmFyIGluZm8gPSB7XG4gICAgICBlbnY6IGFzbUxpYnJhcnlBcmcsXG4gICAgICB3YXNpX3NuYXBzaG90X3ByZXZpZXcxOiBhc21MaWJyYXJ5QXJnLFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZWNlaXZlSW5zdGFuY2UoaW5zdGFuY2UsIG1vZHVsZSkge1xuICAgICAgdmFyIGV4cG9ydHMgPSBpbnN0YW5jZS5leHBvcnRzO1xuICAgICAgTW9kdWxlWydhc20nXSA9IGV4cG9ydHM7XG4gICAgICB3YXNtTWVtb3J5ID0gTW9kdWxlWydhc20nXVsnbWVtb3J5J107XG4gICAgICB1cGRhdGVHbG9iYWxCdWZmZXJBbmRWaWV3cyh3YXNtTWVtb3J5LmJ1ZmZlcik7XG4gICAgICBNb2R1bGVbJ2FzbSddWydfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlJ107XG4gICAgICBhZGRPbkluaXQoTW9kdWxlWydhc20nXVsnX193YXNtX2NhbGxfY3RvcnMnXSk7XG4gICAgICByZW1vdmVSdW5EZXBlbmRlbmN5KCk7XG4gICAgfVxuXG4gICAgYWRkUnVuRGVwZW5kZW5jeSgpO1xuXG4gICAgZnVuY3Rpb24gcmVjZWl2ZUluc3RhbnRpYXRpb25SZXN1bHQocmVzdWx0KSB7XG4gICAgICByZWNlaXZlSW5zdGFuY2UocmVzdWx0WydpbnN0YW5jZSddKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YW50aWF0ZUFycmF5QnVmZmVyKHJlY2VpdmVyKSB7XG4gICAgICByZXR1cm4gZ2V0QmluYXJ5UHJvbWlzZSgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChiaW5hcnkpIHtcbiAgICAgICAgICByZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYmluYXJ5LCBpbmZvKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZWNlaXZlciwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgIGVycignZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogJyArIHJlYXNvbik7XG4gICAgICAgICAgYWJvcnQocmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFudGlhdGVBc3luYygpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXdhc21CaW5hcnkgJiZcbiAgICAgICAgdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgIWlzRGF0YVVSSSh3YXNtQmluYXJ5RmlsZSkgJiZcbiAgICAgICAgdHlwZW9mIGZldGNoID09ICdmdW5jdGlvbidcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmV0Y2god2FzbUJpbmFyeUZpbGUsIHsgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicgfSkudGhlbihcbiAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhyZXNwb25zZSwgaW5mbyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4ocmVjZWl2ZUluc3RhbnRpYXRpb25SZXN1bHQsIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgZXJyKCd3YXNtIHN0cmVhbWluZyBjb21waWxlIGZhaWxlZDogJyArIHJlYXNvbik7XG4gICAgICAgICAgICAgIGVycignZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24nKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbnRpYXRlQXJyYXlCdWZmZXIocmVjZWl2ZUluc3RhbnRpYXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnN0YW50aWF0ZUFycmF5QnVmZmVyKHJlY2VpdmVJbnN0YW50aWF0aW9uUmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoTW9kdWxlWydpbnN0YW50aWF0ZVdhc20nXSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGV4cG9ydHMgPSBNb2R1bGVbJ2luc3RhbnRpYXRlV2FzbSddKGluZm8sIHJlY2VpdmVJbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiBleHBvcnRzO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnIoJ01vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICcgKyBlKTtcbiAgICAgICAgcmVhZHlQcm9taXNlUmVqZWN0KGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpbnN0YW50aWF0ZUFzeW5jKCkuY2F0Y2gocmVhZHlQcm9taXNlUmVqZWN0KTtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBmdW5jdGlvbiBFeGl0U3RhdHVzKHN0YXR1cykge1xuICAgIHRoaXMubmFtZSA9ICdFeGl0U3RhdHVzJztcbiAgICB0aGlzLm1lc3NhZ2UgPSAnUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCgnICsgc3RhdHVzICsgJyknO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FsbFJ1bnRpbWVDYWxsYmFja3MoY2FsbGJhY2tzKSB7XG4gICAgd2hpbGUgKGNhbGxiYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICBjYWxsYmFja3Muc2hpZnQoKShNb2R1bGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9fZGxpbml0KG1haW5fZHNvX2hhbmRsZSkge31cblxuICB2YXIgZGxvcGVuTWlzc2luZ0Vycm9yID1cbiAgICAnVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgZW5hYmxlIGR5bmFtaWMgbGlua2luZywgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbXNjcmlwdGVuLWNvcmUvZW1zY3JpcHRlbi93aWtpL0xpbmtpbmcnO1xuXG4gIGZ1bmN0aW9uIF9fZGxvcGVuX2pzKGZpbGVuYW1lLCBmbGFnKSB7XG4gICAgYWJvcnQoZGxvcGVuTWlzc2luZ0Vycm9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9fZGxzeW1fanMoaGFuZGxlLCBzeW1ib2wpIHtcbiAgICBhYm9ydChkbG9wZW5NaXNzaW5nRXJyb3IpO1xuICB9XG5cbiAgdmFyIG5vd0lzTW9ub3RvbmljID0gdHJ1ZTtcblxuICBmdW5jdGlvbiBfX2Vtc2NyaXB0ZW5fZ2V0X25vd19pc19tb25vdG9uaWMoKSB7XG4gICAgcmV0dXJuIG5vd0lzTW9ub3RvbmljO1xuICB9XG5cbiAgZnVuY3Rpb24gX19tbWFwX2pzKGxlbiwgcHJvdCwgZmxhZ3MsIGZkLCBvZmYsIGFsbG9jYXRlZCkge1xuICAgIHJldHVybiAtNTI7XG4gIH1cblxuICBmdW5jdGlvbiBfX211bm1hcF9qcyhhZGRyLCBsZW4sIHByb3QsIGZsYWdzLCBmZCwgb2Zmc2V0KSB7fVxuXG4gIGZ1bmN0aW9uIF9hYm9ydCgpIHtcbiAgICBhYm9ydCgnJyk7XG4gIH1cblxuICBmdW5jdGlvbiBfZW1zY3JpcHRlbl9kYXRlX25vdygpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEhlYXBNYXgoKSB7XG4gICAgcmV0dXJuIDIxNDc0ODM2NDg7XG4gIH1cblxuICBmdW5jdGlvbiBfZW1zY3JpcHRlbl9nZXRfaGVhcF9tYXgoKSB7XG4gICAgcmV0dXJuIGdldEhlYXBNYXgoKTtcbiAgfVxuXG4gIHZhciBfZW1zY3JpcHRlbl9nZXRfbm93O1xuICBfZW1zY3JpcHRlbl9nZXRfbm93ID0gKCkgPT4gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyhkZXN0LCBzcmMsIG51bSkge1xuICAgIEhFQVBVOC5jb3B5V2l0aGluKGRlc3QsIHNyYywgc3JjICsgbnVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVtc2NyaXB0ZW5fcmVhbGxvY19idWZmZXIoc2l6ZSkge1xuICAgIHRyeSB7XG4gICAgICB3YXNtTWVtb3J5Lmdyb3coKHNpemUgLSBidWZmZXIuYnl0ZUxlbmd0aCArIDY1NTM1KSA+Pj4gMTYpO1xuICAgICAgdXBkYXRlR2xvYmFsQnVmZmVyQW5kVmlld3Mod2FzbU1lbW9yeS5idWZmZXIpO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuXG4gIGZ1bmN0aW9uIF9lbXNjcmlwdGVuX3Jlc2l6ZV9oZWFwKHJlcXVlc3RlZFNpemUpIHtcbiAgICB2YXIgb2xkU2l6ZSA9IEhFQVBVOC5sZW5ndGg7XG4gICAgcmVxdWVzdGVkU2l6ZSA9IHJlcXVlc3RlZFNpemUgPj4+IDA7XG4gICAgdmFyIG1heEhlYXBTaXplID0gZ2V0SGVhcE1heCgpO1xuICAgIGlmIChyZXF1ZXN0ZWRTaXplID4gbWF4SGVhcFNpemUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGFsaWduVXAgPSAoeCwgbXVsdGlwbGUpID0+IHggKyAoKG11bHRpcGxlIC0gKHggJSBtdWx0aXBsZSkpICUgbXVsdGlwbGUpO1xuICAgIGZvciAodmFyIGN1dERvd24gPSAxOyBjdXREb3duIDw9IDQ7IGN1dERvd24gKj0gMikge1xuICAgICAgdmFyIG92ZXJHcm93bkhlYXBTaXplID0gb2xkU2l6ZSAqICgxICsgMC4yIC8gY3V0RG93bik7XG4gICAgICBvdmVyR3Jvd25IZWFwU2l6ZSA9IE1hdGgubWluKFxuICAgICAgICBvdmVyR3Jvd25IZWFwU2l6ZSxcbiAgICAgICAgcmVxdWVzdGVkU2l6ZSArIDEwMDY2MzI5NixcbiAgICAgICk7XG4gICAgICB2YXIgbmV3U2l6ZSA9IE1hdGgubWluKFxuICAgICAgICBtYXhIZWFwU2l6ZSxcbiAgICAgICAgYWxpZ25VcChNYXRoLm1heChyZXF1ZXN0ZWRTaXplLCBvdmVyR3Jvd25IZWFwU2l6ZSksIDY1NTM2KSxcbiAgICAgICk7XG4gICAgICB2YXIgcmVwbGFjZW1lbnQgPSBlbXNjcmlwdGVuX3JlYWxsb2NfYnVmZmVyKG5ld1NpemUpO1xuICAgICAgaWYgKHJlcGxhY2VtZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgRU5WID0ge307XG5cbiAgZnVuY3Rpb24gZ2V0RXhlY3V0YWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXNQcm9ncmFtIHx8ICcuL3RoaXMucHJvZ3JhbSc7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFbnZTdHJpbmdzKCkge1xuICAgIGlmICghZ2V0RW52U3RyaW5ncy5zdHJpbmdzKSB7XG4gICAgICB2YXIgbGFuZyA9XG4gICAgICAgIChcbiAgICAgICAgICAodHlwZW9mIG5hdmlnYXRvciA9PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgbmF2aWdhdG9yLmxhbmd1YWdlcyAmJlxuICAgICAgICAgICAgbmF2aWdhdG9yLmxhbmd1YWdlc1swXSkgfHxcbiAgICAgICAgICAnQydcbiAgICAgICAgKS5yZXBsYWNlKCctJywgJ18nKSArICcuVVRGLTgnO1xuICAgICAgdmFyIGVudiA9IHtcbiAgICAgICAgVVNFUjogJ3dlYl91c2VyJyxcbiAgICAgICAgTE9HTkFNRTogJ3dlYl91c2VyJyxcbiAgICAgICAgUEFUSDogJy8nLFxuICAgICAgICBQV0Q6ICcvJyxcbiAgICAgICAgSE9NRTogJy9ob21lL3dlYl91c2VyJyxcbiAgICAgICAgTEFORzogbGFuZyxcbiAgICAgICAgXzogZ2V0RXhlY3V0YWJsZU5hbWUoKSxcbiAgICAgIH07XG4gICAgICBmb3IgKHZhciB4IGluIEVOVikge1xuICAgICAgICBpZiAoRU5WW3hdID09PSB1bmRlZmluZWQpIGRlbGV0ZSBlbnZbeF07XG4gICAgICAgIGVsc2UgZW52W3hdID0gRU5WW3hdO1xuICAgICAgfVxuICAgICAgdmFyIHN0cmluZ3MgPSBbXTtcbiAgICAgIGZvciAodmFyIHggaW4gZW52KSB7XG4gICAgICAgIHN0cmluZ3MucHVzaCh4ICsgJz0nICsgZW52W3hdKTtcbiAgICAgIH1cbiAgICAgIGdldEVudlN0cmluZ3Muc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgfVxuICAgIHJldHVybiBnZXRFbnZTdHJpbmdzLnN0cmluZ3M7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXNoYWRvd1xuICBmdW5jdGlvbiB3cml0ZUFzY2lpVG9NZW1vcnkoc3RyLCBidWZmZXIsIGRvbnRBZGROdWxsKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAgIEhFQVA4W2J1ZmZlcisrID4+IDBdID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIEhFQVA4W2J1ZmZlciA+PiAwXSA9IDA7XG4gIH1cblxuICBmdW5jdGlvbiBfZW52aXJvbl9nZXQoX19lbnZpcm9uLCBlbnZpcm9uX2J1Zikge1xuICAgIHZhciBidWZTaXplID0gMDtcbiAgICBnZXRFbnZTdHJpbmdzKCkuZm9yRWFjaChmdW5jdGlvbiAoc3RyaW5nLCBpKSB7XG4gICAgICB2YXIgcHRyID0gZW52aXJvbl9idWYgKyBidWZTaXplO1xuICAgICAgSEVBUFUzMlsoX19lbnZpcm9uICsgaSAqIDQpID4+IDJdID0gcHRyO1xuICAgICAgd3JpdGVBc2NpaVRvTWVtb3J5KHN0cmluZywgcHRyKTtcbiAgICAgIGJ1ZlNpemUgKz0gc3RyaW5nLmxlbmd0aCArIDE7XG4gICAgfSk7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBmdW5jdGlvbiBfZW52aXJvbl9zaXplc19nZXQocGVudmlyb25fY291bnQsIHBlbnZpcm9uX2J1Zl9zaXplKSB7XG4gICAgdmFyIHN0cmluZ3MgPSBnZXRFbnZTdHJpbmdzKCk7XG4gICAgSEVBUFUzMltwZW52aXJvbl9jb3VudCA+PiAyXSA9IHN0cmluZ3MubGVuZ3RoO1xuICAgIHZhciBidWZTaXplID0gMDtcbiAgICBzdHJpbmdzLmZvckVhY2goZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgYnVmU2l6ZSArPSBzdHJpbmcubGVuZ3RoICsgMTtcbiAgICB9KTtcbiAgICBIRUFQVTMyW3BlbnZpcm9uX2J1Zl9zaXplID4+IDJdID0gYnVmU2l6ZTtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9wcm9jX2V4aXQoY29kZSkge1xuICAgIGlmICgha2VlcFJ1bnRpbWVBbGl2ZSgpKSB7XG4gICAgICBpZiAoTW9kdWxlWydvbkV4aXQnXSkgTW9kdWxlWydvbkV4aXQnXShjb2RlKTtcbiAgICAgIEFCT1JUID0gdHJ1ZTtcbiAgICB9XG4gICAgcXVpdF8oY29kZSwgbmV3IEV4aXRTdGF0dXMoY29kZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhpdEpTKHN0YXR1cywgaW1wbGljaXQpIHtcbiAgICBfcHJvY19leGl0KHN0YXR1cyk7XG4gIH1cblxuICB2YXIgX2V4aXQgPSBleGl0SlM7XG5cbiAgZnVuY3Rpb24gX2ZkX2Nsb3NlKGZkKSB7XG4gICAgcmV0dXJuIDUyO1xuICB9XG5cbiAgZnVuY3Rpb24gX2ZkX3NlZWsoZmQsIG9mZnNldF9sb3csIG9mZnNldF9oaWdoLCB3aGVuY2UsIG5ld09mZnNldCkge1xuICAgIHJldHVybiA3MDtcbiAgfVxuXG4gIHZhciBwcmludENoYXJCdWZmZXJzID0gW251bGwsIFtdLCBbXV07XG5cbiAgZnVuY3Rpb24gcHJpbnRDaGFyKHN0cmVhbSwgY3Vycikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tc2hhZG93XG4gICAgdmFyIGJ1ZmZlciA9IHByaW50Q2hhckJ1ZmZlcnNbc3RyZWFtXTtcbiAgICBpZiAoY3VyciA9PT0gMCB8fCBjdXJyID09PSAxMCkge1xuICAgICAgKHN0cmVhbSA9PT0gMSA/IG91dCA6IGVycikoVVRGOEFycmF5VG9TdHJpbmcoYnVmZmVyLCAwKSk7XG4gICAgICBidWZmZXIubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyLnB1c2goY3Vycik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2ZkX3dyaXRlKGZkLCBpb3YsIGlvdmNudCwgcG51bSkge1xuICAgIHZhciBudW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW92Y250OyBpKyspIHtcbiAgICAgIHZhciBwdHIgPSBIRUFQVTMyW2lvdiA+PiAyXTtcbiAgICAgIHZhciBsZW4gPSBIRUFQVTMyWyhpb3YgKyA0KSA+PiAyXTtcbiAgICAgIGlvdiArPSA4O1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47IGorKykge1xuICAgICAgICBwcmludENoYXIoZmQsIEhFQVBVOFtwdHIgKyBqXSk7XG4gICAgICB9XG4gICAgICBudW0gKz0gbGVuO1xuICAgIH1cbiAgICBIRUFQVTMyW3BudW0gPj4gMl0gPSBudW07XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSYW5kb21EZXZpY2UoKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGNyeXB0byA9PSAnb2JqZWN0JyAmJlxuICAgICAgdHlwZW9mIGNyeXB0b1snZ2V0UmFuZG9tVmFsdWVzJ10gPT0gJ2Z1bmN0aW9uJ1xuICAgICkge1xuICAgICAgdmFyIHJhbmRvbUJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyYW5kb21CdWZmZXIpO1xuICAgICAgICByZXR1cm4gcmFuZG9tQnVmZmVyWzBdO1xuICAgICAgfTtcbiAgICB9IGVsc2UgcmV0dXJuICgpID0+IGFib3J0KCdyYW5kb21EZXZpY2UnKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tc2hhZG93XG4gIGZ1bmN0aW9uIF9nZXRlbnRyb3B5KGJ1ZmZlciwgc2l6ZSkge1xuICAgIGlmICghX2dldGVudHJvcHkucmFuZG9tRGV2aWNlKSB7XG4gICAgICBfZ2V0ZW50cm9weS5yYW5kb21EZXZpY2UgPSBnZXRSYW5kb21EZXZpY2UoKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIEhFQVA4WyhidWZmZXIgKyBpKSA+PiAwXSA9IF9nZXRlbnRyb3B5LnJhbmRvbURldmljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHZhciBhc21MaWJyYXJ5QXJnID0ge1xuICAgIF9kbGluaXQ6IF9fZGxpbml0LFxuICAgIF9kbG9wZW5fanM6IF9fZGxvcGVuX2pzLFxuICAgIF9kbHN5bV9qczogX19kbHN5bV9qcyxcbiAgICBfZW1zY3JpcHRlbl9nZXRfbm93X2lzX21vbm90b25pYzogX19lbXNjcmlwdGVuX2dldF9ub3dfaXNfbW9ub3RvbmljLFxuICAgIF9tbWFwX2pzOiBfX21tYXBfanMsXG4gICAgX211bm1hcF9qczogX19tdW5tYXBfanMsXG4gICAgYWJvcnQ6IF9hYm9ydCxcbiAgICBlbXNjcmlwdGVuX2RhdGVfbm93OiBfZW1zY3JpcHRlbl9kYXRlX25vdyxcbiAgICBlbXNjcmlwdGVuX2dldF9oZWFwX21heDogX2Vtc2NyaXB0ZW5fZ2V0X2hlYXBfbWF4LFxuICAgIGVtc2NyaXB0ZW5fZ2V0X25vdzogX2Vtc2NyaXB0ZW5fZ2V0X25vdyxcbiAgICBlbXNjcmlwdGVuX21lbWNweV9iaWc6IF9lbXNjcmlwdGVuX21lbWNweV9iaWcsXG4gICAgZW1zY3JpcHRlbl9yZXNpemVfaGVhcDogX2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXAsXG4gICAgZW52aXJvbl9nZXQ6IF9lbnZpcm9uX2dldCxcbiAgICBlbnZpcm9uX3NpemVzX2dldDogX2Vudmlyb25fc2l6ZXNfZ2V0LFxuICAgIGV4aXQ6IF9leGl0LFxuICAgIGZkX2Nsb3NlOiBfZmRfY2xvc2UsXG4gICAgZmRfc2VlazogX2ZkX3NlZWssXG4gICAgZmRfd3JpdGU6IF9mZF93cml0ZSxcbiAgICBnZXRlbnRyb3B5OiBfZ2V0ZW50cm9weSxcbiAgfTtcbiAgY3JlYXRlV2FzbSgpO1xuICAoTW9kdWxlWydfX193YXNtX2NhbGxfY3RvcnMnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX19fd2FzbV9jYWxsX2N0b3JzJ10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnX193YXNtX2NhbGxfY3RvcnMnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ19nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldCddID1cbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKE1vZHVsZVtcbiAgICAgICAgJ19nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldCdcbiAgICAgIF0gPVxuICAgICAgICBNb2R1bGVbJ2FzbSddWydnZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldCddKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0pO1xuICAoTW9kdWxlWydfZ2V0SW5wdXRNZW1vcnlPZmZzZXQnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX2dldElucHV0TWVtb3J5T2Zmc2V0J10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnZ2V0SW5wdXRNZW1vcnlPZmZzZXQnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ19nZXRJbnB1dEhlaWdodCddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydfZ2V0SW5wdXRIZWlnaHQnXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydnZXRJbnB1dEhlaWdodCddKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICB9KTtcbiAgKE1vZHVsZVsnX2dldElucHV0V2lkdGgnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX2dldElucHV0V2lkdGgnXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydnZXRJbnB1dFdpZHRoJ10pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIH0pO1xuICAoTW9kdWxlWydfZ2V0SW5wdXRDaGFubmVsQ291bnQnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX2dldElucHV0Q2hhbm5lbENvdW50J10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnZ2V0SW5wdXRDaGFubmVsQ291bnQnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ19nZXRPdXRwdXRNZW1vcnlPZmZzZXQnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX2dldE91dHB1dE1lbW9yeU9mZnNldCddID1cbiAgICAgIE1vZHVsZVsnYXNtJ11bJ2dldE91dHB1dE1lbW9yeU9mZnNldCddKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICB9KTtcbiAgKE1vZHVsZVsnX2dldE91dHB1dEhlaWdodCddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydfZ2V0T3V0cHV0SGVpZ2h0J10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnZ2V0T3V0cHV0SGVpZ2h0J10pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIH0pO1xuICAoTW9kdWxlWydfZ2V0T3V0cHV0V2lkdGgnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX2dldE91dHB1dFdpZHRoJ10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnZ2V0T3V0cHV0V2lkdGgnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ19nZXRPdXRwdXRDaGFubmVsQ291bnQnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX2dldE91dHB1dENoYW5uZWxDb3VudCddID1cbiAgICAgIE1vZHVsZVsnYXNtJ11bJ2dldE91dHB1dENoYW5uZWxDb3VudCddKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICB9KTtcbiAgKE1vZHVsZVsnX2xvYWRNb2RlbCddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydfbG9hZE1vZGVsJ10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnbG9hZE1vZGVsJ10pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIH0pO1xuICAoTW9kdWxlWydfcnVuSW5mZXJlbmNlJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIChNb2R1bGVbJ19ydW5JbmZlcmVuY2UnXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydydW5JbmZlcmVuY2UnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ19tYWxsb2MnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX21hbGxvYyddID0gTW9kdWxlWydhc20nXVsnbWFsbG9jJ10pLmFwcGx5KFxuICAgICAgbnVsbCxcbiAgICAgIGFyZ3VtZW50cyxcbiAgICApO1xuICB9KTtcbiAgKE1vZHVsZVsnX19fZXJybm9fbG9jYXRpb24nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX19fZXJybm9fbG9jYXRpb24nXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydfX2Vycm5vX2xvY2F0aW9uJ10pLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIH0pO1xuICAoTW9kdWxlWydfX19kbF9zZXRlcnInXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnX19fZGxfc2V0ZXJyJ10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnX19kbF9zZXRlcnInXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ3N0YWNrU2F2ZSddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydzdGFja1NhdmUnXSA9IE1vZHVsZVsnYXNtJ11bJ3N0YWNrU2F2ZSddKS5hcHBseShcbiAgICAgIG51bGwsXG4gICAgICBhcmd1bWVudHMsXG4gICAgKTtcbiAgfSk7XG4gIChNb2R1bGVbJ3N0YWNrUmVzdG9yZSddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydzdGFja1Jlc3RvcmUnXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydzdGFja1Jlc3RvcmUnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ3N0YWNrQWxsb2MnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnc3RhY2tBbGxvYyddID1cbiAgICAgIE1vZHVsZVsnYXNtJ11bJ3N0YWNrQWxsb2MnXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfampqJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIChNb2R1bGVbJ2R5bkNhbGxfampqJ10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnZHluQ2FsbF9qamonXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfamlpaSddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydkeW5DYWxsX2ppaWknXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydkeW5DYWxsX2ppaWknXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfaWlpaWpqJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIChNb2R1bGVbJ2R5bkNhbGxfaWlpaWpqJ10gPVxuICAgICAgTW9kdWxlWydhc20nXVsnZHluQ2FsbF9paWlpamonXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfdmlpamonXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnZHluQ2FsbF92aWlqaiddID1cbiAgICAgIE1vZHVsZVsnYXNtJ11bJ2R5bkNhbGxfdmlpamonXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfdmlpaWpqaiddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydkeW5DYWxsX3ZpaWlqamonXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydkeW5DYWxsX3ZpaWlqamonXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfaWlqamlpaWknXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKE1vZHVsZVsnZHluQ2FsbF9paWpqaWlpaSddID1cbiAgICAgIE1vZHVsZVsnYXNtJ11bJ2R5bkNhbGxfaWlqamlpaWknXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIChNb2R1bGVbJ2R5bkNhbGxfamlqaSddID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAoTW9kdWxlWydkeW5DYWxsX2ppamknXSA9XG4gICAgICBNb2R1bGVbJ2FzbSddWydkeW5DYWxsX2ppamknXSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgfSk7XG4gIHZhciBjYWxsZWRSdW47XG4gIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uIHJ1bkNhbGxlcigpIHtcbiAgICBpZiAoIWNhbGxlZFJ1bikgcnVuKCk7XG4gICAgaWYgKCFjYWxsZWRSdW4pIGRlcGVuZGVuY2llc0Z1bGZpbGxlZCA9IHJ1bkNhbGxlcjtcbiAgfTtcblxuICBmdW5jdGlvbiBydW4oYXJncykge1xuICAgIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHByZVJ1bigpO1xuICAgIGlmIChydW5EZXBlbmRlbmNpZXMgPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9SdW4oKSB7XG4gICAgICBpZiAoY2FsbGVkUnVuKSByZXR1cm47XG4gICAgICBjYWxsZWRSdW4gPSB0cnVlO1xuICAgICAgTW9kdWxlWydjYWxsZWRSdW4nXSA9IHRydWU7XG4gICAgICBpZiAoQUJPUlQpIHJldHVybjtcbiAgICAgIGluaXRSdW50aW1lKCk7XG4gICAgICByZWFkeVByb21pc2VSZXNvbHZlKE1vZHVsZSk7XG4gICAgICBpZiAoTW9kdWxlWydvblJ1bnRpbWVJbml0aWFsaXplZCddKSBNb2R1bGVbJ29uUnVudGltZUluaXRpYWxpemVkJ10oKTtcbiAgICAgIHBvc3RSdW4oKTtcbiAgICB9XG5cbiAgICBpZiAoTW9kdWxlWydzZXRTdGF0dXMnXSkge1xuICAgICAgTW9kdWxlWydzZXRTdGF0dXMnXSgnUnVubmluZy4uLicpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIE1vZHVsZVsnc2V0U3RhdHVzJ10oJycpO1xuICAgICAgICB9LCAxKTtcbiAgICAgICAgZG9SdW4oKTtcbiAgICAgIH0sIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb1J1bigpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChNb2R1bGVbJ3ByZUluaXQnXSkge1xuICAgIGlmICh0eXBlb2YgTW9kdWxlWydwcmVJbml0J10gPT0gJ2Z1bmN0aW9uJylcbiAgICAgIE1vZHVsZVsncHJlSW5pdCddID0gW01vZHVsZVsncHJlSW5pdCddXTtcbiAgICB3aGlsZSAoTW9kdWxlWydwcmVJbml0J10ubGVuZ3RoID4gMCkge1xuICAgICAgTW9kdWxlWydwcmVJbml0J10ucG9wKCkoKTtcbiAgICB9XG4gIH1cbiAgcnVuKCk7XG5cbiAgcmV0dXJuIF9fTW9kdWxlLnJlYWR5O1xufTtcblxuY29uc3QgdmVyc2lvbiA9IFwiMC4xLjRcIjtcbmNvbnN0IHBhY2thZ2VOYW1lID0gXCJAc3RyZWFtLWlvL3ZpZGVvLWZpbHRlcnMtd2ViXCI7XG5cbi8vIEB0cy1leHBlY3QtZXJyb3IgLSBtb2R1bGUgaXMgbm90IGRlY2xhcmVkXG4vLyBUaGlzIGlzIGEgV2ViQXNzZW1ibHkgbW9kdWxlIGNvbXBpbGVkIGZyb20gdGhlIFRlbnNvckZsb3cgTGl0ZSBDKysgbGlicmFyeS5cbmNvbnN0IGNyZWF0ZVRGTGl0ZSA9IGNyZWF0ZVRGTGl0ZVNJTURNb2R1bGU7XG5jb25zdCBsb2FkVEZMaXRlID0gYXN5bmMgKG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHsgYmFzZVBhdGggPSBgaHR0cHM6Ly91bnBrZy5jb20vJHtwYWNrYWdlTmFtZX1AJHt2ZXJzaW9ufS90ZmAsIHRmRmlsZVBhdGggPSBgJHtiYXNlUGF0aH0vdGZsaXRlL3RmbGl0ZS1zaW1kLndhc21gLCBtb2RlbEZpbGVQYXRoID0gYCR7YmFzZVBhdGh9L21vZGVscy9zZWdtX2Z1bGxfdjY3OS50ZmxpdGVgLCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBbdGZMaXRlLCBtb2RlbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGNyZWF0ZVRGTGl0ZSh7IGxvY2F0ZUZpbGU6ICgpID0+IHRmRmlsZVBhdGggfSksXG4gICAgICAgIGZldGNoTW9kZWwobW9kZWxGaWxlUGF0aCksXG4gICAgXSk7XG4gICAgY29uc3QgbW9kZWxCdWZmZXJPZmZzZXQgPSB0ZkxpdGUuX2dldE1vZGVsQnVmZmVyTWVtb3J5T2Zmc2V0KCk7XG4gICAgdGZMaXRlLkhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkobW9kZWwpLCBtb2RlbEJ1ZmZlck9mZnNldCk7XG4gICAgdGZMaXRlLl9sb2FkTW9kZWwobW9kZWwuYnl0ZUxlbmd0aCk7XG4gICAgcmV0dXJuIHRmTGl0ZTtcbn07XG5sZXQgbGFzdE1vZGVsRmlsZVBhdGggPSAnJztcbmxldCBtb2RlbEZpbGVDYWNoZTtcbmNvbnN0IGZldGNoTW9kZWwgPSBhc3luYyAobW9kZWxGaWxlUGF0aCkgPT4ge1xuICAgIGNvbnN0IG1vZGVsID0gbW9kZWxGaWxlUGF0aCA9PT0gbGFzdE1vZGVsRmlsZVBhdGggJiYgbW9kZWxGaWxlQ2FjaGVcbiAgICAgICAgPyBtb2RlbEZpbGVDYWNoZVxuICAgICAgICA6IGF3YWl0IGZldGNoKG1vZGVsRmlsZVBhdGgpLnRoZW4oKHIpID0+IHIuYXJyYXlCdWZmZXIoKSk7XG4gICAgLy8gQ2FjaGUgdGhlIG1vZGVsIGZpbGUgZm9yIGZ1dHVyZSB1c2UuXG4gICAgbW9kZWxGaWxlQ2FjaGUgPSBtb2RlbDtcbiAgICBsYXN0TW9kZWxGaWxlUGF0aCA9IG1vZGVsRmlsZVBhdGg7XG4gICAgcmV0dXJuIG1vZGVsO1xufTtcblxuZXhwb3J0IHsgU2VnbWVudGF0aW9uTGV2ZWwsIGNyZWF0ZVJlbmRlcmVyLCBpc1BsYXRmb3JtU3VwcG9ydGVkLCBsb2FkVEZMaXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-filters-web/dist/index.es.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stream-io/video-react-bindings/dist/index.es.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-bindings/dist/index.es.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_LANGUAGE: () => (/* binding */ DEFAULT_LANGUAGE),\n/* harmony export */   DEFAULT_NAMESPACE: () => (/* binding */ DEFAULT_NAMESPACE),\n/* harmony export */   Restricted: () => (/* binding */ Restricted),\n/* harmony export */   StreamCallProvider: () => (/* binding */ StreamCallProvider),\n/* harmony export */   StreamI18n: () => (/* binding */ StreamI18n),\n/* harmony export */   StreamI18nProvider: () => (/* binding */ StreamI18nProvider),\n/* harmony export */   StreamVideoProvider: () => (/* binding */ StreamVideoProvider),\n/* harmony export */   defaultTranslationFunction: () => (/* binding */ defaultTranslationFunction),\n/* harmony export */   mapToRegistry: () => (/* binding */ mapToRegistry),\n/* harmony export */   useCall: () => (/* binding */ useCall),\n/* harmony export */   useCallStateHooks: () => (/* binding */ useCallStateHooks),\n/* harmony export */   useCalls: () => (/* binding */ useCalls),\n/* harmony export */   useConnectedUser: () => (/* binding */ useConnectedUser),\n/* harmony export */   useCreateI18n: () => (/* binding */ useCreateI18n),\n/* harmony export */   useI18n: () => (/* binding */ useI18n),\n/* harmony export */   useStore: () => (/* binding */ useStore),\n/* harmony export */   useStreamVideoClient: () => (/* binding */ useStreamVideoClient)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18next */ \"(ssr)/./node_modules/i18next/dist/esm/i18next.js\");\n/* harmony import */ var _stream_io_video_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stream-io/video-client */ \"(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js\");\n\n\n\n\n\nconst StreamCallContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * A provider for the call object.\n */\nconst StreamCallProvider = (props) => {\n    const { call, children } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamCallContext.Provider, { value: call, children: children }));\n};\n/**\n * A hook to get the call object from the closest provider.\n */\nconst useCall = () => {\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StreamCallContext);\n};\n\nconst mapToRegistry = (translationsMap, namespace) => Object.entries(translationsMap).reduce((acc, [lng, translations]) => {\n    acc[lng] = { [namespace]: translations };\n    return acc;\n}, {});\n\nconst DEFAULT_LANGUAGE = 'en';\nconst DEFAULT_NAMESPACE = 'stream-video';\nconst DEFAULT_CONFIG = {\n    debug: false,\n    currentLanguage: DEFAULT_LANGUAGE,\n    fallbackLanguage: false,\n};\nconst DEFAULT_TRANSLATIONS_REGISTRY = mapToRegistry({}, DEFAULT_NAMESPACE);\nconst defaultTranslationFunction = (key) => key;\nclass StreamI18n {\n    /** Simple logger function */\n    constructor(options = {}) {\n        /** Translator function that converts the provided string into its equivalent in the current language. */\n        this.t = defaultTranslationFunction;\n        this.init = async () => {\n            try {\n                this.t = await this.i18nInstance.init();\n            }\n            catch (e) {\n                console.error(`Failed to initialize translations: ${JSON.stringify(e)}`);\n            }\n            return this;\n        };\n        this.changeLanguage = async (language, onChange) => {\n            if (!this._checkIsInitialized())\n                return;\n            // i18next detects the language, if none provided, but it is better\n            // to show this detection here explicitly\n            const browserLanguage = typeof window !== 'undefined' && window.navigator\n                ? window.navigator.language\n                : undefined;\n            await this.i18nInstance.changeLanguage(language || browserLanguage);\n            onChange?.(this.currentLanguage);\n        };\n        this.registerTranslationsForLanguage = ({ lng, translations, }) => {\n            if (!this._checkIsInitialized())\n                return;\n            this.i18nInstance.addResourceBundle(lng, DEFAULT_NAMESPACE, translations, true, true);\n        };\n        this._checkIsInitialized = () => {\n            if (!this.i18nInstance.isInitialized) {\n                console.warn('I18n instance is not initialized. Call yourStreamI18nInstance.init().');\n            }\n            return this.i18nInstance.isInitialized;\n        };\n        const { debug = DEFAULT_CONFIG.debug, currentLanguage = DEFAULT_CONFIG.currentLanguage, fallbackLanguage = DEFAULT_CONFIG.fallbackLanguage, translationsOverrides, } = options;\n        this.i18nInstance = i18next__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createInstance({\n            debug,\n            defaultNS: DEFAULT_NAMESPACE,\n            fallbackLng: fallbackLanguage,\n            interpolation: { escapeValue: false },\n            keySeparator: false,\n            lng: currentLanguage,\n            nsSeparator: false,\n            parseMissingKeyHandler: (key) => {\n                return key;\n            },\n            resources: DEFAULT_TRANSLATIONS_REGISTRY,\n        });\n        if (translationsOverrides) {\n            this.i18nInstance.on('initialized', () => {\n                Object.entries(translationsOverrides).forEach(([lng, translations]) => {\n                    this.registerTranslationsForLanguage({ lng, translations });\n                });\n            });\n        }\n    }\n    get currentLanguage() {\n        this._checkIsInitialized();\n        return this.i18nInstance.language;\n    }\n    get isInitialized() {\n        return this.i18nInstance.isInitialized;\n    }\n}\n\nconst StreamI18nContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    t: defaultTranslationFunction,\n});\nconst StreamI18nProvider = ({ children, ...createI18nParams }) => {\n    const { i18n, t } = useCreateI18n(createI18nParams);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamI18nContext.Provider, { value: { t, i18n }, children: children }));\n};\nconst useCreateI18n = ({ i18nInstance, language, fallbackLanguage, translationsOverrides, }) => {\n    const [i18n] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => i18nInstance ||\n        new StreamI18n({\n            currentLanguage: language,\n            fallbackLanguage,\n            translationsOverrides,\n        }));\n    const [t, setTranslationFn] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => defaultTranslationFunction);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        const { isInitialized } = i18n;\n        if (!isInitialized) {\n            i18n.init().then((_i18n) => setTranslationFn(() => _i18n.i18nInstance.t));\n            return;\n        }\n        if (language && i18n?.currentLanguage !== language) {\n            i18n.changeLanguage(language).catch((err) => {\n                console.log('Error while changing language', err);\n            });\n        }\n    }, [i18n, i18nInstance, language, translationsOverrides]);\n    return { i18n, t };\n};\nconst useI18n = () => (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StreamI18nContext);\n\nconst StreamVideoContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * StreamVideo is a provider component which should be used to wrap the entire application.\n * It provides the client object to all children components and initializes the i18n instance.\n *  @param PropsWithChildren<StreamVideoProps>\n *  @category Client State\n */\nconst StreamVideoProvider = ({ children, client, i18nInstance, language, translationsOverrides, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamVideoContext.Provider, { value: client, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamI18nProvider, { i18nInstance: i18nInstance, language: language, translationsOverrides: translationsOverrides, children: children }) }));\n};\n/**\n *\n * @returns\n *\n * @category Client State\n */\nconst useStreamVideoClient = () => {\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StreamVideoContext);\n};\n\n/**\n * Utility hook which provides the current value of the given observable.\n * @internal\n *\n * @param observable$ the observable to read data from.\n * @param defaultValue a default value. Used when the observable data can't be read or emits an error.\n */\nconst useObservableValue = (observable$, defaultValue) => {\n    const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => {\n        try {\n            return _stream_io_video_client__WEBPACK_IMPORTED_MODULE_3__.RxUtils.getCurrentValue(observable$);\n        }\n        catch (err) {\n            if (typeof defaultValue === 'undefined')\n                throw err;\n            return defaultValue;\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        const subscription = observable$.subscribe({\n            next: setValue,\n            error: (err) => {\n                console.log('An error occurred while reading an observable', err);\n                if (defaultValue)\n                    setValue(defaultValue);\n            },\n        });\n        return () => {\n            subscription.unsubscribe();\n        };\n    }, [defaultValue, observable$]);\n    return value;\n};\n\n/**\n * Checks whether we are using React Native\n */\nconst isReactNative = () => {\n    if (typeof navigator === 'undefined')\n        return false;\n    return navigator.product?.toLowerCase() === 'reactnative';\n};\n\n// kind-of memoized, used as a default value\nconst EMPTY_DEVICES_ARRAY = Object.freeze([]);\n/**\n * Utility hook, which provides the current call's state.\n *\n * @category Call State\n */\nconst useCallState = () => {\n    const call = useCall();\n    // return an empty and unlinked CallState object if there is no call in the provider\n    // this ensures that the hooks always return a value and many null checks can be avoided\n    if (!call) {\n        const message = 'You are using useCallState() outside a Call context. ' +\n            'Please wrap your component in <StreamCall /> and provide a \"call\" instance.';\n        console.warn(message);\n        return new _stream_io_video_client__WEBPACK_IMPORTED_MODULE_3__.CallState();\n    }\n    return call.state;\n};\n/**\n * Utility hook which provides information whether the current call is being recorded. It will return `true` if the call is being recorded.\n *\n * @category Call State\n */\nconst useIsCallRecordingInProgress = () => {\n    const { recording$ } = useCallState();\n    return useObservableValue(recording$);\n};\n/**\n * Utility hook which provides information whether the current call is broadcasting.\n *\n * @category Call State\n */\nconst useIsCallHLSBroadcastingInProgress = () => {\n    const { egress$ } = useCallState();\n    const egress = useObservableValue(egress$);\n    if (!egress)\n        return false;\n    return egress.broadcasting;\n};\n/**\n * Utility hook which provides information whether the current call is live.\n *\n * @category Call State\n */\nconst useIsCallLive = () => {\n    const { backstage$ } = useCallState();\n    const isBackstageOn = useObservableValue(backstage$);\n    return !isBackstageOn;\n};\n/**\n * Returns the list of blocked users in the current call.\n */\nconst useCallBlockedUserIds = () => {\n    const { blockedUserIds$ } = useCallState();\n    return useObservableValue(blockedUserIds$);\n};\n/**\n * Returns the timestamp when this call was created.\n */\nconst useCallCreatedAt = () => {\n    const { createdAt$ } = useCallState();\n    return useObservableValue(createdAt$);\n};\n/**\n * Returns the timestamp when this call was ended.\n */\nconst useCallEndedAt = () => {\n    const { endedAt$ } = useCallState();\n    return useObservableValue(endedAt$);\n};\n/**\n * Returns the timestamp telling when the call is scheduled to start.\n */\nconst useCallStartsAt = () => {\n    const { startsAt$ } = useCallState();\n    return useObservableValue(startsAt$);\n};\n/**\n * Returns the timestamp when this call was updated.\n */\nconst useCallUpdatedAt = () => {\n    const { updatedAt$ } = useCallState();\n    return useObservableValue(updatedAt$);\n};\n/**\n * Returns the information about the call's creator.\n */\nconst useCallCreatedBy = () => {\n    const { createdBy$ } = useCallState();\n    return useObservableValue(createdBy$);\n};\n/**\n * Returns the call's custom data.\n */\nconst useCallCustomData = () => {\n    const { custom$ } = useCallState();\n    return useObservableValue(custom$);\n};\n/**\n * Returns the call's Egress information.\n */\nconst useCallEgress = () => {\n    const { egress$ } = useCallState();\n    return useObservableValue(egress$);\n};\n/**\n * Returns the call's Ingress information.\n */\nconst useCallIngress = () => {\n    const { ingress$ } = useCallState();\n    return useObservableValue(ingress$);\n};\n/**\n * Returns the data for the current call session.\n */\nconst useCallSession = () => {\n    const { session$ } = useCallState();\n    return useObservableValue(session$);\n};\n/**\n * Returns the call's settings.\n */\nconst useCallSettings = () => {\n    const { settings$ } = useCallState();\n    return useObservableValue(settings$);\n};\n/**\n * Returns whether the call has transcribing enabled.\n */\nconst useIsCallTranscribingInProgress = () => {\n    const { transcribing$ } = useCallState();\n    return useObservableValue(transcribing$);\n};\n/**\n * Returns information about the user who has marked this call as ended.\n */\nconst useCallEndedBy = () => {\n    const { endedBy$ } = useCallState();\n    return useObservableValue(endedBy$);\n};\n/**\n * Utility hook which provides a boolean indicating whether there is\n * a participant in the current call which shares their screen.\n *\n * @category Call State\n */\nconst useHasOngoingScreenShare = () => {\n    const { hasOngoingScreenShare$ } = useCallState();\n    return useObservableValue(hasOngoingScreenShare$);\n};\n/**\n * Utility hook which provides the latest stats report of the current call.\n *\n * The latest stats report of the current call.\n * When stats gathering is enabled, this observable will emit a new value\n * at a regular (configurable) interval.\n *\n * Consumers of this observable can implement their own batching logic\n * in case they want to show historical stats data.\n *\n * @category Call State\n */\nconst useCallStatsReport = () => {\n    const { callStatsReport$ } = useCallState();\n    return useObservableValue(callStatsReport$);\n};\n/**\n * Utility hook which provides the dominant speaker of the current call.\n *\n * @category Call State\n */\nconst useDominantSpeaker = () => {\n    const { dominantSpeaker$ } = useCallState();\n    return useObservableValue(dominantSpeaker$);\n};\n/**\n * Utility hook which provides a list of call members.\n *\n * @category Call State\n */\nconst useCallMembers = () => {\n    const { members$ } = useCallState();\n    return useObservableValue(members$);\n};\n/**\n * Utility hook providing the current calling state of the call. For example, `RINGING` or `JOINED`.\n *\n * @category Call State\n */\nconst useCallCallingState = () => {\n    const { callingState$ } = useCallState();\n    return useObservableValue(callingState$);\n};\n/**\n * Utility hook providing the actual start time of the current session.\n * Useful for calculating the call duration.\n *\n * @category Call State\n */\nconst useCallStartedAt = () => {\n    const { startedAt$ } = useCallState();\n    return useObservableValue(startedAt$);\n};\n/**\n * A hook which provides a list of all participants that have joined an active call.\n *\n * @category Call State\n *\n * @param options.sortBy - A comparator function to sort the participants by.\n * Make sure to memoize output of the `combineComparators` function\n * (or keep it out of component's scope if possible) before passing it down to this property.\n */\nconst useParticipants = ({ sortBy, } = {}) => {\n    const { participants$ } = useCallState();\n    const participants = useObservableValue(participants$);\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n        if (sortBy) {\n            return [...participants].sort(sortBy);\n        }\n        return participants;\n    }, [participants, sortBy]);\n};\n/**\n * A hook which provides a StreamVideoLocalParticipant object.\n * It signals that I have joined a call.\n *\n * @category Call State\n */\nconst useLocalParticipant = () => {\n    const { localParticipant$ } = useCallState();\n    return useObservableValue(localParticipant$);\n};\n/**\n * A hook which provides a list of all other participants than me that have joined an active call.\n *\n * @category Call State\n */\nconst useRemoteParticipants = () => {\n    const { remoteParticipants$ } = useCallState();\n    return useObservableValue(remoteParticipants$);\n};\n/**\n * Returns the approximate participant count of the active call.\n * This includes the anonymous users as well, and it is computed on the server.\n *\n * @category Call State\n */\nconst useParticipantCount = () => {\n    const { participantCount$ } = useCallState();\n    return useObservableValue(participantCount$);\n};\n/**\n * Returns the approximate anonymous participant count of the active call.\n * The regular participants are not included in this count. It is computed on the server.\n *\n * @category Call State\n */\nconst useAnonymousParticipantCount = () => {\n    const { anonymousParticipantCount$ } = useCallState();\n    return useObservableValue(anonymousParticipantCount$);\n};\n/**\n * Returns the generated thumbnail of the current call, if enabled in settings.\n */\nconst useCallThumbnail = () => {\n    const { thumbnails$ } = useCallState();\n    return useObservableValue(thumbnails$);\n};\n/**\n * A hook which returns the local participant's own capabilities.\n */\nconst useOwnCapabilities = () => {\n    const { ownCapabilities$ } = useCallState();\n    return useObservableValue(ownCapabilities$);\n};\n/**\n * Hook that returns true if the local participant has all the given permissions.\n *\n * @param permissions the permissions to check.\n */\nconst useHasPermissions = (...permissions) => {\n    const capabilities = useOwnCapabilities();\n    return permissions.every((permission) => capabilities?.includes(permission));\n};\n/**\n * Returns the camera state of the current call.\n *\n * @category Camera Manager State\n *\n */\nconst useCameraState = () => {\n    const call = useCall();\n    const { camera } = call;\n    const devices$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => camera.listDevices(), [camera]);\n    const { state } = camera;\n    const status = useObservableValue(state.status$);\n    const optimisticStatus = useObservableValue(state.optimisticStatus$);\n    const direction = useObservableValue(state.direction$);\n    const mediaStream = useObservableValue(state.mediaStream$);\n    const selectedDevice = useObservableValue(state.selectedDevice$);\n    const devices = useObservableValue(devices$, EMPTY_DEVICES_ARRAY);\n    const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n    const isMute = status !== 'enabled';\n    const optimisticIsMute = optimisticStatus !== 'enabled';\n    return {\n        camera,\n        status,\n        optimisticStatus,\n        isEnabled: status === 'enabled',\n        direction,\n        mediaStream,\n        devices,\n        hasBrowserPermission,\n        selectedDevice,\n        isMute,\n        optimisticIsMute,\n    };\n};\n/**\n * Returns the microphone state of the current call.\n *\n * @category Microphone Manager State\n */\nconst useMicrophoneState = () => {\n    const call = useCall();\n    const { microphone } = call;\n    const devices$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => microphone.listDevices(), [microphone]);\n    const { state } = microphone;\n    const status = useObservableValue(state.status$);\n    const optimisticStatus = useObservableValue(state.optimisticStatus$);\n    const mediaStream = useObservableValue(state.mediaStream$);\n    const selectedDevice = useObservableValue(state.selectedDevice$);\n    const devices = useObservableValue(devices$, EMPTY_DEVICES_ARRAY);\n    const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n    const isSpeakingWhileMuted = useObservableValue(state.speakingWhileMuted$);\n    const isMute = status !== 'enabled';\n    const optimisticIsMute = optimisticStatus !== 'enabled';\n    return {\n        microphone,\n        status,\n        optimisticStatus,\n        isEnabled: status === 'enabled',\n        mediaStream,\n        devices,\n        selectedDevice,\n        hasBrowserPermission,\n        isSpeakingWhileMuted,\n        isMute,\n        optimisticIsMute,\n    };\n};\n/**\n * Returns the speaker state of the current call.\n *\n * Note: This hook is not supported in React Native\n */\nconst useSpeakerState = () => {\n    if (isReactNative()) {\n        throw new Error('This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details');\n    }\n    const call = useCall();\n    const { speaker } = call;\n    const devices$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => speaker.listDevices(), [speaker]);\n    const devices = useObservableValue(devices$, EMPTY_DEVICES_ARRAY);\n    const selectedDevice = useObservableValue(speaker.state.selectedDevice$);\n    return {\n        speaker,\n        devices,\n        selectedDevice,\n        isDeviceSelectionSupported: speaker.state.isDeviceSelectionSupported,\n    };\n};\n/**\n * Returns the Screen Share state of the current call.\n */\nconst useScreenShareState = () => {\n    const call = useCall();\n    const { screenShare } = call;\n    const status = useObservableValue(screenShare.state.status$);\n    const pendingStatus = useObservableValue(screenShare.state.optimisticStatus$);\n    const mediaStream = useObservableValue(screenShare.state.mediaStream$);\n    const isMute = status !== 'enabled';\n    const optimisticStatus = pendingStatus ?? status;\n    const optimisticIsMute = optimisticStatus !== 'enabled';\n    return {\n        screenShare,\n        mediaStream,\n        status,\n        optimisticStatus,\n        isMute,\n        optimisticIsMute,\n    };\n};\n\nvar CallStateHooks = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    useAnonymousParticipantCount: useAnonymousParticipantCount,\n    useCallBlockedUserIds: useCallBlockedUserIds,\n    useCallCallingState: useCallCallingState,\n    useCallCreatedAt: useCallCreatedAt,\n    useCallCreatedBy: useCallCreatedBy,\n    useCallCustomData: useCallCustomData,\n    useCallEgress: useCallEgress,\n    useCallEndedAt: useCallEndedAt,\n    useCallEndedBy: useCallEndedBy,\n    useCallIngress: useCallIngress,\n    useCallMembers: useCallMembers,\n    useCallSession: useCallSession,\n    useCallSettings: useCallSettings,\n    useCallStartedAt: useCallStartedAt,\n    useCallStartsAt: useCallStartsAt,\n    useCallState: useCallState,\n    useCallStatsReport: useCallStatsReport,\n    useCallThumbnail: useCallThumbnail,\n    useCallUpdatedAt: useCallUpdatedAt,\n    useCameraState: useCameraState,\n    useDominantSpeaker: useDominantSpeaker,\n    useHasOngoingScreenShare: useHasOngoingScreenShare,\n    useHasPermissions: useHasPermissions,\n    useIsCallHLSBroadcastingInProgress: useIsCallHLSBroadcastingInProgress,\n    useIsCallLive: useIsCallLive,\n    useIsCallRecordingInProgress: useIsCallRecordingInProgress,\n    useIsCallTranscribingInProgress: useIsCallTranscribingInProgress,\n    useLocalParticipant: useLocalParticipant,\n    useMicrophoneState: useMicrophoneState,\n    useOwnCapabilities: useOwnCapabilities,\n    useParticipantCount: useParticipantCount,\n    useParticipants: useParticipants,\n    useRemoteParticipants: useRemoteParticipants,\n    useScreenShareState: useScreenShareState,\n    useSpeakerState: useSpeakerState\n});\n\n/**\n * Utility hook which provides access to client's state store.\n */\nconst useStore = () => {\n    const client = useStreamVideoClient();\n    if (!client) {\n        throw new Error(`StreamVideoClient isn't initialized or this hook is called outside of <StreamVideo> context.`);\n    }\n    return client.state;\n};\n/**\n * Utility hook which provides a list of all notifications about created calls.\n * In the ring call settings, these calls can be outgoing (I have called somebody)\n * or incoming (somebody has called me).\n *\n * @category Client State\n */\nconst useCalls = () => {\n    const { calls$ } = useStore();\n    return useObservableValue(calls$);\n};\n/**\n * Returns the current connected user.\n *\n * @category Client State\n */\nconst useConnectedUser = () => {\n    const { connectedUser$ } = useStore();\n    return useObservableValue(connectedUser$);\n};\n\n/**\n * A hook-alike function that exposes all call state hooks.\n *\n * @category Call State\n */\nconst useCallStateHooks = () => CallStateHooks;\n\nconst Restricted = ({ canRequestOnly, hasPermissionsOnly, requiredGrants, requireAll = true, children, }) => {\n    const call = useCall();\n    const { useCallSettings, useOwnCapabilities } = useCallStateHooks();\n    const ownCapabilities = useOwnCapabilities();\n    const settings = useCallSettings();\n    const hasPermissions = requiredGrants[requireAll ? 'every' : 'some']((capability) => ownCapabilities?.includes(capability));\n    if (hasPermissionsOnly)\n        return hasPermissions ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: children }) : null;\n    const canRequest = requiredGrants.some((capability) => call?.permissionsContext.canRequest(capability, settings));\n    if (canRequestOnly)\n        return canRequest ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: children }) : null;\n    if (hasPermissions || canRequest)\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: children });\n    return null;\n};\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1iaW5kaW5ncy9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQzhCO0FBQ2xEO0FBQytCOztBQUU3RCwwQkFBMEIsb0RBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlCQUFpQjtBQUM3QixZQUFZLHNEQUFHLCtCQUErQixpQ0FBaUM7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaURBQVU7QUFDckI7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxDQUFDLElBQUk7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGtCQUFrQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG9CQUFvQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2SkFBNko7QUFDN0ssNEJBQTRCLDhEQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG1CQUFtQjtBQUM5RSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixvREFBYTtBQUN2QztBQUNBLENBQUM7QUFDRCw4QkFBOEIsK0JBQStCO0FBQzdELFlBQVks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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QixxQkFBcUIsOENBQU87QUFDNUIsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QixxQkFBcUIsOENBQU87QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQkFBaUI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLGtGQUFrRjtBQUN4RztBQUNBLFlBQVksc0NBQXNDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNEQUFHLENBQUMsdURBQVEsSUFBSSxvQkFBb0I7QUFDcEU7QUFDQTtBQUNBLDRCQUE0QixzREFBRyxDQUFDLHVEQUFRLElBQUksb0JBQW9CO0FBQ2hFO0FBQ0EsZUFBZSxzREFBRyxDQUFDLHVEQUFRLElBQUksb0JBQW9CO0FBQ25EO0FBQ0E7O0FBRStSO0FBQy9SIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9vbWllLy4vbm9kZV9tb2R1bGVzL0BzdHJlYW0taW8vdmlkZW8tcmVhY3QtYmluZGluZ3MvZGlzdC9pbmRleC5lcy5qcz9iYzZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwgRnJhZ21lbnQgfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGkxOG5leHQgZnJvbSAnaTE4bmV4dCc7XG5pbXBvcnQgeyBSeFV0aWxzLCBDYWxsU3RhdGUgfSBmcm9tICdAc3RyZWFtLWlvL3ZpZGVvLWNsaWVudCc7XG5cbmNvbnN0IFN0cmVhbUNhbGxDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuLyoqXG4gKiBBIHByb3ZpZGVyIGZvciB0aGUgY2FsbCBvYmplY3QuXG4gKi9cbmNvbnN0IFN0cmVhbUNhbGxQcm92aWRlciA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgY2FsbCwgY2hpbGRyZW4gfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KFN0cmVhbUNhbGxDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBjYWxsLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcbi8qKlxuICogQSBob29rIHRvIGdldCB0aGUgY2FsbCBvYmplY3QgZnJvbSB0aGUgY2xvc2VzdCBwcm92aWRlci5cbiAqL1xuY29uc3QgdXNlQ2FsbCA9ICgpID0+IHtcbiAgICByZXR1cm4gdXNlQ29udGV4dChTdHJlYW1DYWxsQ29udGV4dCk7XG59O1xuXG5jb25zdCBtYXBUb1JlZ2lzdHJ5ID0gKHRyYW5zbGF0aW9uc01hcCwgbmFtZXNwYWNlKSA9PiBPYmplY3QuZW50cmllcyh0cmFuc2xhdGlvbnNNYXApLnJlZHVjZSgoYWNjLCBbbG5nLCB0cmFuc2xhdGlvbnNdKSA9PiB7XG4gICAgYWNjW2xuZ10gPSB7IFtuYW1lc3BhY2VdOiB0cmFuc2xhdGlvbnMgfTtcbiAgICByZXR1cm4gYWNjO1xufSwge30pO1xuXG5jb25zdCBERUZBVUxUX0xBTkdVQUdFID0gJ2VuJztcbmNvbnN0IERFRkFVTFRfTkFNRVNQQUNFID0gJ3N0cmVhbS12aWRlbyc7XG5jb25zdCBERUZBVUxUX0NPTkZJRyA9IHtcbiAgICBkZWJ1ZzogZmFsc2UsXG4gICAgY3VycmVudExhbmd1YWdlOiBERUZBVUxUX0xBTkdVQUdFLFxuICAgIGZhbGxiYWNrTGFuZ3VhZ2U6IGZhbHNlLFxufTtcbmNvbnN0IERFRkFVTFRfVFJBTlNMQVRJT05TX1JFR0lTVFJZID0gbWFwVG9SZWdpc3RyeSh7fSwgREVGQVVMVF9OQU1FU1BBQ0UpO1xuY29uc3QgZGVmYXVsdFRyYW5zbGF0aW9uRnVuY3Rpb24gPSAoa2V5KSA9PiBrZXk7XG5jbGFzcyBTdHJlYW1JMThuIHtcbiAgICAvKiogU2ltcGxlIGxvZ2dlciBmdW5jdGlvbiAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKiogVHJhbnNsYXRvciBmdW5jdGlvbiB0aGF0IGNvbnZlcnRzIHRoZSBwcm92aWRlZCBzdHJpbmcgaW50byBpdHMgZXF1aXZhbGVudCBpbiB0aGUgY3VycmVudCBsYW5ndWFnZS4gKi9cbiAgICAgICAgdGhpcy50ID0gZGVmYXVsdFRyYW5zbGF0aW9uRnVuY3Rpb247XG4gICAgICAgIHRoaXMuaW5pdCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ID0gYXdhaXQgdGhpcy5pMThuSW5zdGFuY2UuaW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSB0cmFuc2xhdGlvbnM6ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFuZ2VMYW5ndWFnZSA9IGFzeW5jIChsYW5ndWFnZSwgb25DaGFuZ2UpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2hlY2tJc0luaXRpYWxpemVkKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gaTE4bmV4dCBkZXRlY3RzIHRoZSBsYW5ndWFnZSwgaWYgbm9uZSBwcm92aWRlZCwgYnV0IGl0IGlzIGJldHRlclxuICAgICAgICAgICAgLy8gdG8gc2hvdyB0aGlzIGRldGVjdGlvbiBoZXJlIGV4cGxpY2l0bHlcbiAgICAgICAgICAgIGNvbnN0IGJyb3dzZXJMYW5ndWFnZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3JcbiAgICAgICAgICAgICAgICA/IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaTE4bkluc3RhbmNlLmNoYW5nZUxhbmd1YWdlKGxhbmd1YWdlIHx8IGJyb3dzZXJMYW5ndWFnZSk7XG4gICAgICAgICAgICBvbkNoYW5nZT8uKHRoaXMuY3VycmVudExhbmd1YWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWdpc3RlclRyYW5zbGF0aW9uc0Zvckxhbmd1YWdlID0gKHsgbG5nLCB0cmFuc2xhdGlvbnMsIH0pID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2hlY2tJc0luaXRpYWxpemVkKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pMThuSW5zdGFuY2UuYWRkUmVzb3VyY2VCdW5kbGUobG5nLCBERUZBVUxUX05BTUVTUEFDRSwgdHJhbnNsYXRpb25zLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fY2hlY2tJc0luaXRpYWxpemVkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmkxOG5JbnN0YW5jZS5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdJMThuIGluc3RhbmNlIGlzIG5vdCBpbml0aWFsaXplZC4gQ2FsbCB5b3VyU3RyZWFtSTE4bkluc3RhbmNlLmluaXQoKS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmkxOG5JbnN0YW5jZS5pc0luaXRpYWxpemVkO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB7IGRlYnVnID0gREVGQVVMVF9DT05GSUcuZGVidWcsIGN1cnJlbnRMYW5ndWFnZSA9IERFRkFVTFRfQ09ORklHLmN1cnJlbnRMYW5ndWFnZSwgZmFsbGJhY2tMYW5ndWFnZSA9IERFRkFVTFRfQ09ORklHLmZhbGxiYWNrTGFuZ3VhZ2UsIHRyYW5zbGF0aW9uc092ZXJyaWRlcywgfSA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaTE4bkluc3RhbmNlID0gaTE4bmV4dC5jcmVhdGVJbnN0YW5jZSh7XG4gICAgICAgICAgICBkZWJ1ZyxcbiAgICAgICAgICAgIGRlZmF1bHROUzogREVGQVVMVF9OQU1FU1BBQ0UsXG4gICAgICAgICAgICBmYWxsYmFja0xuZzogZmFsbGJhY2tMYW5ndWFnZSxcbiAgICAgICAgICAgIGludGVycG9sYXRpb246IHsgZXNjYXBlVmFsdWU6IGZhbHNlIH0sXG4gICAgICAgICAgICBrZXlTZXBhcmF0b3I6IGZhbHNlLFxuICAgICAgICAgICAgbG5nOiBjdXJyZW50TGFuZ3VhZ2UsXG4gICAgICAgICAgICBuc1NlcGFyYXRvcjogZmFsc2UsXG4gICAgICAgICAgICBwYXJzZU1pc3NpbmdLZXlIYW5kbGVyOiAoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXNvdXJjZXM6IERFRkFVTFRfVFJBTlNMQVRJT05TX1JFR0lTVFJZLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRyYW5zbGF0aW9uc092ZXJyaWRlcykge1xuICAgICAgICAgICAgdGhpcy5pMThuSW5zdGFuY2Uub24oJ2luaXRpYWxpemVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHRyYW5zbGF0aW9uc092ZXJyaWRlcykuZm9yRWFjaCgoW2xuZywgdHJhbnNsYXRpb25zXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyVHJhbnNsYXRpb25zRm9yTGFuZ3VhZ2UoeyBsbmcsIHRyYW5zbGF0aW9ucyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjdXJyZW50TGFuZ3VhZ2UoKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrSXNJbml0aWFsaXplZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pMThuSW5zdGFuY2UubGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBpc0luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pMThuSW5zdGFuY2UuaXNJbml0aWFsaXplZDtcbiAgICB9XG59XG5cbmNvbnN0IFN0cmVhbUkxOG5Db250ZXh0ID0gY3JlYXRlQ29udGV4dCh7XG4gICAgdDogZGVmYXVsdFRyYW5zbGF0aW9uRnVuY3Rpb24sXG59KTtcbmNvbnN0IFN0cmVhbUkxOG5Qcm92aWRlciA9ICh7IGNoaWxkcmVuLCAuLi5jcmVhdGVJMThuUGFyYW1zIH0pID0+IHtcbiAgICBjb25zdCB7IGkxOG4sIHQgfSA9IHVzZUNyZWF0ZUkxOG4oY3JlYXRlSTE4blBhcmFtcyk7XG4gICAgcmV0dXJuIChqc3goU3RyZWFtSTE4bkNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgdCwgaTE4biB9LCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcbmNvbnN0IHVzZUNyZWF0ZUkxOG4gPSAoeyBpMThuSW5zdGFuY2UsIGxhbmd1YWdlLCBmYWxsYmFja0xhbmd1YWdlLCB0cmFuc2xhdGlvbnNPdmVycmlkZXMsIH0pID0+IHtcbiAgICBjb25zdCBbaTE4bl0gPSB1c2VTdGF0ZSgoKSA9PiBpMThuSW5zdGFuY2UgfHxcbiAgICAgICAgbmV3IFN0cmVhbUkxOG4oe1xuICAgICAgICAgICAgY3VycmVudExhbmd1YWdlOiBsYW5ndWFnZSxcbiAgICAgICAgICAgIGZhbGxiYWNrTGFuZ3VhZ2UsXG4gICAgICAgICAgICB0cmFuc2xhdGlvbnNPdmVycmlkZXMsXG4gICAgICAgIH0pKTtcbiAgICBjb25zdCBbdCwgc2V0VHJhbnNsYXRpb25Gbl0gPSB1c2VTdGF0ZSgoKSA9PiBkZWZhdWx0VHJhbnNsYXRpb25GdW5jdGlvbik7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgeyBpc0luaXRpYWxpemVkIH0gPSBpMThuO1xuICAgICAgICBpZiAoIWlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIGkxOG4uaW5pdCgpLnRoZW4oKF9pMThuKSA9PiBzZXRUcmFuc2xhdGlvbkZuKCgpID0+IF9pMThuLmkxOG5JbnN0YW5jZS50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhbmd1YWdlICYmIGkxOG4/LmN1cnJlbnRMYW5ndWFnZSAhPT0gbGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgIGkxOG4uY2hhbmdlTGFuZ3VhZ2UobGFuZ3VhZ2UpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgY2hhbmdpbmcgbGFuZ3VhZ2UnLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbaTE4biwgaTE4bkluc3RhbmNlLCBsYW5ndWFnZSwgdHJhbnNsYXRpb25zT3ZlcnJpZGVzXSk7XG4gICAgcmV0dXJuIHsgaTE4biwgdCB9O1xufTtcbmNvbnN0IHVzZUkxOG4gPSAoKSA9PiB1c2VDb250ZXh0KFN0cmVhbUkxOG5Db250ZXh0KTtcblxuY29uc3QgU3RyZWFtVmlkZW9Db250ZXh0ID0gY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuLyoqXG4gKiBTdHJlYW1WaWRlbyBpcyBhIHByb3ZpZGVyIGNvbXBvbmVudCB3aGljaCBzaG91bGQgYmUgdXNlZCB0byB3cmFwIHRoZSBlbnRpcmUgYXBwbGljYXRpb24uXG4gKiBJdCBwcm92aWRlcyB0aGUgY2xpZW50IG9iamVjdCB0byBhbGwgY2hpbGRyZW4gY29tcG9uZW50cyBhbmQgaW5pdGlhbGl6ZXMgdGhlIGkxOG4gaW5zdGFuY2UuXG4gKiAgQHBhcmFtIFByb3BzV2l0aENoaWxkcmVuPFN0cmVhbVZpZGVvUHJvcHM+XG4gKiAgQGNhdGVnb3J5IENsaWVudCBTdGF0ZVxuICovXG5jb25zdCBTdHJlYW1WaWRlb1Byb3ZpZGVyID0gKHsgY2hpbGRyZW4sIGNsaWVudCwgaTE4bkluc3RhbmNlLCBsYW5ndWFnZSwgdHJhbnNsYXRpb25zT3ZlcnJpZGVzLCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goU3RyZWFtVmlkZW9Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBjbGllbnQsIGNoaWxkcmVuOiBqc3goU3RyZWFtSTE4blByb3ZpZGVyLCB7IGkxOG5JbnN0YW5jZTogaTE4bkluc3RhbmNlLCBsYW5ndWFnZTogbGFuZ3VhZ2UsIHRyYW5zbGF0aW9uc092ZXJyaWRlczogdHJhbnNsYXRpb25zT3ZlcnJpZGVzLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkgfSkpO1xufTtcbi8qKlxuICpcbiAqIEByZXR1cm5zXG4gKlxuICogQGNhdGVnb3J5IENsaWVudCBTdGF0ZVxuICovXG5jb25zdCB1c2VTdHJlYW1WaWRlb0NsaWVudCA9ICgpID0+IHtcbiAgICByZXR1cm4gdXNlQ29udGV4dChTdHJlYW1WaWRlb0NvbnRleHQpO1xufTtcblxuLyoqXG4gKiBVdGlsaXR5IGhvb2sgd2hpY2ggcHJvdmlkZXMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGdpdmVuIG9ic2VydmFibGUuXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZSQgdGhlIG9ic2VydmFibGUgdG8gcmVhZCBkYXRhIGZyb20uXG4gKiBAcGFyYW0gZGVmYXVsdFZhbHVlIGEgZGVmYXVsdCB2YWx1ZS4gVXNlZCB3aGVuIHRoZSBvYnNlcnZhYmxlIGRhdGEgY2FuJ3QgYmUgcmVhZCBvciBlbWl0cyBhbiBlcnJvci5cbiAqL1xuY29uc3QgdXNlT2JzZXJ2YWJsZVZhbHVlID0gKG9ic2VydmFibGUkLCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZShvYnNlcnZhYmxlJCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlJC5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgbmV4dDogc2V0VmFsdWUsXG4gICAgICAgICAgICBlcnJvcjogKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSByZWFkaW5nIGFuIG9ic2VydmFibGUnLCBlcnIpO1xuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHNldFZhbHVlKGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9O1xuICAgIH0sIFtkZWZhdWx0VmFsdWUsIG9ic2VydmFibGUkXSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB3ZSBhcmUgdXNpbmcgUmVhY3QgTmF0aXZlXG4gKi9cbmNvbnN0IGlzUmVhY3ROYXRpdmUgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIG5hdmlnYXRvci5wcm9kdWN0Py50b0xvd2VyQ2FzZSgpID09PSAncmVhY3RuYXRpdmUnO1xufTtcblxuLy8ga2luZC1vZiBtZW1vaXplZCwgdXNlZCBhcyBhIGRlZmF1bHQgdmFsdWVcbmNvbnN0IEVNUFRZX0RFVklDRVNfQVJSQVkgPSBPYmplY3QuZnJlZXplKFtdKTtcbi8qKlxuICogVXRpbGl0eSBob29rLCB3aGljaCBwcm92aWRlcyB0aGUgY3VycmVudCBjYWxsJ3Mgc3RhdGUuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlQ2FsbFN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgLy8gcmV0dXJuIGFuIGVtcHR5IGFuZCB1bmxpbmtlZCBDYWxsU3RhdGUgb2JqZWN0IGlmIHRoZXJlIGlzIG5vIGNhbGwgaW4gdGhlIHByb3ZpZGVyXG4gICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGhvb2tzIGFsd2F5cyByZXR1cm4gYSB2YWx1ZSBhbmQgbWFueSBudWxsIGNoZWNrcyBjYW4gYmUgYXZvaWRlZFxuICAgIGlmICghY2FsbCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1lvdSBhcmUgdXNpbmcgdXNlQ2FsbFN0YXRlKCkgb3V0c2lkZSBhIENhbGwgY29udGV4dC4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHdyYXAgeW91ciBjb21wb25lbnQgaW4gPFN0cmVhbUNhbGwgLz4gYW5kIHByb3ZpZGUgYSBcImNhbGxcIiBpbnN0YW5jZS4nO1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbFN0YXRlKCk7XG4gICAgfVxuICAgIHJldHVybiBjYWxsLnN0YXRlO1xufTtcbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGluZm9ybWF0aW9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgY2FsbCBpcyBiZWluZyByZWNvcmRlZC4gSXQgd2lsbCByZXR1cm4gYHRydWVgIGlmIHRoZSBjYWxsIGlzIGJlaW5nIHJlY29yZGVkLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgPSAoKSA9PiB7XG4gICAgY29uc3QgeyByZWNvcmRpbmckIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKHJlY29yZGluZyQpO1xufTtcbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGluZm9ybWF0aW9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgY2FsbCBpcyBicm9hZGNhc3RpbmcuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlSXNDYWxsSExTQnJvYWRjYXN0aW5nSW5Qcm9ncmVzcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGVncmVzcyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIGNvbnN0IGVncmVzcyA9IHVzZU9ic2VydmFibGVWYWx1ZShlZ3Jlc3MkKTtcbiAgICBpZiAoIWVncmVzcylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBlZ3Jlc3MuYnJvYWRjYXN0aW5nO1xufTtcbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGluZm9ybWF0aW9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgY2FsbCBpcyBsaXZlLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUlzQ2FsbExpdmUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBiYWNrc3RhZ2UkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICBjb25zdCBpc0JhY2tzdGFnZU9uID0gdXNlT2JzZXJ2YWJsZVZhbHVlKGJhY2tzdGFnZSQpO1xuICAgIHJldHVybiAhaXNCYWNrc3RhZ2VPbjtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGxpc3Qgb2YgYmxvY2tlZCB1c2VycyBpbiB0aGUgY3VycmVudCBjYWxsLlxuICovXG5jb25zdCB1c2VDYWxsQmxvY2tlZFVzZXJJZHMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBibG9ja2VkVXNlcklkcyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoYmxvY2tlZFVzZXJJZHMkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWVzdGFtcCB3aGVuIHRoaXMgY2FsbCB3YXMgY3JlYXRlZC5cbiAqL1xuY29uc3QgdXNlQ2FsbENyZWF0ZWRBdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNyZWF0ZWRBdCQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoY3JlYXRlZEF0JCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB0aW1lc3RhbXAgd2hlbiB0aGlzIGNhbGwgd2FzIGVuZGVkLlxuICovXG5jb25zdCB1c2VDYWxsRW5kZWRBdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGVuZGVkQXQkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGVuZGVkQXQkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWVzdGFtcCB0ZWxsaW5nIHdoZW4gdGhlIGNhbGwgaXMgc2NoZWR1bGVkIHRvIHN0YXJ0LlxuICovXG5jb25zdCB1c2VDYWxsU3RhcnRzQXQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzdGFydHNBdCQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhcnRzQXQkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWVzdGFtcCB3aGVuIHRoaXMgY2FsbCB3YXMgdXBkYXRlZC5cbiAqL1xuY29uc3QgdXNlQ2FsbFVwZGF0ZWRBdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHVwZGF0ZWRBdCQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUodXBkYXRlZEF0JCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2FsbCdzIGNyZWF0b3IuXG4gKi9cbmNvbnN0IHVzZUNhbGxDcmVhdGVkQnkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBjcmVhdGVkQnkkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGNyZWF0ZWRCeSQpO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgY2FsbCdzIGN1c3RvbSBkYXRhLlxuICovXG5jb25zdCB1c2VDYWxsQ3VzdG9tRGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCB7IGN1c3RvbSQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoY3VzdG9tJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWxsJ3MgRWdyZXNzIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCB1c2VDYWxsRWdyZXNzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgZWdyZXNzJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShlZ3Jlc3MkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGNhbGwncyBJbmdyZXNzIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCB1c2VDYWxsSW5ncmVzcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGluZ3Jlc3MkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGluZ3Jlc3MkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGRhdGEgZm9yIHRoZSBjdXJyZW50IGNhbGwgc2Vzc2lvbi5cbiAqL1xuY29uc3QgdXNlQ2FsbFNlc3Npb24gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzZXNzaW9uJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShzZXNzaW9uJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWxsJ3Mgc2V0dGluZ3MuXG4gKi9cbmNvbnN0IHVzZUNhbGxTZXR0aW5ncyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHNldHRpbmdzJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShzZXR0aW5ncyQpO1xufTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBjYWxsIGhhcyB0cmFuc2NyaWJpbmcgZW5hYmxlZC5cbiAqL1xuY29uc3QgdXNlSXNDYWxsVHJhbnNjcmliaW5nSW5Qcm9ncmVzcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHRyYW5zY3JpYmluZyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUodHJhbnNjcmliaW5nJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyIHdobyBoYXMgbWFya2VkIHRoaXMgY2FsbCBhcyBlbmRlZC5cbiAqL1xuY29uc3QgdXNlQ2FsbEVuZGVkQnkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBlbmRlZEJ5JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShlbmRlZEJ5JCk7XG59O1xuLyoqXG4gKiBVdGlsaXR5IGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGVyZSBpc1xuICogYSBwYXJ0aWNpcGFudCBpbiB0aGUgY3VycmVudCBjYWxsIHdoaWNoIHNoYXJlcyB0aGVpciBzY3JlZW4uXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlSGFzT25nb2luZ1NjcmVlblNoYXJlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaGFzT25nb2luZ1NjcmVlblNoYXJlJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShoYXNPbmdvaW5nU2NyZWVuU2hhcmUkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyB0aGUgbGF0ZXN0IHN0YXRzIHJlcG9ydCBvZiB0aGUgY3VycmVudCBjYWxsLlxuICpcbiAqIFRoZSBsYXRlc3Qgc3RhdHMgcmVwb3J0IG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKiBXaGVuIHN0YXRzIGdhdGhlcmluZyBpcyBlbmFibGVkLCB0aGlzIG9ic2VydmFibGUgd2lsbCBlbWl0IGEgbmV3IHZhbHVlXG4gKiBhdCBhIHJlZ3VsYXIgKGNvbmZpZ3VyYWJsZSkgaW50ZXJ2YWwuXG4gKlxuICogQ29uc3VtZXJzIG9mIHRoaXMgb2JzZXJ2YWJsZSBjYW4gaW1wbGVtZW50IHRoZWlyIG93biBiYXRjaGluZyBsb2dpY1xuICogaW4gY2FzZSB0aGV5IHdhbnQgdG8gc2hvdyBoaXN0b3JpY2FsIHN0YXRzIGRhdGEuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlQ2FsbFN0YXRzUmVwb3J0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2FsbFN0YXRzUmVwb3J0JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShjYWxsU3RhdHNSZXBvcnQkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyB0aGUgZG9taW5hbnQgc3BlYWtlciBvZiB0aGUgY3VycmVudCBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZURvbWluYW50U3BlYWtlciA9ICgpID0+IHtcbiAgICBjb25zdCB7IGRvbWluYW50U3BlYWtlciQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoZG9taW5hbnRTcGVha2VyJCk7XG59O1xuLyoqXG4gKiBVdGlsaXR5IGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBsaXN0IG9mIGNhbGwgbWVtYmVycy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ2FsbCBTdGF0ZVxuICovXG5jb25zdCB1c2VDYWxsTWVtYmVycyA9ICgpID0+IHtcbiAgICBjb25zdCB7IG1lbWJlcnMkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKG1lbWJlcnMkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayBwcm92aWRpbmcgdGhlIGN1cnJlbnQgY2FsbGluZyBzdGF0ZSBvZiB0aGUgY2FsbC4gRm9yIGV4YW1wbGUsIGBSSU5HSU5HYCBvciBgSk9JTkVEYC5cbiAqXG4gKiBAY2F0ZWdvcnkgQ2FsbCBTdGF0ZVxuICovXG5jb25zdCB1c2VDYWxsQ2FsbGluZ1N0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2FsbGluZ1N0YXRlJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShjYWxsaW5nU3RhdGUkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayBwcm92aWRpbmcgdGhlIGFjdHVhbCBzdGFydCB0aW1lIG9mIHRoZSBjdXJyZW50IHNlc3Npb24uXG4gKiBVc2VmdWwgZm9yIGNhbGN1bGF0aW5nIHRoZSBjYWxsIGR1cmF0aW9uLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUNhbGxTdGFydGVkQXQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzdGFydGVkQXQkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXJ0ZWRBdCQpO1xufTtcbi8qKlxuICogQSBob29rIHdoaWNoIHByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgcGFydGljaXBhbnRzIHRoYXQgaGF2ZSBqb2luZWQgYW4gYWN0aXZlIGNhbGwuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucy5zb3J0QnkgLSBBIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gc29ydCB0aGUgcGFydGljaXBhbnRzIGJ5LlxuICogTWFrZSBzdXJlIHRvIG1lbW9pemUgb3V0cHV0IG9mIHRoZSBgY29tYmluZUNvbXBhcmF0b3JzYCBmdW5jdGlvblxuICogKG9yIGtlZXAgaXQgb3V0IG9mIGNvbXBvbmVudCdzIHNjb3BlIGlmIHBvc3NpYmxlKSBiZWZvcmUgcGFzc2luZyBpdCBkb3duIHRvIHRoaXMgcHJvcGVydHkuXG4gKi9cbmNvbnN0IHVzZVBhcnRpY2lwYW50cyA9ICh7IHNvcnRCeSwgfSA9IHt9KSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudHMkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VPYnNlcnZhYmxlVmFsdWUocGFydGljaXBhbnRzJCk7XG4gICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBpZiAoc29ydEJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLnBhcnRpY2lwYW50c10uc29ydChzb3J0QnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0aWNpcGFudHM7XG4gICAgfSwgW3BhcnRpY2lwYW50cywgc29ydEJ5XSk7XG59O1xuLyoqXG4gKiBBIGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBTdHJlYW1WaWRlb0xvY2FsUGFydGljaXBhbnQgb2JqZWN0LlxuICogSXQgc2lnbmFscyB0aGF0IEkgaGF2ZSBqb2luZWQgYSBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUxvY2FsUGFydGljaXBhbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsb2NhbFBhcnRpY2lwYW50JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShsb2NhbFBhcnRpY2lwYW50JCk7XG59O1xuLyoqXG4gKiBBIGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBvdGhlciBwYXJ0aWNpcGFudHMgdGhhbiBtZSB0aGF0IGhhdmUgam9pbmVkIGFuIGFjdGl2ZSBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZVJlbW90ZVBhcnRpY2lwYW50cyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHJlbW90ZVBhcnRpY2lwYW50cyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUocmVtb3RlUGFydGljaXBhbnRzJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3hpbWF0ZSBwYXJ0aWNpcGFudCBjb3VudCBvZiB0aGUgYWN0aXZlIGNhbGwuXG4gKiBUaGlzIGluY2x1ZGVzIHRoZSBhbm9ueW1vdXMgdXNlcnMgYXMgd2VsbCwgYW5kIGl0IGlzIGNvbXB1dGVkIG9uIHRoZSBzZXJ2ZXIuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlUGFydGljaXBhbnRDb3VudCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50Q291bnQkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKHBhcnRpY2lwYW50Q291bnQkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGFwcHJveGltYXRlIGFub255bW91cyBwYXJ0aWNpcGFudCBjb3VudCBvZiB0aGUgYWN0aXZlIGNhbGwuXG4gKiBUaGUgcmVndWxhciBwYXJ0aWNpcGFudHMgYXJlIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGNvdW50LiBJdCBpcyBjb21wdXRlZCBvbiB0aGUgc2VydmVyLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUFub255bW91c1BhcnRpY2lwYW50Q291bnQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBnZW5lcmF0ZWQgdGh1bWJuYWlsIG9mIHRoZSBjdXJyZW50IGNhbGwsIGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MuXG4gKi9cbmNvbnN0IHVzZUNhbGxUaHVtYm5haWwgPSAoKSA9PiB7XG4gICAgY29uc3QgeyB0aHVtYm5haWxzJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZSh0aHVtYm5haWxzJCk7XG59O1xuLyoqXG4gKiBBIGhvb2sgd2hpY2ggcmV0dXJucyB0aGUgbG9jYWwgcGFydGljaXBhbnQncyBvd24gY2FwYWJpbGl0aWVzLlxuICovXG5jb25zdCB1c2VPd25DYXBhYmlsaXRpZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBvd25DYXBhYmlsaXRpZXMkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKG93bkNhcGFiaWxpdGllcyQpO1xufTtcbi8qKlxuICogSG9vayB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgbG9jYWwgcGFydGljaXBhbnQgaGFzIGFsbCB0aGUgZ2l2ZW4gcGVybWlzc2lvbnMuXG4gKlxuICogQHBhcmFtIHBlcm1pc3Npb25zIHRoZSBwZXJtaXNzaW9ucyB0byBjaGVjay5cbiAqL1xuY29uc3QgdXNlSGFzUGVybWlzc2lvbnMgPSAoLi4ucGVybWlzc2lvbnMpID0+IHtcbiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSB1c2VPd25DYXBhYmlsaXRpZXMoKTtcbiAgICByZXR1cm4gcGVybWlzc2lvbnMuZXZlcnkoKHBlcm1pc3Npb24pID0+IGNhcGFiaWxpdGllcz8uaW5jbHVkZXMocGVybWlzc2lvbikpO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgY2FtZXJhIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKlxuICogQGNhdGVnb3J5IENhbWVyYSBNYW5hZ2VyIFN0YXRlXG4gKlxuICovXG5jb25zdCB1c2VDYW1lcmFTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgY2FtZXJhIH0gPSBjYWxsO1xuICAgIGNvbnN0IGRldmljZXMkID0gdXNlTWVtbygoKSA9PiBjYW1lcmEubGlzdERldmljZXMoKSwgW2NhbWVyYV0pO1xuICAgIGNvbnN0IHsgc3RhdGUgfSA9IGNhbWVyYTtcbiAgICBjb25zdCBzdGF0dXMgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuc3RhdHVzJCk7XG4gICAgY29uc3Qgb3B0aW1pc3RpY1N0YXR1cyA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5vcHRpbWlzdGljU3RhdHVzJCk7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLmRpcmVjdGlvbiQpO1xuICAgIGNvbnN0IG1lZGlhU3RyZWFtID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLm1lZGlhU3RyZWFtJCk7XG4gICAgY29uc3Qgc2VsZWN0ZWREZXZpY2UgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuc2VsZWN0ZWREZXZpY2UkKTtcbiAgICBjb25zdCBkZXZpY2VzID0gdXNlT2JzZXJ2YWJsZVZhbHVlKGRldmljZXMkLCBFTVBUWV9ERVZJQ0VTX0FSUkFZKTtcbiAgICBjb25zdCBoYXNCcm93c2VyUGVybWlzc2lvbiA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5oYXNCcm93c2VyUGVybWlzc2lvbiQpO1xuICAgIGNvbnN0IGlzTXV0ZSA9IHN0YXR1cyAhPT0gJ2VuYWJsZWQnO1xuICAgIGNvbnN0IG9wdGltaXN0aWNJc011dGUgPSBvcHRpbWlzdGljU3RhdHVzICE9PSAnZW5hYmxlZCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FtZXJhLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIG9wdGltaXN0aWNTdGF0dXMsXG4gICAgICAgIGlzRW5hYmxlZDogc3RhdHVzID09PSAnZW5hYmxlZCcsXG4gICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgbWVkaWFTdHJlYW0sXG4gICAgICAgIGRldmljZXMsXG4gICAgICAgIGhhc0Jyb3dzZXJQZXJtaXNzaW9uLFxuICAgICAgICBzZWxlY3RlZERldmljZSxcbiAgICAgICAgaXNNdXRlLFxuICAgICAgICBvcHRpbWlzdGljSXNNdXRlLFxuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaWNyb3Bob25lIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKlxuICogQGNhdGVnb3J5IE1pY3JvcGhvbmUgTWFuYWdlciBTdGF0ZVxuICovXG5jb25zdCB1c2VNaWNyb3Bob25lU3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IG1pY3JvcGhvbmUgfSA9IGNhbGw7XG4gICAgY29uc3QgZGV2aWNlcyQgPSB1c2VNZW1vKCgpID0+IG1pY3JvcGhvbmUubGlzdERldmljZXMoKSwgW21pY3JvcGhvbmVdKTtcbiAgICBjb25zdCB7IHN0YXRlIH0gPSBtaWNyb3Bob25lO1xuICAgIGNvbnN0IHN0YXR1cyA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5zdGF0dXMkKTtcbiAgICBjb25zdCBvcHRpbWlzdGljU3RhdHVzID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLm9wdGltaXN0aWNTdGF0dXMkKTtcbiAgICBjb25zdCBtZWRpYVN0cmVhbSA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5tZWRpYVN0cmVhbSQpO1xuICAgIGNvbnN0IHNlbGVjdGVkRGV2aWNlID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLnNlbGVjdGVkRGV2aWNlJCk7XG4gICAgY29uc3QgZGV2aWNlcyA9IHVzZU9ic2VydmFibGVWYWx1ZShkZXZpY2VzJCwgRU1QVFlfREVWSUNFU19BUlJBWSk7XG4gICAgY29uc3QgaGFzQnJvd3NlclBlcm1pc3Npb24gPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuaGFzQnJvd3NlclBlcm1pc3Npb24kKTtcbiAgICBjb25zdCBpc1NwZWFraW5nV2hpbGVNdXRlZCA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5zcGVha2luZ1doaWxlTXV0ZWQkKTtcbiAgICBjb25zdCBpc011dGUgPSBzdGF0dXMgIT09ICdlbmFibGVkJztcbiAgICBjb25zdCBvcHRpbWlzdGljSXNNdXRlID0gb3B0aW1pc3RpY1N0YXR1cyAhPT0gJ2VuYWJsZWQnO1xuICAgIHJldHVybiB7XG4gICAgICAgIG1pY3JvcGhvbmUsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgb3B0aW1pc3RpY1N0YXR1cyxcbiAgICAgICAgaXNFbmFibGVkOiBzdGF0dXMgPT09ICdlbmFibGVkJyxcbiAgICAgICAgbWVkaWFTdHJlYW0sXG4gICAgICAgIGRldmljZXMsXG4gICAgICAgIHNlbGVjdGVkRGV2aWNlLFxuICAgICAgICBoYXNCcm93c2VyUGVybWlzc2lvbixcbiAgICAgICAgaXNTcGVha2luZ1doaWxlTXV0ZWQsXG4gICAgICAgIGlzTXV0ZSxcbiAgICAgICAgb3B0aW1pc3RpY0lzTXV0ZSxcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgc3BlYWtlciBzdGF0ZSBvZiB0aGUgY3VycmVudCBjYWxsLlxuICpcbiAqIE5vdGU6IFRoaXMgaG9vayBpcyBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZVxuICovXG5jb25zdCB1c2VTcGVha2VyU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgZmVhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZS4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vZ2V0c3RyZWFtLmlvL3ZpZGVvL2RvY3MvcmVhY3RuYXRpdmUvY29yZS9jYW1lcmEtYW5kLW1pY3JvcGhvbmUvI3NwZWFrZXItbWFuYWdlbWVudCBmb3IgbW9yZSBkZXRhaWxzJyk7XG4gICAgfVxuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyBzcGVha2VyIH0gPSBjYWxsO1xuICAgIGNvbnN0IGRldmljZXMkID0gdXNlTWVtbygoKSA9PiBzcGVha2VyLmxpc3REZXZpY2VzKCksIFtzcGVha2VyXSk7XG4gICAgY29uc3QgZGV2aWNlcyA9IHVzZU9ic2VydmFibGVWYWx1ZShkZXZpY2VzJCwgRU1QVFlfREVWSUNFU19BUlJBWSk7XG4gICAgY29uc3Qgc2VsZWN0ZWREZXZpY2UgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3BlYWtlci5zdGF0ZS5zZWxlY3RlZERldmljZSQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNwZWFrZXIsXG4gICAgICAgIGRldmljZXMsXG4gICAgICAgIHNlbGVjdGVkRGV2aWNlLFxuICAgICAgICBpc0RldmljZVNlbGVjdGlvblN1cHBvcnRlZDogc3BlYWtlci5zdGF0ZS5pc0RldmljZVNlbGVjdGlvblN1cHBvcnRlZCxcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgU2NyZWVuIFNoYXJlIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKi9cbmNvbnN0IHVzZVNjcmVlblNoYXJlU3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHNjcmVlblNoYXJlIH0gPSBjYWxsO1xuICAgIGNvbnN0IHN0YXR1cyA9IHVzZU9ic2VydmFibGVWYWx1ZShzY3JlZW5TaGFyZS5zdGF0ZS5zdGF0dXMkKTtcbiAgICBjb25zdCBwZW5kaW5nU3RhdHVzID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHNjcmVlblNoYXJlLnN0YXRlLm9wdGltaXN0aWNTdGF0dXMkKTtcbiAgICBjb25zdCBtZWRpYVN0cmVhbSA9IHVzZU9ic2VydmFibGVWYWx1ZShzY3JlZW5TaGFyZS5zdGF0ZS5tZWRpYVN0cmVhbSQpO1xuICAgIGNvbnN0IGlzTXV0ZSA9IHN0YXR1cyAhPT0gJ2VuYWJsZWQnO1xuICAgIGNvbnN0IG9wdGltaXN0aWNTdGF0dXMgPSBwZW5kaW5nU3RhdHVzID8/IHN0YXR1cztcbiAgICBjb25zdCBvcHRpbWlzdGljSXNNdXRlID0gb3B0aW1pc3RpY1N0YXR1cyAhPT0gJ2VuYWJsZWQnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNjcmVlblNoYXJlLFxuICAgICAgICBtZWRpYVN0cmVhbSxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBvcHRpbWlzdGljU3RhdHVzLFxuICAgICAgICBpc011dGUsXG4gICAgICAgIG9wdGltaXN0aWNJc011dGUsXG4gICAgfTtcbn07XG5cbnZhciBDYWxsU3RhdGVIb29rcyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgdXNlQW5vbnltb3VzUGFydGljaXBhbnRDb3VudDogdXNlQW5vbnltb3VzUGFydGljaXBhbnRDb3VudCxcbiAgICB1c2VDYWxsQmxvY2tlZFVzZXJJZHM6IHVzZUNhbGxCbG9ja2VkVXNlcklkcyxcbiAgICB1c2VDYWxsQ2FsbGluZ1N0YXRlOiB1c2VDYWxsQ2FsbGluZ1N0YXRlLFxuICAgIHVzZUNhbGxDcmVhdGVkQXQ6IHVzZUNhbGxDcmVhdGVkQXQsXG4gICAgdXNlQ2FsbENyZWF0ZWRCeTogdXNlQ2FsbENyZWF0ZWRCeSxcbiAgICB1c2VDYWxsQ3VzdG9tRGF0YTogdXNlQ2FsbEN1c3RvbURhdGEsXG4gICAgdXNlQ2FsbEVncmVzczogdXNlQ2FsbEVncmVzcyxcbiAgICB1c2VDYWxsRW5kZWRBdDogdXNlQ2FsbEVuZGVkQXQsXG4gICAgdXNlQ2FsbEVuZGVkQnk6IHVzZUNhbGxFbmRlZEJ5LFxuICAgIHVzZUNhbGxJbmdyZXNzOiB1c2VDYWxsSW5ncmVzcyxcbiAgICB1c2VDYWxsTWVtYmVyczogdXNlQ2FsbE1lbWJlcnMsXG4gICAgdXNlQ2FsbFNlc3Npb246IHVzZUNhbGxTZXNzaW9uLFxuICAgIHVzZUNhbGxTZXR0aW5nczogdXNlQ2FsbFNldHRpbmdzLFxuICAgIHVzZUNhbGxTdGFydGVkQXQ6IHVzZUNhbGxTdGFydGVkQXQsXG4gICAgdXNlQ2FsbFN0YXJ0c0F0OiB1c2VDYWxsU3RhcnRzQXQsXG4gICAgdXNlQ2FsbFN0YXRlOiB1c2VDYWxsU3RhdGUsXG4gICAgdXNlQ2FsbFN0YXRzUmVwb3J0OiB1c2VDYWxsU3RhdHNSZXBvcnQsXG4gICAgdXNlQ2FsbFRodW1ibmFpbDogdXNlQ2FsbFRodW1ibmFpbCxcbiAgICB1c2VDYWxsVXBkYXRlZEF0OiB1c2VDYWxsVXBkYXRlZEF0LFxuICAgIHVzZUNhbWVyYVN0YXRlOiB1c2VDYW1lcmFTdGF0ZSxcbiAgICB1c2VEb21pbmFudFNwZWFrZXI6IHVzZURvbWluYW50U3BlYWtlcixcbiAgICB1c2VIYXNPbmdvaW5nU2NyZWVuU2hhcmU6IHVzZUhhc09uZ29pbmdTY3JlZW5TaGFyZSxcbiAgICB1c2VIYXNQZXJtaXNzaW9uczogdXNlSGFzUGVybWlzc2lvbnMsXG4gICAgdXNlSXNDYWxsSExTQnJvYWRjYXN0aW5nSW5Qcm9ncmVzczogdXNlSXNDYWxsSExTQnJvYWRjYXN0aW5nSW5Qcm9ncmVzcyxcbiAgICB1c2VJc0NhbGxMaXZlOiB1c2VJc0NhbGxMaXZlLFxuICAgIHVzZUlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3M6IHVzZUlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MsXG4gICAgdXNlSXNDYWxsVHJhbnNjcmliaW5nSW5Qcm9ncmVzczogdXNlSXNDYWxsVHJhbnNjcmliaW5nSW5Qcm9ncmVzcyxcbiAgICB1c2VMb2NhbFBhcnRpY2lwYW50OiB1c2VMb2NhbFBhcnRpY2lwYW50LFxuICAgIHVzZU1pY3JvcGhvbmVTdGF0ZTogdXNlTWljcm9waG9uZVN0YXRlLFxuICAgIHVzZU93bkNhcGFiaWxpdGllczogdXNlT3duQ2FwYWJpbGl0aWVzLFxuICAgIHVzZVBhcnRpY2lwYW50Q291bnQ6IHVzZVBhcnRpY2lwYW50Q291bnQsXG4gICAgdXNlUGFydGljaXBhbnRzOiB1c2VQYXJ0aWNpcGFudHMsXG4gICAgdXNlUmVtb3RlUGFydGljaXBhbnRzOiB1c2VSZW1vdGVQYXJ0aWNpcGFudHMsXG4gICAgdXNlU2NyZWVuU2hhcmVTdGF0ZTogdXNlU2NyZWVuU2hhcmVTdGF0ZSxcbiAgICB1c2VTcGVha2VyU3RhdGU6IHVzZVNwZWFrZXJTdGF0ZVxufSk7XG5cbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGFjY2VzcyB0byBjbGllbnQncyBzdGF0ZSBzdG9yZS5cbiAqL1xuY29uc3QgdXNlU3RvcmUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2xpZW50ID0gdXNlU3RyZWFtVmlkZW9DbGllbnQoKTtcbiAgICBpZiAoIWNsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0cmVhbVZpZGVvQ2xpZW50IGlzbid0IGluaXRpYWxpemVkIG9yIHRoaXMgaG9vayBpcyBjYWxsZWQgb3V0c2lkZSBvZiA8U3RyZWFtVmlkZW8+IGNvbnRleHQuYCk7XG4gICAgfVxuICAgIHJldHVybiBjbGllbnQuc3RhdGU7XG59O1xuLyoqXG4gKiBVdGlsaXR5IGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBub3RpZmljYXRpb25zIGFib3V0IGNyZWF0ZWQgY2FsbHMuXG4gKiBJbiB0aGUgcmluZyBjYWxsIHNldHRpbmdzLCB0aGVzZSBjYWxscyBjYW4gYmUgb3V0Z29pbmcgKEkgaGF2ZSBjYWxsZWQgc29tZWJvZHkpXG4gKiBvciBpbmNvbWluZyAoc29tZWJvZHkgaGFzIGNhbGxlZCBtZSkuXG4gKlxuICogQGNhdGVnb3J5IENsaWVudCBTdGF0ZVxuICovXG5jb25zdCB1c2VDYWxscyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNhbGxzJCB9ID0gdXNlU3RvcmUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGNhbGxzJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvbm5lY3RlZCB1c2VyLlxuICpcbiAqIEBjYXRlZ29yeSBDbGllbnQgU3RhdGVcbiAqL1xuY29uc3QgdXNlQ29ubmVjdGVkVXNlciA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNvbm5lY3RlZFVzZXIkIH0gPSB1c2VTdG9yZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoY29ubmVjdGVkVXNlciQpO1xufTtcblxuLyoqXG4gKiBBIGhvb2stYWxpa2UgZnVuY3Rpb24gdGhhdCBleHBvc2VzIGFsbCBjYWxsIHN0YXRlIGhvb2tzLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUNhbGxTdGF0ZUhvb2tzID0gKCkgPT4gQ2FsbFN0YXRlSG9va3M7XG5cbmNvbnN0IFJlc3RyaWN0ZWQgPSAoeyBjYW5SZXF1ZXN0T25seSwgaGFzUGVybWlzc2lvbnNPbmx5LCByZXF1aXJlZEdyYW50cywgcmVxdWlyZUFsbCA9IHRydWUsIGNoaWxkcmVuLCB9KSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHVzZUNhbGxTZXR0aW5ncywgdXNlT3duQ2FwYWJpbGl0aWVzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IG93bkNhcGFiaWxpdGllcyA9IHVzZU93bkNhcGFiaWxpdGllcygpO1xuICAgIGNvbnN0IHNldHRpbmdzID0gdXNlQ2FsbFNldHRpbmdzKCk7XG4gICAgY29uc3QgaGFzUGVybWlzc2lvbnMgPSByZXF1aXJlZEdyYW50c1tyZXF1aXJlQWxsID8gJ2V2ZXJ5JyA6ICdzb21lJ10oKGNhcGFiaWxpdHkpID0+IG93bkNhcGFiaWxpdGllcz8uaW5jbHVkZXMoY2FwYWJpbGl0eSkpO1xuICAgIGlmIChoYXNQZXJtaXNzaW9uc09ubHkpXG4gICAgICAgIHJldHVybiBoYXNQZXJtaXNzaW9ucyA/IGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjogY2hpbGRyZW4gfSkgOiBudWxsO1xuICAgIGNvbnN0IGNhblJlcXVlc3QgPSByZXF1aXJlZEdyYW50cy5zb21lKChjYXBhYmlsaXR5KSA9PiBjYWxsPy5wZXJtaXNzaW9uc0NvbnRleHQuY2FuUmVxdWVzdChjYXBhYmlsaXR5LCBzZXR0aW5ncykpO1xuICAgIGlmIChjYW5SZXF1ZXN0T25seSlcbiAgICAgICAgcmV0dXJuIGNhblJlcXVlc3QgPyBqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IGNoaWxkcmVuIH0pIDogbnVsbDtcbiAgICBpZiAoaGFzUGVybWlzc2lvbnMgfHwgY2FuUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjogY2hpbGRyZW4gfSk7XG4gICAgcmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnQgeyBERUZBVUxUX0xBTkdVQUdFLCBERUZBVUxUX05BTUVTUEFDRSwgUmVzdHJpY3RlZCwgU3RyZWFtQ2FsbFByb3ZpZGVyLCBTdHJlYW1JMThuLCBTdHJlYW1JMThuUHJvdmlkZXIsIFN0cmVhbVZpZGVvUHJvdmlkZXIsIGRlZmF1bHRUcmFuc2xhdGlvbkZ1bmN0aW9uLCBtYXBUb1JlZ2lzdHJ5LCB1c2VDYWxsLCB1c2VDYWxsU3RhdGVIb29rcywgdXNlQ2FsbHMsIHVzZUNvbm5lY3RlZFVzZXIsIHVzZUNyZWF0ZUkxOG4sIHVzZUkxOG4sIHVzZVN0b3JlLCB1c2VTdHJlYW1WaWRlb0NsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-react-bindings/dist/index.es.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stream-io/video-react-sdk/dist/index.es.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-sdk/dist/index.es.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AcceptCallButton: () => (/* binding */ AcceptCallButton),\n/* harmony export */   Audio: () => (/* binding */ Audio),\n/* harmony export */   AudioSettingsRequestDefaultDeviceEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.AudioSettingsRequestDefaultDeviceEnum),\n/* harmony export */   AudioSettingsResponseDefaultDeviceEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.AudioSettingsResponseDefaultDeviceEnum),\n/* harmony export */   Avatar: () => (/* binding */ Avatar),\n/* harmony export */   AvatarFallback: () => (/* binding */ AvatarFallback),\n/* harmony export */   AxiosError: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.AxiosError),\n/* harmony export */   BackgroundFiltersProvider: () => (/* binding */ BackgroundFiltersProvider),\n/* harmony export */   BaseVideo: () => (/* binding */ BaseVideo),\n/* harmony export */   BlockListOptionsBehaviorEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.BlockListOptionsBehaviorEnum),\n/* harmony export */   Browsers: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Browsers),\n/* harmony export */   Call: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Call),\n/* harmony export */   CallControls: () => (/* binding */ CallControls),\n/* harmony export */   CallParticipantListing: () => (/* binding */ CallParticipantListing),\n/* harmony export */   CallParticipantListingItem: () => (/* binding */ CallParticipantListingItem),\n/* harmony export */   CallParticipantsList: () => (/* binding */ CallParticipantsList),\n/* harmony export */   CallPreview: () => (/* binding */ CallPreview),\n/* harmony export */   CallRecordingList: () => (/* binding */ CallRecordingList),\n/* harmony export */   CallRecordingListHeader: () => (/* binding */ CallRecordingListHeader),\n/* harmony export */   CallRecordingListItem: () => (/* binding */ CallRecordingListItem),\n/* harmony export */   CallState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallState),\n/* harmony export */   CallStats: () => (/* binding */ CallStats),\n/* harmony export */   CallStatsButton: () => (/* binding */ CallStatsButton),\n/* harmony export */   CallType: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallType),\n/* harmony export */   CallTypes: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallTypes),\n/* harmony export */   CallingState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState),\n/* harmony export */   CameraManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CameraManager),\n/* harmony export */   CameraManagerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CameraManagerState),\n/* harmony export */   CancelCallButton: () => (/* binding */ CancelCallButton),\n/* harmony export */   CancelCallConfirmButton: () => (/* binding */ CancelCallConfirmButton),\n/* harmony export */   ChannelConfigWithInfoAutomodBehaviorEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ChannelConfigWithInfoAutomodBehaviorEnum),\n/* harmony export */   ChannelConfigWithInfoAutomodEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ChannelConfigWithInfoAutomodEnum),\n/* harmony export */   ChannelConfigWithInfoBlocklistBehaviorEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ChannelConfigWithInfoBlocklistBehaviorEnum),\n/* harmony export */   CompositeButton: () => (/* binding */ CompositeButton),\n/* harmony export */   CreateDeviceRequestPushProviderEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CreateDeviceRequestPushProviderEnum),\n/* harmony export */   DEFAULT_LANGUAGE: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_LANGUAGE),\n/* harmony export */   DEFAULT_NAMESPACE: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_NAMESPACE),\n/* harmony export */   DebounceType: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.DebounceType),\n/* harmony export */   DefaultParticipantViewUI: () => (/* binding */ DefaultParticipantViewUI),\n/* harmony export */   DefaultReactionsMenu: () => (/* binding */ DefaultReactionsMenu),\n/* harmony export */   DefaultScreenShareOverlay: () => (/* binding */ DefaultScreenShareOverlay),\n/* harmony export */   DefaultVideoPlaceholder: () => (/* binding */ DefaultVideoPlaceholder),\n/* harmony export */   DeviceSelector: () => (/* binding */ DeviceSelector),\n/* harmony export */   DeviceSelectorAudioInput: () => (/* binding */ DeviceSelectorAudioInput),\n/* harmony export */   DeviceSelectorAudioOutput: () => (/* binding */ DeviceSelectorAudioOutput),\n/* harmony export */   DeviceSelectorVideo: () => (/* binding */ DeviceSelectorVideo),\n/* harmony export */   DeviceSettings: () => (/* binding */ DeviceSettings),\n/* harmony export */   DropDownSelect: () => (/* binding */ DropDownSelect),\n/* harmony export */   DropDownSelectOption: () => (/* binding */ DropDownSelectOption),\n/* harmony export */   DynascaleManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.DynascaleManager),\n/* harmony export */   EmptyCallRecordingListing: () => (/* binding */ EmptyCallRecordingListing),\n/* harmony export */   ErrorFromResponse: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ErrorFromResponse),\n/* harmony export */   GenericMenu: () => (/* binding */ GenericMenu),\n/* harmony export */   GenericMenuButtonItem: () => (/* binding */ GenericMenuButtonItem),\n/* harmony export */   Icon: () => (/* binding */ Icon),\n/* harmony export */   IconButton: () => (/* binding */ IconButton),\n/* harmony export */   InputMediaDeviceManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.InputMediaDeviceManager),\n/* harmony export */   InputMediaDeviceManagerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.InputMediaDeviceManagerState),\n/* harmony export */   LivestreamLayout: () => (/* binding */ LivestreamLayout),\n/* harmony export */   LivestreamPlayer: () => (/* binding */ LivestreamPlayer),\n/* harmony export */   LoadingCallRecordingListing: () => (/* binding */ LoadingCallRecordingListing),\n/* harmony export */   LoadingIndicator: () => (/* binding */ LoadingIndicator),\n/* harmony export */   MenuToggle: () => (/* binding */ MenuToggle),\n/* harmony export */   MenuVisualType: () => (/* binding */ MenuVisualType),\n/* harmony export */   MicrophoneManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.MicrophoneManager),\n/* harmony export */   MicrophoneManagerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.MicrophoneManagerState),\n/* harmony export */   NoiseCancellationProvider: () => (/* binding */ NoiseCancellationProvider),\n/* harmony export */   NoiseCancellationSettingsModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.NoiseCancellationSettingsModeEnum),\n/* harmony export */   Notification: () => (/* binding */ Notification),\n/* harmony export */   OwnCapability: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability),\n/* harmony export */   PaginatedGridLayout: () => (/* binding */ PaginatedGridLayout),\n/* harmony export */   ParticipantActionsContextMenu: () => (/* binding */ ParticipantActionsContextMenu),\n/* harmony export */   ParticipantDetails: () => (/* binding */ ParticipantDetails),\n/* harmony export */   ParticipantView: () => (/* binding */ ParticipantView),\n/* harmony export */   ParticipantViewContext: () => (/* binding */ ParticipantViewContext),\n/* harmony export */   ParticipantsAudio: () => (/* binding */ ParticipantsAudio),\n/* harmony export */   PermissionNotification: () => (/* binding */ PermissionNotification),\n/* harmony export */   PermissionRequestList: () => (/* binding */ PermissionRequestList),\n/* harmony export */   PermissionRequests: () => (/* binding */ PermissionRequests),\n/* harmony export */   ReactionsButton: () => (/* binding */ ReactionsButton),\n/* harmony export */   RecordCallButton: () => (/* binding */ RecordCallButton),\n/* harmony export */   RecordCallConfirmationButton: () => (/* binding */ RecordCallConfirmationButton),\n/* harmony export */   RecordSettingsRequestModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.RecordSettingsRequestModeEnum),\n/* harmony export */   RecordSettingsRequestQualityEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.RecordSettingsRequestQualityEnum),\n/* harmony export */   RecordingInProgressNotification: () => (/* binding */ RecordingInProgressNotification),\n/* harmony export */   Restricted: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted),\n/* harmony export */   RingingCall: () => (/* binding */ RingingCall),\n/* harmony export */   RingingCallControls: () => (/* binding */ RingingCallControls),\n/* harmony export */   RxUtils: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.RxUtils),\n/* harmony export */   ScreenShareButton: () => (/* binding */ ScreenShareButton),\n/* harmony export */   ScreenShareManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ScreenShareManager),\n/* harmony export */   ScreenShareState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ScreenShareState),\n/* harmony export */   SearchInput: () => (/* binding */ SearchInput),\n/* harmony export */   SearchResults: () => (/* binding */ SearchResults),\n/* harmony export */   SfuEvents: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuEvents),\n/* harmony export */   SfuModels: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels),\n/* harmony export */   SpeakerLayout: () => (/* binding */ SpeakerLayout),\n/* harmony export */   SpeakerManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SpeakerManager),\n/* harmony export */   SpeakerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SpeakerState),\n/* harmony export */   SpeakingWhileMutedNotification: () => (/* binding */ SpeakingWhileMutedNotification),\n/* harmony export */   SpeechIndicator: () => (/* binding */ SpeechIndicator),\n/* harmony export */   StatCard: () => (/* binding */ StatCard),\n/* harmony export */   StreamCall: () => (/* binding */ StreamCall),\n/* harmony export */   StreamCallProvider: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamCallProvider),\n/* harmony export */   StreamI18n: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamI18n),\n/* harmony export */   StreamI18nProvider: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamI18nProvider),\n/* harmony export */   StreamSfuClient: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamSfuClient),\n/* harmony export */   StreamTheme: () => (/* binding */ StreamTheme),\n/* harmony export */   StreamVideo: () => (/* binding */ StreamVideo),\n/* harmony export */   StreamVideoClient: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoClient),\n/* harmony export */   StreamVideoProvider: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamVideoProvider),\n/* harmony export */   StreamVideoReadOnlyStateStore: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoReadOnlyStateStore),\n/* harmony export */   StreamVideoWriteableStateStore: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoWriteableStateStore),\n/* harmony export */   TextButton: () => (/* binding */ TextButton),\n/* harmony export */   ToggleAudioOutputButton: () => (/* binding */ ToggleAudioOutputButton),\n/* harmony export */   ToggleAudioPreviewButton: () => (/* binding */ ToggleAudioPreviewButton),\n/* harmony export */   ToggleAudioPublishingButton: () => (/* binding */ ToggleAudioPublishingButton),\n/* harmony export */   ToggleVideoPreviewButton: () => (/* binding */ ToggleVideoPreviewButton),\n/* harmony export */   ToggleVideoPublishingButton: () => (/* binding */ ToggleVideoPublishingButton),\n/* harmony export */   Tooltip: () => (/* binding */ Tooltip),\n/* harmony export */   TranscriptionSettingsRequestModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.TranscriptionSettingsRequestModeEnum),\n/* harmony export */   TranscriptionSettingsResponseModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.TranscriptionSettingsResponseModeEnum),\n/* harmony export */   Video: () => (/* binding */ Video$1),\n/* harmony export */   VideoPreview: () => (/* binding */ VideoPreview),\n/* harmony export */   VideoSettingsRequestCameraFacingEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VideoSettingsRequestCameraFacingEnum),\n/* harmony export */   VideoSettingsResponseCameraFacingEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VideoSettingsResponseCameraFacingEnum),\n/* harmony export */   ViewportTracker: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ViewportTracker),\n/* harmony export */   VisibilityState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VisibilityState),\n/* harmony export */   WithTooltip: () => (/* binding */ WithTooltip),\n/* harmony export */   checkIfAudioOutputChangeSupported: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.checkIfAudioOutputChangeSupported),\n/* harmony export */   combineComparators: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.combineComparators),\n/* harmony export */   conditional: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.conditional),\n/* harmony export */   createSoundDetector: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.createSoundDetector),\n/* harmony export */   defaultReactions: () => (/* binding */ defaultReactions),\n/* harmony export */   defaultSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.defaultSortPreset),\n/* harmony export */   defaultTranslationFunction: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.defaultTranslationFunction),\n/* harmony export */   descending: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.descending),\n/* harmony export */   deviceIds$: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.deviceIds$),\n/* harmony export */   disposeOfMediaStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.disposeOfMediaStream),\n/* harmony export */   dominantSpeaker: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.dominantSpeaker),\n/* harmony export */   getAudioBrowserPermission: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioBrowserPermission),\n/* harmony export */   getAudioDevices: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioDevices),\n/* harmony export */   getAudioOutputDevices: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioOutputDevices),\n/* harmony export */   getAudioStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioStream),\n/* harmony export */   getClientDetails: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getClientDetails),\n/* harmony export */   getDeviceInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getDeviceInfo),\n/* harmony export */   getLogLevel: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getLogLevel),\n/* harmony export */   getLogger: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getLogger),\n/* harmony export */   getOSInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getOSInfo),\n/* harmony export */   getScreenShareStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getScreenShareStream),\n/* harmony export */   getSdkInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getSdkInfo),\n/* harmony export */   getVideoBrowserPermission: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getVideoBrowserPermission),\n/* harmony export */   getVideoDevices: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getVideoDevices),\n/* harmony export */   getVideoStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getVideoStream),\n/* harmony export */   getWebRTCInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getWebRTCInfo),\n/* harmony export */   hasAudio: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasAudio),\n/* harmony export */   hasScreenShare: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShare),\n/* harmony export */   hasScreenShareAudio: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShareAudio),\n/* harmony export */   hasVideo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasVideo),\n/* harmony export */   isPinned: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.isPinned),\n/* harmony export */   livestreamOrAudioRoomSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.livestreamOrAudioRoomSortPreset),\n/* harmony export */   logLevels: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.logLevels),\n/* harmony export */   logToConsole: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.logToConsole),\n/* harmony export */   mapToRegistry: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.mapToRegistry),\n/* harmony export */   name: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.name),\n/* harmony export */   noopComparator: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.noopComparator),\n/* harmony export */   paginatedLayoutSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.paginatedLayoutSortPreset),\n/* harmony export */   pinned: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.pinned),\n/* harmony export */   publishingAudio: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.publishingAudio),\n/* harmony export */   publishingVideo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.publishingVideo),\n/* harmony export */   reactionType: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.reactionType),\n/* harmony export */   role: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.role),\n/* harmony export */   screenSharing: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.screenSharing),\n/* harmony export */   setDeviceInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setDeviceInfo),\n/* harmony export */   setLogLevel: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel),\n/* harmony export */   setLogger: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setLogger),\n/* harmony export */   setOSInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setOSInfo),\n/* harmony export */   setSdkInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setSdkInfo),\n/* harmony export */   setWebRTCInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setWebRTCInfo),\n/* harmony export */   speakerLayoutSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.speakerLayoutSortPreset),\n/* harmony export */   speaking: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.speaking),\n/* harmony export */   translations: () => (/* binding */ translations),\n/* harmony export */   useBackgroundFilters: () => (/* binding */ useBackgroundFilters),\n/* harmony export */   useCall: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall),\n/* harmony export */   useCallStateHooks: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks),\n/* harmony export */   useCalls: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCalls),\n/* harmony export */   useConnectedUser: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useConnectedUser),\n/* harmony export */   useCreateI18n: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCreateI18n),\n/* harmony export */   useHorizontalScrollPosition: () => (/* binding */ useHorizontalScrollPosition),\n/* harmony export */   useI18n: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n),\n/* harmony export */   useMenuContext: () => (/* binding */ useMenuContext),\n/* harmony export */   useNoiseCancellation: () => (/* binding */ useNoiseCancellation),\n/* harmony export */   useParticipantViewContext: () => (/* binding */ useParticipantViewContext),\n/* harmony export */   usePersistedDevicePreferences: () => (/* binding */ usePersistedDevicePreferences),\n/* harmony export */   useRequestPermission: () => (/* binding */ useRequestPermission),\n/* harmony export */   useStore: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useStore),\n/* harmony export */   useStreamVideoClient: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useStreamVideoClient),\n/* harmony export */   useTrackElementVisibility: () => (/* binding */ useTrackElementVisibility),\n/* harmony export */   useVerticalScrollPosition: () => (/* binding */ useVerticalScrollPosition)\n/* harmony export */ });\n/* harmony import */ var _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stream-io/video-client */ \"(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js\");\n/* harmony import */ var _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stream-io/video-react-bindings */ \"(ssr)/./node_modules/@stream-io/video-react-bindings/dist/index.es.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _stream_io_video_filters_web__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stream-io/video-filters-web */ \"(ssr)/./node_modules/@stream-io/video-filters-web/dist/index.es.js\");\n/* harmony import */ var _floating_ui_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @floating-ui/react */ \"(ssr)/./node_modules/@floating-ui/react/dist/floating-ui.react.mjs\");\n/* harmony import */ var _floating_ui_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @floating-ui/react */ \"(ssr)/./node_modules/@floating-ui/react-dom/dist/floating-ui.react-dom.mjs\");\n/* harmony import */ var _floating_ui_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @floating-ui/react */ \"(ssr)/./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nconst Audio = ({ participant, trackType = 'audioTrack', ...rest }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const [audioElement, setAudioElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const { userId, sessionId } = participant;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !audioElement)\n            return;\n        const cleanup = call.bindAudioElement(audioElement, sessionId, trackType);\n        return () => {\n            cleanup?.();\n        };\n    }, [call, sessionId, audioElement, trackType]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"audio\", { autoPlay: true, ...rest, ref: setAudioElement, \"data-user-id\": userId, \"data-session-id\": sessionId, \"data-track-type\": trackType }));\n};\nAudio.displayName = 'Audio';\n\nconst ParticipantsAudio = (props) => {\n    const { participants, audioProps } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: participants.map((participant) => {\n            if (participant.isLocalParticipant)\n                return null;\n            const { audioStream, screenShareAudioStream, sessionId } = participant;\n            const hasAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasAudio)(participant);\n            const audioTrackElement = hasAudioTrack && audioStream && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { ...audioProps, trackType: \"audioTrack\", participant: participant }));\n            const hasScreenShareAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShareAudio)(participant);\n            const screenShareAudioTrackElement = hasScreenShareAudioTrack &&\n                screenShareAudioStream && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { ...audioProps, trackType: \"screenShareAudioTrack\", participant: participant }));\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [audioTrackElement, screenShareAudioTrackElement] }, sessionId));\n        }) }));\n};\nParticipantsAudio.displayName = 'ParticipantsAudio';\n\nconst ParticipantViewContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nconst useParticipantViewContext = () => (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ParticipantViewContext);\n\nconst Avatar = ({ imageSrc, name, style, className, ...rest }) => {\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(!imageSrc || error) && name && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(AvatarFallback, { className: className, style: style, names: [name] })), imageSrc && !error && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { onError: () => setError(true), alt: \"avatar\", className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__avatar', className), src: imageSrc, style: style, ...rest }))] }));\n};\nconst AvatarFallback = ({ className, names, style, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__avatar--initials-fallback', className), style: style, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { children: [names[0][0], names[1]?.[0]] }) }));\n};\n\n/**\n * The context for the background filters.\n */\nconst BackgroundFiltersContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\n/**\n * A hook to access the background filters context API.\n */\nconst useBackgroundFilters = () => {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BackgroundFiltersContext);\n    if (!context) {\n        throw new Error('useBackgroundFilters must be used within a BackgroundFiltersProvider');\n    }\n    return context;\n};\n/**\n * A provider component that enables the use of background filters in your app.\n *\n * Please make sure you have the `@stream-io/video-filters-web` package installed\n * in your project before using this component.\n */\nconst BackgroundFiltersProvider = (props) => {\n    const { children, backgroundImages = [], backgroundFilter: bgFilterFromProps = undefined, backgroundImage: bgImageFromProps = undefined, backgroundBlurLevel: bgBlurLevelFromProps = 'high', tfFilePath, modelFilePath, basePath, onError, } = props;\n    const [backgroundFilter, setBackgroundFilter] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(bgFilterFromProps);\n    const [backgroundImage, setBackgroundImage] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(bgImageFromProps);\n    const [backgroundBlurLevel, setBackgroundBlurLevel] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(bgBlurLevelFromProps);\n    const applyBackgroundImageFilter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((imageUrl) => {\n        setBackgroundFilter('image');\n        setBackgroundImage(imageUrl);\n    }, []);\n    const applyBackgroundBlurFilter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((blurLevel = 'high') => {\n        setBackgroundFilter('blur');\n        setBackgroundBlurLevel(blurLevel);\n    }, []);\n    const disableBackgroundFilter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        setBackgroundFilter(undefined);\n        setBackgroundImage(undefined);\n        setBackgroundBlurLevel('high');\n    }, []);\n    const [isSupported, setIsSupported] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        (0,_stream_io_video_filters_web__WEBPACK_IMPORTED_MODULE_6__.isPlatformSupported)().then(setIsSupported);\n    }, []);\n    const [tfLite, setTfLite] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        // don't try to load TFLite if the platform is not supported\n        if (!isSupported)\n            return;\n        (0,_stream_io_video_filters_web__WEBPACK_IMPORTED_MODULE_6__.loadTFLite)({ basePath, modelFilePath, tfFilePath })\n            .then(setTfLite)\n            .catch((err) => console.error('Failed to load TFLite', err));\n    }, [basePath, isSupported, modelFilePath, tfFilePath]);\n    const handleError = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((error) => {\n        (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getLogger)(['filters'])('warn', 'Filter encountered an error and will be disabled');\n        disableBackgroundFilter();\n        onError?.(error);\n    }, [disableBackgroundFilter, onError]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(BackgroundFiltersContext.Provider, { value: {\n            isSupported,\n            isReady: !!tfLite,\n            backgroundImage,\n            backgroundBlurLevel,\n            backgroundFilter,\n            disableBackgroundFilter,\n            applyBackgroundBlurFilter,\n            applyBackgroundImageFilter,\n            backgroundImages,\n            tfFilePath,\n            modelFilePath,\n            basePath,\n            onError: handleError,\n        }, children: [children, tfLite && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BackgroundFilters, { tfLite: tfLite })] }));\n};\nconst BackgroundFilters = (props) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { children, start } = useRenderer(props.tfLite);\n    const { backgroundFilter, onError } = useBackgroundFilters();\n    const handleErrorRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(undefined);\n    handleErrorRef.current = onError;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !backgroundFilter)\n            return;\n        const { unregister } = call.camera.registerFilter((ms) => start(ms, (error) => handleErrorRef.current?.(error)));\n        return () => {\n            unregister();\n        };\n    }, [backgroundFilter, call, start]);\n    return children;\n};\nconst useRenderer = (tfLite) => {\n    const { backgroundFilter, backgroundBlurLevel, backgroundImage } = useBackgroundFilters();\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const bgImageRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const [videoSize, setVideoSize] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n        width: 1920,\n        height: 1080,\n    });\n    const start = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((ms, onError) => {\n        let outputStream;\n        let renderer;\n        const output = new Promise((resolve, reject) => {\n            if (!backgroundFilter) {\n                reject(new Error('No filter specified'));\n                return;\n            }\n            const videoEl = videoRef.current;\n            const canvasEl = canvasRef.current;\n            const bgImageEl = bgImageRef.current;\n            if (!videoEl || !canvasEl || (backgroundImage && !bgImageEl)) {\n                // You should start renderer in effect or event handlers\n                reject(new Error('Renderer started before elements are ready'));\n                return;\n            }\n            videoEl.srcObject = ms;\n            videoEl.play().then(() => {\n                const [track] = ms.getVideoTracks();\n                if (!track) {\n                    reject(new Error('No video tracks in input media stream'));\n                    return;\n                }\n                const trackSettings = track.getSettings();\n                (0,react_dom__WEBPACK_IMPORTED_MODULE_5__.flushSync)(() => setVideoSize({\n                    width: trackSettings.width ?? 0,\n                    height: trackSettings.height ?? 0,\n                }));\n                renderer = (0,_stream_io_video_filters_web__WEBPACK_IMPORTED_MODULE_6__.createRenderer)(tfLite, videoEl, canvasEl, {\n                    backgroundFilter,\n                    backgroundBlurLevel,\n                    backgroundImage: bgImageEl ?? undefined,\n                }, onError);\n                outputStream = canvasEl.captureStream();\n                resolve(outputStream);\n            }, () => {\n                reject(new Error('Could not play the source video stream'));\n            });\n        });\n        return {\n            output,\n            stop: () => {\n                renderer?.dispose();\n                videoRef.current && (videoRef.current.srcObject = null);\n                outputStream && (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.disposeOfMediaStream)(outputStream);\n            },\n        };\n    }, [backgroundBlurLevel, backgroundFilter, backgroundImage, tfLite]);\n    const children = ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__background-filters\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"video\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__background-filters__video', videoSize.height > videoSize.width &&\n                    'str-video__background-filters__video--tall'), ref: videoRef, playsInline: true, muted: true, controls: false, ...videoSize }), backgroundImage && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { className: \"str-video__background-filters__background-image\", alt: \"Background\", ref: bgImageRef, src: backgroundImage, ...videoSize })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"canvas\", { className: \"str-video__background-filters__target-canvas\", ...videoSize, ref: canvasRef })] }));\n    return {\n        start,\n        children,\n    };\n};\n\nconst useFloatingUIPreset = ({ middleware = [], placement, strategy, offset: offsetInPx = 10, }) => {\n    const { refs, x, y, update, elements: { domReference, floating }, context, } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useFloating)({\n        placement,\n        strategy,\n        middleware: [\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_8__.offset)(offsetInPx),\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_8__.shift)(),\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_8__.flip)(),\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_8__.size)({\n                padding: 10,\n                apply: ({ availableHeight, elements }) => {\n                    Object.assign(elements.floating.style, {\n                        maxHeight: `${availableHeight}px`,\n                    });\n                },\n            }),\n            ...middleware,\n        ],\n    });\n    // handle window resizing\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!domReference || !floating)\n            return;\n        const cleanup = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_9__.autoUpdate)(domReference, floating, update);\n        return () => cleanup();\n    }, [domReference, floating, update]);\n    return { refs, x, y, domReference, floating, strategy, context };\n};\n\nconst defaultDevice = 'default';\n/**\n * This hook will persist the device settings to local storage.\n *\n * @param key the key to use for local storage.\n */\nconst usePersistDevicePreferences = (key) => {\n    const { useMicrophoneState, useCameraState, useSpeakerState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const mic = useMicrophoneState();\n    const camera = useCameraState();\n    const speaker = useSpeakerState();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call)\n            return;\n        if (call.state.callingState === _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.LEFT)\n            return;\n        try {\n            const preferences = {\n                mic: {\n                    selectedDeviceId: mic.selectedDevice || defaultDevice,\n                    muted: mic.isMute,\n                },\n                camera: {\n                    selectedDeviceId: camera.selectedDevice || defaultDevice,\n                    muted: camera.isMute,\n                },\n                speaker: {\n                    selectedDeviceId: speaker.selectedDevice || defaultDevice,\n                    muted: false,\n                },\n            };\n            window.localStorage.setItem(key, JSON.stringify(preferences));\n        }\n        catch (err) {\n            console.warn('Failed to save device preferences', err);\n        }\n    }, [\n        call,\n        camera.isMute,\n        camera.selectedDevice,\n        key,\n        mic.isMute,\n        mic.selectedDevice,\n        speaker.selectedDevice,\n    ]);\n};\n/**\n * This hook will apply the device settings from local storage.\n *\n * @param key the key to use for local storage.\n */\nconst useApplyDevicePreferences = (key) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call)\n            return;\n        if (call.state.callingState === _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.LEFT)\n            return;\n        const apply = async () => {\n            const initMic = async (setting) => {\n                await call.microphone.select(parseDeviceId(setting.selectedDeviceId));\n                if (setting.muted) {\n                    await call.microphone.disable();\n                }\n                else {\n                    await call.microphone.enable();\n                }\n            };\n            const initCamera = async (setting) => {\n                await call.camera.select(parseDeviceId(setting.selectedDeviceId));\n                if (setting.muted) {\n                    await call.camera.disable();\n                }\n                else {\n                    await call.camera.enable();\n                }\n            };\n            const initSpeaker = (setting) => {\n                call.speaker.select(parseDeviceId(setting.selectedDeviceId) ?? '');\n            };\n            let preferences = null;\n            try {\n                preferences = JSON.parse(window.localStorage.getItem(key));\n            }\n            catch (err) {\n                console.warn('Failed to load device preferences', err);\n            }\n            if (preferences) {\n                await initMic(preferences.mic);\n                await initCamera(preferences.camera);\n                initSpeaker(preferences.speaker);\n            }\n        };\n        apply().catch((err) => {\n            console.warn('Failed to apply device preferences', err);\n        });\n    }, [call, key]);\n};\n/**\n * This hook will apply and persist the device preferences from local storage.\n *\n * @param key the key to use for local storage.\n */\nconst usePersistedDevicePreferences = (key = '@stream-io/device-preferences') => {\n    useApplyDevicePreferences(key);\n    usePersistDevicePreferences(key);\n};\nconst parseDeviceId = (deviceId) => deviceId !== defaultDevice ? deviceId : undefined;\n\nconst SCROLL_THRESHOLD = 10;\n/**\n * Hook which observes element's scroll position and returns text value based on the\n * position of the scrollbar (`top`, `bottom`, `between` and `null` if no scrollbar is available)\n */\nconst useVerticalScrollPosition = (scrollElement, threshold = SCROLL_THRESHOLD) => {\n    const [scrollPosition, setScrollPosition] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!scrollElement)\n            return;\n        const scrollHandler = () => {\n            const element = scrollElement;\n            const hasVerticalScrollbar = element.scrollHeight > element.clientHeight;\n            if (!hasVerticalScrollbar)\n                return setScrollPosition(null);\n            const isAtTheTop = element.scrollTop <= threshold;\n            if (isAtTheTop)\n                return setScrollPosition('top');\n            const isAtTheBottom = Math.abs(element.scrollHeight - element.scrollTop - element.clientHeight) <= threshold;\n            if (isAtTheBottom)\n                return setScrollPosition('bottom');\n            setScrollPosition('between');\n        };\n        const resizeObserver = new ResizeObserver(scrollHandler);\n        resizeObserver.observe(scrollElement);\n        scrollElement.addEventListener('scroll', scrollHandler);\n        return () => {\n            scrollElement.removeEventListener('scroll', scrollHandler);\n            resizeObserver.disconnect();\n        };\n    }, [scrollElement, threshold]);\n    return scrollPosition;\n};\nconst useHorizontalScrollPosition = (scrollElement, threshold = SCROLL_THRESHOLD) => {\n    const [scrollPosition, setScrollPosition] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!scrollElement)\n            return;\n        const scrollHandler = () => {\n            const element = scrollElement;\n            const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;\n            if (!hasHorizontalScrollbar)\n                return setScrollPosition(null);\n            const isAtTheStart = element.scrollLeft <= threshold;\n            if (isAtTheStart)\n                return setScrollPosition('start');\n            const isAtTheEnd = Math.abs(element.scrollWidth - element.scrollLeft - element.clientWidth) <= threshold;\n            if (isAtTheEnd)\n                return setScrollPosition('end');\n            setScrollPosition('between');\n        };\n        const resizeObserver = new ResizeObserver(scrollHandler);\n        resizeObserver.observe(scrollElement);\n        scrollElement.addEventListener('scroll', scrollHandler);\n        return () => {\n            scrollElement.removeEventListener('scroll', scrollHandler);\n            resizeObserver.disconnect();\n        };\n    }, [scrollElement, threshold]);\n    return scrollPosition;\n};\n\nconst useToggleCallRecording = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useIsCallRecordingInProgress } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const isCallRecordingInProgress = useIsCallRecordingInProgress();\n    const [isAwaitingResponse, setIsAwaitingResponse] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    // TODO: add permissions\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        // we wait until call.recording_started/stopped event to flips the\n        // `isCallRecordingInProgress` state variable.\n        // Once the flip happens, we remove the loading indicator\n        setIsAwaitingResponse((isAwaiting) => {\n            if (isAwaiting)\n                return false;\n            return isAwaiting;\n        });\n    }, [isCallRecordingInProgress]);\n    const toggleCallRecording = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async () => {\n        try {\n            setIsAwaitingResponse(true);\n            if (isCallRecordingInProgress) {\n                await call?.stopRecording();\n            }\n            else {\n                await call?.startRecording();\n            }\n        }\n        catch (e) {\n            console.error(`Failed start recording`, e);\n        }\n    }, [call, isCallRecordingInProgress]);\n    return { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress };\n};\n\nconst useRequestPermission = (permission) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const hasPermission = useHasPermissions(permission);\n    const [isAwaitingPermission, setIsAwaitingPermission] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false); // TODO: load with possibly pending state\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const reset = () => setIsAwaitingPermission(false);\n        if (hasPermission)\n            reset();\n    }, [hasPermission]);\n    const requestPermission = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async () => {\n        if (hasPermission)\n            return true;\n        const canRequestPermission = !!call?.permissionsContext.canRequest(permission);\n        if (isAwaitingPermission || !canRequestPermission)\n            return false;\n        setIsAwaitingPermission(true);\n        try {\n            await call?.requestPermissions({\n                permissions: [permission],\n            });\n        }\n        catch (error) {\n            setIsAwaitingPermission(false);\n            throw new Error(`requestPermission failed: ${error}`);\n        }\n        return false;\n    }, [call, hasPermission, isAwaitingPermission, permission]);\n    return {\n        requestPermission,\n        hasPermission,\n        canRequestPermission: !!call?.permissionsContext.canRequest(permission),\n        isAwaitingPermission,\n    };\n};\n\nvar MenuVisualType;\n(function (MenuVisualType) {\n    MenuVisualType[\"PORTAL\"] = \"portal\";\n    MenuVisualType[\"MENU\"] = \"menu\";\n})(MenuVisualType || (MenuVisualType = {}));\n/**\n * Used to provide utility APIs to the components rendered inside the portal.\n */\nconst MenuContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({});\n/**\n * Access to the closes MenuContext.\n */\nconst useMenuContext = () => {\n    return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(MenuContext);\n};\nconst MenuPortal = ({ children, refs, }) => {\n    const portalId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => `str-video-portal-${Math.random().toString(36).substring(2, 9)}`, []);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { id: portalId, className: \"str-video__portal\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.FloatingOverlay, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.FloatingPortal, { id: portalId, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__portal-content\", ref: refs.setFloating, children: children }) }) })] }));\n};\nconst MenuToggle = ({ ToggleButton, placement = 'top-start', strategy = 'absolute', offset, visualType = MenuVisualType.MENU, children, onToggle, }) => {\n    const [menuShown, setMenuShown] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const toggleHandler = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(onToggle);\n    toggleHandler.current = onToggle;\n    const { floating, domReference, refs, x, y } = useFloatingUIPreset({\n        placement,\n        strategy,\n        offset,\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const handleClick = (event) => {\n            if (!floating && domReference?.contains(event.target)) {\n                setMenuShown(true);\n                toggleHandler.current?.(true);\n            }\n            else if (floating && !floating?.contains(event.target)) {\n                setMenuShown(false);\n                toggleHandler.current?.(false);\n            }\n        };\n        const handleKeyDown = (event) => {\n            if (event.key && // key can be undefined in some browsers\n                event.key.toLowerCase() === 'escape' &&\n                !event.altKey &&\n                !event.ctrlKey) {\n                setMenuShown(false);\n                toggleHandler.current?.(false);\n            }\n        };\n        document?.addEventListener('click', handleClick, { capture: true });\n        document?.addEventListener('keydown', handleKeyDown);\n        return () => {\n            document?.removeEventListener('click', handleClick, { capture: true });\n            document?.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [floating, domReference]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [menuShown && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuContext.Provider, { value: { close: () => setMenuShown(false) }, children: visualType === MenuVisualType.PORTAL ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuPortal, { refs: refs, children: children })) : visualType === MenuVisualType.MENU ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__menu-container\", ref: refs.setFloating, style: {\n                        position: strategy,\n                        top: y ?? 0,\n                        left: x ?? 0,\n                        overflowY: 'auto',\n                    }, role: \"menu\", children: children })) : null })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ToggleButton, { menuShown: menuShown, ref: refs.setReference })] }));\n};\n\nconst GenericMenu = ({ children, onItemClick, }) => {\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"ul\", { className: \"str-video__generic-menu\", ref: ref, onClick: (e) => {\n            if (onItemClick &&\n                e.target !== ref.current &&\n                ref.current?.contains(e.target)) {\n                onItemClick(e);\n            }\n        }, children: children }));\n};\nconst GenericMenuButtonItem = ({ children, ...rest }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"li\", { className: \"str-video__generic-menu--item\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { ...rest, children: children }) }));\n};\n\nconst Icon = ({ className, icon }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__icon', icon && `str-video__icon--${icon}`, className) }));\n\nconst IconButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function IconButton(props, ref) {\n    const { icon, enabled, variant, onClick, className, ...rest } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-controls__button', className, {\n            [`str-video__call-controls__button--variant-${variant}`]: variant,\n            'str-video__call-controls__button--enabled': enabled,\n        }), onClick: (e) => {\n            e.preventDefault();\n            onClick?.(e);\n        }, ref: ref, ...rest, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: icon }) }));\n});\n\nconst isComponentType = (elementOrComponent) => {\n    return elementOrComponent === null\n        ? false\n        : !(0,react__WEBPACK_IMPORTED_MODULE_3__.isValidElement)(elementOrComponent);\n};\n\nconst chunk = (array, size) => {\n    const chunkCount = Math.ceil(array.length / size);\n    return Array.from({ length: chunkCount }, (_, index) => array.slice(size * index, size * index + size));\n};\n\nconst applyElementToRef = (ref, element) => {\n    if (!ref)\n        return;\n    if (typeof ref === 'function')\n        return ref(element);\n    ref.current = element;\n};\n\nconst CompositeButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function CompositeButton({ caption, children, className, active, Menu, menuPlacement, menuOffset, title, ToggleMenuButton = DefaultToggleMenuButton, variant, onClick, onMenuToggle, ...restButtonProps }, ref) {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__composite-button', className, {\n            'str-video__composite-button--caption': caption,\n            'str-video__composite-button--menu': Menu,\n        }), title: title, ref: ref, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__composite-button__button-group', {\n                    'str-video__composite-button__button-group--active': active,\n                    'str-video__composite-button__button-group--active-primary': active && variant === 'primary',\n                    'str-video__composite-button__button-group--active-secondary': active && variant === 'secondary',\n                }), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { type: \"button\", className: \"str-video__composite-button__button\", onClick: (e) => {\n                            e.preventDefault();\n                            onClick?.(e);\n                        }, ...restButtonProps, children: children }), Menu && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { offset: menuOffset, placement: menuPlacement, ToggleButton: ToggleMenuButton, onToggle: onMenuToggle, children: isComponentType(Menu) ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Menu, {}) : Menu }))] }), caption && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__composite-button__caption\", children: caption }))] }));\n});\nconst DefaultToggleMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function DefaultToggleMenuButton({ menuShown }, ref) {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__menu-toggle-button', {\n            'str-video__menu-toggle-button--active': menuShown,\n        }), icon: menuShown ? 'caret-down' : 'caret-up', ref: ref }));\n});\n\nconst TextButton = ({ children, ...rest }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { ...rest, className: \"str-video__text-button\", children: children }));\n};\n\nconst AcceptCallButton = ({ disabled, onAccept, onClick, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.join();\n            onAccept?.();\n        }\n    }, [onClick, onAccept, call]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { disabled: disabled, icon: \"call-accept\", variant: \"success\", \"data-testid\": \"accept-call-button\", onClick: handleClick }));\n};\n\nconst Notification = (props) => {\n    const { isVisible, message, children, visibilityTimeout, resetIsVisible, placement = 'top', iconClassName = 'str-video__notification__icon', close, } = props;\n    const { refs, x, y, strategy } = useFloatingUIPreset({\n        placement,\n        strategy: 'absolute',\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!isVisible || !visibilityTimeout || !resetIsVisible)\n            return;\n        const timeout = setTimeout(() => {\n            resetIsVisible();\n        }, visibilityTimeout);\n        return () => clearTimeout(timeout);\n    }, [isVisible, resetIsVisible, visibilityTimeout]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { ref: refs.setReference, children: [isVisible && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__notification\", ref: refs.setFloating, style: {\n                    position: strategy,\n                    top: y ?? 0,\n                    left: x ?? 0,\n                    overflowY: 'auto',\n                }, children: [iconClassName && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"i\", { className: iconClassName }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__notification__message\", children: message }), close ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"i\", { className: \"str-video__icon str-video__icon--close str-video__notification__close\", onClick: close })) : null] })), children] }));\n};\n\nconst PermissionNotification = (props) => {\n    const { permission, isAwaitingApproval, messageApproved, messageAwaitingApproval, messageRevoked, visibilityTimeout = 3500, children, } = props;\n    const { useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const hasPermission = useHasPermissions(permission);\n    const prevHasPermission = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(hasPermission);\n    const [showNotification, setShowNotification] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (hasPermission && !prevHasPermission.current) {\n            setShowNotification('granted');\n            prevHasPermission.current = true;\n        }\n        else if (!hasPermission && prevHasPermission.current) {\n            setShowNotification('revoked');\n            prevHasPermission.current = false;\n        }\n    }, [hasPermission]);\n    const resetIsVisible = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => setShowNotification(undefined), []);\n    if (isAwaitingApproval) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { isVisible: isAwaitingApproval && !hasPermission, message: messageAwaitingApproval, children: children }));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { isVisible: !!showNotification, visibilityTimeout: visibilityTimeout, resetIsVisible: resetIsVisible, message: showNotification === 'granted' ? messageApproved : messageRevoked, children: children }));\n};\n\nconst SpeakingWhileMutedNotification = ({ children, text, placement, }) => {\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { isSpeakingWhileMuted } = useMicrophoneState();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const message = text ?? t('You are muted. Unmute to speak.');\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { message: message, isVisible: isSpeakingWhileMuted, placement: placement || 'top-start', children: children }));\n};\n\nconst RecordingInProgressNotification = ({ children, text, }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { isCallRecordingInProgress } = useToggleCallRecording();\n    const [isVisible, setVisible] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const message = text ?? t('Recording in progress...');\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (isCallRecordingInProgress) {\n            setVisible(true);\n        }\n        else {\n            setVisible(false);\n        }\n    }, [isCallRecordingInProgress]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { message: message, iconClassName: \"str-video__icon str-video__icon--recording-on\", isVisible: isVisible, placement: \"top-start\", close: () => setVisible(false), children: children }));\n};\n\nconst LoadingIndicator = ({ className, type = 'spinner', text, tooltip, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__loading-indicator', className), title: tooltip, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__loading-indicator__icon', type) }), text && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__loading-indicator-text\", children: text })] }));\n};\n\nconst Tooltip = ({ children, referenceElement, tooltipClassName, tooltipPlacement = 'top', visible = false, }) => {\n    const arrowRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const { refs, x, y, strategy, context } = useFloatingUIPreset({\n        placement: tooltipPlacement,\n        strategy: 'absolute',\n        middleware: [(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_8__.arrow)({ element: arrowRef })],\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        refs.setReference(referenceElement);\n    }, [referenceElement, refs]);\n    if (!visible)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__tooltip', tooltipClassName), ref: refs.setFloating, style: {\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n        }, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.FloatingArrow, { ref: arrowRef, context: context, fill: \"var(--str-video__tooltip--background-color)\" }), children] }));\n};\n\nconst useEnterLeaveHandlers = ({ onMouseEnter, onMouseLeave, } = {}) => {\n    const [tooltipVisible, setTooltipVisible] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((e) => {\n        setTooltipVisible(true);\n        onMouseEnter?.(e);\n    }, [onMouseEnter]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((e) => {\n        setTooltipVisible(false);\n        onMouseLeave?.(e);\n    }, [onMouseLeave]);\n    return { handleMouseEnter, handleMouseLeave, tooltipVisible };\n};\n\n// todo: duplicate of CallParticipantList.tsx#MediaIndicator - refactor to a single component\nconst WithTooltip = ({ title, tooltipClassName, tooltipPlacement, tooltipDisabled, ...props }) => {\n    const { handleMouseEnter, handleMouseLeave, tooltipVisible } = useEnterLeaveHandlers();\n    const [tooltipAnchor, setTooltipAnchor] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const tooltipActuallyVisible = !tooltipDisabled && Boolean(title) && tooltipVisible;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Tooltip, { referenceElement: tooltipAnchor, visible: tooltipActuallyVisible, tooltipClassName: tooltipClassName, tooltipPlacement: tooltipPlacement, children: title || '' }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { ref: setTooltipAnchor, onMouseEnter: handleMouseEnter, onMouseLeave: handleMouseLeave, ...props })] }));\n};\n\nconst RecordEndConfirmation = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { toggleCallRecording, isAwaitingResponse } = useToggleCallRecording();\n    const { close } = useMenuContext();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-recording__confirmation\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-recording__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"recording-on\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"h2\", { className: \"str-video__end-recording__heading\", children: t('End recording') })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__end-recording__description\", children: t('Are you sure you want end the recording?') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-recording__actions\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { variant: \"secondary\", onClick: close, children: t('Cancel') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { variant: \"primary\", onClick: toggleCallRecording, children: isAwaitingResponse ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, {}) : t('End recording') })] })] }));\n};\nconst ToggleEndRecordingMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleEndRecordingMenuButton(props, ref) {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { ref: ref, active: true, variant: \"secondary\", \"data-testid\": \"recording-stop-button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"recording-off\" }) }));\n});\nconst RecordCallConfirmationButton = ({ caption, }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } = useToggleCallRecording();\n    if (isCallRecordingInProgress) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [\n                _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.START_RECORD_CALL,\n                _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.STOP_RECORD_CALL,\n            ], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { ToggleButton: ToggleEndRecordingMenuButton, visualType: MenuVisualType.PORTAL, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(RecordEndConfirmation, {}) }) }));\n    }\n    const title = isAwaitingResponse\n        ? t('Waiting for recording to start...')\n        : caption ?? t('Record call');\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.START_RECORD_CALL,\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.STOP_RECORD_CALL,\n        ], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: title, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { active: isCallRecordingInProgress, caption: caption, variant: \"secondary\", \"data-testid\": \"recording-start-button\", onClick: isAwaitingResponse ? undefined : toggleCallRecording, children: isAwaitingResponse ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, {})) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"recording-off\" })) }) }) }));\n};\nconst RecordCallButton = ({ caption }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } = useToggleCallRecording();\n    let title = caption ?? t('Record call');\n    if (isAwaitingResponse) {\n        title = isCallRecordingInProgress\n            ? t('Waiting for recording to stop...')\n            : t('Waiting for recording to start...');\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.START_RECORD_CALL,\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.STOP_RECORD_CALL,\n        ], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { active: isCallRecordingInProgress, caption: caption, variant: \"secondary\", \"data-testid\": isCallRecordingInProgress\n                ? 'recording-stop-button'\n                : 'recording-start-button', title: title, onClick: isAwaitingResponse ? undefined : toggleCallRecording, children: isAwaitingResponse ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, {})) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: isCallRecordingInProgress ? 'recording-on' : 'recording-off' })) }) }));\n};\n\nconst defaultEmojiReactionMap = {\n    ':like:': '',\n    ':raise-hand:': '',\n    ':fireworks:': '',\n    ':dislike:': '',\n    ':heart:': '',\n    ':smile:': '',\n};\nconst Reaction = ({ participant: { reaction, sessionId }, hideAfterTimeoutInMs = 5500, emojiReactionMap = defaultEmojiReactionMap, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !reaction)\n            return;\n        const timeoutId = setTimeout(() => {\n            call.resetReaction(sessionId);\n        }, hideAfterTimeoutInMs);\n        return () => {\n            clearTimeout(timeoutId);\n        };\n    }, [call, hideAfterTimeoutInMs, reaction, sessionId]);\n    if (!reaction)\n        return null;\n    const { emoji_code: emojiCode } = reaction;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__reaction\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__reaction__emoji\", children: emojiCode && emojiReactionMap[emojiCode] }) }));\n};\n\nconst defaultReactions = [\n    {\n        type: 'reaction',\n        emoji_code: ':like:',\n    },\n    {\n        // TODO OL: use `prompt` type?\n        type: 'raised-hand',\n        emoji_code: ':raise-hand:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':fireworks:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':dislike:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':heart:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':smile:',\n    },\n];\nconst ReactionsButton = ({ reactions = defaultReactions, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.CREATE_REACTION], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"top\", ToggleButton: ToggleReactionsMenuButton, visualType: MenuVisualType.MENU, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultReactionsMenu, { reactions: reactions }) }) }));\n};\nconst ToggleReactionsMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleReactionsMenuButton({ menuShown }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: t('Reactions'), tooltipDisabled: menuShown, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { ref: ref, active: menuShown, variant: \"primary\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"reactions\" }) }) }));\n});\nconst DefaultReactionsMenu = ({ reactions, layout = 'horizontal', }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { close } = useMenuContext();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__reactions-menu', {\n            'str-video__reactions-menu--horizontal': layout === 'horizontal',\n            'str-video__reactions-menu--vertical': layout === 'vertical',\n        }), children: reactions.map((reaction) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { type: \"button\", className: \"str-video__reactions-menu__button\", onClick: () => {\n                call?.sendReaction(reaction);\n                close?.();\n            }, children: reaction.emoji_code && defaultEmojiReactionMap[reaction.emoji_code] }, reaction.emoji_code))) }));\n};\n\n/**\n * Wraps an event handler, silencing and logging exceptions (excluding the NotAllowedError\n * DOMException, which is a normal situation handled by the SDK)\n *\n * @param props component props, including the onError callback\n * @param handler event handler to wrap\n */\nconst createCallControlHandler = (props, handler) => {\n    const logger = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getLogger)(['react-sdk']);\n    return async () => {\n        try {\n            await handler();\n        }\n        catch (error) {\n            if (props.onError) {\n                props.onError(error);\n                return;\n            }\n            if (!isNotAllowedError(error)) {\n                logger('error', 'Call control handler failed', error);\n            }\n        }\n    };\n};\nfunction isNotAllowedError(error) {\n    return error instanceof DOMException && error.name === 'NotAllowedError';\n}\n\nconst ScreenShareButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption } = props;\n    const { useHasOngoingScreenShare, useScreenShareState, useCallSettings } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const isSomeoneScreenSharing = useHasOngoingScreenShare();\n    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE);\n    const callSettings = useCallSettings();\n    const isScreenSharingAllowed = callSettings?.screensharing.enabled;\n    const { screenShare, optimisticIsMute } = useScreenShareState();\n    const amIScreenSharing = !optimisticIsMute;\n    const disableScreenShareButton = !amIScreenSharing &&\n        (isSomeoneScreenSharing || isScreenSharingAllowed === false);\n    const handleClick = createCallControlHandler(props, async () => {\n        if (!hasPermission) {\n            await requestPermission();\n        }\n        else {\n            await screenShare.toggle();\n        }\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionNotification, { permission: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE, isAwaitingApproval: isAwaitingPermission, messageApproved: t('You can now share your screen.'), messageAwaitingApproval: t('Awaiting for an approval to share screen.'), messageRevoked: t('You can no longer share your screen.'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: caption ?? t('Share screen'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { active: isSomeoneScreenSharing || amIScreenSharing, caption: caption, variant: \"primary\", \"data-testid\": isSomeoneScreenSharing\n                        ? 'screen-share-stop-button'\n                        : 'screen-share-start-button', disabled: disableScreenShareButton, onClick: handleClick, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: isSomeoneScreenSharing ? 'screen-share-on' : 'screen-share-off' }) }) }) }) }));\n};\n\nconst SelectContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({});\nconst Select = (props) => {\n    const { children, icon, defaultSelectedLabel, defaultSelectedIndex, handleSelect: handleSelectProp, } = props;\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [activeIndex, setActiveIndex] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [selectedIndex, setSelectedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(defaultSelectedIndex);\n    const [selectedLabel, setSelectedLabel] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(defaultSelectedLabel);\n    const { refs, context } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useFloating)({\n        placement: 'bottom-start',\n        open: isOpen,\n        onOpenChange: setIsOpen,\n        whileElementsMounted: _floating_ui_react__WEBPACK_IMPORTED_MODULE_9__.autoUpdate,\n        middleware: [(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_8__.flip)()],\n    });\n    const elementsRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)([]);\n    const labelsRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)([]);\n    const handleSelect = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((index) => {\n        setSelectedIndex(index);\n        handleSelectProp(index || 0);\n        setIsOpen(false);\n        if (index !== null) {\n            setSelectedLabel(labelsRef.current[index]);\n        }\n    }, [handleSelectProp]);\n    const handleTypeaheadMatch = (index) => {\n        if (isOpen) {\n            setActiveIndex(index);\n        }\n        else {\n            handleSelect(index);\n        }\n    };\n    const listNav = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useListNavigation)(context, {\n        listRef: elementsRef,\n        activeIndex,\n        selectedIndex,\n        onNavigate: setActiveIndex,\n    });\n    const typeahead = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useTypeahead)(context, {\n        listRef: labelsRef,\n        activeIndex,\n        selectedIndex,\n        onMatch: handleTypeaheadMatch,\n    });\n    const click = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useClick)(context);\n    const dismiss = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useDismiss)(context);\n    const role = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useRole)(context, { role: 'listbox' });\n    const { getReferenceProps, getFloatingProps, getItemProps } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useInteractions)([listNav, typeahead, click, dismiss, role]);\n    const selectContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n        activeIndex,\n        selectedIndex,\n        getItemProps,\n        handleSelect,\n    }), [activeIndex, selectedIndex, getItemProps, handleSelect]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__dropdown\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__dropdown-selected\", ref: refs.setReference, tabIndex: 0, ...getReferenceProps(), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"label\", { className: \"str-video__dropdown-selected__label\", children: [icon && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__dropdown-selected__icon\", icon: icon })), selectedLabel] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__dropdown-selected__chevron\", icon: isOpen ? 'chevron-up' : 'chevron-down' })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SelectContext.Provider, { value: selectContext, children: isOpen && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.FloatingFocusManager, { context: context, modal: false, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__dropdown-list\", ref: refs.setFloating, ...getFloatingProps(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.FloatingList, { elementsRef: elementsRef, labelsRef: labelsRef, children: children }) }) })) })] }));\n};\nconst DropDownSelectOption = (props) => {\n    const { selected, label, icon } = props;\n    const { getItemProps, handleSelect } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SelectContext);\n    const { ref, index } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useListItem)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__dropdown-option', {\n            'str-video__dropdown-option--selected': selected,\n        }), ref: ref, ...getItemProps({\n            onClick: () => handleSelect(index),\n        }), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__dropdown-icon\", icon: icon }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__dropdown-label\", children: label })] }));\n};\nconst DropDownSelect = (props) => {\n    const { children, icon, handleSelect, defaultSelectedLabel, defaultSelectedIndex, } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Select, { icon: icon, handleSelect: handleSelect, defaultSelectedIndex: defaultSelectedIndex, defaultSelectedLabel: defaultSelectedLabel, children: children }));\n};\n\nconst DeviceSelectorOption = ({ disabled, id, label, onChange, name, selected, defaultChecked, value, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"label\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__device-settings__option', {\n            'str-video__device-settings__option--selected': selected,\n            'str-video__device-settings__option--disabled': disabled,\n        }), htmlFor: id, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"input\", { type: \"radio\", name: name, onChange: onChange, value: value, id: id, checked: selected, defaultChecked: defaultChecked, disabled: disabled }), label] }));\n};\nconst DeviceSelectorList = (props) => {\n    const { devices = [], selectedDeviceId: selectedDeviceFromProps, title, type, onChange, } = props;\n    const { close } = useMenuContext();\n    // sometimes the browser (Chrome) will report the system-default device\n    // with an id of 'default'. In case when it doesn't, we'll select the first\n    // available device.\n    let selectedDeviceId = selectedDeviceFromProps;\n    if (devices.length > 0 &&\n        !devices.find((d) => d.deviceId === selectedDeviceId)) {\n        selectedDeviceId = devices[0].deviceId;\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__device-settings__device-kind\", children: [title && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__device-settings__device-selector-title\", children: title })), !devices.length ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorOption, { id: `${type}--default`, label: \"Default\", name: type, defaultChecked: true, value: \"default\" })) : (devices.map((device) => {\n                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorOption, { id: `${type}--${device.deviceId}`, value: device.deviceId, label: device.label, onChange: (e) => {\n                        onChange?.(e.target.value);\n                        close?.();\n                    }, name: type, selected: device.deviceId === selectedDeviceId || devices.length === 1 }, device.deviceId));\n            }))] }));\n};\nconst DeviceSelectorDropdown = (props) => {\n    const { devices = [], selectedDeviceId: selectedDeviceFromProps, title, onChange, icon, } = props;\n    // sometimes the browser (Chrome) will report the system-default device\n    // with an id of 'default'. In case when it doesn't, we'll select the first\n    // available device.\n    let selectedDeviceId = selectedDeviceFromProps;\n    if (devices.length > 0 &&\n        !devices.find((d) => d.deviceId === selectedDeviceId)) {\n        selectedDeviceId = devices[0].deviceId;\n    }\n    const selectedIndex = devices.findIndex((d) => d.deviceId === selectedDeviceId);\n    const handleSelect = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((index) => {\n        onChange?.(devices[index].deviceId);\n    }, [devices, onChange]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__device-settings__device-kind\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__device-settings__device-selector-title\", children: title }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DropDownSelect, { icon: icon, defaultSelectedIndex: selectedIndex, defaultSelectedLabel: devices[selectedIndex]?.label, handleSelect: handleSelect, children: devices.map((device) => {\n                    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DropDownSelectOption, { icon: icon, label: device.label, selected: device.deviceId === selectedDeviceId || devices.length === 1 }, device.deviceId));\n                }) })] }));\n};\nconst DeviceSelector = (props) => {\n    const { visualType = 'list', icon, placeholder, ...rest } = props;\n    if (visualType === 'list') {\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorList, { ...rest });\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorDropdown, { ...rest, icon: icon, placeholder: placeholder }));\n};\n\nconst DeviceSelectorAudioInput = ({ title, visualType, }) => {\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { microphone, selectedDevice, devices } = useMicrophoneState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelector, { devices: devices || [], selectedDeviceId: selectedDevice, type: \"audioinput\", onChange: async (deviceId) => {\n            await microphone.select(deviceId);\n        }, title: title, visualType: visualType, icon: \"mic\" }));\n};\nconst DeviceSelectorAudioOutput = ({ title, visualType, }) => {\n    const { useSpeakerState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { speaker, selectedDevice, devices, isDeviceSelectionSupported } = useSpeakerState();\n    if (!isDeviceSelectionSupported)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelector, { devices: devices, type: \"audiooutput\", selectedDeviceId: selectedDevice, onChange: (deviceId) => {\n            speaker.select(deviceId);\n        }, title: title, visualType: visualType, icon: \"speaker\" }));\n};\n\nconst DeviceSelectorVideo = ({ title, visualType, }) => {\n    const { useCameraState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { camera, devices, selectedDevice } = useCameraState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelector, { devices: devices || [], type: \"videoinput\", selectedDeviceId: selectedDevice, onChange: async (deviceId) => {\n            await camera.select(deviceId);\n        }, title: title, visualType: visualType, icon: \"camera\" }));\n};\n\nconst DeviceSettings = ({ visualType = MenuVisualType.MENU, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"bottom-end\", ToggleButton: ToggleDeviceSettingsMenuButton, visualType: visualType, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Menu, {}) }));\n};\nconst Menu = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__device-settings\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorVideo, { title: t('Select a Camera') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorAudioInput, { title: t('Select a Mic') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorAudioOutput, { title: t('Select Speakers') })] }));\n};\nconst ToggleDeviceSettingsMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleDeviceSettingsMenuButton({ menuShown }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__device-settings__button', {\n            'str-video__device-settings__button--active': menuShown,\n        }), title: t('Toggle device menu'), icon: \"device-settings\", ref: ref }));\n});\n\nconst ToggleAudioPreviewButton = (props) => {\n    const { caption, onMenuToggle, ...restCompositeButtonProps } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { microphone, optimisticIsMute, hasBrowserPermission } = useMicrophoneState();\n    const [tooltipDisabled, setTooltipDisabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleClick = createCallControlHandler(props, () => microphone.toggle());\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: !hasBrowserPermission\n            ? t('Check your browser audio permissions')\n            : caption ?? t('Mic'), tooltipDisabled: tooltipDisabled, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: optimisticIsMute, caption: caption, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(!hasBrowserPermission && 'str-video__device-unavailable'), variant: \"secondary\", disabled: !hasBrowserPermission, \"data-testid\": optimisticIsMute\n                ? 'preview-audio-unmute-button'\n                : 'preview-audio-mute-button', onClick: handleClick, ...restCompositeButtonProps, onMenuToggle: (shown) => {\n                setTooltipDisabled(shown);\n                onMenuToggle?.(shown);\n            }, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: !optimisticIsMute ? 'mic' : 'mic-off' }), !hasBrowserPermission && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", title: t('Check your browser audio permissions'), children: \"!\" }))] }) }));\n};\nconst ToggleAudioPublishingButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, Menu = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorAudioInput, { visualType: \"list\" }), menuPlacement = 'top', onMenuToggle, ...restCompositeButtonProps } = props;\n    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO);\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { microphone, optimisticIsMute, hasBrowserPermission } = useMicrophoneState();\n    const [tooltipDisabled, setTooltipDisabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleClick = createCallControlHandler(props, async () => {\n        if (!hasPermission) {\n            await requestPermission();\n        }\n        else {\n            await microphone.toggle();\n        }\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionNotification, { permission: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO, isAwaitingApproval: isAwaitingPermission, messageApproved: t('You can now speak.'), messageAwaitingApproval: t('Awaiting for an approval to speak.'), messageRevoked: t('You can no longer speak.'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: !hasPermission\n                    ? t('You have no permission to share your audio')\n                    : !hasBrowserPermission\n                        ? t('Check your browser mic permissions')\n                        : caption ?? t('Mic'), tooltipDisabled: tooltipDisabled, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: optimisticIsMute, caption: caption, variant: \"secondary\", disabled: !hasBrowserPermission || !hasPermission, \"data-testid\": optimisticIsMute ? 'audio-unmute-button' : 'audio-mute-button', onClick: handleClick, Menu: Menu, menuPlacement: menuPlacement, menuOffset: 16, ...restCompositeButtonProps, onMenuToggle: (shown) => {\n                        setTooltipDisabled(shown);\n                        onMenuToggle?.(shown);\n                    }, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: optimisticIsMute ? 'mic-off' : 'mic' }), (!hasBrowserPermission || !hasPermission) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", children: \"!\" }))] }) }) }) }));\n};\n\nconst ToggleVideoPreviewButton = (props) => {\n    const { caption, Menu = DeviceSelectorVideo, menuPlacement = 'top', onMenuToggle, ...restCompositeButtonProps } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { useCameraState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { camera, optimisticIsMute, hasBrowserPermission } = useCameraState();\n    const [tooltipDisabled, setTooltipDisabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleClick = createCallControlHandler(props, () => camera.toggle());\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: !hasBrowserPermission\n            ? t('Check your browser video permissions')\n            : caption ?? t('Video'), tooltipDisabled: tooltipDisabled, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: optimisticIsMute, caption: caption, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(!hasBrowserPermission && 'str-video__device-unavailable'), variant: \"secondary\", \"data-testid\": optimisticIsMute\n                ? 'preview-video-unmute-button'\n                : 'preview-video-mute-button', onClick: handleClick, disabled: !hasBrowserPermission, Menu: Menu, menuPlacement: menuPlacement, ...restCompositeButtonProps, onMenuToggle: (shown) => {\n                setTooltipDisabled(shown);\n                onMenuToggle?.(shown);\n            }, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: !optimisticIsMute ? 'camera' : 'camera-off' }), !hasBrowserPermission && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", title: t('Check your browser video permissions'), children: \"!\" }))] }) }));\n};\nconst ToggleVideoPublishingButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, Menu = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorVideo, { visualType: \"list\" }), menuPlacement = 'top', onMenuToggle, ...restCompositeButtonProps } = props;\n    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO);\n    const { useCameraState, useCallSettings } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { camera, optimisticIsMute, hasBrowserPermission } = useCameraState();\n    const callSettings = useCallSettings();\n    const isPublishingVideoAllowed = callSettings?.video.enabled;\n    const [tooltipDisabled, setTooltipDisabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleClick = createCallControlHandler(props, async () => {\n        if (!hasPermission) {\n            await requestPermission();\n        }\n        else {\n            await camera.toggle();\n        }\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionNotification, { permission: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO, isAwaitingApproval: isAwaitingPermission, messageApproved: t('You can now share your video.'), messageAwaitingApproval: t('Awaiting for an approval to share your video.'), messageRevoked: t('You can no longer share your video.'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: !hasPermission\n                    ? t('You have no permission to share your video')\n                    : !hasBrowserPermission\n                        ? t('Check your browser video permissions')\n                        : !isPublishingVideoAllowed\n                            ? t('Video publishing is disabled by the system')\n                            : caption || t('Video'), tooltipDisabled: tooltipDisabled, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: optimisticIsMute, caption: caption, variant: \"secondary\", disabled: !hasBrowserPermission ||\n                        !hasPermission ||\n                        !isPublishingVideoAllowed, \"data-testid\": optimisticIsMute ? 'video-unmute-button' : 'video-mute-button', onClick: handleClick, Menu: Menu, menuPlacement: menuPlacement, menuOffset: 16, ...restCompositeButtonProps, onMenuToggle: (shown) => {\n                        setTooltipDisabled(shown);\n                        onMenuToggle?.(shown);\n                    }, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: optimisticIsMute ? 'camera-off' : 'camera' }), (!hasBrowserPermission ||\n                            !hasPermission ||\n                            !isPublishingVideoAllowed) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", children: \"!\" }))] }) }) }) }));\n};\n\nconst EndCallMenu = (props) => {\n    const { onLeave, onEnd } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-call__confirmation\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"button\", { className: \"str-video__button str-video__end-call__leave\", type: \"button\", \"data-testid\": \"leave-call-button\", onClick: onLeave, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__button__icon str-video__end-call__leave-icon\", icon: \"logout\" }), t('Leave call')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.END_CALL], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"button\", { className: \"str-video__button str-video__end-call__end\", type: \"button\", \"data-testid\": \"end-call-for-all-button\", onClick: onEnd, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__button__icon str-video__end-call__end-icon\", icon: \"call-end\" }), t('End call for all')] }) })] }));\n};\nconst CancelCallToggleMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function CancelCallToggleMenuButton({ menuShown }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: t('Leave call'), tooltipDisabled: menuShown, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { icon: menuShown ? 'close' : 'call-end', variant: menuShown ? 'active' : 'danger', \"data-testid\": \"leave-call-button\", ref: ref }) }));\n});\nconst CancelCallConfirmButton = ({ onClick, onLeave, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const handleLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.leave();\n            onLeave?.();\n        }\n    }, [onClick, onLeave, call]);\n    const handleEndCall = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.endCall();\n            onLeave?.();\n        }\n    }, [onClick, onLeave, call]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"top-start\", ToggleButton: CancelCallToggleMenuButton, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(EndCallMenu, { onEnd: handleEndCall, onLeave: handleLeave }) }));\n};\nconst CancelCallButton = ({ disabled, caption, onClick, onLeave, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.leave();\n            onLeave?.();\n        }\n    }, [onClick, onLeave, call]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { disabled: disabled, icon: \"call-end\", variant: \"danger\", title: caption ?? t('Leave call'), \"data-testid\": \"cancel-call-button\", onClick: handleClick }));\n};\n\nconst CallControls = ({ onLeave }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-controls\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SpeakingWhileMutedNotification, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ToggleAudioPublishingButton, {}) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ToggleVideoPublishingButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ReactionsButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ScreenShareButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(RecordCallButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CancelCallButton, { onLeave: onLeave })] }));\n\nconst CallStatsLatencyChart = (0,react__WEBPACK_IMPORTED_MODULE_3__.lazy)(() => Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@stream-io\"), __webpack_require__.e(\"vendor-chunks/chart.js\"), __webpack_require__.e(\"vendor-chunks/react-chartjs-2\"), __webpack_require__.e(\"vendor-chunks/@kurkle\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./latency-chart-Bj5OSYzg.es.js */ \"(ssr)/./node_modules/@stream-io/video-react-sdk/dist/latency-chart-Bj5OSYzg.es.js\")));\nvar Status;\n(function (Status) {\n    Status[\"GOOD\"] = \"Good\";\n    Status[\"OK\"] = \"Ok\";\n    Status[\"BAD\"] = \"Bad\";\n})(Status || (Status = {}));\nconst CallStats = (props) => {\n    const { latencyLowBound = 75, latencyHighBound = 400, showCodecInfo = false, LatencyChartSuspenseFallback = null, } = props;\n    const [latencyBuffer, setLatencyBuffer] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => {\n        const now = Date.now();\n        return Array.from({ length: 20 }, (_, i) => ({ x: now + i, y: 0 }));\n    });\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const [publishBitrate, setPublishBitrate] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('-');\n    const [subscribeBitrate, setSubscribeBitrate] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('-');\n    const previousStats = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n    const { useCallStatsReport } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const callStatsReport = useCallStatsReport();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!callStatsReport)\n            return;\n        if (!previousStats.current) {\n            previousStats.current = callStatsReport;\n            return;\n        }\n        const previousCallStatsReport = previousStats.current;\n        setPublishBitrate(() => {\n            return calculatePublishBitrate(previousCallStatsReport, callStatsReport);\n        });\n        setSubscribeBitrate(() => {\n            return calculateSubscribeBitrate(previousCallStatsReport, callStatsReport);\n        });\n        setLatencyBuffer((latencyBuf) => {\n            const newLatencyBuffer = latencyBuf.slice(-19);\n            newLatencyBuffer.push({\n                x: callStatsReport.timestamp,\n                y: callStatsReport.publisherStats.averageRoundTripTimeInMs,\n            });\n            return newLatencyBuffer;\n        });\n        previousStats.current = callStatsReport;\n    }, [callStatsReport]);\n    const latencyComparison = {\n        lowBound: latencyLowBound,\n        highBound: latencyHighBound,\n        value: callStatsReport?.publisherStats.averageRoundTripTimeInMs || 0,\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats\", children: callStatsReport && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"h3\", { className: \"str-video__call-stats__heading\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__call-stats__icon\", icon: \"call-latency\" }), t('Call Latency')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__call-stats__description\", children: t('Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.') })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats__latencychart\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react__WEBPACK_IMPORTED_MODULE_3__.Suspense, { fallback: LatencyChartSuspenseFallback, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallStatsLatencyChart, { values: latencyBuffer }) }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"h3\", { className: \"str-video__call-stats__heading\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__call-stats__icon\", icon: \"network-quality\" }), t('Call performance')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__call-stats__description\", children: t('Review the key data points below to assess call performance') })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card-container\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Region'), value: callStatsReport.datacenter }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Latency'), value: `${callStatsReport.publisherStats.averageRoundTripTimeInMs} ms.`, comparison: latencyComparison }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Receive jitter'), value: `${callStatsReport.subscriberStats.averageJitterInMs} ms.`, comparison: {\n                                ...latencyComparison,\n                                value: callStatsReport.subscriberStats.averageJitterInMs,\n                            } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Publish jitter'), value: `${callStatsReport.publisherStats.averageJitterInMs} ms.`, comparison: {\n                                ...latencyComparison,\n                                value: callStatsReport.publisherStats.averageJitterInMs,\n                            } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: `${t('Publish resolution')}${showCodecInfo ? formatCodec(callStatsReport) : ''}`, value: toFrameSize(callStatsReport.publisherStats) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Publish quality drop reason'), value: callStatsReport.publisherStats.qualityLimitationReasons }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Receiving resolution'), value: toFrameSize(callStatsReport.subscriberStats) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Receive quality drop reason'), value: callStatsReport.subscriberStats.qualityLimitationReasons }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Publish bitrate'), value: publishBitrate }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: t('Receiving bitrate'), value: subscribeBitrate })] })] })) }));\n};\nconst StatCardExplanation = (props) => {\n    const { description } = props;\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const { refs, floatingStyles, context } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useFloating)({\n        open: isOpen,\n        onOpenChange: setIsOpen,\n    });\n    const hover = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useHover)(context);\n    const { getReferenceProps, getFloatingProps } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.useInteractions)([hover]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-explanation\", ref: refs.setReference, ...getReferenceProps(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__call-explanation__icon\", icon: \"info\" }) }), isOpen && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-explanation__description\", ref: refs.setFloating, style: floatingStyles, ...getFloatingProps(), children: description }))] }));\n};\nconst StatsTag = (props) => {\n    const { children, status } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-stats__tag', {\n            'str-video__call-stats__tag--good': status === Status.GOOD,\n            'str-video__call-stats__tag--ok': status === Status.OK,\n            'str-video__call-stats__tag--bad': status === Status.BAD,\n        }), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats__tag__text\", children: children }) }));\n};\nconst StatCard = (props) => {\n    const { label, value, description, comparison } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const status = comparison ? toStatus(comparison) : undefined;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card-content\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card-label\", children: [label, description && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCardExplanation, { description: description })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats__card-value\", children: value })] }), status && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatsTag, { status: status, children: t(status) })] }));\n};\nconst toStatus = (config) => {\n    const { value, lowBound, highBound } = config;\n    if (value <= lowBound)\n        return Status.GOOD;\n    if (value >= lowBound && value <= highBound)\n        return Status.OK;\n    if (value >= highBound)\n        return Status.BAD;\n    return Status.GOOD;\n};\nconst toFrameSize = (stats) => {\n    const { highestFrameWidth: w, highestFrameHeight: h, highestFramesPerSecond: fps, } = stats;\n    let size = `-`;\n    if (w && h) {\n        size = `${w}x${h}`;\n        if (fps) {\n            size += `@${fps}fps.`;\n        }\n    }\n    return size;\n};\nconst formatCodec = (callStatsReport) => {\n    const { codec } = callStatsReport.publisherStats;\n    if (!codec)\n        return '';\n    const [, name] = codec.split('/');\n    return name ? ` (${name})` : '';\n};\nconst calculatePublishBitrate = (previousCallStatsReport, callStatsReport) => {\n    const { publisherStats: { totalBytesSent: previousTotalBytesSent, timestamp: previousTimestamp, }, } = previousCallStatsReport;\n    const { publisherStats: { totalBytesSent, timestamp }, } = callStatsReport;\n    const bytesSent = totalBytesSent - previousTotalBytesSent;\n    const timeElapsed = timestamp - previousTimestamp;\n    return `${((bytesSent * 8) / timeElapsed).toFixed(2)} kbps`;\n};\nconst calculateSubscribeBitrate = (previousCallStatsReport, callStatsReport) => {\n    const { subscriberStats: { totalBytesReceived: previousTotalBytesReceived, timestamp: previousTimestamp, }, } = previousCallStatsReport;\n    const { subscriberStats: { totalBytesReceived, timestamp }, } = callStatsReport;\n    const bytesReceived = totalBytesReceived - previousTotalBytesReceived;\n    const timeElapsed = timestamp - previousTimestamp;\n    return `${((bytesReceived * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst CallStatsButton = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"top-end\", ToggleButton: ToggleMenuButton, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallStats, {}) }));\nconst ToggleMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleMenuButton(props, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, menuShown } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { ref: ref, active: menuShown, caption: caption, title: caption || t('Statistics'), \"data-testid\": \"stats-button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"stats\" }) }));\n});\n\nconst ToggleAudioOutputButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, Menu = DeviceSelectorAudioOutput, menuPlacement = 'top', onMenuToggle, } = props;\n    const [tooltipDisabled, setTooltipDisabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { title: caption || t('Speakers'), tooltipDisabled: tooltipDisabled, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { Menu: Menu, menuPlacement: menuPlacement, caption: caption, \"data-testid\": \"audio-output-button\", onMenuToggle: (shown) => {\n                setTooltipDisabled(shown);\n                onMenuToggle?.(shown);\n            }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"speaker\" }) }) }));\n};\n\nconst BlockedUserListing = ({ data }) => {\n    if (!data.length)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-listing\", children: data.map((userId) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BlockedUserListingItem, { userId: userId }, userId))) }) }));\n};\nconst BlockedUserListingItem = ({ userId }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const unblockUserClickHandler = () => {\n        if (userId)\n            call?.unblockUser(userId);\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-listing-item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-listing-item__display-name\", children: userId }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.BLOCK_USERS], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TextButton, { onClick: unblockUserClickHandler, children: \"Unblock\" }) })] }));\n};\n\nconst CallParticipantListHeader = ({ onClose, }) => {\n    const { useParticipants, useAnonymousParticipantCount } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participants = useParticipants();\n    const anonymousParticipantCount = useAnonymousParticipantCount();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list-header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list-header__title\", children: [t('Participants'), ' ', (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"str-video__participant-list-header__title-count\", children: [\"[\", participants.length, \"]\"] }), anonymousParticipantCount > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__participant-list-header__title-anonymous\", children: t('Anonymous', { count: anonymousParticipantCount }) }))] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: onClose, className: \"str-video__participant-list-header__close-button\", icon: \"close\" })] }));\n};\n\nconst CallParticipantListingItem = ({ participant, DisplayName = DefaultDisplayName, }) => {\n    const isAudioOn = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasAudio)(participant);\n    const isVideoOn = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasVideo)(participant);\n    const isPinnedOn = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.isPinned)(participant);\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-listing-item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Avatar, { name: participant.name, imageSrc: participant.image }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DisplayName, { participant: participant }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-listing-item__media-indicator-group\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MediaIndicator, { title: isAudioOn ? t('Microphone on') : t('Microphone off'), className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-listing-item__icon', `str-video__participant-listing-item__icon-${isAudioOn ? 'mic' : 'mic-off'}`) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MediaIndicator, { title: isVideoOn ? t('Camera on') : t('Camera off'), className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-listing-item__icon', `str-video__participant-listing-item__icon-${isVideoOn ? 'camera' : 'camera-off'}`) }), isPinnedOn && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MediaIndicator, { title: t('Pinned'), className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-listing-item__icon', 'str-video__participant-listing-item__icon-pinned') })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"bottom-end\", ToggleButton: ToggleButton$2, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantViewContext.Provider, { value: { participant, trackType: 'none' }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantActionsContextMenu, {}) }) })] })] }));\n};\nconst MediaIndicator = (props) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { ...props }));\nconst DefaultDisplayName = ({ participant }) => {\n    const connectedUser = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useConnectedUser)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const meFlag = participant.userId === connectedUser?.id ? t('Me') : '';\n    const nameOrId = participant.name || participant.userId || t('Unknown');\n    let displayName;\n    if (!participant.name) {\n        displayName = meFlag || nameOrId || t('Unknown');\n    }\n    else if (meFlag) {\n        displayName = `${nameOrId} (${meFlag})`;\n    }\n    else {\n        displayName = nameOrId;\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { className: \"str-video__participant-listing-item__display-name\", title: displayName, children: displayName }));\n};\nconst ToggleButton$2 = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleButton(props, ref) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { enabled: props.menuShown, icon: \"ellipsis\", ref: ref });\n});\n\nconst CallParticipantListing = ({ data, }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-listing\", children: data.map((participant) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallParticipantListingItem, { participant: participant }, participant.sessionId))) }));\n\nconst EmptyParticipantSearchList = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-list--empty\", children: t('No participants found') }));\n};\n\nconst SearchInput = ({ exitSearch, isActive, ...rest }) => {\n    const [inputElement, setInputElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!inputElement)\n            return;\n        const handleKeyDown = (e) => {\n            if (e.key.toLowerCase() === 'escape')\n                exitSearch();\n        };\n        inputElement.addEventListener('keydown', handleKeyDown);\n        return () => {\n            inputElement.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [exitSearch, inputElement]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__search-input__container', {\n            'str-video__search-input__container--active': isActive,\n        }), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"input\", { placeholder: \"Search\", ...rest, ref: setInputElement }), isActive ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { className: \"str-video__search-input__clear-btn\", onClick: exitSearch, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__search-input__icon--active\" }) })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__search-input__icon\" }))] }));\n};\n\nconst SearchResults = ({ EmptySearchResultComponent, LoadingIndicator: LoadingIndicator$1 = LoadingIndicator, searchQueryInProgress, searchResults, SearchResultList, }) => {\n    if (searchQueryInProgress) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__search-results--loading\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator$1, {}) }));\n    }\n    if (!searchResults.length) {\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(EmptySearchResultComponent, {});\n    }\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchResultList, { data: searchResults });\n};\n\nconst useSearch = ({ debounceInterval, searchFn, searchQuery = '', }) => {\n    const [searchResults, setSearchResults] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n    const [searchQueryInProgress, setSearchQueryInProgress] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!searchQuery.length) {\n            setSearchQueryInProgress(false);\n            setSearchResults([]);\n            return;\n        }\n        setSearchQueryInProgress(true);\n        const timeout = setTimeout(async () => {\n            try {\n                const results = await searchFn(searchQuery);\n                setSearchResults(results);\n            }\n            catch (error) {\n                console.error(error);\n            }\n            finally {\n                setSearchQueryInProgress(false);\n            }\n        }, debounceInterval);\n        return () => {\n            clearTimeout(timeout);\n        };\n    }, [debounceInterval, searchFn, searchQuery]);\n    return {\n        searchQueryInProgress,\n        searchResults,\n    };\n};\n\nconst UserListTypes = {\n    active: 'Active users',\n    blocked: 'Blocked users',\n};\nconst DEFAULT_DEBOUNCE_SEARCH_INTERVAL = 200;\nconst CallParticipantsList = ({ onClose, activeUsersSearchFn, blockedUsersSearchFn, debounceSearchInterval, }) => {\n    const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('');\n    const [userListType, setUserListType] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('active');\n    const exitSearch = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => setSearchQuery(''), []);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallParticipantListHeader, { onClose: onClose }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchInput, { value: searchQuery, onChange: ({ currentTarget }) => setSearchQuery(currentTarget.value), exitSearch: exitSearch, isActive: !!searchQuery }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallParticipantListContentHeader, { userListType: userListType, setUserListType: setUserListType }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list__content\", children: [userListType === 'active' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ActiveUsersSearchResults, { searchQuery: searchQuery, activeUsersSearchFn: activeUsersSearchFn, debounceSearchInterval: debounceSearchInterval })), userListType === 'blocked' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BlockedUsersSearchResults, { searchQuery: searchQuery, blockedUsersSearchFn: blockedUsersSearchFn, debounceSearchInterval: debounceSearchInterval }))] })] }));\n};\nconst CallParticipantListContentHeader = ({ userListType, setUserListType, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const muteAll = () => {\n        call?.muteAllUsers('audio');\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list__content-header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-list__content-header-title\", children: userListType === 'active' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.MUTE_USERS], hasPermissionsOnly: true, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TextButton, { onClick: muteAll, children: \"Mute all\" }) })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"bottom-end\", ToggleButton: ToggleButton$1, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenu, { children: Object.keys(UserListTypes).map((lt) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { \"aria-selected\": lt === userListType, onClick: () => setUserListType(lt), children: UserListTypes[lt] }, lt))) }) })] }));\n};\nconst ActiveUsersSearchResults = ({ searchQuery, activeUsersSearchFn: activeUsersSearchFnFromProps, debounceSearchInterval = DEFAULT_DEBOUNCE_SEARCH_INTERVAL, }) => {\n    const { useParticipants } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participants = useParticipants({ sortBy: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.name });\n    const activeUsersSearchFn = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((queryString) => {\n        const queryRegExp = new RegExp(queryString, 'i');\n        return Promise.resolve(participants.filter((participant) => {\n            return participant.name.match(queryRegExp);\n        }));\n    }, [participants]);\n    const { searchQueryInProgress, searchResults } = useSearch({\n        searchFn: activeUsersSearchFnFromProps ?? activeUsersSearchFn,\n        debounceInterval: debounceSearchInterval,\n        searchQuery,\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchResults, { EmptySearchResultComponent: EmptyParticipantSearchList, LoadingIndicator: LoadingIndicator, searchQueryInProgress: searchQueryInProgress, searchResults: searchQuery ? searchResults : participants, SearchResultList: CallParticipantListing }));\n};\nconst BlockedUsersSearchResults = ({ blockedUsersSearchFn: blockedUsersSearchFnFromProps, debounceSearchInterval = DEFAULT_DEBOUNCE_SEARCH_INTERVAL, searchQuery, }) => {\n    const { useCallBlockedUserIds } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const blockedUsers = useCallBlockedUserIds();\n    const blockedUsersSearchFn = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((queryString) => {\n        const queryRegExp = new RegExp(queryString, 'i');\n        return Promise.resolve(blockedUsers.filter((blockedUser) => {\n            return blockedUser.match(queryRegExp);\n        }));\n    }, [blockedUsers]);\n    const { searchQueryInProgress, searchResults } = useSearch({\n        searchFn: blockedUsersSearchFnFromProps ?? blockedUsersSearchFn,\n        debounceInterval: debounceSearchInterval,\n        searchQuery,\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchResults, { EmptySearchResultComponent: EmptyParticipantSearchList, LoadingIndicator: LoadingIndicator, searchQueryInProgress: searchQueryInProgress, searchResults: searchQuery ? searchResults : blockedUsers, SearchResultList: BlockedUserListing }));\n};\nconst ToggleButton$1 = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleButton(props, ref) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { enabled: props.menuShown, icon: \"filter\", ref: ref });\n});\n\nconst CallPreview = (props) => {\n    const { className, style } = props;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useCallThumbnail } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const thumbnail = useCallThumbnail();\n    const [imageRef, setImageRef] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!imageRef || !call)\n            return;\n        const cleanup = call.bindCallThumbnailElement(imageRef);\n        return () => cleanup();\n    }, [imageRef, call]);\n    if (!thumbnail)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-preview', className), style: style, alt: \"Call Preview Thumbnail\", ref: setImageRef }));\n};\n\nconst CallRecordingListHeader = ({ callRecordings, onRefresh, }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list__title\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { children: t('Call Recordings') }), callRecordings.length ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { children: [\"(\", callRecordings.length, \")\"] }) : null] }), onRefresh && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { icon: \"refresh\", title: t('Refresh'), onClick: onRefresh }))] }));\n};\n\nconst dateFormat = (date) => {\n    const format = new Date(date);\n    return format.toTimeString().split(' ')[0];\n};\nconst CallRecordingListItem = ({ recording, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"li\", { className: \"str-video__call-recording-list__item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__filename\", children: recording.filename }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__time\", children: dateFormat(recording.start_time) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__time\", children: dateFormat(recording.end_time) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__download\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"a\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-recording-list-item__action-button', 'str-video__call-recording-list-item__action-button--download'), role: \"button\", href: recording.url, download: recording.filename, title: \"Download the recording\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"download\" }) }) })] }));\n};\n\nconst EmptyCallRecordingListing = () => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list__listing str-video__call-recording-list__listing--empty\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__listing--icon-empty\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__call-recording-list__listing--text-empty\", children: \"No recordings available\" })] }));\n};\n\nconst LoadingCallRecordingListing = ({ callRecordings, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [callRecordings.map((recording) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallRecordingListItem, { recording: recording }, recording.filename))), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, { text: \"Recording getting ready\" })] }));\n};\n\nconst CallRecordingList = ({ callRecordings, CallRecordingListHeader: CallRecordingListHeader$1 = CallRecordingListHeader, CallRecordingListItem: CallRecordingListItem$1 = CallRecordingListItem, EmptyCallRecordingList = EmptyCallRecordingListing, loading, LoadingCallRecordingList = LoadingCallRecordingListing, onRefresh, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallRecordingListHeader$1, { callRecordings: callRecordings, onRefresh: onRefresh }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__listing\", children: loading ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingCallRecordingList, { callRecordings: callRecordings })) : callRecordings.length ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"ul\", { className: \"str-video__call-recording-list__list\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"li\", { className: \"str-video__call-recording-list__item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__filename\", children: \"Name\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__time\", children: \"Start time\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__time\", children: \"End time\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__download\" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"ul\", { className: \"str-video__call-recording-list__list\", children: callRecordings.map((recording) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallRecordingListItem$1, { recording: recording }, recording.filename))) })] })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(EmptyCallRecordingList, {})) })] }));\n};\n\nconst NoiseCancellationContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\n/**\n * Exposes the NoiseCancellation API.\n * Throws an error if used outside <NoiseCancellationProvider />.\n */\nconst useNoiseCancellation = () => {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(NoiseCancellationContext);\n    if (!context) {\n        throw new Error('useNoiseCancellation must be used within a NoiseCancellationProvider');\n    }\n    return context;\n};\nconst NoiseCancellationProvider = (props) => {\n    const { children, noiseCancellation } = props;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useCallSettings, useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const settings = useCallSettings();\n    const noiseCancellationAllowed = !!(settings &&\n        settings.audio.noise_cancellation &&\n        settings.audio.noise_cancellation.mode !==\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.NoiseCancellationSettingsModeEnum.DISABLED);\n    const hasCapability = useHasPermissions(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.ENABLE_NOISE_CANCELLATION);\n    const [isSupportedByBrowser, setIsSupportedByBrowser] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(undefined);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const result = noiseCancellation.isSupported();\n        if (typeof result === 'boolean') {\n            setIsSupportedByBrowser(result);\n        }\n        else {\n            result\n                .then((_isSupportedByBrowser) => setIsSupportedByBrowser(_isSupportedByBrowser))\n                .catch((err) => console.error(`Can't determine if noise cancellation is supported`, err));\n        }\n    }, [noiseCancellation]);\n    const isSupported = isSupportedByBrowser && hasCapability && noiseCancellationAllowed;\n    const [isEnabled, setIsEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const deinit = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !isSupported)\n            return;\n        const unsubscribe = noiseCancellation.on('change', (v) => setIsEnabled(v));\n        const init = (deinit.current || Promise.resolve())\n            .then(() => noiseCancellation.init())\n            .then(() => call.microphone.enableNoiseCancellation(noiseCancellation))\n            .catch((err) => console.error(`Can't initialize noise suppression`, err));\n        return () => {\n            deinit.current = init\n                .then(() => call.microphone.disableNoiseCancellation())\n                .then(() => noiseCancellation.dispose())\n                .then(() => unsubscribe());\n        };\n    }, [call, isSupported, noiseCancellation]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(NoiseCancellationContext.Provider, { value: {\n            isSupported,\n            isEnabled,\n            setEnabled: (enabledOrSetter) => {\n                if (!noiseCancellation)\n                    return;\n                const enable = typeof enabledOrSetter === 'function'\n                    ? enabledOrSetter(isEnabled)\n                    : enabledOrSetter;\n                if (enable) {\n                    noiseCancellation.enable();\n                }\n                else {\n                    noiseCancellation.disable();\n                }\n            },\n        }, children: children }));\n};\n\nconst RingingCallControls = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useCallCallingState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const callCallingState = useCallCallingState();\n    if (!call)\n        return null;\n    const buttonsDisabled = callCallingState !== _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RINGING;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__pending-call-controls\", children: call.isCreatedByMe ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CancelCallButton, { disabled: buttonsDisabled })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(AcceptCallButton, { disabled: buttonsDisabled }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CancelCallButton, { onClick: () => call.leave({ reject: true }), disabled: buttonsDisabled })] })) }));\n};\n\nconst CALLING_STATE_TO_LABEL = {\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.JOINING]: 'Joining',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RINGING]: 'Ringing',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.MIGRATING]: 'Migrating',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RECONNECTING]: 'Re-connecting',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RECONNECTING_FAILED]: 'Failed',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.OFFLINE]: 'No internet connection',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.IDLE]: '',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.UNKNOWN]: '',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.JOINED]: 'Joined',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.LEFT]: 'Left call',\n};\nconst RingingCall = (props) => {\n    const { includeSelf = false, totalMembersToShow = 3 } = props;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { useCallCallingState, useCallMembers } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const callingState = useCallCallingState();\n    const members = useCallMembers();\n    const connectedUser = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useConnectedUser)();\n    if (!call)\n        return null;\n    // take the first N members to show their avatars\n    const membersToShow = (members || [])\n        .slice(0, totalMembersToShow)\n        .map(({ user }) => user)\n        .filter((user) => user.id !== connectedUser?.id || includeSelf);\n    if (includeSelf &&\n        !membersToShow.find((user) => user.id === connectedUser?.id)) {\n        // if the current user is not in the initial batch of members,\n        // replace the first item in membersToShow array with the current user\n        const self = members.find(({ user }) => user.id === connectedUser?.id);\n        if (self) {\n            membersToShow.splice(0, 1, self.user);\n        }\n    }\n    const callingStateLabel = CALLING_STATE_TO_LABEL[callingState];\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-panel str-video__call-panel--ringing\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-panel__members-list\", children: membersToShow.map((user) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-panel__member-box\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Avatar, { name: user.name, imageSrc: user.image }), user.name && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__member_details\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__member_name\", children: user.name }) }))] }, user.id))) }), callingStateLabel && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-panel__calling-state-label\", children: t(callingStateLabel) })), [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RINGING, _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.JOINING].includes(callingState) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(RingingCallControls, {}))] }));\n};\n\nconst byNameOrId = (a, b) => {\n    if (a.name && b.name && a.name < b.name)\n        return -1;\n    if (a.name && b.name && a.name > b.name)\n        return 1;\n    if (a.id < b.id)\n        return -1;\n    if (a.id > b.id)\n        return 1;\n    return 0;\n};\nconst PermissionRequests = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useLocalParticipant, useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const localParticipant = useLocalParticipant();\n    const [expanded, setExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [permissionRequests, setPermissionRequests] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n    const canUpdateCallPermissions = useHasPermissions(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.UPDATE_CALL_PERMISSIONS);\n    const localUserId = localParticipant?.userId;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !canUpdateCallPermissions)\n            return;\n        return call.on('call.permission_request', (event) => {\n            if (event.user.id !== localUserId) {\n                setPermissionRequests((requests) => [...requests, event].sort((a, b) => byNameOrId(a.user, b.user)));\n            }\n        });\n    }, [call, canUpdateCallPermissions, localUserId]);\n    const handleUpdatePermission = (request, type) => {\n        return async () => {\n            const { user, permissions } = request;\n            switch (type) {\n                case 'grant':\n                    await call?.grantPermissions(user.id, permissions);\n                    break;\n                case 'revoke':\n                    await call?.revokePermissions(user.id, permissions);\n                    break;\n            }\n            setPermissionRequests((requests) => requests.filter((r) => r !== request));\n        };\n    };\n    const { refs, x, y, strategy } = useFloatingUIPreset({\n        placement: 'bottom',\n        strategy: 'absolute',\n    });\n    // don't render anything if there are no permission requests\n    if (permissionRequests.length === 0)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__permission-requests\", ref: refs.setReference, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__permission-requests__notification\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"str-video__permission-requests__notification__message\", children: [permissionRequests.length, \" pending permission requests\"] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { type: \"button\", onClick: () => {\n                            setExpanded((e) => !e);\n                        }, children: expanded ? 'Hide requests' : 'Show requests' })] }), expanded && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionRequestList, { ref: refs.setFloating, style: {\n                    position: strategy,\n                    top: y ?? 0,\n                    left: x ?? 0,\n                    overflowY: 'auto',\n                }, permissionRequests: permissionRequests, handleUpdatePermission: handleUpdatePermission }))] }));\n};\nconst PermissionRequestList = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function PermissionRequestList(props, ref) {\n    const { permissionRequests, handleUpdatePermission, ...rest } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__permission-requests-list\", ref: ref, ...rest, children: permissionRequests.map((request, reqIndex) => {\n            const { user, permissions } = request;\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: permissions.map((permission) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__permission-request\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__permission-request__message\", children: messageForPermission(user.name || user.id, permission, t) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { className: \"str-video__permission-request__button--allow\", type: \"button\", onClick: handleUpdatePermission(request, 'grant'), children: t('Allow') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { className: \"str-video__permission-request__button--reject\", type: \"button\", onClick: handleUpdatePermission(request, 'revoke'), children: t('Revoke') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { className: \"str-video__permission-request__button--reject\", type: \"button\", onClick: handleUpdatePermission(request, 'dismiss'), children: t('Dismiss') })] }, permission))) }, `${user.id}/${reqIndex}`));\n        }) }));\n});\nconst Button = (props) => {\n    const { className, ...rest } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__permission-request__button', className), ...rest }));\n};\nconst messageForPermission = (userName, permission, t) => {\n    switch (permission) {\n        case _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO:\n            return t('{{ userName }} is requesting to speak', { userName });\n        case _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO:\n            return t('{{ userName }} is requesting to share their camera', {\n                userName,\n            });\n        case _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE:\n            return t('{{ userName }} is requesting to present their screen', {\n                userName,\n            });\n        default:\n            return t('{{ userName }} is requesting permission: {{ permission }}', {\n                userName,\n                permission,\n            });\n    }\n};\n\nconst StreamTheme = ({ as: Component = 'div', className, children, ...props }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Component, { ...props, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video', className), children: children }));\n};\n\nconst DefaultVideoPlaceholder = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function DefaultVideoPlaceholder({ participant, style }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const name = participant.name || participant.userId;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__video-placeholder\", style: style, ref: ref, children: [(!participant.image || error) &&\n                (name ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(InitialsFallback, { name: name })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__video-placeholder__no-video-label\", children: t('Video is disabled') }))), participant.image && !error && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { onError: () => setError(true), alt: \"video-placeholder\", className: \"str-video__video-placeholder__avatar\", src: participant.image }))] }));\n});\nconst InitialsFallback = (props) => {\n    const { name } = props;\n    const initials = name\n        .split(' ')\n        .slice(0, 2)\n        .map((n) => n[0])\n        .join('');\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__video-placeholder__initials-fallback\", children: initials }));\n};\n\nconst Video$1 = ({ trackType, participant, className, VideoPlaceholder = DefaultVideoPlaceholder, refs, ...rest }) => {\n    const { sessionId, videoStream, screenShareStream, viewportVisibilityState, isLocalParticipant, userId, } = participant;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const [videoElement, setVideoElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    // start with true, will flip once the video starts playing\n    const [isVideoPaused, setIsVideoPaused] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    const [isWideMode, setIsWideMode] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    const stream = trackType === 'videoTrack'\n        ? videoStream\n        : trackType === 'screenShareTrack'\n            ? screenShareStream\n            : undefined;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n        if (!call || !videoElement || trackType === 'none')\n            return;\n        const cleanup = call.bindVideoElement(videoElement, sessionId, trackType);\n        return () => {\n            cleanup?.();\n        };\n    }, [call, trackType, sessionId, videoElement]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!stream || !videoElement)\n            return;\n        const [track] = stream.getVideoTracks();\n        if (!track)\n            return;\n        const handlePlayPause = () => {\n            setIsVideoPaused(videoElement.paused);\n            const { width = 0, height = 0 } = track.getSettings();\n            setIsWideMode(width >= height);\n        };\n        // playback may have started before we had a chance to\n        // attach the 'play/pause' event listener, so we set the state\n        // here to make sure it's in sync\n        setIsVideoPaused(videoElement.paused);\n        videoElement.addEventListener('play', handlePlayPause);\n        videoElement.addEventListener('pause', handlePlayPause);\n        track.addEventListener('unmute', handlePlayPause);\n        return () => {\n            videoElement.removeEventListener('play', handlePlayPause);\n            videoElement.removeEventListener('pause', handlePlayPause);\n            track.removeEventListener('unmute', handlePlayPause);\n            // reset the 'pause' state once we unmount the video element\n            setIsVideoPaused(true);\n        };\n    }, [stream, videoElement]);\n    if (!call)\n        return null;\n    const isPublishingTrack = trackType === 'videoTrack'\n        ? (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasVideo)(participant)\n        : trackType === 'screenShareTrack'\n            ? (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShare)(participant)\n            : false;\n    const isInvisible = trackType === 'none' ||\n        viewportVisibilityState?.[trackType] === _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VisibilityState.INVISIBLE;\n    const hasNoVideoOrInvisible = !isPublishingTrack || isInvisible;\n    const mirrorVideo = isLocalParticipant && trackType === 'videoTrack';\n    const isScreenShareTrack = trackType === 'screenShareTrack';\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [!hasNoVideoOrInvisible && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"video\", { ...rest, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__video', className, {\n                    'str-video__video--not-playing': isVideoPaused,\n                    'str-video__video--tall': !isWideMode,\n                    'str-video__video--mirror': mirrorVideo,\n                    'str-video__video--screen-share': isScreenShareTrack,\n                }), \"data-user-id\": userId, \"data-session-id\": sessionId, ref: (element) => {\n                    setVideoElement(element);\n                    refs?.setVideoElement?.(element);\n                } })), (hasNoVideoOrInvisible || isVideoPaused) && VideoPlaceholder && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(VideoPlaceholder, { style: { position: 'absolute' }, participant: participant, ref: refs?.setVideoPlaceholderElement }))] }));\n};\nVideo$1.displayName = 'Video';\n\n/**\n * @description Extends video element with `stream` property\n * (`srcObject`) to reactively handle stream changes\n */\nconst BaseVideo = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function BaseVideo({ stream, ...rest }, ref) {\n    const [videoElement, setVideoElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!videoElement || !stream)\n            return;\n        if (stream === videoElement.srcObject)\n            return;\n        videoElement.srcObject = stream;\n        if (_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Browsers.isSafari() || _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Browsers.isFirefox()) {\n            // Firefox and Safari have some timing issue\n            setTimeout(() => {\n                videoElement.srcObject = stream;\n                videoElement.play().catch((e) => {\n                    console.error(`Failed to play stream`, e);\n                });\n            }, 0);\n        }\n        return () => {\n            videoElement.pause();\n            videoElement.srcObject = null;\n        };\n    }, [stream, videoElement]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"video\", { autoPlay: true, playsInline: true, ...rest, ref: (element) => {\n            applyElementToRef(ref, element);\n            setVideoElement(element);\n        } }));\n});\n\nconst DefaultDisabledVideoPreview = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str_video__video-preview__disabled-video-preview\", children: t('Video is disabled') }));\n};\nconst DefaultNoCameraPreview = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str_video__video-preview__no-camera-preview\", children: t('No camera found') }));\n};\nconst VideoPreview = ({ className, mirror = true, DisabledVideoPreview = DefaultDisabledVideoPreview, NoCameraPreview = DefaultNoCameraPreview, StartingCameraPreview = LoadingIndicator, }) => {\n    const { useCameraState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { devices, status, isMute, mediaStream } = useCameraState();\n    let contents;\n    if (isMute && devices?.length === 0) {\n        contents = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(NoCameraPreview, {});\n    }\n    else if (status === 'enabled') {\n        const loading = !mediaStream;\n        contents = ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [mediaStream && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BaseVideo, { stream: mediaStream, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__video-preview', {\n                        'str-video__video-preview--mirror': mirror,\n                        'str-video__video-preview--loading': loading,\n                    }) })), loading && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StartingCameraPreview, {})] }));\n    }\n    else {\n        contents = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DisabledVideoPreview, {});\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__video-preview-container', className), children: contents }));\n};\n\nconst ParticipantActionsContextMenu = () => {\n    const { participant, participantViewElement, videoElement } = useParticipantViewContext();\n    const [fullscreenModeOn, setFullscreenModeOn] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(!!document.fullscreenElement);\n    const [pictureInPictureElement, setPictureInPictureElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(document.pictureInPictureElement);\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { pin, sessionId, userId } = participant;\n    const hasAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasAudio)(participant);\n    const hasVideoTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasVideo)(participant);\n    const hasScreenShareTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShare)(participant);\n    const hasScreenShareAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShareAudio)(participant);\n    const blockUser = () => call?.blockUser(userId);\n    const muteAudio = () => call?.muteUser(userId, 'audio');\n    const muteVideo = () => call?.muteUser(userId, 'video');\n    const muteScreenShare = () => call?.muteUser(userId, 'screenshare');\n    const muteScreenShareAudio = () => call?.muteUser(userId, 'screenshare_audio');\n    const grantPermission = (permission) => () => {\n        call?.updateUserPermissions({\n            user_id: userId,\n            grant_permissions: [permission],\n        });\n    };\n    const revokePermission = (permission) => () => {\n        call?.updateUserPermissions({\n            user_id: userId,\n            revoke_permissions: [permission],\n        });\n    };\n    const toggleParticipantPin = () => {\n        if (pin) {\n            call?.unpin(sessionId);\n        }\n        else {\n            call?.pin(sessionId);\n        }\n    };\n    const pinForEveryone = () => {\n        call\n            ?.pinForEveryone({\n            user_id: userId,\n            session_id: sessionId,\n        })\n            .catch((err) => {\n            console.error(`Failed to pin participant ${userId}`, err);\n        });\n    };\n    const unpinForEveryone = () => {\n        call\n            ?.unpinForEveryone({\n            user_id: userId,\n            session_id: sessionId,\n        })\n            .catch((err) => {\n            console.error(`Failed to unpin participant ${userId}`, err);\n        });\n    };\n    const toggleFullscreenMode = () => {\n        if (!fullscreenModeOn) {\n            return participantViewElement?.requestFullscreen().catch(console.error);\n        }\n        return document.exitFullscreen().catch(console.error);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        // handles the case when fullscreen mode is toggled externally,\n        // e.g., by pressing ESC key or some other keyboard shortcut\n        const handleFullscreenChange = () => {\n            setFullscreenModeOn(!!document.fullscreenElement);\n        };\n        document.addEventListener('fullscreenchange', handleFullscreenChange);\n        return () => {\n            document.removeEventListener('fullscreenchange', handleFullscreenChange);\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!videoElement)\n            return;\n        const handlePiP = () => {\n            setPictureInPictureElement(document.pictureInPictureElement);\n        };\n        videoElement.addEventListener('enterpictureinpicture', handlePiP);\n        videoElement.addEventListener('leavepictureinpicture', handlePiP);\n        return () => {\n            videoElement.removeEventListener('enterpictureinpicture', handlePiP);\n            videoElement.removeEventListener('leavepictureinpicture', handlePiP);\n        };\n    }, [videoElement]);\n    const togglePictureInPicture = () => {\n        if (videoElement && pictureInPictureElement !== videoElement) {\n            return videoElement\n                .requestPictureInPicture()\n                .catch(console.error);\n        }\n        return document.exitPictureInPicture().catch(console.error);\n    };\n    const { close } = useMenuContext() || {};\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenu, { onItemClick: close, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: toggleParticipantPin, disabled: pin && !pin.isLocalPin, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"pin\" }), pin ? t('Unpin') : t('Pin')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.PIN_FOR_EVERYONE], children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: pinForEveryone, disabled: pin && !pin.isLocalPin, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"pin\" }), t('Pin for everyone')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: unpinForEveryone, disabled: !pin || pin.isLocalPin, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"pin\" }), t('Unpin for everyone')] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.BLOCK_USERS], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: blockUser, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"not-allowed\" }), t('Block')] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.MUTE_USERS], children: [hasVideoTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteVideo, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"camera-off-outline\" }), t('Turn off video')] })), hasScreenShareTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteScreenShare, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"screen-share-off\" }), t('Turn off screen share')] })), hasAudioTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteAudio, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"no-audio\" }), t('Mute audio')] })), hasScreenShareAudioTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteScreenShareAudio, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"no-audio\" }), t('Mute screen share audio')] }))] }), participantViewElement && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: toggleFullscreenMode, children: t('{{ direction }} fullscreen', {\n                    direction: fullscreenModeOn ? t('Leave') : t('Enter'),\n                }) })), videoElement && document.pictureInPictureEnabled && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: togglePictureInPicture, children: t('{{ direction }} picture-in-picture', {\n                    direction: pictureInPictureElement === videoElement\n                        ? t('Leave')\n                        : t('Enter'),\n                }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.UPDATE_CALL_PERMISSIONS], children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: grantPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO), children: t('Allow audio') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: grantPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO), children: t('Allow video') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: grantPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE), children: t('Allow screen sharing') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: revokePermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO), children: t('Disable audio') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: revokePermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO), children: t('Disable video') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: revokePermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE), children: t('Disable screen sharing') })] })] }));\n};\n\nconst useTrackElementVisibility = ({ trackedElement, dynascaleManager: propsDynascaleManager, sessionId, trackType, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const manager = propsDynascaleManager ?? call?.dynascaleManager;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!trackedElement || !manager || !call || trackType === 'none')\n            return;\n        const unobserve = manager.trackElementVisibility(trackedElement, sessionId, trackType);\n        return () => {\n            unobserve();\n        };\n    }, [trackedElement, manager, call, sessionId, trackType]);\n};\n\nconst ToggleButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleButton(props, ref) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { enabled: props.menuShown, icon: \"ellipsis\", ref: ref });\n});\nconst DefaultScreenShareOverlay = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const stopScreenShare = () => {\n        call?.screenShare.disable();\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__screen-share-overlay\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"screen-share-off\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__screen-share-overlay__title\", children: t('You are presenting your screen') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"button\", { onClick: stopScreenShare, className: \"str-video__screen-share-overlay__button\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"close\" }), \" \", t('Stop Screen Sharing')] })] }));\n};\nconst DefaultParticipantViewUI = ({ indicatorsVisible = true, menuPlacement = 'bottom-start', showMenuButton = true, ParticipantActionsContextMenu: ParticipantActionsContextMenu$1 = ParticipantActionsContextMenu, }) => {\n    const { participant, trackType } = useParticipantViewContext();\n    const isScreenSharing = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShare)(participant);\n    if (participant.isLocalParticipant &&\n        isScreenSharing &&\n        trackType === 'screenShareTrack') {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultScreenShareOverlay, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantDetails, { indicatorsVisible: indicatorsVisible })] }));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [showMenuButton && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { strategy: \"fixed\", placement: menuPlacement, ToggleButton: ToggleButton, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantActionsContextMenu$1, {}) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Reaction, { participant: participant }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantDetails, { indicatorsVisible: indicatorsVisible })] }));\n};\nconst ParticipantDetails = ({ indicatorsVisible = true, }) => {\n    const { participant } = useParticipantViewContext();\n    const { isLocalParticipant, connectionQuality, pin, sessionId, name, userId, } = participant;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const connectionQualityAsString = !!connectionQuality &&\n        _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.ConnectionQuality[connectionQuality].toLowerCase();\n    const hasAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasAudio)(participant);\n    const hasVideoTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasVideo)(participant);\n    const canUnpin = !!pin && pin.isLocalPin;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-details\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"str-video__participant-details__name\", children: [name || userId, indicatorsVisible && !hasAudioTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__participant-details__name--audio-muted\" })), indicatorsVisible && !hasVideoTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__participant-details__name--video-muted\" })), indicatorsVisible && canUnpin && (\n                        // TODO: remove this monstrosity once we have a proper design\n                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { title: t('Unpin'), onClick: () => call?.unpin(sessionId), className: \"str-video__participant-details__name--pinned\" })), indicatorsVisible && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SpeechIndicator, {})] }) }), indicatorsVisible && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { isVisible: isLocalParticipant &&\n                    connectionQuality === _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.ConnectionQuality.POOR, message: t('Poor connection quality'), children: connectionQualityAsString && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-details__connection-quality', `str-video__participant-details__connection-quality--${connectionQualityAsString}`), title: connectionQualityAsString })) }))] }));\n};\nconst SpeechIndicator = () => {\n    const { participant } = useParticipantViewContext();\n    const { isSpeaking, isDominantSpeaker } = participant;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__speech-indicator', isSpeaking && 'str-video__speech-indicator--speaking', isDominantSpeaker && 'str-video__speech-indicator--dominant'), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__speech-indicator__bar\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__speech-indicator__bar\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__speech-indicator__bar\" })] }));\n};\n\nconst ParticipantView = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ParticipantView({ participant, trackType = 'videoTrack', muteAudio, refs: { setVideoElement, setVideoPlaceholderElement } = {}, className, VideoPlaceholder, ParticipantViewUI = DefaultParticipantViewUI, }, ref) {\n    const { isLocalParticipant, isSpeaking, isDominantSpeaker, sessionId } = participant;\n    const hasAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasAudio)(participant);\n    const hasVideoTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasVideo)(participant);\n    const hasScreenShareAudioTrack = (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShareAudio)(participant);\n    const [trackedElement, setTrackedElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [contextVideoElement, setContextVideoElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [contextVideoPlaceholderElement, setContextVideoPlaceholderElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    // TODO: allow to pass custom ViewportTracker instance from props\n    useTrackElementVisibility({\n        sessionId,\n        trackedElement,\n        trackType,\n    });\n    const participantViewContextValue = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n        participant,\n        participantViewElement: trackedElement,\n        videoElement: contextVideoElement,\n        videoPlaceholderElement: contextVideoPlaceholderElement,\n        trackType,\n    }), [\n        contextVideoElement,\n        contextVideoPlaceholderElement,\n        participant,\n        trackedElement,\n        trackType,\n    ]);\n    const videoRefs = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n        setVideoElement: (element) => {\n            setVideoElement?.(element);\n            setContextVideoElement(element);\n        },\n        setVideoPlaceholderElement: (element) => {\n            setVideoPlaceholderElement?.(element);\n            setContextVideoPlaceholderElement(element);\n        },\n    }), [setVideoElement, setVideoPlaceholderElement]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { \"data-testid\": \"participant-view\", ref: (element) => {\n            applyElementToRef(ref, element);\n            setTrackedElement(element);\n        }, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-view', isDominantSpeaker && 'str-video__participant-view--dominant-speaker', isSpeaking && 'str-video__participant-view--speaking', !hasVideoTrack && 'str-video__participant-view--no-video', !hasAudioTrack && 'str-video__participant-view--no-audio', className), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(ParticipantViewContext.Provider, { value: participantViewContextValue, children: [!isLocalParticipant && !muteAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [hasAudioTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { participant: participant, trackType: \"audioTrack\" })), hasScreenShareAudioTrack && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { participant: participant, trackType: \"screenShareAudioTrack\" }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Video$1, { VideoPlaceholder: VideoPlaceholder, participant: participant, trackType: trackType, refs: videoRefs, autoPlay: true }), isComponentType(ParticipantViewUI) ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantViewUI, {})) : (ParticipantViewUI)] }) }));\n});\nParticipantView.displayName = 'ParticipantView';\n\n// re-exporting the StreamCallProvider as StreamCall\nconst StreamCall = _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamCallProvider;\nStreamCall.displayName = 'StreamCall';\n\nvar Joining = \"Joining\";\nvar Mic = \"Mic\";\nvar Ringing = \"Ringing\";\nvar Speakers = \"Speakers\";\nvar Video = \"Video\";\nvar Live = \"Live\";\nvar Reactions = \"Reactions\";\nvar Statistics = \"Statistics\";\nvar Invite = \"Invite\";\nvar Join = \"Join\";\nvar You = \"You\";\nvar Me = \"Me\";\nvar Unknown = \"Unknown\";\nvar Refresh = \"Refresh\";\nvar Allow = \"Allow\";\nvar Revoke = \"Revoke\";\nvar Dismiss = \"Dismiss\";\nvar Pinned = \"Pinned\";\nvar Unpin = \"Unpin\";\nvar Pin = \"Pin\";\nvar Block = \"Block\";\nvar Enter = \"Enter\";\nvar Leave = \"Leave\";\nvar Participants = \"Participants\";\nvar Anonymous = \", and ({{ count }}) anonymous\";\nvar en = {\n\tJoining: Joining,\n\tMic: Mic,\n\t\"No internet connection\": \"No internet connection\",\n\t\"Re-connecting\": \"Re-connecting\",\n\tRinging: Ringing,\n\t\"Screen Share\": \"Screen Share\",\n\t\"Select a Camera\": \"Select a Camera\",\n\t\"Select a Mic\": \"Select a Mic\",\n\t\"Select Speakers\": \"Select Speakers\",\n\tSpeakers: Speakers,\n\tVideo: Video,\n\t\"You are muted. Unmute to speak.\": \"You are muted. Unmute to speak.\",\n\tLive: Live,\n\t\"You can now speak.\": \"You can now speak.\",\n\t\"Awaiting for an approval to speak.\": \"Awaiting for an approval to speak.\",\n\t\"You can no longer speak.\": \"You can no longer speak.\",\n\t\"You can now share your video.\": \"You can now share your video.\",\n\t\"Awaiting for an approval to share your video.\": \"Awaiting for an approval to share your video.\",\n\t\"You can no longer share your video.\": \"You can no longer share your video.\",\n\t\"Waiting for recording to stop...\": \"Waiting for recording to stop...\",\n\t\"Waiting for recording to start...\": \"Waiting for recording to start...\",\n\t\"Record call\": \"Record call\",\n\tReactions: Reactions,\n\tStatistics: Statistics,\n\t\"You can now share your screen.\": \"You can now share your screen.\",\n\t\"Awaiting for an approval to share screen.\": \"Awaiting for an approval to share screen.\",\n\t\"You can no longer share your screen.\": \"You can no longer share your screen.\",\n\t\"Share screen\": \"Share screen\",\n\t\"Incoming Call...\": \"Incoming Call...\",\n\t\"Calling...\": \"Calling...\",\n\t\"Mute All\": \"Mute All\",\n\tInvite: Invite,\n\tJoin: Join,\n\tYou: You,\n\tMe: Me,\n\tUnknown: Unknown,\n\t\"Toggle device menu\": \"Toggle device menu\",\n\t\"Call Recordings\": \"Call Recordings\",\n\tRefresh: Refresh,\n\t\"Check your browser video permissions\": \"Check your browser video permissions\",\n\t\"Video publishing is disabled by the system\": \"Video publishing is disabled by the system\",\n\t\"You have no permission to share your video\": \"You have no permission to share your video\",\n\t\"You have no permission to share your audio\": \"You have no permission to share your audio\",\n\t\"You are presenting your screen\": \"You are presenting your screen\",\n\t\"Stop Screen Sharing\": \"Stop Screen Sharing\",\n\tAllow: Allow,\n\tRevoke: Revoke,\n\tDismiss: Dismiss,\n\t\"Microphone on\": \"Microphone on\",\n\t\"Microphone off\": \"Microphone off\",\n\t\"Camera on\": \"Camera on\",\n\t\"Camera off\": \"Camera off\",\n\t\"No camera found\": \"No camera found\",\n\t\"Video is disabled\": \"Video is disabled\",\n\tPinned: Pinned,\n\tUnpin: Unpin,\n\tPin: Pin,\n\t\"Pin for everyone\": \"Pin for everyone\",\n\t\"Unpin for everyone\": \"Unpin for everyone\",\n\tBlock: Block,\n\t\"Turn off video\": \"Turn off video\",\n\t\"Turn off screen share\": \"Turn off screen share\",\n\t\"Mute audio\": \"Mute audio\",\n\t\"Mute screen share audio\": \"Mute screen share audio\",\n\t\"Allow audio\": \"Allow audio\",\n\t\"Allow video\": \"Allow video\",\n\t\"Allow screen sharing\": \"Allow screen sharing\",\n\t\"Disable audio\": \"Disable audio\",\n\t\"Disable video\": \"Disable video\",\n\t\"Disable screen sharing\": \"Disable screen sharing\",\n\tEnter: Enter,\n\tLeave: Leave,\n\t\"Leave call\": \"Leave call\",\n\t\"End call for all\": \"End call for all\",\n\t\"{{ direction }} fullscreen\": \"{{ direction }} fullscreen\",\n\t\"{{ direction }} picture-in-picture\": \"{{ direction }} picture-in-picture\",\n\t\"Dominant Speaker\": \"Dominant Speaker\",\n\t\"Poor connection quality\": \"Poor connection quality. Please check your internet connection.\",\n\tParticipants: Participants,\n\tAnonymous: Anonymous,\n\t\"No participants found\": \"No participants found\",\n\t\"Participants ({{ numberOfParticipants }})\": \"Participants ({{ numberOfParticipants }})\",\n\t\"{{ userName }} is sharing their screen\": \"{{ userName }} is sharing their screen\",\n\t\"{{ userName }} is requesting to speak\": \"{{ userName }} is requesting to speak\",\n\t\"{{ userName }} is requesting to share their camera\": \"{{ userName }} is requesting to share their camera\",\n\t\"{{ userName }} is requesting to present their screen\": \"{{ userName }} is requesting to present their screen\",\n\t\"{{ userName }} is requesting permission: {{ permission }}\": \"{{ userName }} is requesting permission: {{ permission }}\"\n};\n\nconst translations = { en };\n\nconst StreamVideo = (props) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamVideoProvider, { translationsOverrides: translations, ...props }));\n};\nStreamVideo.displayName = 'StreamVideo';\n\nconst usePaginatedLayoutSortPreset = (call) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call)\n            return;\n        call.setSortParticipantsBy(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.paginatedLayoutSortPreset);\n        return () => {\n            resetSortPreset(call);\n        };\n    }, [call]);\n};\nconst useSpeakerLayoutSortPreset = (call, isOneOnOneCall) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call)\n            return;\n        // always show the remote participant in the spotlight\n        if (isOneOnOneCall) {\n            call.setSortParticipantsBy((0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.combineComparators)(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.screenSharing, loggedIn));\n        }\n        else {\n            call.setSortParticipantsBy(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.speakerLayoutSortPreset);\n        }\n        return () => {\n            resetSortPreset(call);\n        };\n    }, [call, isOneOnOneCall]);\n};\nconst resetSortPreset = (call) => {\n    // reset the sorting to the default for the call type\n    const callConfig = _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallTypes.get(call.type);\n    call.setSortParticipantsBy(callConfig.options.sortParticipantsBy || _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.defaultSortPreset);\n};\nconst loggedIn = (a, b) => {\n    if (a.isLocalParticipant)\n        return 1;\n    if (b.isLocalParticipant)\n        return -1;\n    return 0;\n};\n\nconst LivestreamLayout = (props) => {\n    const { useParticipants, useRemoteParticipants, useHasOngoingScreenShare } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const participants = useParticipants();\n    const [currentSpeaker] = participants;\n    const remoteParticipants = useRemoteParticipants();\n    const hasOngoingScreenShare = useHasOngoingScreenShare();\n    const presenter = hasOngoingScreenShare\n        ? participants.find(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShare)\n        : undefined;\n    usePaginatedLayoutSortPreset(call);\n    const Overlay = ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantOverlay, { showParticipantCount: props.showParticipantCount, showDuration: props.showDuration, showLiveBadge: props.showLiveBadge, showSpeakerName: props.showSpeakerName }));\n    const { floatingParticipantProps } = props;\n    const FloatingParticipantOverlay = hasOngoingScreenShare && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantOverlay\n    // these elements aren't needed for the video feed\n    , { \n        // these elements aren't needed for the video feed\n        showParticipantCount: floatingParticipantProps?.showParticipantCount ?? false, showDuration: floatingParticipantProps?.showDuration ?? false, showLiveBadge: floatingParticipantProps?.showLiveBadge ?? false, showSpeakerName: floatingParticipantProps?.showSpeakerName ?? true }));\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__livestream-layout__wrapper\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantsAudio, { participants: remoteParticipants }), hasOngoingScreenShare && presenter && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { className: \"str-video__livestream-layout__screen-share\", participant: presenter, ParticipantViewUI: Overlay, trackType: \"screenShareTrack\", muteAudio // audio is rendered by ParticipantsAudio\n                : true })), currentSpeaker && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(hasOngoingScreenShare &&\n                    (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__livestream-layout__floating-participant', `str-video__livestream-layout__floating-participant--${floatingParticipantProps?.position ?? 'top-right'}`)), participant: currentSpeaker, ParticipantViewUI: FloatingParticipantOverlay || Overlay, muteAudio // audio is rendered by ParticipantsAudio\n                : true }))] }));\n};\nconst ParticipantOverlay = (props) => {\n    const { enableFullScreen = true, showParticipantCount = true, showDuration = true, showLiveBadge = true, showSpeakerName = false, } = props;\n    const { participant } = useParticipantViewContext();\n    const { useParticipantCount } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participantCount = useParticipantCount();\n    const duration = useUpdateCallDuration();\n    const toggleFullScreen = useToggleFullScreen();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__livestream-layout__overlay\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__livestream-layout__overlay__bar\", children: [showLiveBadge && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__live-badge\", children: t('Live') })), showParticipantCount && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__viewers-count\", children: participantCount })), showSpeakerName && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__speaker-name\", title: participant.name || participant.userId || '', children: participant.name || participant.userId || '' })), showDuration && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__duration\", children: formatDuration(duration) })), enableFullScreen && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__go-fullscreen\", onClick: toggleFullScreen }))] }) }));\n};\nLivestreamLayout.displayName = 'LivestreamLayout';\nconst useUpdateCallDuration = () => {\n    const { useIsCallLive, useCallSession } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const isCallLive = useIsCallLive();\n    const session = useCallSession();\n    const [duration, setDuration] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => {\n        if (!session || !session.live_started_at)\n            return 0;\n        const liveStartTime = new Date(session.live_started_at);\n        const now = new Date();\n        return Math.floor((now.getTime() - liveStartTime.getTime()) / 1000);\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!isCallLive)\n            return;\n        const interval = setInterval(() => {\n            setDuration((d) => d + 1);\n        }, 1000);\n        return () => {\n            clearInterval(interval);\n        };\n    }, [isCallLive]);\n    return duration;\n};\nconst useToggleFullScreen = () => {\n    const { participantViewElement } = useParticipantViewContext();\n    const [isFullscreen, setIsFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    return (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        if (isFullscreen) {\n            document.exitFullscreen().then(() => {\n                setIsFullscreen(false);\n            });\n        }\n        else {\n            participantViewElement?.requestFullscreen().then(() => {\n                setIsFullscreen(true);\n            });\n        }\n    }, [isFullscreen, participantViewElement]);\n};\nconst formatDuration = (durationInMs) => {\n    const days = Math.floor(durationInMs / 86400);\n    const hours = Math.floor(durationInMs / 3600);\n    const minutes = Math.floor((durationInMs % 3600) / 60);\n    const seconds = durationInMs % 60;\n    return `${days ? days + ' ' : ''}${hours ? hours + ':' : ''}${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n\nconst GROUP_SIZE = 16;\nconst PaginatedGridLayoutGroup = ({ group, VideoPlaceholder, ParticipantViewUI, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__paginated-grid-layout__group', {\n            'str-video__paginated-grid-layout--one': group.length === 1,\n            'str-video__paginated-grid-layout--two-four': group.length >= 2 && group.length <= 4,\n            'str-video__paginated-grid-layout--five-nine': group.length >= 5 && group.length <= 9,\n        }), children: group.map((participant) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participant, muteAudio: true, VideoPlaceholder: VideoPlaceholder, ParticipantViewUI: ParticipantViewUI }, participant.sessionId))) }));\n};\nconst PaginatedGridLayout = (props) => {\n    const { groupSize = (props.groupSize || 0) > 0\n        ? props.groupSize || GROUP_SIZE\n        : GROUP_SIZE, excludeLocalParticipant = false, pageArrowsVisible = true, VideoPlaceholder, ParticipantViewUI = DefaultParticipantViewUI, } = props;\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n    const [paginatedGridLayoutWrapperElement, setPaginatedGridLayoutWrapperElement,] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useParticipants, useRemoteParticipants } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participants = useParticipants();\n    const remoteParticipants = useRemoteParticipants();\n    usePaginatedLayoutSortPreset(call);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!paginatedGridLayoutWrapperElement || !call)\n            return;\n        const cleanup = call.setViewport(paginatedGridLayoutWrapperElement);\n        return () => cleanup();\n    }, [paginatedGridLayoutWrapperElement, call]);\n    // only used to render video elements\n    const participantGroups = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => chunk(excludeLocalParticipant ? remoteParticipants : participants, groupSize), [excludeLocalParticipant, remoteParticipants, participants, groupSize]);\n    const pageCount = participantGroups.length;\n    // update page when page count is reduced and selected page no longer exists\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (page > pageCount - 1) {\n            setPage(Math.max(0, pageCount - 1));\n        }\n    }, [page, pageCount]);\n    const selectedGroup = participantGroups[page];\n    if (!call)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__paginated-grid-layout__wrapper\", ref: setPaginatedGridLayoutWrapperElement, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantsAudio, { participants: remoteParticipants }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__paginated-grid-layout\", children: [pageArrowsVisible && pageCount > 1 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { icon: \"caret-left\", disabled: page === 0, onClick: () => setPage((currentPage) => Math.max(0, currentPage - 1)) })), selectedGroup && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PaginatedGridLayoutGroup, { group: selectedGroup, VideoPlaceholder: VideoPlaceholder, ParticipantViewUI: ParticipantViewUI })), pageArrowsVisible && pageCount > 1 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { disabled: page === pageCount - 1, icon: \"caret-right\", onClick: () => setPage((currentPage) => Math.min(pageCount - 1, currentPage + 1)) }))] })] }));\n};\nPaginatedGridLayout.displayName = 'PaginatedGridLayout';\n\nconst useCalculateHardLimit = (\n/**\n * Element that stretches to 100% of the whole layout component\n */\nwrapperElement, \n/**\n * Element that directly hosts individual `ParticipantView` (or wrapper) elements\n */\nhostElement, limit) => {\n    const [calculatedLimit, setCalculatedLimit] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n        vertical: typeof limit === 'number' ? limit : null,\n        horizontal: typeof limit === 'number' ? limit : null,\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!hostElement ||\n            !wrapperElement ||\n            typeof limit === 'number' ||\n            typeof limit === 'undefined')\n            return;\n        let childWidth = null;\n        let childHeight = null;\n        const resizeObserver = new ResizeObserver((entries, observer) => {\n            // this part should ideally run as little times as possible\n            // get child measurements and disconnect\n            // does not consider dynamically sized children\n            // this hook is for SpeakerLayout use only, where children in the bar are fixed size\n            if (entries.length > 1) {\n                const child = hostElement.firstChild;\n                if (child) {\n                    childHeight = child.clientHeight;\n                    childWidth = child.clientWidth;\n                    observer.unobserve(hostElement);\n                }\n            }\n            // keep the state at { vertical: 1, horizontal: 1 }\n            // until we get the proper child measurements\n            if (childHeight === null || childWidth === null)\n                return;\n            const vertical = Math.floor(wrapperElement.clientHeight / childHeight);\n            const horizontal = Math.floor(wrapperElement.clientWidth / childWidth);\n            setCalculatedLimit((pv) => {\n                if (pv.vertical !== vertical || pv.horizontal !== horizontal)\n                    return { vertical, horizontal };\n                return pv;\n            });\n        });\n        resizeObserver.observe(wrapperElement);\n        resizeObserver.observe(hostElement);\n        return () => {\n            resizeObserver.disconnect();\n        };\n    }, [hostElement, limit, wrapperElement]);\n    return calculatedLimit;\n};\n\nconst DefaultParticipantViewUIBar = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultParticipantViewUI, { menuPlacement: \"top-end\" }));\nconst SpeakerLayout = ({ ParticipantViewUIBar = DefaultParticipantViewUIBar, ParticipantViewUISpotlight = DefaultParticipantViewUI, VideoPlaceholder, participantsBarPosition = 'bottom', participantsBarLimit, excludeLocalParticipant = false, pageArrowsVisible = true, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useParticipants, useRemoteParticipants } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const allParticipants = useParticipants();\n    const remoteParticipants = useRemoteParticipants();\n    const [participantInSpotlight, ...otherParticipants] = excludeLocalParticipant\n        ? remoteParticipants\n        : allParticipants;\n    const [participantsBarWrapperElement, setParticipantsBarWrapperElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [participantsBarElement, setParticipantsBarElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [buttonsWrapperElement, setButtonsWrapperElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const isSpeakerScreenSharing = participantInSpotlight && (0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.hasScreenShare)(participantInSpotlight);\n    const hardLimit = useCalculateHardLimit(buttonsWrapperElement, participantsBarElement, participantsBarLimit);\n    const isVertical = participantsBarPosition === 'left' || participantsBarPosition === 'right';\n    const isHorizontal = participantsBarPosition === 'top' || participantsBarPosition === 'bottom';\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!participantsBarWrapperElement || !call)\n            return;\n        const cleanup = call.setViewport(participantsBarWrapperElement);\n        return () => cleanup();\n    }, [participantsBarWrapperElement, call]);\n    const isOneOnOneCall = allParticipants.length === 2;\n    useSpeakerLayoutSortPreset(call, isOneOnOneCall);\n    let participantsWithAppliedLimit = otherParticipants;\n    const hardLimitToApply = isVertical\n        ? hardLimit.vertical\n        : hardLimit.horizontal;\n    if (typeof participantsBarLimit !== 'undefined' &&\n        hardLimitToApply !== null) {\n        participantsWithAppliedLimit = otherParticipants.slice(0, \n        // subtract 1 if speaker is sharing screen as\n        // that one is rendered independently from otherParticipants array\n        hardLimitToApply - (isSpeakerScreenSharing ? 1 : 0));\n    }\n    if (!call)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__speaker-layout__wrapper\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantsAudio, { participants: remoteParticipants }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__speaker-layout', participantsBarPosition &&\n                    `str-video__speaker-layout--variant-${participantsBarPosition}`), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__spotlight\", children: participantInSpotlight && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participantInSpotlight, muteAudio: true, trackType: isSpeakerScreenSharing ? 'screenShareTrack' : 'videoTrack', ParticipantViewUI: ParticipantViewUISpotlight, VideoPlaceholder: VideoPlaceholder })) }), participantsWithAppliedLimit.length > 0 && participantsBarPosition && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { ref: setButtonsWrapperElement, className: \"str-video__speaker-layout__participants-bar-buttons-wrapper\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__participants-bar-wrapper\", ref: setParticipantsBarWrapperElement, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { ref: setParticipantsBarElement, className: \"str-video__speaker-layout__participants-bar\", children: [isSpeakerScreenSharing && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__participant-tile\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participantInSpotlight, ParticipantViewUI: ParticipantViewUIBar, VideoPlaceholder: VideoPlaceholder, muteAudio: true }) }, participantInSpotlight.sessionId)), participantsWithAppliedLimit.map((participant) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__participant-tile\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participant, ParticipantViewUI: ParticipantViewUIBar, VideoPlaceholder: VideoPlaceholder, muteAudio: true }) }, participant.sessionId)))] }) }), pageArrowsVisible && isVertical && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(VerticalScrollButtons, { scrollWrapper: participantsBarWrapperElement })), pageArrowsVisible && isHorizontal && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(HorizontalScrollButtons, { scrollWrapper: participantsBarWrapperElement }))] }))] })] }));\n};\nSpeakerLayout.displayName = 'SpeakerLayout';\nconst HorizontalScrollButtons = ({ scrollWrapper, }) => {\n    const scrollPosition = useHorizontalScrollPosition(scrollWrapper);\n    const scrollStartClickHandler = () => {\n        scrollWrapper?.scrollBy({ left: -150, behavior: 'smooth' });\n    };\n    const scrollEndClickHandler = () => {\n        scrollWrapper?.scrollBy({ left: 150, behavior: 'smooth' });\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [scrollPosition && scrollPosition !== 'start' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollStartClickHandler, icon: \"caret-left\", className: \"str-video__speaker-layout__participants-bar--button-left\" })), scrollPosition && scrollPosition !== 'end' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollEndClickHandler, icon: \"caret-right\", className: \"str-video__speaker-layout__participants-bar--button-right\" }))] }));\n};\nconst VerticalScrollButtons = ({ scrollWrapper, }) => {\n    const scrollPosition = useVerticalScrollPosition(scrollWrapper);\n    const scrollTopClickHandler = () => {\n        scrollWrapper?.scrollBy({ top: -150, behavior: 'smooth' });\n    };\n    const scrollBottomClickHandler = () => {\n        scrollWrapper?.scrollBy({ top: 150, behavior: 'smooth' });\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [scrollPosition && scrollPosition !== 'top' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollTopClickHandler, icon: \"caret-up\", className: \"str-video__speaker-layout__participants-bar--button-top\" })), scrollPosition && scrollPosition !== 'bottom' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollBottomClickHandler, icon: \"caret-down\", className: \"str-video__speaker-layout__participants-bar--button-bottom\" }))] }));\n};\n\nconst LivestreamPlayer = (props) => {\n    const { callType, callId, layoutProps } = props;\n    const client = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useStreamVideoClient)();\n    const [call, setCall] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!client)\n            return;\n        const myCall = client.call(callType, callId);\n        setCall(myCall);\n        myCall.join().catch((e) => {\n            console.error('Failed to join call', e);\n        });\n        return () => {\n            myCall.leave().catch((e) => {\n                console.error('Failed to leave call', e);\n            });\n            setCall(undefined);\n        };\n    }, [callId, callType, client]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StreamCall, { call: call, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LivestreamLayout, { ...layoutProps }) }));\n};\n\nconst [major, minor, patch] = (\"1.4.3\").split('.');\n(0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setSdkInfo)({\n    type: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.SdkType.REACT,\n    major,\n    minor,\n    patch,\n});\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1zZGsvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwWDtBQUNsVjtBQUMySTtBQUNuSTtBQUNRO0FBQ2tJO0FBQ2xLO0FBQ2M7QUFDeUQ7QUFDNEw7O0FBRTNSLGlCQUFpQixnREFBZ0Q7QUFDakUsaUJBQWlCLHdFQUFPO0FBQ3hCLDRDQUE0QywrQ0FBUTtBQUNwRCxZQUFZLG9CQUFvQjtBQUNoQyxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVksc0RBQUcsWUFBWSxtSUFBbUk7QUFDOUo7QUFDQTs7QUFFQTtBQUNBLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksc0RBQUcsQ0FBQyx1REFBUSxJQUFJO0FBQzVCO0FBQ0E7QUFDQSxvQkFBb0IsaURBQWlEO0FBQ3JFLGtDQUFrQyxpRUFBUTtBQUMxQyx1RUFBdUUsc0RBQUcsVUFBVSxrRUFBa0U7QUFDdEosNkNBQTZDLDRFQUFtQjtBQUNoRTtBQUNBLDJDQUEyQyxzREFBRyxVQUFVLDZFQUE2RTtBQUNySSxvQkFBb0IsdURBQUksQ0FBQywyQ0FBVSxJQUFJLDZEQUE2RDtBQUNwRyxTQUFTLEdBQUc7QUFDWjtBQUNBOztBQUVBLCtCQUErQixvREFBYTtBQUM1Qyx3Q0FBd0MsaURBQVU7O0FBRWxELGtCQUFrQiwyQ0FBMkM7QUFDN0QsOEJBQThCLCtDQUFRO0FBQ3RDLFlBQVksdURBQUks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QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSxzREFBRyxlQUFlLHNCQUFzQixzREFBRyxxQkFBcUIsZ0JBQWdCLEdBQUc7QUFDL0Y7O0FBRUE7QUFDQSxtRUFBVTtBQUNWLFVBQVUsOERBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFK3VEO0FBQ2h2RCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb21pZS8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL3ZpZGVvLXJlYWN0LXNkay9kaXN0L2luZGV4LmVzLmpzPzU5ODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGFzQXVkaW8sIGhhc1NjcmVlblNoYXJlQXVkaW8sIGdldExvZ2dlciwgZGlzcG9zZU9mTWVkaWFTdHJlYW0sIENhbGxpbmdTdGF0ZSwgT3duQ2FwYWJpbGl0eSwgaGFzVmlkZW8sIGlzUGlubmVkLCBuYW1lLCBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzTW9kZUVudW0sIGhhc1NjcmVlblNoYXJlLCBWaXNpYmlsaXR5U3RhdGUsIEJyb3dzZXJzLCBTZnVNb2RlbHMsIHBhZ2luYXRlZExheW91dFNvcnRQcmVzZXQsIGNvbWJpbmVDb21wYXJhdG9ycywgc2NyZWVuU2hhcmluZywgc3BlYWtlckxheW91dFNvcnRQcmVzZXQsIENhbGxUeXBlcywgZGVmYXVsdFNvcnRQcmVzZXQsIHNldFNka0luZm8gfSBmcm9tICdAc3RyZWFtLWlvL3ZpZGVvLWNsaWVudCc7XG5leHBvcnQgKiBmcm9tICdAc3RyZWFtLWlvL3ZpZGVvLWNsaWVudCc7XG5pbXBvcnQgeyB1c2VDYWxsLCB1c2VDYWxsU3RhdGVIb29rcywgdXNlSTE4biwgUmVzdHJpY3RlZCwgdXNlQ29ubmVjdGVkVXNlciwgU3RyZWFtQ2FsbFByb3ZpZGVyLCBTdHJlYW1WaWRlb1Byb3ZpZGVyLCB1c2VTdHJlYW1WaWRlb0NsaWVudCB9IGZyb20gJ0BzdHJlYW0taW8vdmlkZW8tcmVhY3QtYmluZGluZ3MnO1xuZXhwb3J0ICogZnJvbSAnQHN0cmVhbS1pby92aWRlby1yZWFjdC1iaW5kaW5ncyc7XG5pbXBvcnQgeyBqc3gsIEZyYWdtZW50LCBqc3hzIH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgRnJhZ21lbnQgYXMgRnJhZ21lbnQkMSwgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlTWVtbywgZm9yd2FyZFJlZiwgaXNWYWxpZEVsZW1lbnQsIGxhenksIFN1c3BlbnNlLCB1c2VMYXlvdXRFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCB7IGZsdXNoU3luYyB9IGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgeyBpc1BsYXRmb3JtU3VwcG9ydGVkLCBsb2FkVEZMaXRlLCBjcmVhdGVSZW5kZXJlciB9IGZyb20gJ0BzdHJlYW0taW8vdmlkZW8tZmlsdGVycy13ZWInO1xuaW1wb3J0IHsgdXNlRmxvYXRpbmcsIG9mZnNldCwgc2hpZnQsIGZsaXAsIHNpemUsIGF1dG9VcGRhdGUsIEZsb2F0aW5nT3ZlcmxheSwgRmxvYXRpbmdQb3J0YWwsIGFycm93LCBGbG9hdGluZ0Fycm93LCB1c2VMaXN0SXRlbSwgdXNlTGlzdE5hdmlnYXRpb24sIHVzZVR5cGVhaGVhZCwgdXNlQ2xpY2ssIHVzZURpc21pc3MsIHVzZVJvbGUsIHVzZUludGVyYWN0aW9ucywgRmxvYXRpbmdGb2N1c01hbmFnZXIsIEZsb2F0aW5nTGlzdCwgdXNlSG92ZXIgfSBmcm9tICdAZmxvYXRpbmctdWkvcmVhY3QnO1xuXG5jb25zdCBBdWRpbyA9ICh7IHBhcnRpY2lwYW50LCB0cmFja1R5cGUgPSAnYXVkaW9UcmFjaycsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgW2F1ZGlvRWxlbWVudCwgc2V0QXVkaW9FbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IHsgdXNlcklkLCBzZXNzaW9uSWQgfSA9IHBhcnRpY2lwYW50O1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbCB8fCAhYXVkaW9FbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gY2FsbC5iaW5kQXVkaW9FbGVtZW50KGF1ZGlvRWxlbWVudCwgc2Vzc2lvbklkLCB0cmFja1R5cGUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYW51cD8uKCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGwsIHNlc3Npb25JZCwgYXVkaW9FbGVtZW50LCB0cmFja1R5cGVdKTtcbiAgICByZXR1cm4gKGpzeChcImF1ZGlvXCIsIHsgYXV0b1BsYXk6IHRydWUsIC4uLnJlc3QsIHJlZjogc2V0QXVkaW9FbGVtZW50LCBcImRhdGEtdXNlci1pZFwiOiB1c2VySWQsIFwiZGF0YS1zZXNzaW9uLWlkXCI6IHNlc3Npb25JZCwgXCJkYXRhLXRyYWNrLXR5cGVcIjogdHJhY2tUeXBlIH0pKTtcbn07XG5BdWRpby5kaXNwbGF5TmFtZSA9ICdBdWRpbyc7XG5cbmNvbnN0IFBhcnRpY2lwYW50c0F1ZGlvID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudHMsIGF1ZGlvUHJvcHMgfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBwYXJ0aWNpcGFudHMubWFwKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmlzTG9jYWxQYXJ0aWNpcGFudClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHsgYXVkaW9TdHJlYW0sIHNjcmVlblNoYXJlQXVkaW9TdHJlYW0sIHNlc3Npb25JZCB9ID0gcGFydGljaXBhbnQ7XG4gICAgICAgICAgICBjb25zdCBoYXNBdWRpb1RyYWNrID0gaGFzQXVkaW8ocGFydGljaXBhbnQpO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9UcmFja0VsZW1lbnQgPSBoYXNBdWRpb1RyYWNrICYmIGF1ZGlvU3RyZWFtICYmIChqc3goQXVkaW8sIHsgLi4uYXVkaW9Qcm9wcywgdHJhY2tUeXBlOiBcImF1ZGlvVHJhY2tcIiwgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50IH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc1NjcmVlblNoYXJlQXVkaW9UcmFjayA9IGhhc1NjcmVlblNoYXJlQXVkaW8ocGFydGljaXBhbnQpO1xuICAgICAgICAgICAgY29uc3Qgc2NyZWVuU2hhcmVBdWRpb1RyYWNrRWxlbWVudCA9IGhhc1NjcmVlblNoYXJlQXVkaW9UcmFjayAmJlxuICAgICAgICAgICAgICAgIHNjcmVlblNoYXJlQXVkaW9TdHJlYW0gJiYgKGpzeChBdWRpbywgeyAuLi5hdWRpb1Byb3BzLCB0cmFja1R5cGU6IFwic2NyZWVuU2hhcmVBdWRpb1RyYWNrXCIsIHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudCB9KSk7XG4gICAgICAgICAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQkMSwgeyBjaGlsZHJlbjogW2F1ZGlvVHJhY2tFbGVtZW50LCBzY3JlZW5TaGFyZUF1ZGlvVHJhY2tFbGVtZW50XSB9LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgfSkgfSkpO1xufTtcblBhcnRpY2lwYW50c0F1ZGlvLmRpc3BsYXlOYW1lID0gJ1BhcnRpY2lwYW50c0F1ZGlvJztcblxuY29uc3QgUGFydGljaXBhbnRWaWV3Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbmNvbnN0IHVzZVBhcnRpY2lwYW50Vmlld0NvbnRleHQgPSAoKSA9PiB1c2VDb250ZXh0KFBhcnRpY2lwYW50Vmlld0NvbnRleHQpO1xuXG5jb25zdCBBdmF0YXIgPSAoeyBpbWFnZVNyYywgbmFtZSwgc3R5bGUsIGNsYXNzTmFtZSwgLi4ucmVzdCB9KSA9PiB7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgcmV0dXJuIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbKCFpbWFnZVNyYyB8fCBlcnJvcikgJiYgbmFtZSAmJiAoanN4KEF2YXRhckZhbGxiYWNrLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogc3R5bGUsIG5hbWVzOiBbbmFtZV0gfSkpLCBpbWFnZVNyYyAmJiAhZXJyb3IgJiYgKGpzeChcImltZ1wiLCB7IG9uRXJyb3I6ICgpID0+IHNldEVycm9yKHRydWUpLCBhbHQ6IFwiYXZhdGFyXCIsIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19hdmF0YXInLCBjbGFzc05hbWUpLCBzcmM6IGltYWdlU3JjLCBzdHlsZTogc3R5bGUsIC4uLnJlc3QgfSkpXSB9KSk7XG59O1xuY29uc3QgQXZhdGFyRmFsbGJhY2sgPSAoeyBjbGFzc05hbWUsIG5hbWVzLCBzdHlsZSwgfSkgPT4ge1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2F2YXRhci0taW5pdGlhbHMtZmFsbGJhY2snLCBjbGFzc05hbWUpLCBzdHlsZTogc3R5bGUsIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtuYW1lc1swXVswXSwgbmFtZXNbMV0/LlswXV0gfSkgfSkpO1xufTtcblxuLyoqXG4gKiBUaGUgY29udGV4dCBmb3IgdGhlIGJhY2tncm91bmQgZmlsdGVycy5cbiAqL1xuY29uc3QgQmFja2dyb3VuZEZpbHRlcnNDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuLyoqXG4gKiBBIGhvb2sgdG8gYWNjZXNzIHRoZSBiYWNrZ3JvdW5kIGZpbHRlcnMgY29udGV4dCBBUEkuXG4gKi9cbmNvbnN0IHVzZUJhY2tncm91bmRGaWx0ZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEJhY2tncm91bmRGaWx0ZXJzQ29udGV4dCk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlQmFja2dyb3VuZEZpbHRlcnMgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIEJhY2tncm91bmRGaWx0ZXJzUHJvdmlkZXInKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHQ7XG59O1xuLyoqXG4gKiBBIHByb3ZpZGVyIGNvbXBvbmVudCB0aGF0IGVuYWJsZXMgdGhlIHVzZSBvZiBiYWNrZ3JvdW5kIGZpbHRlcnMgaW4geW91ciBhcHAuXG4gKlxuICogUGxlYXNlIG1ha2Ugc3VyZSB5b3UgaGF2ZSB0aGUgYEBzdHJlYW0taW8vdmlkZW8tZmlsdGVycy13ZWJgIHBhY2thZ2UgaW5zdGFsbGVkXG4gKiBpbiB5b3VyIHByb2plY3QgYmVmb3JlIHVzaW5nIHRoaXMgY29tcG9uZW50LlxuICovXG5jb25zdCBCYWNrZ3JvdW5kRmlsdGVyc1Byb3ZpZGVyID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiwgYmFja2dyb3VuZEltYWdlcyA9IFtdLCBiYWNrZ3JvdW5kRmlsdGVyOiBiZ0ZpbHRlckZyb21Qcm9wcyA9IHVuZGVmaW5lZCwgYmFja2dyb3VuZEltYWdlOiBiZ0ltYWdlRnJvbVByb3BzID0gdW5kZWZpbmVkLCBiYWNrZ3JvdW5kQmx1ckxldmVsOiBiZ0JsdXJMZXZlbEZyb21Qcm9wcyA9ICdoaWdoJywgdGZGaWxlUGF0aCwgbW9kZWxGaWxlUGF0aCwgYmFzZVBhdGgsIG9uRXJyb3IsIH0gPSBwcm9wcztcbiAgICBjb25zdCBbYmFja2dyb3VuZEZpbHRlciwgc2V0QmFja2dyb3VuZEZpbHRlcl0gPSB1c2VTdGF0ZShiZ0ZpbHRlckZyb21Qcm9wcyk7XG4gICAgY29uc3QgW2JhY2tncm91bmRJbWFnZSwgc2V0QmFja2dyb3VuZEltYWdlXSA9IHVzZVN0YXRlKGJnSW1hZ2VGcm9tUHJvcHMpO1xuICAgIGNvbnN0IFtiYWNrZ3JvdW5kQmx1ckxldmVsLCBzZXRCYWNrZ3JvdW5kQmx1ckxldmVsXSA9IHVzZVN0YXRlKGJnQmx1ckxldmVsRnJvbVByb3BzKTtcbiAgICBjb25zdCBhcHBseUJhY2tncm91bmRJbWFnZUZpbHRlciA9IHVzZUNhbGxiYWNrKChpbWFnZVVybCkgPT4ge1xuICAgICAgICBzZXRCYWNrZ3JvdW5kRmlsdGVyKCdpbWFnZScpO1xuICAgICAgICBzZXRCYWNrZ3JvdW5kSW1hZ2UoaW1hZ2VVcmwpO1xuICAgIH0sIFtdKTtcbiAgICBjb25zdCBhcHBseUJhY2tncm91bmRCbHVyRmlsdGVyID0gdXNlQ2FsbGJhY2soKGJsdXJMZXZlbCA9ICdoaWdoJykgPT4ge1xuICAgICAgICBzZXRCYWNrZ3JvdW5kRmlsdGVyKCdibHVyJyk7XG4gICAgICAgIHNldEJhY2tncm91bmRCbHVyTGV2ZWwoYmx1ckxldmVsKTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3QgZGlzYWJsZUJhY2tncm91bmRGaWx0ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldEJhY2tncm91bmRGaWx0ZXIodW5kZWZpbmVkKTtcbiAgICAgICAgc2V0QmFja2dyb3VuZEltYWdlKHVuZGVmaW5lZCk7XG4gICAgICAgIHNldEJhY2tncm91bmRCbHVyTGV2ZWwoJ2hpZ2gnKTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3QgW2lzU3VwcG9ydGVkLCBzZXRJc1N1cHBvcnRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaXNQbGF0Zm9ybVN1cHBvcnRlZCgpLnRoZW4oc2V0SXNTdXBwb3J0ZWQpO1xuICAgIH0sIFtdKTtcbiAgICBjb25zdCBbdGZMaXRlLCBzZXRUZkxpdGVdID0gdXNlU3RhdGUoKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBkb24ndCB0cnkgdG8gbG9hZCBURkxpdGUgaWYgdGhlIHBsYXRmb3JtIGlzIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgaWYgKCFpc1N1cHBvcnRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbG9hZFRGTGl0ZSh7IGJhc2VQYXRoLCBtb2RlbEZpbGVQYXRoLCB0ZkZpbGVQYXRoIH0pXG4gICAgICAgICAgICAudGhlbihzZXRUZkxpdGUpXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgVEZMaXRlJywgZXJyKSk7XG4gICAgfSwgW2Jhc2VQYXRoLCBpc1N1cHBvcnRlZCwgbW9kZWxGaWxlUGF0aCwgdGZGaWxlUGF0aF0pO1xuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gdXNlQ2FsbGJhY2soKGVycm9yKSA9PiB7XG4gICAgICAgIGdldExvZ2dlcihbJ2ZpbHRlcnMnXSkoJ3dhcm4nLCAnRmlsdGVyIGVuY291bnRlcmVkIGFuIGVycm9yIGFuZCB3aWxsIGJlIGRpc2FibGVkJyk7XG4gICAgICAgIGRpc2FibGVCYWNrZ3JvdW5kRmlsdGVyKCk7XG4gICAgICAgIG9uRXJyb3I/LihlcnJvcik7XG4gICAgfSwgW2Rpc2FibGVCYWNrZ3JvdW5kRmlsdGVyLCBvbkVycm9yXSk7XG4gICAgcmV0dXJuIChqc3hzKEJhY2tncm91bmRGaWx0ZXJzQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZToge1xuICAgICAgICAgICAgaXNTdXBwb3J0ZWQsXG4gICAgICAgICAgICBpc1JlYWR5OiAhIXRmTGl0ZSxcbiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZSxcbiAgICAgICAgICAgIGJhY2tncm91bmRCbHVyTGV2ZWwsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kRmlsdGVyLFxuICAgICAgICAgICAgZGlzYWJsZUJhY2tncm91bmRGaWx0ZXIsXG4gICAgICAgICAgICBhcHBseUJhY2tncm91bmRCbHVyRmlsdGVyLFxuICAgICAgICAgICAgYXBwbHlCYWNrZ3JvdW5kSW1hZ2VGaWx0ZXIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2VzLFxuICAgICAgICAgICAgdGZGaWxlUGF0aCxcbiAgICAgICAgICAgIG1vZGVsRmlsZVBhdGgsXG4gICAgICAgICAgICBiYXNlUGF0aCxcbiAgICAgICAgICAgIG9uRXJyb3I6IGhhbmRsZUVycm9yLFxuICAgICAgICB9LCBjaGlsZHJlbjogW2NoaWxkcmVuLCB0ZkxpdGUgJiYganN4KEJhY2tncm91bmRGaWx0ZXJzLCB7IHRmTGl0ZTogdGZMaXRlIH0pXSB9KSk7XG59O1xuY29uc3QgQmFja2dyb3VuZEZpbHRlcnMgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgY2hpbGRyZW4sIHN0YXJ0IH0gPSB1c2VSZW5kZXJlcihwcm9wcy50ZkxpdGUpO1xuICAgIGNvbnN0IHsgYmFja2dyb3VuZEZpbHRlciwgb25FcnJvciB9ID0gdXNlQmFja2dyb3VuZEZpbHRlcnMoKTtcbiAgICBjb25zdCBoYW5kbGVFcnJvclJlZiA9IHVzZVJlZih1bmRlZmluZWQpO1xuICAgIGhhbmRsZUVycm9yUmVmLmN1cnJlbnQgPSBvbkVycm9yO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbCB8fCAhYmFja2dyb3VuZEZpbHRlcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgeyB1bnJlZ2lzdGVyIH0gPSBjYWxsLmNhbWVyYS5yZWdpc3RlckZpbHRlcigobXMpID0+IHN0YXJ0KG1zLCAoZXJyb3IpID0+IGhhbmRsZUVycm9yUmVmLmN1cnJlbnQ/LihlcnJvcikpKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVucmVnaXN0ZXIoKTtcbiAgICAgICAgfTtcbiAgICB9LCBbYmFja2dyb3VuZEZpbHRlciwgY2FsbCwgc3RhcnRdKTtcbiAgICByZXR1cm4gY2hpbGRyZW47XG59O1xuY29uc3QgdXNlUmVuZGVyZXIgPSAodGZMaXRlKSA9PiB7XG4gICAgY29uc3QgeyBiYWNrZ3JvdW5kRmlsdGVyLCBiYWNrZ3JvdW5kQmx1ckxldmVsLCBiYWNrZ3JvdW5kSW1hZ2UgfSA9IHVzZUJhY2tncm91bmRGaWx0ZXJzKCk7XG4gICAgY29uc3QgdmlkZW9SZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IGJnSW1hZ2VSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgW3ZpZGVvU2l6ZSwgc2V0VmlkZW9TaXplXSA9IHVzZVN0YXRlKHtcbiAgICAgICAgd2lkdGg6IDE5MjAsXG4gICAgICAgIGhlaWdodDogMTA4MCxcbiAgICB9KTtcbiAgICBjb25zdCBzdGFydCA9IHVzZUNhbGxiYWNrKChtcywgb25FcnJvcikgPT4ge1xuICAgICAgICBsZXQgb3V0cHV0U3RyZWFtO1xuICAgICAgICBsZXQgcmVuZGVyZXI7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICghYmFja2dyb3VuZEZpbHRlcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ05vIGZpbHRlciBzcGVjaWZpZWQnKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmlkZW9FbCA9IHZpZGVvUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBjb25zdCBjYW52YXNFbCA9IGNhbnZhc1JlZi5jdXJyZW50O1xuICAgICAgICAgICAgY29uc3QgYmdJbWFnZUVsID0gYmdJbWFnZVJlZi5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKCF2aWRlb0VsIHx8ICFjYW52YXNFbCB8fCAoYmFja2dyb3VuZEltYWdlICYmICFiZ0ltYWdlRWwpKSB7XG4gICAgICAgICAgICAgICAgLy8gWW91IHNob3VsZCBzdGFydCByZW5kZXJlciBpbiBlZmZlY3Qgb3IgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZW5kZXJlciBzdGFydGVkIGJlZm9yZSBlbGVtZW50cyBhcmUgcmVhZHknKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmlkZW9FbC5zcmNPYmplY3QgPSBtcztcbiAgICAgICAgICAgIHZpZGVvRWwucGxheSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFt0cmFja10gPSBtcy5nZXRWaWRlb1RyYWNrcygpO1xuICAgICAgICAgICAgICAgIGlmICghdHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignTm8gdmlkZW8gdHJhY2tzIGluIGlucHV0IG1lZGlhIHN0cmVhbScpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0cmFja1NldHRpbmdzID0gdHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBmbHVzaFN5bmMoKCkgPT4gc2V0VmlkZW9TaXplKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRyYWNrU2V0dGluZ3Mud2lkdGggPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0cmFja1NldHRpbmdzLmhlaWdodCA/PyAwLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlciA9IGNyZWF0ZVJlbmRlcmVyKHRmTGl0ZSwgdmlkZW9FbCwgY2FudmFzRWwsIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEZpbHRlcixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEJsdXJMZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBiZ0ltYWdlRWwgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH0sIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIG91dHB1dFN0cmVhbSA9IGNhbnZhc0VsLmNhcHR1cmVTdHJlYW0oKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG91dHB1dFN0cmVhbSk7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignQ291bGQgbm90IHBsYXkgdGhlIHNvdXJjZSB2aWRlbyBzdHJlYW0nKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICBzdG9wOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXI/LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB2aWRlb1JlZi5jdXJyZW50ICYmICh2aWRlb1JlZi5jdXJyZW50LnNyY09iamVjdCA9IG51bGwpO1xuICAgICAgICAgICAgICAgIG91dHB1dFN0cmVhbSAmJiBkaXNwb3NlT2ZNZWRpYVN0cmVhbShvdXRwdXRTdHJlYW0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9LCBbYmFja2dyb3VuZEJsdXJMZXZlbCwgYmFja2dyb3VuZEZpbHRlciwgYmFja2dyb3VuZEltYWdlLCB0ZkxpdGVdKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fYmFja2dyb3VuZC1maWx0ZXJzXCIsIGNoaWxkcmVuOiBbanN4KFwidmlkZW9cIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fYmFja2dyb3VuZC1maWx0ZXJzX192aWRlbycsIHZpZGVvU2l6ZS5oZWlnaHQgPiB2aWRlb1NpemUud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgJ3N0ci12aWRlb19fYmFja2dyb3VuZC1maWx0ZXJzX192aWRlby0tdGFsbCcpLCByZWY6IHZpZGVvUmVmLCBwbGF5c0lubGluZTogdHJ1ZSwgbXV0ZWQ6IHRydWUsIGNvbnRyb2xzOiBmYWxzZSwgLi4udmlkZW9TaXplIH0pLCBiYWNrZ3JvdW5kSW1hZ2UgJiYgKGpzeChcImltZ1wiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2JhY2tncm91bmQtZmlsdGVyc19fYmFja2dyb3VuZC1pbWFnZVwiLCBhbHQ6IFwiQmFja2dyb3VuZFwiLCByZWY6IGJnSW1hZ2VSZWYsIHNyYzogYmFja2dyb3VuZEltYWdlLCAuLi52aWRlb1NpemUgfSkpLCBqc3goXCJjYW52YXNcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19iYWNrZ3JvdW5kLWZpbHRlcnNfX3RhcmdldC1jYW52YXNcIiwgLi4udmlkZW9TaXplLCByZWY6IGNhbnZhc1JlZiB9KV0gfSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBjaGlsZHJlbixcbiAgICB9O1xufTtcblxuY29uc3QgdXNlRmxvYXRpbmdVSVByZXNldCA9ICh7IG1pZGRsZXdhcmUgPSBbXSwgcGxhY2VtZW50LCBzdHJhdGVneSwgb2Zmc2V0OiBvZmZzZXRJblB4ID0gMTAsIH0pID0+IHtcbiAgICBjb25zdCB7IHJlZnMsIHgsIHksIHVwZGF0ZSwgZWxlbWVudHM6IHsgZG9tUmVmZXJlbmNlLCBmbG9hdGluZyB9LCBjb250ZXh0LCB9ID0gdXNlRmxvYXRpbmcoe1xuICAgICAgICBwbGFjZW1lbnQsXG4gICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICBtaWRkbGV3YXJlOiBbXG4gICAgICAgICAgICBvZmZzZXQob2Zmc2V0SW5QeCksXG4gICAgICAgICAgICBzaGlmdCgpLFxuICAgICAgICAgICAgZmxpcCgpLFxuICAgICAgICAgICAgc2l6ZSh7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTAsXG4gICAgICAgICAgICAgICAgYXBwbHk6ICh7IGF2YWlsYWJsZUhlaWdodCwgZWxlbWVudHMgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGVsZW1lbnRzLmZsb2F0aW5nLnN0eWxlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IGAke2F2YWlsYWJsZUhlaWdodH1weGAsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC4uLm1pZGRsZXdhcmUsXG4gICAgICAgIF0sXG4gICAgfSk7XG4gICAgLy8gaGFuZGxlIHdpbmRvdyByZXNpemluZ1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghZG9tUmVmZXJlbmNlIHx8ICFmbG9hdGluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgY2xlYW51cCA9IGF1dG9VcGRhdGUoZG9tUmVmZXJlbmNlLCBmbG9hdGluZywgdXBkYXRlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFudXAoKTtcbiAgICB9LCBbZG9tUmVmZXJlbmNlLCBmbG9hdGluZywgdXBkYXRlXSk7XG4gICAgcmV0dXJuIHsgcmVmcywgeCwgeSwgZG9tUmVmZXJlbmNlLCBmbG9hdGluZywgc3RyYXRlZ3ksIGNvbnRleHQgfTtcbn07XG5cbmNvbnN0IGRlZmF1bHREZXZpY2UgPSAnZGVmYXVsdCc7XG4vKipcbiAqIFRoaXMgaG9vayB3aWxsIHBlcnNpc3QgdGhlIGRldmljZSBzZXR0aW5ncyB0byBsb2NhbCBzdG9yYWdlLlxuICpcbiAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byB1c2UgZm9yIGxvY2FsIHN0b3JhZ2UuXG4gKi9cbmNvbnN0IHVzZVBlcnNpc3REZXZpY2VQcmVmZXJlbmNlcyA9IChrZXkpID0+IHtcbiAgICBjb25zdCB7IHVzZU1pY3JvcGhvbmVTdGF0ZSwgdXNlQ2FtZXJhU3RhdGUsIHVzZVNwZWFrZXJTdGF0ZSB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IG1pYyA9IHVzZU1pY3JvcGhvbmVTdGF0ZSgpO1xuICAgIGNvbnN0IGNhbWVyYSA9IHVzZUNhbWVyYVN0YXRlKCk7XG4gICAgY29uc3Qgc3BlYWtlciA9IHVzZVNwZWFrZXJTdGF0ZSgpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGNhbGwuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuTEVGVClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByZWZlcmVuY2VzID0ge1xuICAgICAgICAgICAgICAgIG1pYzoge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZERldmljZUlkOiBtaWMuc2VsZWN0ZWREZXZpY2UgfHwgZGVmYXVsdERldmljZSxcbiAgICAgICAgICAgICAgICAgICAgbXV0ZWQ6IG1pYy5pc011dGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW1lcmE6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWREZXZpY2VJZDogY2FtZXJhLnNlbGVjdGVkRGV2aWNlIHx8IGRlZmF1bHREZXZpY2UsXG4gICAgICAgICAgICAgICAgICAgIG11dGVkOiBjYW1lcmEuaXNNdXRlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZERldmljZUlkOiBzcGVha2VyLnNlbGVjdGVkRGV2aWNlIHx8IGRlZmF1bHREZXZpY2UsXG4gICAgICAgICAgICAgICAgICAgIG11dGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHByZWZlcmVuY2VzKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc2F2ZSBkZXZpY2UgcHJlZmVyZW5jZXMnLCBlcnIpO1xuICAgICAgICB9XG4gICAgfSwgW1xuICAgICAgICBjYWxsLFxuICAgICAgICBjYW1lcmEuaXNNdXRlLFxuICAgICAgICBjYW1lcmEuc2VsZWN0ZWREZXZpY2UsXG4gICAgICAgIGtleSxcbiAgICAgICAgbWljLmlzTXV0ZSxcbiAgICAgICAgbWljLnNlbGVjdGVkRGV2aWNlLFxuICAgICAgICBzcGVha2VyLnNlbGVjdGVkRGV2aWNlLFxuICAgIF0pO1xufTtcbi8qKlxuICogVGhpcyBob29rIHdpbGwgYXBwbHkgdGhlIGRldmljZSBzZXR0aW5ncyBmcm9tIGxvY2FsIHN0b3JhZ2UuXG4gKlxuICogQHBhcmFtIGtleSB0aGUga2V5IHRvIHVzZSBmb3IgbG9jYWwgc3RvcmFnZS5cbiAqL1xuY29uc3QgdXNlQXBwbHlEZXZpY2VQcmVmZXJlbmNlcyA9IChrZXkpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGNhbGwuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuTEVGVClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgYXBwbHkgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbml0TWljID0gYXN5bmMgKHNldHRpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsLm1pY3JvcGhvbmUuc2VsZWN0KHBhcnNlRGV2aWNlSWQoc2V0dGluZy5zZWxlY3RlZERldmljZUlkKSk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcubXV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5taWNyb3Bob25lLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbGwubWljcm9waG9uZS5lbmFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgaW5pdENhbWVyYSA9IGFzeW5jIChzZXR0aW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuc2VsZWN0KHBhcnNlRGV2aWNlSWQoc2V0dGluZy5zZWxlY3RlZERldmljZUlkKSk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcubXV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuZGlzYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGluaXRTcGVha2VyID0gKHNldHRpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsLnNwZWFrZXIuc2VsZWN0KHBhcnNlRGV2aWNlSWQoc2V0dGluZy5zZWxlY3RlZERldmljZUlkKSA/PyAnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IHByZWZlcmVuY2VzID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcHJlZmVyZW5jZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGRldmljZSBwcmVmZXJlbmNlcycsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0TWljKHByZWZlcmVuY2VzLm1pYyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgaW5pdENhbWVyYShwcmVmZXJlbmNlcy5jYW1lcmEpO1xuICAgICAgICAgICAgICAgIGluaXRTcGVha2VyKHByZWZlcmVuY2VzLnNwZWFrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBhcHBseSgpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGFwcGx5IGRldmljZSBwcmVmZXJlbmNlcycsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sIFtjYWxsLCBrZXldKTtcbn07XG4vKipcbiAqIFRoaXMgaG9vayB3aWxsIGFwcGx5IGFuZCBwZXJzaXN0IHRoZSBkZXZpY2UgcHJlZmVyZW5jZXMgZnJvbSBsb2NhbCBzdG9yYWdlLlxuICpcbiAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byB1c2UgZm9yIGxvY2FsIHN0b3JhZ2UuXG4gKi9cbmNvbnN0IHVzZVBlcnNpc3RlZERldmljZVByZWZlcmVuY2VzID0gKGtleSA9ICdAc3RyZWFtLWlvL2RldmljZS1wcmVmZXJlbmNlcycpID0+IHtcbiAgICB1c2VBcHBseURldmljZVByZWZlcmVuY2VzKGtleSk7XG4gICAgdXNlUGVyc2lzdERldmljZVByZWZlcmVuY2VzKGtleSk7XG59O1xuY29uc3QgcGFyc2VEZXZpY2VJZCA9IChkZXZpY2VJZCkgPT4gZGV2aWNlSWQgIT09IGRlZmF1bHREZXZpY2UgPyBkZXZpY2VJZCA6IHVuZGVmaW5lZDtcblxuY29uc3QgU0NST0xMX1RIUkVTSE9MRCA9IDEwO1xuLyoqXG4gKiBIb29rIHdoaWNoIG9ic2VydmVzIGVsZW1lbnQncyBzY3JvbGwgcG9zaXRpb24gYW5kIHJldHVybnMgdGV4dCB2YWx1ZSBiYXNlZCBvbiB0aGVcbiAqIHBvc2l0aW9uIG9mIHRoZSBzY3JvbGxiYXIgKGB0b3BgLCBgYm90dG9tYCwgYGJldHdlZW5gIGFuZCBgbnVsbGAgaWYgbm8gc2Nyb2xsYmFyIGlzIGF2YWlsYWJsZSlcbiAqL1xuY29uc3QgdXNlVmVydGljYWxTY3JvbGxQb3NpdGlvbiA9IChzY3JvbGxFbGVtZW50LCB0aHJlc2hvbGQgPSBTQ1JPTExfVEhSRVNIT0xEKSA9PiB7XG4gICAgY29uc3QgW3Njcm9sbFBvc2l0aW9uLCBzZXRTY3JvbGxQb3NpdGlvbl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXNjcm9sbEVsZW1lbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHNjcm9sbEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gc2Nyb2xsRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGhhc1ZlcnRpY2FsU2Nyb2xsYmFyID0gZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGlmICghaGFzVmVydGljYWxTY3JvbGxiYXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFNjcm9sbFBvc2l0aW9uKG51bGwpO1xuICAgICAgICAgICAgY29uc3QgaXNBdFRoZVRvcCA9IGVsZW1lbnQuc2Nyb2xsVG9wIDw9IHRocmVzaG9sZDtcbiAgICAgICAgICAgIGlmIChpc0F0VGhlVG9wKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZXRTY3JvbGxQb3NpdGlvbigndG9wJyk7XG4gICAgICAgICAgICBjb25zdCBpc0F0VGhlQm90dG9tID0gTWF0aC5hYnMoZWxlbWVudC5zY3JvbGxIZWlnaHQgLSBlbGVtZW50LnNjcm9sbFRvcCAtIGVsZW1lbnQuY2xpZW50SGVpZ2h0KSA8PSB0aHJlc2hvbGQ7XG4gICAgICAgICAgICBpZiAoaXNBdFRoZUJvdHRvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0U2Nyb2xsUG9zaXRpb24oJ2JvdHRvbScpO1xuICAgICAgICAgICAgc2V0U2Nyb2xsUG9zaXRpb24oJ2JldHdlZW4nKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoc2Nyb2xsRWxlbWVudCk7XG4gICAgICAgIHNjcm9sbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBzY3JvbGxFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB9O1xuICAgIH0sIFtzY3JvbGxFbGVtZW50LCB0aHJlc2hvbGRdKTtcbiAgICByZXR1cm4gc2Nyb2xsUG9zaXRpb247XG59O1xuY29uc3QgdXNlSG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uID0gKHNjcm9sbEVsZW1lbnQsIHRocmVzaG9sZCA9IFNDUk9MTF9USFJFU0hPTEQpID0+IHtcbiAgICBjb25zdCBbc2Nyb2xsUG9zaXRpb24sIHNldFNjcm9sbFBvc2l0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghc2Nyb2xsRWxlbWVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3Qgc2Nyb2xsSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzY3JvbGxFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgaGFzSG9yaXpvbnRhbFNjcm9sbGJhciA9IGVsZW1lbnQuc2Nyb2xsV2lkdGggPiBlbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgaWYgKCFoYXNIb3Jpem9udGFsU2Nyb2xsYmFyKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZXRTY3JvbGxQb3NpdGlvbihudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IGlzQXRUaGVTdGFydCA9IGVsZW1lbnQuc2Nyb2xsTGVmdCA8PSB0aHJlc2hvbGQ7XG4gICAgICAgICAgICBpZiAoaXNBdFRoZVN0YXJ0KVxuICAgICAgICAgICAgICAgIHJldHVybiBzZXRTY3JvbGxQb3NpdGlvbignc3RhcnQnKTtcbiAgICAgICAgICAgIGNvbnN0IGlzQXRUaGVFbmQgPSBNYXRoLmFicyhlbGVtZW50LnNjcm9sbFdpZHRoIC0gZWxlbWVudC5zY3JvbGxMZWZ0IC0gZWxlbWVudC5jbGllbnRXaWR0aCkgPD0gdGhyZXNob2xkO1xuICAgICAgICAgICAgaWYgKGlzQXRUaGVFbmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFNjcm9sbFBvc2l0aW9uKCdlbmQnKTtcbiAgICAgICAgICAgIHNldFNjcm9sbFBvc2l0aW9uKCdiZXR3ZWVuJyk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHNjcm9sbEVsZW1lbnQpO1xuICAgICAgICBzY3JvbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgc2Nyb2xsRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgICAgIHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfTtcbiAgICB9LCBbc2Nyb2xsRWxlbWVudCwgdGhyZXNob2xkXSk7XG4gICAgcmV0dXJuIHNjcm9sbFBvc2l0aW9uO1xufTtcblxuY29uc3QgdXNlVG9nZ2xlQ2FsbFJlY29yZGluZyA9ICgpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgdXNlSXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzID0gdXNlSXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IFtpc0F3YWl0aW5nUmVzcG9uc2UsIHNldElzQXdhaXRpbmdSZXNwb25zZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgLy8gVE9ETzogYWRkIHBlcm1pc3Npb25zXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgLy8gd2Ugd2FpdCB1bnRpbCBjYWxsLnJlY29yZGluZ19zdGFydGVkL3N0b3BwZWQgZXZlbnQgdG8gZmxpcHMgdGhlXG4gICAgICAgIC8vIGBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzYCBzdGF0ZSB2YXJpYWJsZS5cbiAgICAgICAgLy8gT25jZSB0aGUgZmxpcCBoYXBwZW5zLCB3ZSByZW1vdmUgdGhlIGxvYWRpbmcgaW5kaWNhdG9yXG4gICAgICAgIHNldElzQXdhaXRpbmdSZXNwb25zZSgoaXNBd2FpdGluZykgPT4ge1xuICAgICAgICAgICAgaWYgKGlzQXdhaXRpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGlzQXdhaXRpbmc7XG4gICAgICAgIH0pO1xuICAgIH0sIFtpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzXSk7XG4gICAgY29uc3QgdG9nZ2xlQ2FsbFJlY29yZGluZyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldElzQXdhaXRpbmdSZXNwb25zZSh0cnVlKTtcbiAgICAgICAgICAgIGlmIChpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FsbD8uc3RvcFJlY29yZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FsbD8uc3RhcnRSZWNvcmRpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHN0YXJ0IHJlY29yZGluZ2AsIGUpO1xuICAgICAgICB9XG4gICAgfSwgW2NhbGwsIGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NdKTtcbiAgICByZXR1cm4geyB0b2dnbGVDYWxsUmVjb3JkaW5nLCBpc0F3YWl0aW5nUmVzcG9uc2UsIGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgfTtcbn07XG5cbmNvbnN0IHVzZVJlcXVlc3RQZXJtaXNzaW9uID0gKHBlcm1pc3Npb24pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgdXNlSGFzUGVybWlzc2lvbnMgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IHVzZUhhc1Blcm1pc3Npb25zKHBlcm1pc3Npb24pO1xuICAgIGNvbnN0IFtpc0F3YWl0aW5nUGVybWlzc2lvbiwgc2V0SXNBd2FpdGluZ1Blcm1pc3Npb25dID0gdXNlU3RhdGUoZmFsc2UpOyAvLyBUT0RPOiBsb2FkIHdpdGggcG9zc2libHkgcGVuZGluZyBzdGF0ZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc2V0ID0gKCkgPT4gc2V0SXNBd2FpdGluZ1Blcm1pc3Npb24oZmFsc2UpO1xuICAgICAgICBpZiAoaGFzUGVybWlzc2lvbilcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgfSwgW2hhc1Blcm1pc3Npb25dKTtcbiAgICBjb25zdCByZXF1ZXN0UGVybWlzc2lvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKGhhc1Blcm1pc3Npb24pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY29uc3QgY2FuUmVxdWVzdFBlcm1pc3Npb24gPSAhIWNhbGw/LnBlcm1pc3Npb25zQ29udGV4dC5jYW5SZXF1ZXN0KHBlcm1pc3Npb24pO1xuICAgICAgICBpZiAoaXNBd2FpdGluZ1Blcm1pc3Npb24gfHwgIWNhblJlcXVlc3RQZXJtaXNzaW9uKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBzZXRJc0F3YWl0aW5nUGVybWlzc2lvbih0cnVlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGNhbGw/LnJlcXVlc3RQZXJtaXNzaW9ucyh7XG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IFtwZXJtaXNzaW9uXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0SXNBd2FpdGluZ1Blcm1pc3Npb24oZmFsc2UpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGByZXF1ZXN0UGVybWlzc2lvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sIFtjYWxsLCBoYXNQZXJtaXNzaW9uLCBpc0F3YWl0aW5nUGVybWlzc2lvbiwgcGVybWlzc2lvbl0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3RQZXJtaXNzaW9uLFxuICAgICAgICBoYXNQZXJtaXNzaW9uLFxuICAgICAgICBjYW5SZXF1ZXN0UGVybWlzc2lvbjogISFjYWxsPy5wZXJtaXNzaW9uc0NvbnRleHQuY2FuUmVxdWVzdChwZXJtaXNzaW9uKSxcbiAgICAgICAgaXNBd2FpdGluZ1Blcm1pc3Npb24sXG4gICAgfTtcbn07XG5cbnZhciBNZW51VmlzdWFsVHlwZTtcbihmdW5jdGlvbiAoTWVudVZpc3VhbFR5cGUpIHtcbiAgICBNZW51VmlzdWFsVHlwZVtcIlBPUlRBTFwiXSA9IFwicG9ydGFsXCI7XG4gICAgTWVudVZpc3VhbFR5cGVbXCJNRU5VXCJdID0gXCJtZW51XCI7XG59KShNZW51VmlzdWFsVHlwZSB8fCAoTWVudVZpc3VhbFR5cGUgPSB7fSkpO1xuLyoqXG4gKiBVc2VkIHRvIHByb3ZpZGUgdXRpbGl0eSBBUElzIHRvIHRoZSBjb21wb25lbnRzIHJlbmRlcmVkIGluc2lkZSB0aGUgcG9ydGFsLlxuICovXG5jb25zdCBNZW51Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQoe30pO1xuLyoqXG4gKiBBY2Nlc3MgdG8gdGhlIGNsb3NlcyBNZW51Q29udGV4dC5cbiAqL1xuY29uc3QgdXNlTWVudUNvbnRleHQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHVzZUNvbnRleHQoTWVudUNvbnRleHQpO1xufTtcbmNvbnN0IE1lbnVQb3J0YWwgPSAoeyBjaGlsZHJlbiwgcmVmcywgfSkgPT4ge1xuICAgIGNvbnN0IHBvcnRhbElkID0gdXNlTWVtbygoKSA9PiBgc3RyLXZpZGVvLXBvcnRhbC0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KX1gLCBbXSk7XG4gICAgcmV0dXJuIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgaWQ6IHBvcnRhbElkLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wb3J0YWxcIiB9KSwganN4KEZsb2F0aW5nT3ZlcmxheSwgeyBjaGlsZHJlbjoganN4KEZsb2F0aW5nUG9ydGFsLCB7IGlkOiBwb3J0YWxJZCwgY2hpbGRyZW46IGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BvcnRhbC1jb250ZW50XCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgY2hpbGRyZW46IGNoaWxkcmVuIH0pIH0pIH0pXSB9KSk7XG59O1xuY29uc3QgTWVudVRvZ2dsZSA9ICh7IFRvZ2dsZUJ1dHRvbiwgcGxhY2VtZW50ID0gJ3RvcC1zdGFydCcsIHN0cmF0ZWd5ID0gJ2Fic29sdXRlJywgb2Zmc2V0LCB2aXN1YWxUeXBlID0gTWVudVZpc3VhbFR5cGUuTUVOVSwgY2hpbGRyZW4sIG9uVG9nZ2xlLCB9KSA9PiB7XG4gICAgY29uc3QgW21lbnVTaG93biwgc2V0TWVudVNob3duXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCB0b2dnbGVIYW5kbGVyID0gdXNlUmVmKG9uVG9nZ2xlKTtcbiAgICB0b2dnbGVIYW5kbGVyLmN1cnJlbnQgPSBvblRvZ2dsZTtcbiAgICBjb25zdCB7IGZsb2F0aW5nLCBkb21SZWZlcmVuY2UsIHJlZnMsIHgsIHkgfSA9IHVzZUZsb2F0aW5nVUlQcmVzZXQoe1xuICAgICAgICBwbGFjZW1lbnQsXG4gICAgICAgIHN0cmF0ZWd5LFxuICAgICAgICBvZmZzZXQsXG4gICAgfSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghZmxvYXRpbmcgJiYgZG9tUmVmZXJlbmNlPy5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgc2V0TWVudVNob3duKHRydWUpO1xuICAgICAgICAgICAgICAgIHRvZ2dsZUhhbmRsZXIuY3VycmVudD8uKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZmxvYXRpbmcgJiYgIWZsb2F0aW5nPy5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgc2V0TWVudVNob3duKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVIYW5kbGVyLmN1cnJlbnQ/LihmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgJiYgLy8ga2V5IGNhbiBiZSB1bmRlZmluZWQgaW4gc29tZSBicm93c2Vyc1xuICAgICAgICAgICAgICAgIGV2ZW50LmtleS50b0xvd2VyQ2FzZSgpID09PSAnZXNjYXBlJyAmJlxuICAgICAgICAgICAgICAgICFldmVudC5hbHRLZXkgJiZcbiAgICAgICAgICAgICAgICAhZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIHNldE1lbnVTaG93bihmYWxzZSk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlSGFuZGxlci5jdXJyZW50Py4oZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBkb2N1bWVudD8uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgIH07XG4gICAgfSwgW2Zsb2F0aW5nLCBkb21SZWZlcmVuY2VdKTtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFttZW51U2hvd24gJiYgKGpzeChNZW51Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBjbG9zZTogKCkgPT4gc2V0TWVudVNob3duKGZhbHNlKSB9LCBjaGlsZHJlbjogdmlzdWFsVHlwZSA9PT0gTWVudVZpc3VhbFR5cGUuUE9SVEFMID8gKGpzeChNZW51UG9ydGFsLCB7IHJlZnM6IHJlZnMsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSkgOiB2aXN1YWxUeXBlID09PSBNZW51VmlzdWFsVHlwZS5NRU5VID8gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX21lbnUtY29udGFpbmVyXCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdHJhdGVneSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogeSA/PyAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogeCA/PyAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIH0sIHJvbGU6IFwibWVudVwiLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpIDogbnVsbCB9KSksIGpzeChUb2dnbGVCdXR0b24sIHsgbWVudVNob3duOiBtZW51U2hvd24sIHJlZjogcmVmcy5zZXRSZWZlcmVuY2UgfSldIH0pKTtcbn07XG5cbmNvbnN0IEdlbmVyaWNNZW51ID0gKHsgY2hpbGRyZW4sIG9uSXRlbUNsaWNrLCB9KSA9PiB7XG4gICAgY29uc3QgcmVmID0gdXNlUmVmKG51bGwpO1xuICAgIHJldHVybiAoanN4KFwidWxcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19nZW5lcmljLW1lbnVcIiwgcmVmOiByZWYsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAob25JdGVtQ2xpY2sgJiZcbiAgICAgICAgICAgICAgICBlLnRhcmdldCAhPT0gcmVmLmN1cnJlbnQgJiZcbiAgICAgICAgICAgICAgICByZWYuY3VycmVudD8uY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgb25JdGVtQ2xpY2soZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuY29uc3QgR2VuZXJpY01lbnVCdXR0b25JdGVtID0gKHsgY2hpbGRyZW4sIC4uLnJlc3QgfSkgPT4ge1xuICAgIHJldHVybiAoanN4KFwibGlcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19nZW5lcmljLW1lbnUtLWl0ZW1cIiwgY2hpbGRyZW46IGpzeChcImJ1dHRvblwiLCB7IC4uLnJlc3QsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSB9KSk7XG59O1xuXG5jb25zdCBJY29uID0gKHsgY2xhc3NOYW1lLCBpY29uIH0pID0+IChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2ljb24nLCBpY29uICYmIGBzdHItdmlkZW9fX2ljb24tLSR7aWNvbn1gLCBjbGFzc05hbWUpIH0pKTtcblxuY29uc3QgSWNvbkJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gSWNvbkJ1dHRvbihwcm9wcywgcmVmKSB7XG4gICAgY29uc3QgeyBpY29uLCBlbmFibGVkLCB2YXJpYW50LCBvbkNsaWNrLCBjbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2NhbGwtY29udHJvbHNfX2J1dHRvbicsIGNsYXNzTmFtZSwge1xuICAgICAgICAgICAgW2BzdHItdmlkZW9fX2NhbGwtY29udHJvbHNfX2J1dHRvbi0tdmFyaWFudC0ke3ZhcmlhbnR9YF06IHZhcmlhbnQsXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19jYWxsLWNvbnRyb2xzX19idXR0b24tLWVuYWJsZWQnOiBlbmFibGVkLFxuICAgICAgICB9KSwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIG9uQ2xpY2s/LihlKTtcbiAgICAgICAgfSwgcmVmOiByZWYsIC4uLnJlc3QsIGNoaWxkcmVuOiBqc3goSWNvbiwgeyBpY29uOiBpY29uIH0pIH0pKTtcbn0pO1xuXG5jb25zdCBpc0NvbXBvbmVudFR5cGUgPSAoZWxlbWVudE9yQ29tcG9uZW50KSA9PiB7XG4gICAgcmV0dXJuIGVsZW1lbnRPckNvbXBvbmVudCA9PT0gbnVsbFxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDogIWlzVmFsaWRFbGVtZW50KGVsZW1lbnRPckNvbXBvbmVudCk7XG59O1xuXG5jb25zdCBjaHVuayA9IChhcnJheSwgc2l6ZSkgPT4ge1xuICAgIGNvbnN0IGNodW5rQ291bnQgPSBNYXRoLmNlaWwoYXJyYXkubGVuZ3RoIC8gc2l6ZSk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGNodW5rQ291bnQgfSwgKF8sIGluZGV4KSA9PiBhcnJheS5zbGljZShzaXplICogaW5kZXgsIHNpemUgKiBpbmRleCArIHNpemUpKTtcbn07XG5cbmNvbnN0IGFwcGx5RWxlbWVudFRvUmVmID0gKHJlZiwgZWxlbWVudCkgPT4ge1xuICAgIGlmICghcmVmKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiByZWYoZWxlbWVudCk7XG4gICAgcmVmLmN1cnJlbnQgPSBlbGVtZW50O1xufTtcblxuY29uc3QgQ29tcG9zaXRlQnV0dG9uID0gZm9yd2FyZFJlZihmdW5jdGlvbiBDb21wb3NpdGVCdXR0b24oeyBjYXB0aW9uLCBjaGlsZHJlbiwgY2xhc3NOYW1lLCBhY3RpdmUsIE1lbnUsIG1lbnVQbGFjZW1lbnQsIG1lbnVPZmZzZXQsIHRpdGxlLCBUb2dnbGVNZW51QnV0dG9uID0gRGVmYXVsdFRvZ2dsZU1lbnVCdXR0b24sIHZhcmlhbnQsIG9uQ2xpY2ssIG9uTWVudVRvZ2dsZSwgLi4ucmVzdEJ1dHRvblByb3BzIH0sIHJlZikge1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19jb21wb3NpdGUtYnV0dG9uJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAnc3RyLXZpZGVvX19jb21wb3NpdGUtYnV0dG9uLS1jYXB0aW9uJzogY2FwdGlvbixcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2NvbXBvc2l0ZS1idXR0b24tLW1lbnUnOiBNZW51LFxuICAgICAgICB9KSwgdGl0bGU6IHRpdGxlLCByZWY6IHJlZiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2NvbXBvc2l0ZS1idXR0b25fX2J1dHRvbi1ncm91cCcsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3N0ci12aWRlb19fY29tcG9zaXRlLWJ1dHRvbl9fYnV0dG9uLWdyb3VwLS1hY3RpdmUnOiBhY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICdzdHItdmlkZW9fX2NvbXBvc2l0ZS1idXR0b25fX2J1dHRvbi1ncm91cC0tYWN0aXZlLXByaW1hcnknOiBhY3RpdmUgJiYgdmFyaWFudCA9PT0gJ3ByaW1hcnknLFxuICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX19jb21wb3NpdGUtYnV0dG9uX19idXR0b24tZ3JvdXAtLWFjdGl2ZS1zZWNvbmRhcnknOiBhY3RpdmUgJiYgdmFyaWFudCA9PT0gJ3NlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgfSksIGNoaWxkcmVuOiBbanN4KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY29tcG9zaXRlLWJ1dHRvbl9fYnV0dG9uXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s/LihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3RCdXR0b25Qcm9wcywgY2hpbGRyZW46IGNoaWxkcmVuIH0pLCBNZW51ICYmIChqc3goTWVudVRvZ2dsZSwgeyBvZmZzZXQ6IG1lbnVPZmZzZXQsIHBsYWNlbWVudDogbWVudVBsYWNlbWVudCwgVG9nZ2xlQnV0dG9uOiBUb2dnbGVNZW51QnV0dG9uLCBvblRvZ2dsZTogb25NZW51VG9nZ2xlLCBjaGlsZHJlbjogaXNDb21wb25lbnRUeXBlKE1lbnUpID8ganN4KE1lbnUsIHt9KSA6IE1lbnUgfSkpXSB9KSwgY2FwdGlvbiAmJiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY29tcG9zaXRlLWJ1dHRvbl9fY2FwdGlvblwiLCBjaGlsZHJlbjogY2FwdGlvbiB9KSldIH0pKTtcbn0pO1xuY29uc3QgRGVmYXVsdFRvZ2dsZU1lbnVCdXR0b24gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIERlZmF1bHRUb2dnbGVNZW51QnV0dG9uKHsgbWVudVNob3duIH0sIHJlZikge1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX21lbnUtdG9nZ2xlLWJ1dHRvbicsIHtcbiAgICAgICAgICAgICdzdHItdmlkZW9fX21lbnUtdG9nZ2xlLWJ1dHRvbi0tYWN0aXZlJzogbWVudVNob3duLFxuICAgICAgICB9KSwgaWNvbjogbWVudVNob3duID8gJ2NhcmV0LWRvd24nIDogJ2NhcmV0LXVwJywgcmVmOiByZWYgfSkpO1xufSk7XG5cbmNvbnN0IFRleHRCdXR0b24gPSAoeyBjaGlsZHJlbiwgLi4ucmVzdCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goXCJidXR0b25cIiwgeyAuLi5yZXN0LCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX190ZXh0LWJ1dHRvblwiLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgQWNjZXB0Q2FsbEJ1dHRvbiA9ICh7IGRpc2FibGVkLCBvbkFjY2VwdCwgb25DbGljaywgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjayhhc3luYyAoZSkgPT4ge1xuICAgICAgICBpZiAob25DbGljaykge1xuICAgICAgICAgICAgb25DbGljayhlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBjYWxsLmpvaW4oKTtcbiAgICAgICAgICAgIG9uQWNjZXB0Py4oKTtcbiAgICAgICAgfVxuICAgIH0sIFtvbkNsaWNrLCBvbkFjY2VwdCwgY2FsbF0pO1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgZGlzYWJsZWQ6IGRpc2FibGVkLCBpY29uOiBcImNhbGwtYWNjZXB0XCIsIHZhcmlhbnQ6IFwic3VjY2Vzc1wiLCBcImRhdGEtdGVzdGlkXCI6IFwiYWNjZXB0LWNhbGwtYnV0dG9uXCIsIG9uQ2xpY2s6IGhhbmRsZUNsaWNrIH0pKTtcbn07XG5cbmNvbnN0IE5vdGlmaWNhdGlvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgaXNWaXNpYmxlLCBtZXNzYWdlLCBjaGlsZHJlbiwgdmlzaWJpbGl0eVRpbWVvdXQsIHJlc2V0SXNWaXNpYmxlLCBwbGFjZW1lbnQgPSAndG9wJywgaWNvbkNsYXNzTmFtZSA9ICdzdHItdmlkZW9fX25vdGlmaWNhdGlvbl9faWNvbicsIGNsb3NlLCB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyByZWZzLCB4LCB5LCBzdHJhdGVneSB9ID0gdXNlRmxvYXRpbmdVSVByZXNldCh7XG4gICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgfSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc1Zpc2libGUgfHwgIXZpc2liaWxpdHlUaW1lb3V0IHx8ICFyZXNldElzVmlzaWJsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVzZXRJc1Zpc2libGUoKTtcbiAgICAgICAgfSwgdmlzaWJpbGl0eVRpbWVvdXQpO1xuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH0sIFtpc1Zpc2libGUsIHJlc2V0SXNWaXNpYmxlLCB2aXNpYmlsaXR5VGltZW91dF0pO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IHJlZjogcmVmcy5zZXRSZWZlcmVuY2UsIGNoaWxkcmVuOiBbaXNWaXNpYmxlICYmIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbm90aWZpY2F0aW9uXCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHkgPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogeCA/PyAwLFxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbjogW2ljb25DbGFzc05hbWUgJiYganN4KFwiaVwiLCB7IGNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZSB9KSwganN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX25vdGlmaWNhdGlvbl9fbWVzc2FnZVwiLCBjaGlsZHJlbjogbWVzc2FnZSB9KSwgY2xvc2UgPyAoanN4KFwiaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2ljb24gc3RyLXZpZGVvX19pY29uLS1jbG9zZSBzdHItdmlkZW9fX25vdGlmaWNhdGlvbl9fY2xvc2VcIiwgb25DbGljazogY2xvc2UgfSkpIDogbnVsbF0gfSkpLCBjaGlsZHJlbl0gfSkpO1xufTtcblxuY29uc3QgUGVybWlzc2lvbk5vdGlmaWNhdGlvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgcGVybWlzc2lvbiwgaXNBd2FpdGluZ0FwcHJvdmFsLCBtZXNzYWdlQXBwcm92ZWQsIG1lc3NhZ2VBd2FpdGluZ0FwcHJvdmFsLCBtZXNzYWdlUmV2b2tlZCwgdmlzaWJpbGl0eVRpbWVvdXQgPSAzNTAwLCBjaGlsZHJlbiwgfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgdXNlSGFzUGVybWlzc2lvbnMgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IHVzZUhhc1Blcm1pc3Npb25zKHBlcm1pc3Npb24pO1xuICAgIGNvbnN0IHByZXZIYXNQZXJtaXNzaW9uID0gdXNlUmVmKGhhc1Blcm1pc3Npb24pO1xuICAgIGNvbnN0IFtzaG93Tm90aWZpY2F0aW9uLCBzZXRTaG93Tm90aWZpY2F0aW9uXSA9IHVzZVN0YXRlKCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGhhc1Blcm1pc3Npb24gJiYgIXByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHNldFNob3dOb3RpZmljYXRpb24oJ2dyYW50ZWQnKTtcbiAgICAgICAgICAgIHByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFoYXNQZXJtaXNzaW9uICYmIHByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHNldFNob3dOb3RpZmljYXRpb24oJ3Jldm9rZWQnKTtcbiAgICAgICAgICAgIHByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sIFtoYXNQZXJtaXNzaW9uXSk7XG4gICAgY29uc3QgcmVzZXRJc1Zpc2libGUgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRTaG93Tm90aWZpY2F0aW9uKHVuZGVmaW5lZCksIFtdKTtcbiAgICBpZiAoaXNBd2FpdGluZ0FwcHJvdmFsKSB7XG4gICAgICAgIHJldHVybiAoanN4KE5vdGlmaWNhdGlvbiwgeyBpc1Zpc2libGU6IGlzQXdhaXRpbmdBcHByb3ZhbCAmJiAhaGFzUGVybWlzc2lvbiwgbWVzc2FnZTogbWVzc2FnZUF3YWl0aW5nQXBwcm92YWwsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KE5vdGlmaWNhdGlvbiwgeyBpc1Zpc2libGU6ICEhc2hvd05vdGlmaWNhdGlvbiwgdmlzaWJpbGl0eVRpbWVvdXQ6IHZpc2liaWxpdHlUaW1lb3V0LCByZXNldElzVmlzaWJsZTogcmVzZXRJc1Zpc2libGUsIG1lc3NhZ2U6IHNob3dOb3RpZmljYXRpb24gPT09ICdncmFudGVkJyA/IG1lc3NhZ2VBcHByb3ZlZCA6IG1lc3NhZ2VSZXZva2VkLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgU3BlYWtpbmdXaGlsZU11dGVkTm90aWZpY2F0aW9uID0gKHsgY2hpbGRyZW4sIHRleHQsIHBsYWNlbWVudCwgfSkgPT4ge1xuICAgIGNvbnN0IHsgdXNlTWljcm9waG9uZVN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgaXNTcGVha2luZ1doaWxlTXV0ZWQgfSA9IHVzZU1pY3JvcGhvbmVTdGF0ZSgpO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZXh0ID8/IHQoJ1lvdSBhcmUgbXV0ZWQuIFVubXV0ZSB0byBzcGVhay4nKTtcbiAgICByZXR1cm4gKGpzeChOb3RpZmljYXRpb24sIHsgbWVzc2FnZTogbWVzc2FnZSwgaXNWaXNpYmxlOiBpc1NwZWFraW5nV2hpbGVNdXRlZCwgcGxhY2VtZW50OiBwbGFjZW1lbnQgfHwgJ3RvcC1zdGFydCcsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuXG5jb25zdCBSZWNvcmRpbmdJblByb2dyZXNzTm90aWZpY2F0aW9uID0gKHsgY2hpbGRyZW4sIHRleHQsIH0pID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgfSA9IHVzZVRvZ2dsZUNhbGxSZWNvcmRpbmcoKTtcbiAgICBjb25zdCBbaXNWaXNpYmxlLCBzZXRWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBtZXNzYWdlID0gdGV4dCA/PyB0KCdSZWNvcmRpbmcgaW4gcHJvZ3Jlc3MuLi4nKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2lzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NdKTtcbiAgICByZXR1cm4gKGpzeChOb3RpZmljYXRpb24sIHsgbWVzc2FnZTogbWVzc2FnZSwgaWNvbkNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2ljb24gc3RyLXZpZGVvX19pY29uLS1yZWNvcmRpbmctb25cIiwgaXNWaXNpYmxlOiBpc1Zpc2libGUsIHBsYWNlbWVudDogXCJ0b3Atc3RhcnRcIiwgY2xvc2U6ICgpID0+IHNldFZpc2libGUoZmFsc2UpLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgTG9hZGluZ0luZGljYXRvciA9ICh7IGNsYXNzTmFtZSwgdHlwZSA9ICdzcGlubmVyJywgdGV4dCwgdG9vbHRpcCwgfSkgPT4ge1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19sb2FkaW5nLWluZGljYXRvcicsIGNsYXNzTmFtZSksIHRpdGxlOiB0b29sdGlwLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19sb2FkaW5nLWluZGljYXRvcl9faWNvbicsIHR5cGUpIH0pLCB0ZXh0ICYmIGpzeChcInBcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19sb2FkaW5nLWluZGljYXRvci10ZXh0XCIsIGNoaWxkcmVuOiB0ZXh0IH0pXSB9KSk7XG59O1xuXG5jb25zdCBUb29sdGlwID0gKHsgY2hpbGRyZW4sIHJlZmVyZW5jZUVsZW1lbnQsIHRvb2x0aXBDbGFzc05hbWUsIHRvb2x0aXBQbGFjZW1lbnQgPSAndG9wJywgdmlzaWJsZSA9IGZhbHNlLCB9KSA9PiB7XG4gICAgY29uc3QgYXJyb3dSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgeyByZWZzLCB4LCB5LCBzdHJhdGVneSwgY29udGV4dCB9ID0gdXNlRmxvYXRpbmdVSVByZXNldCh7XG4gICAgICAgIHBsYWNlbWVudDogdG9vbHRpcFBsYWNlbWVudCxcbiAgICAgICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgICAgIG1pZGRsZXdhcmU6IFthcnJvdyh7IGVsZW1lbnQ6IGFycm93UmVmIH0pXSxcbiAgICB9KTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICByZWZzLnNldFJlZmVyZW5jZShyZWZlcmVuY2VFbGVtZW50KTtcbiAgICB9LCBbcmVmZXJlbmNlRWxlbWVudCwgcmVmc10pO1xuICAgIGlmICghdmlzaWJsZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3Rvb2x0aXAnLCB0b29sdGlwQ2xhc3NOYW1lKSwgcmVmOiByZWZzLnNldEZsb2F0aW5nLCBzdHlsZToge1xuICAgICAgICAgICAgcG9zaXRpb246IHN0cmF0ZWd5LFxuICAgICAgICAgICAgdG9wOiB5ID8/IDAsXG4gICAgICAgICAgICBsZWZ0OiB4ID8/IDAsXG4gICAgICAgIH0sIGNoaWxkcmVuOiBbanN4KEZsb2F0aW5nQXJyb3csIHsgcmVmOiBhcnJvd1JlZiwgY29udGV4dDogY29udGV4dCwgZmlsbDogXCJ2YXIoLS1zdHItdmlkZW9fX3Rvb2x0aXAtLWJhY2tncm91bmQtY29sb3IpXCIgfSksIGNoaWxkcmVuXSB9KSk7XG59O1xuXG5jb25zdCB1c2VFbnRlckxlYXZlSGFuZGxlcnMgPSAoeyBvbk1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZSwgfSA9IHt9KSA9PiB7XG4gICAgY29uc3QgW3Rvb2x0aXBWaXNpYmxlLCBzZXRUb29sdGlwVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgaGFuZGxlTW91c2VFbnRlciA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgICAgIHNldFRvb2x0aXBWaXNpYmxlKHRydWUpO1xuICAgICAgICBvbk1vdXNlRW50ZXI/LihlKTtcbiAgICB9LCBbb25Nb3VzZUVudGVyXSk7XG4gICAgY29uc3QgaGFuZGxlTW91c2VMZWF2ZSA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgICAgIHNldFRvb2x0aXBWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgb25Nb3VzZUxlYXZlPy4oZSk7XG4gICAgfSwgW29uTW91c2VMZWF2ZV0pO1xuICAgIHJldHVybiB7IGhhbmRsZU1vdXNlRW50ZXIsIGhhbmRsZU1vdXNlTGVhdmUsIHRvb2x0aXBWaXNpYmxlIH07XG59O1xuXG4vLyB0b2RvOiBkdXBsaWNhdGUgb2YgQ2FsbFBhcnRpY2lwYW50TGlzdC50c3gjTWVkaWFJbmRpY2F0b3IgLSByZWZhY3RvciB0byBhIHNpbmdsZSBjb21wb25lbnRcbmNvbnN0IFdpdGhUb29sdGlwID0gKHsgdGl0bGUsIHRvb2x0aXBDbGFzc05hbWUsIHRvb2x0aXBQbGFjZW1lbnQsIHRvb2x0aXBEaXNhYmxlZCwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IHsgaGFuZGxlTW91c2VFbnRlciwgaGFuZGxlTW91c2VMZWF2ZSwgdG9vbHRpcFZpc2libGUgfSA9IHVzZUVudGVyTGVhdmVIYW5kbGVycygpO1xuICAgIGNvbnN0IFt0b29sdGlwQW5jaG9yLCBzZXRUb29sdGlwQW5jaG9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IHRvb2x0aXBBY3R1YWxseVZpc2libGUgPSAhdG9vbHRpcERpc2FibGVkICYmIEJvb2xlYW4odGl0bGUpICYmIHRvb2x0aXBWaXNpYmxlO1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeChUb29sdGlwLCB7IHJlZmVyZW5jZUVsZW1lbnQ6IHRvb2x0aXBBbmNob3IsIHZpc2libGU6IHRvb2x0aXBBY3R1YWxseVZpc2libGUsIHRvb2x0aXBDbGFzc05hbWU6IHRvb2x0aXBDbGFzc05hbWUsIHRvb2x0aXBQbGFjZW1lbnQ6IHRvb2x0aXBQbGFjZW1lbnQsIGNoaWxkcmVuOiB0aXRsZSB8fCAnJyB9KSwganN4KFwiZGl2XCIsIHsgcmVmOiBzZXRUb29sdGlwQW5jaG9yLCBvbk1vdXNlRW50ZXI6IGhhbmRsZU1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZTogaGFuZGxlTW91c2VMZWF2ZSwgLi4ucHJvcHMgfSldIH0pKTtcbn07XG5cbmNvbnN0IFJlY29yZEVuZENvbmZpcm1hdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHRvZ2dsZUNhbGxSZWNvcmRpbmcsIGlzQXdhaXRpbmdSZXNwb25zZSB9ID0gdXNlVG9nZ2xlQ2FsbFJlY29yZGluZygpO1xuICAgIGNvbnN0IHsgY2xvc2UgfSA9IHVzZU1lbnVDb250ZXh0KCk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZW5kLXJlY29yZGluZ19fY29uZmlybWF0aW9uXCIsIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2VuZC1yZWNvcmRpbmdfX2hlYWRlclwiLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwicmVjb3JkaW5nLW9uXCIgfSksIGpzeChcImgyXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZW5kLXJlY29yZGluZ19faGVhZGluZ1wiLCBjaGlsZHJlbjogdCgnRW5kIHJlY29yZGluZycpIH0pXSB9KSwganN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2VuZC1yZWNvcmRpbmdfX2Rlc2NyaXB0aW9uXCIsIGNoaWxkcmVuOiB0KCdBcmUgeW91IHN1cmUgeW91IHdhbnQgZW5kIHRoZSByZWNvcmRpbmc/JykgfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19lbmQtcmVjb3JkaW5nX19hY3Rpb25zXCIsIGNoaWxkcmVuOiBbanN4KENvbXBvc2l0ZUJ1dHRvbiwgeyB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBvbkNsaWNrOiBjbG9zZSwgY2hpbGRyZW46IHQoJ0NhbmNlbCcpIH0pLCBqc3goQ29tcG9zaXRlQnV0dG9uLCB7IHZhcmlhbnQ6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiB0b2dnbGVDYWxsUmVjb3JkaW5nLCBjaGlsZHJlbjogaXNBd2FpdGluZ1Jlc3BvbnNlID8ganN4KExvYWRpbmdJbmRpY2F0b3IsIHt9KSA6IHQoJ0VuZCByZWNvcmRpbmcnKSB9KV0gfSldIH0pKTtcbn07XG5jb25zdCBUb2dnbGVFbmRSZWNvcmRpbmdNZW51QnV0dG9uID0gZm9yd2FyZFJlZihmdW5jdGlvbiBUb2dnbGVFbmRSZWNvcmRpbmdNZW51QnV0dG9uKHByb3BzLCByZWYpIHtcbiAgICByZXR1cm4gKGpzeChDb21wb3NpdGVCdXR0b24sIHsgcmVmOiByZWYsIGFjdGl2ZTogdHJ1ZSwgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgXCJkYXRhLXRlc3RpZFwiOiBcInJlY29yZGluZy1zdG9wLWJ1dHRvblwiLCBjaGlsZHJlbjoganN4KEljb24sIHsgaWNvbjogXCJyZWNvcmRpbmctb2ZmXCIgfSkgfSkpO1xufSk7XG5jb25zdCBSZWNvcmRDYWxsQ29uZmlybWF0aW9uQnV0dG9uID0gKHsgY2FwdGlvbiwgfSkgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IHsgdG9nZ2xlQ2FsbFJlY29yZGluZywgaXNBd2FpdGluZ1Jlc3BvbnNlLCBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzIH0gPSB1c2VUb2dnbGVDYWxsUmVjb3JkaW5nKCk7XG4gICAgaWYgKGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MpIHtcbiAgICAgICAgcmV0dXJuIChqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW1xuICAgICAgICAgICAgICAgIE93bkNhcGFiaWxpdHkuU1RBUlRfUkVDT1JEX0NBTEwsXG4gICAgICAgICAgICAgICAgT3duQ2FwYWJpbGl0eS5TVE9QX1JFQ09SRF9DQUxMLFxuICAgICAgICAgICAgXSwgY2hpbGRyZW46IGpzeChNZW51VG9nZ2xlLCB7IFRvZ2dsZUJ1dHRvbjogVG9nZ2xlRW5kUmVjb3JkaW5nTWVudUJ1dHRvbiwgdmlzdWFsVHlwZTogTWVudVZpc3VhbFR5cGUuUE9SVEFMLCBjaGlsZHJlbjoganN4KFJlY29yZEVuZENvbmZpcm1hdGlvbiwge30pIH0pIH0pKTtcbiAgICB9XG4gICAgY29uc3QgdGl0bGUgPSBpc0F3YWl0aW5nUmVzcG9uc2VcbiAgICAgICAgPyB0KCdXYWl0aW5nIGZvciByZWNvcmRpbmcgdG8gc3RhcnQuLi4nKVxuICAgICAgICA6IGNhcHRpb24gPz8gdCgnUmVjb3JkIGNhbGwnKTtcbiAgICByZXR1cm4gKGpzeChSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbXG4gICAgICAgICAgICBPd25DYXBhYmlsaXR5LlNUQVJUX1JFQ09SRF9DQUxMLFxuICAgICAgICAgICAgT3duQ2FwYWJpbGl0eS5TVE9QX1JFQ09SRF9DQUxMLFxuICAgICAgICBdLCBjaGlsZHJlbjoganN4KFdpdGhUb29sdGlwLCB7IHRpdGxlOiB0aXRsZSwgY2hpbGRyZW46IGpzeChDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzLCBjYXB0aW9uOiBjYXB0aW9uLCB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBcImRhdGEtdGVzdGlkXCI6IFwicmVjb3JkaW5nLXN0YXJ0LWJ1dHRvblwiLCBvbkNsaWNrOiBpc0F3YWl0aW5nUmVzcG9uc2UgPyB1bmRlZmluZWQgOiB0b2dnbGVDYWxsUmVjb3JkaW5nLCBjaGlsZHJlbjogaXNBd2FpdGluZ1Jlc3BvbnNlID8gKGpzeChMb2FkaW5nSW5kaWNhdG9yLCB7fSkpIDogKGpzeChJY29uLCB7IGljb246IFwicmVjb3JkaW5nLW9mZlwiIH0pKSB9KSB9KSB9KSk7XG59O1xuY29uc3QgUmVjb3JkQ2FsbEJ1dHRvbiA9ICh7IGNhcHRpb24gfSkgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IHsgdG9nZ2xlQ2FsbFJlY29yZGluZywgaXNBd2FpdGluZ1Jlc3BvbnNlLCBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzIH0gPSB1c2VUb2dnbGVDYWxsUmVjb3JkaW5nKCk7XG4gICAgbGV0IHRpdGxlID0gY2FwdGlvbiA/PyB0KCdSZWNvcmQgY2FsbCcpO1xuICAgIGlmIChpc0F3YWl0aW5nUmVzcG9uc2UpIHtcbiAgICAgICAgdGl0bGUgPSBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzXG4gICAgICAgICAgICA/IHQoJ1dhaXRpbmcgZm9yIHJlY29yZGluZyB0byBzdG9wLi4uJylcbiAgICAgICAgICAgIDogdCgnV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIHN0YXJ0Li4uJyk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtcbiAgICAgICAgICAgIE93bkNhcGFiaWxpdHkuU1RBUlRfUkVDT1JEX0NBTEwsXG4gICAgICAgICAgICBPd25DYXBhYmlsaXR5LlNUT1BfUkVDT1JEX0NBTEwsXG4gICAgICAgIF0sIGNoaWxkcmVuOiBqc3goQ29tcG9zaXRlQnV0dG9uLCB7IGFjdGl2ZTogaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcywgY2FwdGlvbjogY2FwdGlvbiwgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgXCJkYXRhLXRlc3RpZFwiOiBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzXG4gICAgICAgICAgICAgICAgPyAncmVjb3JkaW5nLXN0b3AtYnV0dG9uJ1xuICAgICAgICAgICAgICAgIDogJ3JlY29yZGluZy1zdGFydC1idXR0b24nLCB0aXRsZTogdGl0bGUsIG9uQ2xpY2s6IGlzQXdhaXRpbmdSZXNwb25zZSA/IHVuZGVmaW5lZCA6IHRvZ2dsZUNhbGxSZWNvcmRpbmcsIGNoaWxkcmVuOiBpc0F3YWl0aW5nUmVzcG9uc2UgPyAoanN4KExvYWRpbmdJbmRpY2F0b3IsIHt9KSkgOiAoanN4KEljb24sIHsgaWNvbjogaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcyA/ICdyZWNvcmRpbmctb24nIDogJ3JlY29yZGluZy1vZmYnIH0pKSB9KSB9KSk7XG59O1xuXG5jb25zdCBkZWZhdWx0RW1vamlSZWFjdGlvbk1hcCA9IHtcbiAgICAnOmxpa2U6JzogJ/CfkY0nLFxuICAgICc6cmFpc2UtaGFuZDonOiAn4pyLJyxcbiAgICAnOmZpcmV3b3JrczonOiAn8J+OiScsXG4gICAgJzpkaXNsaWtlOic6ICfwn5GOJyxcbiAgICAnOmhlYXJ0Oic6ICfinaTvuI8nLFxuICAgICc6c21pbGU6JzogJ/CfmIAnLFxufTtcbmNvbnN0IFJlYWN0aW9uID0gKHsgcGFydGljaXBhbnQ6IHsgcmVhY3Rpb24sIHNlc3Npb25JZCB9LCBoaWRlQWZ0ZXJUaW1lb3V0SW5NcyA9IDU1MDAsIGVtb2ppUmVhY3Rpb25NYXAgPSBkZWZhdWx0RW1vamlSZWFjdGlvbk1hcCwgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjYWxsIHx8ICFyZWFjdGlvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjYWxsLnJlc2V0UmVhY3Rpb24oc2Vzc2lvbklkKTtcbiAgICAgICAgfSwgaGlkZUFmdGVyVGltZW91dEluTXMpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGwsIGhpZGVBZnRlclRpbWVvdXRJbk1zLCByZWFjdGlvbiwgc2Vzc2lvbklkXSk7XG4gICAgaWYgKCFyZWFjdGlvbilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgeyBlbW9qaV9jb2RlOiBlbW9qaUNvZGUgfSA9IHJlYWN0aW9uO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcmVhY3Rpb25cIiwgY2hpbGRyZW46IGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19yZWFjdGlvbl9fZW1vamlcIiwgY2hpbGRyZW46IGVtb2ppQ29kZSAmJiBlbW9qaVJlYWN0aW9uTWFwW2Vtb2ppQ29kZV0gfSkgfSkpO1xufTtcblxuY29uc3QgZGVmYXVsdFJlYWN0aW9ucyA9IFtcbiAgICB7XG4gICAgICAgIHR5cGU6ICdyZWFjdGlvbicsXG4gICAgICAgIGVtb2ppX2NvZGU6ICc6bGlrZTonLFxuICAgIH0sXG4gICAge1xuICAgICAgICAvLyBUT0RPIE9MOiB1c2UgYHByb21wdGAgdHlwZT9cbiAgICAgICAgdHlwZTogJ3JhaXNlZC1oYW5kJyxcbiAgICAgICAgZW1vamlfY29kZTogJzpyYWlzZS1oYW5kOicsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6ICdyZWFjdGlvbicsXG4gICAgICAgIGVtb2ppX2NvZGU6ICc6ZmlyZXdvcmtzOicsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6ICdyZWFjdGlvbicsXG4gICAgICAgIGVtb2ppX2NvZGU6ICc6ZGlzbGlrZTonLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAncmVhY3Rpb24nLFxuICAgICAgICBlbW9qaV9jb2RlOiAnOmhlYXJ0OicsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6ICdyZWFjdGlvbicsXG4gICAgICAgIGVtb2ppX2NvZGU6ICc6c21pbGU6JyxcbiAgICB9LFxuXTtcbmNvbnN0IFJlYWN0aW9uc0J1dHRvbiA9ICh7IHJlYWN0aW9ucyA9IGRlZmF1bHRSZWFjdGlvbnMsIH0pID0+IHtcbiAgICByZXR1cm4gKGpzeChSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbT3duQ2FwYWJpbGl0eS5DUkVBVEVfUkVBQ1RJT05dLCBjaGlsZHJlbjoganN4KE1lbnVUb2dnbGUsIHsgcGxhY2VtZW50OiBcInRvcFwiLCBUb2dnbGVCdXR0b246IFRvZ2dsZVJlYWN0aW9uc01lbnVCdXR0b24sIHZpc3VhbFR5cGU6IE1lbnVWaXN1YWxUeXBlLk1FTlUsIGNoaWxkcmVuOiBqc3goRGVmYXVsdFJlYWN0aW9uc01lbnUsIHsgcmVhY3Rpb25zOiByZWFjdGlvbnMgfSkgfSkgfSkpO1xufTtcbmNvbnN0IFRvZ2dsZVJlYWN0aW9uc01lbnVCdXR0b24gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIFRvZ2dsZVJlYWN0aW9uc01lbnVCdXR0b24oeyBtZW51U2hvd24gfSwgcmVmKSB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgcmV0dXJuIChqc3goV2l0aFRvb2x0aXAsIHsgdGl0bGU6IHQoJ1JlYWN0aW9ucycpLCB0b29sdGlwRGlzYWJsZWQ6IG1lbnVTaG93biwgY2hpbGRyZW46IGpzeChDb21wb3NpdGVCdXR0b24sIHsgcmVmOiByZWYsIGFjdGl2ZTogbWVudVNob3duLCB2YXJpYW50OiBcInByaW1hcnlcIiwgY2hpbGRyZW46IGpzeChJY29uLCB7IGljb246IFwicmVhY3Rpb25zXCIgfSkgfSkgfSkpO1xufSk7XG5jb25zdCBEZWZhdWx0UmVhY3Rpb25zTWVudSA9ICh7IHJlYWN0aW9ucywgbGF5b3V0ID0gJ2hvcml6b250YWwnLCB9KSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IGNsb3NlIH0gPSB1c2VNZW51Q29udGV4dCgpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3JlYWN0aW9ucy1tZW51Jywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fcmVhY3Rpb25zLW1lbnUtLWhvcml6b250YWwnOiBsYXlvdXQgPT09ICdob3Jpem9udGFsJyxcbiAgICAgICAgICAgICdzdHItdmlkZW9fX3JlYWN0aW9ucy1tZW51LS12ZXJ0aWNhbCc6IGxheW91dCA9PT0gJ3ZlcnRpY2FsJyxcbiAgICAgICAgfSksIGNoaWxkcmVuOiByZWFjdGlvbnMubWFwKChyZWFjdGlvbikgPT4gKGpzeChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3JlYWN0aW9ucy1tZW51X19idXR0b25cIiwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGw/LnNlbmRSZWFjdGlvbihyZWFjdGlvbik7XG4gICAgICAgICAgICAgICAgY2xvc2U/LigpO1xuICAgICAgICAgICAgfSwgY2hpbGRyZW46IHJlYWN0aW9uLmVtb2ppX2NvZGUgJiYgZGVmYXVsdEVtb2ppUmVhY3Rpb25NYXBbcmVhY3Rpb24uZW1vamlfY29kZV0gfSwgcmVhY3Rpb24uZW1vamlfY29kZSkpKSB9KSk7XG59O1xuXG4vKipcbiAqIFdyYXBzIGFuIGV2ZW50IGhhbmRsZXIsIHNpbGVuY2luZyBhbmQgbG9nZ2luZyBleGNlcHRpb25zIChleGNsdWRpbmcgdGhlIE5vdEFsbG93ZWRFcnJvclxuICogRE9NRXhjZXB0aW9uLCB3aGljaCBpcyBhIG5vcm1hbCBzaXR1YXRpb24gaGFuZGxlZCBieSB0aGUgU0RLKVxuICpcbiAqIEBwYXJhbSBwcm9wcyBjb21wb25lbnQgcHJvcHMsIGluY2x1ZGluZyB0aGUgb25FcnJvciBjYWxsYmFja1xuICogQHBhcmFtIGhhbmRsZXIgZXZlbnQgaGFuZGxlciB0byB3cmFwXG4gKi9cbmNvbnN0IGNyZWF0ZUNhbGxDb250cm9sSGFuZGxlciA9IChwcm9wcywgaGFuZGxlcikgPT4ge1xuICAgIGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcihbJ3JlYWN0LXNkayddKTtcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHByb3BzLm9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBwcm9wcy5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzTm90QWxsb3dlZEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlcignZXJyb3InLCAnQ2FsbCBjb250cm9sIGhhbmRsZXIgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn07XG5mdW5jdGlvbiBpc05vdEFsbG93ZWRFcnJvcihlcnJvcikge1xuICAgIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnJvci5uYW1lID09PSAnTm90QWxsb3dlZEVycm9yJztcbn1cblxuY29uc3QgU2NyZWVuU2hhcmVCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IGNhcHRpb24gfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgdXNlSGFzT25nb2luZ1NjcmVlblNoYXJlLCB1c2VTY3JlZW5TaGFyZVN0YXRlLCB1c2VDYWxsU2V0dGluZ3MgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgaXNTb21lb25lU2NyZWVuU2hhcmluZyA9IHVzZUhhc09uZ29pbmdTY3JlZW5TaGFyZSgpO1xuICAgIGNvbnN0IHsgaGFzUGVybWlzc2lvbiwgcmVxdWVzdFBlcm1pc3Npb24sIGlzQXdhaXRpbmdQZXJtaXNzaW9uIH0gPSB1c2VSZXF1ZXN0UGVybWlzc2lvbihPd25DYXBhYmlsaXR5LlNDUkVFTlNIQVJFKTtcbiAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSB1c2VDYWxsU2V0dGluZ3MoKTtcbiAgICBjb25zdCBpc1NjcmVlblNoYXJpbmdBbGxvd2VkID0gY2FsbFNldHRpbmdzPy5zY3JlZW5zaGFyaW5nLmVuYWJsZWQ7XG4gICAgY29uc3QgeyBzY3JlZW5TaGFyZSwgb3B0aW1pc3RpY0lzTXV0ZSB9ID0gdXNlU2NyZWVuU2hhcmVTdGF0ZSgpO1xuICAgIGNvbnN0IGFtSVNjcmVlblNoYXJpbmcgPSAhb3B0aW1pc3RpY0lzTXV0ZTtcbiAgICBjb25zdCBkaXNhYmxlU2NyZWVuU2hhcmVCdXR0b24gPSAhYW1JU2NyZWVuU2hhcmluZyAmJlxuICAgICAgICAoaXNTb21lb25lU2NyZWVuU2hhcmluZyB8fCBpc1NjcmVlblNoYXJpbmdBbGxvd2VkID09PSBmYWxzZSk7XG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSBjcmVhdGVDYWxsQ29udHJvbEhhbmRsZXIocHJvcHMsIGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFoYXNQZXJtaXNzaW9uKSB7XG4gICAgICAgICAgICBhd2FpdCByZXF1ZXN0UGVybWlzc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgc2NyZWVuU2hhcmUudG9nZ2xlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gKGpzeChSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRV0sIGNoaWxkcmVuOiBqc3goUGVybWlzc2lvbk5vdGlmaWNhdGlvbiwgeyBwZXJtaXNzaW9uOiBPd25DYXBhYmlsaXR5LlNDUkVFTlNIQVJFLCBpc0F3YWl0aW5nQXBwcm92YWw6IGlzQXdhaXRpbmdQZXJtaXNzaW9uLCBtZXNzYWdlQXBwcm92ZWQ6IHQoJ1lvdSBjYW4gbm93IHNoYXJlIHlvdXIgc2NyZWVuLicpLCBtZXNzYWdlQXdhaXRpbmdBcHByb3ZhbDogdCgnQXdhaXRpbmcgZm9yIGFuIGFwcHJvdmFsIHRvIHNoYXJlIHNjcmVlbi4nKSwgbWVzc2FnZVJldm9rZWQ6IHQoJ1lvdSBjYW4gbm8gbG9uZ2VyIHNoYXJlIHlvdXIgc2NyZWVuLicpLCBjaGlsZHJlbjoganN4KFdpdGhUb29sdGlwLCB7IHRpdGxlOiBjYXB0aW9uID8/IHQoJ1NoYXJlIHNjcmVlbicpLCBjaGlsZHJlbjoganN4KENvbXBvc2l0ZUJ1dHRvbiwgeyBhY3RpdmU6IGlzU29tZW9uZVNjcmVlblNoYXJpbmcgfHwgYW1JU2NyZWVuU2hhcmluZywgY2FwdGlvbjogY2FwdGlvbiwgdmFyaWFudDogXCJwcmltYXJ5XCIsIFwiZGF0YS10ZXN0aWRcIjogaXNTb21lb25lU2NyZWVuU2hhcmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAnc2NyZWVuLXNoYXJlLXN0b3AtYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnc2NyZWVuLXNoYXJlLXN0YXJ0LWJ1dHRvbicsIGRpc2FibGVkOiBkaXNhYmxlU2NyZWVuU2hhcmVCdXR0b24sIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLCBjaGlsZHJlbjoganN4KEljb24sIHsgaWNvbjogaXNTb21lb25lU2NyZWVuU2hhcmluZyA/ICdzY3JlZW4tc2hhcmUtb24nIDogJ3NjcmVlbi1zaGFyZS1vZmYnIH0pIH0pIH0pIH0pIH0pKTtcbn07XG5cbmNvbnN0IFNlbGVjdENvbnRleHQgPSBjcmVhdGVDb250ZXh0KHt9KTtcbmNvbnN0IFNlbGVjdCA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4sIGljb24sIGRlZmF1bHRTZWxlY3RlZExhYmVsLCBkZWZhdWx0U2VsZWN0ZWRJbmRleCwgaGFuZGxlU2VsZWN0OiBoYW5kbGVTZWxlY3RQcm9wLCB9ID0gcHJvcHM7XG4gICAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbYWN0aXZlSW5kZXgsIHNldEFjdGl2ZUluZGV4XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtzZWxlY3RlZEluZGV4LCBzZXRTZWxlY3RlZEluZGV4XSA9IHVzZVN0YXRlKGRlZmF1bHRTZWxlY3RlZEluZGV4KTtcbiAgICBjb25zdCBbc2VsZWN0ZWRMYWJlbCwgc2V0U2VsZWN0ZWRMYWJlbF0gPSB1c2VTdGF0ZShkZWZhdWx0U2VsZWN0ZWRMYWJlbCk7XG4gICAgY29uc3QgeyByZWZzLCBjb250ZXh0IH0gPSB1c2VGbG9hdGluZyh7XG4gICAgICAgIHBsYWNlbWVudDogJ2JvdHRvbS1zdGFydCcsXG4gICAgICAgIG9wZW46IGlzT3BlbixcbiAgICAgICAgb25PcGVuQ2hhbmdlOiBzZXRJc09wZW4sXG4gICAgICAgIHdoaWxlRWxlbWVudHNNb3VudGVkOiBhdXRvVXBkYXRlLFxuICAgICAgICBtaWRkbGV3YXJlOiBbZmxpcCgpXSxcbiAgICB9KTtcbiAgICBjb25zdCBlbGVtZW50c1JlZiA9IHVzZVJlZihbXSk7XG4gICAgY29uc3QgbGFiZWxzUmVmID0gdXNlUmVmKFtdKTtcbiAgICBjb25zdCBoYW5kbGVTZWxlY3QgPSB1c2VDYWxsYmFjaygoaW5kZXgpID0+IHtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChpbmRleCk7XG4gICAgICAgIGhhbmRsZVNlbGVjdFByb3AoaW5kZXggfHwgMCk7XG4gICAgICAgIHNldElzT3BlbihmYWxzZSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRMYWJlbChsYWJlbHNSZWYuY3VycmVudFtpbmRleF0pO1xuICAgICAgICB9XG4gICAgfSwgW2hhbmRsZVNlbGVjdFByb3BdKTtcbiAgICBjb25zdCBoYW5kbGVUeXBlYWhlYWRNYXRjaCA9IChpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRBY3RpdmVJbmRleChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVTZWxlY3QoaW5kZXgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBsaXN0TmF2ID0gdXNlTGlzdE5hdmlnYXRpb24oY29udGV4dCwge1xuICAgICAgICBsaXN0UmVmOiBlbGVtZW50c1JlZixcbiAgICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgICAgIG9uTmF2aWdhdGU6IHNldEFjdGl2ZUluZGV4LFxuICAgIH0pO1xuICAgIGNvbnN0IHR5cGVhaGVhZCA9IHVzZVR5cGVhaGVhZChjb250ZXh0LCB7XG4gICAgICAgIGxpc3RSZWY6IGxhYmVsc1JlZixcbiAgICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgICAgIG9uTWF0Y2g6IGhhbmRsZVR5cGVhaGVhZE1hdGNoLFxuICAgIH0pO1xuICAgIGNvbnN0IGNsaWNrID0gdXNlQ2xpY2soY29udGV4dCk7XG4gICAgY29uc3QgZGlzbWlzcyA9IHVzZURpc21pc3MoY29udGV4dCk7XG4gICAgY29uc3Qgcm9sZSA9IHVzZVJvbGUoY29udGV4dCwgeyByb2xlOiAnbGlzdGJveCcgfSk7XG4gICAgY29uc3QgeyBnZXRSZWZlcmVuY2VQcm9wcywgZ2V0RmxvYXRpbmdQcm9wcywgZ2V0SXRlbVByb3BzIH0gPSB1c2VJbnRlcmFjdGlvbnMoW2xpc3ROYXYsIHR5cGVhaGVhZCwgY2xpY2ssIGRpc21pc3MsIHJvbGVdKTtcbiAgICBjb25zdCBzZWxlY3RDb250ZXh0ID0gdXNlTWVtbygoKSA9PiAoe1xuICAgICAgICBhY3RpdmVJbmRleCxcbiAgICAgICAgc2VsZWN0ZWRJbmRleCxcbiAgICAgICAgZ2V0SXRlbVByb3BzLFxuICAgICAgICBoYW5kbGVTZWxlY3QsXG4gICAgfSksIFthY3RpdmVJbmRleCwgc2VsZWN0ZWRJbmRleCwgZ2V0SXRlbVByb3BzLCBoYW5kbGVTZWxlY3RdKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kcm9wZG93blwiLCBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kcm9wZG93bi1zZWxlY3RlZFwiLCByZWY6IHJlZnMuc2V0UmVmZXJlbmNlLCB0YWJJbmRleDogMCwgLi4uZ2V0UmVmZXJlbmNlUHJvcHMoKSwgY2hpbGRyZW46IFtqc3hzKFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kcm9wZG93bi1zZWxlY3RlZF9fbGFiZWxcIiwgY2hpbGRyZW46IFtpY29uICYmIChqc3goSWNvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kcm9wZG93bi1zZWxlY3RlZF9faWNvblwiLCBpY29uOiBpY29uIH0pKSwgc2VsZWN0ZWRMYWJlbF0gfSksIGpzeChJY29uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2Ryb3Bkb3duLXNlbGVjdGVkX19jaGV2cm9uXCIsIGljb246IGlzT3BlbiA/ICdjaGV2cm9uLXVwJyA6ICdjaGV2cm9uLWRvd24nIH0pXSB9KSwganN4KFNlbGVjdENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHNlbGVjdENvbnRleHQsIGNoaWxkcmVuOiBpc09wZW4gJiYgKGpzeChGbG9hdGluZ0ZvY3VzTWFuYWdlciwgeyBjb250ZXh0OiBjb250ZXh0LCBtb2RhbDogZmFsc2UsIGNoaWxkcmVuOiBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kcm9wZG93bi1saXN0XCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgLi4uZ2V0RmxvYXRpbmdQcm9wcygpLCBjaGlsZHJlbjoganN4KEZsb2F0aW5nTGlzdCwgeyBlbGVtZW50c1JlZjogZWxlbWVudHNSZWYsIGxhYmVsc1JlZjogbGFiZWxzUmVmLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkgfSkgfSkpIH0pXSB9KSk7XG59O1xuY29uc3QgRHJvcERvd25TZWxlY3RPcHRpb24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHNlbGVjdGVkLCBsYWJlbCwgaWNvbiB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBnZXRJdGVtUHJvcHMsIGhhbmRsZVNlbGVjdCB9ID0gdXNlQ29udGV4dChTZWxlY3RDb250ZXh0KTtcbiAgICBjb25zdCB7IHJlZiwgaW5kZXggfSA9IHVzZUxpc3RJdGVtKCk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2Ryb3Bkb3duLW9wdGlvbicsIHtcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2Ryb3Bkb3duLW9wdGlvbi0tc2VsZWN0ZWQnOiBzZWxlY3RlZCxcbiAgICAgICAgfSksIHJlZjogcmVmLCAuLi5nZXRJdGVtUHJvcHMoe1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gaGFuZGxlU2VsZWN0KGluZGV4KSxcbiAgICAgICAgfSksIGNoaWxkcmVuOiBbanN4KEljb24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd24taWNvblwiLCBpY29uOiBpY29uIH0pLCBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd24tbGFiZWxcIiwgY2hpbGRyZW46IGxhYmVsIH0pXSB9KSk7XG59O1xuY29uc3QgRHJvcERvd25TZWxlY3QgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNoaWxkcmVuLCBpY29uLCBoYW5kbGVTZWxlY3QsIGRlZmF1bHRTZWxlY3RlZExhYmVsLCBkZWZhdWx0U2VsZWN0ZWRJbmRleCwgfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KFNlbGVjdCwgeyBpY29uOiBpY29uLCBoYW5kbGVTZWxlY3Q6IGhhbmRsZVNlbGVjdCwgZGVmYXVsdFNlbGVjdGVkSW5kZXg6IGRlZmF1bHRTZWxlY3RlZEluZGV4LCBkZWZhdWx0U2VsZWN0ZWRMYWJlbDogZGVmYXVsdFNlbGVjdGVkTGFiZWwsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuXG5jb25zdCBEZXZpY2VTZWxlY3Rvck9wdGlvbiA9ICh7IGRpc2FibGVkLCBpZCwgbGFiZWwsIG9uQ2hhbmdlLCBuYW1lLCBzZWxlY3RlZCwgZGVmYXVsdENoZWNrZWQsIHZhbHVlLCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3hzKFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fZGV2aWNlLXNldHRpbmdzX19vcHRpb24nLCB7XG4gICAgICAgICAgICAnc3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NfX29wdGlvbi0tc2VsZWN0ZWQnOiBzZWxlY3RlZCxcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fb3B0aW9uLS1kaXNhYmxlZCc6IGRpc2FibGVkLFxuICAgICAgICB9KSwgaHRtbEZvcjogaWQsIGNoaWxkcmVuOiBbanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcInJhZGlvXCIsIG5hbWU6IG5hbWUsIG9uQ2hhbmdlOiBvbkNoYW5nZSwgdmFsdWU6IHZhbHVlLCBpZDogaWQsIGNoZWNrZWQ6IHNlbGVjdGVkLCBkZWZhdWx0Q2hlY2tlZDogZGVmYXVsdENoZWNrZWQsIGRpc2FibGVkOiBkaXNhYmxlZCB9KSwgbGFiZWxdIH0pKTtcbn07XG5jb25zdCBEZXZpY2VTZWxlY3Rvckxpc3QgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGRldmljZXMgPSBbXSwgc2VsZWN0ZWREZXZpY2VJZDogc2VsZWN0ZWREZXZpY2VGcm9tUHJvcHMsIHRpdGxlLCB0eXBlLCBvbkNoYW5nZSwgfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgY2xvc2UgfSA9IHVzZU1lbnVDb250ZXh0KCk7XG4gICAgLy8gc29tZXRpbWVzIHRoZSBicm93c2VyIChDaHJvbWUpIHdpbGwgcmVwb3J0IHRoZSBzeXN0ZW0tZGVmYXVsdCBkZXZpY2VcbiAgICAvLyB3aXRoIGFuIGlkIG9mICdkZWZhdWx0Jy4gSW4gY2FzZSB3aGVuIGl0IGRvZXNuJ3QsIHdlJ2xsIHNlbGVjdCB0aGUgZmlyc3RcbiAgICAvLyBhdmFpbGFibGUgZGV2aWNlLlxuICAgIGxldCBzZWxlY3RlZERldmljZUlkID0gc2VsZWN0ZWREZXZpY2VGcm9tUHJvcHM7XG4gICAgaWYgKGRldmljZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAhZGV2aWNlcy5maW5kKChkKSA9PiBkLmRldmljZUlkID09PSBzZWxlY3RlZERldmljZUlkKSkge1xuICAgICAgICBzZWxlY3RlZERldmljZUlkID0gZGV2aWNlc1swXS5kZXZpY2VJZDtcbiAgICB9XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZGV2aWNlLXNldHRpbmdzX19kZXZpY2Uta2luZFwiLCBjaGlsZHJlbjogW3RpdGxlICYmIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NfX2RldmljZS1zZWxlY3Rvci10aXRsZVwiLCBjaGlsZHJlbjogdGl0bGUgfSkpLCAhZGV2aWNlcy5sZW5ndGggPyAoanN4KERldmljZVNlbGVjdG9yT3B0aW9uLCB7IGlkOiBgJHt0eXBlfS0tZGVmYXVsdGAsIGxhYmVsOiBcIkRlZmF1bHRcIiwgbmFtZTogdHlwZSwgZGVmYXVsdENoZWNrZWQ6IHRydWUsIHZhbHVlOiBcImRlZmF1bHRcIiB9KSkgOiAoZGV2aWNlcy5tYXAoKGRldmljZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoanN4KERldmljZVNlbGVjdG9yT3B0aW9uLCB7IGlkOiBgJHt0eXBlfS0tJHtkZXZpY2UuZGV2aWNlSWR9YCwgdmFsdWU6IGRldmljZS5kZXZpY2VJZCwgbGFiZWw6IGRldmljZS5sYWJlbCwgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT8uKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlPy4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgbmFtZTogdHlwZSwgc2VsZWN0ZWQ6IGRldmljZS5kZXZpY2VJZCA9PT0gc2VsZWN0ZWREZXZpY2VJZCB8fCBkZXZpY2VzLmxlbmd0aCA9PT0gMSB9LCBkZXZpY2UuZGV2aWNlSWQpKTtcbiAgICAgICAgICAgIH0pKV0gfSkpO1xufTtcbmNvbnN0IERldmljZVNlbGVjdG9yRHJvcGRvd24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGRldmljZXMgPSBbXSwgc2VsZWN0ZWREZXZpY2VJZDogc2VsZWN0ZWREZXZpY2VGcm9tUHJvcHMsIHRpdGxlLCBvbkNoYW5nZSwgaWNvbiwgfSA9IHByb3BzO1xuICAgIC8vIHNvbWV0aW1lcyB0aGUgYnJvd3NlciAoQ2hyb21lKSB3aWxsIHJlcG9ydCB0aGUgc3lzdGVtLWRlZmF1bHQgZGV2aWNlXG4gICAgLy8gd2l0aCBhbiBpZCBvZiAnZGVmYXVsdCcuIEluIGNhc2Ugd2hlbiBpdCBkb2Vzbid0LCB3ZSdsbCBzZWxlY3QgdGhlIGZpcnN0XG4gICAgLy8gYXZhaWxhYmxlIGRldmljZS5cbiAgICBsZXQgc2VsZWN0ZWREZXZpY2VJZCA9IHNlbGVjdGVkRGV2aWNlRnJvbVByb3BzO1xuICAgIGlmIChkZXZpY2VzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgIWRldmljZXMuZmluZCgoZCkgPT4gZC5kZXZpY2VJZCA9PT0gc2VsZWN0ZWREZXZpY2VJZCkpIHtcbiAgICAgICAgc2VsZWN0ZWREZXZpY2VJZCA9IGRldmljZXNbMF0uZGV2aWNlSWQ7XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBkZXZpY2VzLmZpbmRJbmRleCgoZCkgPT4gZC5kZXZpY2VJZCA9PT0gc2VsZWN0ZWREZXZpY2VJZCk7XG4gICAgY29uc3QgaGFuZGxlU2VsZWN0ID0gdXNlQ2FsbGJhY2soKGluZGV4KSA9PiB7XG4gICAgICAgIG9uQ2hhbmdlPy4oZGV2aWNlc1tpbmRleF0uZGV2aWNlSWQpO1xuICAgIH0sIFtkZXZpY2VzLCBvbkNoYW5nZV0pO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fZGV2aWNlLWtpbmRcIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NfX2RldmljZS1zZWxlY3Rvci10aXRsZVwiLCBjaGlsZHJlbjogdGl0bGUgfSksIGpzeChEcm9wRG93blNlbGVjdCwgeyBpY29uOiBpY29uLCBkZWZhdWx0U2VsZWN0ZWRJbmRleDogc2VsZWN0ZWRJbmRleCwgZGVmYXVsdFNlbGVjdGVkTGFiZWw6IGRldmljZXNbc2VsZWN0ZWRJbmRleF0/LmxhYmVsLCBoYW5kbGVTZWxlY3Q6IGhhbmRsZVNlbGVjdCwgY2hpbGRyZW46IGRldmljZXMubWFwKChkZXZpY2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChqc3goRHJvcERvd25TZWxlY3RPcHRpb24sIHsgaWNvbjogaWNvbiwgbGFiZWw6IGRldmljZS5sYWJlbCwgc2VsZWN0ZWQ6IGRldmljZS5kZXZpY2VJZCA9PT0gc2VsZWN0ZWREZXZpY2VJZCB8fCBkZXZpY2VzLmxlbmd0aCA9PT0gMSB9LCBkZXZpY2UuZGV2aWNlSWQpKTtcbiAgICAgICAgICAgICAgICB9KSB9KV0gfSkpO1xufTtcbmNvbnN0IERldmljZVNlbGVjdG9yID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB2aXN1YWxUeXBlID0gJ2xpc3QnLCBpY29uLCBwbGFjZWhvbGRlciwgLi4ucmVzdCB9ID0gcHJvcHM7XG4gICAgaWYgKHZpc3VhbFR5cGUgPT09ICdsaXN0Jykge1xuICAgICAgICByZXR1cm4ganN4KERldmljZVNlbGVjdG9yTGlzdCwgeyAuLi5yZXN0IH0pO1xuICAgIH1cbiAgICByZXR1cm4gKGpzeChEZXZpY2VTZWxlY3RvckRyb3Bkb3duLCB7IC4uLnJlc3QsIGljb246IGljb24sIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlciB9KSk7XG59O1xuXG5jb25zdCBEZXZpY2VTZWxlY3RvckF1ZGlvSW5wdXQgPSAoeyB0aXRsZSwgdmlzdWFsVHlwZSwgfSkgPT4ge1xuICAgIGNvbnN0IHsgdXNlTWljcm9waG9uZVN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgbWljcm9waG9uZSwgc2VsZWN0ZWREZXZpY2UsIGRldmljZXMgfSA9IHVzZU1pY3JvcGhvbmVTdGF0ZSgpO1xuICAgIHJldHVybiAoanN4KERldmljZVNlbGVjdG9yLCB7IGRldmljZXM6IGRldmljZXMgfHwgW10sIHNlbGVjdGVkRGV2aWNlSWQ6IHNlbGVjdGVkRGV2aWNlLCB0eXBlOiBcImF1ZGlvaW5wdXRcIiwgb25DaGFuZ2U6IGFzeW5jIChkZXZpY2VJZCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgbWljcm9waG9uZS5zZWxlY3QoZGV2aWNlSWQpO1xuICAgICAgICB9LCB0aXRsZTogdGl0bGUsIHZpc3VhbFR5cGU6IHZpc3VhbFR5cGUsIGljb246IFwibWljXCIgfSkpO1xufTtcbmNvbnN0IERldmljZVNlbGVjdG9yQXVkaW9PdXRwdXQgPSAoeyB0aXRsZSwgdmlzdWFsVHlwZSwgfSkgPT4ge1xuICAgIGNvbnN0IHsgdXNlU3BlYWtlclN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgc3BlYWtlciwgc2VsZWN0ZWREZXZpY2UsIGRldmljZXMsIGlzRGV2aWNlU2VsZWN0aW9uU3VwcG9ydGVkIH0gPSB1c2VTcGVha2VyU3RhdGUoKTtcbiAgICBpZiAoIWlzRGV2aWNlU2VsZWN0aW9uU3VwcG9ydGVkKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKGpzeChEZXZpY2VTZWxlY3RvciwgeyBkZXZpY2VzOiBkZXZpY2VzLCB0eXBlOiBcImF1ZGlvb3V0cHV0XCIsIHNlbGVjdGVkRGV2aWNlSWQ6IHNlbGVjdGVkRGV2aWNlLCBvbkNoYW5nZTogKGRldmljZUlkKSA9PiB7XG4gICAgICAgICAgICBzcGVha2VyLnNlbGVjdChkZXZpY2VJZCk7XG4gICAgICAgIH0sIHRpdGxlOiB0aXRsZSwgdmlzdWFsVHlwZTogdmlzdWFsVHlwZSwgaWNvbjogXCJzcGVha2VyXCIgfSkpO1xufTtcblxuY29uc3QgRGV2aWNlU2VsZWN0b3JWaWRlbyA9ICh7IHRpdGxlLCB2aXN1YWxUeXBlLCB9KSA9PiB7XG4gICAgY29uc3QgeyB1c2VDYW1lcmFTdGF0ZSB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCB7IGNhbWVyYSwgZGV2aWNlcywgc2VsZWN0ZWREZXZpY2UgfSA9IHVzZUNhbWVyYVN0YXRlKCk7XG4gICAgcmV0dXJuIChqc3goRGV2aWNlU2VsZWN0b3IsIHsgZGV2aWNlczogZGV2aWNlcyB8fCBbXSwgdHlwZTogXCJ2aWRlb2lucHV0XCIsIHNlbGVjdGVkRGV2aWNlSWQ6IHNlbGVjdGVkRGV2aWNlLCBvbkNoYW5nZTogYXN5bmMgKGRldmljZUlkKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBjYW1lcmEuc2VsZWN0KGRldmljZUlkKTtcbiAgICAgICAgfSwgdGl0bGU6IHRpdGxlLCB2aXN1YWxUeXBlOiB2aXN1YWxUeXBlLCBpY29uOiBcImNhbWVyYVwiIH0pKTtcbn07XG5cbmNvbnN0IERldmljZVNldHRpbmdzID0gKHsgdmlzdWFsVHlwZSA9IE1lbnVWaXN1YWxUeXBlLk1FTlUsIH0pID0+IHtcbiAgICByZXR1cm4gKGpzeChNZW51VG9nZ2xlLCB7IHBsYWNlbWVudDogXCJib3R0b20tZW5kXCIsIFRvZ2dsZUJ1dHRvbjogVG9nZ2xlRGV2aWNlU2V0dGluZ3NNZW51QnV0dG9uLCB2aXN1YWxUeXBlOiB2aXN1YWxUeXBlLCBjaGlsZHJlbjoganN4KE1lbnUsIHt9KSB9KSk7XG59O1xuY29uc3QgTWVudSA9ICgpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NcIiwgY2hpbGRyZW46IFtqc3goRGV2aWNlU2VsZWN0b3JWaWRlbywgeyB0aXRsZTogdCgnU2VsZWN0IGEgQ2FtZXJhJykgfSksIGpzeChEZXZpY2VTZWxlY3RvckF1ZGlvSW5wdXQsIHsgdGl0bGU6IHQoJ1NlbGVjdCBhIE1pYycpIH0pLCBqc3goRGV2aWNlU2VsZWN0b3JBdWRpb091dHB1dCwgeyB0aXRsZTogdCgnU2VsZWN0IFNwZWFrZXJzJykgfSldIH0pKTtcbn07XG5jb25zdCBUb2dnbGVEZXZpY2VTZXR0aW5nc01lbnVCdXR0b24gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIFRvZ2dsZURldmljZVNldHRpbmdzTWVudUJ1dHRvbih7IG1lbnVTaG93biB9LCByZWYpIHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeChJY29uQnV0dG9uLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NfX2J1dHRvbicsIHtcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fYnV0dG9uLS1hY3RpdmUnOiBtZW51U2hvd24sXG4gICAgICAgIH0pLCB0aXRsZTogdCgnVG9nZ2xlIGRldmljZSBtZW51JyksIGljb246IFwiZGV2aWNlLXNldHRpbmdzXCIsIHJlZjogcmVmIH0pKTtcbn0pO1xuXG5jb25zdCBUb2dnbGVBdWRpb1ByZXZpZXdCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNhcHRpb24sIG9uTWVudVRvZ2dsZSwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHVzZU1pY3JvcGhvbmVTdGF0ZSB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCB7IG1pY3JvcGhvbmUsIG9wdGltaXN0aWNJc011dGUsIGhhc0Jyb3dzZXJQZXJtaXNzaW9uIH0gPSB1c2VNaWNyb3Bob25lU3RhdGUoKTtcbiAgICBjb25zdCBbdG9vbHRpcERpc2FibGVkLCBzZXRUb29sdGlwRGlzYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gY3JlYXRlQ2FsbENvbnRyb2xIYW5kbGVyKHByb3BzLCAoKSA9PiBtaWNyb3Bob25lLnRvZ2dsZSgpKTtcbiAgICByZXR1cm4gKGpzeChXaXRoVG9vbHRpcCwgeyB0aXRsZTogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uXG4gICAgICAgICAgICA/IHQoJ0NoZWNrIHlvdXIgYnJvd3NlciBhdWRpbyBwZXJtaXNzaW9ucycpXG4gICAgICAgICAgICA6IGNhcHRpb24gPz8gdCgnTWljJyksIHRvb2x0aXBEaXNhYmxlZDogdG9vbHRpcERpc2FibGVkLCBjaGlsZHJlbjoganN4cyhDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBvcHRpbWlzdGljSXNNdXRlLCBjYXB0aW9uOiBjYXB0aW9uLCBjbGFzc05hbWU6IGNsc3goIWhhc0Jyb3dzZXJQZXJtaXNzaW9uICYmICdzdHItdmlkZW9fX2RldmljZS11bmF2YWlsYWJsZScpLCB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBkaXNhYmxlZDogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uLCBcImRhdGEtdGVzdGlkXCI6IG9wdGltaXN0aWNJc011dGVcbiAgICAgICAgICAgICAgICA/ICdwcmV2aWV3LWF1ZGlvLXVubXV0ZS1idXR0b24nXG4gICAgICAgICAgICAgICAgOiAncHJldmlldy1hdWRpby1tdXRlLWJ1dHRvbicsIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLCAuLi5yZXN0Q29tcG9zaXRlQnV0dG9uUHJvcHMsIG9uTWVudVRvZ2dsZTogKHNob3duKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VG9vbHRpcERpc2FibGVkKHNob3duKTtcbiAgICAgICAgICAgICAgICBvbk1lbnVUb2dnbGU/LihzaG93bik7XG4gICAgICAgICAgICB9LCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246ICFvcHRpbWlzdGljSXNNdXRlID8gJ21pYycgOiAnbWljLW9mZicgfSksICFoYXNCcm93c2VyUGVybWlzc2lvbiAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX25vLW1lZGlhLXBlcm1pc3Npb25cIiwgdGl0bGU6IHQoJ0NoZWNrIHlvdXIgYnJvd3NlciBhdWRpbyBwZXJtaXNzaW9ucycpLCBjaGlsZHJlbjogXCIhXCIgfSkpXSB9KSB9KSk7XG59O1xuY29uc3QgVG9nZ2xlQXVkaW9QdWJsaXNoaW5nQnV0dG9uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyBjYXB0aW9uLCBNZW51ID0ganN4KERldmljZVNlbGVjdG9yQXVkaW9JbnB1dCwgeyB2aXN1YWxUeXBlOiBcImxpc3RcIiB9KSwgbWVudVBsYWNlbWVudCA9ICd0b3AnLCBvbk1lbnVUb2dnbGUsIC4uLnJlc3RDb21wb3NpdGVCdXR0b25Qcm9wcyB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBoYXNQZXJtaXNzaW9uLCByZXF1ZXN0UGVybWlzc2lvbiwgaXNBd2FpdGluZ1Blcm1pc3Npb24gfSA9IHVzZVJlcXVlc3RQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0VORF9BVURJTyk7XG4gICAgY29uc3QgeyB1c2VNaWNyb3Bob25lU3RhdGUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgeyBtaWNyb3Bob25lLCBvcHRpbWlzdGljSXNNdXRlLCBoYXNCcm93c2VyUGVybWlzc2lvbiB9ID0gdXNlTWljcm9waG9uZVN0YXRlKCk7XG4gICAgY29uc3QgW3Rvb2x0aXBEaXNhYmxlZCwgc2V0VG9vbHRpcERpc2FibGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBoYW5kbGVDbGljayA9IGNyZWF0ZUNhbGxDb250cm9sSGFuZGxlcihwcm9wcywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIWhhc1Blcm1pc3Npb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCBtaWNyb3Bob25lLnRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIChqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuU0VORF9BVURJT10sIGNoaWxkcmVuOiBqc3goUGVybWlzc2lvbk5vdGlmaWNhdGlvbiwgeyBwZXJtaXNzaW9uOiBPd25DYXBhYmlsaXR5LlNFTkRfQVVESU8sIGlzQXdhaXRpbmdBcHByb3ZhbDogaXNBd2FpdGluZ1Blcm1pc3Npb24sIG1lc3NhZ2VBcHByb3ZlZDogdCgnWW91IGNhbiBub3cgc3BlYWsuJyksIG1lc3NhZ2VBd2FpdGluZ0FwcHJvdmFsOiB0KCdBd2FpdGluZyBmb3IgYW4gYXBwcm92YWwgdG8gc3BlYWsuJyksIG1lc3NhZ2VSZXZva2VkOiB0KCdZb3UgY2FuIG5vIGxvbmdlciBzcGVhay4nKSwgY2hpbGRyZW46IGpzeChXaXRoVG9vbHRpcCwgeyB0aXRsZTogIWhhc1Blcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgPyB0KCdZb3UgaGF2ZSBubyBwZXJtaXNzaW9uIHRvIHNoYXJlIHlvdXIgYXVkaW8nKVxuICAgICAgICAgICAgICAgICAgICA6ICFoYXNCcm93c2VyUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0KCdDaGVjayB5b3VyIGJyb3dzZXIgbWljIHBlcm1pc3Npb25zJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogY2FwdGlvbiA/PyB0KCdNaWMnKSwgdG9vbHRpcERpc2FibGVkOiB0b29sdGlwRGlzYWJsZWQsIGNoaWxkcmVuOiBqc3hzKENvbXBvc2l0ZUJ1dHRvbiwgeyBhY3RpdmU6IG9wdGltaXN0aWNJc011dGUsIGNhcHRpb246IGNhcHRpb24sIHZhcmlhbnQ6IFwic2Vjb25kYXJ5XCIsIGRpc2FibGVkOiAhaGFzQnJvd3NlclBlcm1pc3Npb24gfHwgIWhhc1Blcm1pc3Npb24sIFwiZGF0YS10ZXN0aWRcIjogb3B0aW1pc3RpY0lzTXV0ZSA/ICdhdWRpby11bm11dGUtYnV0dG9uJyA6ICdhdWRpby1tdXRlLWJ1dHRvbicsIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLCBNZW51OiBNZW51LCBtZW51UGxhY2VtZW50OiBtZW51UGxhY2VtZW50LCBtZW51T2Zmc2V0OiAxNiwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzLCBvbk1lbnVUb2dnbGU6IChzaG93bikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VG9vbHRpcERpc2FibGVkKHNob3duKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVudVRvZ2dsZT8uKHNob3duKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBvcHRpbWlzdGljSXNNdXRlID8gJ21pYy1vZmYnIDogJ21pYycgfSksICghaGFzQnJvd3NlclBlcm1pc3Npb24gfHwgIWhhc1Blcm1pc3Npb24pICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbm8tbWVkaWEtcGVybWlzc2lvblwiLCBjaGlsZHJlbjogXCIhXCIgfSkpXSB9KSB9KSB9KSB9KSk7XG59O1xuXG5jb25zdCBUb2dnbGVWaWRlb1ByZXZpZXdCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNhcHRpb24sIE1lbnUgPSBEZXZpY2VTZWxlY3RvclZpZGVvLCBtZW51UGxhY2VtZW50ID0gJ3RvcCcsIG9uTWVudVRvZ2dsZSwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHVzZUNhbWVyYVN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgY2FtZXJhLCBvcHRpbWlzdGljSXNNdXRlLCBoYXNCcm93c2VyUGVybWlzc2lvbiB9ID0gdXNlQ2FtZXJhU3RhdGUoKTtcbiAgICBjb25zdCBbdG9vbHRpcERpc2FibGVkLCBzZXRUb29sdGlwRGlzYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gY3JlYXRlQ2FsbENvbnRyb2xIYW5kbGVyKHByb3BzLCAoKSA9PiBjYW1lcmEudG9nZ2xlKCkpO1xuICAgIHJldHVybiAoanN4KFdpdGhUb29sdGlwLCB7IHRpdGxlOiAhaGFzQnJvd3NlclBlcm1pc3Npb25cbiAgICAgICAgICAgID8gdCgnQ2hlY2sgeW91ciBicm93c2VyIHZpZGVvIHBlcm1pc3Npb25zJylcbiAgICAgICAgICAgIDogY2FwdGlvbiA/PyB0KCdWaWRlbycpLCB0b29sdGlwRGlzYWJsZWQ6IHRvb2x0aXBEaXNhYmxlZCwgY2hpbGRyZW46IGpzeHMoQ29tcG9zaXRlQnV0dG9uLCB7IGFjdGl2ZTogb3B0aW1pc3RpY0lzTXV0ZSwgY2FwdGlvbjogY2FwdGlvbiwgY2xhc3NOYW1lOiBjbHN4KCFoYXNCcm93c2VyUGVybWlzc2lvbiAmJiAnc3RyLXZpZGVvX19kZXZpY2UtdW5hdmFpbGFibGUnKSwgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgXCJkYXRhLXRlc3RpZFwiOiBvcHRpbWlzdGljSXNNdXRlXG4gICAgICAgICAgICAgICAgPyAncHJldmlldy12aWRlby11bm11dGUtYnV0dG9uJ1xuICAgICAgICAgICAgICAgIDogJ3ByZXZpZXctdmlkZW8tbXV0ZS1idXR0b24nLCBvbkNsaWNrOiBoYW5kbGVDbGljaywgZGlzYWJsZWQ6ICFoYXNCcm93c2VyUGVybWlzc2lvbiwgTWVudTogTWVudSwgbWVudVBsYWNlbWVudDogbWVudVBsYWNlbWVudCwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzLCBvbk1lbnVUb2dnbGU6IChzaG93bikgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRvb2x0aXBEaXNhYmxlZChzaG93bik7XG4gICAgICAgICAgICAgICAgb25NZW51VG9nZ2xlPy4oc2hvd24pO1xuICAgICAgICAgICAgfSwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiAhb3B0aW1pc3RpY0lzTXV0ZSA/ICdjYW1lcmEnIDogJ2NhbWVyYS1vZmYnIH0pLCAhaGFzQnJvd3NlclBlcm1pc3Npb24gJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19uby1tZWRpYS1wZXJtaXNzaW9uXCIsIHRpdGxlOiB0KCdDaGVjayB5b3VyIGJyb3dzZXIgdmlkZW8gcGVybWlzc2lvbnMnKSwgY2hpbGRyZW46IFwiIVwiIH0pKV0gfSkgfSkpO1xufTtcbmNvbnN0IFRvZ2dsZVZpZGVvUHVibGlzaGluZ0J1dHRvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IHsgY2FwdGlvbiwgTWVudSA9IGpzeChEZXZpY2VTZWxlY3RvclZpZGVvLCB7IHZpc3VhbFR5cGU6IFwibGlzdFwiIH0pLCBtZW51UGxhY2VtZW50ID0gJ3RvcCcsIG9uTWVudVRvZ2dsZSwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IGhhc1Blcm1pc3Npb24sIHJlcXVlc3RQZXJtaXNzaW9uLCBpc0F3YWl0aW5nUGVybWlzc2lvbiB9ID0gdXNlUmVxdWVzdFBlcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPKTtcbiAgICBjb25zdCB7IHVzZUNhbWVyYVN0YXRlLCB1c2VDYWxsU2V0dGluZ3MgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgeyBjYW1lcmEsIG9wdGltaXN0aWNJc011dGUsIGhhc0Jyb3dzZXJQZXJtaXNzaW9uIH0gPSB1c2VDYW1lcmFTdGF0ZSgpO1xuICAgIGNvbnN0IGNhbGxTZXR0aW5ncyA9IHVzZUNhbGxTZXR0aW5ncygpO1xuICAgIGNvbnN0IGlzUHVibGlzaGluZ1ZpZGVvQWxsb3dlZCA9IGNhbGxTZXR0aW5ncz8udmlkZW8uZW5hYmxlZDtcbiAgICBjb25zdCBbdG9vbHRpcERpc2FibGVkLCBzZXRUb29sdGlwRGlzYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gY3JlYXRlQ2FsbENvbnRyb2xIYW5kbGVyKHByb3BzLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgYXdhaXQgcmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNhbWVyYS50b2dnbGUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5LlNFTkRfVklERU9dLCBjaGlsZHJlbjoganN4KFBlcm1pc3Npb25Ob3RpZmljYXRpb24sIHsgcGVybWlzc2lvbjogT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPLCBpc0F3YWl0aW5nQXBwcm92YWw6IGlzQXdhaXRpbmdQZXJtaXNzaW9uLCBtZXNzYWdlQXBwcm92ZWQ6IHQoJ1lvdSBjYW4gbm93IHNoYXJlIHlvdXIgdmlkZW8uJyksIG1lc3NhZ2VBd2FpdGluZ0FwcHJvdmFsOiB0KCdBd2FpdGluZyBmb3IgYW4gYXBwcm92YWwgdG8gc2hhcmUgeW91ciB2aWRlby4nKSwgbWVzc2FnZVJldm9rZWQ6IHQoJ1lvdSBjYW4gbm8gbG9uZ2VyIHNoYXJlIHlvdXIgdmlkZW8uJyksIGNoaWxkcmVuOiBqc3goV2l0aFRvb2x0aXAsIHsgdGl0bGU6ICFoYXNQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgID8gdCgnWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIHZpZGVvJylcbiAgICAgICAgICAgICAgICAgICAgOiAhaGFzQnJvd3NlclBlcm1pc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgID8gdCgnQ2hlY2sgeW91ciBicm93c2VyIHZpZGVvIHBlcm1pc3Npb25zJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogIWlzUHVibGlzaGluZ1ZpZGVvQWxsb3dlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdCgnVmlkZW8gcHVibGlzaGluZyBpcyBkaXNhYmxlZCBieSB0aGUgc3lzdGVtJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNhcHRpb24gfHwgdCgnVmlkZW8nKSwgdG9vbHRpcERpc2FibGVkOiB0b29sdGlwRGlzYWJsZWQsIGNoaWxkcmVuOiBqc3hzKENvbXBvc2l0ZUJ1dHRvbiwgeyBhY3RpdmU6IG9wdGltaXN0aWNJc011dGUsIGNhcHRpb246IGNhcHRpb24sIHZhcmlhbnQ6IFwic2Vjb25kYXJ5XCIsIGRpc2FibGVkOiAhaGFzQnJvd3NlclBlcm1pc3Npb24gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFoYXNQZXJtaXNzaW9uIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNQdWJsaXNoaW5nVmlkZW9BbGxvd2VkLCBcImRhdGEtdGVzdGlkXCI6IG9wdGltaXN0aWNJc011dGUgPyAndmlkZW8tdW5tdXRlLWJ1dHRvbicgOiAndmlkZW8tbXV0ZS1idXR0b24nLCBvbkNsaWNrOiBoYW5kbGVDbGljaywgTWVudTogTWVudSwgbWVudVBsYWNlbWVudDogbWVudVBsYWNlbWVudCwgbWVudU9mZnNldDogMTYsIC4uLnJlc3RDb21wb3NpdGVCdXR0b25Qcm9wcywgb25NZW51VG9nZ2xlOiAoc2hvd24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRvb2x0aXBEaXNhYmxlZChzaG93bik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1lbnVUb2dnbGU/LihzaG93bik7XG4gICAgICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuOiBbanN4KEljb24sIHsgaWNvbjogb3B0aW1pc3RpY0lzTXV0ZSA/ICdjYW1lcmEtb2ZmJyA6ICdjYW1lcmEnIH0pLCAoIWhhc0Jyb3dzZXJQZXJtaXNzaW9uIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWhhc1Blcm1pc3Npb24gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNQdWJsaXNoaW5nVmlkZW9BbGxvd2VkKSAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX25vLW1lZGlhLXBlcm1pc3Npb25cIiwgY2hpbGRyZW46IFwiIVwiIH0pKV0gfSkgfSkgfSkgfSkpO1xufTtcblxuY29uc3QgRW5kQ2FsbE1lbnUgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IG9uTGVhdmUsIG9uRW5kIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19lbmQtY2FsbF9fY29uZmlybWF0aW9uXCIsIGNoaWxkcmVuOiBbanN4cyhcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2J1dHRvbiBzdHItdmlkZW9fX2VuZC1jYWxsX19sZWF2ZVwiLCB0eXBlOiBcImJ1dHRvblwiLCBcImRhdGEtdGVzdGlkXCI6IFwibGVhdmUtY2FsbC1idXR0b25cIiwgb25DbGljazogb25MZWF2ZSwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19idXR0b25fX2ljb24gc3RyLXZpZGVvX19lbmQtY2FsbF9fbGVhdmUtaWNvblwiLCBpY29uOiBcImxvZ291dFwiIH0pLCB0KCdMZWF2ZSBjYWxsJyldIH0pLCBqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuRU5EX0NBTExdLCBjaGlsZHJlbjoganN4cyhcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2J1dHRvbiBzdHItdmlkZW9fX2VuZC1jYWxsX19lbmRcIiwgdHlwZTogXCJidXR0b25cIiwgXCJkYXRhLXRlc3RpZFwiOiBcImVuZC1jYWxsLWZvci1hbGwtYnV0dG9uXCIsIG9uQ2xpY2s6IG9uRW5kLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2J1dHRvbl9faWNvbiBzdHItdmlkZW9fX2VuZC1jYWxsX19lbmQtaWNvblwiLCBpY29uOiBcImNhbGwtZW5kXCIgfSksIHQoJ0VuZCBjYWxsIGZvciBhbGwnKV0gfSkgfSldIH0pKTtcbn07XG5jb25zdCBDYW5jZWxDYWxsVG9nZ2xlTWVudUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gQ2FuY2VsQ2FsbFRvZ2dsZU1lbnVCdXR0b24oeyBtZW51U2hvd24gfSwgcmVmKSB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgcmV0dXJuIChqc3goV2l0aFRvb2x0aXAsIHsgdGl0bGU6IHQoJ0xlYXZlIGNhbGwnKSwgdG9vbHRpcERpc2FibGVkOiBtZW51U2hvd24sIGNoaWxkcmVuOiBqc3goSWNvbkJ1dHRvbiwgeyBpY29uOiBtZW51U2hvd24gPyAnY2xvc2UnIDogJ2NhbGwtZW5kJywgdmFyaWFudDogbWVudVNob3duID8gJ2FjdGl2ZScgOiAnZGFuZ2VyJywgXCJkYXRhLXRlc3RpZFwiOiBcImxlYXZlLWNhbGwtYnV0dG9uXCIsIHJlZjogcmVmIH0pIH0pKTtcbn0pO1xuY29uc3QgQ2FuY2VsQ2FsbENvbmZpcm1CdXR0b24gPSAoeyBvbkNsaWNrLCBvbkxlYXZlLCB9KSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCBoYW5kbGVMZWF2ZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChlKSA9PiB7XG4gICAgICAgIGlmIChvbkNsaWNrKSB7XG4gICAgICAgICAgICBvbkNsaWNrKGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhbGwpIHtcbiAgICAgICAgICAgIGF3YWl0IGNhbGwubGVhdmUoKTtcbiAgICAgICAgICAgIG9uTGVhdmU/LigpO1xuICAgICAgICB9XG4gICAgfSwgW29uQ2xpY2ssIG9uTGVhdmUsIGNhbGxdKTtcbiAgICBjb25zdCBoYW5kbGVFbmRDYWxsID0gdXNlQ2FsbGJhY2soYXN5bmMgKGUpID0+IHtcbiAgICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgICAgIG9uQ2xpY2soZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FsbCkge1xuICAgICAgICAgICAgYXdhaXQgY2FsbC5lbmRDYWxsKCk7XG4gICAgICAgICAgICBvbkxlYXZlPy4oKTtcbiAgICAgICAgfVxuICAgIH0sIFtvbkNsaWNrLCBvbkxlYXZlLCBjYWxsXSk7XG4gICAgcmV0dXJuIChqc3goTWVudVRvZ2dsZSwgeyBwbGFjZW1lbnQ6IFwidG9wLXN0YXJ0XCIsIFRvZ2dsZUJ1dHRvbjogQ2FuY2VsQ2FsbFRvZ2dsZU1lbnVCdXR0b24sIGNoaWxkcmVuOiBqc3goRW5kQ2FsbE1lbnUsIHsgb25FbmQ6IGhhbmRsZUVuZENhbGwsIG9uTGVhdmU6IGhhbmRsZUxlYXZlIH0pIH0pKTtcbn07XG5jb25zdCBDYW5jZWxDYWxsQnV0dG9uID0gKHsgZGlzYWJsZWQsIGNhcHRpb24sIG9uQ2xpY2ssIG9uTGVhdmUsIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soYXN5bmMgKGUpID0+IHtcbiAgICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgICAgIG9uQ2xpY2soZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FsbCkge1xuICAgICAgICAgICAgYXdhaXQgY2FsbC5sZWF2ZSgpO1xuICAgICAgICAgICAgb25MZWF2ZT8uKCk7XG4gICAgICAgIH1cbiAgICB9LCBbb25DbGljaywgb25MZWF2ZSwgY2FsbF0pO1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgZGlzYWJsZWQ6IGRpc2FibGVkLCBpY29uOiBcImNhbGwtZW5kXCIsIHZhcmlhbnQ6IFwiZGFuZ2VyXCIsIHRpdGxlOiBjYXB0aW9uID8/IHQoJ0xlYXZlIGNhbGwnKSwgXCJkYXRhLXRlc3RpZFwiOiBcImNhbmNlbC1jYWxsLWJ1dHRvblwiLCBvbkNsaWNrOiBoYW5kbGVDbGljayB9KSk7XG59O1xuXG5jb25zdCBDYWxsQ29udHJvbHMgPSAoeyBvbkxlYXZlIH0pID0+IChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1jb250cm9sc1wiLCBjaGlsZHJlbjogW2pzeChTcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb24sIHsgY2hpbGRyZW46IGpzeChUb2dnbGVBdWRpb1B1Ymxpc2hpbmdCdXR0b24sIHt9KSB9KSwganN4KFRvZ2dsZVZpZGVvUHVibGlzaGluZ0J1dHRvbiwge30pLCBqc3goUmVhY3Rpb25zQnV0dG9uLCB7fSksIGpzeChTY3JlZW5TaGFyZUJ1dHRvbiwge30pLCBqc3goUmVjb3JkQ2FsbEJ1dHRvbiwge30pLCBqc3goQ2FuY2VsQ2FsbEJ1dHRvbiwgeyBvbkxlYXZlOiBvbkxlYXZlIH0pXSB9KSk7XG5cbmNvbnN0IENhbGxTdGF0c0xhdGVuY3lDaGFydCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL2xhdGVuY3ktY2hhcnQtQmo1T1NZemcuZXMuanMnKSk7XG52YXIgU3RhdHVzO1xuKGZ1bmN0aW9uIChTdGF0dXMpIHtcbiAgICBTdGF0dXNbXCJHT09EXCJdID0gXCJHb29kXCI7XG4gICAgU3RhdHVzW1wiT0tcIl0gPSBcIk9rXCI7XG4gICAgU3RhdHVzW1wiQkFEXCJdID0gXCJCYWRcIjtcbn0pKFN0YXR1cyB8fCAoU3RhdHVzID0ge30pKTtcbmNvbnN0IENhbGxTdGF0cyA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGF0ZW5jeUxvd0JvdW5kID0gNzUsIGxhdGVuY3lIaWdoQm91bmQgPSA0MDAsIHNob3dDb2RlY0luZm8gPSBmYWxzZSwgTGF0ZW5jeUNoYXJ0U3VzcGVuc2VGYWxsYmFjayA9IG51bGwsIH0gPSBwcm9wcztcbiAgICBjb25zdCBbbGF0ZW5jeUJ1ZmZlciwgc2V0TGF0ZW5jeUJ1ZmZlcl0gPSB1c2VTdGF0ZSgoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9LCAoXywgaSkgPT4gKHsgeDogbm93ICsgaSwgeTogMCB9KSk7XG4gICAgfSk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgW3B1Ymxpc2hCaXRyYXRlLCBzZXRQdWJsaXNoQml0cmF0ZV0gPSB1c2VTdGF0ZSgnLScpO1xuICAgIGNvbnN0IFtzdWJzY3JpYmVCaXRyYXRlLCBzZXRTdWJzY3JpYmVCaXRyYXRlXSA9IHVzZVN0YXRlKCctJyk7XG4gICAgY29uc3QgcHJldmlvdXNTdGF0cyA9IHVzZVJlZigpO1xuICAgIGNvbnN0IHsgdXNlQ2FsbFN0YXRzUmVwb3J0IH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IGNhbGxTdGF0c1JlcG9ydCA9IHVzZUNhbGxTdGF0c1JlcG9ydCgpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbFN0YXRzUmVwb3J0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIXByZXZpb3VzU3RhdHMuY3VycmVudCkge1xuICAgICAgICAgICAgcHJldmlvdXNTdGF0cy5jdXJyZW50ID0gY2FsbFN0YXRzUmVwb3J0O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzQ2FsbFN0YXRzUmVwb3J0ID0gcHJldmlvdXNTdGF0cy5jdXJyZW50O1xuICAgICAgICBzZXRQdWJsaXNoQml0cmF0ZSgoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlUHVibGlzaEJpdHJhdGUocHJldmlvdXNDYWxsU3RhdHNSZXBvcnQsIGNhbGxTdGF0c1JlcG9ydCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZXRTdWJzY3JpYmVCaXRyYXRlKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjYWxjdWxhdGVTdWJzY3JpYmVCaXRyYXRlKHByZXZpb3VzQ2FsbFN0YXRzUmVwb3J0LCBjYWxsU3RhdHNSZXBvcnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0TGF0ZW5jeUJ1ZmZlcigobGF0ZW5jeUJ1ZikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3TGF0ZW5jeUJ1ZmZlciA9IGxhdGVuY3lCdWYuc2xpY2UoLTE5KTtcbiAgICAgICAgICAgIG5ld0xhdGVuY3lCdWZmZXIucHVzaCh7XG4gICAgICAgICAgICAgICAgeDogY2FsbFN0YXRzUmVwb3J0LnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICB5OiBjYWxsU3RhdHNSZXBvcnQucHVibGlzaGVyU3RhdHMuYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3TGF0ZW5jeUJ1ZmZlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHByZXZpb3VzU3RhdHMuY3VycmVudCA9IGNhbGxTdGF0c1JlcG9ydDtcbiAgICB9LCBbY2FsbFN0YXRzUmVwb3J0XSk7XG4gICAgY29uc3QgbGF0ZW5jeUNvbXBhcmlzb24gPSB7XG4gICAgICAgIGxvd0JvdW5kOiBsYXRlbmN5TG93Qm91bmQsXG4gICAgICAgIGhpZ2hCb3VuZDogbGF0ZW5jeUhpZ2hCb3VuZCxcbiAgICAgICAgdmFsdWU6IGNhbGxTdGF0c1JlcG9ydD8ucHVibGlzaGVyU3RhdHMuYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zIHx8IDAsXG4gICAgfTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNcIiwgY2hpbGRyZW46IGNhbGxTdGF0c1JlcG9ydCAmJiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3hzKFwiaDNcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19oZWFkaW5nXCIsIGNoaWxkcmVuOiBbanN4KEljb24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19faWNvblwiLCBpY29uOiBcImNhbGwtbGF0ZW5jeVwiIH0pLCB0KCdDYWxsIExhdGVuY3knKV0gfSksIGpzeChcInBcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19kZXNjcmlwdGlvblwiLCBjaGlsZHJlbjogdCgnVmVyeSBoaWdoIGxhdGVuY3kgdmFsdWVzIG1heSByZWR1Y2UgY2FsbCBxdWFsaXR5LCBjYXVzZSBsYWcsIGFuZCBtYWtlIHRoZSBjYWxsIGxlc3MgZW5qb3lhYmxlLicpIH0pXSB9KSwganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fbGF0ZW5jeWNoYXJ0XCIsIGNoaWxkcmVuOiBqc3goU3VzcGVuc2UsIHsgZmFsbGJhY2s6IExhdGVuY3lDaGFydFN1c3BlbnNlRmFsbGJhY2ssIGNoaWxkcmVuOiBqc3goQ2FsbFN0YXRzTGF0ZW5jeUNoYXJ0LCB7IHZhbHVlczogbGF0ZW5jeUJ1ZmZlciB9KSB9KSB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX2hlYWRlclwiLCBjaGlsZHJlbjogW2pzeHMoXCJoM1wiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX2hlYWRpbmdcIiwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19pY29uXCIsIGljb246IFwibmV0d29yay1xdWFsaXR5XCIgfSksIHQoJ0NhbGwgcGVyZm9ybWFuY2UnKV0gfSksIGpzeChcInBcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19kZXNjcmlwdGlvblwiLCBjaGlsZHJlbjogdCgnUmV2aWV3IHRoZSBrZXkgZGF0YSBwb2ludHMgYmVsb3cgdG8gYXNzZXNzIGNhbGwgcGVyZm9ybWFuY2UnKSB9KV0gfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19jYXJkLWNvbnRhaW5lclwiLCBjaGlsZHJlbjogW2pzeChTdGF0Q2FyZCwgeyBsYWJlbDogdCgnUmVnaW9uJyksIHZhbHVlOiBjYWxsU3RhdHNSZXBvcnQuZGF0YWNlbnRlciB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiB0KCdMYXRlbmN5JyksIHZhbHVlOiBgJHtjYWxsU3RhdHNSZXBvcnQucHVibGlzaGVyU3RhdHMuYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zfSBtcy5gLCBjb21wYXJpc29uOiBsYXRlbmN5Q29tcGFyaXNvbiB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiB0KCdSZWNlaXZlIGppdHRlcicpLCB2YWx1ZTogYCR7Y2FsbFN0YXRzUmVwb3J0LnN1YnNjcmliZXJTdGF0cy5hdmVyYWdlSml0dGVySW5Nc30gbXMuYCwgY29tcGFyaXNvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5sYXRlbmN5Q29tcGFyaXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhbGxTdGF0c1JlcG9ydC5zdWJzY3JpYmVyU3RhdHMuYXZlcmFnZUppdHRlckluTXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiB0KCdQdWJsaXNoIGppdHRlcicpLCB2YWx1ZTogYCR7Y2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzLmF2ZXJhZ2VKaXR0ZXJJbk1zfSBtcy5gLCBjb21wYXJpc29uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmxhdGVuY3lDb21wYXJpc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzLmF2ZXJhZ2VKaXR0ZXJJbk1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSksIGpzeChTdGF0Q2FyZCwgeyBsYWJlbDogYCR7dCgnUHVibGlzaCByZXNvbHV0aW9uJyl9JHtzaG93Q29kZWNJbmZvID8gZm9ybWF0Q29kZWMoY2FsbFN0YXRzUmVwb3J0KSA6ICcnfWAsIHZhbHVlOiB0b0ZyYW1lU2l6ZShjYWxsU3RhdHNSZXBvcnQucHVibGlzaGVyU3RhdHMpIH0pLCBqc3goU3RhdENhcmQsIHsgbGFiZWw6IHQoJ1B1Ymxpc2ggcXVhbGl0eSBkcm9wIHJlYXNvbicpLCB2YWx1ZTogY2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzLnF1YWxpdHlMaW1pdGF0aW9uUmVhc29ucyB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiB0KCdSZWNlaXZpbmcgcmVzb2x1dGlvbicpLCB2YWx1ZTogdG9GcmFtZVNpemUoY2FsbFN0YXRzUmVwb3J0LnN1YnNjcmliZXJTdGF0cykgfSksIGpzeChTdGF0Q2FyZCwgeyBsYWJlbDogdCgnUmVjZWl2ZSBxdWFsaXR5IGRyb3AgcmVhc29uJyksIHZhbHVlOiBjYWxsU3RhdHNSZXBvcnQuc3Vic2NyaWJlclN0YXRzLnF1YWxpdHlMaW1pdGF0aW9uUmVhc29ucyB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiB0KCdQdWJsaXNoIGJpdHJhdGUnKSwgdmFsdWU6IHB1Ymxpc2hCaXRyYXRlIH0pLCBqc3goU3RhdENhcmQsIHsgbGFiZWw6IHQoJ1JlY2VpdmluZyBiaXRyYXRlJyksIHZhbHVlOiBzdWJzY3JpYmVCaXRyYXRlIH0pXSB9KV0gfSkpIH0pKTtcbn07XG5jb25zdCBTdGF0Q2FyZEV4cGxhbmF0aW9uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiB9ID0gcHJvcHM7XG4gICAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCB7IHJlZnMsIGZsb2F0aW5nU3R5bGVzLCBjb250ZXh0IH0gPSB1c2VGbG9hdGluZyh7XG4gICAgICAgIG9wZW46IGlzT3BlbixcbiAgICAgICAgb25PcGVuQ2hhbmdlOiBzZXRJc09wZW4sXG4gICAgfSk7XG4gICAgY29uc3QgaG92ZXIgPSB1c2VIb3Zlcihjb250ZXh0KTtcbiAgICBjb25zdCB7IGdldFJlZmVyZW5jZVByb3BzLCBnZXRGbG9hdGluZ1Byb3BzIH0gPSB1c2VJbnRlcmFjdGlvbnMoW2hvdmVyXSk7XG4gICAgcmV0dXJuIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1leHBsYW5hdGlvblwiLCByZWY6IHJlZnMuc2V0UmVmZXJlbmNlLCAuLi5nZXRSZWZlcmVuY2VQcm9wcygpLCBjaGlsZHJlbjoganN4KEljb24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1leHBsYW5hdGlvbl9faWNvblwiLCBpY29uOiBcImluZm9cIiB9KSB9KSwgaXNPcGVuICYmIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLWV4cGxhbmF0aW9uX19kZXNjcmlwdGlvblwiLCByZWY6IHJlZnMuc2V0RmxvYXRpbmcsIHN0eWxlOiBmbG9hdGluZ1N0eWxlcywgLi4uZ2V0RmxvYXRpbmdQcm9wcygpLCBjaGlsZHJlbjogZGVzY3JpcHRpb24gfSkpXSB9KSk7XG59O1xuY29uc3QgU3RhdHNUYWcgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNoaWxkcmVuLCBzdGF0dXMgfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2NhbGwtc3RhdHNfX3RhZycsIHtcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2NhbGwtc3RhdHNfX3RhZy0tZ29vZCc6IHN0YXR1cyA9PT0gU3RhdHVzLkdPT0QsXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19jYWxsLXN0YXRzX190YWctLW9rJzogc3RhdHVzID09PSBTdGF0dXMuT0ssXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19jYWxsLXN0YXRzX190YWctLWJhZCc6IHN0YXR1cyA9PT0gU3RhdHVzLkJBRCxcbiAgICAgICAgfSksIGNoaWxkcmVuOiBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX190YWdfX3RleHRcIiwgY2hpbGRyZW46IGNoaWxkcmVuIH0pIH0pKTtcbn07XG5jb25zdCBTdGF0Q2FyZCA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbGFiZWwsIHZhbHVlLCBkZXNjcmlwdGlvbiwgY29tcGFyaXNvbiB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3Qgc3RhdHVzID0gY29tcGFyaXNvbiA/IHRvU3RhdHVzKGNvbXBhcmlzb24pIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX2NhcmRcIiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fY2FyZC1jb250ZW50XCIsIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX2NhcmQtbGFiZWxcIiwgY2hpbGRyZW46IFtsYWJlbCwgZGVzY3JpcHRpb24gJiYganN4KFN0YXRDYXJkRXhwbGFuYXRpb24sIHsgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIH0pXSB9KSwganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fY2FyZC12YWx1ZVwiLCBjaGlsZHJlbjogdmFsdWUgfSldIH0pLCBzdGF0dXMgJiYganN4KFN0YXRzVGFnLCB7IHN0YXR1czogc3RhdHVzLCBjaGlsZHJlbjogdChzdGF0dXMpIH0pXSB9KSk7XG59O1xuY29uc3QgdG9TdGF0dXMgPSAoY29uZmlnKSA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSwgbG93Qm91bmQsIGhpZ2hCb3VuZCB9ID0gY29uZmlnO1xuICAgIGlmICh2YWx1ZSA8PSBsb3dCb3VuZClcbiAgICAgICAgcmV0dXJuIFN0YXR1cy5HT09EO1xuICAgIGlmICh2YWx1ZSA+PSBsb3dCb3VuZCAmJiB2YWx1ZSA8PSBoaWdoQm91bmQpXG4gICAgICAgIHJldHVybiBTdGF0dXMuT0s7XG4gICAgaWYgKHZhbHVlID49IGhpZ2hCb3VuZClcbiAgICAgICAgcmV0dXJuIFN0YXR1cy5CQUQ7XG4gICAgcmV0dXJuIFN0YXR1cy5HT09EO1xufTtcbmNvbnN0IHRvRnJhbWVTaXplID0gKHN0YXRzKSA9PiB7XG4gICAgY29uc3QgeyBoaWdoZXN0RnJhbWVXaWR0aDogdywgaGlnaGVzdEZyYW1lSGVpZ2h0OiBoLCBoaWdoZXN0RnJhbWVzUGVyU2Vjb25kOiBmcHMsIH0gPSBzdGF0cztcbiAgICBsZXQgc2l6ZSA9IGAtYDtcbiAgICBpZiAodyAmJiBoKSB7XG4gICAgICAgIHNpemUgPSBgJHt3fXgke2h9YDtcbiAgICAgICAgaWYgKGZwcykge1xuICAgICAgICAgICAgc2l6ZSArPSBgQCR7ZnBzfWZwcy5gO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xufTtcbmNvbnN0IGZvcm1hdENvZGVjID0gKGNhbGxTdGF0c1JlcG9ydCkgPT4ge1xuICAgIGNvbnN0IHsgY29kZWMgfSA9IGNhbGxTdGF0c1JlcG9ydC5wdWJsaXNoZXJTdGF0cztcbiAgICBpZiAoIWNvZGVjKVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgY29uc3QgWywgbmFtZV0gPSBjb2RlYy5zcGxpdCgnLycpO1xuICAgIHJldHVybiBuYW1lID8gYCAoJHtuYW1lfSlgIDogJyc7XG59O1xuY29uc3QgY2FsY3VsYXRlUHVibGlzaEJpdHJhdGUgPSAocHJldmlvdXNDYWxsU3RhdHNSZXBvcnQsIGNhbGxTdGF0c1JlcG9ydCkgPT4ge1xuICAgIGNvbnN0IHsgcHVibGlzaGVyU3RhdHM6IHsgdG90YWxCeXRlc1NlbnQ6IHByZXZpb3VzVG90YWxCeXRlc1NlbnQsIHRpbWVzdGFtcDogcHJldmlvdXNUaW1lc3RhbXAsIH0sIH0gPSBwcmV2aW91c0NhbGxTdGF0c1JlcG9ydDtcbiAgICBjb25zdCB7IHB1Ymxpc2hlclN0YXRzOiB7IHRvdGFsQnl0ZXNTZW50LCB0aW1lc3RhbXAgfSwgfSA9IGNhbGxTdGF0c1JlcG9ydDtcbiAgICBjb25zdCBieXRlc1NlbnQgPSB0b3RhbEJ5dGVzU2VudCAtIHByZXZpb3VzVG90YWxCeXRlc1NlbnQ7XG4gICAgY29uc3QgdGltZUVsYXBzZWQgPSB0aW1lc3RhbXAgLSBwcmV2aW91c1RpbWVzdGFtcDtcbiAgICByZXR1cm4gYCR7KChieXRlc1NlbnQgKiA4KSAvIHRpbWVFbGFwc2VkKS50b0ZpeGVkKDIpfSBrYnBzYDtcbn07XG5jb25zdCBjYWxjdWxhdGVTdWJzY3JpYmVCaXRyYXRlID0gKHByZXZpb3VzQ2FsbFN0YXRzUmVwb3J0LCBjYWxsU3RhdHNSZXBvcnQpID0+IHtcbiAgICBjb25zdCB7IHN1YnNjcmliZXJTdGF0czogeyB0b3RhbEJ5dGVzUmVjZWl2ZWQ6IHByZXZpb3VzVG90YWxCeXRlc1JlY2VpdmVkLCB0aW1lc3RhbXA6IHByZXZpb3VzVGltZXN0YW1wLCB9LCB9ID0gcHJldmlvdXNDYWxsU3RhdHNSZXBvcnQ7XG4gICAgY29uc3QgeyBzdWJzY3JpYmVyU3RhdHM6IHsgdG90YWxCeXRlc1JlY2VpdmVkLCB0aW1lc3RhbXAgfSwgfSA9IGNhbGxTdGF0c1JlcG9ydDtcbiAgICBjb25zdCBieXRlc1JlY2VpdmVkID0gdG90YWxCeXRlc1JlY2VpdmVkIC0gcHJldmlvdXNUb3RhbEJ5dGVzUmVjZWl2ZWQ7XG4gICAgY29uc3QgdGltZUVsYXBzZWQgPSB0aW1lc3RhbXAgLSBwcmV2aW91c1RpbWVzdGFtcDtcbiAgICByZXR1cm4gYCR7KChieXRlc1JlY2VpdmVkICogOCkgLyB0aW1lRWxhcHNlZCkudG9GaXhlZCgyKX0ga2Jwc2A7XG59O1xuXG5jb25zdCBDYWxsU3RhdHNCdXR0b24gPSAoKSA9PiAoanN4KE1lbnVUb2dnbGUsIHsgcGxhY2VtZW50OiBcInRvcC1lbmRcIiwgVG9nZ2xlQnV0dG9uOiBUb2dnbGVNZW51QnV0dG9uLCBjaGlsZHJlbjoganN4KENhbGxTdGF0cywge30pIH0pKTtcbmNvbnN0IFRvZ2dsZU1lbnVCdXR0b24gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIFRvZ2dsZU1lbnVCdXR0b24ocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IHsgY2FwdGlvbiwgbWVudVNob3duIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKGpzeChDb21wb3NpdGVCdXR0b24sIHsgcmVmOiByZWYsIGFjdGl2ZTogbWVudVNob3duLCBjYXB0aW9uOiBjYXB0aW9uLCB0aXRsZTogY2FwdGlvbiB8fCB0KCdTdGF0aXN0aWNzJyksIFwiZGF0YS10ZXN0aWRcIjogXCJzdGF0cy1idXR0b25cIiwgY2hpbGRyZW46IGpzeChJY29uLCB7IGljb246IFwic3RhdHNcIiB9KSB9KSk7XG59KTtcblxuY29uc3QgVG9nZ2xlQXVkaW9PdXRwdXRCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IGNhcHRpb24sIE1lbnUgPSBEZXZpY2VTZWxlY3RvckF1ZGlvT3V0cHV0LCBtZW51UGxhY2VtZW50ID0gJ3RvcCcsIG9uTWVudVRvZ2dsZSwgfSA9IHByb3BzO1xuICAgIGNvbnN0IFt0b29sdGlwRGlzYWJsZWQsIHNldFRvb2x0aXBEaXNhYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgcmV0dXJuIChqc3goV2l0aFRvb2x0aXAsIHsgdGl0bGU6IGNhcHRpb24gfHwgdCgnU3BlYWtlcnMnKSwgdG9vbHRpcERpc2FibGVkOiB0b29sdGlwRGlzYWJsZWQsIGNoaWxkcmVuOiBqc3goQ29tcG9zaXRlQnV0dG9uLCB7IE1lbnU6IE1lbnUsIG1lbnVQbGFjZW1lbnQ6IG1lbnVQbGFjZW1lbnQsIGNhcHRpb246IGNhcHRpb24sIFwiZGF0YS10ZXN0aWRcIjogXCJhdWRpby1vdXRwdXQtYnV0dG9uXCIsIG9uTWVudVRvZ2dsZTogKHNob3duKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VG9vbHRpcERpc2FibGVkKHNob3duKTtcbiAgICAgICAgICAgICAgICBvbk1lbnVUb2dnbGU/LihzaG93bik7XG4gICAgICAgICAgICB9LCBjaGlsZHJlbjoganN4KEljb24sIHsgaWNvbjogXCJzcGVha2VyXCIgfSkgfSkgfSkpO1xufTtcblxuY29uc3QgQmxvY2tlZFVzZXJMaXN0aW5nID0gKHsgZGF0YSB9KSA9PiB7XG4gICAgaWYgKCFkYXRhLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIChqc3goRnJhZ21lbnQsIHsgY2hpbGRyZW46IGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3RpbmdcIiwgY2hpbGRyZW46IGRhdGEubWFwKCh1c2VySWQpID0+IChqc3goQmxvY2tlZFVzZXJMaXN0aW5nSXRlbSwgeyB1c2VySWQ6IHVzZXJJZCB9LCB1c2VySWQpKSkgfSkgfSkpO1xufTtcbmNvbnN0IEJsb2NrZWRVc2VyTGlzdGluZ0l0ZW0gPSAoeyB1c2VySWQgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgdW5ibG9ja1VzZXJDbGlja0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmICh1c2VySWQpXG4gICAgICAgICAgICBjYWxsPy51bmJsb2NrVXNlcih1c2VySWQpO1xuICAgIH07XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtXCIsIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19kaXNwbGF5LW5hbWVcIiwgY2hpbGRyZW46IHVzZXJJZCB9KSwganN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5LkJMT0NLX1VTRVJTXSwgY2hpbGRyZW46IGpzeChUZXh0QnV0dG9uLCB7IG9uQ2xpY2s6IHVuYmxvY2tVc2VyQ2xpY2tIYW5kbGVyLCBjaGlsZHJlbjogXCJVbmJsb2NrXCIgfSkgfSldIH0pKTtcbn07XG5cbmNvbnN0IENhbGxQYXJ0aWNpcGFudExpc3RIZWFkZXIgPSAoeyBvbkNsb3NlLCB9KSA9PiB7XG4gICAgY29uc3QgeyB1c2VQYXJ0aWNpcGFudHMsIHVzZUFub255bW91c1BhcnRpY2lwYW50Q291bnQgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdXNlUGFydGljaXBhbnRzKCk7XG4gICAgY29uc3QgYW5vbnltb3VzUGFydGljaXBhbnRDb3VudCA9IHVzZUFub255bW91c1BhcnRpY2lwYW50Q291bnQoKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0LWhlYWRlclwiLCBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0LWhlYWRlcl9fdGl0bGVcIiwgY2hpbGRyZW46IFt0KCdQYXJ0aWNpcGFudHMnKSwgJyAnLCBqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3QtaGVhZGVyX190aXRsZS1jb3VudFwiLCBjaGlsZHJlbjogW1wiW1wiLCBwYXJ0aWNpcGFudHMubGVuZ3RoLCBcIl1cIl0gfSksIGFub255bW91c1BhcnRpY2lwYW50Q291bnQgPiAwICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdC1oZWFkZXJfX3RpdGxlLWFub255bW91c1wiLCBjaGlsZHJlbjogdCgnQW5vbnltb3VzJywgeyBjb3VudDogYW5vbnltb3VzUGFydGljaXBhbnRDb3VudCB9KSB9KSldIH0pLCBqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBvbkNsb3NlLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0LWhlYWRlcl9fY2xvc2UtYnV0dG9uXCIsIGljb246IFwiY2xvc2VcIiB9KV0gfSkpO1xufTtcblxuY29uc3QgQ2FsbFBhcnRpY2lwYW50TGlzdGluZ0l0ZW0gPSAoeyBwYXJ0aWNpcGFudCwgRGlzcGxheU5hbWUgPSBEZWZhdWx0RGlzcGxheU5hbWUsIH0pID0+IHtcbiAgICBjb25zdCBpc0F1ZGlvT24gPSBoYXNBdWRpbyhwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgaXNWaWRlb09uID0gaGFzVmlkZW8ocGFydGljaXBhbnQpO1xuICAgIGNvbnN0IGlzUGlubmVkT24gPSBpc1Bpbm5lZChwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtXCIsIGNoaWxkcmVuOiBbanN4KEF2YXRhciwgeyBuYW1lOiBwYXJ0aWNpcGFudC5uYW1lLCBpbWFnZVNyYzogcGFydGljaXBhbnQuaW1hZ2UgfSksIGpzeChEaXNwbGF5TmFtZSwgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQgfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX21lZGlhLWluZGljYXRvci1ncm91cFwiLCBjaGlsZHJlbjogW2pzeChNZWRpYUluZGljYXRvciwgeyB0aXRsZTogaXNBdWRpb09uID8gdCgnTWljcm9waG9uZSBvbicpIDogdCgnTWljcm9waG9uZSBvZmYnKSwgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3RpbmctaXRlbV9faWNvbicsIGBzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3RpbmctaXRlbV9faWNvbi0ke2lzQXVkaW9PbiA/ICdtaWMnIDogJ21pYy1vZmYnfWApIH0pLCBqc3goTWVkaWFJbmRpY2F0b3IsIHsgdGl0bGU6IGlzVmlkZW9PbiA/IHQoJ0NhbWVyYSBvbicpIDogdCgnQ2FtZXJhIG9mZicpLCBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19pY29uJywgYHN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19pY29uLSR7aXNWaWRlb09uID8gJ2NhbWVyYScgOiAnY2FtZXJhLW9mZid9YCkgfSksIGlzUGlubmVkT24gJiYgKGpzeChNZWRpYUluZGljYXRvciwgeyB0aXRsZTogdCgnUGlubmVkJyksIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2ljb24nLCAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2ljb24tcGlubmVkJykgfSkpLCBqc3goTWVudVRvZ2dsZSwgeyBwbGFjZW1lbnQ6IFwiYm90dG9tLWVuZFwiLCBUb2dnbGVCdXR0b246IFRvZ2dsZUJ1dHRvbiQyLCBjaGlsZHJlbjoganN4KFBhcnRpY2lwYW50Vmlld0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgcGFydGljaXBhbnQsIHRyYWNrVHlwZTogJ25vbmUnIH0sIGNoaWxkcmVuOiBqc3goUGFydGljaXBhbnRBY3Rpb25zQ29udGV4dE1lbnUsIHt9KSB9KSB9KV0gfSldIH0pKTtcbn07XG5jb25zdCBNZWRpYUluZGljYXRvciA9IChwcm9wcykgPT4gKGpzeChXaXRoVG9vbHRpcCwgeyAuLi5wcm9wcyB9KSk7XG5jb25zdCBEZWZhdWx0RGlzcGxheU5hbWUgPSAoeyBwYXJ0aWNpcGFudCB9KSA9PiB7XG4gICAgY29uc3QgY29ubmVjdGVkVXNlciA9IHVzZUNvbm5lY3RlZFVzZXIoKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCBtZUZsYWcgPSBwYXJ0aWNpcGFudC51c2VySWQgPT09IGNvbm5lY3RlZFVzZXI/LmlkID8gdCgnTWUnKSA6ICcnO1xuICAgIGNvbnN0IG5hbWVPcklkID0gcGFydGljaXBhbnQubmFtZSB8fCBwYXJ0aWNpcGFudC51c2VySWQgfHwgdCgnVW5rbm93bicpO1xuICAgIGxldCBkaXNwbGF5TmFtZTtcbiAgICBpZiAoIXBhcnRpY2lwYW50Lm5hbWUpIHtcbiAgICAgICAgZGlzcGxheU5hbWUgPSBtZUZsYWcgfHwgbmFtZU9ySWQgfHwgdCgnVW5rbm93bicpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZUZsYWcpIHtcbiAgICAgICAgZGlzcGxheU5hbWUgPSBgJHtuYW1lT3JJZH0gKCR7bWVGbGFnfSlgO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGlzcGxheU5hbWUgPSBuYW1lT3JJZDtcbiAgICB9XG4gICAgcmV0dXJuIChqc3goV2l0aFRvb2x0aXAsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19kaXNwbGF5LW5hbWVcIiwgdGl0bGU6IGRpc3BsYXlOYW1lLCBjaGlsZHJlbjogZGlzcGxheU5hbWUgfSkpO1xufTtcbmNvbnN0IFRvZ2dsZUJ1dHRvbiQyID0gZm9yd2FyZFJlZihmdW5jdGlvbiBUb2dnbGVCdXR0b24ocHJvcHMsIHJlZikge1xuICAgIHJldHVybiBqc3goSWNvbkJ1dHRvbiwgeyBlbmFibGVkOiBwcm9wcy5tZW51U2hvd24sIGljb246IFwiZWxsaXBzaXNcIiwgcmVmOiByZWYgfSk7XG59KTtcblxuY29uc3QgQ2FsbFBhcnRpY2lwYW50TGlzdGluZyA9ICh7IGRhdGEsIH0pID0+IChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nXCIsIGNoaWxkcmVuOiBkYXRhLm1hcCgocGFydGljaXBhbnQpID0+IChqc3goQ2FsbFBhcnRpY2lwYW50TGlzdGluZ0l0ZW0sIHsgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50IH0sIHBhcnRpY2lwYW50LnNlc3Npb25JZCkpKSB9KSk7XG5cbmNvbnN0IEVtcHR5UGFydGljaXBhbnRTZWFyY2hMaXN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdC0tZW1wdHlcIiwgY2hpbGRyZW46IHQoJ05vIHBhcnRpY2lwYW50cyBmb3VuZCcpIH0pKTtcbn07XG5cbmNvbnN0IFNlYXJjaElucHV0ID0gKHsgZXhpdFNlYXJjaCwgaXNBY3RpdmUsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IFtpbnB1dEVsZW1lbnQsIHNldElucHV0RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2VzY2FwZScpXG4gICAgICAgICAgICAgICAgZXhpdFNlYXJjaCgpO1xuICAgICAgICB9O1xuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgICAgfTtcbiAgICB9LCBbZXhpdFNlYXJjaCwgaW5wdXRFbGVtZW50XSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3NlYXJjaC1pbnB1dF9fY29udGFpbmVyJywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fc2VhcmNoLWlucHV0X19jb250YWluZXItLWFjdGl2ZSc6IGlzQWN0aXZlLFxuICAgICAgICB9KSwgY2hpbGRyZW46IFtqc3goXCJpbnB1dFwiLCB7IHBsYWNlaG9sZGVyOiBcIlNlYXJjaFwiLCAuLi5yZXN0LCByZWY6IHNldElucHV0RWxlbWVudCB9KSwgaXNBY3RpdmUgPyAoanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2VhcmNoLWlucHV0X19jbGVhci1idG5cIiwgb25DbGljazogZXhpdFNlYXJjaCwgY2hpbGRyZW46IGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zZWFyY2gtaW5wdXRfX2ljb24tLWFjdGl2ZVwiIH0pIH0pKSA6IChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2VhcmNoLWlucHV0X19pY29uXCIgfSkpXSB9KSk7XG59O1xuXG5jb25zdCBTZWFyY2hSZXN1bHRzID0gKHsgRW1wdHlTZWFyY2hSZXN1bHRDb21wb25lbnQsIExvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IkMSA9IExvYWRpbmdJbmRpY2F0b3IsIHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcywgc2VhcmNoUmVzdWx0cywgU2VhcmNoUmVzdWx0TGlzdCwgfSkgPT4ge1xuICAgIGlmIChzZWFyY2hRdWVyeUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zZWFyY2gtcmVzdWx0cy0tbG9hZGluZ1wiLCBjaGlsZHJlbjoganN4KExvYWRpbmdJbmRpY2F0b3IkMSwge30pIH0pKTtcbiAgICB9XG4gICAgaWYgKCFzZWFyY2hSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ganN4KEVtcHR5U2VhcmNoUmVzdWx0Q29tcG9uZW50LCB7fSk7XG4gICAgfVxuICAgIHJldHVybiBqc3goU2VhcmNoUmVzdWx0TGlzdCwgeyBkYXRhOiBzZWFyY2hSZXN1bHRzIH0pO1xufTtcblxuY29uc3QgdXNlU2VhcmNoID0gKHsgZGVib3VuY2VJbnRlcnZhbCwgc2VhcmNoRm4sIHNlYXJjaFF1ZXJ5ID0gJycsIH0pID0+IHtcbiAgICBjb25zdCBbc2VhcmNoUmVzdWx0cywgc2V0U2VhcmNoUmVzdWx0c10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgW3NlYXJjaFF1ZXJ5SW5Qcm9ncmVzcywgc2V0U2VhcmNoUXVlcnlJblByb2dyZXNzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXNlYXJjaFF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgc2V0U2VhcmNoUXVlcnlJblByb2dyZXNzKGZhbHNlKTtcbiAgICAgICAgICAgIHNldFNlYXJjaFJlc3VsdHMoW10pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcyh0cnVlKTtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc2VhcmNoRm4oc2VhcmNoUXVlcnkpO1xuICAgICAgICAgICAgICAgIHNldFNlYXJjaFJlc3VsdHMocmVzdWx0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNldFNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGRlYm91bmNlSW50ZXJ2YWwpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB9O1xuICAgIH0sIFtkZWJvdW5jZUludGVydmFsLCBzZWFyY2hGbiwgc2VhcmNoUXVlcnldKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWFyY2hRdWVyeUluUHJvZ3Jlc3MsXG4gICAgICAgIHNlYXJjaFJlc3VsdHMsXG4gICAgfTtcbn07XG5cbmNvbnN0IFVzZXJMaXN0VHlwZXMgPSB7XG4gICAgYWN0aXZlOiAnQWN0aXZlIHVzZXJzJyxcbiAgICBibG9ja2VkOiAnQmxvY2tlZCB1c2VycycsXG59O1xuY29uc3QgREVGQVVMVF9ERUJPVU5DRV9TRUFSQ0hfSU5URVJWQUwgPSAyMDA7XG5jb25zdCBDYWxsUGFydGljaXBhbnRzTGlzdCA9ICh7IG9uQ2xvc2UsIGFjdGl2ZVVzZXJzU2VhcmNoRm4sIGJsb2NrZWRVc2Vyc1NlYXJjaEZuLCBkZWJvdW5jZVNlYXJjaEludGVydmFsLCB9KSA9PiB7XG4gICAgY29uc3QgW3NlYXJjaFF1ZXJ5LCBzZXRTZWFyY2hRdWVyeV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW3VzZXJMaXN0VHlwZSwgc2V0VXNlckxpc3RUeXBlXSA9IHVzZVN0YXRlKCdhY3RpdmUnKTtcbiAgICBjb25zdCBleGl0U2VhcmNoID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0U2VhcmNoUXVlcnkoJycpLCBbXSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdFwiLCBjaGlsZHJlbjogW2pzeChDYWxsUGFydGljaXBhbnRMaXN0SGVhZGVyLCB7IG9uQ2xvc2U6IG9uQ2xvc2UgfSksIGpzeChTZWFyY2hJbnB1dCwgeyB2YWx1ZTogc2VhcmNoUXVlcnksIG9uQ2hhbmdlOiAoeyBjdXJyZW50VGFyZ2V0IH0pID0+IHNldFNlYXJjaFF1ZXJ5KGN1cnJlbnRUYXJnZXQudmFsdWUpLCBleGl0U2VhcmNoOiBleGl0U2VhcmNoLCBpc0FjdGl2ZTogISFzZWFyY2hRdWVyeSB9KSwganN4KENhbGxQYXJ0aWNpcGFudExpc3RDb250ZW50SGVhZGVyLCB7IHVzZXJMaXN0VHlwZTogdXNlckxpc3RUeXBlLCBzZXRVc2VyTGlzdFR5cGU6IHNldFVzZXJMaXN0VHlwZSB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3RfX2NvbnRlbnRcIiwgY2hpbGRyZW46IFt1c2VyTGlzdFR5cGUgPT09ICdhY3RpdmUnICYmIChqc3goQWN0aXZlVXNlcnNTZWFyY2hSZXN1bHRzLCB7IHNlYXJjaFF1ZXJ5OiBzZWFyY2hRdWVyeSwgYWN0aXZlVXNlcnNTZWFyY2hGbjogYWN0aXZlVXNlcnNTZWFyY2hGbiwgZGVib3VuY2VTZWFyY2hJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCB9KSksIHVzZXJMaXN0VHlwZSA9PT0gJ2Jsb2NrZWQnICYmIChqc3goQmxvY2tlZFVzZXJzU2VhcmNoUmVzdWx0cywgeyBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnksIGJsb2NrZWRVc2Vyc1NlYXJjaEZuOiBibG9ja2VkVXNlcnNTZWFyY2hGbiwgZGVib3VuY2VTZWFyY2hJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCB9KSldIH0pXSB9KSk7XG59O1xuY29uc3QgQ2FsbFBhcnRpY2lwYW50TGlzdENvbnRlbnRIZWFkZXIgPSAoeyB1c2VyTGlzdFR5cGUsIHNldFVzZXJMaXN0VHlwZSwgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgbXV0ZUFsbCA9ICgpID0+IHtcbiAgICAgICAgY2FsbD8ubXV0ZUFsbFVzZXJzKCdhdWRpbycpO1xuICAgIH07XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdF9fY29udGVudC1oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0X19jb250ZW50LWhlYWRlci10aXRsZVwiLCBjaGlsZHJlbjogdXNlckxpc3RUeXBlID09PSAnYWN0aXZlJyAmJiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5Lk1VVEVfVVNFUlNdLCBoYXNQZXJtaXNzaW9uc09ubHk6IHRydWUsIGNoaWxkcmVuOiBqc3goVGV4dEJ1dHRvbiwgeyBvbkNsaWNrOiBtdXRlQWxsLCBjaGlsZHJlbjogXCJNdXRlIGFsbFwiIH0pIH0pKSB9KSwganN4KE1lbnVUb2dnbGUsIHsgcGxhY2VtZW50OiBcImJvdHRvbS1lbmRcIiwgVG9nZ2xlQnV0dG9uOiBUb2dnbGVCdXR0b24kMSwgY2hpbGRyZW46IGpzeChHZW5lcmljTWVudSwgeyBjaGlsZHJlbjogT2JqZWN0LmtleXMoVXNlckxpc3RUeXBlcykubWFwKChsdCkgPT4gKGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgXCJhcmlhLXNlbGVjdGVkXCI6IGx0ID09PSB1c2VyTGlzdFR5cGUsIG9uQ2xpY2s6ICgpID0+IHNldFVzZXJMaXN0VHlwZShsdCksIGNoaWxkcmVuOiBVc2VyTGlzdFR5cGVzW2x0XSB9LCBsdCkpKSB9KSB9KV0gfSkpO1xufTtcbmNvbnN0IEFjdGl2ZVVzZXJzU2VhcmNoUmVzdWx0cyA9ICh7IHNlYXJjaFF1ZXJ5LCBhY3RpdmVVc2Vyc1NlYXJjaEZuOiBhY3RpdmVVc2Vyc1NlYXJjaEZuRnJvbVByb3BzLCBkZWJvdW5jZVNlYXJjaEludGVydmFsID0gREVGQVVMVF9ERUJPVU5DRV9TRUFSQ0hfSU5URVJWQUwsIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZVBhcnRpY2lwYW50cyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VQYXJ0aWNpcGFudHMoeyBzb3J0Qnk6IG5hbWUgfSk7XG4gICAgY29uc3QgYWN0aXZlVXNlcnNTZWFyY2hGbiA9IHVzZUNhbGxiYWNrKChxdWVyeVN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeVJlZ0V4cCA9IG5ldyBSZWdFeHAocXVlcnlTdHJpbmcsICdpJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocGFydGljaXBhbnRzLmZpbHRlcigocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5uYW1lLm1hdGNoKHF1ZXJ5UmVnRXhwKTtcbiAgICAgICAgfSkpO1xuICAgIH0sIFtwYXJ0aWNpcGFudHNdKTtcbiAgICBjb25zdCB7IHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcywgc2VhcmNoUmVzdWx0cyB9ID0gdXNlU2VhcmNoKHtcbiAgICAgICAgc2VhcmNoRm46IGFjdGl2ZVVzZXJzU2VhcmNoRm5Gcm9tUHJvcHMgPz8gYWN0aXZlVXNlcnNTZWFyY2hGbixcbiAgICAgICAgZGVib3VuY2VJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCxcbiAgICAgICAgc2VhcmNoUXVlcnksXG4gICAgfSk7XG4gICAgcmV0dXJuIChqc3goU2VhcmNoUmVzdWx0cywgeyBFbXB0eVNlYXJjaFJlc3VsdENvbXBvbmVudDogRW1wdHlQYXJ0aWNpcGFudFNlYXJjaExpc3QsIExvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsIHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzczogc2VhcmNoUXVlcnlJblByb2dyZXNzLCBzZWFyY2hSZXN1bHRzOiBzZWFyY2hRdWVyeSA/IHNlYXJjaFJlc3VsdHMgOiBwYXJ0aWNpcGFudHMsIFNlYXJjaFJlc3VsdExpc3Q6IENhbGxQYXJ0aWNpcGFudExpc3RpbmcgfSkpO1xufTtcbmNvbnN0IEJsb2NrZWRVc2Vyc1NlYXJjaFJlc3VsdHMgPSAoeyBibG9ja2VkVXNlcnNTZWFyY2hGbjogYmxvY2tlZFVzZXJzU2VhcmNoRm5Gcm9tUHJvcHMsIGRlYm91bmNlU2VhcmNoSW50ZXJ2YWwgPSBERUZBVUxUX0RFQk9VTkNFX1NFQVJDSF9JTlRFUlZBTCwgc2VhcmNoUXVlcnksIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZUNhbGxCbG9ja2VkVXNlcklkcyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBibG9ja2VkVXNlcnMgPSB1c2VDYWxsQmxvY2tlZFVzZXJJZHMoKTtcbiAgICBjb25zdCBibG9ja2VkVXNlcnNTZWFyY2hGbiA9IHVzZUNhbGxiYWNrKChxdWVyeVN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeVJlZ0V4cCA9IG5ldyBSZWdFeHAocXVlcnlTdHJpbmcsICdpJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYmxvY2tlZFVzZXJzLmZpbHRlcigoYmxvY2tlZFVzZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBibG9ja2VkVXNlci5tYXRjaChxdWVyeVJlZ0V4cCk7XG4gICAgICAgIH0pKTtcbiAgICB9LCBbYmxvY2tlZFVzZXJzXSk7XG4gICAgY29uc3QgeyBzZWFyY2hRdWVyeUluUHJvZ3Jlc3MsIHNlYXJjaFJlc3VsdHMgfSA9IHVzZVNlYXJjaCh7XG4gICAgICAgIHNlYXJjaEZuOiBibG9ja2VkVXNlcnNTZWFyY2hGbkZyb21Qcm9wcyA/PyBibG9ja2VkVXNlcnNTZWFyY2hGbixcbiAgICAgICAgZGVib3VuY2VJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCxcbiAgICAgICAgc2VhcmNoUXVlcnksXG4gICAgfSk7XG4gICAgcmV0dXJuIChqc3goU2VhcmNoUmVzdWx0cywgeyBFbXB0eVNlYXJjaFJlc3VsdENvbXBvbmVudDogRW1wdHlQYXJ0aWNpcGFudFNlYXJjaExpc3QsIExvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsIHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzczogc2VhcmNoUXVlcnlJblByb2dyZXNzLCBzZWFyY2hSZXN1bHRzOiBzZWFyY2hRdWVyeSA/IHNlYXJjaFJlc3VsdHMgOiBibG9ja2VkVXNlcnMsIFNlYXJjaFJlc3VsdExpc3Q6IEJsb2NrZWRVc2VyTGlzdGluZyB9KSk7XG59O1xuY29uc3QgVG9nZ2xlQnV0dG9uJDEgPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIFRvZ2dsZUJ1dHRvbihwcm9wcywgcmVmKSB7XG4gICAgcmV0dXJuIGpzeChJY29uQnV0dG9uLCB7IGVuYWJsZWQ6IHByb3BzLm1lbnVTaG93biwgaWNvbjogXCJmaWx0ZXJcIiwgcmVmOiByZWYgfSk7XG59KTtcblxuY29uc3QgQ2FsbFByZXZpZXcgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgc3R5bGUgfSA9IHByb3BzO1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VDYWxsVGh1bWJuYWlsIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHRodW1ibmFpbCA9IHVzZUNhbGxUaHVtYm5haWwoKTtcbiAgICBjb25zdCBbaW1hZ2VSZWYsIHNldEltYWdlUmVmXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaW1hZ2VSZWYgfHwgIWNhbGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSBjYWxsLmJpbmRDYWxsVGh1bWJuYWlsRWxlbWVudChpbWFnZVJlZik7XG4gICAgICAgIHJldHVybiAoKSA9PiBjbGVhbnVwKCk7XG4gICAgfSwgW2ltYWdlUmVmLCBjYWxsXSk7XG4gICAgaWYgKCF0aHVtYm5haWwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoanN4KFwiaW1nXCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2NhbGwtcHJldmlldycsIGNsYXNzTmFtZSksIHN0eWxlOiBzdHlsZSwgYWx0OiBcIkNhbGwgUHJldmlldyBUaHVtYm5haWxcIiwgcmVmOiBzZXRJbWFnZVJlZiB9KSk7XG59O1xuXG5jb25zdCBDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciA9ICh7IGNhbGxSZWNvcmRpbmdzLCBvblJlZnJlc2gsIH0pID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X19oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fdGl0bGVcIiwgY2hpbGRyZW46IFtqc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IHQoJ0NhbGwgUmVjb3JkaW5ncycpIH0pLCBjYWxsUmVjb3JkaW5ncy5sZW5ndGggPyBqc3hzKFwic3BhblwiLCB7IGNoaWxkcmVuOiBbXCIoXCIsIGNhbGxSZWNvcmRpbmdzLmxlbmd0aCwgXCIpXCJdIH0pIDogbnVsbF0gfSksIG9uUmVmcmVzaCAmJiAoanN4KEljb25CdXR0b24sIHsgaWNvbjogXCJyZWZyZXNoXCIsIHRpdGxlOiB0KCdSZWZyZXNoJyksIG9uQ2xpY2s6IG9uUmVmcmVzaCB9KSldIH0pKTtcbn07XG5cbmNvbnN0IGRhdGVGb3JtYXQgPSAoZGF0ZSkgPT4ge1xuICAgIGNvbnN0IGZvcm1hdCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIHJldHVybiBmb3JtYXQudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXTtcbn07XG5jb25zdCBDYWxsUmVjb3JkaW5nTGlzdEl0ZW0gPSAoeyByZWNvcmRpbmcsIH0pID0+IHtcbiAgICByZXR1cm4gKGpzeHMoXCJsaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2l0ZW1cIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190YWJsZS1jZWxsIHN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fZmlsZW5hbWVcIiwgY2hpbGRyZW46IHJlY29yZGluZy5maWxlbmFtZSB9KSwganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fdGFibGUtY2VsbCBzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX3RpbWVcIiwgY2hpbGRyZW46IGRhdGVGb3JtYXQocmVjb3JkaW5nLnN0YXJ0X3RpbWUpIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190YWJsZS1jZWxsIHN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fdGltZVwiLCBjaGlsZHJlbjogZGF0ZUZvcm1hdChyZWNvcmRpbmcuZW5kX3RpbWUpIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190YWJsZS1jZWxsIHN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fZG93bmxvYWRcIiwgY2hpbGRyZW46IGpzeChcImFcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdC1pdGVtX19hY3Rpb24tYnV0dG9uJywgJ3N0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdC1pdGVtX19hY3Rpb24tYnV0dG9uLS1kb3dubG9hZCcpLCByb2xlOiBcImJ1dHRvblwiLCBocmVmOiByZWNvcmRpbmcudXJsLCBkb3dubG9hZDogcmVjb3JkaW5nLmZpbGVuYW1lLCB0aXRsZTogXCJEb3dubG9hZCB0aGUgcmVjb3JkaW5nXCIsIGNoaWxkcmVuOiBqc3goSWNvbiwgeyBpY29uOiBcImRvd25sb2FkXCIgfSkgfSkgfSldIH0pKTtcbn07XG5cbmNvbnN0IEVtcHR5Q2FsbFJlY29yZGluZ0xpc3RpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fbGlzdGluZyBzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RpbmctLWVtcHR5XCIsIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fbGlzdGluZy0taWNvbi1lbXB0eVwiIH0pLCBqc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fbGlzdGluZy0tdGV4dC1lbXB0eVwiLCBjaGlsZHJlbjogXCJObyByZWNvcmRpbmdzIGF2YWlsYWJsZVwiIH0pXSB9KSk7XG59O1xuXG5jb25zdCBMb2FkaW5nQ2FsbFJlY29yZGluZ0xpc3RpbmcgPSAoeyBjYWxsUmVjb3JkaW5ncywgfSkgPT4ge1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2NhbGxSZWNvcmRpbmdzLm1hcCgocmVjb3JkaW5nKSA9PiAoanN4KENhbGxSZWNvcmRpbmdMaXN0SXRlbSwgeyByZWNvcmRpbmc6IHJlY29yZGluZyB9LCByZWNvcmRpbmcuZmlsZW5hbWUpKSksIGpzeChMb2FkaW5nSW5kaWNhdG9yLCB7IHRleHQ6IFwiUmVjb3JkaW5nIGdldHRpbmcgcmVhZHlcIiB9KV0gfSkpO1xufTtcblxuY29uc3QgQ2FsbFJlY29yZGluZ0xpc3QgPSAoeyBjYWxsUmVjb3JkaW5ncywgQ2FsbFJlY29yZGluZ0xpc3RIZWFkZXI6IENhbGxSZWNvcmRpbmdMaXN0SGVhZGVyJDEgPSBDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciwgQ2FsbFJlY29yZGluZ0xpc3RJdGVtOiBDYWxsUmVjb3JkaW5nTGlzdEl0ZW0kMSA9IENhbGxSZWNvcmRpbmdMaXN0SXRlbSwgRW1wdHlDYWxsUmVjb3JkaW5nTGlzdCA9IEVtcHR5Q2FsbFJlY29yZGluZ0xpc3RpbmcsIGxvYWRpbmcsIExvYWRpbmdDYWxsUmVjb3JkaW5nTGlzdCA9IExvYWRpbmdDYWxsUmVjb3JkaW5nTGlzdGluZywgb25SZWZyZXNoLCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdFwiLCBjaGlsZHJlbjogW2pzeChDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciQxLCB7IGNhbGxSZWNvcmRpbmdzOiBjYWxsUmVjb3JkaW5ncywgb25SZWZyZXNoOiBvblJlZnJlc2ggfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RpbmdcIiwgY2hpbGRyZW46IGxvYWRpbmcgPyAoanN4KExvYWRpbmdDYWxsUmVjb3JkaW5nTGlzdCwgeyBjYWxsUmVjb3JkaW5nczogY2FsbFJlY29yZGluZ3MgfSkpIDogY2FsbFJlY29yZGluZ3MubGVuZ3RoID8gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RcIiwgY2hpbGRyZW46IGpzeHMoXCJsaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2l0ZW1cIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X19maWxlbmFtZVwiLCBjaGlsZHJlbjogXCJOYW1lXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX3RpbWVcIiwgY2hpbGRyZW46IFwiU3RhcnQgdGltZVwiIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190aW1lXCIsIGNoaWxkcmVuOiBcIkVuZCB0aW1lXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2Rvd25sb2FkXCIgfSldIH0pIH0pLCBqc3goXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RcIiwgY2hpbGRyZW46IGNhbGxSZWNvcmRpbmdzLm1hcCgocmVjb3JkaW5nKSA9PiAoanN4KENhbGxSZWNvcmRpbmdMaXN0SXRlbSQxLCB7IHJlY29yZGluZzogcmVjb3JkaW5nIH0sIHJlY29yZGluZy5maWxlbmFtZSkpKSB9KV0gfSkpIDogKGpzeChFbXB0eUNhbGxSZWNvcmRpbmdMaXN0LCB7fSkpIH0pXSB9KSk7XG59O1xuXG5jb25zdCBOb2lzZUNhbmNlbGxhdGlvbkNvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuLyoqXG4gKiBFeHBvc2VzIHRoZSBOb2lzZUNhbmNlbGxhdGlvbiBBUEkuXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdXNlZCBvdXRzaWRlIDxOb2lzZUNhbmNlbGxhdGlvblByb3ZpZGVyIC8+LlxuICovXG5jb25zdCB1c2VOb2lzZUNhbmNlbGxhdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChOb2lzZUNhbmNlbGxhdGlvbkNvbnRleHQpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZU5vaXNlQ2FuY2VsbGF0aW9uIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBOb2lzZUNhbmNlbGxhdGlvblByb3ZpZGVyJyk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0O1xufTtcbmNvbnN0IE5vaXNlQ2FuY2VsbGF0aW9uUHJvdmlkZXIgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNoaWxkcmVuLCBub2lzZUNhbmNlbGxhdGlvbiB9ID0gcHJvcHM7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHVzZUNhbGxTZXR0aW5ncywgdXNlSGFzUGVybWlzc2lvbnMgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB1c2VDYWxsU2V0dGluZ3MoKTtcbiAgICBjb25zdCBub2lzZUNhbmNlbGxhdGlvbkFsbG93ZWQgPSAhIShzZXR0aW5ncyAmJlxuICAgICAgICBzZXR0aW5ncy5hdWRpby5ub2lzZV9jYW5jZWxsYXRpb24gJiZcbiAgICAgICAgc2V0dGluZ3MuYXVkaW8ubm9pc2VfY2FuY2VsbGF0aW9uLm1vZGUgIT09XG4gICAgICAgICAgICBOb2lzZUNhbmNlbGxhdGlvblNldHRpbmdzTW9kZUVudW0uRElTQUJMRUQpO1xuICAgIGNvbnN0IGhhc0NhcGFiaWxpdHkgPSB1c2VIYXNQZXJtaXNzaW9ucyhPd25DYXBhYmlsaXR5LkVOQUJMRV9OT0lTRV9DQU5DRUxMQVRJT04pO1xuICAgIGNvbnN0IFtpc1N1cHBvcnRlZEJ5QnJvd3Nlciwgc2V0SXNTdXBwb3J0ZWRCeUJyb3dzZXJdID0gdXNlU3RhdGUodW5kZWZpbmVkKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBub2lzZUNhbmNlbGxhdGlvbi5pc1N1cHBvcnRlZCgpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBzZXRJc1N1cHBvcnRlZEJ5QnJvd3NlcihyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0XG4gICAgICAgICAgICAgICAgLnRoZW4oKF9pc1N1cHBvcnRlZEJ5QnJvd3NlcikgPT4gc2V0SXNTdXBwb3J0ZWRCeUJyb3dzZXIoX2lzU3VwcG9ydGVkQnlCcm93c2VyKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgQ2FuJ3QgZGV0ZXJtaW5lIGlmIG5vaXNlIGNhbmNlbGxhdGlvbiBpcyBzdXBwb3J0ZWRgLCBlcnIpKTtcbiAgICAgICAgfVxuICAgIH0sIFtub2lzZUNhbmNlbGxhdGlvbl0pO1xuICAgIGNvbnN0IGlzU3VwcG9ydGVkID0gaXNTdXBwb3J0ZWRCeUJyb3dzZXIgJiYgaGFzQ2FwYWJpbGl0eSAmJiBub2lzZUNhbmNlbGxhdGlvbkFsbG93ZWQ7XG4gICAgY29uc3QgW2lzRW5hYmxlZCwgc2V0SXNFbmFibGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBkZWluaXQgPSB1c2VSZWYoKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGwgfHwgIWlzU3VwcG9ydGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG5vaXNlQ2FuY2VsbGF0aW9uLm9uKCdjaGFuZ2UnLCAodikgPT4gc2V0SXNFbmFibGVkKHYpKTtcbiAgICAgICAgY29uc3QgaW5pdCA9IChkZWluaXQuY3VycmVudCB8fCBQcm9taXNlLnJlc29sdmUoKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IG5vaXNlQ2FuY2VsbGF0aW9uLmluaXQoKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IGNhbGwubWljcm9waG9uZS5lbmFibGVOb2lzZUNhbmNlbGxhdGlvbihub2lzZUNhbmNlbGxhdGlvbikpXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgQ2FuJ3QgaW5pdGlhbGl6ZSBub2lzZSBzdXBwcmVzc2lvbmAsIGVycikpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZGVpbml0LmN1cnJlbnQgPSBpbml0XG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gY2FsbC5taWNyb3Bob25lLmRpc2FibGVOb2lzZUNhbmNlbGxhdGlvbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IG5vaXNlQ2FuY2VsbGF0aW9uLmRpc3Bvc2UoKSlcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB1bnN1YnNjcmliZSgpKTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2FsbCwgaXNTdXBwb3J0ZWQsIG5vaXNlQ2FuY2VsbGF0aW9uXSk7XG4gICAgcmV0dXJuIChqc3goTm9pc2VDYW5jZWxsYXRpb25Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB7XG4gICAgICAgICAgICBpc1N1cHBvcnRlZCxcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcbiAgICAgICAgICAgIHNldEVuYWJsZWQ6IChlbmFibGVkT3JTZXR0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vaXNlQ2FuY2VsbGF0aW9uKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlID0gdHlwZW9mIGVuYWJsZWRPclNldHRlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICA/IGVuYWJsZWRPclNldHRlcihpc0VuYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIDogZW5hYmxlZE9yU2V0dGVyO1xuICAgICAgICAgICAgICAgIGlmIChlbmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9pc2VDYW5jZWxsYXRpb24uZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2lzZUNhbmNlbGxhdGlvbi5kaXNhYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgY2hpbGRyZW46IGNoaWxkcmVuIH0pKTtcbn07XG5cbmNvbnN0IFJpbmdpbmdDYWxsQ29udHJvbHMgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHVzZUNhbGxDYWxsaW5nU3RhdGUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgY2FsbENhbGxpbmdTdGF0ZSA9IHVzZUNhbGxDYWxsaW5nU3RhdGUoKTtcbiAgICBpZiAoIWNhbGwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGJ1dHRvbnNEaXNhYmxlZCA9IGNhbGxDYWxsaW5nU3RhdGUgIT09IENhbGxpbmdTdGF0ZS5SSU5HSU5HO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVuZGluZy1jYWxsLWNvbnRyb2xzXCIsIGNoaWxkcmVuOiBjYWxsLmlzQ3JlYXRlZEJ5TWUgPyAoanN4KENhbmNlbENhbGxCdXR0b24sIHsgZGlzYWJsZWQ6IGJ1dHRvbnNEaXNhYmxlZCB9KSkgOiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeChBY2NlcHRDYWxsQnV0dG9uLCB7IGRpc2FibGVkOiBidXR0b25zRGlzYWJsZWQgfSksIGpzeChDYW5jZWxDYWxsQnV0dG9uLCB7IG9uQ2xpY2s6ICgpID0+IGNhbGwubGVhdmUoeyByZWplY3Q6IHRydWUgfSksIGRpc2FibGVkOiBidXR0b25zRGlzYWJsZWQgfSldIH0pKSB9KSk7XG59O1xuXG5jb25zdCBDQUxMSU5HX1NUQVRFX1RPX0xBQkVMID0ge1xuICAgIFtDYWxsaW5nU3RhdGUuSk9JTklOR106ICdKb2luaW5nJyxcbiAgICBbQ2FsbGluZ1N0YXRlLlJJTkdJTkddOiAnUmluZ2luZycsXG4gICAgW0NhbGxpbmdTdGF0ZS5NSUdSQVRJTkddOiAnTWlncmF0aW5nJyxcbiAgICBbQ2FsbGluZ1N0YXRlLlJFQ09OTkVDVElOR106ICdSZS1jb25uZWN0aW5nJyxcbiAgICBbQ2FsbGluZ1N0YXRlLlJFQ09OTkVDVElOR19GQUlMRURdOiAnRmFpbGVkJyxcbiAgICBbQ2FsbGluZ1N0YXRlLk9GRkxJTkVdOiAnTm8gaW50ZXJuZXQgY29ubmVjdGlvbicsXG4gICAgW0NhbGxpbmdTdGF0ZS5JRExFXTogJycsXG4gICAgW0NhbGxpbmdTdGF0ZS5VTktOT1dOXTogJycsXG4gICAgW0NhbGxpbmdTdGF0ZS5KT0lORURdOiAnSm9pbmVkJyxcbiAgICBbQ2FsbGluZ1N0YXRlLkxFRlRdOiAnTGVmdCBjYWxsJyxcbn07XG5jb25zdCBSaW5naW5nQ2FsbCA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgaW5jbHVkZVNlbGYgPSBmYWxzZSwgdG90YWxNZW1iZXJzVG9TaG93ID0gMyB9ID0gcHJvcHM7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHVzZUNhbGxDYWxsaW5nU3RhdGUsIHVzZUNhbGxNZW1iZXJzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IGNhbGxpbmdTdGF0ZSA9IHVzZUNhbGxDYWxsaW5nU3RhdGUoKTtcbiAgICBjb25zdCBtZW1iZXJzID0gdXNlQ2FsbE1lbWJlcnMoKTtcbiAgICBjb25zdCBjb25uZWN0ZWRVc2VyID0gdXNlQ29ubmVjdGVkVXNlcigpO1xuICAgIGlmICghY2FsbClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgLy8gdGFrZSB0aGUgZmlyc3QgTiBtZW1iZXJzIHRvIHNob3cgdGhlaXIgYXZhdGFyc1xuICAgIGNvbnN0IG1lbWJlcnNUb1Nob3cgPSAobWVtYmVycyB8fCBbXSlcbiAgICAgICAgLnNsaWNlKDAsIHRvdGFsTWVtYmVyc1RvU2hvdylcbiAgICAgICAgLm1hcCgoeyB1c2VyIH0pID0+IHVzZXIpXG4gICAgICAgIC5maWx0ZXIoKHVzZXIpID0+IHVzZXIuaWQgIT09IGNvbm5lY3RlZFVzZXI/LmlkIHx8IGluY2x1ZGVTZWxmKTtcbiAgICBpZiAoaW5jbHVkZVNlbGYgJiZcbiAgICAgICAgIW1lbWJlcnNUb1Nob3cuZmluZCgodXNlcikgPT4gdXNlci5pZCA9PT0gY29ubmVjdGVkVXNlcj8uaWQpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgbm90IGluIHRoZSBpbml0aWFsIGJhdGNoIG9mIG1lbWJlcnMsXG4gICAgICAgIC8vIHJlcGxhY2UgdGhlIGZpcnN0IGl0ZW0gaW4gbWVtYmVyc1RvU2hvdyBhcnJheSB3aXRoIHRoZSBjdXJyZW50IHVzZXJcbiAgICAgICAgY29uc3Qgc2VsZiA9IG1lbWJlcnMuZmluZCgoeyB1c2VyIH0pID0+IHVzZXIuaWQgPT09IGNvbm5lY3RlZFVzZXI/LmlkKTtcbiAgICAgICAgaWYgKHNlbGYpIHtcbiAgICAgICAgICAgIG1lbWJlcnNUb1Nob3cuc3BsaWNlKDAsIDEsIHNlbGYudXNlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2FsbGluZ1N0YXRlTGFiZWwgPSBDQUxMSU5HX1NUQVRFX1RPX0xBQkVMW2NhbGxpbmdTdGF0ZV07XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1wYW5lbCBzdHItdmlkZW9fX2NhbGwtcGFuZWwtLXJpbmdpbmdcIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXBhbmVsX19tZW1iZXJzLWxpc3RcIiwgY2hpbGRyZW46IG1lbWJlcnNUb1Nob3cubWFwKCh1c2VyKSA9PiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcGFuZWxfX21lbWJlci1ib3hcIiwgY2hpbGRyZW46IFtqc3goQXZhdGFyLCB7IG5hbWU6IHVzZXIubmFtZSwgaW1hZ2VTcmM6IHVzZXIuaW1hZ2UgfSksIHVzZXIubmFtZSAmJiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbWVtYmVyX2RldGFpbHNcIiwgY2hpbGRyZW46IGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19tZW1iZXJfbmFtZVwiLCBjaGlsZHJlbjogdXNlci5uYW1lIH0pIH0pKV0gfSwgdXNlci5pZCkpKSB9KSwgY2FsbGluZ1N0YXRlTGFiZWwgJiYgKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcGFuZWxfX2NhbGxpbmctc3RhdGUtbGFiZWxcIiwgY2hpbGRyZW46IHQoY2FsbGluZ1N0YXRlTGFiZWwpIH0pKSwgW0NhbGxpbmdTdGF0ZS5SSU5HSU5HLCBDYWxsaW5nU3RhdGUuSk9JTklOR10uaW5jbHVkZXMoY2FsbGluZ1N0YXRlKSAmJiAoanN4KFJpbmdpbmdDYWxsQ29udHJvbHMsIHt9KSldIH0pKTtcbn07XG5cbmNvbnN0IGJ5TmFtZU9ySWQgPSAoYSwgYikgPT4ge1xuICAgIGlmIChhLm5hbWUgJiYgYi5uYW1lICYmIGEubmFtZSA8IGIubmFtZSlcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGlmIChhLm5hbWUgJiYgYi5uYW1lICYmIGEubmFtZSA+IGIubmFtZSlcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgaWYgKGEuaWQgPCBiLmlkKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgaWYgKGEuaWQgPiBiLmlkKVxuICAgICAgICByZXR1cm4gMTtcbiAgICByZXR1cm4gMDtcbn07XG5jb25zdCBQZXJtaXNzaW9uUmVxdWVzdHMgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHVzZUxvY2FsUGFydGljaXBhbnQsIHVzZUhhc1Blcm1pc3Npb25zIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IGxvY2FsUGFydGljaXBhbnQgPSB1c2VMb2NhbFBhcnRpY2lwYW50KCk7XG4gICAgY29uc3QgW2V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW3Blcm1pc3Npb25SZXF1ZXN0cywgc2V0UGVybWlzc2lvblJlcXVlc3RzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCBjYW5VcGRhdGVDYWxsUGVybWlzc2lvbnMgPSB1c2VIYXNQZXJtaXNzaW9ucyhPd25DYXBhYmlsaXR5LlVQREFURV9DQUxMX1BFUk1JU1NJT05TKTtcbiAgICBjb25zdCBsb2NhbFVzZXJJZCA9IGxvY2FsUGFydGljaXBhbnQ/LnVzZXJJZDtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGwgfHwgIWNhblVwZGF0ZUNhbGxQZXJtaXNzaW9ucylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGNhbGwub24oJ2NhbGwucGVybWlzc2lvbl9yZXF1ZXN0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudXNlci5pZCAhPT0gbG9jYWxVc2VySWQpIHtcbiAgICAgICAgICAgICAgICBzZXRQZXJtaXNzaW9uUmVxdWVzdHMoKHJlcXVlc3RzKSA9PiBbLi4ucmVxdWVzdHMsIGV2ZW50XS5zb3J0KChhLCBiKSA9PiBieU5hbWVPcklkKGEudXNlciwgYi51c2VyKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LCBbY2FsbCwgY2FuVXBkYXRlQ2FsbFBlcm1pc3Npb25zLCBsb2NhbFVzZXJJZF0pO1xuICAgIGNvbnN0IGhhbmRsZVVwZGF0ZVBlcm1pc3Npb24gPSAocmVxdWVzdCwgdHlwZSkgPT4ge1xuICAgICAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyB1c2VyLCBwZXJtaXNzaW9ucyB9ID0gcmVxdWVzdDtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyYW50JzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbD8uZ3JhbnRQZXJtaXNzaW9ucyh1c2VyLmlkLCBwZXJtaXNzaW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Jldm9rZSc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbGw/LnJldm9rZVBlcm1pc3Npb25zKHVzZXIuaWQsIHBlcm1pc3Npb25zKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRQZXJtaXNzaW9uUmVxdWVzdHMoKHJlcXVlc3RzKSA9PiByZXF1ZXN0cy5maWx0ZXIoKHIpID0+IHIgIT09IHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGNvbnN0IHsgcmVmcywgeCwgeSwgc3RyYXRlZ3kgfSA9IHVzZUZsb2F0aW5nVUlQcmVzZXQoe1xuICAgICAgICBwbGFjZW1lbnQ6ICdib3R0b20nLFxuICAgICAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICB9KTtcbiAgICAvLyBkb24ndCByZW5kZXIgYW55dGhpbmcgaWYgdGhlcmUgYXJlIG5vIHBlcm1pc3Npb24gcmVxdWVzdHNcbiAgICBpZiAocGVybWlzc2lvblJlcXVlc3RzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0c1wiLCByZWY6IHJlZnMuc2V0UmVmZXJlbmNlLCBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wZXJtaXNzaW9uLXJlcXVlc3RzX19ub3RpZmljYXRpb25cIiwgY2hpbGRyZW46IFtqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdHNfX25vdGlmaWNhdGlvbl9fbWVzc2FnZVwiLCBjaGlsZHJlbjogW3Blcm1pc3Npb25SZXF1ZXN0cy5sZW5ndGgsIFwiIHBlbmRpbmcgcGVybWlzc2lvbiByZXF1ZXN0c1wiXSB9KSwganN4KEJ1dHRvbiwgeyB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXhwYW5kZWQoKGUpID0+ICFlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuOiBleHBhbmRlZCA/ICdIaWRlIHJlcXVlc3RzJyA6ICdTaG93IHJlcXVlc3RzJyB9KV0gfSksIGV4cGFuZGVkICYmIChqc3goUGVybWlzc2lvblJlcXVlc3RMaXN0LCB7IHJlZjogcmVmcy5zZXRGbG9hdGluZywgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHkgPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogeCA/PyAwLFxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICB9LCBwZXJtaXNzaW9uUmVxdWVzdHM6IHBlcm1pc3Npb25SZXF1ZXN0cywgaGFuZGxlVXBkYXRlUGVybWlzc2lvbjogaGFuZGxlVXBkYXRlUGVybWlzc2lvbiB9KSldIH0pKTtcbn07XG5jb25zdCBQZXJtaXNzaW9uUmVxdWVzdExpc3QgPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIFBlcm1pc3Npb25SZXF1ZXN0TGlzdChwcm9wcywgcmVmKSB7XG4gICAgY29uc3QgeyBwZXJtaXNzaW9uUmVxdWVzdHMsIGhhbmRsZVVwZGF0ZVBlcm1pc3Npb24sIC4uLnJlc3QgfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0cy1saXN0XCIsIHJlZjogcmVmLCAuLi5yZXN0LCBjaGlsZHJlbjogcGVybWlzc2lvblJlcXVlc3RzLm1hcCgocmVxdWVzdCwgcmVxSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlciwgcGVybWlzc2lvbnMgfSA9IHJlcXVlc3Q7XG4gICAgICAgICAgICByZXR1cm4gKGpzeChGcmFnbWVudCQxLCB7IGNoaWxkcmVuOiBwZXJtaXNzaW9ucy5tYXAoKHBlcm1pc3Npb24pID0+IChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0XCIsIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0X19tZXNzYWdlXCIsIGNoaWxkcmVuOiBtZXNzYWdlRm9yUGVybWlzc2lvbih1c2VyLm5hbWUgfHwgdXNlci5pZCwgcGVybWlzc2lvbiwgdCkgfSksIGpzeChCdXR0b24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0X19idXR0b24tLWFsbG93XCIsIHR5cGU6IFwiYnV0dG9uXCIsIG9uQ2xpY2s6IGhhbmRsZVVwZGF0ZVBlcm1pc3Npb24ocmVxdWVzdCwgJ2dyYW50JyksIGNoaWxkcmVuOiB0KCdBbGxvdycpIH0pLCBqc3goQnV0dG9uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdF9fYnV0dG9uLS1yZWplY3RcIiwgdHlwZTogXCJidXR0b25cIiwgb25DbGljazogaGFuZGxlVXBkYXRlUGVybWlzc2lvbihyZXF1ZXN0LCAncmV2b2tlJyksIGNoaWxkcmVuOiB0KCdSZXZva2UnKSB9KSwganN4KEJ1dHRvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wZXJtaXNzaW9uLXJlcXVlc3RfX2J1dHRvbi0tcmVqZWN0XCIsIHR5cGU6IFwiYnV0dG9uXCIsIG9uQ2xpY2s6IGhhbmRsZVVwZGF0ZVBlcm1pc3Npb24ocmVxdWVzdCwgJ2Rpc21pc3MnKSwgY2hpbGRyZW46IHQoJ0Rpc21pc3MnKSB9KV0gfSwgcGVybWlzc2lvbikpKSB9LCBgJHt1c2VyLmlkfS8ke3JlcUluZGV4fWApKTtcbiAgICAgICAgfSkgfSkpO1xufSk7XG5jb25zdCBCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgLi4ucmVzdCB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIChqc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0X19idXR0b24nLCBjbGFzc05hbWUpLCAuLi5yZXN0IH0pKTtcbn07XG5jb25zdCBtZXNzYWdlRm9yUGVybWlzc2lvbiA9ICh1c2VyTmFtZSwgcGVybWlzc2lvbiwgdCkgPT4ge1xuICAgIHN3aXRjaCAocGVybWlzc2lvbikge1xuICAgICAgICBjYXNlIE93bkNhcGFiaWxpdHkuU0VORF9BVURJTzpcbiAgICAgICAgICAgIHJldHVybiB0KCd7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHRvIHNwZWFrJywgeyB1c2VyTmFtZSB9KTtcbiAgICAgICAgY2FzZSBPd25DYXBhYmlsaXR5LlNFTkRfVklERU86XG4gICAgICAgICAgICByZXR1cm4gdCgne3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyB0byBzaGFyZSB0aGVpciBjYW1lcmEnLCB7XG4gICAgICAgICAgICAgICAgdXNlck5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY2FzZSBPd25DYXBhYmlsaXR5LlNDUkVFTlNIQVJFOlxuICAgICAgICAgICAgcmV0dXJuIHQoJ3t7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gcHJlc2VudCB0aGVpciBzY3JlZW4nLCB7XG4gICAgICAgICAgICAgICAgdXNlck5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB0KCd7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHBlcm1pc3Npb246IHt7IHBlcm1pc3Npb24gfX0nLCB7XG4gICAgICAgICAgICAgICAgdXNlck5hbWUsXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbixcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn07XG5cbmNvbnN0IFN0cmVhbVRoZW1lID0gKHsgYXM6IENvbXBvbmVudCA9ICdkaXYnLCBjbGFzc05hbWUsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goQ29tcG9uZW50LCB7IC4uLnByb3BzLCBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlbycsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuXG5jb25zdCBEZWZhdWx0VmlkZW9QbGFjZWhvbGRlciA9IGZvcndhcmRSZWYoZnVuY3Rpb24gRGVmYXVsdFZpZGVvUGxhY2Vob2xkZXIoeyBwYXJ0aWNpcGFudCwgc3R5bGUgfSwgcmVmKSB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgbmFtZSA9IHBhcnRpY2lwYW50Lm5hbWUgfHwgcGFydGljaXBhbnQudXNlcklkO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3ZpZGVvLXBsYWNlaG9sZGVyXCIsIHN0eWxlOiBzdHlsZSwgcmVmOiByZWYsIGNoaWxkcmVuOiBbKCFwYXJ0aWNpcGFudC5pbWFnZSB8fCBlcnJvcikgJiZcbiAgICAgICAgICAgICAgICAobmFtZSA/IChqc3goSW5pdGlhbHNGYWxsYmFjaywgeyBuYW1lOiBuYW1lIH0pKSA6IChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX192aWRlby1wbGFjZWhvbGRlcl9fbm8tdmlkZW8tbGFiZWxcIiwgY2hpbGRyZW46IHQoJ1ZpZGVvIGlzIGRpc2FibGVkJykgfSkpKSwgcGFydGljaXBhbnQuaW1hZ2UgJiYgIWVycm9yICYmIChqc3goXCJpbWdcIiwgeyBvbkVycm9yOiAoKSA9PiBzZXRFcnJvcih0cnVlKSwgYWx0OiBcInZpZGVvLXBsYWNlaG9sZGVyXCIsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3ZpZGVvLXBsYWNlaG9sZGVyX19hdmF0YXJcIiwgc3JjOiBwYXJ0aWNpcGFudC5pbWFnZSB9KSldIH0pKTtcbn0pO1xuY29uc3QgSW5pdGlhbHNGYWxsYmFjayA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgbmFtZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgaW5pdGlhbHMgPSBuYW1lXG4gICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgIC5zbGljZSgwLCAyKVxuICAgICAgICAubWFwKChuKSA9PiBuWzBdKVxuICAgICAgICAuam9pbignJyk7XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX192aWRlby1wbGFjZWhvbGRlcl9faW5pdGlhbHMtZmFsbGJhY2tcIiwgY2hpbGRyZW46IGluaXRpYWxzIH0pKTtcbn07XG5cbmNvbnN0IFZpZGVvJDEgPSAoeyB0cmFja1R5cGUsIHBhcnRpY2lwYW50LCBjbGFzc05hbWUsIFZpZGVvUGxhY2Vob2xkZXIgPSBEZWZhdWx0VmlkZW9QbGFjZWhvbGRlciwgcmVmcywgLi4ucmVzdCB9KSA9PiB7XG4gICAgY29uc3QgeyBzZXNzaW9uSWQsIHZpZGVvU3RyZWFtLCBzY3JlZW5TaGFyZVN0cmVhbSwgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGUsIGlzTG9jYWxQYXJ0aWNpcGFudCwgdXNlcklkLCB9ID0gcGFydGljaXBhbnQ7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCBbdmlkZW9FbGVtZW50LCBzZXRWaWRlb0VsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgLy8gc3RhcnQgd2l0aCB0cnVlLCB3aWxsIGZsaXAgb25jZSB0aGUgdmlkZW8gc3RhcnRzIHBsYXlpbmdcbiAgICBjb25zdCBbaXNWaWRlb1BhdXNlZCwgc2V0SXNWaWRlb1BhdXNlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBbaXNXaWRlTW9kZSwgc2V0SXNXaWRlTW9kZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBzdHJlYW0gPSB0cmFja1R5cGUgPT09ICd2aWRlb1RyYWNrJ1xuICAgICAgICA/IHZpZGVvU3RyZWFtXG4gICAgICAgIDogdHJhY2tUeXBlID09PSAnc2NyZWVuU2hhcmVUcmFjaydcbiAgICAgICAgICAgID8gc2NyZWVuU2hhcmVTdHJlYW1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbCB8fCAhdmlkZW9FbGVtZW50IHx8IHRyYWNrVHlwZSA9PT0gJ25vbmUnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gY2FsbC5iaW5kVmlkZW9FbGVtZW50KHZpZGVvRWxlbWVudCwgc2Vzc2lvbklkLCB0cmFja1R5cGUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYW51cD8uKCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGwsIHRyYWNrVHlwZSwgc2Vzc2lvbklkLCB2aWRlb0VsZW1lbnRdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXN0cmVhbSB8fCAhdmlkZW9FbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBbdHJhY2tdID0gc3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XG4gICAgICAgIGlmICghdHJhY2spXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGhhbmRsZVBsYXlQYXVzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldElzVmlkZW9QYXVzZWQodmlkZW9FbGVtZW50LnBhdXNlZCk7XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoID0gMCwgaGVpZ2h0ID0gMCB9ID0gdHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHNldElzV2lkZU1vZGUod2lkdGggPj0gaGVpZ2h0KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gcGxheWJhY2sgbWF5IGhhdmUgc3RhcnRlZCBiZWZvcmUgd2UgaGFkIGEgY2hhbmNlIHRvXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgJ3BsYXkvcGF1c2UnIGV2ZW50IGxpc3RlbmVyLCBzbyB3ZSBzZXQgdGhlIHN0YXRlXG4gICAgICAgIC8vIGhlcmUgdG8gbWFrZSBzdXJlIGl0J3MgaW4gc3luY1xuICAgICAgICBzZXRJc1ZpZGVvUGF1c2VkKHZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICB2aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3VubXV0ZScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGxheScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBoYW5kbGVQbGF5UGF1c2UpO1xuICAgICAgICAgICAgdHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5tdXRlJywgaGFuZGxlUGxheVBhdXNlKTtcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSAncGF1c2UnIHN0YXRlIG9uY2Ugd2UgdW5tb3VudCB0aGUgdmlkZW8gZWxlbWVudFxuICAgICAgICAgICAgc2V0SXNWaWRlb1BhdXNlZCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbc3RyZWFtLCB2aWRlb0VsZW1lbnRdKTtcbiAgICBpZiAoIWNhbGwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGlzUHVibGlzaGluZ1RyYWNrID0gdHJhY2tUeXBlID09PSAndmlkZW9UcmFjaydcbiAgICAgICAgPyBoYXNWaWRlbyhwYXJ0aWNpcGFudClcbiAgICAgICAgOiB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZVRyYWNrJ1xuICAgICAgICAgICAgPyBoYXNTY3JlZW5TaGFyZShwYXJ0aWNpcGFudClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgY29uc3QgaXNJbnZpc2libGUgPSB0cmFja1R5cGUgPT09ICdub25lJyB8fFxuICAgICAgICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8uW3RyYWNrVHlwZV0gPT09IFZpc2liaWxpdHlTdGF0ZS5JTlZJU0lCTEU7XG4gICAgY29uc3QgaGFzTm9WaWRlb09ySW52aXNpYmxlID0gIWlzUHVibGlzaGluZ1RyYWNrIHx8IGlzSW52aXNpYmxlO1xuICAgIGNvbnN0IG1pcnJvclZpZGVvID0gaXNMb2NhbFBhcnRpY2lwYW50ICYmIHRyYWNrVHlwZSA9PT0gJ3ZpZGVvVHJhY2snO1xuICAgIGNvbnN0IGlzU2NyZWVuU2hhcmVUcmFjayA9IHRyYWNrVHlwZSA9PT0gJ3NjcmVlblNoYXJlVHJhY2snO1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogWyFoYXNOb1ZpZGVvT3JJbnZpc2libGUgJiYgKGpzeChcInZpZGVvXCIsIHsgLi4ucmVzdCwgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3ZpZGVvJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICdzdHItdmlkZW9fX3ZpZGVvLS1ub3QtcGxheWluZyc6IGlzVmlkZW9QYXVzZWQsXG4gICAgICAgICAgICAgICAgICAgICdzdHItdmlkZW9fX3ZpZGVvLS10YWxsJzogIWlzV2lkZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICdzdHItdmlkZW9fX3ZpZGVvLS1taXJyb3InOiBtaXJyb3JWaWRlbyxcbiAgICAgICAgICAgICAgICAgICAgJ3N0ci12aWRlb19fdmlkZW8tLXNjcmVlbi1zaGFyZSc6IGlzU2NyZWVuU2hhcmVUcmFjayxcbiAgICAgICAgICAgICAgICB9KSwgXCJkYXRhLXVzZXItaWRcIjogdXNlcklkLCBcImRhdGEtc2Vzc2lvbi1pZFwiOiBzZXNzaW9uSWQsIHJlZjogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VmlkZW9FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICByZWZzPy5zZXRWaWRlb0VsZW1lbnQ/LihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9IH0pKSwgKGhhc05vVmlkZW9PckludmlzaWJsZSB8fCBpc1ZpZGVvUGF1c2VkKSAmJiBWaWRlb1BsYWNlaG9sZGVyICYmIChqc3goVmlkZW9QbGFjZWhvbGRlciwgeyBzdHlsZTogeyBwb3NpdGlvbjogJ2Fic29sdXRlJyB9LCBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsIHJlZjogcmVmcz8uc2V0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnQgfSkpXSB9KSk7XG59O1xuVmlkZW8kMS5kaXNwbGF5TmFtZSA9ICdWaWRlbyc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEV4dGVuZHMgdmlkZW8gZWxlbWVudCB3aXRoIGBzdHJlYW1gIHByb3BlcnR5XG4gKiAoYHNyY09iamVjdGApIHRvIHJlYWN0aXZlbHkgaGFuZGxlIHN0cmVhbSBjaGFuZ2VzXG4gKi9cbmNvbnN0IEJhc2VWaWRlbyA9IGZvcndhcmRSZWYoZnVuY3Rpb24gQmFzZVZpZGVvKHsgc3RyZWFtLCAuLi5yZXN0IH0sIHJlZikge1xuICAgIGNvbnN0IFt2aWRlb0VsZW1lbnQsIHNldFZpZGVvRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXZpZGVvRWxlbWVudCB8fCAhc3RyZWFtKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoc3RyZWFtID09PSB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICBpZiAoQnJvd3NlcnMuaXNTYWZhcmkoKSB8fCBCcm93c2Vycy5pc0ZpcmVmb3goKSkge1xuICAgICAgICAgICAgLy8gRmlyZWZveCBhbmQgU2FmYXJpIGhhdmUgc29tZSB0aW1pbmcgaXNzdWVcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50LnBsYXkoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcGxheSBzdHJlYW1gLCBlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucGF1c2UoKTtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSBudWxsO1xuICAgICAgICB9O1xuICAgIH0sIFtzdHJlYW0sIHZpZGVvRWxlbWVudF0pO1xuICAgIHJldHVybiAoanN4KFwidmlkZW9cIiwgeyBhdXRvUGxheTogdHJ1ZSwgcGxheXNJbmxpbmU6IHRydWUsIC4uLnJlc3QsIHJlZjogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFwcGx5RWxlbWVudFRvUmVmKHJlZiwgZWxlbWVudCk7XG4gICAgICAgICAgICBzZXRWaWRlb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0gfSkpO1xufSk7XG5cbmNvbnN0IERlZmF1bHREaXNhYmxlZFZpZGVvUHJldmlldyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHJfdmlkZW9fX3ZpZGVvLXByZXZpZXdfX2Rpc2FibGVkLXZpZGVvLXByZXZpZXdcIiwgY2hpbGRyZW46IHQoJ1ZpZGVvIGlzIGRpc2FibGVkJykgfSkpO1xufTtcbmNvbnN0IERlZmF1bHROb0NhbWVyYVByZXZpZXcgPSAoKSA9PiB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyX3ZpZGVvX192aWRlby1wcmV2aWV3X19uby1jYW1lcmEtcHJldmlld1wiLCBjaGlsZHJlbjogdCgnTm8gY2FtZXJhIGZvdW5kJykgfSkpO1xufTtcbmNvbnN0IFZpZGVvUHJldmlldyA9ICh7IGNsYXNzTmFtZSwgbWlycm9yID0gdHJ1ZSwgRGlzYWJsZWRWaWRlb1ByZXZpZXcgPSBEZWZhdWx0RGlzYWJsZWRWaWRlb1ByZXZpZXcsIE5vQ2FtZXJhUHJldmlldyA9IERlZmF1bHROb0NhbWVyYVByZXZpZXcsIFN0YXJ0aW5nQ2FtZXJhUHJldmlldyA9IExvYWRpbmdJbmRpY2F0b3IsIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZUNhbWVyYVN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgZGV2aWNlcywgc3RhdHVzLCBpc011dGUsIG1lZGlhU3RyZWFtIH0gPSB1c2VDYW1lcmFTdGF0ZSgpO1xuICAgIGxldCBjb250ZW50cztcbiAgICBpZiAoaXNNdXRlICYmIGRldmljZXM/Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb250ZW50cyA9IGpzeChOb0NhbWVyYVByZXZpZXcsIHt9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RhdHVzID09PSAnZW5hYmxlZCcpIHtcbiAgICAgICAgY29uc3QgbG9hZGluZyA9ICFtZWRpYVN0cmVhbTtcbiAgICAgICAgY29udGVudHMgPSAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW21lZGlhU3RyZWFtICYmIChqc3goQmFzZVZpZGVvLCB7IHN0cmVhbTogbWVkaWFTdHJlYW0sIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX192aWRlby1wcmV2aWV3Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0ci12aWRlb19fdmlkZW8tcHJldmlldy0tbWlycm9yJzogbWlycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0ci12aWRlb19fdmlkZW8tcHJldmlldy0tbG9hZGluZyc6IGxvYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgIH0pIH0pKSwgbG9hZGluZyAmJiBqc3goU3RhcnRpbmdDYW1lcmFQcmV2aWV3LCB7fSldIH0pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnRlbnRzID0ganN4KERpc2FibGVkVmlkZW9QcmV2aWV3LCB7fSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3ZpZGVvLXByZXZpZXctY29udGFpbmVyJywgY2xhc3NOYW1lKSwgY2hpbGRyZW46IGNvbnRlbnRzIH0pKTtcbn07XG5cbmNvbnN0IFBhcnRpY2lwYW50QWN0aW9uc0NvbnRleHRNZW51ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcGFydGljaXBhbnQsIHBhcnRpY2lwYW50Vmlld0VsZW1lbnQsIHZpZGVvRWxlbWVudCB9ID0gdXNlUGFydGljaXBhbnRWaWV3Q29udGV4dCgpO1xuICAgIGNvbnN0IFtmdWxsc2NyZWVuTW9kZU9uLCBzZXRGdWxsc2NyZWVuTW9kZU9uXSA9IHVzZVN0YXRlKCEhZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpO1xuICAgIGNvbnN0IFtwaWN0dXJlSW5QaWN0dXJlRWxlbWVudCwgc2V0UGljdHVyZUluUGljdHVyZUVsZW1lbnRdID0gdXNlU3RhdGUoZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVsZW1lbnQpO1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyBwaW4sIHNlc3Npb25JZCwgdXNlcklkIH0gPSBwYXJ0aWNpcGFudDtcbiAgICBjb25zdCBoYXNBdWRpb1RyYWNrID0gaGFzQXVkaW8ocGFydGljaXBhbnQpO1xuICAgIGNvbnN0IGhhc1ZpZGVvVHJhY2sgPSBoYXNWaWRlbyhwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgaGFzU2NyZWVuU2hhcmVUcmFjayA9IGhhc1NjcmVlblNoYXJlKHBhcnRpY2lwYW50KTtcbiAgICBjb25zdCBoYXNTY3JlZW5TaGFyZUF1ZGlvVHJhY2sgPSBoYXNTY3JlZW5TaGFyZUF1ZGlvKHBhcnRpY2lwYW50KTtcbiAgICBjb25zdCBibG9ja1VzZXIgPSAoKSA9PiBjYWxsPy5ibG9ja1VzZXIodXNlcklkKTtcbiAgICBjb25zdCBtdXRlQXVkaW8gPSAoKSA9PiBjYWxsPy5tdXRlVXNlcih1c2VySWQsICdhdWRpbycpO1xuICAgIGNvbnN0IG11dGVWaWRlbyA9ICgpID0+IGNhbGw/Lm11dGVVc2VyKHVzZXJJZCwgJ3ZpZGVvJyk7XG4gICAgY29uc3QgbXV0ZVNjcmVlblNoYXJlID0gKCkgPT4gY2FsbD8ubXV0ZVVzZXIodXNlcklkLCAnc2NyZWVuc2hhcmUnKTtcbiAgICBjb25zdCBtdXRlU2NyZWVuU2hhcmVBdWRpbyA9ICgpID0+IGNhbGw/Lm11dGVVc2VyKHVzZXJJZCwgJ3NjcmVlbnNoYXJlX2F1ZGlvJyk7XG4gICAgY29uc3QgZ3JhbnRQZXJtaXNzaW9uID0gKHBlcm1pc3Npb24pID0+ICgpID0+IHtcbiAgICAgICAgY2FsbD8udXBkYXRlVXNlclBlcm1pc3Npb25zKHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIGdyYW50X3Blcm1pc3Npb25zOiBbcGVybWlzc2lvbl0sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgcmV2b2tlUGVybWlzc2lvbiA9IChwZXJtaXNzaW9uKSA9PiAoKSA9PiB7XG4gICAgICAgIGNhbGw/LnVwZGF0ZVVzZXJQZXJtaXNzaW9ucyh7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICByZXZva2VfcGVybWlzc2lvbnM6IFtwZXJtaXNzaW9uXSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVQYXJ0aWNpcGFudFBpbiA9ICgpID0+IHtcbiAgICAgICAgaWYgKHBpbikge1xuICAgICAgICAgICAgY2FsbD8udW5waW4oc2Vzc2lvbklkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhbGw/LnBpbihzZXNzaW9uSWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBwaW5Gb3JFdmVyeW9uZSA9ICgpID0+IHtcbiAgICAgICAgY2FsbFxuICAgICAgICAgICAgPy5waW5Gb3JFdmVyeW9uZSh7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBpbiBwYXJ0aWNpcGFudCAke3VzZXJJZH1gLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHVucGluRm9yRXZlcnlvbmUgPSAoKSA9PiB7XG4gICAgICAgIGNhbGxcbiAgICAgICAgICAgID8udW5waW5Gb3JFdmVyeW9uZSh7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHVucGluIHBhcnRpY2lwYW50ICR7dXNlcklkfWAsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlRnVsbHNjcmVlbk1vZGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICghZnVsbHNjcmVlbk1vZGVPbikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRpY2lwYW50Vmlld0VsZW1lbnQ/LnJlcXVlc3RGdWxsc2NyZWVuKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBoYW5kbGVzIHRoZSBjYXNlIHdoZW4gZnVsbHNjcmVlbiBtb2RlIGlzIHRvZ2dsZWQgZXh0ZXJuYWxseSxcbiAgICAgICAgLy8gZS5nLiwgYnkgcHJlc3NpbmcgRVNDIGtleSBvciBzb21lIG90aGVyIGtleWJvYXJkIHNob3J0Y3V0XG4gICAgICAgIGNvbnN0IGhhbmRsZUZ1bGxzY3JlZW5DaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZXRGdWxsc2NyZWVuTW9kZU9uKCEhZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSk7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghdmlkZW9FbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBoYW5kbGVQaVAgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZXRQaWN0dXJlSW5QaWN0dXJlRWxlbWVudChkb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdlbnRlcnBpY3R1cmVpbnBpY3R1cmUnLCBoYW5kbGVQaVApO1xuICAgICAgICB2aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbGVhdmVwaWN0dXJlaW5waWN0dXJlJywgaGFuZGxlUGlQKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdlbnRlcnBpY3R1cmVpbnBpY3R1cmUnLCBoYW5kbGVQaVApO1xuICAgICAgICAgICAgdmlkZW9FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xlYXZlcGljdHVyZWlucGljdHVyZScsIGhhbmRsZVBpUCk7XG4gICAgICAgIH07XG4gICAgfSwgW3ZpZGVvRWxlbWVudF0pO1xuICAgIGNvbnN0IHRvZ2dsZVBpY3R1cmVJblBpY3R1cmUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh2aWRlb0VsZW1lbnQgJiYgcGljdHVyZUluUGljdHVyZUVsZW1lbnQgIT09IHZpZGVvRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHZpZGVvRWxlbWVudFxuICAgICAgICAgICAgICAgIC5yZXF1ZXN0UGljdHVyZUluUGljdHVyZSgpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5leGl0UGljdHVyZUluUGljdHVyZSgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH07XG4gICAgY29uc3QgeyBjbG9zZSB9ID0gdXNlTWVudUNvbnRleHQoKSB8fCB7fTtcbiAgICByZXR1cm4gKGpzeHMoR2VuZXJpY01lbnUsIHsgb25JdGVtQ2xpY2s6IGNsb3NlLCBjaGlsZHJlbjogW2pzeHMoR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IHRvZ2dsZVBhcnRpY2lwYW50UGluLCBkaXNhYmxlZDogcGluICYmICFwaW4uaXNMb2NhbFBpbiwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcInBpblwiIH0pLCBwaW4gPyB0KCdVbnBpbicpIDogdCgnUGluJyldIH0pLCBqc3hzKFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5LlBJTl9GT1JfRVZFUllPTkVdLCBjaGlsZHJlbjogW2pzeHMoR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IHBpbkZvckV2ZXJ5b25lLCBkaXNhYmxlZDogcGluICYmICFwaW4uaXNMb2NhbFBpbiwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcInBpblwiIH0pLCB0KCdQaW4gZm9yIGV2ZXJ5b25lJyldIH0pLCBqc3hzKEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiB1bnBpbkZvckV2ZXJ5b25lLCBkaXNhYmxlZDogIXBpbiB8fCBwaW4uaXNMb2NhbFBpbiwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcInBpblwiIH0pLCB0KCdVbnBpbiBmb3IgZXZlcnlvbmUnKV0gfSldIH0pLCBqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuQkxPQ0tfVVNFUlNdLCBjaGlsZHJlbjoganN4cyhHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogYmxvY2tVc2VyLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwibm90LWFsbG93ZWRcIiB9KSwgdCgnQmxvY2snKV0gfSkgfSksIGpzeHMoUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuTVVURV9VU0VSU10sIGNoaWxkcmVuOiBbaGFzVmlkZW9UcmFjayAmJiAoanN4cyhHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogbXV0ZVZpZGVvLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwiY2FtZXJhLW9mZi1vdXRsaW5lXCIgfSksIHQoJ1R1cm4gb2ZmIHZpZGVvJyldIH0pKSwgaGFzU2NyZWVuU2hhcmVUcmFjayAmJiAoanN4cyhHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogbXV0ZVNjcmVlblNoYXJlLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwic2NyZWVuLXNoYXJlLW9mZlwiIH0pLCB0KCdUdXJuIG9mZiBzY3JlZW4gc2hhcmUnKV0gfSkpLCBoYXNBdWRpb1RyYWNrICYmIChqc3hzKEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiBtdXRlQXVkaW8sIGNoaWxkcmVuOiBbanN4KEljb24sIHsgaWNvbjogXCJuby1hdWRpb1wiIH0pLCB0KCdNdXRlIGF1ZGlvJyldIH0pKSwgaGFzU2NyZWVuU2hhcmVBdWRpb1RyYWNrICYmIChqc3hzKEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiBtdXRlU2NyZWVuU2hhcmVBdWRpbywgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcIm5vLWF1ZGlvXCIgfSksIHQoJ011dGUgc2NyZWVuIHNoYXJlIGF1ZGlvJyldIH0pKV0gfSksIHBhcnRpY2lwYW50Vmlld0VsZW1lbnQgJiYgKGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogdG9nZ2xlRnVsbHNjcmVlbk1vZGUsIGNoaWxkcmVuOiB0KCd7eyBkaXJlY3Rpb24gfX0gZnVsbHNjcmVlbicsIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBmdWxsc2NyZWVuTW9kZU9uID8gdCgnTGVhdmUnKSA6IHQoJ0VudGVyJyksXG4gICAgICAgICAgICAgICAgfSkgfSkpLCB2aWRlb0VsZW1lbnQgJiYgZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVuYWJsZWQgJiYgKGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogdG9nZ2xlUGljdHVyZUluUGljdHVyZSwgY2hpbGRyZW46IHQoJ3t7IGRpcmVjdGlvbiB9fSBwaWN0dXJlLWluLXBpY3R1cmUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogcGljdHVyZUluUGljdHVyZUVsZW1lbnQgPT09IHZpZGVvRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0KCdMZWF2ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHQoJ0VudGVyJyksXG4gICAgICAgICAgICAgICAgfSkgfSkpLCBqc3hzKFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5LlVQREFURV9DQUxMX1BFUk1JU1NJT05TXSwgY2hpbGRyZW46IFtqc3goR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IGdyYW50UGVybWlzc2lvbihPd25DYXBhYmlsaXR5LlNFTkRfQVVESU8pLCBjaGlsZHJlbjogdCgnQWxsb3cgYXVkaW8nKSB9KSwganN4KEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiBncmFudFBlcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPKSwgY2hpbGRyZW46IHQoJ0FsbG93IHZpZGVvJykgfSksIGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogZ3JhbnRQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0NSRUVOU0hBUkUpLCBjaGlsZHJlbjogdCgnQWxsb3cgc2NyZWVuIHNoYXJpbmcnKSB9KSwganN4KEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiByZXZva2VQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0VORF9BVURJTyksIGNoaWxkcmVuOiB0KCdEaXNhYmxlIGF1ZGlvJykgfSksIGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogcmV2b2tlUGVybWlzc2lvbihPd25DYXBhYmlsaXR5LlNFTkRfVklERU8pLCBjaGlsZHJlbjogdCgnRGlzYWJsZSB2aWRlbycpIH0pLCBqc3goR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IHJldm9rZVBlcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRSksIGNoaWxkcmVuOiB0KCdEaXNhYmxlIHNjcmVlbiBzaGFyaW5nJykgfSldIH0pXSB9KSk7XG59O1xuXG5jb25zdCB1c2VUcmFja0VsZW1lbnRWaXNpYmlsaXR5ID0gKHsgdHJhY2tlZEVsZW1lbnQsIGR5bmFzY2FsZU1hbmFnZXI6IHByb3BzRHluYXNjYWxlTWFuYWdlciwgc2Vzc2lvbklkLCB0cmFja1R5cGUsIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IG1hbmFnZXIgPSBwcm9wc0R5bmFzY2FsZU1hbmFnZXIgPz8gY2FsbD8uZHluYXNjYWxlTWFuYWdlcjtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXRyYWNrZWRFbGVtZW50IHx8ICFtYW5hZ2VyIHx8ICFjYWxsIHx8IHRyYWNrVHlwZSA9PT0gJ25vbmUnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB1bm9ic2VydmUgPSBtYW5hZ2VyLnRyYWNrRWxlbWVudFZpc2liaWxpdHkodHJhY2tlZEVsZW1lbnQsIHNlc3Npb25JZCwgdHJhY2tUeXBlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVub2JzZXJ2ZSgpO1xuICAgICAgICB9O1xuICAgIH0sIFt0cmFja2VkRWxlbWVudCwgbWFuYWdlciwgY2FsbCwgc2Vzc2lvbklkLCB0cmFja1R5cGVdKTtcbn07XG5cbmNvbnN0IFRvZ2dsZUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gVG9nZ2xlQnV0dG9uKHByb3BzLCByZWYpIHtcbiAgICByZXR1cm4ganN4KEljb25CdXR0b24sIHsgZW5hYmxlZDogcHJvcHMubWVudVNob3duLCBpY29uOiBcImVsbGlwc2lzXCIsIHJlZjogcmVmIH0pO1xufSk7XG5jb25zdCBEZWZhdWx0U2NyZWVuU2hhcmVPdmVybGF5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3Qgc3RvcFNjcmVlblNoYXJlID0gKCkgPT4ge1xuICAgICAgICBjYWxsPy5zY3JlZW5TaGFyZS5kaXNhYmxlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zY3JlZW4tc2hhcmUtb3ZlcmxheVwiLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwic2NyZWVuLXNoYXJlLW9mZlwiIH0pLCBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2NyZWVuLXNoYXJlLW92ZXJsYXlfX3RpdGxlXCIsIGNoaWxkcmVuOiB0KCdZb3UgYXJlIHByZXNlbnRpbmcgeW91ciBzY3JlZW4nKSB9KSwganN4cyhcImJ1dHRvblwiLCB7IG9uQ2xpY2s6IHN0b3BTY3JlZW5TaGFyZSwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2NyZWVuLXNoYXJlLW92ZXJsYXlfX2J1dHRvblwiLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwiY2xvc2VcIiB9KSwgXCIgXCIsIHQoJ1N0b3AgU2NyZWVuIFNoYXJpbmcnKV0gfSldIH0pKTtcbn07XG5jb25zdCBEZWZhdWx0UGFydGljaXBhbnRWaWV3VUkgPSAoeyBpbmRpY2F0b3JzVmlzaWJsZSA9IHRydWUsIG1lbnVQbGFjZW1lbnQgPSAnYm90dG9tLXN0YXJ0Jywgc2hvd01lbnVCdXR0b24gPSB0cnVlLCBQYXJ0aWNpcGFudEFjdGlvbnNDb250ZXh0TWVudTogUGFydGljaXBhbnRBY3Rpb25zQ29udGV4dE1lbnUkMSA9IFBhcnRpY2lwYW50QWN0aW9uc0NvbnRleHRNZW51LCB9KSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCwgdHJhY2tUeXBlIH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgaXNTY3JlZW5TaGFyaW5nID0gaGFzU2NyZWVuU2hhcmUocGFydGljaXBhbnQpO1xuICAgIGlmIChwYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnQgJiZcbiAgICAgICAgaXNTY3JlZW5TaGFyaW5nICYmXG4gICAgICAgIHRyYWNrVHlwZSA9PT0gJ3NjcmVlblNoYXJlVHJhY2snKSB7XG4gICAgICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeChEZWZhdWx0U2NyZWVuU2hhcmVPdmVybGF5LCB7fSksIGpzeChQYXJ0aWNpcGFudERldGFpbHMsIHsgaW5kaWNhdG9yc1Zpc2libGU6IGluZGljYXRvcnNWaXNpYmxlIH0pXSB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW3Nob3dNZW51QnV0dG9uICYmIChqc3goTWVudVRvZ2dsZSwgeyBzdHJhdGVneTogXCJmaXhlZFwiLCBwbGFjZW1lbnQ6IG1lbnVQbGFjZW1lbnQsIFRvZ2dsZUJ1dHRvbjogVG9nZ2xlQnV0dG9uLCBjaGlsZHJlbjoganN4KFBhcnRpY2lwYW50QWN0aW9uc0NvbnRleHRNZW51JDEsIHt9KSB9KSksIGpzeChSZWFjdGlvbiwgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQgfSksIGpzeChQYXJ0aWNpcGFudERldGFpbHMsIHsgaW5kaWNhdG9yc1Zpc2libGU6IGluZGljYXRvcnNWaXNpYmxlIH0pXSB9KSk7XG59O1xuY29uc3QgUGFydGljaXBhbnREZXRhaWxzID0gKHsgaW5kaWNhdG9yc1Zpc2libGUgPSB0cnVlLCB9KSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCB9ID0gdXNlUGFydGljaXBhbnRWaWV3Q29udGV4dCgpO1xuICAgIGNvbnN0IHsgaXNMb2NhbFBhcnRpY2lwYW50LCBjb25uZWN0aW9uUXVhbGl0eSwgcGluLCBzZXNzaW9uSWQsIG5hbWUsIHVzZXJJZCwgfSA9IHBhcnRpY2lwYW50O1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgY29ubmVjdGlvblF1YWxpdHlBc1N0cmluZyA9ICEhY29ubmVjdGlvblF1YWxpdHkgJiZcbiAgICAgICAgU2Z1TW9kZWxzLkNvbm5lY3Rpb25RdWFsaXR5W2Nvbm5lY3Rpb25RdWFsaXR5XS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGhhc0F1ZGlvVHJhY2sgPSBoYXNBdWRpbyhwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgaGFzVmlkZW9UcmFjayA9IGhhc1ZpZGVvKHBhcnRpY2lwYW50KTtcbiAgICBjb25zdCBjYW5VbnBpbiA9ICEhcGluICYmIHBpbi5pc0xvY2FsUGluO1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNcIiwgY2hpbGRyZW46IGpzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtZGV0YWlsc19fbmFtZVwiLCBjaGlsZHJlbjogW25hbWUgfHwgdXNlcklkLCBpbmRpY2F0b3JzVmlzaWJsZSAmJiAhaGFzQXVkaW9UcmFjayAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNfX25hbWUtLWF1ZGlvLW11dGVkXCIgfSkpLCBpbmRpY2F0b3JzVmlzaWJsZSAmJiAhaGFzVmlkZW9UcmFjayAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNfX25hbWUtLXZpZGVvLW11dGVkXCIgfSkpLCBpbmRpY2F0b3JzVmlzaWJsZSAmJiBjYW5VbnBpbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBtb25zdHJvc2l0eSBvbmNlIHdlIGhhdmUgYSBwcm9wZXIgZGVzaWduXG4gICAgICAgICAgICAgICAgICAgICAgICBqc3goXCJzcGFuXCIsIHsgdGl0bGU6IHQoJ1VucGluJyksIG9uQ2xpY2s6ICgpID0+IGNhbGw/LnVucGluKHNlc3Npb25JZCksIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNfX25hbWUtLXBpbm5lZFwiIH0pKSwgaW5kaWNhdG9yc1Zpc2libGUgJiYganN4KFNwZWVjaEluZGljYXRvciwge30pXSB9KSB9KSwgaW5kaWNhdG9yc1Zpc2libGUgJiYgKGpzeChOb3RpZmljYXRpb24sIHsgaXNWaXNpYmxlOiBpc0xvY2FsUGFydGljaXBhbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblF1YWxpdHkgPT09IFNmdU1vZGVscy5Db25uZWN0aW9uUXVhbGl0eS5QT09SLCBtZXNzYWdlOiB0KCdQb29yIGNvbm5lY3Rpb24gcXVhbGl0eScpLCBjaGlsZHJlbjogY29ubmVjdGlvblF1YWxpdHlBc1N0cmluZyAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1kZXRhaWxzX19jb25uZWN0aW9uLXF1YWxpdHknLCBgc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1kZXRhaWxzX19jb25uZWN0aW9uLXF1YWxpdHktLSR7Y29ubmVjdGlvblF1YWxpdHlBc1N0cmluZ31gKSwgdGl0bGU6IGNvbm5lY3Rpb25RdWFsaXR5QXNTdHJpbmcgfSkpIH0pKV0gfSkpO1xufTtcbmNvbnN0IFNwZWVjaEluZGljYXRvciA9ICgpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50IH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgeyBpc1NwZWFraW5nLCBpc0RvbWluYW50U3BlYWtlciB9ID0gcGFydGljaXBhbnQ7XG4gICAgcmV0dXJuIChqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19zcGVlY2gtaW5kaWNhdG9yJywgaXNTcGVha2luZyAmJiAnc3RyLXZpZGVvX19zcGVlY2gtaW5kaWNhdG9yLS1zcGVha2luZycsIGlzRG9taW5hbnRTcGVha2VyICYmICdzdHItdmlkZW9fX3NwZWVjaC1pbmRpY2F0b3ItLWRvbWluYW50JyksIGNoaWxkcmVuOiBbanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWVjaC1pbmRpY2F0b3JfX2JhclwiIH0pLCBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlZWNoLWluZGljYXRvcl9fYmFyXCIgfSksIGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVlY2gtaW5kaWNhdG9yX19iYXJcIiB9KV0gfSkpO1xufTtcblxuY29uc3QgUGFydGljaXBhbnRWaWV3ID0gZm9yd2FyZFJlZihmdW5jdGlvbiBQYXJ0aWNpcGFudFZpZXcoeyBwYXJ0aWNpcGFudCwgdHJhY2tUeXBlID0gJ3ZpZGVvVHJhY2snLCBtdXRlQXVkaW8sIHJlZnM6IHsgc2V0VmlkZW9FbGVtZW50LCBzZXRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudCB9ID0ge30sIGNsYXNzTmFtZSwgVmlkZW9QbGFjZWhvbGRlciwgUGFydGljaXBhbnRWaWV3VUkgPSBEZWZhdWx0UGFydGljaXBhbnRWaWV3VUksIH0sIHJlZikge1xuICAgIGNvbnN0IHsgaXNMb2NhbFBhcnRpY2lwYW50LCBpc1NwZWFraW5nLCBpc0RvbWluYW50U3BlYWtlciwgc2Vzc2lvbklkIH0gPSBwYXJ0aWNpcGFudDtcbiAgICBjb25zdCBoYXNBdWRpb1RyYWNrID0gaGFzQXVkaW8ocGFydGljaXBhbnQpO1xuICAgIGNvbnN0IGhhc1ZpZGVvVHJhY2sgPSBoYXNWaWRlbyhwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgaGFzU2NyZWVuU2hhcmVBdWRpb1RyYWNrID0gaGFzU2NyZWVuU2hhcmVBdWRpbyhwYXJ0aWNpcGFudCk7XG4gICAgY29uc3QgW3RyYWNrZWRFbGVtZW50LCBzZXRUcmFja2VkRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbY29udGV4dFZpZGVvRWxlbWVudCwgc2V0Q29udGV4dFZpZGVvRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbY29udGV4dFZpZGVvUGxhY2Vob2xkZXJFbGVtZW50LCBzZXRDb250ZXh0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgLy8gVE9ETzogYWxsb3cgdG8gcGFzcyBjdXN0b20gVmlld3BvcnRUcmFja2VyIGluc3RhbmNlIGZyb20gcHJvcHNcbiAgICB1c2VUcmFja0VsZW1lbnRWaXNpYmlsaXR5KHtcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICB0cmFja2VkRWxlbWVudCxcbiAgICAgICAgdHJhY2tUeXBlLFxuICAgIH0pO1xuICAgIGNvbnN0IHBhcnRpY2lwYW50Vmlld0NvbnRleHRWYWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICAgICAgcGFydGljaXBhbnQsXG4gICAgICAgIHBhcnRpY2lwYW50Vmlld0VsZW1lbnQ6IHRyYWNrZWRFbGVtZW50LFxuICAgICAgICB2aWRlb0VsZW1lbnQ6IGNvbnRleHRWaWRlb0VsZW1lbnQsXG4gICAgICAgIHZpZGVvUGxhY2Vob2xkZXJFbGVtZW50OiBjb250ZXh0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnQsXG4gICAgICAgIHRyYWNrVHlwZSxcbiAgICB9KSwgW1xuICAgICAgICBjb250ZXh0VmlkZW9FbGVtZW50LFxuICAgICAgICBjb250ZXh0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnQsXG4gICAgICAgIHBhcnRpY2lwYW50LFxuICAgICAgICB0cmFja2VkRWxlbWVudCxcbiAgICAgICAgdHJhY2tUeXBlLFxuICAgIF0pO1xuICAgIGNvbnN0IHZpZGVvUmVmcyA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICAgICAgc2V0VmlkZW9FbGVtZW50OiAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgc2V0VmlkZW9FbGVtZW50Py4oZWxlbWVudCk7XG4gICAgICAgICAgICBzZXRDb250ZXh0VmlkZW9FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudDogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHNldFZpZGVvUGxhY2Vob2xkZXJFbGVtZW50Py4oZWxlbWVudCk7XG4gICAgICAgICAgICBzZXRDb250ZXh0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgfSksIFtzZXRWaWRlb0VsZW1lbnQsIHNldFZpZGVvUGxhY2Vob2xkZXJFbGVtZW50XSk7XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBcImRhdGEtdGVzdGlkXCI6IFwicGFydGljaXBhbnQtdmlld1wiLCByZWY6IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBhcHBseUVsZW1lbnRUb1JlZihyZWYsIGVsZW1lbnQpO1xuICAgICAgICAgICAgc2V0VHJhY2tlZEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0sIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC12aWV3JywgaXNEb21pbmFudFNwZWFrZXIgJiYgJ3N0ci12aWRlb19fcGFydGljaXBhbnQtdmlldy0tZG9taW5hbnQtc3BlYWtlcicsIGlzU3BlYWtpbmcgJiYgJ3N0ci12aWRlb19fcGFydGljaXBhbnQtdmlldy0tc3BlYWtpbmcnLCAhaGFzVmlkZW9UcmFjayAmJiAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC12aWV3LS1uby12aWRlbycsICFoYXNBdWRpb1RyYWNrICYmICdzdHItdmlkZW9fX3BhcnRpY2lwYW50LXZpZXctLW5vLWF1ZGlvJywgY2xhc3NOYW1lKSwgY2hpbGRyZW46IGpzeHMoUGFydGljaXBhbnRWaWV3Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogcGFydGljaXBhbnRWaWV3Q29udGV4dFZhbHVlLCBjaGlsZHJlbjogWyFpc0xvY2FsUGFydGljaXBhbnQgJiYgIW11dGVBdWRpbyAmJiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2hhc0F1ZGlvVHJhY2sgJiYgKGpzeChBdWRpbywgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsIHRyYWNrVHlwZTogXCJhdWRpb1RyYWNrXCIgfSkpLCBoYXNTY3JlZW5TaGFyZUF1ZGlvVHJhY2sgJiYgKGpzeChBdWRpbywgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsIHRyYWNrVHlwZTogXCJzY3JlZW5TaGFyZUF1ZGlvVHJhY2tcIiB9KSldIH0pKSwganN4KFZpZGVvJDEsIHsgVmlkZW9QbGFjZWhvbGRlcjogVmlkZW9QbGFjZWhvbGRlciwgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50LCB0cmFja1R5cGU6IHRyYWNrVHlwZSwgcmVmczogdmlkZW9SZWZzLCBhdXRvUGxheTogdHJ1ZSB9KSwgaXNDb21wb25lbnRUeXBlKFBhcnRpY2lwYW50Vmlld1VJKSA/IChqc3goUGFydGljaXBhbnRWaWV3VUksIHt9KSkgOiAoUGFydGljaXBhbnRWaWV3VUkpXSB9KSB9KSk7XG59KTtcblBhcnRpY2lwYW50Vmlldy5kaXNwbGF5TmFtZSA9ICdQYXJ0aWNpcGFudFZpZXcnO1xuXG4vLyByZS1leHBvcnRpbmcgdGhlIFN0cmVhbUNhbGxQcm92aWRlciBhcyBTdHJlYW1DYWxsXG5jb25zdCBTdHJlYW1DYWxsID0gU3RyZWFtQ2FsbFByb3ZpZGVyO1xuU3RyZWFtQ2FsbC5kaXNwbGF5TmFtZSA9ICdTdHJlYW1DYWxsJztcblxudmFyIEpvaW5pbmcgPSBcIkpvaW5pbmdcIjtcbnZhciBNaWMgPSBcIk1pY1wiO1xudmFyIFJpbmdpbmcgPSBcIlJpbmdpbmdcIjtcbnZhciBTcGVha2VycyA9IFwiU3BlYWtlcnNcIjtcbnZhciBWaWRlbyA9IFwiVmlkZW9cIjtcbnZhciBMaXZlID0gXCJMaXZlXCI7XG52YXIgUmVhY3Rpb25zID0gXCJSZWFjdGlvbnNcIjtcbnZhciBTdGF0aXN0aWNzID0gXCJTdGF0aXN0aWNzXCI7XG52YXIgSW52aXRlID0gXCJJbnZpdGVcIjtcbnZhciBKb2luID0gXCJKb2luXCI7XG52YXIgWW91ID0gXCJZb3VcIjtcbnZhciBNZSA9IFwiTWVcIjtcbnZhciBVbmtub3duID0gXCJVbmtub3duXCI7XG52YXIgUmVmcmVzaCA9IFwiUmVmcmVzaFwiO1xudmFyIEFsbG93ID0gXCJBbGxvd1wiO1xudmFyIFJldm9rZSA9IFwiUmV2b2tlXCI7XG52YXIgRGlzbWlzcyA9IFwiRGlzbWlzc1wiO1xudmFyIFBpbm5lZCA9IFwiUGlubmVkXCI7XG52YXIgVW5waW4gPSBcIlVucGluXCI7XG52YXIgUGluID0gXCJQaW5cIjtcbnZhciBCbG9jayA9IFwiQmxvY2tcIjtcbnZhciBFbnRlciA9IFwiRW50ZXJcIjtcbnZhciBMZWF2ZSA9IFwiTGVhdmVcIjtcbnZhciBQYXJ0aWNpcGFudHMgPSBcIlBhcnRpY2lwYW50c1wiO1xudmFyIEFub255bW91cyA9IFwiLCBhbmQgKHt7IGNvdW50IH19KSBhbm9ueW1vdXNcIjtcbnZhciBlbiA9IHtcblx0Sm9pbmluZzogSm9pbmluZyxcblx0TWljOiBNaWMsXG5cdFwiTm8gaW50ZXJuZXQgY29ubmVjdGlvblwiOiBcIk5vIGludGVybmV0IGNvbm5lY3Rpb25cIixcblx0XCJSZS1jb25uZWN0aW5nXCI6IFwiUmUtY29ubmVjdGluZ1wiLFxuXHRSaW5naW5nOiBSaW5naW5nLFxuXHRcIlNjcmVlbiBTaGFyZVwiOiBcIlNjcmVlbiBTaGFyZVwiLFxuXHRcIlNlbGVjdCBhIENhbWVyYVwiOiBcIlNlbGVjdCBhIENhbWVyYVwiLFxuXHRcIlNlbGVjdCBhIE1pY1wiOiBcIlNlbGVjdCBhIE1pY1wiLFxuXHRcIlNlbGVjdCBTcGVha2Vyc1wiOiBcIlNlbGVjdCBTcGVha2Vyc1wiLFxuXHRTcGVha2VyczogU3BlYWtlcnMsXG5cdFZpZGVvOiBWaWRlbyxcblx0XCJZb3UgYXJlIG11dGVkLiBVbm11dGUgdG8gc3BlYWsuXCI6IFwiWW91IGFyZSBtdXRlZC4gVW5tdXRlIHRvIHNwZWFrLlwiLFxuXHRMaXZlOiBMaXZlLFxuXHRcIllvdSBjYW4gbm93IHNwZWFrLlwiOiBcIllvdSBjYW4gbm93IHNwZWFrLlwiLFxuXHRcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzcGVhay5cIjogXCJBd2FpdGluZyBmb3IgYW4gYXBwcm92YWwgdG8gc3BlYWsuXCIsXG5cdFwiWW91IGNhbiBubyBsb25nZXIgc3BlYWsuXCI6IFwiWW91IGNhbiBubyBsb25nZXIgc3BlYWsuXCIsXG5cdFwiWW91IGNhbiBub3cgc2hhcmUgeW91ciB2aWRlby5cIjogXCJZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHZpZGVvLlwiLFxuXHRcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSB5b3VyIHZpZGVvLlwiOiBcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSB5b3VyIHZpZGVvLlwiLFxuXHRcIllvdSBjYW4gbm8gbG9uZ2VyIHNoYXJlIHlvdXIgdmlkZW8uXCI6IFwiWW91IGNhbiBubyBsb25nZXIgc2hhcmUgeW91ciB2aWRlby5cIixcblx0XCJXYWl0aW5nIGZvciByZWNvcmRpbmcgdG8gc3RvcC4uLlwiOiBcIldhaXRpbmcgZm9yIHJlY29yZGluZyB0byBzdG9wLi4uXCIsXG5cdFwiV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIHN0YXJ0Li4uXCI6IFwiV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIHN0YXJ0Li4uXCIsXG5cdFwiUmVjb3JkIGNhbGxcIjogXCJSZWNvcmQgY2FsbFwiLFxuXHRSZWFjdGlvbnM6IFJlYWN0aW9ucyxcblx0U3RhdGlzdGljczogU3RhdGlzdGljcyxcblx0XCJZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHNjcmVlbi5cIjogXCJZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHNjcmVlbi5cIixcblx0XCJBd2FpdGluZyBmb3IgYW4gYXBwcm92YWwgdG8gc2hhcmUgc2NyZWVuLlwiOiBcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSBzY3JlZW4uXCIsXG5cdFwiWW91IGNhbiBubyBsb25nZXIgc2hhcmUgeW91ciBzY3JlZW4uXCI6IFwiWW91IGNhbiBubyBsb25nZXIgc2hhcmUgeW91ciBzY3JlZW4uXCIsXG5cdFwiU2hhcmUgc2NyZWVuXCI6IFwiU2hhcmUgc2NyZWVuXCIsXG5cdFwiSW5jb21pbmcgQ2FsbC4uLlwiOiBcIkluY29taW5nIENhbGwuLi5cIixcblx0XCJDYWxsaW5nLi4uXCI6IFwiQ2FsbGluZy4uLlwiLFxuXHRcIk11dGUgQWxsXCI6IFwiTXV0ZSBBbGxcIixcblx0SW52aXRlOiBJbnZpdGUsXG5cdEpvaW46IEpvaW4sXG5cdFlvdTogWW91LFxuXHRNZTogTWUsXG5cdFVua25vd246IFVua25vd24sXG5cdFwiVG9nZ2xlIGRldmljZSBtZW51XCI6IFwiVG9nZ2xlIGRldmljZSBtZW51XCIsXG5cdFwiQ2FsbCBSZWNvcmRpbmdzXCI6IFwiQ2FsbCBSZWNvcmRpbmdzXCIsXG5cdFJlZnJlc2g6IFJlZnJlc2gsXG5cdFwiQ2hlY2sgeW91ciBicm93c2VyIHZpZGVvIHBlcm1pc3Npb25zXCI6IFwiQ2hlY2sgeW91ciBicm93c2VyIHZpZGVvIHBlcm1pc3Npb25zXCIsXG5cdFwiVmlkZW8gcHVibGlzaGluZyBpcyBkaXNhYmxlZCBieSB0aGUgc3lzdGVtXCI6IFwiVmlkZW8gcHVibGlzaGluZyBpcyBkaXNhYmxlZCBieSB0aGUgc3lzdGVtXCIsXG5cdFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIHZpZGVvXCI6IFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIHZpZGVvXCIsXG5cdFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIGF1ZGlvXCI6IFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIGF1ZGlvXCIsXG5cdFwiWW91IGFyZSBwcmVzZW50aW5nIHlvdXIgc2NyZWVuXCI6IFwiWW91IGFyZSBwcmVzZW50aW5nIHlvdXIgc2NyZWVuXCIsXG5cdFwiU3RvcCBTY3JlZW4gU2hhcmluZ1wiOiBcIlN0b3AgU2NyZWVuIFNoYXJpbmdcIixcblx0QWxsb3c6IEFsbG93LFxuXHRSZXZva2U6IFJldm9rZSxcblx0RGlzbWlzczogRGlzbWlzcyxcblx0XCJNaWNyb3Bob25lIG9uXCI6IFwiTWljcm9waG9uZSBvblwiLFxuXHRcIk1pY3JvcGhvbmUgb2ZmXCI6IFwiTWljcm9waG9uZSBvZmZcIixcblx0XCJDYW1lcmEgb25cIjogXCJDYW1lcmEgb25cIixcblx0XCJDYW1lcmEgb2ZmXCI6IFwiQ2FtZXJhIG9mZlwiLFxuXHRcIk5vIGNhbWVyYSBmb3VuZFwiOiBcIk5vIGNhbWVyYSBmb3VuZFwiLFxuXHRcIlZpZGVvIGlzIGRpc2FibGVkXCI6IFwiVmlkZW8gaXMgZGlzYWJsZWRcIixcblx0UGlubmVkOiBQaW5uZWQsXG5cdFVucGluOiBVbnBpbixcblx0UGluOiBQaW4sXG5cdFwiUGluIGZvciBldmVyeW9uZVwiOiBcIlBpbiBmb3IgZXZlcnlvbmVcIixcblx0XCJVbnBpbiBmb3IgZXZlcnlvbmVcIjogXCJVbnBpbiBmb3IgZXZlcnlvbmVcIixcblx0QmxvY2s6IEJsb2NrLFxuXHRcIlR1cm4gb2ZmIHZpZGVvXCI6IFwiVHVybiBvZmYgdmlkZW9cIixcblx0XCJUdXJuIG9mZiBzY3JlZW4gc2hhcmVcIjogXCJUdXJuIG9mZiBzY3JlZW4gc2hhcmVcIixcblx0XCJNdXRlIGF1ZGlvXCI6IFwiTXV0ZSBhdWRpb1wiLFxuXHRcIk11dGUgc2NyZWVuIHNoYXJlIGF1ZGlvXCI6IFwiTXV0ZSBzY3JlZW4gc2hhcmUgYXVkaW9cIixcblx0XCJBbGxvdyBhdWRpb1wiOiBcIkFsbG93IGF1ZGlvXCIsXG5cdFwiQWxsb3cgdmlkZW9cIjogXCJBbGxvdyB2aWRlb1wiLFxuXHRcIkFsbG93IHNjcmVlbiBzaGFyaW5nXCI6IFwiQWxsb3cgc2NyZWVuIHNoYXJpbmdcIixcblx0XCJEaXNhYmxlIGF1ZGlvXCI6IFwiRGlzYWJsZSBhdWRpb1wiLFxuXHRcIkRpc2FibGUgdmlkZW9cIjogXCJEaXNhYmxlIHZpZGVvXCIsXG5cdFwiRGlzYWJsZSBzY3JlZW4gc2hhcmluZ1wiOiBcIkRpc2FibGUgc2NyZWVuIHNoYXJpbmdcIixcblx0RW50ZXI6IEVudGVyLFxuXHRMZWF2ZTogTGVhdmUsXG5cdFwiTGVhdmUgY2FsbFwiOiBcIkxlYXZlIGNhbGxcIixcblx0XCJFbmQgY2FsbCBmb3IgYWxsXCI6IFwiRW5kIGNhbGwgZm9yIGFsbFwiLFxuXHRcInt7IGRpcmVjdGlvbiB9fSBmdWxsc2NyZWVuXCI6IFwie3sgZGlyZWN0aW9uIH19IGZ1bGxzY3JlZW5cIixcblx0XCJ7eyBkaXJlY3Rpb24gfX0gcGljdHVyZS1pbi1waWN0dXJlXCI6IFwie3sgZGlyZWN0aW9uIH19IHBpY3R1cmUtaW4tcGljdHVyZVwiLFxuXHRcIkRvbWluYW50IFNwZWFrZXJcIjogXCJEb21pbmFudCBTcGVha2VyXCIsXG5cdFwiUG9vciBjb25uZWN0aW9uIHF1YWxpdHlcIjogXCJQb29yIGNvbm5lY3Rpb24gcXVhbGl0eS4gUGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi5cIixcblx0UGFydGljaXBhbnRzOiBQYXJ0aWNpcGFudHMsXG5cdEFub255bW91czogQW5vbnltb3VzLFxuXHRcIk5vIHBhcnRpY2lwYW50cyBmb3VuZFwiOiBcIk5vIHBhcnRpY2lwYW50cyBmb3VuZFwiLFxuXHRcIlBhcnRpY2lwYW50cyAoe3sgbnVtYmVyT2ZQYXJ0aWNpcGFudHMgfX0pXCI6IFwiUGFydGljaXBhbnRzICh7eyBudW1iZXJPZlBhcnRpY2lwYW50cyB9fSlcIixcblx0XCJ7eyB1c2VyTmFtZSB9fSBpcyBzaGFyaW5nIHRoZWlyIHNjcmVlblwiOiBcInt7IHVzZXJOYW1lIH19IGlzIHNoYXJpbmcgdGhlaXIgc2NyZWVuXCIsXG5cdFwie3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyB0byBzcGVha1wiOiBcInt7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gc3BlYWtcIixcblx0XCJ7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHRvIHNoYXJlIHRoZWlyIGNhbWVyYVwiOiBcInt7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gc2hhcmUgdGhlaXIgY2FtZXJhXCIsXG5cdFwie3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyB0byBwcmVzZW50IHRoZWlyIHNjcmVlblwiOiBcInt7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gcHJlc2VudCB0aGVpciBzY3JlZW5cIixcblx0XCJ7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHBlcm1pc3Npb246IHt7IHBlcm1pc3Npb24gfX1cIjogXCJ7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHBlcm1pc3Npb246IHt7IHBlcm1pc3Npb24gfX1cIlxufTtcblxuY29uc3QgdHJhbnNsYXRpb25zID0geyBlbiB9O1xuXG5jb25zdCBTdHJlYW1WaWRlbyA9IChwcm9wcykgPT4ge1xuICAgIHJldHVybiAoanN4KFN0cmVhbVZpZGVvUHJvdmlkZXIsIHsgdHJhbnNsYXRpb25zT3ZlcnJpZGVzOiB0cmFuc2xhdGlvbnMsIC4uLnByb3BzIH0pKTtcbn07XG5TdHJlYW1WaWRlby5kaXNwbGF5TmFtZSA9ICdTdHJlYW1WaWRlbyc7XG5cbmNvbnN0IHVzZVBhZ2luYXRlZExheW91dFNvcnRQcmVzZXQgPSAoY2FsbCkgPT4ge1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FsbC5zZXRTb3J0UGFydGljaXBhbnRzQnkocGFnaW5hdGVkTGF5b3V0U29ydFByZXNldCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXNldFNvcnRQcmVzZXQoY2FsbCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGxdKTtcbn07XG5jb25zdCB1c2VTcGVha2VyTGF5b3V0U29ydFByZXNldCA9IChjYWxsLCBpc09uZU9uT25lQ2FsbCkgPT4ge1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gYWx3YXlzIHNob3cgdGhlIHJlbW90ZSBwYXJ0aWNpcGFudCBpbiB0aGUgc3BvdGxpZ2h0XG4gICAgICAgIGlmIChpc09uZU9uT25lQ2FsbCkge1xuICAgICAgICAgICAgY2FsbC5zZXRTb3J0UGFydGljaXBhbnRzQnkoY29tYmluZUNvbXBhcmF0b3JzKHNjcmVlblNoYXJpbmcsIGxvZ2dlZEluKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsLnNldFNvcnRQYXJ0aWNpcGFudHNCeShzcGVha2VyTGF5b3V0U29ydFByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHJlc2V0U29ydFByZXNldChjYWxsKTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2FsbCwgaXNPbmVPbk9uZUNhbGxdKTtcbn07XG5jb25zdCByZXNldFNvcnRQcmVzZXQgPSAoY2FsbCkgPT4ge1xuICAgIC8vIHJlc2V0IHRoZSBzb3J0aW5nIHRvIHRoZSBkZWZhdWx0IGZvciB0aGUgY2FsbCB0eXBlXG4gICAgY29uc3QgY2FsbENvbmZpZyA9IENhbGxUeXBlcy5nZXQoY2FsbC50eXBlKTtcbiAgICBjYWxsLnNldFNvcnRQYXJ0aWNpcGFudHNCeShjYWxsQ29uZmlnLm9wdGlvbnMuc29ydFBhcnRpY2lwYW50c0J5IHx8IGRlZmF1bHRTb3J0UHJlc2V0KTtcbn07XG5jb25zdCBsb2dnZWRJbiA9IChhLCBiKSA9PiB7XG4gICAgaWYgKGEuaXNMb2NhbFBhcnRpY2lwYW50KVxuICAgICAgICByZXR1cm4gMTtcbiAgICBpZiAoYi5pc0xvY2FsUGFydGljaXBhbnQpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IExpdmVzdHJlYW1MYXlvdXQgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHVzZVBhcnRpY2lwYW50cywgdXNlUmVtb3RlUGFydGljaXBhbnRzLCB1c2VIYXNPbmdvaW5nU2NyZWVuU2hhcmUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VQYXJ0aWNpcGFudHMoKTtcbiAgICBjb25zdCBbY3VycmVudFNwZWFrZXJdID0gcGFydGljaXBhbnRzO1xuICAgIGNvbnN0IHJlbW90ZVBhcnRpY2lwYW50cyA9IHVzZVJlbW90ZVBhcnRpY2lwYW50cygpO1xuICAgIGNvbnN0IGhhc09uZ29pbmdTY3JlZW5TaGFyZSA9IHVzZUhhc09uZ29pbmdTY3JlZW5TaGFyZSgpO1xuICAgIGNvbnN0IHByZXNlbnRlciA9IGhhc09uZ29pbmdTY3JlZW5TaGFyZVxuICAgICAgICA/IHBhcnRpY2lwYW50cy5maW5kKGhhc1NjcmVlblNoYXJlKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB1c2VQYWdpbmF0ZWRMYXlvdXRTb3J0UHJlc2V0KGNhbGwpO1xuICAgIGNvbnN0IE92ZXJsYXkgPSAoanN4KFBhcnRpY2lwYW50T3ZlcmxheSwgeyBzaG93UGFydGljaXBhbnRDb3VudDogcHJvcHMuc2hvd1BhcnRpY2lwYW50Q291bnQsIHNob3dEdXJhdGlvbjogcHJvcHMuc2hvd0R1cmF0aW9uLCBzaG93TGl2ZUJhZGdlOiBwcm9wcy5zaG93TGl2ZUJhZGdlLCBzaG93U3BlYWtlck5hbWU6IHByb3BzLnNob3dTcGVha2VyTmFtZSB9KSk7XG4gICAgY29uc3QgeyBmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHMgfSA9IHByb3BzO1xuICAgIGNvbnN0IEZsb2F0aW5nUGFydGljaXBhbnRPdmVybGF5ID0gaGFzT25nb2luZ1NjcmVlblNoYXJlICYmIChqc3goUGFydGljaXBhbnRPdmVybGF5XG4gICAgLy8gdGhlc2UgZWxlbWVudHMgYXJlbid0IG5lZWRlZCBmb3IgdGhlIHZpZGVvIGZlZWRcbiAgICAsIHsgXG4gICAgICAgIC8vIHRoZXNlIGVsZW1lbnRzIGFyZW4ndCBuZWVkZWQgZm9yIHRoZSB2aWRlbyBmZWVkXG4gICAgICAgIHNob3dQYXJ0aWNpcGFudENvdW50OiBmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHM/LnNob3dQYXJ0aWNpcGFudENvdW50ID8/IGZhbHNlLCBzaG93RHVyYXRpb246IGZsb2F0aW5nUGFydGljaXBhbnRQcm9wcz8uc2hvd0R1cmF0aW9uID8/IGZhbHNlLCBzaG93TGl2ZUJhZGdlOiBmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHM/LnNob3dMaXZlQmFkZ2UgPz8gZmFsc2UsIHNob3dTcGVha2VyTmFtZTogZmxvYXRpbmdQYXJ0aWNpcGFudFByb3BzPy5zaG93U3BlYWtlck5hbWUgPz8gdHJ1ZSB9KSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX3dyYXBwZXJcIiwgY2hpbGRyZW46IFtqc3goUGFydGljaXBhbnRzQXVkaW8sIHsgcGFydGljaXBhbnRzOiByZW1vdGVQYXJ0aWNpcGFudHMgfSksIGhhc09uZ29pbmdTY3JlZW5TaGFyZSAmJiBwcmVzZW50ZXIgJiYgKGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX3NjcmVlbi1zaGFyZVwiLCBwYXJ0aWNpcGFudDogcHJlc2VudGVyLCBQYXJ0aWNpcGFudFZpZXdVSTogT3ZlcmxheSwgdHJhY2tUeXBlOiBcInNjcmVlblNoYXJlVHJhY2tcIiwgbXV0ZUF1ZGlvIC8vIGF1ZGlvIGlzIHJlbmRlcmVkIGJ5IFBhcnRpY2lwYW50c0F1ZGlvXG4gICAgICAgICAgICAgICAgOiB0cnVlIH0pKSwgY3VycmVudFNwZWFrZXIgJiYgKGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgY2xhc3NOYW1lOiBjbHN4KGhhc09uZ29pbmdTY3JlZW5TaGFyZSAmJlxuICAgICAgICAgICAgICAgICAgICBjbHN4KCdzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19mbG9hdGluZy1wYXJ0aWNpcGFudCcsIGBzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19mbG9hdGluZy1wYXJ0aWNpcGFudC0tJHtmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHM/LnBvc2l0aW9uID8/ICd0b3AtcmlnaHQnfWApKSwgcGFydGljaXBhbnQ6IGN1cnJlbnRTcGVha2VyLCBQYXJ0aWNpcGFudFZpZXdVSTogRmxvYXRpbmdQYXJ0aWNpcGFudE92ZXJsYXkgfHwgT3ZlcmxheSwgbXV0ZUF1ZGlvIC8vIGF1ZGlvIGlzIHJlbmRlcmVkIGJ5IFBhcnRpY2lwYW50c0F1ZGlvXG4gICAgICAgICAgICAgICAgOiB0cnVlIH0pKV0gfSkpO1xufTtcbmNvbnN0IFBhcnRpY2lwYW50T3ZlcmxheSA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgZW5hYmxlRnVsbFNjcmVlbiA9IHRydWUsIHNob3dQYXJ0aWNpcGFudENvdW50ID0gdHJ1ZSwgc2hvd0R1cmF0aW9uID0gdHJ1ZSwgc2hvd0xpdmVCYWRnZSA9IHRydWUsIHNob3dTcGVha2VyTmFtZSA9IGZhbHNlLCB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCB9ID0gdXNlUGFydGljaXBhbnRWaWV3Q29udGV4dCgpO1xuICAgIGNvbnN0IHsgdXNlUGFydGljaXBhbnRDb3VudCB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudENvdW50ID0gdXNlUGFydGljaXBhbnRDb3VudCgpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gdXNlVXBkYXRlQ2FsbER1cmF0aW9uKCk7XG4gICAgY29uc3QgdG9nZ2xlRnVsbFNjcmVlbiA9IHVzZVRvZ2dsZUZ1bGxTY3JlZW4oKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19vdmVybGF5XCIsIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX292ZXJsYXlfX2JhclwiLCBjaGlsZHJlbjogW3Nob3dMaXZlQmFkZ2UgJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19saXZlc3RyZWFtLWxheW91dF9fbGl2ZS1iYWRnZVwiLCBjaGlsZHJlbjogdCgnTGl2ZScpIH0pKSwgc2hvd1BhcnRpY2lwYW50Q291bnQgJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19saXZlc3RyZWFtLWxheW91dF9fdmlld2Vycy1jb3VudFwiLCBjaGlsZHJlbjogcGFydGljaXBhbnRDb3VudCB9KSksIHNob3dTcGVha2VyTmFtZSAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19zcGVha2VyLW5hbWVcIiwgdGl0bGU6IHBhcnRpY2lwYW50Lm5hbWUgfHwgcGFydGljaXBhbnQudXNlcklkIHx8ICcnLCBjaGlsZHJlbjogcGFydGljaXBhbnQubmFtZSB8fCBwYXJ0aWNpcGFudC51c2VySWQgfHwgJycgfSkpLCBzaG93RHVyYXRpb24gJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19saXZlc3RyZWFtLWxheW91dF9fZHVyYXRpb25cIiwgY2hpbGRyZW46IGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uKSB9KSksIGVuYWJsZUZ1bGxTY3JlZW4gJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19saXZlc3RyZWFtLWxheW91dF9fZ28tZnVsbHNjcmVlblwiLCBvbkNsaWNrOiB0b2dnbGVGdWxsU2NyZWVuIH0pKV0gfSkgfSkpO1xufTtcbkxpdmVzdHJlYW1MYXlvdXQuZGlzcGxheU5hbWUgPSAnTGl2ZXN0cmVhbUxheW91dCc7XG5jb25zdCB1c2VVcGRhdGVDYWxsRHVyYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgeyB1c2VJc0NhbGxMaXZlLCB1c2VDYWxsU2Vzc2lvbiB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBpc0NhbGxMaXZlID0gdXNlSXNDYWxsTGl2ZSgpO1xuICAgIGNvbnN0IHNlc3Npb24gPSB1c2VDYWxsU2Vzc2lvbigpO1xuICAgIGNvbnN0IFtkdXJhdGlvbiwgc2V0RHVyYXRpb25dID0gdXNlU3RhdGUoKCkgPT4ge1xuICAgICAgICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24ubGl2ZV9zdGFydGVkX2F0KVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGNvbnN0IGxpdmVTdGFydFRpbWUgPSBuZXcgRGF0ZShzZXNzaW9uLmxpdmVfc3RhcnRlZF9hdCk7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKChub3cuZ2V0VGltZSgpIC0gbGl2ZVN0YXJ0VGltZS5nZXRUaW1lKCkpIC8gMTAwMCk7XG4gICAgfSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc0NhbGxMaXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHNldER1cmF0aW9uKChkKSA9PiBkICsgMSk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIH07XG4gICAgfSwgW2lzQ2FsbExpdmVdKTtcbiAgICByZXR1cm4gZHVyYXRpb247XG59O1xuY29uc3QgdXNlVG9nZ2xlRnVsbFNjcmVlbiA9ICgpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50Vmlld0VsZW1lbnQgfSA9IHVzZVBhcnRpY2lwYW50Vmlld0NvbnRleHQoKTtcbiAgICBjb25zdCBbaXNGdWxsc2NyZWVuLCBzZXRJc0Z1bGxzY3JlZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIHJldHVybiB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGlmIChpc0Z1bGxzY3JlZW4pIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0SXNGdWxsc2NyZWVuKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFydGljaXBhbnRWaWV3RWxlbWVudD8ucmVxdWVzdEZ1bGxzY3JlZW4oKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRJc0Z1bGxzY3JlZW4odHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtpc0Z1bGxzY3JlZW4sIHBhcnRpY2lwYW50Vmlld0VsZW1lbnRdKTtcbn07XG5jb25zdCBmb3JtYXREdXJhdGlvbiA9IChkdXJhdGlvbkluTXMpID0+IHtcbiAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcihkdXJhdGlvbkluTXMgLyA4NjQwMCk7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKGR1cmF0aW9uSW5NcyAvIDM2MDApO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChkdXJhdGlvbkluTXMgJSAzNjAwKSAvIDYwKTtcbiAgICBjb25zdCBzZWNvbmRzID0gZHVyYXRpb25Jbk1zICUgNjA7XG4gICAgcmV0dXJuIGAke2RheXMgPyBkYXlzICsgJyAnIDogJyd9JHtob3VycyA/IGhvdXJzICsgJzonIDogJyd9JHttaW51dGVzIDwgMTAgPyAnMCcgOiAnJ30ke21pbnV0ZXN9OiR7c2Vjb25kcyA8IDEwID8gJzAnIDogJyd9JHtzZWNvbmRzfWA7XG59O1xuXG5jb25zdCBHUk9VUF9TSVpFID0gMTY7XG5jb25zdCBQYWdpbmF0ZWRHcmlkTGF5b3V0R3JvdXAgPSAoeyBncm91cCwgVmlkZW9QbGFjZWhvbGRlciwgUGFydGljaXBhbnRWaWV3VUksIH0pID0+IHtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYWdpbmF0ZWQtZ3JpZC1sYXlvdXRfX2dyb3VwJywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fcGFnaW5hdGVkLWdyaWQtbGF5b3V0LS1vbmUnOiBncm91cC5sZW5ndGggPT09IDEsXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19wYWdpbmF0ZWQtZ3JpZC1sYXlvdXQtLXR3by1mb3VyJzogZ3JvdXAubGVuZ3RoID49IDIgJiYgZ3JvdXAubGVuZ3RoIDw9IDQsXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19wYWdpbmF0ZWQtZ3JpZC1sYXlvdXQtLWZpdmUtbmluZSc6IGdyb3VwLmxlbmd0aCA+PSA1ICYmIGdyb3VwLmxlbmd0aCA8PSA5LFxuICAgICAgICB9KSwgY2hpbGRyZW46IGdyb3VwLm1hcCgocGFydGljaXBhbnQpID0+IChqc3goUGFydGljaXBhbnRWaWV3LCB7IHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudCwgbXV0ZUF1ZGlvOiB0cnVlLCBWaWRlb1BsYWNlaG9sZGVyOiBWaWRlb1BsYWNlaG9sZGVyLCBQYXJ0aWNpcGFudFZpZXdVSTogUGFydGljaXBhbnRWaWV3VUkgfSwgcGFydGljaXBhbnQuc2Vzc2lvbklkKSkpIH0pKTtcbn07XG5jb25zdCBQYWdpbmF0ZWRHcmlkTGF5b3V0ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBncm91cFNpemUgPSAocHJvcHMuZ3JvdXBTaXplIHx8IDApID4gMFxuICAgICAgICA/IHByb3BzLmdyb3VwU2l6ZSB8fCBHUk9VUF9TSVpFXG4gICAgICAgIDogR1JPVVBfU0laRSwgZXhjbHVkZUxvY2FsUGFydGljaXBhbnQgPSBmYWxzZSwgcGFnZUFycm93c1Zpc2libGUgPSB0cnVlLCBWaWRlb1BsYWNlaG9sZGVyLCBQYXJ0aWNpcGFudFZpZXdVSSA9IERlZmF1bHRQYXJ0aWNpcGFudFZpZXdVSSwgfSA9IHByb3BzO1xuICAgIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlKDApO1xuICAgIGNvbnN0IFtwYWdpbmF0ZWRHcmlkTGF5b3V0V3JhcHBlckVsZW1lbnQsIHNldFBhZ2luYXRlZEdyaWRMYXlvdXRXcmFwcGVyRWxlbWVudCxdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHVzZVBhcnRpY2lwYW50cywgdXNlUmVtb3RlUGFydGljaXBhbnRzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHVzZVBhcnRpY2lwYW50cygpO1xuICAgIGNvbnN0IHJlbW90ZVBhcnRpY2lwYW50cyA9IHVzZVJlbW90ZVBhcnRpY2lwYW50cygpO1xuICAgIHVzZVBhZ2luYXRlZExheW91dFNvcnRQcmVzZXQoY2FsbCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFwYWdpbmF0ZWRHcmlkTGF5b3V0V3JhcHBlckVsZW1lbnQgfHwgIWNhbGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSBjYWxsLnNldFZpZXdwb3J0KHBhZ2luYXRlZEdyaWRMYXlvdXRXcmFwcGVyRWxlbWVudCk7XG4gICAgICAgIHJldHVybiAoKSA9PiBjbGVhbnVwKCk7XG4gICAgfSwgW3BhZ2luYXRlZEdyaWRMYXlvdXRXcmFwcGVyRWxlbWVudCwgY2FsbF0pO1xuICAgIC8vIG9ubHkgdXNlZCB0byByZW5kZXIgdmlkZW8gZWxlbWVudHNcbiAgICBjb25zdCBwYXJ0aWNpcGFudEdyb3VwcyA9IHVzZU1lbW8oKCkgPT4gY2h1bmsoZXhjbHVkZUxvY2FsUGFydGljaXBhbnQgPyByZW1vdGVQYXJ0aWNpcGFudHMgOiBwYXJ0aWNpcGFudHMsIGdyb3VwU2l6ZSksIFtleGNsdWRlTG9jYWxQYXJ0aWNpcGFudCwgcmVtb3RlUGFydGljaXBhbnRzLCBwYXJ0aWNpcGFudHMsIGdyb3VwU2l6ZV0pO1xuICAgIGNvbnN0IHBhZ2VDb3VudCA9IHBhcnRpY2lwYW50R3JvdXBzLmxlbmd0aDtcbiAgICAvLyB1cGRhdGUgcGFnZSB3aGVuIHBhZ2UgY291bnQgaXMgcmVkdWNlZCBhbmQgc2VsZWN0ZWQgcGFnZSBubyBsb25nZXIgZXhpc3RzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHBhZ2UgPiBwYWdlQ291bnQgLSAxKSB7XG4gICAgICAgICAgICBzZXRQYWdlKE1hdGgubWF4KDAsIHBhZ2VDb3VudCAtIDEpKTtcbiAgICAgICAgfVxuICAgIH0sIFtwYWdlLCBwYWdlQ291bnRdKTtcbiAgICBjb25zdCBzZWxlY3RlZEdyb3VwID0gcGFydGljaXBhbnRHcm91cHNbcGFnZV07XG4gICAgaWYgKCFjYWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYWdpbmF0ZWQtZ3JpZC1sYXlvdXRfX3dyYXBwZXJcIiwgcmVmOiBzZXRQYWdpbmF0ZWRHcmlkTGF5b3V0V3JhcHBlckVsZW1lbnQsIGNoaWxkcmVuOiBbanN4KFBhcnRpY2lwYW50c0F1ZGlvLCB7IHBhcnRpY2lwYW50czogcmVtb3RlUGFydGljaXBhbnRzIH0pLCBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFnaW5hdGVkLWdyaWQtbGF5b3V0XCIsIGNoaWxkcmVuOiBbcGFnZUFycm93c1Zpc2libGUgJiYgcGFnZUNvdW50ID4gMSAmJiAoanN4KEljb25CdXR0b24sIHsgaWNvbjogXCJjYXJldC1sZWZ0XCIsIGRpc2FibGVkOiBwYWdlID09PSAwLCBvbkNsaWNrOiAoKSA9PiBzZXRQYWdlKChjdXJyZW50UGFnZSkgPT4gTWF0aC5tYXgoMCwgY3VycmVudFBhZ2UgLSAxKSkgfSkpLCBzZWxlY3RlZEdyb3VwICYmIChqc3goUGFnaW5hdGVkR3JpZExheW91dEdyb3VwLCB7IGdyb3VwOiBzZWxlY3RlZEdyb3VwLCBWaWRlb1BsYWNlaG9sZGVyOiBWaWRlb1BsYWNlaG9sZGVyLCBQYXJ0aWNpcGFudFZpZXdVSTogUGFydGljaXBhbnRWaWV3VUkgfSkpLCBwYWdlQXJyb3dzVmlzaWJsZSAmJiBwYWdlQ291bnQgPiAxICYmIChqc3goSWNvbkJ1dHRvbiwgeyBkaXNhYmxlZDogcGFnZSA9PT0gcGFnZUNvdW50IC0gMSwgaWNvbjogXCJjYXJldC1yaWdodFwiLCBvbkNsaWNrOiAoKSA9PiBzZXRQYWdlKChjdXJyZW50UGFnZSkgPT4gTWF0aC5taW4ocGFnZUNvdW50IC0gMSwgY3VycmVudFBhZ2UgKyAxKSkgfSkpXSB9KV0gfSkpO1xufTtcblBhZ2luYXRlZEdyaWRMYXlvdXQuZGlzcGxheU5hbWUgPSAnUGFnaW5hdGVkR3JpZExheW91dCc7XG5cbmNvbnN0IHVzZUNhbGN1bGF0ZUhhcmRMaW1pdCA9IChcbi8qKlxuICogRWxlbWVudCB0aGF0IHN0cmV0Y2hlcyB0byAxMDAlIG9mIHRoZSB3aG9sZSBsYXlvdXQgY29tcG9uZW50XG4gKi9cbndyYXBwZXJFbGVtZW50LCBcbi8qKlxuICogRWxlbWVudCB0aGF0IGRpcmVjdGx5IGhvc3RzIGluZGl2aWR1YWwgYFBhcnRpY2lwYW50Vmlld2AgKG9yIHdyYXBwZXIpIGVsZW1lbnRzXG4gKi9cbmhvc3RFbGVtZW50LCBsaW1pdCkgPT4ge1xuICAgIGNvbnN0IFtjYWxjdWxhdGVkTGltaXQsIHNldENhbGN1bGF0ZWRMaW1pdF0gPSB1c2VTdGF0ZSh7XG4gICAgICAgIHZlcnRpY2FsOiB0eXBlb2YgbGltaXQgPT09ICdudW1iZXInID8gbGltaXQgOiBudWxsLFxuICAgICAgICBob3Jpem9udGFsOiB0eXBlb2YgbGltaXQgPT09ICdudW1iZXInID8gbGltaXQgOiBudWxsLFxuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaG9zdEVsZW1lbnQgfHxcbiAgICAgICAgICAgICF3cmFwcGVyRWxlbWVudCB8fFxuICAgICAgICAgICAgdHlwZW9mIGxpbWl0ID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGxpbWl0ID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGNoaWxkV2lkdGggPSBudWxsO1xuICAgICAgICBsZXQgY2hpbGRIZWlnaHQgPSBudWxsO1xuICAgICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIC8vIHRoaXMgcGFydCBzaG91bGQgaWRlYWxseSBydW4gYXMgbGl0dGxlIHRpbWVzIGFzIHBvc3NpYmxlXG4gICAgICAgICAgICAvLyBnZXQgY2hpbGQgbWVhc3VyZW1lbnRzIGFuZCBkaXNjb25uZWN0XG4gICAgICAgICAgICAvLyBkb2VzIG5vdCBjb25zaWRlciBkeW5hbWljYWxseSBzaXplZCBjaGlsZHJlblxuICAgICAgICAgICAgLy8gdGhpcyBob29rIGlzIGZvciBTcGVha2VyTGF5b3V0IHVzZSBvbmx5LCB3aGVyZSBjaGlsZHJlbiBpbiB0aGUgYmFyIGFyZSBmaXhlZCBzaXplXG4gICAgICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBob3N0RWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZEhlaWdodCA9IGNoaWxkLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRXaWR0aCA9IGNoaWxkLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoaG9zdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGtlZXAgdGhlIHN0YXRlIGF0IHsgdmVydGljYWw6IDEsIGhvcml6b250YWw6IDEgfVxuICAgICAgICAgICAgLy8gdW50aWwgd2UgZ2V0IHRoZSBwcm9wZXIgY2hpbGQgbWVhc3VyZW1lbnRzXG4gICAgICAgICAgICBpZiAoY2hpbGRIZWlnaHQgPT09IG51bGwgfHwgY2hpbGRXaWR0aCA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB2ZXJ0aWNhbCA9IE1hdGguZmxvb3Iod3JhcHBlckVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gY2hpbGRIZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IE1hdGguZmxvb3Iod3JhcHBlckVsZW1lbnQuY2xpZW50V2lkdGggLyBjaGlsZFdpZHRoKTtcbiAgICAgICAgICAgIHNldENhbGN1bGF0ZWRMaW1pdCgocHYpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHYudmVydGljYWwgIT09IHZlcnRpY2FsIHx8IHB2Lmhvcml6b250YWwgIT09IGhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZlcnRpY2FsLCBob3Jpem9udGFsIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB2O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHdyYXBwZXJFbGVtZW50KTtcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShob3N0RWxlbWVudCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH07XG4gICAgfSwgW2hvc3RFbGVtZW50LCBsaW1pdCwgd3JhcHBlckVsZW1lbnRdKTtcbiAgICByZXR1cm4gY2FsY3VsYXRlZExpbWl0O1xufTtcblxuY29uc3QgRGVmYXVsdFBhcnRpY2lwYW50Vmlld1VJQmFyID0gKCkgPT4gKGpzeChEZWZhdWx0UGFydGljaXBhbnRWaWV3VUksIHsgbWVudVBsYWNlbWVudDogXCJ0b3AtZW5kXCIgfSkpO1xuY29uc3QgU3BlYWtlckxheW91dCA9ICh7IFBhcnRpY2lwYW50Vmlld1VJQmFyID0gRGVmYXVsdFBhcnRpY2lwYW50Vmlld1VJQmFyLCBQYXJ0aWNpcGFudFZpZXdVSVNwb3RsaWdodCA9IERlZmF1bHRQYXJ0aWNpcGFudFZpZXdVSSwgVmlkZW9QbGFjZWhvbGRlciwgcGFydGljaXBhbnRzQmFyUG9zaXRpb24gPSAnYm90dG9tJywgcGFydGljaXBhbnRzQmFyTGltaXQsIGV4Y2x1ZGVMb2NhbFBhcnRpY2lwYW50ID0gZmFsc2UsIHBhZ2VBcnJvd3NWaXNpYmxlID0gdHJ1ZSwgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VQYXJ0aWNpcGFudHMsIHVzZVJlbW90ZVBhcnRpY2lwYW50cyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBhbGxQYXJ0aWNpcGFudHMgPSB1c2VQYXJ0aWNpcGFudHMoKTtcbiAgICBjb25zdCByZW1vdGVQYXJ0aWNpcGFudHMgPSB1c2VSZW1vdGVQYXJ0aWNpcGFudHMoKTtcbiAgICBjb25zdCBbcGFydGljaXBhbnRJblNwb3RsaWdodCwgLi4ub3RoZXJQYXJ0aWNpcGFudHNdID0gZXhjbHVkZUxvY2FsUGFydGljaXBhbnRcbiAgICAgICAgPyByZW1vdGVQYXJ0aWNpcGFudHNcbiAgICAgICAgOiBhbGxQYXJ0aWNpcGFudHM7XG4gICAgY29uc3QgW3BhcnRpY2lwYW50c0JhcldyYXBwZXJFbGVtZW50LCBzZXRQYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbcGFydGljaXBhbnRzQmFyRWxlbWVudCwgc2V0UGFydGljaXBhbnRzQmFyRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbYnV0dG9uc1dyYXBwZXJFbGVtZW50LCBzZXRCdXR0b25zV3JhcHBlckVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgaXNTcGVha2VyU2NyZWVuU2hhcmluZyA9IHBhcnRpY2lwYW50SW5TcG90bGlnaHQgJiYgaGFzU2NyZWVuU2hhcmUocGFydGljaXBhbnRJblNwb3RsaWdodCk7XG4gICAgY29uc3QgaGFyZExpbWl0ID0gdXNlQ2FsY3VsYXRlSGFyZExpbWl0KGJ1dHRvbnNXcmFwcGVyRWxlbWVudCwgcGFydGljaXBhbnRzQmFyRWxlbWVudCwgcGFydGljaXBhbnRzQmFyTGltaXQpO1xuICAgIGNvbnN0IGlzVmVydGljYWwgPSBwYXJ0aWNpcGFudHNCYXJQb3NpdGlvbiA9PT0gJ2xlZnQnIHx8IHBhcnRpY2lwYW50c0JhclBvc2l0aW9uID09PSAncmlnaHQnO1xuICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IHBhcnRpY2lwYW50c0JhclBvc2l0aW9uID09PSAndG9wJyB8fCBwYXJ0aWNpcGFudHNCYXJQb3NpdGlvbiA9PT0gJ2JvdHRvbSc7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFwYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudCB8fCAhY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgY2xlYW51cCA9IGNhbGwuc2V0Vmlld3BvcnQocGFydGljaXBhbnRzQmFyV3JhcHBlckVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYW51cCgpO1xuICAgIH0sIFtwYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudCwgY2FsbF0pO1xuICAgIGNvbnN0IGlzT25lT25PbmVDYWxsID0gYWxsUGFydGljaXBhbnRzLmxlbmd0aCA9PT0gMjtcbiAgICB1c2VTcGVha2VyTGF5b3V0U29ydFByZXNldChjYWxsLCBpc09uZU9uT25lQ2FsbCk7XG4gICAgbGV0IHBhcnRpY2lwYW50c1dpdGhBcHBsaWVkTGltaXQgPSBvdGhlclBhcnRpY2lwYW50cztcbiAgICBjb25zdCBoYXJkTGltaXRUb0FwcGx5ID0gaXNWZXJ0aWNhbFxuICAgICAgICA/IGhhcmRMaW1pdC52ZXJ0aWNhbFxuICAgICAgICA6IGhhcmRMaW1pdC5ob3Jpem9udGFsO1xuICAgIGlmICh0eXBlb2YgcGFydGljaXBhbnRzQmFyTGltaXQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIGhhcmRMaW1pdFRvQXBwbHkgIT09IG51bGwpIHtcbiAgICAgICAgcGFydGljaXBhbnRzV2l0aEFwcGxpZWRMaW1pdCA9IG90aGVyUGFydGljaXBhbnRzLnNsaWNlKDAsIFxuICAgICAgICAvLyBzdWJ0cmFjdCAxIGlmIHNwZWFrZXIgaXMgc2hhcmluZyBzY3JlZW4gYXNcbiAgICAgICAgLy8gdGhhdCBvbmUgaXMgcmVuZGVyZWQgaW5kZXBlbmRlbnRseSBmcm9tIG90aGVyUGFydGljaXBhbnRzIGFycmF5XG4gICAgICAgIGhhcmRMaW1pdFRvQXBwbHkgLSAoaXNTcGVha2VyU2NyZWVuU2hhcmluZyA/IDEgOiAwKSk7XG4gICAgfVxuICAgIGlmICghY2FsbClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3dyYXBwZXJcIiwgY2hpbGRyZW46IFtqc3goUGFydGljaXBhbnRzQXVkaW8sIHsgcGFydGljaXBhbnRzOiByZW1vdGVQYXJ0aWNpcGFudHMgfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fc3BlYWtlci1sYXlvdXQnLCBwYXJ0aWNpcGFudHNCYXJQb3NpdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICBgc3RyLXZpZGVvX19zcGVha2VyLWxheW91dC0tdmFyaWFudC0ke3BhcnRpY2lwYW50c0JhclBvc2l0aW9ufWApLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19zcG90bGlnaHRcIiwgY2hpbGRyZW46IHBhcnRpY2lwYW50SW5TcG90bGlnaHQgJiYgKGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50SW5TcG90bGlnaHQsIG11dGVBdWRpbzogdHJ1ZSwgdHJhY2tUeXBlOiBpc1NwZWFrZXJTY3JlZW5TaGFyaW5nID8gJ3NjcmVlblNoYXJlVHJhY2snIDogJ3ZpZGVvVHJhY2snLCBQYXJ0aWNpcGFudFZpZXdVSTogUGFydGljaXBhbnRWaWV3VUlTcG90bGlnaHQsIFZpZGVvUGxhY2Vob2xkZXI6IFZpZGVvUGxhY2Vob2xkZXIgfSkpIH0pLCBwYXJ0aWNpcGFudHNXaXRoQXBwbGllZExpbWl0Lmxlbmd0aCA+IDAgJiYgcGFydGljaXBhbnRzQmFyUG9zaXRpb24gJiYgKGpzeHMoXCJkaXZcIiwgeyByZWY6IHNldEJ1dHRvbnNXcmFwcGVyRWxlbWVudCwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50cy1iYXItYnV0dG9ucy13cmFwcGVyXCIsIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50cy1iYXItd3JhcHBlclwiLCByZWY6IHNldFBhcnRpY2lwYW50c0JhcldyYXBwZXJFbGVtZW50LCBjaGlsZHJlbjoganN4cyhcImRpdlwiLCB7IHJlZjogc2V0UGFydGljaXBhbnRzQmFyRWxlbWVudCwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50cy1iYXJcIiwgY2hpbGRyZW46IFtpc1NwZWFrZXJTY3JlZW5TaGFyaW5nICYmIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVha2VyLWxheW91dF9fcGFydGljaXBhbnQtdGlsZVwiLCBjaGlsZHJlbjoganN4KFBhcnRpY2lwYW50VmlldywgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnRJblNwb3RsaWdodCwgUGFydGljaXBhbnRWaWV3VUk6IFBhcnRpY2lwYW50Vmlld1VJQmFyLCBWaWRlb1BsYWNlaG9sZGVyOiBWaWRlb1BsYWNlaG9sZGVyLCBtdXRlQXVkaW86IHRydWUgfSkgfSwgcGFydGljaXBhbnRJblNwb3RsaWdodC5zZXNzaW9uSWQpKSwgcGFydGljaXBhbnRzV2l0aEFwcGxpZWRMaW1pdC5tYXAoKHBhcnRpY2lwYW50KSA9PiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50LXRpbGVcIiwgY2hpbGRyZW46IGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudFZpZXdVSTogUGFydGljaXBhbnRWaWV3VUlCYXIsIFZpZGVvUGxhY2Vob2xkZXI6IFZpZGVvUGxhY2Vob2xkZXIsIG11dGVBdWRpbzogdHJ1ZSB9KSB9LCBwYXJ0aWNpcGFudC5zZXNzaW9uSWQpKSldIH0pIH0pLCBwYWdlQXJyb3dzVmlzaWJsZSAmJiBpc1ZlcnRpY2FsICYmIChqc3goVmVydGljYWxTY3JvbGxCdXR0b25zLCB7IHNjcm9sbFdyYXBwZXI6IHBhcnRpY2lwYW50c0JhcldyYXBwZXJFbGVtZW50IH0pKSwgcGFnZUFycm93c1Zpc2libGUgJiYgaXNIb3Jpem9udGFsICYmIChqc3goSG9yaXpvbnRhbFNjcm9sbEJ1dHRvbnMsIHsgc2Nyb2xsV3JhcHBlcjogcGFydGljaXBhbnRzQmFyV3JhcHBlckVsZW1lbnQgfSkpXSB9KSldIH0pXSB9KSk7XG59O1xuU3BlYWtlckxheW91dC5kaXNwbGF5TmFtZSA9ICdTcGVha2VyTGF5b3V0JztcbmNvbnN0IEhvcml6b250YWxTY3JvbGxCdXR0b25zID0gKHsgc2Nyb2xsV3JhcHBlciwgfSkgPT4ge1xuICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gdXNlSG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uKHNjcm9sbFdyYXBwZXIpO1xuICAgIGNvbnN0IHNjcm9sbFN0YXJ0Q2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBzY3JvbGxXcmFwcGVyPy5zY3JvbGxCeSh7IGxlZnQ6IC0xNTAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNjcm9sbEVuZENsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgc2Nyb2xsV3JhcHBlcj8uc2Nyb2xsQnkoeyBsZWZ0OiAxNTAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9O1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW3Njcm9sbFBvc2l0aW9uICYmIHNjcm9sbFBvc2l0aW9uICE9PSAnc3RhcnQnICYmIChqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBzY3JvbGxTdGFydENsaWNrSGFuZGxlciwgaWNvbjogXCJjYXJldC1sZWZ0XCIsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19wYXJ0aWNpcGFudHMtYmFyLS1idXR0b24tbGVmdFwiIH0pKSwgc2Nyb2xsUG9zaXRpb24gJiYgc2Nyb2xsUG9zaXRpb24gIT09ICdlbmQnICYmIChqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBzY3JvbGxFbmRDbGlja0hhbmRsZXIsIGljb246IFwiY2FyZXQtcmlnaHRcIiwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50cy1iYXItLWJ1dHRvbi1yaWdodFwiIH0pKV0gfSkpO1xufTtcbmNvbnN0IFZlcnRpY2FsU2Nyb2xsQnV0dG9ucyA9ICh7IHNjcm9sbFdyYXBwZXIsIH0pID0+IHtcbiAgICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHVzZVZlcnRpY2FsU2Nyb2xsUG9zaXRpb24oc2Nyb2xsV3JhcHBlcik7XG4gICAgY29uc3Qgc2Nyb2xsVG9wQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBzY3JvbGxXcmFwcGVyPy5zY3JvbGxCeSh7IHRvcDogLTE1MCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2Nyb2xsQm90dG9tQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBzY3JvbGxXcmFwcGVyPy5zY3JvbGxCeSh7IHRvcDogMTUwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtzY3JvbGxQb3NpdGlvbiAmJiBzY3JvbGxQb3NpdGlvbiAhPT0gJ3RvcCcgJiYgKGpzeChJY29uQnV0dG9uLCB7IG9uQ2xpY2s6IHNjcm9sbFRvcENsaWNrSGFuZGxlciwgaWNvbjogXCJjYXJldC11cFwiLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVha2VyLWxheW91dF9fcGFydGljaXBhbnRzLWJhci0tYnV0dG9uLXRvcFwiIH0pKSwgc2Nyb2xsUG9zaXRpb24gJiYgc2Nyb2xsUG9zaXRpb24gIT09ICdib3R0b20nICYmIChqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBzY3JvbGxCb3R0b21DbGlja0hhbmRsZXIsIGljb246IFwiY2FyZXQtZG93blwiLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVha2VyLWxheW91dF9fcGFydGljaXBhbnRzLWJhci0tYnV0dG9uLWJvdHRvbVwiIH0pKV0gfSkpO1xufTtcblxuY29uc3QgTGl2ZXN0cmVhbVBsYXllciA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgY2FsbFR5cGUsIGNhbGxJZCwgbGF5b3V0UHJvcHMgfSA9IHByb3BzO1xuICAgIGNvbnN0IGNsaWVudCA9IHVzZVN0cmVhbVZpZGVvQ2xpZW50KCk7XG4gICAgY29uc3QgW2NhbGwsIHNldENhbGxdID0gdXNlU3RhdGUoKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNsaWVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgbXlDYWxsID0gY2xpZW50LmNhbGwoY2FsbFR5cGUsIGNhbGxJZCk7XG4gICAgICAgIHNldENhbGwobXlDYWxsKTtcbiAgICAgICAgbXlDYWxsLmpvaW4oKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGpvaW4gY2FsbCcsIGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIG15Q2FsbC5sZWF2ZSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxlYXZlIGNhbGwnLCBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0Q2FsbCh1bmRlZmluZWQpO1xuICAgICAgICB9O1xuICAgIH0sIFtjYWxsSWQsIGNhbGxUeXBlLCBjbGllbnRdKTtcbiAgICByZXR1cm4gKGpzeChTdHJlYW1DYWxsLCB7IGNhbGw6IGNhbGwsIGNoaWxkcmVuOiBqc3goTGl2ZXN0cmVhbUxheW91dCwgeyAuLi5sYXlvdXRQcm9wcyB9KSB9KSk7XG59O1xuXG5jb25zdCBbbWFqb3IsIG1pbm9yLCBwYXRjaF0gPSAoXCIxLjQuM1wiKS5zcGxpdCgnLicpO1xuc2V0U2RrSW5mbyh7XG4gICAgdHlwZTogU2Z1TW9kZWxzLlNka1R5cGUuUkVBQ1QsXG4gICAgbWFqb3IsXG4gICAgbWlub3IsXG4gICAgcGF0Y2gsXG59KTtcblxuZXhwb3J0IHsgQWNjZXB0Q2FsbEJ1dHRvbiwgQXVkaW8sIEF2YXRhciwgQXZhdGFyRmFsbGJhY2ssIEJhY2tncm91bmRGaWx0ZXJzUHJvdmlkZXIsIEJhc2VWaWRlbywgQ2FsbENvbnRyb2xzLCBDYWxsUGFydGljaXBhbnRMaXN0aW5nLCBDYWxsUGFydGljaXBhbnRMaXN0aW5nSXRlbSwgQ2FsbFBhcnRpY2lwYW50c0xpc3QsIENhbGxQcmV2aWV3LCBDYWxsUmVjb3JkaW5nTGlzdCwgQ2FsbFJlY29yZGluZ0xpc3RIZWFkZXIsIENhbGxSZWNvcmRpbmdMaXN0SXRlbSwgQ2FsbFN0YXRzLCBDYWxsU3RhdHNCdXR0b24sIENhbmNlbENhbGxCdXR0b24sIENhbmNlbENhbGxDb25maXJtQnV0dG9uLCBDb21wb3NpdGVCdXR0b24sIERlZmF1bHRQYXJ0aWNpcGFudFZpZXdVSSwgRGVmYXVsdFJlYWN0aW9uc01lbnUsIERlZmF1bHRTY3JlZW5TaGFyZU92ZXJsYXksIERlZmF1bHRWaWRlb1BsYWNlaG9sZGVyLCBEZXZpY2VTZWxlY3RvciwgRGV2aWNlU2VsZWN0b3JBdWRpb0lucHV0LCBEZXZpY2VTZWxlY3RvckF1ZGlvT3V0cHV0LCBEZXZpY2VTZWxlY3RvclZpZGVvLCBEZXZpY2VTZXR0aW5ncywgRHJvcERvd25TZWxlY3QsIERyb3BEb3duU2VsZWN0T3B0aW9uLCBFbXB0eUNhbGxSZWNvcmRpbmdMaXN0aW5nLCBHZW5lcmljTWVudSwgR2VuZXJpY01lbnVCdXR0b25JdGVtLCBJY29uLCBJY29uQnV0dG9uLCBMaXZlc3RyZWFtTGF5b3V0LCBMaXZlc3RyZWFtUGxheWVyLCBMb2FkaW5nQ2FsbFJlY29yZGluZ0xpc3RpbmcsIExvYWRpbmdJbmRpY2F0b3IsIE1lbnVUb2dnbGUsIE1lbnVWaXN1YWxUeXBlLCBOb2lzZUNhbmNlbGxhdGlvblByb3ZpZGVyLCBOb3RpZmljYXRpb24sIFBhZ2luYXRlZEdyaWRMYXlvdXQsIFBhcnRpY2lwYW50QWN0aW9uc0NvbnRleHRNZW51LCBQYXJ0aWNpcGFudERldGFpbHMsIFBhcnRpY2lwYW50VmlldywgUGFydGljaXBhbnRWaWV3Q29udGV4dCwgUGFydGljaXBhbnRzQXVkaW8sIFBlcm1pc3Npb25Ob3RpZmljYXRpb24sIFBlcm1pc3Npb25SZXF1ZXN0TGlzdCwgUGVybWlzc2lvblJlcXVlc3RzLCBSZWFjdGlvbnNCdXR0b24sIFJlY29yZENhbGxCdXR0b24sIFJlY29yZENhbGxDb25maXJtYXRpb25CdXR0b24sIFJlY29yZGluZ0luUHJvZ3Jlc3NOb3RpZmljYXRpb24sIFJpbmdpbmdDYWxsLCBSaW5naW5nQ2FsbENvbnRyb2xzLCBTY3JlZW5TaGFyZUJ1dHRvbiwgU2VhcmNoSW5wdXQsIFNlYXJjaFJlc3VsdHMsIFNwZWFrZXJMYXlvdXQsIFNwZWFraW5nV2hpbGVNdXRlZE5vdGlmaWNhdGlvbiwgU3BlZWNoSW5kaWNhdG9yLCBTdGF0Q2FyZCwgU3RyZWFtQ2FsbCwgU3RyZWFtVGhlbWUsIFN0cmVhbVZpZGVvLCBUZXh0QnV0dG9uLCBUb2dnbGVBdWRpb091dHB1dEJ1dHRvbiwgVG9nZ2xlQXVkaW9QcmV2aWV3QnV0dG9uLCBUb2dnbGVBdWRpb1B1Ymxpc2hpbmdCdXR0b24sIFRvZ2dsZVZpZGVvUHJldmlld0J1dHRvbiwgVG9nZ2xlVmlkZW9QdWJsaXNoaW5nQnV0dG9uLCBUb29sdGlwLCBWaWRlbyQxIGFzIFZpZGVvLCBWaWRlb1ByZXZpZXcsIFdpdGhUb29sdGlwLCBkZWZhdWx0UmVhY3Rpb25zLCB0cmFuc2xhdGlvbnMsIHVzZUJhY2tncm91bmRGaWx0ZXJzLCB1c2VIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24sIHVzZU1lbnVDb250ZXh0LCB1c2VOb2lzZUNhbmNlbGxhdGlvbiwgdXNlUGFydGljaXBhbnRWaWV3Q29udGV4dCwgdXNlUGVyc2lzdGVkRGV2aWNlUHJlZmVyZW5jZXMsIHVzZVJlcXVlc3RQZXJtaXNzaW9uLCB1c2VUcmFja0VsZW1lbnRWaXNpYmlsaXR5LCB1c2VWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-react-sdk/dist/index.es.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stream-io/video-react-sdk/dist/latency-chart-Bj5OSYzg.es.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-sdk/dist/latency-chart-Bj5OSYzg.es.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CallStatsLatencyChart)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chart.js */ \"(ssr)/./node_modules/chart.js/dist/chart.js\");\n/* harmony import */ var react_chartjs_2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-chartjs-2 */ \"(ssr)/./node_modules/react-chartjs-2/dist/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n\n// NOTE: this is a side effect by definition, but this component is\n// isolated in a separate chunk, and it won't affect the rest of the app.\n// See CallStats.tsx for more details.\nchart_js__WEBPACK_IMPORTED_MODULE_2__.Chart.register(chart_js__WEBPACK_IMPORTED_MODULE_2__.CategoryScale, chart_js__WEBPACK_IMPORTED_MODULE_2__.LinearScale, chart_js__WEBPACK_IMPORTED_MODULE_2__.LineElement, chart_js__WEBPACK_IMPORTED_MODULE_2__.PointElement);\nconst CallStatsLatencyChart = (props) => {\n    const { values } = props;\n    let max = 0;\n    const data = {\n        labels: values.map((point) => {\n            const date = new Date(point.x * 1000);\n            return `${date.getHours()}:${date.getMinutes()}`;\n        }),\n        datasets: [\n            {\n                data: values.map((point) => {\n                    const { y } = point;\n                    max = Math.max(max, y);\n                    return point;\n                }),\n                borderColor: '#00e2a1',\n                backgroundColor: '#00e2a1',\n            },\n        ],\n    };\n    const options = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => getLineOptions(max), [max]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"str-video__call-stats-line-chart-container\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_chartjs_2__WEBPACK_IMPORTED_MODULE_3__.Line, { options: options, data: data, className: \"str-video__call-stats__latencychart\" }) }));\n};\nconst getLineOptions = (max) => ({\n    maintainAspectRatio: false,\n    animation: { duration: 0 },\n    elements: {\n        line: { borderWidth: 1 },\n        point: { radius: 2 },\n    },\n    scales: {\n        y: {\n            position: 'right',\n            stacked: true,\n            min: 0,\n            max: Math.max(180, Math.ceil((max + 10) / 10) * 10),\n            grid: { display: true, color: '#979ca0' },\n            ticks: { stepSize: 30 },\n        },\n        x: {\n            grid: { display: false },\n            ticks: { display: false },\n        },\n    },\n});\n\n\n//# sourceMappingURL=latency-chart-Bj5OSYzg.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1zZGsvZGlzdC9sYXRlbmN5LWNoYXJ0LUJqNU9TWXpnLmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0M7QUFDZ0Q7QUFDakQ7QUFDUDs7QUFFaEM7QUFDQTtBQUNBO0FBQ0EsMkNBQUssVUFBVSxtREFBYSxFQUFFLGlEQUFXLEVBQUUsaURBQVcsRUFBRSxrREFBWTtBQUNwRTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnQkFBZ0IsR0FBRyxrQkFBa0I7QUFDM0QsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixJQUFJO0FBQ2hDO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLDhDQUFPO0FBQzNCLFlBQVksc0RBQUcsVUFBVSxtRUFBbUUsc0RBQUcsQ0FBQyxpREFBSSxJQUFJLGdGQUFnRixHQUFHO0FBQzNMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQyxpQkFBaUIsV0FBVztBQUM1QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlDQUFpQztBQUNyRCxxQkFBcUIsY0FBYztBQUNuQyxTQUFTO0FBQ1Q7QUFDQSxvQkFBb0IsZ0JBQWdCO0FBQ3BDLHFCQUFxQixnQkFBZ0I7QUFDckMsU0FBUztBQUNULEtBQUs7QUFDTCxDQUFDOztBQUUyQztBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb21pZS8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL3ZpZGVvLXJlYWN0LXNkay9kaXN0L2xhdGVuY3ktY2hhcnQtQmo1T1NZemcuZXMuanM/ZGZkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgeyBDaGFydCwgQ2F0ZWdvcnlTY2FsZSwgTGluZWFyU2NhbGUsIExpbmVFbGVtZW50LCBQb2ludEVsZW1lbnQgfSBmcm9tICdjaGFydC5qcyc7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSAncmVhY3QtY2hhcnRqcy0yJztcbmltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5cbi8vIE5PVEU6IHRoaXMgaXMgYSBzaWRlIGVmZmVjdCBieSBkZWZpbml0aW9uLCBidXQgdGhpcyBjb21wb25lbnQgaXNcbi8vIGlzb2xhdGVkIGluIGEgc2VwYXJhdGUgY2h1bmssIGFuZCBpdCB3b24ndCBhZmZlY3QgdGhlIHJlc3Qgb2YgdGhlIGFwcC5cbi8vIFNlZSBDYWxsU3RhdHMudHN4IGZvciBtb3JlIGRldGFpbHMuXG5DaGFydC5yZWdpc3RlcihDYXRlZ29yeVNjYWxlLCBMaW5lYXJTY2FsZSwgTGluZUVsZW1lbnQsIFBvaW50RWxlbWVudCk7XG5jb25zdCBDYWxsU3RhdHNMYXRlbmN5Q2hhcnQgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHZhbHVlcyB9ID0gcHJvcHM7XG4gICAgbGV0IG1heCA9IDA7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgbGFiZWxzOiB2YWx1ZXMubWFwKChwb2ludCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBvaW50LnggKiAxMDAwKTtcbiAgICAgICAgICAgIHJldHVybiBgJHtkYXRlLmdldEhvdXJzKCl9OiR7ZGF0ZS5nZXRNaW51dGVzKCl9YDtcbiAgICAgICAgfSksXG4gICAgICAgIGRhdGFzZXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogdmFsdWVzLm1hcCgocG9pbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB5IH0gPSBwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCB5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnIzAwZTJhMScsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwZTJhMScsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH07XG4gICAgY29uc3Qgb3B0aW9ucyA9IHVzZU1lbW8oKCkgPT4gZ2V0TGluZU9wdGlvbnMobWF4KSwgW21heF0pO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0cy1saW5lLWNoYXJ0LWNvbnRhaW5lclwiLCBjaGlsZHJlbjoganN4KExpbmUsIHsgb3B0aW9uczogb3B0aW9ucywgZGF0YTogZGF0YSwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fbGF0ZW5jeWNoYXJ0XCIgfSkgfSkpO1xufTtcbmNvbnN0IGdldExpbmVPcHRpb25zID0gKG1heCkgPT4gKHtcbiAgICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSxcbiAgICBhbmltYXRpb246IHsgZHVyYXRpb246IDAgfSxcbiAgICBlbGVtZW50czoge1xuICAgICAgICBsaW5lOiB7IGJvcmRlcldpZHRoOiAxIH0sXG4gICAgICAgIHBvaW50OiB7IHJhZGl1czogMiB9LFxuICAgIH0sXG4gICAgc2NhbGVzOiB7XG4gICAgICAgIHk6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxuICAgICAgICAgICAgc3RhY2tlZDogdHJ1ZSxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogTWF0aC5tYXgoMTgwLCBNYXRoLmNlaWwoKG1heCArIDEwKSAvIDEwKSAqIDEwKSxcbiAgICAgICAgICAgIGdyaWQ6IHsgZGlzcGxheTogdHJ1ZSwgY29sb3I6ICcjOTc5Y2EwJyB9LFxuICAgICAgICAgICAgdGlja3M6IHsgc3RlcFNpemU6IDMwIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHg6IHtcbiAgICAgICAgICAgIGdyaWQ6IHsgZGlzcGxheTogZmFsc2UgfSxcbiAgICAgICAgICAgIHRpY2tzOiB7IGRpc3BsYXk6IGZhbHNlIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbn0pO1xuXG5leHBvcnQgeyBDYWxsU3RhdHNMYXRlbmN5Q2hhcnQgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGF0ZW5jeS1jaGFydC1CajVPU1l6Zy5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-react-sdk/dist/latency-chart-Bj5OSYzg.es.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@stream-io/video-react-sdk/dist/css/styles.css":
/*!*********************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-sdk/dist/css/styles.css ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"6726bac0cc5d\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1zZGsvZGlzdC9jc3Mvc3R5bGVzLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvb21pZS8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL3ZpZGVvLXJlYWN0LXNkay9kaXN0L2Nzcy9zdHlsZXMuY3NzPzA0MTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI2NzI2YmFjMGNjNWRcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@stream-io/video-react-sdk/dist/css/styles.css\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@stream-io/node-sdk/dist/index.es.js":
/*!***********************************************************!*\
  !*** ./node_modules/@stream-io/node-sdk/dist/index.es.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OwnCapability: () => (/* binding */ OwnCapability),\n/* harmony export */   StreamCall: () => (/* binding */ StreamCall),\n/* harmony export */   StreamChannel: () => (/* binding */ StreamChannel),\n/* harmony export */   StreamChatClient: () => (/* binding */ StreamChatClient),\n/* harmony export */   StreamClient: () => (/* binding */ StreamClient),\n/* harmony export */   StreamVideoClient: () => (/* binding */ StreamVideoClient)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(action-browser)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(action-browser)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\nconst OwnCapability = {\n    BLOCK_USERS: 'block-users',\n    CHANGE_MAX_DURATION: 'change-max-duration',\n    CREATE_CALL: 'create-call',\n    CREATE_REACTION: 'create-reaction',\n    ENABLE_NOISE_CANCELLATION: 'enable-noise-cancellation',\n    END_CALL: 'end-call',\n    JOIN_BACKSTAGE: 'join-backstage',\n    JOIN_CALL: 'join-call',\n    JOIN_ENDED_CALL: 'join-ended-call',\n    MUTE_USERS: 'mute-users',\n    PIN_FOR_EVERYONE: 'pin-for-everyone',\n    READ_CALL: 'read-call',\n    REMOVE_CALL_MEMBER: 'remove-call-member',\n    SCREENSHARE: 'screenshare',\n    SEND_AUDIO: 'send-audio',\n    SEND_VIDEO: 'send-video',\n    START_BROADCAST_CALL: 'start-broadcast-call',\n    START_RECORD_CALL: 'start-record-call',\n    START_TRANSCRIPTION_CALL: 'start-transcription-call',\n    STOP_BROADCAST_CALL: 'stop-broadcast-call',\n    STOP_RECORD_CALL: 'stop-record-call',\n    STOP_TRANSCRIPTION_CALL: 'stop-transcription-call',\n    UPDATE_CALL: 'update-call',\n    UPDATE_CALL_MEMBER: 'update-call-member',\n    UPDATE_CALL_PERMISSIONS: 'update-call-permissions',\n    UPDATE_CALL_SETTINGS: 'update-call-settings',\n};\n\nfunction JWTUserToken(apiSecret, payload) {\n    // make sure we return a clear error when jwt is shimmed (ie. browser build)\n    if ((jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default()) == null || (jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign) == null) {\n        throw Error(`Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.`);\n    }\n    const opts = Object.assign({\n        algorithm: 'HS256',\n        noTimestamp: true,\n    });\n    if (payload.iat) {\n        opts.noTimestamp = false;\n    }\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, apiSecret, opts);\n}\nfunction JWTServerToken(apiSecret, jwtOptions = {}) {\n    const payload = {\n        server: true,\n    };\n    const opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, apiSecret, opts);\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nclass StreamError extends Error {\n    constructor(message, metadata, code, errorOptions) {\n        super(message, errorOptions);\n        this.metadata = metadata;\n        this.code = code;\n    }\n}\n\nconst getRateLimitFromResponseHeader = (responseHeaders) => {\n    const rateLimit = responseHeaders.has('x-ratelimit-limit')\n        ? +responseHeaders.get('x-ratelimit-limit')\n        : undefined;\n    const rateLimitRemaining = responseHeaders.has('x-ratelimit-remaining')\n        ? +responseHeaders.get('x-ratelimit-remaining')\n        : undefined;\n    const rateLimitReset = responseHeaders.has('x-ratelimit-reset')\n        ? new Date(+responseHeaders.get('x-ratelimit-reset') * 1000)\n        : undefined;\n    const result = {\n        rateLimit,\n        rateLimitRemaining,\n        rateLimitReset,\n    };\n    return result;\n};\n\nclass BaseApi {\n    constructor(apiConfig) {\n        this.apiConfig = apiConfig;\n        this.sendRequest = (method, url, pathParams, queryParams, body) => __awaiter(this, void 0, void 0, function* () {\n            queryParams = queryParams !== null && queryParams !== void 0 ? queryParams : {};\n            queryParams.api_key = this.apiConfig.apiKey;\n            const encodedParams = this.queryParamsStringify(queryParams);\n            if (pathParams) {\n                Object.keys(pathParams).forEach((paramName) => {\n                    url = url.replace(`{${paramName}}`, pathParams[paramName]);\n                });\n            }\n            url += `?${encodedParams}`;\n            const clientRequestId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n            const headers = {\n                Authorization: this.apiConfig.token,\n                'stream-auth-type': 'jwt',\n                'Content-Type': 'application/json',\n                'X-Stream-Client': 'stream-node-' + \"0.4.3\",\n                'Accept-Encoding': 'gzip',\n                'x-client-request-id': clientRequestId,\n            };\n            const signal = AbortSignal.timeout(this.apiConfig.timeout);\n            try {\n                const response = yield fetch(`${this.apiConfig.baseUrl}${url}`, {\n                    signal,\n                    method,\n                    body: JSON.stringify(body),\n                    headers,\n                });\n                const responseHeaders = response.headers;\n                const metadata = {\n                    clientRequestId,\n                    responseHeaders,\n                    responseCode: response.status,\n                    rateLimit: getRateLimitFromResponseHeader(responseHeaders),\n                };\n                if (response.status < 200 || response.status >= 300) {\n                    let error;\n                    try {\n                        error = (yield response.json());\n                    }\n                    catch (_) {\n                        throw new StreamError(`Stream error: ${response.status} - ${response.statusText}`, metadata, response.status);\n                    }\n                    throw new StreamError(`Stream error code ${error.code}: ${error.message}`, metadata, error.code, undefined);\n                }\n                const responseBody = (yield response.json());\n                return { body: responseBody, metadata };\n            }\n            catch (error) {\n                if (error instanceof StreamError) {\n                    throw error;\n                }\n                const metadata = {\n                    clientRequestId,\n                    responseCode: error.status,\n                };\n                if (error.name === 'AbortError' || error.name === 'TimeoutError') {\n                    throw new StreamError(`The request was aborted due to to the ${this.apiConfig.timeout}ms timeout, you can set the timeout in the StreamClient constructor`, metadata, undefined, error);\n                }\n                else {\n                    throw new StreamError(`The request failed due to an unexpected error`, metadata, error);\n                }\n            }\n        });\n        this.queryParamsStringify = (params) => {\n            const newParams = [];\n            for (const k in params) {\n                const param = params[k];\n                if (Array.isArray(param)) {\n                    newParams.push(`${k}=${encodeURIComponent(param.join(','))}`);\n                }\n                else if (param instanceof Date) {\n                    newParams.push(param.toISOString());\n                }\n                else if (typeof param === 'object') {\n                    newParams.push(`${k}=${encodeURIComponent(JSON.stringify(param))}`);\n                }\n                else {\n                    if (typeof param === 'string' ||\n                        typeof param === 'number' ||\n                        typeof param === 'boolean') {\n                        newParams.push(`${k}=${encodeURIComponent(param)}`);\n                    }\n                }\n            }\n            return newParams.join('&');\n        };\n    }\n}\n\nconst decoders = {};\nconst decodeDatetimeType = (input) => new Date(Math.floor(input / 1000000));\ndecoders.DatetimeType = decodeDatetimeType;\nconst decode = (typeMappings, input) => {\n    if (!input || Object.keys(typeMappings).length === 0)\n        return input;\n    Object.keys(typeMappings).forEach((key) => {\n        if (input[key] != null) {\n            if (typeMappings[key]) {\n                const decoder = decoders[typeMappings[key].type];\n                if (decoder) {\n                    if (typeMappings[key].isSingle) {\n                        input[key] = decoder(input[key]);\n                    }\n                    else {\n                        Object.keys(input[key]).forEach((k) => {\n                            input[key][k] = decoder(input[key][k]);\n                        });\n                    }\n                }\n            }\n        }\n    });\n    return input;\n};\ndecoders.ActionLog = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        review_queue_item: { type: 'ReviewQueueItem', isSingle: true },\n        target_user: { type: 'UserObject', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ActionLogResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        review_queue_item: { type: 'ReviewQueueItem', isSingle: true },\n        target_user: { type: 'UserResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.AppResponseFields = (input) => {\n    const typeMappings = {\n        call_types: { type: 'CallType', isSingle: false },\n        channel_configs: { type: 'ChannelConfig', isSingle: false },\n        push_notifications: { type: 'PushNotificationFields', isSingle: true },\n        revoke_tokens_issued_before: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.AutomodDetails = (input) => {\n    const typeMappings = {\n        result: { type: 'MessageModerationResult', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Ban = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        expires: { type: 'DatetimeType', isSingle: true },\n        channel: { type: 'Channel', isSingle: true },\n        created_by: { type: 'UserObject', isSingle: true },\n        target: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.BanResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        expires: { type: 'DatetimeType', isSingle: true },\n        banned_by: { type: 'UserResponse', isSingle: true },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.BlockListResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.BlockUsersResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.BlockedUserResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        blocked_user: { type: 'UserResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallParticipantResponse = (input) => {\n    const typeMappings = {\n        joined_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallRecording = (input) => {\n    const typeMappings = {\n        end_time: { type: 'DatetimeType', isSingle: true },\n        start_time: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        created_by: { type: 'UserResponse', isSingle: true },\n        ended_at: { type: 'DatetimeType', isSingle: true },\n        starts_at: { type: 'DatetimeType', isSingle: true },\n        session: { type: 'CallSessionResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallSessionResponse = (input) => {\n    const typeMappings = {\n        participants: { type: 'CallParticipantResponse', isSingle: false },\n        accepted_by: { type: 'DatetimeType', isSingle: false },\n        missed_by: { type: 'DatetimeType', isSingle: false },\n        rejected_by: { type: 'DatetimeType', isSingle: false },\n        ended_at: { type: 'DatetimeType', isSingle: true },\n        live_ended_at: { type: 'DatetimeType', isSingle: true },\n        live_started_at: { type: 'DatetimeType', isSingle: true },\n        started_at: { type: 'DatetimeType', isSingle: true },\n        timer_ends_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallStateResponseFields = (input) => {\n    const typeMappings = {\n        members: { type: 'MemberResponse', isSingle: false },\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallStatsReportSummaryResponse = (input) => {\n    const typeMappings = {\n        first_stats_time: { type: 'DatetimeType', isSingle: true },\n        created_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallTranscription = (input) => {\n    const typeMappings = {\n        end_time: { type: 'DatetimeType', isSingle: true },\n        start_time: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallType = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CallTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Channel = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_message_at: { type: 'DatetimeType', isSingle: true },\n        invites: { type: 'ChannelMember', isSingle: false },\n        members: { type: 'ChannelMember', isSingle: false },\n        config: { type: 'ChannelConfig', isSingle: true },\n        config_overrides: { type: 'ChannelConfig', isSingle: true },\n        created_by: { type: 'UserObject', isSingle: true },\n        truncated_by: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelConfig = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelConfigWithInfo = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        commands: { type: 'Command', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelMember = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        ban_expires: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        invite_accepted_at: { type: 'DatetimeType', isSingle: true },\n        invite_rejected_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelMemberResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        ban_expires: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        invite_accepted_at: { type: 'DatetimeType', isSingle: true },\n        invite_rejected_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelMute = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        expires: { type: 'DatetimeType', isSingle: true },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        hide_messages_before: { type: 'DatetimeType', isSingle: true },\n        last_message_at: { type: 'DatetimeType', isSingle: true },\n        mute_expires_at: { type: 'DatetimeType', isSingle: true },\n        truncated_at: { type: 'DatetimeType', isSingle: true },\n        members: { type: 'ChannelMember', isSingle: false },\n        config: { type: 'ChannelConfigWithInfo', isSingle: true },\n        created_by: { type: 'UserObject', isSingle: true },\n        truncated_by: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelStateResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'ChannelMember', isSingle: false },\n        messages: { type: 'MessageResponse', isSingle: false },\n        pinned_messages: { type: 'MessageResponse', isSingle: false },\n        threads: { type: 'ThreadState', isSingle: false },\n        hide_messages_before: { type: 'DatetimeType', isSingle: true },\n        pending_messages: { type: 'PendingMessageResponse', isSingle: false },\n        read: { type: 'ReadStateResponse', isSingle: false },\n        watchers: { type: 'UserResponse', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        membership: { type: 'ChannelMember', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelStateResponseFields = (input) => {\n    const typeMappings = {\n        members: { type: 'ChannelMember', isSingle: false },\n        messages: { type: 'MessageResponse', isSingle: false },\n        pinned_messages: { type: 'MessageResponse', isSingle: false },\n        threads: { type: 'ThreadState', isSingle: false },\n        hide_messages_before: { type: 'DatetimeType', isSingle: true },\n        pending_messages: { type: 'PendingMessageResponse', isSingle: false },\n        read: { type: 'ReadStateResponse', isSingle: false },\n        watchers: { type: 'UserResponse', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        membership: { type: 'ChannelMember', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ChannelTypeConfig = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        commands: { type: 'Command', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CheckResponse = (input) => {\n    const typeMappings = {\n        item: { type: 'ReviewQueueItem', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Command = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ConfigResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        velocity_filter_config: { type: 'VelocityFilterConfig', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CreateCallTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CreateChannelTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CreateCommandResponse = (input) => {\n    const typeMappings = {\n        command: { type: 'Command', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CreateGuestResponse = (input) => {\n    const typeMappings = {\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CreateImportResponse = (input) => {\n    const typeMappings = {\n        import_task: { type: 'ImportTask', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CreateRoleResponse = (input) => {\n    const typeMappings = {\n        role: { type: 'Role', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.CustomCheckResponse = (input) => {\n    const typeMappings = {\n        scored_at: { type: 'DatetimeType', isSingle: true },\n        reviewed_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.DeactivateUserResponse = (input) => {\n    const typeMappings = {\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.DeleteCallResponse = (input) => {\n    const typeMappings = {\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.DeleteChannelResponse = (input) => {\n    const typeMappings = {\n        channel: { type: 'ChannelResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.DeleteMessageResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'MessageResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Device = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.EgressRTMPResponse = (input) => {\n    const typeMappings = {\n        started_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.EventResponse = (input) => {\n    const typeMappings = {\n        event: { type: 'WSEvent', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ExportUserResponse = (input) => {\n    const typeMappings = {\n        messages: { type: 'Message', isSingle: false },\n        reactions: { type: 'Reaction', isSingle: false },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Flag2 = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.FlagDetails = (input) => {\n    const typeMappings = {\n        automod: { type: 'AutomodDetails', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.FlagFeedback = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.FullUserResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        channel_mutes: { type: 'ChannelMute', isSingle: false },\n        devices: { type: 'Device', isSingle: false },\n        mutes: { type: 'UserMuteResponse', isSingle: false },\n        deactivated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_active: { type: 'DatetimeType', isSingle: true },\n        revoke_tokens_issued_before: { type: 'DatetimeType', isSingle: true },\n        push_notifications: {\n            type: 'PushNotificationSettingsResponse',\n            isSingle: true,\n        },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetApplicationResponse = (input) => {\n    const typeMappings = {\n        app: { type: 'AppResponseFields', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetBlockListResponse = (input) => {\n    const typeMappings = {\n        blocklist: { type: 'BlockListResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetBlockedUsersResponse = (input) => {\n    const typeMappings = {\n        blocks: { type: 'BlockedUserResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetCallResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'MemberResponse', isSingle: false },\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetCallTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetChannelTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        commands: { type: 'Command', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetCommandResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetConfigResponse = (input) => {\n    const typeMappings = {\n        config: { type: 'ConfigResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetExportChannelsStatusResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetImportResponse = (input) => {\n    const typeMappings = {\n        import_task: { type: 'ImportTask', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetManyMessagesResponse = (input) => {\n    const typeMappings = {\n        messages: { type: 'Message', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetMessageResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'MessageWithChannelResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetOrCreateCallResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'MemberResponse', isSingle: false },\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetReactionsResponse = (input) => {\n    const typeMappings = {\n        reactions: { type: 'Reaction', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetRepliesResponse = (input) => {\n    const typeMappings = {\n        messages: { type: 'MessageResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetReviewQueueItemResponse = (input) => {\n    const typeMappings = {\n        history: { type: 'ReviewQueueItem', isSingle: false },\n        item: { type: 'ReviewQueueItem', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetTaskResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetThreadResponse = (input) => {\n    const typeMappings = {\n        thread: { type: 'ThreadStateResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GetUserModerationReportResponse = (input) => {\n    const typeMappings = {\n        user_blocks: { type: 'UserBlock', isSingle: false },\n        user_mutes: { type: 'UserMute', isSingle: false },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.GoLiveResponse = (input) => {\n    const typeMappings = {\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ImportTask = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        history: { type: 'ImportTaskHistory', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ImportTaskHistory = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListBlockListResponse = (input) => {\n    const typeMappings = {\n        blocklists: { type: 'BlockListResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListCallTypeResponse = (input) => {\n    const typeMappings = {\n        call_types: { type: 'CallTypeResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListChannelTypesResponse = (input) => {\n    const typeMappings = {\n        channel_types: { type: 'ChannelTypeConfig', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListCommandsResponse = (input) => {\n    const typeMappings = {\n        commands: { type: 'Command', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListDevicesResponse = (input) => {\n    const typeMappings = {\n        devices: { type: 'Device', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListImportsResponse = (input) => {\n    const typeMappings = {\n        import_tasks: { type: 'ImportTask', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListPushProvidersResponse = (input) => {\n    const typeMappings = {\n        push_providers: { type: 'PushProviderResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListRecordingsResponse = (input) => {\n    const typeMappings = {\n        recordings: { type: 'CallRecording', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListRolesResponse = (input) => {\n    const typeMappings = {\n        roles: { type: 'Role', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ListTranscriptionsResponse = (input) => {\n    const typeMappings = {\n        transcriptions: { type: 'CallTranscription', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MarkReadResponse = (input) => {\n    const typeMappings = {\n        event: { type: 'MessageReadEvent', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MemberResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MembersResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'ChannelMember', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Message = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_reactions: { type: 'Reaction', isSingle: false },\n        mentioned_users: { type: 'UserObject', isSingle: false },\n        own_reactions: { type: 'Reaction', isSingle: false },\n        reaction_groups: { type: 'ReactionGroupResponse', isSingle: false },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        message_text_updated_at: { type: 'DatetimeType', isSingle: true },\n        pin_expires: { type: 'DatetimeType', isSingle: true },\n        pinned_at: { type: 'DatetimeType', isSingle: true },\n        thread_participants: { type: 'UserObject', isSingle: false },\n        pinned_by: { type: 'UserObject', isSingle: true },\n        poll: { type: 'Poll', isSingle: true },\n        quoted_message: { type: 'Message', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MessageFlagResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        approved_at: { type: 'DatetimeType', isSingle: true },\n        rejected_at: { type: 'DatetimeType', isSingle: true },\n        reviewed_at: { type: 'DatetimeType', isSingle: true },\n        details: { type: 'FlagDetails', isSingle: true },\n        message: { type: 'Message', isSingle: true },\n        moderation_feedback: { type: 'FlagFeedback', isSingle: true },\n        moderation_result: { type: 'MessageModerationResult', isSingle: true },\n        reviewed_by: { type: 'UserResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MessageHistoryEntryResponse = (input) => {\n    const typeMappings = {\n        message_updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MessageModerationResult = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MessageReadEvent = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        thread: { type: 'ThreadResponse', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MessageResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_reactions: { type: 'ReactionResponse', isSingle: false },\n        mentioned_users: { type: 'UserResponse', isSingle: false },\n        own_reactions: { type: 'ReactionResponse', isSingle: false },\n        user: { type: 'UserResponse', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        message_text_updated_at: { type: 'DatetimeType', isSingle: true },\n        pin_expires: { type: 'DatetimeType', isSingle: true },\n        pinned_at: { type: 'DatetimeType', isSingle: true },\n        thread_participants: { type: 'UserResponse', isSingle: false },\n        pinned_by: { type: 'UserResponse', isSingle: true },\n        poll: { type: 'Poll', isSingle: true },\n        quoted_message: { type: 'Message', isSingle: true },\n        reaction_groups: { type: 'ReactionGroupResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MessageWithChannelResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_reactions: { type: 'ReactionResponse', isSingle: false },\n        mentioned_users: { type: 'UserResponse', isSingle: false },\n        own_reactions: { type: 'ReactionResponse', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        message_text_updated_at: { type: 'DatetimeType', isSingle: true },\n        pin_expires: { type: 'DatetimeType', isSingle: true },\n        pinned_at: { type: 'DatetimeType', isSingle: true },\n        thread_participants: { type: 'UserResponse', isSingle: false },\n        pinned_by: { type: 'UserResponse', isSingle: true },\n        poll: { type: 'Poll', isSingle: true },\n        quoted_message: { type: 'Message', isSingle: true },\n        reaction_groups: { type: 'ReactionGroupResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ModerationUsageStats = (input) => {\n    const typeMappings = {\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MuteChannelResponse = (input) => {\n    const typeMappings = {\n        channel_mutes: { type: 'ChannelMute', isSingle: false },\n        channel_mute: { type: 'ChannelMute', isSingle: true },\n        own_user: { type: 'OwnUser', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.MuteResponse = (input) => {\n    const typeMappings = {\n        mutes: { type: 'UserMute', isSingle: false },\n        own_user: { type: 'OwnUser', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.NullTime = (input) => {\n    const typeMappings = {\n        value: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.OwnUser = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        channel_mutes: { type: 'ChannelMute', isSingle: false },\n        devices: { type: 'Device', isSingle: false },\n        mutes: { type: 'UserMute', isSingle: false },\n        deactivated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_active: { type: 'DatetimeType', isSingle: true },\n        push_notifications: { type: 'PushNotificationSettings', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PendingMessageResponse = (input) => {\n    const typeMappings = {\n        channel: { type: 'ChannelResponse', isSingle: true },\n        message: { type: 'MessageResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Poll = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_answers: { type: 'PollVote', isSingle: false },\n        own_votes: { type: 'PollVote', isSingle: false },\n        created_by: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PollResponse = (input) => {\n    const typeMappings = {\n        poll: { type: 'PollResponseData', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PollResponseData = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        own_votes: { type: 'PollVoteResponseData', isSingle: false },\n        created_by: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PollVote = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PollVoteResponse = (input) => {\n    const typeMappings = {\n        vote: { type: 'PollVoteResponseData', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PollVoteResponseData = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PollVotesResponse = (input) => {\n    const typeMappings = {\n        votes: { type: 'PollVoteResponseData', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PushNotificationFields = (input) => {\n    const typeMappings = {\n        providers: { type: 'PushProvider', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PushNotificationSettings = (input) => {\n    const typeMappings = {\n        disabled_until: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PushNotificationSettingsResponse = (input) => {\n    const typeMappings = {\n        disabled_until: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PushProvider = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        disabled_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.PushProviderResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        disabled_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryBannedUsersResponse = (input) => {\n    const typeMappings = {\n        bans: { type: 'BanResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryCallMembersResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'MemberResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryCallStatsResponse = (input) => {\n    const typeMappings = {\n        reports: { type: 'CallStatsReportSummaryResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryCallsResponse = (input) => {\n    const typeMappings = {\n        calls: { type: 'CallStateResponseFields', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryChannelsResponse = (input) => {\n    const typeMappings = {\n        channels: { type: 'ChannelStateResponseFields', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryFeedModerationTemplate = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryFeedModerationTemplatesResponse = (input) => {\n    const typeMappings = {\n        templates: { type: 'QueryFeedModerationTemplate', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryMessageFlagsResponse = (input) => {\n    const typeMappings = {\n        flags: { type: 'MessageFlagResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryMessageHistoryResponse = (input) => {\n    const typeMappings = {\n        message_history: { type: 'MessageHistoryEntryResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryModerationLogsResponse = (input) => {\n    const typeMappings = {\n        l_og_s: { type: 'ActionLogResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryPollsResponse = (input) => {\n    const typeMappings = {\n        polls: { type: 'PollResponseData', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryReactionsResponse = (input) => {\n    const typeMappings = {\n        reactions: { type: 'ReactionResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryReviewQueueResponse = (input) => {\n    const typeMappings = {\n        items: { type: 'ReviewQueueItem', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryThreadsResponse = (input) => {\n    const typeMappings = {\n        threads: { type: 'ThreadStateResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryUsageStatsResponse = (input) => {\n    const typeMappings = {\n        items: { type: 'ModerationUsageStats', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.QueryUsersResponse = (input) => {\n    const typeMappings = {\n        users: { type: 'FullUserResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Reaction = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ReactionGroupResponse = (input) => {\n    const typeMappings = {\n        first_reaction_at: { type: 'DatetimeType', isSingle: true },\n        last_reaction_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ReactionRemovalResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'Message', isSingle: true },\n        reaction: { type: 'Reaction', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ReactionResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ReactivateUserResponse = (input) => {\n    const typeMappings = {\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Read = (input) => {\n    const typeMappings = {\n        last_read: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ReadStateResponse = (input) => {\n    const typeMappings = {\n        last_read: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ReviewQueueItem = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        actions: { type: 'ActionLog', isSingle: false },\n        bans: { type: 'Ban', isSingle: false },\n        flags: { type: 'Flag2', isSingle: false },\n        completed_at: { type: 'NullTime', isSingle: true },\n        reviewed_at: { type: 'NullTime', isSingle: true },\n        assigned_to: { type: 'UserObject', isSingle: true },\n        entity_creator: { type: 'UserObject', isSingle: true },\n        feeds_v2_reaction: { type: 'Reaction', isSingle: true },\n        message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.Role = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.SearchResult = (input) => {\n    const typeMappings = {\n        message: { type: 'SearchResultMessage', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.SearchResultMessage = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_reactions: { type: 'Reaction', isSingle: false },\n        mentioned_users: { type: 'UserObject', isSingle: false },\n        own_reactions: { type: 'Reaction', isSingle: false },\n        reaction_groups: { type: 'ReactionGroupResponse', isSingle: false },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        message_text_updated_at: { type: 'DatetimeType', isSingle: true },\n        pin_expires: { type: 'DatetimeType', isSingle: true },\n        pinned_at: { type: 'DatetimeType', isSingle: true },\n        thread_participants: { type: 'UserObject', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        pinned_by: { type: 'UserObject', isSingle: true },\n        poll: { type: 'Poll', isSingle: true },\n        quoted_message: { type: 'Message', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.SendMessageResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'MessageResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.SendReactionResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'MessageResponse', isSingle: true },\n        reaction: { type: 'ReactionResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.StopLiveResponse = (input) => {\n    const typeMappings = {\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.SubmitActionResponse = (input) => {\n    const typeMappings = {\n        item: { type: 'ReviewQueueItem', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ThreadParticipant = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        last_read_at: { type: 'DatetimeType', isSingle: true },\n        last_thread_message_at: { type: 'DatetimeType', isSingle: true },\n        left_thread_at: { type: 'DatetimeType', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ThreadResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_message_at: { type: 'DatetimeType', isSingle: true },\n        thread_participants: { type: 'ThreadParticipant', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        created_by: { type: 'UserObject', isSingle: true },\n        parent_message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ThreadState = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_replies: { type: 'Message', isSingle: false },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_message_at: { type: 'DatetimeType', isSingle: true },\n        read: { type: 'Read', isSingle: false },\n        thread_participants: { type: 'ThreadParticipant', isSingle: false },\n        channel: { type: 'Channel', isSingle: true },\n        created_by: { type: 'UserObject', isSingle: true },\n        parent_message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.ThreadStateResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        latest_replies: { type: 'MessageResponse', isSingle: false },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_message_at: { type: 'DatetimeType', isSingle: true },\n        read: { type: 'Read', isSingle: false },\n        thread_participants: { type: 'ThreadParticipant', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        created_by: { type: 'UserResponse', isSingle: true },\n        parent_message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.TruncateChannelResponse = (input) => {\n    const typeMappings = {\n        channel: { type: 'ChannelResponse', isSingle: true },\n        message: { type: 'MessageResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UnreadCountsBatchResponse = (input) => {\n    const typeMappings = {\n        counts_by_user: { type: 'UnreadCountsResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UnreadCountsChannel = (input) => {\n    const typeMappings = {\n        last_read: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UnreadCountsResponse = (input) => {\n    const typeMappings = {\n        channels: { type: 'UnreadCountsChannel', isSingle: false },\n        threads: { type: 'UnreadCountsThread', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UnreadCountsThread = (input) => {\n    const typeMappings = {\n        last_read: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateCallMembersResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'MemberResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateCallResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'MemberResponse', isSingle: false },\n        call: { type: 'CallResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateCallTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateChannelPartialResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'ChannelMemberResponse', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateChannelResponse = (input) => {\n    const typeMappings = {\n        members: { type: 'ChannelMember', isSingle: false },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateChannelTypeResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateCommandResponse = (input) => {\n    const typeMappings = {\n        command: { type: 'Command', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateMemberPartialResponse = (input) => {\n    const typeMappings = {\n        channel_member: { type: 'ChannelMemberResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateMessagePartialResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateMessageResponse = (input) => {\n    const typeMappings = {\n        message: { type: 'Message', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateThreadPartialResponse = (input) => {\n    const typeMappings = {\n        thread: { type: 'ThreadResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpdateUsersResponse = (input) => {\n    const typeMappings = {\n        users: { type: 'FullUserResponse', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpsertConfigResponse = (input) => {\n    const typeMappings = {\n        config: { type: 'ConfigResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpsertModerationTemplateResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UpsertPushProviderResponse = (input) => {\n    const typeMappings = {\n        push_provider: { type: 'PushProviderResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UserBlock = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UserMute = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        expires: { type: 'DatetimeType', isSingle: true },\n        target: { type: 'UserObject', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UserMuteResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        expires: { type: 'DatetimeType', isSingle: true },\n        target: { type: 'UserResponse', isSingle: true },\n        user: { type: 'UserResponse', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UserObject = (input) => {\n    const typeMappings = {\n        ban_expires: { type: 'DatetimeType', isSingle: true },\n        created_at: { type: 'DatetimeType', isSingle: true },\n        deactivated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_active: { type: 'DatetimeType', isSingle: true },\n        revoke_tokens_issued_before: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        push_notifications: { type: 'PushNotificationSettings', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.UserResponse = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        updated_at: { type: 'DatetimeType', isSingle: true },\n        devices: { type: 'Device', isSingle: false },\n        ban_expires: { type: 'DatetimeType', isSingle: true },\n        deactivated_at: { type: 'DatetimeType', isSingle: true },\n        deleted_at: { type: 'DatetimeType', isSingle: true },\n        last_active: { type: 'DatetimeType', isSingle: true },\n        revoke_tokens_issued_before: { type: 'DatetimeType', isSingle: true },\n        push_notifications: {\n            type: 'PushNotificationSettingsResponse',\n            isSingle: true,\n        },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.VelocityFilterConfig = (input) => {\n    const typeMappings = {\n        rule: { type: 'VelocityFilterConfigRule', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.VelocityFilterConfigRule = (input) => {\n    const typeMappings = {\n        timeout: { type: 'DatetimeType', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.WSEvent = (input) => {\n    const typeMappings = {\n        created_at: { type: 'DatetimeType', isSingle: true },\n        channel: { type: 'ChannelResponse', isSingle: true },\n        created_by: { type: 'UserObject', isSingle: true },\n        me: { type: 'OwnUser', isSingle: true },\n        member: { type: 'ChannelMember', isSingle: true },\n        message: { type: 'Message', isSingle: true },\n        poll: { type: 'Poll', isSingle: true },\n        poll_vote: { type: 'PollVote', isSingle: true },\n        reaction: { type: 'Reaction', isSingle: true },\n        thread: { type: 'ThreadResponse', isSingle: true },\n        user: { type: 'UserObject', isSingle: true },\n    };\n    return decode(typeMappings, input);\n};\ndecoders.WrappedUnreadCountsResponse = (input) => {\n    const typeMappings = {\n        channels: { type: 'UnreadCountsChannel', isSingle: false },\n        threads: { type: 'UnreadCountsThread', isSingle: false },\n    };\n    return decode(typeMappings, input);\n};\n\nclass CommonApi extends BaseApi {\n    constructor() {\n        super(...arguments);\n        this.getApp = () => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const response = yield this.sendRequest('GET', '/api/v2/app', undefined, undefined);\n            (_a = decoders.GetApplicationResponse) === null || _a === void 0 ? void 0 : _a.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateApp = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            const body = {\n                async_url_enrich_enabled: request === null || request === void 0 ? void 0 : request.async_url_enrich_enabled,\n                auto_translation_enabled: request === null || request === void 0 ? void 0 : request.auto_translation_enabled,\n                before_message_send_hook_url: request === null || request === void 0 ? void 0 : request.before_message_send_hook_url,\n                cdn_expiration_seconds: request === null || request === void 0 ? void 0 : request.cdn_expiration_seconds,\n                channel_hide_members_only: request === null || request === void 0 ? void 0 : request.channel_hide_members_only,\n                custom_action_handler_url: request === null || request === void 0 ? void 0 : request.custom_action_handler_url,\n                disable_auth_checks: request === null || request === void 0 ? void 0 : request.disable_auth_checks,\n                disable_permissions_checks: request === null || request === void 0 ? void 0 : request.disable_permissions_checks,\n                enforce_unique_usernames: request === null || request === void 0 ? void 0 : request.enforce_unique_usernames,\n                feeds_moderation_enabled: request === null || request === void 0 ? void 0 : request.feeds_moderation_enabled,\n                feeds_v2_region: request === null || request === void 0 ? void 0 : request.feeds_v2_region,\n                image_moderation_enabled: request === null || request === void 0 ? void 0 : request.image_moderation_enabled,\n                migrate_permissions_to_v2: request === null || request === void 0 ? void 0 : request.migrate_permissions_to_v2,\n                moderation_enabled: request === null || request === void 0 ? void 0 : request.moderation_enabled,\n                moderation_webhook_url: request === null || request === void 0 ? void 0 : request.moderation_webhook_url,\n                multi_tenant_enabled: request === null || request === void 0 ? void 0 : request.multi_tenant_enabled,\n                permission_version: request === null || request === void 0 ? void 0 : request.permission_version,\n                reminders_interval: request === null || request === void 0 ? void 0 : request.reminders_interval,\n                reminders_max_members: request === null || request === void 0 ? void 0 : request.reminders_max_members,\n                revoke_tokens_issued_before: request === null || request === void 0 ? void 0 : request.revoke_tokens_issued_before,\n                sns_key: request === null || request === void 0 ? void 0 : request.sns_key,\n                sns_secret: request === null || request === void 0 ? void 0 : request.sns_secret,\n                sns_topic_arn: request === null || request === void 0 ? void 0 : request.sns_topic_arn,\n                sqs_key: request === null || request === void 0 ? void 0 : request.sqs_key,\n                sqs_secret: request === null || request === void 0 ? void 0 : request.sqs_secret,\n                sqs_url: request === null || request === void 0 ? void 0 : request.sqs_url,\n                video_provider: request === null || request === void 0 ? void 0 : request.video_provider,\n                webhook_url: request === null || request === void 0 ? void 0 : request.webhook_url,\n                allowed_flag_reasons: request === null || request === void 0 ? void 0 : request.allowed_flag_reasons,\n                image_moderation_block_labels: request === null || request === void 0 ? void 0 : request.image_moderation_block_labels,\n                image_moderation_labels: request === null || request === void 0 ? void 0 : request.image_moderation_labels,\n                user_search_disallowed_roles: request === null || request === void 0 ? void 0 : request.user_search_disallowed_roles,\n                webhook_events: request === null || request === void 0 ? void 0 : request.webhook_events,\n                agora_options: request === null || request === void 0 ? void 0 : request.agora_options,\n                apn_config: request === null || request === void 0 ? void 0 : request.apn_config,\n                async_moderation_config: request === null || request === void 0 ? void 0 : request.async_moderation_config,\n                datadog_info: request === null || request === void 0 ? void 0 : request.datadog_info,\n                file_upload_config: request === null || request === void 0 ? void 0 : request.file_upload_config,\n                firebase_config: request === null || request === void 0 ? void 0 : request.firebase_config,\n                grants: request === null || request === void 0 ? void 0 : request.grants,\n                hms_options: request === null || request === void 0 ? void 0 : request.hms_options,\n                huawei_config: request === null || request === void 0 ? void 0 : request.huawei_config,\n                image_upload_config: request === null || request === void 0 ? void 0 : request.image_upload_config,\n                push_config: request === null || request === void 0 ? void 0 : request.push_config,\n                xiaomi_config: request === null || request === void 0 ? void 0 : request.xiaomi_config,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/app', undefined, undefined, body);\n            (_b = decoders.Response) === null || _b === void 0 ? void 0 : _b.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listBlockLists = () => __awaiter(this, void 0, void 0, function* () {\n            var _c;\n            const response = yield this.sendRequest('GET', '/api/v2/blocklists', undefined, undefined);\n            (_c = decoders.ListBlockListResponse) === null || _c === void 0 ? void 0 : _c.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createBlockList = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            const body = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n                words: request === null || request === void 0 ? void 0 : request.words,\n                type: request === null || request === void 0 ? void 0 : request.type,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/blocklists', undefined, undefined, body);\n            (_d = decoders.Response) === null || _d === void 0 ? void 0 : _d.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteBlockList = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _e;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/blocklists/{name}', pathParams, undefined);\n            (_e = decoders.Response) === null || _e === void 0 ? void 0 : _e.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getBlockList = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _f;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/blocklists/{name}', pathParams, undefined);\n            (_f = decoders.GetBlockListResponse) === null || _f === void 0 ? void 0 : _f.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateBlockList = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const body = {\n                words: request === null || request === void 0 ? void 0 : request.words,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/blocklists/{name}', pathParams, undefined, body);\n            (_g = decoders.Response) === null || _g === void 0 ? void 0 : _g.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.checkPush = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _h;\n            const body = {\n                apn_template: request === null || request === void 0 ? void 0 : request.apn_template,\n                firebase_data_template: request === null || request === void 0 ? void 0 : request.firebase_data_template,\n                firebase_template: request === null || request === void 0 ? void 0 : request.firebase_template,\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n                push_provider_name: request === null || request === void 0 ? void 0 : request.push_provider_name,\n                push_provider_type: request === null || request === void 0 ? void 0 : request.push_provider_type,\n                skip_devices: request === null || request === void 0 ? void 0 : request.skip_devices,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/check_push', undefined, undefined, body);\n            (_h = decoders.CheckPushResponse) === null || _h === void 0 ? void 0 : _h.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.checkSNS = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _j;\n            const body = {\n                sns_key: request === null || request === void 0 ? void 0 : request.sns_key,\n                sns_secret: request === null || request === void 0 ? void 0 : request.sns_secret,\n                sns_topic_arn: request === null || request === void 0 ? void 0 : request.sns_topic_arn,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/check_sns', undefined, undefined, body);\n            (_j = decoders.CheckSNSResponse) === null || _j === void 0 ? void 0 : _j.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.checkSQS = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _k;\n            const body = {\n                sqs_key: request === null || request === void 0 ? void 0 : request.sqs_key,\n                sqs_secret: request === null || request === void 0 ? void 0 : request.sqs_secret,\n                sqs_url: request === null || request === void 0 ? void 0 : request.sqs_url,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/check_sqs', undefined, undefined, body);\n            (_k = decoders.CheckSQSResponse) === null || _k === void 0 ? void 0 : _k.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteDevice = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _l;\n            const queryParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/devices', undefined, queryParams);\n            (_l = decoders.Response) === null || _l === void 0 ? void 0 : _l.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listDevices = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _m;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/devices', undefined, queryParams);\n            (_m = decoders.ListDevicesResponse) === null || _m === void 0 ? void 0 : _m.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createDevice = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _o;\n            const body = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n                push_provider: request === null || request === void 0 ? void 0 : request.push_provider,\n                push_provider_name: request === null || request === void 0 ? void 0 : request.push_provider_name,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                voip_token: request === null || request === void 0 ? void 0 : request.voip_token,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/devices', undefined, undefined, body);\n            (_o = decoders.Response) === null || _o === void 0 ? void 0 : _o.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.exportUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _p;\n            const body = {\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/export/users', undefined, undefined, body);\n            (_p = decoders.ExportUsersResponse) === null || _p === void 0 ? void 0 : _p.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listExternalStorage = () => __awaiter(this, void 0, void 0, function* () {\n            var _q;\n            const response = yield this.sendRequest('GET', '/api/v2/external_storage', undefined, undefined);\n            (_q = decoders.ListExternalStorageResponse) === null || _q === void 0 ? void 0 : _q.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createExternalStorage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _r;\n            const body = {\n                bucket: request === null || request === void 0 ? void 0 : request.bucket,\n                name: request === null || request === void 0 ? void 0 : request.name,\n                storage_type: request === null || request === void 0 ? void 0 : request.storage_type,\n                gcs_credentials: request === null || request === void 0 ? void 0 : request.gcs_credentials,\n                path: request === null || request === void 0 ? void 0 : request.path,\n                aws_s3: request === null || request === void 0 ? void 0 : request.aws_s3,\n                azure_blob: request === null || request === void 0 ? void 0 : request.azure_blob,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/external_storage', undefined, undefined, body);\n            (_r = decoders.CreateExternalStorageResponse) === null || _r === void 0 ? void 0 : _r.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteExternalStorage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _s;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/external_storage/{name}', pathParams, undefined);\n            (_s = decoders.DeleteExternalStorageResponse) === null || _s === void 0 ? void 0 : _s.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateExternalStorage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _t;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const body = {\n                bucket: request === null || request === void 0 ? void 0 : request.bucket,\n                storage_type: request === null || request === void 0 ? void 0 : request.storage_type,\n                gcs_credentials: request === null || request === void 0 ? void 0 : request.gcs_credentials,\n                path: request === null || request === void 0 ? void 0 : request.path,\n                aws_s3: request === null || request === void 0 ? void 0 : request.aws_s3,\n                azure_blob: request === null || request === void 0 ? void 0 : request.azure_blob,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/external_storage/{name}', pathParams, undefined, body);\n            (_t = decoders.UpdateExternalStorageResponse) === null || _t === void 0 ? void 0 : _t.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.checkExternalStorage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _u;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/external_storage/{name}/check', pathParams, undefined);\n            (_u = decoders.CheckExternalStorageResponse) === null || _u === void 0 ? void 0 : _u.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createGuest = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _v;\n            const body = {\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/guest', undefined, undefined, body);\n            (_v = decoders.CreateGuestResponse) === null || _v === void 0 ? void 0 : _v.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createImportURL = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _w;\n            const body = {\n                filename: request === null || request === void 0 ? void 0 : request.filename,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/import_urls', undefined, undefined, body);\n            (_w = decoders.CreateImportURLResponse) === null || _w === void 0 ? void 0 : _w.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listImports = () => __awaiter(this, void 0, void 0, function* () {\n            var _x;\n            const response = yield this.sendRequest('GET', '/api/v2/imports', undefined, undefined);\n            (_x = decoders.ListImportsResponse) === null || _x === void 0 ? void 0 : _x.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createImport = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _y;\n            const body = {\n                mode: request === null || request === void 0 ? void 0 : request.mode,\n                path: request === null || request === void 0 ? void 0 : request.path,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/imports', undefined, undefined, body);\n            (_y = decoders.CreateImportResponse) === null || _y === void 0 ? void 0 : _y.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getImport = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _z;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/imports/{id}', pathParams, undefined);\n            (_z = decoders.GetImportResponse) === null || _z === void 0 ? void 0 : _z.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getOG = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _0;\n            const queryParams = {\n                url: request === null || request === void 0 ? void 0 : request.url,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/og', undefined, queryParams);\n            (_0 = decoders.GetOGResponse) === null || _0 === void 0 ? void 0 : _0.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listPermissions = () => __awaiter(this, void 0, void 0, function* () {\n            var _1;\n            const response = yield this.sendRequest('GET', '/api/v2/permissions', undefined, undefined);\n            (_1 = decoders.ListPermissionsResponse) === null || _1 === void 0 ? void 0 : _1.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getPermission = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _2;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/permissions/{id}', pathParams, undefined);\n            (_2 = decoders.GetCustomPermissionResponse) === null || _2 === void 0 ? void 0 : _2.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listPushProviders = () => __awaiter(this, void 0, void 0, function* () {\n            var _3;\n            const response = yield this.sendRequest('GET', '/api/v2/push_providers', undefined, undefined);\n            (_3 = decoders.ListPushProvidersResponse) === null || _3 === void 0 ? void 0 : _3.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.upsertPushProvider = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _4;\n            const body = {\n                push_provider: request === null || request === void 0 ? void 0 : request.push_provider,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/push_providers', undefined, undefined, body);\n            (_4 = decoders.UpsertPushProviderResponse) === null || _4 === void 0 ? void 0 : _4.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deletePushProvider = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _5;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/push_providers/{type}/{name}', pathParams, undefined);\n            (_5 = decoders.Response) === null || _5 === void 0 ? void 0 : _5.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getRateLimits = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _6;\n            const queryParams = {\n                server_side: request === null || request === void 0 ? void 0 : request.server_side,\n                android: request === null || request === void 0 ? void 0 : request.android,\n                ios: request === null || request === void 0 ? void 0 : request.ios,\n                web: request === null || request === void 0 ? void 0 : request.web,\n                endpoints: request === null || request === void 0 ? void 0 : request.endpoints,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/rate_limits', undefined, queryParams);\n            (_6 = decoders.GetRateLimitsResponse) === null || _6 === void 0 ? void 0 : _6.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listRoles = () => __awaiter(this, void 0, void 0, function* () {\n            var _7;\n            const response = yield this.sendRequest('GET', '/api/v2/roles', undefined, undefined);\n            (_7 = decoders.ListRolesResponse) === null || _7 === void 0 ? void 0 : _7.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createRole = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _8;\n            const body = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/roles', undefined, undefined, body);\n            (_8 = decoders.CreateRoleResponse) === null || _8 === void 0 ? void 0 : _8.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteRole = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _9;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/roles/{name}', pathParams, undefined);\n            (_9 = decoders.Response) === null || _9 === void 0 ? void 0 : _9.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getTask = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _10;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/tasks/{id}', pathParams, undefined);\n            (_10 = decoders.GetTaskResponse) === null || _10 === void 0 ? void 0 : _10.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _11;\n            const queryParams = {\n                payload: request === null || request === void 0 ? void 0 : request.payload,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/users', undefined, queryParams);\n            (_11 = decoders.QueryUsersResponse) === null || _11 === void 0 ? void 0 : _11.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateUsersPartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _12;\n            const body = {\n                users: request === null || request === void 0 ? void 0 : request.users,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/users', undefined, undefined, body);\n            (_12 = decoders.UpdateUsersResponse) === null || _12 === void 0 ? void 0 : _12.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _13;\n            const body = {\n                users: request === null || request === void 0 ? void 0 : request.users,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users', undefined, undefined, body);\n            (_13 = decoders.UpdateUsersResponse) === null || _13 === void 0 ? void 0 : _13.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getBlockedUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _14;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/users/block', undefined, queryParams);\n            (_14 = decoders.GetBlockedUsersResponse) === null || _14 === void 0 ? void 0 : _14.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.blockUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _15;\n            const body = {\n                blocked_user_id: request === null || request === void 0 ? void 0 : request.blocked_user_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/block', undefined, undefined, body);\n            (_15 = decoders.BlockUsersResponse) === null || _15 === void 0 ? void 0 : _15.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deactivateUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _16;\n            const body = {\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n                created_by_id: request === null || request === void 0 ? void 0 : request.created_by_id,\n                mark_channels_deleted: request === null || request === void 0 ? void 0 : request.mark_channels_deleted,\n                mark_messages_deleted: request === null || request === void 0 ? void 0 : request.mark_messages_deleted,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/deactivate', undefined, undefined, body);\n            (_16 = decoders.DeactivateUsersResponse) === null || _16 === void 0 ? void 0 : _16.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _17;\n            const body = {\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n                calls: request === null || request === void 0 ? void 0 : request.calls,\n                conversations: request === null || request === void 0 ? void 0 : request.conversations,\n                messages: request === null || request === void 0 ? void 0 : request.messages,\n                new_call_owner_id: request === null || request === void 0 ? void 0 : request.new_call_owner_id,\n                new_channel_owner_id: request === null || request === void 0 ? void 0 : request.new_channel_owner_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/delete', undefined, undefined, body);\n            (_17 = decoders.DeleteUsersResponse) === null || _17 === void 0 ? void 0 : _17.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.reactivateUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _18;\n            const body = {\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n                created_by_id: request === null || request === void 0 ? void 0 : request.created_by_id,\n                restore_channels: request === null || request === void 0 ? void 0 : request.restore_channels,\n                restore_messages: request === null || request === void 0 ? void 0 : request.restore_messages,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/reactivate', undefined, undefined, body);\n            (_18 = decoders.ReactivateUsersResponse) === null || _18 === void 0 ? void 0 : _18.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.restoreUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _19;\n            const body = {\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/restore', undefined, undefined, body);\n            (_19 = decoders.Response) === null || _19 === void 0 ? void 0 : _19.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unblockUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _20;\n            const body = {\n                blocked_user_id: request === null || request === void 0 ? void 0 : request.blocked_user_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/unblock', undefined, undefined, body);\n            (_20 = decoders.UnblockUsersResponse) === null || _20 === void 0 ? void 0 : _20.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deactivateUser = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _21;\n            const pathParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const body = {\n                created_by_id: request === null || request === void 0 ? void 0 : request.created_by_id,\n                mark_messages_deleted: request === null || request === void 0 ? void 0 : request.mark_messages_deleted,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/{user_id}/deactivate', pathParams, undefined, body);\n            (_21 = decoders.DeactivateUserResponse) === null || _21 === void 0 ? void 0 : _21.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.exportUser = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _22;\n            const pathParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/users/{user_id}/export', pathParams, undefined);\n            (_22 = decoders.ExportUserResponse) === null || _22 === void 0 ? void 0 : _22.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.reactivateUser = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _23;\n            const pathParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const body = {\n                created_by_id: request === null || request === void 0 ? void 0 : request.created_by_id,\n                name: request === null || request === void 0 ? void 0 : request.name,\n                restore_messages: request === null || request === void 0 ? void 0 : request.restore_messages,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/users/{user_id}/reactivate', pathParams, undefined, body);\n            (_23 = decoders.ReactivateUserResponse) === null || _23 === void 0 ? void 0 : _23.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n    }\n}\n\nclass VideoApi extends BaseApi {\n    constructor() {\n        super(...arguments);\n        this.queryCallMembers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const body = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n                type: request === null || request === void 0 ? void 0 : request.type,\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter_conditions: request === null || request === void 0 ? void 0 : request.filter_conditions,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/members', undefined, undefined, body);\n            (_a = decoders.QueryCallMembersResponse) === null || _a === void 0 ? void 0 : _a.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryCallStats = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter_conditions: request === null || request === void 0 ? void 0 : request.filter_conditions,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/stats', undefined, undefined, body);\n            (_b = decoders.QueryCallStatsResponse) === null || _b === void 0 ? void 0 : _b.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getCall = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _c;\n            const queryParams = {\n                members_limit: request === null || request === void 0 ? void 0 : request.members_limit,\n                ring: request === null || request === void 0 ? void 0 : request.ring,\n                notify: request === null || request === void 0 ? void 0 : request.notify,\n                video: request === null || request === void 0 ? void 0 : request.video,\n            };\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/video/call/{type}/{id}', pathParams, queryParams);\n            (_c = decoders.GetCallResponse) === null || _c === void 0 ? void 0 : _c.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateCall = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                starts_at: request === null || request === void 0 ? void 0 : request.starts_at,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                settings_override: request === null || request === void 0 ? void 0 : request.settings_override,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/video/call/{type}/{id}', pathParams, undefined, body);\n            (_d = decoders.UpdateCallResponse) === null || _d === void 0 ? void 0 : _d.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getOrCreateCall = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _e;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                members_limit: request === null || request === void 0 ? void 0 : request.members_limit,\n                notify: request === null || request === void 0 ? void 0 : request.notify,\n                ring: request === null || request === void 0 ? void 0 : request.ring,\n                video: request === null || request === void 0 ? void 0 : request.video,\n                data: request === null || request === void 0 ? void 0 : request.data,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}', pathParams, undefined, body);\n            (_e = decoders.GetOrCreateCallResponse) === null || _e === void 0 ? void 0 : _e.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.blockUser = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _f;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/block', pathParams, undefined, body);\n            (_f = decoders.BlockUserResponse) === null || _f === void 0 ? void 0 : _f.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteCall = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                hard: request === null || request === void 0 ? void 0 : request.hard,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/delete', pathParams, undefined, body);\n            (_g = decoders.DeleteCallResponse) === null || _g === void 0 ? void 0 : _g.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.sendCallEvent = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _h;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/event', pathParams, undefined, body);\n            (_h = decoders.SendCallEventResponse) === null || _h === void 0 ? void 0 : _h.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.collectUserFeedback = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _j;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n                session: request === null || request === void 0 ? void 0 : request.session,\n            };\n            const body = {\n                rating: request === null || request === void 0 ? void 0 : request.rating,\n                sdk: request === null || request === void 0 ? void 0 : request.sdk,\n                sdk_version: request === null || request === void 0 ? void 0 : request.sdk_version,\n                user_session_id: request === null || request === void 0 ? void 0 : request.user_session_id,\n                reason: request === null || request === void 0 ? void 0 : request.reason,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/feedback/{session}', pathParams, undefined, body);\n            (_j = decoders.CollectUserFeedbackResponse) === null || _j === void 0 ? void 0 : _j.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.goLive = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _k;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                recording_storage_name: request === null || request === void 0 ? void 0 : request.recording_storage_name,\n                start_hls: request === null || request === void 0 ? void 0 : request.start_hls,\n                start_recording: request === null || request === void 0 ? void 0 : request.start_recording,\n                start_rtmp_broadcasts: request === null || request === void 0 ? void 0 : request.start_rtmp_broadcasts,\n                start_transcription: request === null || request === void 0 ? void 0 : request.start_transcription,\n                transcription_storage_name: request === null || request === void 0 ? void 0 : request.transcription_storage_name,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/go_live', pathParams, undefined, body);\n            (_k = decoders.GoLiveResponse) === null || _k === void 0 ? void 0 : _k.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.endCall = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _l;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/mark_ended', pathParams, undefined);\n            (_l = decoders.EndCallResponse) === null || _l === void 0 ? void 0 : _l.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateCallMembers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _m;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                remove_members: request === null || request === void 0 ? void 0 : request.remove_members,\n                update_members: request === null || request === void 0 ? void 0 : request.update_members,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/members', pathParams, undefined, body);\n            (_m = decoders.UpdateCallMembersResponse) === null || _m === void 0 ? void 0 : _m.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.muteUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _o;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                audio: request === null || request === void 0 ? void 0 : request.audio,\n                mute_all_users: request === null || request === void 0 ? void 0 : request.mute_all_users,\n                muted_by_id: request === null || request === void 0 ? void 0 : request.muted_by_id,\n                screenshare: request === null || request === void 0 ? void 0 : request.screenshare,\n                screenshare_audio: request === null || request === void 0 ? void 0 : request.screenshare_audio,\n                video: request === null || request === void 0 ? void 0 : request.video,\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n                muted_by: request === null || request === void 0 ? void 0 : request.muted_by,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/mute_users', pathParams, undefined, body);\n            (_o = decoders.MuteUsersResponse) === null || _o === void 0 ? void 0 : _o.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.videoPin = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _p;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                session_id: request === null || request === void 0 ? void 0 : request.session_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/pin', pathParams, undefined, body);\n            (_p = decoders.PinResponse) === null || _p === void 0 ? void 0 : _p.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listRecordings = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _q;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/video/call/{type}/{id}/recordings', pathParams, undefined);\n            (_q = decoders.ListRecordingsResponse) === null || _q === void 0 ? void 0 : _q.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.startRTMPBroadcasts = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _r;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                broadcasts: request === null || request === void 0 ? void 0 : request.broadcasts,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/rtmp_broadcasts', pathParams, undefined, body);\n            (_r = decoders.StartRTMPBroadcastsResponse) === null || _r === void 0 ? void 0 : _r.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.stopAllRTMPBroadcasts = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _s;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/rtmp_broadcasts/stop', pathParams, undefined);\n            (_s = decoders.StopAllRTMPBroadcastsResponse) === null || _s === void 0 ? void 0 : _s.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.stopRTMPBroadcast = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _t;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const body = {};\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/rtmp_broadcasts/{name}/stop', pathParams, undefined, body);\n            (_t = decoders.StopRTMPBroadcastsResponse) === null || _t === void 0 ? void 0 : _t.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.startHLSBroadcasting = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _u;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/start_broadcasting', pathParams, undefined);\n            (_u = decoders.StartHLSBroadcastingResponse) === null || _u === void 0 ? void 0 : _u.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.startRecording = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _v;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                recording_external_storage: request === null || request === void 0 ? void 0 : request.recording_external_storage,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/start_recording', pathParams, undefined, body);\n            (_v = decoders.StartRecordingResponse) === null || _v === void 0 ? void 0 : _v.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.startTranscription = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _w;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                transcription_external_storage: request === null || request === void 0 ? void 0 : request.transcription_external_storage,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/start_transcription', pathParams, undefined, body);\n            (_w = decoders.StartTranscriptionResponse) === null || _w === void 0 ? void 0 : _w.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getCallStats = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _x;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n                session: request === null || request === void 0 ? void 0 : request.session,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/video/call/{type}/{id}/stats/{session}', pathParams, undefined);\n            (_x = decoders.GetCallStatsResponse) === null || _x === void 0 ? void 0 : _x.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.stopHLSBroadcasting = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _y;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/stop_broadcasting', pathParams, undefined);\n            (_y = decoders.StopHLSBroadcastingResponse) === null || _y === void 0 ? void 0 : _y.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.stopLive = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _z;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/stop_live', pathParams, undefined);\n            (_z = decoders.StopLiveResponse) === null || _z === void 0 ? void 0 : _z.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.stopRecording = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _0;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/stop_recording', pathParams, undefined);\n            (_0 = decoders.StopRecordingResponse) === null || _0 === void 0 ? void 0 : _0.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.stopTranscription = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _1;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/stop_transcription', pathParams, undefined);\n            (_1 = decoders.StopTranscriptionResponse) === null || _1 === void 0 ? void 0 : _1.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listTranscriptions = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _2;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/video/call/{type}/{id}/transcriptions', pathParams, undefined);\n            (_2 = decoders.ListTranscriptionsResponse) === null || _2 === void 0 ? void 0 : _2.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unblockUser = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _3;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/unblock', pathParams, undefined, body);\n            (_3 = decoders.UnblockUserResponse) === null || _3 === void 0 ? void 0 : _3.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.videoUnpin = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _4;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                session_id: request === null || request === void 0 ? void 0 : request.session_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/unpin', pathParams, undefined, body);\n            (_4 = decoders.UnpinResponse) === null || _4 === void 0 ? void 0 : _4.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateUserPermissions = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _5;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                grant_permissions: request === null || request === void 0 ? void 0 : request.grant_permissions,\n                revoke_permissions: request === null || request === void 0 ? void 0 : request.revoke_permissions,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/call/{type}/{id}/user_permissions', pathParams, undefined, body);\n            (_5 = decoders.UpdateUserPermissionsResponse) === null || _5 === void 0 ? void 0 : _5.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteRecording = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _6;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n                session: request === null || request === void 0 ? void 0 : request.session,\n                filename: request === null || request === void 0 ? void 0 : request.filename,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/video/call/{type}/{id}/{session}/recordings/{filename}', pathParams, undefined);\n            (_6 = decoders.DeleteRecordingResponse) === null || _6 === void 0 ? void 0 : _6.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteTranscription = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _7;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n                session: request === null || request === void 0 ? void 0 : request.session,\n                filename: request === null || request === void 0 ? void 0 : request.filename,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/video/call/{type}/{id}/{session}/transcriptions/{filename}', pathParams, undefined);\n            (_7 = decoders.DeleteTranscriptionResponse) === null || _7 === void 0 ? void 0 : _7.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryCalls = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _8;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter_conditions: request === null || request === void 0 ? void 0 : request.filter_conditions,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/calls', undefined, undefined, body);\n            (_8 = decoders.QueryCallsResponse) === null || _8 === void 0 ? void 0 : _8.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listCallTypes = () => __awaiter(this, void 0, void 0, function* () {\n            var _9;\n            const response = yield this.sendRequest('GET', '/api/v2/video/calltypes', undefined, undefined);\n            (_9 = decoders.ListCallTypeResponse) === null || _9 === void 0 ? void 0 : _9.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createCallType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _10;\n            const body = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n                external_storage: request === null || request === void 0 ? void 0 : request.external_storage,\n                grants: request === null || request === void 0 ? void 0 : request.grants,\n                notification_settings: request === null || request === void 0 ? void 0 : request.notification_settings,\n                settings: request === null || request === void 0 ? void 0 : request.settings,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/video/calltypes', undefined, undefined, body);\n            (_10 = decoders.CreateCallTypeResponse) === null || _10 === void 0 ? void 0 : _10.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteCallType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _11;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/video/calltypes/{name}', pathParams, undefined);\n            (_11 = decoders.Response) === null || _11 === void 0 ? void 0 : _11.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getCallType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _12;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/video/calltypes/{name}', pathParams, undefined);\n            (_12 = decoders.GetCallTypeResponse) === null || _12 === void 0 ? void 0 : _12.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateCallType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _13;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const body = {\n                external_storage: request === null || request === void 0 ? void 0 : request.external_storage,\n                grants: request === null || request === void 0 ? void 0 : request.grants,\n                notification_settings: request === null || request === void 0 ? void 0 : request.notification_settings,\n                settings: request === null || request === void 0 ? void 0 : request.settings,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/video/calltypes/{name}', pathParams, undefined, body);\n            (_13 = decoders.UpdateCallTypeResponse) === null || _13 === void 0 ? void 0 : _13.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getEdges = () => __awaiter(this, void 0, void 0, function* () {\n            var _14;\n            const response = yield this.sendRequest('GET', '/api/v2/video/edges', undefined, undefined);\n            (_14 = decoders.GetEdgesResponse) === null || _14 === void 0 ? void 0 : _14.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n    }\n}\n\nclass CallApi {\n    constructor(videoApi, type, id) {\n        this.videoApi = videoApi;\n        this.type = type;\n        this.id = id;\n        this.get = (request) => {\n            return this.videoApi.getCall(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.update = (request) => {\n            return this.videoApi.updateCall(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.getOrCreate = (request) => {\n            return this.videoApi.getOrCreateCall(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.blockUser = (request) => {\n            return this.videoApi.blockUser(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.delete = (request) => {\n            return this.videoApi.deleteCall(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.sendCallEvent = (request) => {\n            return this.videoApi.sendCallEvent(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.collectUserFeedback = (request) => {\n            return this.videoApi.collectUserFeedback(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.goLive = (request) => {\n            return this.videoApi.goLive(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.end = () => {\n            return this.videoApi.endCall({ id: this.id, type: this.type });\n        };\n        this.updateCallMembers = (request) => {\n            return this.videoApi.updateCallMembers(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.muteUsers = (request) => {\n            return this.videoApi.muteUsers(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.videoPin = (request) => {\n            return this.videoApi.videoPin(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.listRecordings = () => {\n            return this.videoApi.listRecordings({ id: this.id, type: this.type });\n        };\n        this.startRTMPBroadcasts = (request) => {\n            return this.videoApi.startRTMPBroadcasts(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.stopAllRTMPBroadcasts = () => {\n            return this.videoApi.stopAllRTMPBroadcasts({\n                id: this.id,\n                type: this.type,\n            });\n        };\n        this.stopRTMPBroadcast = (request) => {\n            return this.videoApi.stopRTMPBroadcast(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.startHLSBroadcasting = () => {\n            return this.videoApi.startHLSBroadcasting({ id: this.id, type: this.type });\n        };\n        this.startRecording = (request) => {\n            return this.videoApi.startRecording(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.startTranscription = (request) => {\n            return this.videoApi.startTranscription(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.getCallStats = (request) => {\n            return this.videoApi.getCallStats(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.stopHLSBroadcasting = () => {\n            return this.videoApi.stopHLSBroadcasting({ id: this.id, type: this.type });\n        };\n        this.stopLive = () => {\n            return this.videoApi.stopLive({ id: this.id, type: this.type });\n        };\n        this.stopRecording = () => {\n            return this.videoApi.stopRecording({ id: this.id, type: this.type });\n        };\n        this.stopTranscription = () => {\n            return this.videoApi.stopTranscription({ id: this.id, type: this.type });\n        };\n        this.listTranscriptions = () => {\n            return this.videoApi.listTranscriptions({ id: this.id, type: this.type });\n        };\n        this.unblockUser = (request) => {\n            return this.videoApi.unblockUser(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.videoUnpin = (request) => {\n            return this.videoApi.videoUnpin(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.updateUserPermissions = (request) => {\n            return this.videoApi.updateUserPermissions(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.deleteRecording = (request) => {\n            return this.videoApi.deleteRecording(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.deleteTranscription = (request) => {\n            return this.videoApi.deleteTranscription(Object.assign({ id: this.id, type: this.type }, request));\n        };\n    }\n}\n\nclass StreamCall extends CallApi {\n    constructor() {\n        super(...arguments);\n        this.create = this.getOrCreate;\n        this.queryMembers = (request) => {\n            return this.videoApi.queryCallMembers(Object.assign({ id: this.id, type: this.type }, (request !== null && request !== void 0 ? request : {})));\n        };\n    }\n    get cid() {\n        return `${this.type}:${this.id}`;\n    }\n}\n\nclass StreamVideoClient extends VideoApi {\n    constructor() {\n        super(...arguments);\n        this.call = (type, id) => {\n            return new StreamCall(this, type, id);\n        };\n    }\n}\n\nclass ChatApi extends BaseApi {\n    constructor() {\n        super(...arguments);\n        this.queryChannels = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                member_limit: request === null || request === void 0 ? void 0 : request.member_limit,\n                message_limit: request === null || request === void 0 ? void 0 : request.message_limit,\n                offset: request === null || request === void 0 ? void 0 : request.offset,\n                state: request === null || request === void 0 ? void 0 : request.state,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter_conditions: request === null || request === void 0 ? void 0 : request.filter_conditions,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels', undefined, undefined, body);\n            (_a = decoders.QueryChannelsResponse) === null || _a === void 0 ? void 0 : _a.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteChannels = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            const body = {\n                cids: request === null || request === void 0 ? void 0 : request.cids,\n                hard_delete: request === null || request === void 0 ? void 0 : request.hard_delete,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/delete', undefined, undefined, body);\n            (_b = decoders.DeleteChannelsResponse) === null || _b === void 0 ? void 0 : _b.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.markChannelsRead = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _c;\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                read_by_channel: request === null || request === void 0 ? void 0 : request.read_by_channel,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/read', undefined, undefined, body);\n            (_c = decoders.MarkReadResponse) === null || _c === void 0 ? void 0 : _c.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getOrCreateDistinctChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n            };\n            const body = {\n                hide_for_creator: request === null || request === void 0 ? void 0 : request.hide_for_creator,\n                state: request === null || request === void 0 ? void 0 : request.state,\n                thread_unread_counts: request === null || request === void 0 ? void 0 : request.thread_unread_counts,\n                data: request === null || request === void 0 ? void 0 : request.data,\n                members: request === null || request === void 0 ? void 0 : request.members,\n                messages: request === null || request === void 0 ? void 0 : request.messages,\n                watchers: request === null || request === void 0 ? void 0 : request.watchers,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/query', pathParams, undefined, body);\n            (_d = decoders.ChannelStateResponse) === null || _d === void 0 ? void 0 : _d.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _e;\n            const queryParams = {\n                hard_delete: request === null || request === void 0 ? void 0 : request.hard_delete,\n            };\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/channels/{type}/{id}', pathParams, queryParams);\n            (_e = decoders.DeleteChannelResponse) === null || _e === void 0 ? void 0 : _e.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateChannelPartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _f;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                unset: request === null || request === void 0 ? void 0 : request.unset,\n                set: request === null || request === void 0 ? void 0 : request.set,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/chat/channels/{type}/{id}', pathParams, undefined, body);\n            (_f = decoders.UpdateChannelPartialResponse) === null || _f === void 0 ? void 0 : _f.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                accept_invite: request === null || request === void 0 ? void 0 : request.accept_invite,\n                cooldown: request === null || request === void 0 ? void 0 : request.cooldown,\n                hide_history: request === null || request === void 0 ? void 0 : request.hide_history,\n                reject_invite: request === null || request === void 0 ? void 0 : request.reject_invite,\n                skip_push: request === null || request === void 0 ? void 0 : request.skip_push,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                add_members: request === null || request === void 0 ? void 0 : request.add_members,\n                add_moderators: request === null || request === void 0 ? void 0 : request.add_moderators,\n                assign_roles: request === null || request === void 0 ? void 0 : request.assign_roles,\n                demote_moderators: request === null || request === void 0 ? void 0 : request.demote_moderators,\n                invites: request === null || request === void 0 ? void 0 : request.invites,\n                remove_members: request === null || request === void 0 ? void 0 : request.remove_members,\n                data: request === null || request === void 0 ? void 0 : request.data,\n                message: request === null || request === void 0 ? void 0 : request.message,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}', pathParams, undefined, body);\n            (_g = decoders.UpdateChannelResponse) === null || _g === void 0 ? void 0 : _g.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.sendEvent = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _h;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                event: request === null || request === void 0 ? void 0 : request.event,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/event', pathParams, undefined, body);\n            (_h = decoders.EventResponse) === null || _h === void 0 ? void 0 : _h.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteFile = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _j;\n            const queryParams = {\n                url: request === null || request === void 0 ? void 0 : request.url,\n            };\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/channels/{type}/{id}/file', pathParams, queryParams);\n            (_j = decoders.Response) === null || _j === void 0 ? void 0 : _j.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.uploadFile = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _k;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                file: request === null || request === void 0 ? void 0 : request.file,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/file', pathParams, undefined, body);\n            (_k = decoders.FileUploadResponse) === null || _k === void 0 ? void 0 : _k.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.hideChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _l;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                clear_history: request === null || request === void 0 ? void 0 : request.clear_history,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/hide', pathParams, undefined, body);\n            (_l = decoders.HideChannelResponse) === null || _l === void 0 ? void 0 : _l.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteImage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _m;\n            const queryParams = {\n                url: request === null || request === void 0 ? void 0 : request.url,\n            };\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/channels/{type}/{id}/image', pathParams, queryParams);\n            (_m = decoders.Response) === null || _m === void 0 ? void 0 : _m.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.uploadImage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _o;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                file: request === null || request === void 0 ? void 0 : request.file,\n                upload_sizes: request === null || request === void 0 ? void 0 : request.upload_sizes,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/image', pathParams, undefined, body);\n            (_o = decoders.ImageUploadResponse) === null || _o === void 0 ? void 0 : _o.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateMemberPartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _p;\n            const pathParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                unset: request === null || request === void 0 ? void 0 : request.unset,\n                set: request === null || request === void 0 ? void 0 : request.set,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/chat/channels/{type}/{id}/member/{user_id}', pathParams, undefined, body);\n            (_p = decoders.UpdateMemberPartialResponse) === null || _p === void 0 ? void 0 : _p.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.sendMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _q;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                message: request === null || request === void 0 ? void 0 : request.message,\n                force_moderation: request === null || request === void 0 ? void 0 : request.force_moderation,\n                keep_channel_hidden: request === null || request === void 0 ? void 0 : request.keep_channel_hidden,\n                pending: request === null || request === void 0 ? void 0 : request.pending,\n                skip_enrich_url: request === null || request === void 0 ? void 0 : request.skip_enrich_url,\n                skip_push: request === null || request === void 0 ? void 0 : request.skip_push,\n                pending_message_metadata: request === null || request === void 0 ? void 0 : request.pending_message_metadata,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/message', pathParams, undefined, body);\n            (_q = decoders.SendMessageResponse) === null || _q === void 0 ? void 0 : _q.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getManyMessages = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _r;\n            const queryParams = {\n                ids: request === null || request === void 0 ? void 0 : request.ids,\n            };\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/channels/{type}/{id}/messages', pathParams, queryParams);\n            (_r = decoders.GetManyMessagesResponse) === null || _r === void 0 ? void 0 : _r.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getOrCreateChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _s;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                hide_for_creator: request === null || request === void 0 ? void 0 : request.hide_for_creator,\n                state: request === null || request === void 0 ? void 0 : request.state,\n                thread_unread_counts: request === null || request === void 0 ? void 0 : request.thread_unread_counts,\n                data: request === null || request === void 0 ? void 0 : request.data,\n                members: request === null || request === void 0 ? void 0 : request.members,\n                messages: request === null || request === void 0 ? void 0 : request.messages,\n                watchers: request === null || request === void 0 ? void 0 : request.watchers,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/query', pathParams, undefined, body);\n            (_s = decoders.ChannelStateResponse) === null || _s === void 0 ? void 0 : _s.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.markRead = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _t;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n                thread_id: request === null || request === void 0 ? void 0 : request.thread_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/read', pathParams, undefined, body);\n            (_t = decoders.MarkReadResponse) === null || _t === void 0 ? void 0 : _t.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.showChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _u;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/show', pathParams, undefined, body);\n            (_u = decoders.ShowChannelResponse) === null || _u === void 0 ? void 0 : _u.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.truncateChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _v;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                hard_delete: request === null || request === void 0 ? void 0 : request.hard_delete,\n                skip_push: request === null || request === void 0 ? void 0 : request.skip_push,\n                truncated_at: request === null || request === void 0 ? void 0 : request.truncated_at,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                message: request === null || request === void 0 ? void 0 : request.message,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/truncate', pathParams, undefined, body);\n            (_v = decoders.TruncateChannelResponse) === null || _v === void 0 ? void 0 : _v.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.markUnread = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _w;\n            const pathParams = {\n                type: request === null || request === void 0 ? void 0 : request.type,\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n                thread_id: request === null || request === void 0 ? void 0 : request.thread_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channels/{type}/{id}/unread', pathParams, undefined, body);\n            (_w = decoders.Response) === null || _w === void 0 ? void 0 : _w.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listChannelTypes = () => __awaiter(this, void 0, void 0, function* () {\n            var _x;\n            const response = yield this.sendRequest('GET', '/api/v2/chat/channeltypes', undefined, undefined);\n            (_x = decoders.ListChannelTypesResponse) === null || _x === void 0 ? void 0 : _x.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createChannelType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _y;\n            const body = {\n                automod: request === null || request === void 0 ? void 0 : request.automod,\n                automod_behavior: request === null || request === void 0 ? void 0 : request.automod_behavior,\n                max_message_length: request === null || request === void 0 ? void 0 : request.max_message_length,\n                name: request === null || request === void 0 ? void 0 : request.name,\n                blocklist: request === null || request === void 0 ? void 0 : request.blocklist,\n                blocklist_behavior: request === null || request === void 0 ? void 0 : request.blocklist_behavior,\n                connect_events: request === null || request === void 0 ? void 0 : request.connect_events,\n                custom_events: request === null || request === void 0 ? void 0 : request.custom_events,\n                mark_messages_pending: request === null || request === void 0 ? void 0 : request.mark_messages_pending,\n                message_retention: request === null || request === void 0 ? void 0 : request.message_retention,\n                mutes: request === null || request === void 0 ? void 0 : request.mutes,\n                partition_size: request === null || request === void 0 ? void 0 : request.partition_size,\n                partition_ttl: request === null || request === void 0 ? void 0 : request.partition_ttl,\n                polls: request === null || request === void 0 ? void 0 : request.polls,\n                push_notifications: request === null || request === void 0 ? void 0 : request.push_notifications,\n                reactions: request === null || request === void 0 ? void 0 : request.reactions,\n                read_events: request === null || request === void 0 ? void 0 : request.read_events,\n                replies: request === null || request === void 0 ? void 0 : request.replies,\n                search: request === null || request === void 0 ? void 0 : request.search,\n                typing_events: request === null || request === void 0 ? void 0 : request.typing_events,\n                uploads: request === null || request === void 0 ? void 0 : request.uploads,\n                url_enrichment: request === null || request === void 0 ? void 0 : request.url_enrichment,\n                blocklists: request === null || request === void 0 ? void 0 : request.blocklists,\n                commands: request === null || request === void 0 ? void 0 : request.commands,\n                permissions: request === null || request === void 0 ? void 0 : request.permissions,\n                grants: request === null || request === void 0 ? void 0 : request.grants,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/channeltypes', undefined, undefined, body);\n            (_y = decoders.CreateChannelTypeResponse) === null || _y === void 0 ? void 0 : _y.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteChannelType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _z;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/channeltypes/{name}', pathParams, undefined);\n            (_z = decoders.Response) === null || _z === void 0 ? void 0 : _z.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getChannelType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _0;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/channeltypes/{name}', pathParams, undefined);\n            (_0 = decoders.GetChannelTypeResponse) === null || _0 === void 0 ? void 0 : _0.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateChannelType = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _1;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const body = {\n                automod: request === null || request === void 0 ? void 0 : request.automod,\n                automod_behavior: request === null || request === void 0 ? void 0 : request.automod_behavior,\n                max_message_length: request === null || request === void 0 ? void 0 : request.max_message_length,\n                blocklist: request === null || request === void 0 ? void 0 : request.blocklist,\n                blocklist_behavior: request === null || request === void 0 ? void 0 : request.blocklist_behavior,\n                connect_events: request === null || request === void 0 ? void 0 : request.connect_events,\n                custom_events: request === null || request === void 0 ? void 0 : request.custom_events,\n                mark_messages_pending: request === null || request === void 0 ? void 0 : request.mark_messages_pending,\n                mutes: request === null || request === void 0 ? void 0 : request.mutes,\n                partition_size: request === null || request === void 0 ? void 0 : request.partition_size,\n                partition_ttl: request === null || request === void 0 ? void 0 : request.partition_ttl,\n                polls: request === null || request === void 0 ? void 0 : request.polls,\n                push_notifications: request === null || request === void 0 ? void 0 : request.push_notifications,\n                quotes: request === null || request === void 0 ? void 0 : request.quotes,\n                reactions: request === null || request === void 0 ? void 0 : request.reactions,\n                read_events: request === null || request === void 0 ? void 0 : request.read_events,\n                reminders: request === null || request === void 0 ? void 0 : request.reminders,\n                replies: request === null || request === void 0 ? void 0 : request.replies,\n                search: request === null || request === void 0 ? void 0 : request.search,\n                typing_events: request === null || request === void 0 ? void 0 : request.typing_events,\n                uploads: request === null || request === void 0 ? void 0 : request.uploads,\n                url_enrichment: request === null || request === void 0 ? void 0 : request.url_enrichment,\n                allowed_flag_reasons: request === null || request === void 0 ? void 0 : request.allowed_flag_reasons,\n                blocklists: request === null || request === void 0 ? void 0 : request.blocklists,\n                commands: request === null || request === void 0 ? void 0 : request.commands,\n                permissions: request === null || request === void 0 ? void 0 : request.permissions,\n                automod_thresholds: request === null || request === void 0 ? void 0 : request.automod_thresholds,\n                grants: request === null || request === void 0 ? void 0 : request.grants,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/chat/channeltypes/{name}', pathParams, undefined, body);\n            (_1 = decoders.UpdateChannelTypeResponse) === null || _1 === void 0 ? void 0 : _1.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.listCommands = () => __awaiter(this, void 0, void 0, function* () {\n            var _2;\n            const response = yield this.sendRequest('GET', '/api/v2/chat/commands', undefined, undefined);\n            (_2 = decoders.ListCommandsResponse) === null || _2 === void 0 ? void 0 : _2.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createCommand = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _3;\n            const body = {\n                description: request === null || request === void 0 ? void 0 : request.description,\n                name: request === null || request === void 0 ? void 0 : request.name,\n                args: request === null || request === void 0 ? void 0 : request.args,\n                set: request === null || request === void 0 ? void 0 : request.set,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/commands', undefined, undefined, body);\n            (_3 = decoders.CreateCommandResponse) === null || _3 === void 0 ? void 0 : _3.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteCommand = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _4;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/commands/{name}', pathParams, undefined);\n            (_4 = decoders.DeleteCommandResponse) === null || _4 === void 0 ? void 0 : _4.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getCommand = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _5;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/commands/{name}', pathParams, undefined);\n            (_5 = decoders.GetCommandResponse) === null || _5 === void 0 ? void 0 : _5.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateCommand = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _6;\n            const pathParams = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n            };\n            const body = {\n                description: request === null || request === void 0 ? void 0 : request.description,\n                args: request === null || request === void 0 ? void 0 : request.args,\n                set: request === null || request === void 0 ? void 0 : request.set,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/chat/commands/{name}', pathParams, undefined, body);\n            (_6 = decoders.UpdateCommandResponse) === null || _6 === void 0 ? void 0 : _6.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.exportChannels = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _7;\n            const body = {\n                channels: request === null || request === void 0 ? void 0 : request.channels,\n                clear_deleted_message_text: request === null || request === void 0 ? void 0 : request.clear_deleted_message_text,\n                export_users: request === null || request === void 0 ? void 0 : request.export_users,\n                include_soft_deleted_channels: request === null || request === void 0 ? void 0 : request.include_soft_deleted_channels,\n                include_truncated_messages: request === null || request === void 0 ? void 0 : request.include_truncated_messages,\n                version: request === null || request === void 0 ? void 0 : request.version,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/export_channels', undefined, undefined, body);\n            (_7 = decoders.ExportChannelsResponse) === null || _7 === void 0 ? void 0 : _7.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getExportChannelsStatus = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _8;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/export_channels/{id}', pathParams, undefined);\n            (_8 = decoders.GetExportChannelsStatusResponse) === null || _8 === void 0 ? void 0 : _8.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryMembers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _9;\n            const queryParams = {\n                payload: request === null || request === void 0 ? void 0 : request.payload,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/members', undefined, queryParams);\n            (_9 = decoders.MembersResponse) === null || _9 === void 0 ? void 0 : _9.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryMessageHistory = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _10;\n            const body = {\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/history', undefined, undefined, body);\n            (_10 = decoders.QueryMessageHistoryResponse) === null || _10 === void 0 ? void 0 : _10.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _11;\n            const queryParams = {\n                hard: request === null || request === void 0 ? void 0 : request.hard,\n                deleted_by: request === null || request === void 0 ? void 0 : request.deleted_by,\n            };\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/messages/{id}', pathParams, queryParams);\n            (_11 = decoders.DeleteMessageResponse) === null || _11 === void 0 ? void 0 : _11.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _12;\n            const queryParams = {\n                show_deleted_message: request === null || request === void 0 ? void 0 : request.show_deleted_message,\n            };\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/messages/{id}', pathParams, queryParams);\n            (_12 = decoders.GetMessageResponse) === null || _12 === void 0 ? void 0 : _12.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _13;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                message: request === null || request === void 0 ? void 0 : request.message,\n                skip_enrich_url: request === null || request === void 0 ? void 0 : request.skip_enrich_url,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}', pathParams, undefined, body);\n            (_13 = decoders.UpdateMessageResponse) === null || _13 === void 0 ? void 0 : _13.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateMessagePartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _14;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                skip_enrich_url: request === null || request === void 0 ? void 0 : request.skip_enrich_url,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                unset: request === null || request === void 0 ? void 0 : request.unset,\n                set: request === null || request === void 0 ? void 0 : request.set,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/chat/messages/{id}', pathParams, undefined, body);\n            (_14 = decoders.UpdateMessagePartialResponse) === null || _14 === void 0 ? void 0 : _14.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.runMessageAction = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _15;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                form_data: request === null || request === void 0 ? void 0 : request.form_data,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}/action', pathParams, undefined, body);\n            (_15 = decoders.MessageResponse) === null || _15 === void 0 ? void 0 : _15.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.commitMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _16;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {};\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}/commit', pathParams, undefined, body);\n            (_16 = decoders.MessageResponse) === null || _16 === void 0 ? void 0 : _16.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.sendReaction = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _17;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                reaction: request === null || request === void 0 ? void 0 : request.reaction,\n                enforce_unique: request === null || request === void 0 ? void 0 : request.enforce_unique,\n                skip_push: request === null || request === void 0 ? void 0 : request.skip_push,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}/reaction', pathParams, undefined, body);\n            (_17 = decoders.SendReactionResponse) === null || _17 === void 0 ? void 0 : _17.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deleteReaction = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _18;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n                type: request === null || request === void 0 ? void 0 : request.type,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/messages/{id}/reaction/{type}', pathParams, queryParams);\n            (_18 = decoders.ReactionRemovalResponse) === null || _18 === void 0 ? void 0 : _18.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getReactions = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _19;\n            const queryParams = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                offset: request === null || request === void 0 ? void 0 : request.offset,\n            };\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/messages/{id}/reactions', pathParams, queryParams);\n            (_19 = decoders.GetReactionsResponse) === null || _19 === void 0 ? void 0 : _19.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryReactions = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _20;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}/reactions', pathParams, undefined, body);\n            (_20 = decoders.QueryReactionsResponse) === null || _20 === void 0 ? void 0 : _20.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.translateMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _21;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                language: request === null || request === void 0 ? void 0 : request.language,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}/translate', pathParams, undefined, body);\n            (_21 = decoders.MessageResponse) === null || _21 === void 0 ? void 0 : _21.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.undeleteMessage = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _22;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const body = {\n                message: request === null || request === void 0 ? void 0 : request.message,\n                skip_enrich_url: request === null || request === void 0 ? void 0 : request.skip_enrich_url,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{id}/undelete', pathParams, undefined, body);\n            (_22 = decoders.UpdateMessageResponse) === null || _22 === void 0 ? void 0 : _22.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.castPollVote = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _23;\n            const pathParams = {\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n                vote: request === null || request === void 0 ? void 0 : request.vote,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/messages/{message_id}/polls/{poll_id}/vote', pathParams, undefined, body);\n            (_23 = decoders.PollVoteResponse) === null || _23 === void 0 ? void 0 : _23.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.removePollVote = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _24;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n                vote_id: request === null || request === void 0 ? void 0 : request.vote_id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/messages/{message_id}/polls/{poll_id}/vote/{vote_id}', pathParams, queryParams);\n            (_24 = decoders.PollVoteResponse) === null || _24 === void 0 ? void 0 : _24.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getReplies = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _25;\n            const queryParams = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                offset: request === null || request === void 0 ? void 0 : request.offset,\n                id_gte: request === null || request === void 0 ? void 0 : request.id_gte,\n                id_gt: request === null || request === void 0 ? void 0 : request.id_gt,\n                id_lte: request === null || request === void 0 ? void 0 : request.id_lte,\n                id_lt: request === null || request === void 0 ? void 0 : request.id_lt,\n                created_at_after_or_equal: request === null || request === void 0 ? void 0 : request.created_at_after_or_equal,\n                created_at_after: request === null || request === void 0 ? void 0 : request.created_at_after,\n                created_at_before_or_equal: request === null || request === void 0 ? void 0 : request.created_at_before_or_equal,\n                created_at_before: request === null || request === void 0 ? void 0 : request.created_at_before,\n                id_around: request === null || request === void 0 ? void 0 : request.id_around,\n                created_at_around: request === null || request === void 0 ? void 0 : request.created_at_around,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n            };\n            const pathParams = {\n                parent_id: request === null || request === void 0 ? void 0 : request.parent_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/messages/{parent_id}/replies', pathParams, queryParams);\n            (_25 = decoders.GetRepliesResponse) === null || _25 === void 0 ? void 0 : _25.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryMessageFlags = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _26;\n            const queryParams = {\n                payload: request === null || request === void 0 ? void 0 : request.payload,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/moderation/flags/message', undefined, queryParams);\n            (_26 = decoders.QueryMessageFlagsResponse) === null || _26 === void 0 ? void 0 : _26.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.muteChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _27;\n            const body = {\n                expiration: request === null || request === void 0 ? void 0 : request.expiration,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                channel_cids: request === null || request === void 0 ? void 0 : request.channel_cids,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/moderation/mute/channel', undefined, undefined, body);\n            (_27 = decoders.MuteChannelResponse) === null || _27 === void 0 ? void 0 : _27.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unmuteChannel = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _28;\n            const body = {\n                expiration: request === null || request === void 0 ? void 0 : request.expiration,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                channel_cids: request === null || request === void 0 ? void 0 : request.channel_cids,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/moderation/unmute/channel', undefined, undefined, body);\n            (_28 = decoders.UnmuteResponse) === null || _28 === void 0 ? void 0 : _28.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createPoll = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _29;\n            const body = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n                allow_answers: request === null || request === void 0 ? void 0 : request.allow_answers,\n                allow_user_suggested_options: request === null || request === void 0 ? void 0 : request.allow_user_suggested_options,\n                description: request === null || request === void 0 ? void 0 : request.description,\n                enforce_unique_vote: request === null || request === void 0 ? void 0 : request.enforce_unique_vote,\n                id: request === null || request === void 0 ? void 0 : request.id,\n                is_closed: request === null || request === void 0 ? void 0 : request.is_closed,\n                max_votes_allowed: request === null || request === void 0 ? void 0 : request.max_votes_allowed,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                voting_visibility: request === null || request === void 0 ? void 0 : request.voting_visibility,\n                options: request === null || request === void 0 ? void 0 : request.options,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/polls', undefined, undefined, body);\n            (_29 = decoders.PollResponse) === null || _29 === void 0 ? void 0 : _29.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updatePoll = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _30;\n            const body = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n                name: request === null || request === void 0 ? void 0 : request.name,\n                allow_answers: request === null || request === void 0 ? void 0 : request.allow_answers,\n                allow_user_suggested_options: request === null || request === void 0 ? void 0 : request.allow_user_suggested_options,\n                description: request === null || request === void 0 ? void 0 : request.description,\n                enforce_unique_vote: request === null || request === void 0 ? void 0 : request.enforce_unique_vote,\n                is_closed: request === null || request === void 0 ? void 0 : request.is_closed,\n                max_votes_allowed: request === null || request === void 0 ? void 0 : request.max_votes_allowed,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                voting_visibility: request === null || request === void 0 ? void 0 : request.voting_visibility,\n                options: request === null || request === void 0 ? void 0 : request.options,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/chat/polls', undefined, undefined, body);\n            (_30 = decoders.PollResponse) === null || _30 === void 0 ? void 0 : _30.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryPolls = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _31;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/polls/query', undefined, queryParams, body);\n            (_31 = decoders.QueryPollsResponse) === null || _31 === void 0 ? void 0 : _31.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deletePoll = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _32;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/polls/{poll_id}', pathParams, queryParams);\n            (_32 = decoders.Response) === null || _32 === void 0 ? void 0 : _32.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getPoll = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _33;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/polls/{poll_id}', pathParams, queryParams);\n            (_33 = decoders.PollResponse) === null || _33 === void 0 ? void 0 : _33.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updatePollPartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _34;\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                unset: request === null || request === void 0 ? void 0 : request.unset,\n                set: request === null || request === void 0 ? void 0 : request.set,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/chat/polls/{poll_id}', pathParams, undefined, body);\n            (_34 = decoders.PollResponse) === null || _34 === void 0 ? void 0 : _34.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.createPollOption = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _35;\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const body = {\n                text: request === null || request === void 0 ? void 0 : request.text,\n                position: request === null || request === void 0 ? void 0 : request.position,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/polls/{poll_id}/options', pathParams, undefined, body);\n            (_35 = decoders.PollOptionResponse) === null || _35 === void 0 ? void 0 : _35.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updatePollOption = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _36;\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const body = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n                text: request === null || request === void 0 ? void 0 : request.text,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('PUT', '/api/v2/chat/polls/{poll_id}/options', pathParams, undefined, body);\n            (_36 = decoders.PollOptionResponse) === null || _36 === void 0 ? void 0 : _36.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.deletePollOption = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _37;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n                option_id: request === null || request === void 0 ? void 0 : request.option_id,\n            };\n            const response = yield this.sendRequest('DELETE', '/api/v2/chat/polls/{poll_id}/options/{option_id}', pathParams, queryParams);\n            (_37 = decoders.Response) === null || _37 === void 0 ? void 0 : _37.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getPollOption = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _38;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n                option_id: request === null || request === void 0 ? void 0 : request.option_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/polls/{poll_id}/options/{option_id}', pathParams, queryParams);\n            (_38 = decoders.PollOptionResponse) === null || _38 === void 0 ? void 0 : _38.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryPollVotes = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _39;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const pathParams = {\n                poll_id: request === null || request === void 0 ? void 0 : request.poll_id,\n            };\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/polls/{poll_id}/votes', pathParams, queryParams, body);\n            (_39 = decoders.PollVotesResponse) === null || _39 === void 0 ? void 0 : _39.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryBannedUsers = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _40;\n            const queryParams = {\n                payload: request === null || request === void 0 ? void 0 : request.payload,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/query_banned_users', undefined, queryParams);\n            (_40 = decoders.QueryBannedUsersResponse) === null || _40 === void 0 ? void 0 : _40.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.search = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _41;\n            const queryParams = {\n                payload: request === null || request === void 0 ? void 0 : request.payload,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/search', undefined, queryParams);\n            (_41 = decoders.SearchResponse) === null || _41 === void 0 ? void 0 : _41.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryThreads = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _42;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                member_limit: request === null || request === void 0 ? void 0 : request.member_limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                participant_limit: request === null || request === void 0 ? void 0 : request.participant_limit,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                reply_limit: request === null || request === void 0 ? void 0 : request.reply_limit,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/threads', undefined, undefined, body);\n            (_42 = decoders.QueryThreadsResponse) === null || _42 === void 0 ? void 0 : _42.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getThread = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _43;\n            const queryParams = {\n                connection_id: request === null || request === void 0 ? void 0 : request.connection_id,\n                reply_limit: request === null || request === void 0 ? void 0 : request.reply_limit,\n                participant_limit: request === null || request === void 0 ? void 0 : request.participant_limit,\n                member_limit: request === null || request === void 0 ? void 0 : request.member_limit,\n            };\n            const pathParams = {\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/chat/threads/{message_id}', pathParams, queryParams);\n            (_43 = decoders.GetThreadResponse) === null || _43 === void 0 ? void 0 : _43.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.updateThreadPartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _44;\n            const pathParams = {\n                message_id: request === null || request === void 0 ? void 0 : request.message_id,\n            };\n            const body = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                unset: request === null || request === void 0 ? void 0 : request.unset,\n                set: request === null || request === void 0 ? void 0 : request.set,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('PATCH', '/api/v2/chat/threads/{message_id}', pathParams, undefined, body);\n            (_44 = decoders.UpdateThreadPartialResponse) === null || _44 === void 0 ? void 0 : _44.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unreadCounts = () => __awaiter(this, void 0, void 0, function* () {\n            var _45;\n            const response = yield this.sendRequest('GET', '/api/v2/chat/unread', undefined, undefined);\n            (_45 = decoders.WrappedUnreadCountsResponse) === null || _45 === void 0 ? void 0 : _45.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unreadCountsBatch = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _46;\n            const body = {\n                user_ids: request === null || request === void 0 ? void 0 : request.user_ids,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/unread_batch', undefined, undefined, body);\n            (_46 = decoders.UnreadCountsBatchResponse) === null || _46 === void 0 ? void 0 : _46.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.sendUserCustomEvent = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _47;\n            const pathParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n            };\n            const body = {\n                event: request === null || request === void 0 ? void 0 : request.event,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/chat/users/{user_id}/event', pathParams, undefined, body);\n            (_47 = decoders.Response) === null || _47 === void 0 ? void 0 : _47.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n    }\n}\n\nclass ChannelApi {\n    constructor(chatApi, type, id) {\n        this.chatApi = chatApi;\n        this.type = type;\n        this.id = id;\n        this.delete = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.deleteChannel(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.updateChannelPartial = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.updateChannelPartial(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.update = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.updateChannel(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.sendEvent = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.sendEvent(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.deleteFile = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.deleteFile(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.uploadFile = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.uploadFile(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.hide = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.hideChannel(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.deleteImage = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.deleteImage(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.uploadImage = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.uploadImage(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.updateMemberPartial = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.updateMemberPartial(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.sendMessage = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.sendMessage(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.getManyMessages = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.getManyMessages(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.getOrCreate = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.getOrCreateChannel(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.markRead = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.markRead(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.show = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.showChannel(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.truncate = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.truncateChannel(Object.assign({ id: this.id, type: this.type }, request));\n        };\n        this.markUnread = (request) => {\n            if (!this.id) {\n                throw new Error(`Channel isn't yet created, call getOrCreateDistinctChannel() before this operation`);\n            }\n            return this.chatApi.markUnread(Object.assign({ id: this.id, type: this.type }, request));\n        };\n    }\n}\n\nclass StreamChannel extends ChannelApi {\n    constructor() {\n        super(...arguments);\n        this.getOrCreate = (channel_get_or_create_request) => {\n            if (!this.id) {\n                return this.chatApi\n                    .getOrCreateDistinctChannel(Object.assign({ type: this.type }, channel_get_or_create_request))\n                    .then((response) => {\n                    var _a;\n                    this.id = (_a = response.channel) === null || _a === void 0 ? void 0 : _a.id;\n                    return response;\n                });\n            }\n            else {\n                return this.chatApi.getOrCreateChannel(Object.assign({ id: this.id, type: this.type }, channel_get_or_create_request));\n            }\n        };\n    }\n    get cid() {\n        return `${this.type}:${this.id}`;\n    }\n    queryMembers(request) {\n        var _a;\n        return this.chatApi.queryMembers({\n            payload: Object.assign({ id: this.id, type: this.type }, ((_a = request === null || request === void 0 ? void 0 : request.payload) !== null && _a !== void 0 ? _a : { filter_conditions: {} })),\n        });\n    }\n}\n\nclass StreamChatClient extends ChatApi {\n    constructor() {\n        super(...arguments);\n        this.channel = (type, id) => {\n            return new StreamChannel(this, type, id);\n        };\n    }\n}\n\nclass ModerationApi extends BaseApi {\n    constructor() {\n        super(...arguments);\n        this.ban = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const body = {\n                target_user_id: request === null || request === void 0 ? void 0 : request.target_user_id,\n                banned_by_id: request === null || request === void 0 ? void 0 : request.banned_by_id,\n                channel_cid: request === null || request === void 0 ? void 0 : request.channel_cid,\n                ip_ban: request === null || request === void 0 ? void 0 : request.ip_ban,\n                reason: request === null || request === void 0 ? void 0 : request.reason,\n                shadow: request === null || request === void 0 ? void 0 : request.shadow,\n                timeout: request === null || request === void 0 ? void 0 : request.timeout,\n                banned_by: request === null || request === void 0 ? void 0 : request.banned_by,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/ban', undefined, undefined, body);\n            (_a = decoders.BanResponse) === null || _a === void 0 ? void 0 : _a.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.check = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            const body = {\n                config_key: request === null || request === void 0 ? void 0 : request.config_key,\n                entity_creator_id: request === null || request === void 0 ? void 0 : request.entity_creator_id,\n                entity_id: request === null || request === void 0 ? void 0 : request.entity_id,\n                entity_type: request === null || request === void 0 ? void 0 : request.entity_type,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                moderation_payload: request === null || request === void 0 ? void 0 : request.moderation_payload,\n                options: request === null || request === void 0 ? void 0 : request.options,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/check', undefined, undefined, body);\n            (_b = decoders.CheckResponse) === null || _b === void 0 ? void 0 : _b.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.upsertConfig = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _c;\n            const body = {\n                key: request === null || request === void 0 ? void 0 : request.key,\n                async: request === null || request === void 0 ? void 0 : request.async,\n                automod_platform_circumvention_config: request === null || request === void 0 ? void 0 : request.automod_platform_circumvention_config,\n                automod_semantic_filters_config: request === null || request === void 0 ? void 0 : request.automod_semantic_filters_config,\n                automod_toxicity_config: request === null || request === void 0 ? void 0 : request.automod_toxicity_config,\n                aws_rek_og_nition_config: request === null || request === void 0 ? void 0 : request.aws_rek_og_nition_config,\n                block_list_config: request === null || request === void 0 ? void 0 : request.block_list_config,\n                bodyguard_config: request === null || request === void 0 ? void 0 : request.bodyguard_config,\n                go_og_le_vision_config: request === null || request === void 0 ? void 0 : request.go_og_le_vision_config,\n                velocity_filter_config: request === null || request === void 0 ? void 0 : request.velocity_filter_config,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/config', undefined, undefined, body);\n            (_c = decoders.UpsertConfigResponse) === null || _c === void 0 ? void 0 : _c.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getConfig = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            const pathParams = {\n                key: request === null || request === void 0 ? void 0 : request.key,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/moderation/config/{key}', pathParams, undefined);\n            (_d = decoders.GetConfigResponse) === null || _d === void 0 ? void 0 : _d.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.customCheck = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _e;\n            const body = {\n                entity_creator_id: request === null || request === void 0 ? void 0 : request.entity_creator_id,\n                entity_id: request === null || request === void 0 ? void 0 : request.entity_id,\n                entity_type: request === null || request === void 0 ? void 0 : request.entity_type,\n                name: request === null || request === void 0 ? void 0 : request.name,\n                reason: request === null || request === void 0 ? void 0 : request.reason,\n                recommended_action: request === null || request === void 0 ? void 0 : request.recommended_action,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                moderation_payload: request === null || request === void 0 ? void 0 : request.moderation_payload,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/custom_check', undefined, undefined, body);\n            (_e = decoders.CustomCheckResponse) === null || _e === void 0 ? void 0 : _e.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.v2DeleteTemplate = () => __awaiter(this, void 0, void 0, function* () {\n            var _f;\n            const response = yield this.sendRequest('DELETE', '/api/v2/moderation/feeds_moderation_template', undefined, undefined);\n            (_f = decoders.DeleteModerationTemplateResponse) === null || _f === void 0 ? void 0 : _f.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.v2QueryTemplates = () => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            const response = yield this.sendRequest('GET', '/api/v2/moderation/feeds_moderation_template', undefined, undefined);\n            (_g = decoders.QueryFeedModerationTemplatesResponse) === null || _g === void 0 ? void 0 : _g.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.v2UpsertTemplate = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _h;\n            const body = {\n                name: request === null || request === void 0 ? void 0 : request.name,\n                config: request === null || request === void 0 ? void 0 : request.config,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/feeds_moderation_template', undefined, undefined, body);\n            (_h = decoders.UpsertModerationTemplateResponse) === null || _h === void 0 ? void 0 : _h.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.flag = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _j;\n            const body = {\n                entity_id: request === null || request === void 0 ? void 0 : request.entity_id,\n                entity_type: request === null || request === void 0 ? void 0 : request.entity_type,\n                reason: request === null || request === void 0 ? void 0 : request.reason,\n                entity_creator_id: request === null || request === void 0 ? void 0 : request.entity_creator_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                moderation_payload: request === null || request === void 0 ? void 0 : request.moderation_payload,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/flag', undefined, undefined, body);\n            (_j = decoders.FlagResponse) === null || _j === void 0 ? void 0 : _j.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryModerationLogs = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _k;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/logs', undefined, undefined, body);\n            (_k = decoders.QueryModerationLogsResponse) === null || _k === void 0 ? void 0 : _k.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getModeratorStats = () => __awaiter(this, void 0, void 0, function* () {\n            var _l;\n            const response = yield this.sendRequest('GET', '/api/v2/moderation/moderator_stats', undefined, undefined);\n            (_l = decoders.ModeratorStatsResponse) === null || _l === void 0 ? void 0 : _l.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.mute = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _m;\n            const body = {\n                target_ids: request === null || request === void 0 ? void 0 : request.target_ids,\n                timeout: request === null || request === void 0 ? void 0 : request.timeout,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/mute', undefined, undefined, body);\n            (_m = decoders.MuteResponse) === null || _m === void 0 ? void 0 : _m.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getQueueStats = () => __awaiter(this, void 0, void 0, function* () {\n            var _o;\n            const response = yield this.sendRequest('GET', '/api/v2/moderation/queue_stats', undefined, undefined);\n            (_o = decoders.QueueStatsResponse) === null || _o === void 0 ? void 0 : _o.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryReviewQueue = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _p;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                lock_moderator_duration: request === null || request === void 0 ? void 0 : request.lock_moderator_duration,\n                lock_moderator_id: request === null || request === void 0 ? void 0 : request.lock_moderator_id,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                stats_only: request === null || request === void 0 ? void 0 : request.stats_only,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/review_queue', undefined, undefined, body);\n            (_p = decoders.QueryReviewQueueResponse) === null || _p === void 0 ? void 0 : _p.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getReviewQueueItem = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _q;\n            const pathParams = {\n                id: request === null || request === void 0 ? void 0 : request.id,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/moderation/review_queue/{id}', pathParams, undefined);\n            (_q = decoders.GetReviewQueueItemResponse) === null || _q === void 0 ? void 0 : _q.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.submitAction = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _r;\n            const body = {\n                action_type: request === null || request === void 0 ? void 0 : request.action_type,\n                item_id: request === null || request === void 0 ? void 0 : request.item_id,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                ban: request === null || request === void 0 ? void 0 : request.ban,\n                custom: request === null || request === void 0 ? void 0 : request.custom,\n                delete_activity: request === null || request === void 0 ? void 0 : request.delete_activity,\n                delete_message: request === null || request === void 0 ? void 0 : request.delete_message,\n                delete_reaction: request === null || request === void 0 ? void 0 : request.delete_reaction,\n                delete_user: request === null || request === void 0 ? void 0 : request.delete_user,\n                unban: request === null || request === void 0 ? void 0 : request.unban,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/submit_action', undefined, undefined, body);\n            (_r = decoders.SubmitActionResponse) === null || _r === void 0 ? void 0 : _r.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unban = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _s;\n            const queryParams = {\n                target_user_id: request === null || request === void 0 ? void 0 : request.target_user_id,\n                channel_cid: request === null || request === void 0 ? void 0 : request.channel_cid,\n                created_by: request === null || request === void 0 ? void 0 : request.created_by,\n            };\n            const body = {\n                unbanned_by_id: request === null || request === void 0 ? void 0 : request.unbanned_by_id,\n                unbanned_by: request === null || request === void 0 ? void 0 : request.unbanned_by,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/unban', undefined, queryParams, body);\n            (_s = decoders.UnbanResponse) === null || _s === void 0 ? void 0 : _s.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.unmute = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _t;\n            const body = {\n                target_ids: request === null || request === void 0 ? void 0 : request.target_ids,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/unmute', undefined, undefined, body);\n            (_t = decoders.UnmuteResponse) === null || _t === void 0 ? void 0 : _t.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.queryUsageStats = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _u;\n            const body = {\n                limit: request === null || request === void 0 ? void 0 : request.limit,\n                next: request === null || request === void 0 ? void 0 : request.next,\n                prev: request === null || request === void 0 ? void 0 : request.prev,\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                sort: request === null || request === void 0 ? void 0 : request.sort,\n                filter: request === null || request === void 0 ? void 0 : request.filter,\n                user: request === null || request === void 0 ? void 0 : request.user,\n            };\n            const response = yield this.sendRequest('POST', '/api/v2/moderation/usage_stats', undefined, undefined, body);\n            (_u = decoders.QueryUsageStatsResponse) === null || _u === void 0 ? void 0 : _u.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n        this.getUserReport = (request) => __awaiter(this, void 0, void 0, function* () {\n            var _v;\n            const queryParams = {\n                user_id: request === null || request === void 0 ? void 0 : request.user_id,\n                create_user_if_not_exists: request === null || request === void 0 ? void 0 : request.create_user_if_not_exists,\n                include_user_mutes: request === null || request === void 0 ? void 0 : request.include_user_mutes,\n                include_user_blocks: request === null || request === void 0 ? void 0 : request.include_user_blocks,\n            };\n            const response = yield this.sendRequest('GET', '/api/v2/moderation/user_report', undefined, queryParams);\n            (_v = decoders.GetUserModerationReportResponse) === null || _v === void 0 ? void 0 : _v.call(decoders, response.body);\n            return Object.assign(Object.assign({}, response.body), { metadata: response.metadata });\n        });\n    }\n}\n\nclass StreamModerationClient extends ModerationApi {\n}\n\nclass StreamClient extends CommonApi {\n    /**\n     *\n     * @param apiKey\n     * @param secret\n     * @param config config object\n     */\n    constructor(apiKey, secret, config) {\n        var _a, _b, _c;\n        const token = JWTServerToken(secret);\n        const timeout = (_a = config === null || config === void 0 ? void 0 : config.timeout) !== null && _a !== void 0 ? _a : StreamClient.DEFAULT_TIMEOUT;\n        const chatBaseUrl = (_b = config === null || config === void 0 ? void 0 : config.basePath) !== null && _b !== void 0 ? _b : 'https://chat.stream-io-api.com';\n        const videoBaseUrl = (_c = config === null || config === void 0 ? void 0 : config.basePath) !== null && _c !== void 0 ? _c : 'https://video.stream-io-api.com';\n        super({ apiKey, token, timeout, baseUrl: chatBaseUrl });\n        this.apiKey = apiKey;\n        this.secret = secret;\n        this.config = config;\n        this.options = {};\n        this.upsertUsers = (users) => {\n            const payload = {};\n            users.forEach((u) => {\n                payload[u.id] = u;\n            });\n            return this.updateUsers({ users: payload });\n        };\n        this.queryBannedUsers = (request) => {\n            return this.chat.queryBannedUsers(request);\n        };\n        /**\n         *\n         * @param payload\n         * - user_id - the id of the user the token is for\n         * - validity_in_seconds - how many seconds is the token valid for (starting from issued at), by default it's 1 hour, dicarded if exp is provided\n         * - exp - when the token expires, unix timestamp in seconds\n         * - iat - issued at date of the token, unix timestamp in seconds, by default it's now\n         */\n        this.generateUserToken = (payload) => {\n            var _a, _b, _c;\n            const defaultIat = Math.floor((Date.now() - 1000) / 1000);\n            payload.iat = (_a = payload.iat) !== null && _a !== void 0 ? _a : defaultIat;\n            const validityInSeconds = (_b = payload.validity_in_seconds) !== null && _b !== void 0 ? _b : 60 * 60;\n            payload.exp = (_c = payload.exp) !== null && _c !== void 0 ? _c : payload.iat + validityInSeconds;\n            return JWTUserToken(this.secret, payload);\n        };\n        /**\n         *\n         * @param payload\n         * - user_id - the id of the user the token is for\n         * - validity_in_seconds - how many seconds is the token valid for (starting from issued at), by default it's 1 hour, dicarded if exp is provided\n         * - exp - when the token expires, unix timestamp in seconds\n         * - iat - issued at date of the token, unix timestamp in seconds, by default it's now\n         */\n        this.generateCallToken = (payload) => {\n            return this.generateUserToken(payload);\n        };\n        /**\n         *\n         * @param userID\n         * @param exp\n         * @param iat deprecated, the default date will be set internally\n         * @returns\n         *\n         * @deprecated use generateUserToken instead\n         */\n        this.createToken = (userID, exp = Math.round(Date.now() / 1000) + 60 * 60, iat = Math.floor((Date.now() - 1000) / 1000)) => {\n            const payload = {\n                user_id: userID,\n                exp,\n                iat,\n            };\n            return JWTUserToken(this.secret, payload);\n        };\n        /**\n         *\n         * @param userID\n         * @param call_cids\n         * @param exp\n         * @param iat this is deprecated, the current date will be set internally\n         * @returns\n         *\n         * @deprecated use generateCallToken instead\n         */\n        this.createCallToken = (userIdOrObject, call_cids, exp = Math.round(Date.now() / 1000) + 60 * 60, iat = Math.floor((Date.now() - 1000) / 1000)) => {\n            const payload = {\n                exp,\n                iat,\n                call_cids,\n                user_id: typeof userIdOrObject === 'string'\n                    ? userIdOrObject\n                    : userIdOrObject.user_id,\n            };\n            if (typeof userIdOrObject === 'object' && userIdOrObject.role) {\n                payload.role = userIdOrObject.role;\n            }\n            return JWTUserToken(this.secret, payload);\n        };\n        this.verifyWebhook = (requestBody, xSignature) => {\n            const key = Buffer.from(this.secret, 'utf8');\n            const hash = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac('sha256', key)\n                .update(requestBody)\n                .digest('hex');\n            try {\n                return crypto__WEBPACK_IMPORTED_MODULE_1___default().timingSafeEqual(Buffer.from(hash), Buffer.from(xSignature));\n            }\n            catch (err) {\n                return false;\n            }\n        };\n        this.video = new StreamVideoClient({\n            apiKey,\n            token,\n            timeout,\n            baseUrl: videoBaseUrl,\n        });\n        this.chat = new StreamChatClient({\n            apiKey,\n            token,\n            timeout,\n            baseUrl: chatBaseUrl,\n        });\n        this.moderation = new StreamModerationClient({\n            apiKey,\n            token,\n            timeout,\n            baseUrl: chatBaseUrl,\n        });\n    }\n}\nStreamClient.DEFAULT_TIMEOUT = 3000;\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL25vZGUtc2RrL2Rpc3QvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0I7QUFDTDtBQUNFOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUSxxREFBRyxZQUFZLDBEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsV0FBVyx3REFBUTtBQUNuQjtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdUNBQXVDO0FBQ3hFLFdBQVcsd0RBQVE7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsRUFBRSxXQUFXO0FBQ3JELGlCQUFpQjtBQUNqQjtBQUNBLHVCQUF1QixjQUFjO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdEQUNFO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFdUc7QUFDdkciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96b29taWUvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby9ub2RlLXNkay9kaXN0L2luZGV4LmVzLmpzPzNmM2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuY29uc3QgT3duQ2FwYWJpbGl0eSA9IHtcbiAgICBCTE9DS19VU0VSUzogJ2Jsb2NrLXVzZXJzJyxcbiAgICBDSEFOR0VfTUFYX0RVUkFUSU9OOiAnY2hhbmdlLW1heC1kdXJhdGlvbicsXG4gICAgQ1JFQVRFX0NBTEw6ICdjcmVhdGUtY2FsbCcsXG4gICAgQ1JFQVRFX1JFQUNUSU9OOiAnY3JlYXRlLXJlYWN0aW9uJyxcbiAgICBFTkFCTEVfTk9JU0VfQ0FOQ0VMTEFUSU9OOiAnZW5hYmxlLW5vaXNlLWNhbmNlbGxhdGlvbicsXG4gICAgRU5EX0NBTEw6ICdlbmQtY2FsbCcsXG4gICAgSk9JTl9CQUNLU1RBR0U6ICdqb2luLWJhY2tzdGFnZScsXG4gICAgSk9JTl9DQUxMOiAnam9pbi1jYWxsJyxcbiAgICBKT0lOX0VOREVEX0NBTEw6ICdqb2luLWVuZGVkLWNhbGwnLFxuICAgIE1VVEVfVVNFUlM6ICdtdXRlLXVzZXJzJyxcbiAgICBQSU5fRk9SX0VWRVJZT05FOiAncGluLWZvci1ldmVyeW9uZScsXG4gICAgUkVBRF9DQUxMOiAncmVhZC1jYWxsJyxcbiAgICBSRU1PVkVfQ0FMTF9NRU1CRVI6ICdyZW1vdmUtY2FsbC1tZW1iZXInLFxuICAgIFNDUkVFTlNIQVJFOiAnc2NyZWVuc2hhcmUnLFxuICAgIFNFTkRfQVVESU86ICdzZW5kLWF1ZGlvJyxcbiAgICBTRU5EX1ZJREVPOiAnc2VuZC12aWRlbycsXG4gICAgU1RBUlRfQlJPQURDQVNUX0NBTEw6ICdzdGFydC1icm9hZGNhc3QtY2FsbCcsXG4gICAgU1RBUlRfUkVDT1JEX0NBTEw6ICdzdGFydC1yZWNvcmQtY2FsbCcsXG4gICAgU1RBUlRfVFJBTlNDUklQVElPTl9DQUxMOiAnc3RhcnQtdHJhbnNjcmlwdGlvbi1jYWxsJyxcbiAgICBTVE9QX0JST0FEQ0FTVF9DQUxMOiAnc3RvcC1icm9hZGNhc3QtY2FsbCcsXG4gICAgU1RPUF9SRUNPUkRfQ0FMTDogJ3N0b3AtcmVjb3JkLWNhbGwnLFxuICAgIFNUT1BfVFJBTlNDUklQVElPTl9DQUxMOiAnc3RvcC10cmFuc2NyaXB0aW9uLWNhbGwnLFxuICAgIFVQREFURV9DQUxMOiAndXBkYXRlLWNhbGwnLFxuICAgIFVQREFURV9DQUxMX01FTUJFUjogJ3VwZGF0ZS1jYWxsLW1lbWJlcicsXG4gICAgVVBEQVRFX0NBTExfUEVSTUlTU0lPTlM6ICd1cGRhdGUtY2FsbC1wZXJtaXNzaW9ucycsXG4gICAgVVBEQVRFX0NBTExfU0VUVElOR1M6ICd1cGRhdGUtY2FsbC1zZXR0aW5ncycsXG59O1xuXG5mdW5jdGlvbiBKV1RVc2VyVG9rZW4oYXBpU2VjcmV0LCBwYXlsb2FkKSB7XG4gICAgLy8gbWFrZSBzdXJlIHdlIHJldHVybiBhIGNsZWFyIGVycm9yIHdoZW4gand0IGlzIHNoaW1tZWQgKGllLiBicm93c2VyIGJ1aWxkKVxuICAgIGlmIChqd3QgPT0gbnVsbCB8fCBqd3Quc2lnbiA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBVbmFibGUgdG8gZmluZCBqd3QgY3J5cHRvLCBpZiB5b3UgYXJlIGdldHRpbmcgdGhpcyBlcnJvciBpcyBwcm9iYWJseSBiZWNhdXNlIHlvdSBhcmUgdHJ5aW5nIHRvIGdlbmVyYXRlIHRva2VucyBvbiBicm93c2VyIG9yIFJlYWN0IE5hdGl2ZSAob3Igb3RoZXIgZW52aXJvbm1lbnQgd2hlcmUgY3J5cHRvIGZ1bmN0aW9ucyBhcmUgbm90IGF2YWlsYWJsZSkuIFBsZWFzZSBOb3RlOiB0b2tlbiBzaG91bGQgb25seSBiZSBnZW5lcmF0ZWQgc2VydmVyLXNpZGUuYCk7XG4gICAgfVxuICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgYWxnb3JpdGhtOiAnSFMyNTYnLFxuICAgICAgICBub1RpbWVzdGFtcDogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAocGF5bG9hZC5pYXQpIHtcbiAgICAgICAgb3B0cy5ub1RpbWVzdGFtcCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgYXBpU2VjcmV0LCBvcHRzKTtcbn1cbmZ1bmN0aW9uIEpXVFNlcnZlclRva2VuKGFwaVNlY3JldCwgand0T3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgc2VydmVyOiB0cnVlLFxuICAgIH07XG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oeyBhbGdvcml0aG06ICdIUzI1NicsIG5vVGltZXN0YW1wOiB0cnVlIH0sIGp3dE9wdGlvbnMpO1xuICAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBhcGlTZWNyZXQsIG9wdHMpO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XG5cbmNsYXNzIFN0cmVhbUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG1ldGFkYXRhLCBjb2RlLCBlcnJvck9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgZXJyb3JPcHRpb25zKTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIH1cbn1cblxuY29uc3QgZ2V0UmF0ZUxpbWl0RnJvbVJlc3BvbnNlSGVhZGVyID0gKHJlc3BvbnNlSGVhZGVycykgPT4ge1xuICAgIGNvbnN0IHJhdGVMaW1pdCA9IHJlc3BvbnNlSGVhZGVycy5oYXMoJ3gtcmF0ZWxpbWl0LWxpbWl0JylcbiAgICAgICAgPyArcmVzcG9uc2VIZWFkZXJzLmdldCgneC1yYXRlbGltaXQtbGltaXQnKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCByYXRlTGltaXRSZW1haW5pbmcgPSByZXNwb25zZUhlYWRlcnMuaGFzKCd4LXJhdGVsaW1pdC1yZW1haW5pbmcnKVxuICAgICAgICA/ICtyZXNwb25zZUhlYWRlcnMuZ2V0KCd4LXJhdGVsaW1pdC1yZW1haW5pbmcnKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCByYXRlTGltaXRSZXNldCA9IHJlc3BvbnNlSGVhZGVycy5oYXMoJ3gtcmF0ZWxpbWl0LXJlc2V0JylcbiAgICAgICAgPyBuZXcgRGF0ZSgrcmVzcG9uc2VIZWFkZXJzLmdldCgneC1yYXRlbGltaXQtcmVzZXQnKSAqIDEwMDApXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgcmF0ZUxpbWl0LFxuICAgICAgICByYXRlTGltaXRSZW1haW5pbmcsXG4gICAgICAgIHJhdGVMaW1pdFJlc2V0LFxuICAgIH07XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmNsYXNzIEJhc2VBcGkge1xuICAgIGNvbnN0cnVjdG9yKGFwaUNvbmZpZykge1xuICAgICAgICB0aGlzLmFwaUNvbmZpZyA9IGFwaUNvbmZpZztcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdCA9IChtZXRob2QsIHVybCwgcGF0aFBhcmFtcywgcXVlcnlQYXJhbXMsIGJvZHkpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXMgIT09IG51bGwgJiYgcXVlcnlQYXJhbXMgIT09IHZvaWQgMCA/IHF1ZXJ5UGFyYW1zIDoge307XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5hcGlfa2V5ID0gdGhpcy5hcGlDb25maWcuYXBpS2V5O1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZFBhcmFtcyA9IHRoaXMucXVlcnlQYXJhbXNTdHJpbmdpZnkocXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgaWYgKHBhdGhQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXRoUGFyYW1zKS5mb3JFYWNoKChwYXJhbU5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYHske3BhcmFtTmFtZX19YCwgcGF0aFBhcmFtc1twYXJhbU5hbWVdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybCArPSBgPyR7ZW5jb2RlZFBhcmFtc31gO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50UmVxdWVzdElkID0gdjQoKTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogdGhpcy5hcGlDb25maWcudG9rZW4sXG4gICAgICAgICAgICAgICAgJ3N0cmVhbS1hdXRoLXR5cGUnOiAnand0JyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdYLVN0cmVhbS1DbGllbnQnOiAnc3RyZWFtLW5vZGUtJyArIFwiMC40LjNcIixcbiAgICAgICAgICAgICAgICAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAnLFxuICAgICAgICAgICAgICAgICd4LWNsaWVudC1yZXF1ZXN0LWlkJzogY2xpZW50UmVxdWVzdElkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25hbCA9IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy5hcGlDb25maWcudGltZW91dCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgZmV0Y2goYCR7dGhpcy5hcGlDb25maWcuYmFzZVVybH0ke3VybH1gLCB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnRSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHJhdGVMaW1pdDogZ2V0UmF0ZUxpbWl0RnJvbVJlc3BvbnNlSGVhZGVyKHJlc3BvbnNlSGVhZGVycyksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzIDwgMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSAoeWllbGQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN0cmVhbUVycm9yKGBTdHJlYW0gZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLCBtZXRhZGF0YSwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RyZWFtRXJyb3IoYFN0cmVhbSBlcnJvciBjb2RlICR7ZXJyb3IuY29kZX06ICR7ZXJyb3IubWVzc2FnZX1gLCBtZXRhZGF0YSwgZXJyb3IuY29kZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VCb2R5ID0gKHlpZWxkIHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgYm9keTogcmVzcG9uc2VCb2R5LCBtZXRhZGF0YSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU3RyZWFtRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnRSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29kZTogZXJyb3Iuc3RhdHVzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJyB8fCBlcnJvci5uYW1lID09PSAnVGltZW91dEVycm9yJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RyZWFtRXJyb3IoYFRoZSByZXF1ZXN0IHdhcyBhYm9ydGVkIGR1ZSB0byB0byB0aGUgJHt0aGlzLmFwaUNvbmZpZy50aW1lb3V0fW1zIHRpbWVvdXQsIHlvdSBjYW4gc2V0IHRoZSB0aW1lb3V0IGluIHRoZSBTdHJlYW1DbGllbnQgY29uc3RydWN0b3JgLCBtZXRhZGF0YSwgdW5kZWZpbmVkLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RyZWFtRXJyb3IoYFRoZSByZXF1ZXN0IGZhaWxlZCBkdWUgdG8gYW4gdW5leHBlY3RlZCBlcnJvcmAsIG1ldGFkYXRhLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeVBhcmFtc1N0cmluZ2lmeSA9IChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zW2tdO1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmFtKSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdQYXJhbXMucHVzaChgJHtrfT0ke2VuY29kZVVSSUNvbXBvbmVudChwYXJhbS5qb2luKCcsJykpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJhbSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFyYW1zLnB1c2gocGFyYW0udG9JU09TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFyYW1zLnB1c2goYCR7a309JHtlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocGFyYW0pKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW0gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcGFyYW0gPT09ICdudW1iZXInIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcGFyYW0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFyYW1zLnB1c2goYCR7a309JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW0pfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld1BhcmFtcy5qb2luKCcmJyk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jb25zdCBkZWNvZGVycyA9IHt9O1xuY29uc3QgZGVjb2RlRGF0ZXRpbWVUeXBlID0gKGlucHV0KSA9PiBuZXcgRGF0ZShNYXRoLmZsb29yKGlucHV0IC8gMTAwMDAwMCkpO1xuZGVjb2RlcnMuRGF0ZXRpbWVUeXBlID0gZGVjb2RlRGF0ZXRpbWVUeXBlO1xuY29uc3QgZGVjb2RlID0gKHR5cGVNYXBwaW5ncywgaW5wdXQpID0+IHtcbiAgICBpZiAoIWlucHV0IHx8IE9iamVjdC5rZXlzKHR5cGVNYXBwaW5ncykubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgT2JqZWN0LmtleXModHlwZU1hcHBpbmdzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgaWYgKGlucHV0W2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVNYXBwaW5nc1trZXldKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IGRlY29kZXJzW3R5cGVNYXBwaW5nc1trZXldLnR5cGVdO1xuICAgICAgICAgICAgICAgIGlmIChkZWNvZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlTWFwcGluZ3Nba2V5XS5pc1NpbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRba2V5XSA9IGRlY29kZXIoaW5wdXRba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhpbnB1dFtrZXldKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRba2V5XVtrXSA9IGRlY29kZXIoaW5wdXRba2V5XVtrXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dDtcbn07XG5kZWNvZGVycy5BY3Rpb25Mb2cgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJldmlld19xdWV1ZV9pdGVtOiB7IHR5cGU6ICdSZXZpZXdRdWV1ZUl0ZW0nLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0YXJnZXRfdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5BY3Rpb25Mb2dSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcmV2aWV3X3F1ZXVlX2l0ZW06IHsgdHlwZTogJ1Jldmlld1F1ZXVlSXRlbScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHRhcmdldF91c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5BcHBSZXNwb25zZUZpZWxkcyA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY2FsbF90eXBlczogeyB0eXBlOiAnQ2FsbFR5cGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2hhbm5lbF9jb25maWdzOiB7IHR5cGU6ICdDaGFubmVsQ29uZmlnJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHB1c2hfbm90aWZpY2F0aW9uczogeyB0eXBlOiAnUHVzaE5vdGlmaWNhdGlvbkZpZWxkcycsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJldm9rZV90b2tlbnNfaXNzdWVkX2JlZm9yZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQXV0b21vZERldGFpbHMgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHJlc3VsdDogeyB0eXBlOiAnTWVzc2FnZU1vZGVyYXRpb25SZXN1bHQnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5CYW4gPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGV4cGlyZXM6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWwnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBjcmVhdGVkX2J5OiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdGFyZ2V0OiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQmFuUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGV4cGlyZXM6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGJhbm5lZF9ieTogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQmxvY2tMaXN0UmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkJsb2NrVXNlcnNSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQmxvY2tlZFVzZXJSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgYmxvY2tlZF91c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DYWxsUGFydGljaXBhbnRSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgam9pbmVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DYWxsUmVjb3JkaW5nID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBlbmRfdGltZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgc3RhcnRfdGltZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2FsbFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBjcmVhdGVkX2J5OiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBlbmRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgc3RhcnRzX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBzZXNzaW9uOiB7IHR5cGU6ICdDYWxsU2Vzc2lvblJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2FsbFNlc3Npb25SZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgcGFydGljaXBhbnRzOiB7IHR5cGU6ICdDYWxsUGFydGljaXBhbnRSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBhY2NlcHRlZF9ieTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIG1pc3NlZF9ieTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHJlamVjdGVkX2J5OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgZW5kZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxpdmVfZW5kZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxpdmVfc3RhcnRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgc3RhcnRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdGltZXJfZW5kc19hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2FsbFN0YXRlUmVzcG9uc2VGaWVsZHMgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ01lbWJlclJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNhbGw6IHsgdHlwZTogJ0NhbGxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkNhbGxTdGF0c1JlcG9ydFN1bW1hcnlSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgZmlyc3Rfc3RhdHNfdGltZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2FsbFRyYW5zY3JpcHRpb24gPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGVuZF90aW1lOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBzdGFydF90aW1lOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DYWxsVHlwZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2FsbFR5cGVSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2hhbm5lbCA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZGVsZXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGFzdF9tZXNzYWdlX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBpbnZpdGVzOiB7IHR5cGU6ICdDaGFubmVsTWVtYmVyJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ0NoYW5uZWxNZW1iZXInLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY29uZmlnOiB7IHR5cGU6ICdDaGFubmVsQ29uZmlnJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgY29uZmlnX292ZXJyaWRlczogeyB0eXBlOiAnQ2hhbm5lbENvbmZpZycsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0cnVuY2F0ZWRfYnk6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DaGFubmVsQ29uZmlnID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DaGFubmVsQ29uZmlnV2l0aEluZm8gPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNvbW1hbmRzOiB7IHR5cGU6ICdDb21tYW5kJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkNoYW5uZWxNZW1iZXIgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGJhbl9leHBpcmVzOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBkZWxldGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBpbnZpdGVfYWNjZXB0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGludml0ZV9yZWplY3RlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkNoYW5uZWxNZW1iZXJSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgYmFuX2V4cGlyZXM6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGRlbGV0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGludml0ZV9hY2NlcHRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgaW52aXRlX3JlamVjdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DaGFubmVsTXV0ZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZXhwaXJlczogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkNoYW5uZWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZGVsZXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgaGlkZV9tZXNzYWdlc19iZWZvcmU6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxhc3RfbWVzc2FnZV9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbXV0ZV9leHBpcmVzX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0cnVuY2F0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ0NoYW5uZWxNZW1iZXInLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY29uZmlnOiB7IHR5cGU6ICdDaGFubmVsQ29uZmlnV2l0aEluZm8nLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBjcmVhdGVkX2J5OiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdHJ1bmNhdGVkX2J5OiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuQ2hhbm5lbFN0YXRlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ0NoYW5uZWxNZW1iZXInLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgbWVzc2FnZXM6IHsgdHlwZTogJ01lc3NhZ2VSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBwaW5uZWRfbWVzc2FnZXM6IHsgdHlwZTogJ01lc3NhZ2VSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICB0aHJlYWRzOiB7IHR5cGU6ICdUaHJlYWRTdGF0ZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBoaWRlX21lc3NhZ2VzX2JlZm9yZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcGVuZGluZ19tZXNzYWdlczogeyB0eXBlOiAnUGVuZGluZ01lc3NhZ2VSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICByZWFkOiB7IHR5cGU6ICdSZWFkU3RhdGVSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICB3YXRjaGVyczogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lbWJlcnNoaXA6IHsgdHlwZTogJ0NoYW5uZWxNZW1iZXInLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DaGFubmVsU3RhdGVSZXNwb25zZUZpZWxkcyA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVtYmVyczogeyB0eXBlOiAnQ2hhbm5lbE1lbWJlcicsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBtZXNzYWdlczogeyB0eXBlOiAnTWVzc2FnZVJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHBpbm5lZF9tZXNzYWdlczogeyB0eXBlOiAnTWVzc2FnZVJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHRocmVhZHM6IHsgdHlwZTogJ1RocmVhZFN0YXRlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGhpZGVfbWVzc2FnZXNfYmVmb3JlOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwZW5kaW5nX21lc3NhZ2VzOiB7IHR5cGU6ICdQZW5kaW5nTWVzc2FnZVJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHJlYWQ6IHsgdHlwZTogJ1JlYWRTdGF0ZVJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHdhdGNoZXJzOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbWVtYmVyc2hpcDogeyB0eXBlOiAnQ2hhbm5lbE1lbWJlcicsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkNoYW5uZWxUeXBlQ29uZmlnID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBjb21tYW5kczogeyB0eXBlOiAnQ29tbWFuZCcsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DaGVja1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBpdGVtOiB7IHR5cGU6ICdSZXZpZXdRdWV1ZUl0ZW0nLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Db21tYW5kID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Db25maWdSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdmVsb2NpdHlfZmlsdGVyX2NvbmZpZzogeyB0eXBlOiAnVmVsb2NpdHlGaWx0ZXJDb25maWcnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DcmVhdGVDYWxsVHlwZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DcmVhdGVDaGFubmVsVHlwZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DcmVhdGVDb21tYW5kUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNvbW1hbmQ6IHsgdHlwZTogJ0NvbW1hbmQnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DcmVhdGVHdWVzdFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DcmVhdGVJbXBvcnRSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgaW1wb3J0X3Rhc2s6IHsgdHlwZTogJ0ltcG9ydFRhc2snLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DcmVhdGVSb2xlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHJvbGU6IHsgdHlwZTogJ1JvbGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5DdXN0b21DaGVja1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBzY29yZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJldmlld2VkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5EZWFjdGl2YXRlVXNlclJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5EZWxldGVDYWxsUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNhbGw6IHsgdHlwZTogJ0NhbGxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkRlbGV0ZUNoYW5uZWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuRGVsZXRlTWVzc2FnZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdNZXNzYWdlUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5EZXZpY2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkVncmVzc1JUTVBSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgc3RhcnRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuRXZlbnRSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgZXZlbnQ6IHsgdHlwZTogJ1dTRXZlbnQnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5FeHBvcnRVc2VyUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiB7IHR5cGU6ICdNZXNzYWdlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHJlYWN0aW9uczogeyB0eXBlOiAnUmVhY3Rpb24nLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuRmxhZzIgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5GbGFnRGV0YWlscyA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgYXV0b21vZDogeyB0eXBlOiAnQXV0b21vZERldGFpbHMnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5GbGFnRmVlZGJhY2sgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkZ1bGxVc2VyUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNoYW5uZWxfbXV0ZXM6IHsgdHlwZTogJ0NoYW5uZWxNdXRlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGRldmljZXM6IHsgdHlwZTogJ0RldmljZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBtdXRlczogeyB0eXBlOiAnVXNlck11dGVSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBkZWFjdGl2YXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZGVsZXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGFzdF9hY3RpdmU6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJldm9rZV90b2tlbnNfaXNzdWVkX2JlZm9yZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcHVzaF9ub3RpZmljYXRpb25zOiB7XG4gICAgICAgICAgICB0eXBlOiAnUHVzaE5vdGlmaWNhdGlvblNldHRpbmdzUmVzcG9uc2UnLFxuICAgICAgICAgICAgaXNTaW5nbGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkdldEFwcGxpY2F0aW9uUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGFwcDogeyB0eXBlOiAnQXBwUmVzcG9uc2VGaWVsZHMnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5HZXRCbG9ja0xpc3RSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgYmxvY2tsaXN0OiB7IHR5cGU6ICdCbG9ja0xpc3RSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkdldEJsb2NrZWRVc2Vyc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBibG9ja3M6IHsgdHlwZTogJ0Jsb2NrZWRVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0Q2FsbFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZW1iZXJzOiB7IHR5cGU6ICdNZW1iZXJSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBjYWxsOiB7IHR5cGU6ICdDYWxsUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5HZXRDYWxsVHlwZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5HZXRDaGFubmVsVHlwZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBjb21tYW5kczogeyB0eXBlOiAnQ29tbWFuZCcsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5HZXRDb21tYW5kUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkdldENvbmZpZ1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjb25maWc6IHsgdHlwZTogJ0NvbmZpZ1Jlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0RXhwb3J0Q2hhbm5lbHNTdGF0dXNSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0SW1wb3J0UmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGltcG9ydF90YXNrOiB7IHR5cGU6ICdJbXBvcnRUYXNrJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0TWFueU1lc3NhZ2VzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiB7IHR5cGU6ICdNZXNzYWdlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkdldE1lc3NhZ2VSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZVdpdGhDaGFubmVsUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5HZXRPckNyZWF0ZUNhbGxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVtYmVyczogeyB0eXBlOiAnTWVtYmVyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2FsbDogeyB0eXBlOiAnQ2FsbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0UmVhY3Rpb25zUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHJlYWN0aW9uczogeyB0eXBlOiAnUmVhY3Rpb24nLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0UmVwbGllc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZXNzYWdlczogeyB0eXBlOiAnTWVzc2FnZVJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkdldFJldmlld1F1ZXVlSXRlbVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBoaXN0b3J5OiB7IHR5cGU6ICdSZXZpZXdRdWV1ZUl0ZW0nLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgaXRlbTogeyB0eXBlOiAnUmV2aWV3UXVldWVJdGVtJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0VGFza1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5HZXRUaHJlYWRSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdGhyZWFkOiB7IHR5cGU6ICdUaHJlYWRTdGF0ZVJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuR2V0VXNlck1vZGVyYXRpb25SZXBvcnRSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdXNlcl9ibG9ja3M6IHsgdHlwZTogJ1VzZXJCbG9jaycsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICB1c2VyX211dGVzOiB7IHR5cGU6ICdVc2VyTXV0ZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Hb0xpdmVSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY2FsbDogeyB0eXBlOiAnQ2FsbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuSW1wb3J0VGFzayA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgaGlzdG9yeTogeyB0eXBlOiAnSW1wb3J0VGFza0hpc3RvcnknLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuSW1wb3J0VGFza0hpc3RvcnkgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkxpc3RCbG9ja0xpc3RSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgYmxvY2tsaXN0czogeyB0eXBlOiAnQmxvY2tMaXN0UmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTGlzdENhbGxUeXBlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNhbGxfdHlwZXM6IHsgdHlwZTogJ0NhbGxUeXBlUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTGlzdENoYW5uZWxUeXBlc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjaGFubmVsX3R5cGVzOiB7IHR5cGU6ICdDaGFubmVsVHlwZUNvbmZpZycsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5MaXN0Q29tbWFuZHNSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY29tbWFuZHM6IHsgdHlwZTogJ0NvbW1hbmQnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTGlzdERldmljZXNSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgZGV2aWNlczogeyB0eXBlOiAnRGV2aWNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLkxpc3RJbXBvcnRzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGltcG9ydF90YXNrczogeyB0eXBlOiAnSW1wb3J0VGFzaycsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5MaXN0UHVzaFByb3ZpZGVyc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBwdXNoX3Byb3ZpZGVyczogeyB0eXBlOiAnUHVzaFByb3ZpZGVyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTGlzdFJlY29yZGluZ3NSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgcmVjb3JkaW5nczogeyB0eXBlOiAnQ2FsbFJlY29yZGluZycsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5MaXN0Um9sZXNSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgcm9sZXM6IHsgdHlwZTogJ1JvbGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHRyYW5zY3JpcHRpb25zOiB7IHR5cGU6ICdDYWxsVHJhbnNjcmlwdGlvbicsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5NYXJrUmVhZFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBldmVudDogeyB0eXBlOiAnTWVzc2FnZVJlYWRFdmVudCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLk1lbWJlclJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBkZWxldGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5NZW1iZXJzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ0NoYW5uZWxNZW1iZXInLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTWVzc2FnZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGF0ZXN0X3JlYWN0aW9uczogeyB0eXBlOiAnUmVhY3Rpb24nLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgbWVudGlvbmVkX3VzZXJzOiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIG93bl9yZWFjdGlvbnM6IHsgdHlwZTogJ1JlYWN0aW9uJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHJlYWN0aW9uX2dyb3VwczogeyB0eXBlOiAnUmVhY3Rpb25Hcm91cFJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGRlbGV0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2VfdGV4dF91cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwaW5fZXhwaXJlczogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcGlubmVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0aHJlYWRfcGFydGljaXBhbnRzOiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHBpbm5lZF9ieTogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHBvbGw6IHsgdHlwZTogJ1BvbGwnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBxdW90ZWRfbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5NZXNzYWdlRmxhZ1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBhcHByb3ZlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcmVqZWN0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJldmlld2VkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBkZXRhaWxzOiB7IHR5cGU6ICdGbGFnRGV0YWlscycsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBtb2RlcmF0aW9uX2ZlZWRiYWNrOiB7IHR5cGU6ICdGbGFnRmVlZGJhY2snLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBtb2RlcmF0aW9uX3Jlc3VsdDogeyB0eXBlOiAnTWVzc2FnZU1vZGVyYXRpb25SZXN1bHQnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICByZXZpZXdlZF9ieTogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTWVzc2FnZUhpc3RvcnlFbnRyeVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZXNzYWdlX3VwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLk1lc3NhZ2VNb2RlcmF0aW9uUmVzdWx0ID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5NZXNzYWdlUmVhZEV2ZW50ID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0aHJlYWQ6IHsgdHlwZTogJ1RocmVhZFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLk1lc3NhZ2VSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGF0ZXN0X3JlYWN0aW9uczogeyB0eXBlOiAnUmVhY3Rpb25SZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBtZW50aW9uZWRfdXNlcnM6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBvd25fcmVhY3Rpb25zOiB7IHR5cGU6ICdSZWFjdGlvblJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGRlbGV0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2VfdGV4dF91cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwaW5fZXhwaXJlczogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcGlubmVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0aHJlYWRfcGFydGljaXBhbnRzOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgcGlubmVkX2J5OiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwb2xsOiB7IHR5cGU6ICdQb2xsJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcXVvdGVkX21lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICByZWFjdGlvbl9ncm91cHM6IHsgdHlwZTogJ1JlYWN0aW9uR3JvdXBSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5NZXNzYWdlV2l0aENoYW5uZWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGF0ZXN0X3JlYWN0aW9uczogeyB0eXBlOiAnUmVhY3Rpb25SZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBtZW50aW9uZWRfdXNlcnM6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBvd25fcmVhY3Rpb25zOiB7IHR5cGU6ICdSZWFjdGlvblJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGRlbGV0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2VfdGV4dF91cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwaW5fZXhwaXJlczogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcGlubmVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0aHJlYWRfcGFydGljaXBhbnRzOiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgcGlubmVkX2J5OiB7IHR5cGU6ICdVc2VyUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwb2xsOiB7IHR5cGU6ICdQb2xsJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcXVvdGVkX21lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICByZWFjdGlvbl9ncm91cHM6IHsgdHlwZTogJ1JlYWN0aW9uR3JvdXBSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Nb2RlcmF0aW9uVXNhZ2VTdGF0cyA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTXV0ZUNoYW5uZWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY2hhbm5lbF9tdXRlczogeyB0eXBlOiAnQ2hhbm5lbE11dGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2hhbm5lbF9tdXRlOiB7IHR5cGU6ICdDaGFubmVsTXV0ZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG93bl91c2VyOiB7IHR5cGU6ICdPd25Vc2VyJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuTXV0ZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtdXRlczogeyB0eXBlOiAnVXNlck11dGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgb3duX3VzZXI6IHsgdHlwZTogJ093blVzZXInLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5OdWxsVGltZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdmFsdWU6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLk93blVzZXIgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNoYW5uZWxfbXV0ZXM6IHsgdHlwZTogJ0NoYW5uZWxNdXRlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGRldmljZXM6IHsgdHlwZTogJ0RldmljZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBtdXRlczogeyB0eXBlOiAnVXNlck11dGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgZGVhY3RpdmF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGRlbGV0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxhc3RfYWN0aXZlOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwdXNoX25vdGlmaWNhdGlvbnM6IHsgdHlwZTogJ1B1c2hOb3RpZmljYXRpb25TZXR0aW5ncycsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlBlbmRpbmdNZXNzYWdlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2VSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlBvbGwgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxhdGVzdF9hbnN3ZXJzOiB7IHR5cGU6ICdQb2xsVm90ZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBvd25fdm90ZXM6IHsgdHlwZTogJ1BvbGxWb3RlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Qb2xsUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHBvbGw6IHsgdHlwZTogJ1BvbGxSZXNwb25zZURhdGEnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Qb2xsUmVzcG9uc2VEYXRhID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBvd25fdm90ZXM6IHsgdHlwZTogJ1BvbGxWb3RlUmVzcG9uc2VEYXRhJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlBvbGxWb3RlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUG9sbFZvdGVSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdm90ZTogeyB0eXBlOiAnUG9sbFZvdGVSZXNwb25zZURhdGEnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Qb2xsVm90ZVJlc3BvbnNlRGF0YSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUG9sbFZvdGVzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHZvdGVzOiB7IHR5cGU6ICdQb2xsVm90ZVJlc3BvbnNlRGF0YScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5QdXNoTm90aWZpY2F0aW9uRmllbGRzID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBwcm92aWRlcnM6IHsgdHlwZTogJ1B1c2hQcm92aWRlcicsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5QdXNoTm90aWZpY2F0aW9uU2V0dGluZ3MgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGRpc2FibGVkX3VudGlsOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5QdXNoTm90aWZpY2F0aW9uU2V0dGluZ3NSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgZGlzYWJsZWRfdW50aWw6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlB1c2hQcm92aWRlciA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZGlzYWJsZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlB1c2hQcm92aWRlclJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBkaXNhYmxlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUXVlcnlCYW5uZWRVc2Vyc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBiYW5zOiB7IHR5cGU6ICdCYW5SZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5RdWVyeUNhbGxNZW1iZXJzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ01lbWJlclJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlF1ZXJ5Q2FsbFN0YXRzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHJlcG9ydHM6IHsgdHlwZTogJ0NhbGxTdGF0c1JlcG9ydFN1bW1hcnlSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5RdWVyeUNhbGxzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNhbGxzOiB7IHR5cGU6ICdDYWxsU3RhdGVSZXNwb25zZUZpZWxkcycsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5RdWVyeUNoYW5uZWxzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNoYW5uZWxzOiB7IHR5cGU6ICdDaGFubmVsU3RhdGVSZXNwb25zZUZpZWxkcycsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5RdWVyeUZlZWRNb2RlcmF0aW9uVGVtcGxhdGUgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlF1ZXJ5RmVlZE1vZGVyYXRpb25UZW1wbGF0ZXNSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdGVtcGxhdGVzOiB7IHR5cGU6ICdRdWVyeUZlZWRNb2RlcmF0aW9uVGVtcGxhdGUnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUXVlcnlNZXNzYWdlRmxhZ3NSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgZmxhZ3M6IHsgdHlwZTogJ01lc3NhZ2VGbGFnUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUXVlcnlNZXNzYWdlSGlzdG9yeVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZXNzYWdlX2hpc3Rvcnk6IHsgdHlwZTogJ01lc3NhZ2VIaXN0b3J5RW50cnlSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5RdWVyeU1vZGVyYXRpb25Mb2dzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGxfb2dfczogeyB0eXBlOiAnQWN0aW9uTG9nUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUXVlcnlQb2xsc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBwb2xsczogeyB0eXBlOiAnUG9sbFJlc3BvbnNlRGF0YScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5RdWVyeVJlYWN0aW9uc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICByZWFjdGlvbnM6IHsgdHlwZTogJ1JlYWN0aW9uUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUXVlcnlSZXZpZXdRdWV1ZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBpdGVtczogeyB0eXBlOiAnUmV2aWV3UXVldWVJdGVtJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlF1ZXJ5VGhyZWFkc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICB0aHJlYWRzOiB7IHR5cGU6ICdUaHJlYWRTdGF0ZVJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlF1ZXJ5VXNhZ2VTdGF0c1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBpdGVtczogeyB0eXBlOiAnTW9kZXJhdGlvblVzYWdlU3RhdHMnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUXVlcnlVc2Vyc1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICB1c2VyczogeyB0eXBlOiAnRnVsbFVzZXJSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5SZWFjdGlvbiA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlJlYWN0aW9uR3JvdXBSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgZmlyc3RfcmVhY3Rpb25fYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxhc3RfcmVhY3Rpb25fYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlJlYWN0aW9uUmVtb3ZhbFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdNZXNzYWdlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcmVhY3Rpb246IHsgdHlwZTogJ1JlYWN0aW9uJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUmVhY3Rpb25SZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUmVhY3RpdmF0ZVVzZXJSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUmVhZCA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbGFzdF9yZWFkOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1c2VyOiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUmVhZFN0YXRlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGxhc3RfcmVhZDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuUmV2aWV3UXVldWVJdGVtID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBhY3Rpb25zOiB7IHR5cGU6ICdBY3Rpb25Mb2cnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgYmFuczogeyB0eXBlOiAnQmFuJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGZsYWdzOiB7IHR5cGU6ICdGbGFnMicsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBjb21wbGV0ZWRfYXQ6IHsgdHlwZTogJ051bGxUaW1lJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcmV2aWV3ZWRfYXQ6IHsgdHlwZTogJ051bGxUaW1lJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgYXNzaWduZWRfdG86IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBlbnRpdHlfY3JlYXRvcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGZlZWRzX3YyX3JlYWN0aW9uOiB7IHR5cGU6ICdSZWFjdGlvbicsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Sb2xlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5TZWFyY2hSZXN1bHQgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogJ1NlYXJjaFJlc3VsdE1lc3NhZ2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5TZWFyY2hSZXN1bHRNZXNzYWdlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBsYXRlc3RfcmVhY3Rpb25zOiB7IHR5cGU6ICdSZWFjdGlvbicsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBtZW50aW9uZWRfdXNlcnM6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgb3duX3JlYWN0aW9uczogeyB0eXBlOiAnUmVhY3Rpb24nLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgcmVhY3Rpb25fZ3JvdXBzOiB7IHR5cGU6ICdSZWFjdGlvbkdyb3VwUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgZGVsZXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbWVzc2FnZV90ZXh0X3VwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHBpbl9leHBpcmVzOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwaW5uZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHRocmVhZF9wYXJ0aWNpcGFudHM6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcGlubmVkX2J5OiB7IHR5cGU6ICdVc2VyT2JqZWN0JywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcG9sbDogeyB0eXBlOiAnUG9sbCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHF1b3RlZF9tZXNzYWdlOiB7IHR5cGU6ICdNZXNzYWdlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlNlbmRNZXNzYWdlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2VSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlNlbmRSZWFjdGlvblJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdNZXNzYWdlUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICByZWFjdGlvbjogeyB0eXBlOiAnUmVhY3Rpb25SZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlN0b3BMaXZlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNhbGw6IHsgdHlwZTogJ0NhbGxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlN1Ym1pdEFjdGlvblJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBpdGVtOiB7IHR5cGU6ICdSZXZpZXdRdWV1ZUl0ZW0nLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5UaHJlYWRQYXJ0aWNpcGFudCA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGFzdF9yZWFkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBsYXN0X3RocmVhZF9tZXNzYWdlX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBsZWZ0X3RocmVhZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXNlcjogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlRocmVhZFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBkZWxldGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBsYXN0X21lc3NhZ2VfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHRocmVhZF9wYXJ0aWNpcGFudHM6IHsgdHlwZTogJ1RocmVhZFBhcnRpY2lwYW50JywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwYXJlbnRfbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlRocmVhZFN0YXRlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBsYXRlc3RfcmVwbGllczogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBkZWxldGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBsYXN0X21lc3NhZ2VfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJlYWQ6IHsgdHlwZTogJ1JlYWQnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgdGhyZWFkX3BhcnRpY2lwYW50czogeyB0eXBlOiAnVGhyZWFkUGFydGljaXBhbnQnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwYXJlbnRfbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlRocmVhZFN0YXRlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxhdGVzdF9yZXBsaWVzOiB7IHR5cGU6ICdNZXNzYWdlUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgZGVsZXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGFzdF9tZXNzYWdlX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICByZWFkOiB7IHR5cGU6ICdSZWFkJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHRocmVhZF9wYXJ0aWNpcGFudHM6IHsgdHlwZTogJ1RocmVhZFBhcnRpY2lwYW50JywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHBhcmVudF9tZXNzYWdlOiB7IHR5cGU6ICdNZXNzYWdlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVHJ1bmNhdGVDaGFubmVsUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lc3NhZ2U6IHsgdHlwZTogJ01lc3NhZ2VSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVucmVhZENvdW50c0JhdGNoUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNvdW50c19ieV91c2VyOiB7IHR5cGU6ICdVbnJlYWRDb3VudHNSZXNwb25zZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5VbnJlYWRDb3VudHNDaGFubmVsID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBsYXN0X3JlYWQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVucmVhZENvdW50c1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjaGFubmVsczogeyB0eXBlOiAnVW5yZWFkQ291bnRzQ2hhbm5lbCcsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICB0aHJlYWRzOiB7IHR5cGU6ICdVbnJlYWRDb3VudHNUaHJlYWQnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVW5yZWFkQ291bnRzVGhyZWFkID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBsYXN0X3JlYWQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwZGF0ZUNhbGxNZW1iZXJzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIG1lbWJlcnM6IHsgdHlwZTogJ01lbWJlclJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwZGF0ZUNhbGxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVtYmVyczogeyB0eXBlOiAnTWVtYmVyUmVzcG9uc2UnLCBpc1NpbmdsZTogZmFsc2UgfSxcbiAgICAgICAgY2FsbDogeyB0eXBlOiAnQ2FsbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBkYXRlQ2FsbFR5cGVSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBkYXRlQ2hhbm5lbFBhcnRpYWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVtYmVyczogeyB0eXBlOiAnQ2hhbm5lbE1lbWJlclJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIGNoYW5uZWw6IHsgdHlwZTogJ0NoYW5uZWxSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwZGF0ZUNoYW5uZWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVtYmVyczogeyB0eXBlOiAnQ2hhbm5lbE1lbWJlcicsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBjaGFubmVsOiB7IHR5cGU6ICdDaGFubmVsUmVzcG9uc2UnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdNZXNzYWdlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBkYXRlQ2hhbm5lbFR5cGVSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBkYXRlQ29tbWFuZFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjb21tYW5kOiB7IHR5cGU6ICdDb21tYW5kJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBkYXRlTWVtYmVyUGFydGlhbFJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjaGFubmVsX21lbWJlcjogeyB0eXBlOiAnQ2hhbm5lbE1lbWJlclJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBkYXRlTWVzc2FnZVBhcnRpYWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwZGF0ZU1lc3NhZ2VSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwZGF0ZVRocmVhZFBhcnRpYWxSZXNwb25zZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdGhyZWFkOiB7IHR5cGU6ICdUaHJlYWRSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwZGF0ZVVzZXJzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIHVzZXJzOiB7IHR5cGU6ICdGdWxsVXNlclJlc3BvbnNlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwc2VydENvbmZpZ1Jlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjb25maWc6IHsgdHlwZTogJ0NvbmZpZ1Jlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXBzZXJ0TW9kZXJhdGlvblRlbXBsYXRlUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVwc2VydFB1c2hQcm92aWRlclJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBwdXNoX3Byb3ZpZGVyOiB7IHR5cGU6ICdQdXNoUHJvdmlkZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVzZXJCbG9jayA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuVXNlck11dGUgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGV4cGlyZXM6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHRhcmdldDogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Vc2VyTXV0ZVJlc3BvbnNlID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdHlwZU1hcHBpbmdzID0ge1xuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB1cGRhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBleHBpcmVzOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICB0YXJnZXQ6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlVzZXJPYmplY3QgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGJhbl9leHBpcmVzOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBkZWFjdGl2YXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZGVsZXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbGFzdF9hY3RpdmU6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHJldm9rZV90b2tlbnNfaXNzdWVkX2JlZm9yZTogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdXBkYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcHVzaF9ub3RpZmljYXRpb25zOiB7IHR5cGU6ICdQdXNoTm90aWZpY2F0aW9uU2V0dGluZ3MnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5Vc2VyUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNyZWF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGRldmljZXM6IHsgdHlwZTogJ0RldmljZScsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgICAgICBiYW5fZXhwaXJlczogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgZGVhY3RpdmF0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGRlbGV0ZWRfYXQ6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIGxhc3RfYWN0aXZlOiB7IHR5cGU6ICdEYXRldGltZVR5cGUnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICByZXZva2VfdG9rZW5zX2lzc3VlZF9iZWZvcmU6IHsgdHlwZTogJ0RhdGV0aW1lVHlwZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHB1c2hfbm90aWZpY2F0aW9uczoge1xuICAgICAgICAgICAgdHlwZTogJ1B1c2hOb3RpZmljYXRpb25TZXR0aW5nc1Jlc3BvbnNlJyxcbiAgICAgICAgICAgIGlzU2luZ2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5WZWxvY2l0eUZpbHRlckNvbmZpZyA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgcnVsZTogeyB0eXBlOiAnVmVsb2NpdHlGaWx0ZXJDb25maWdSdWxlJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgfTtcbiAgICByZXR1cm4gZGVjb2RlKHR5cGVNYXBwaW5ncywgaW5wdXQpO1xufTtcbmRlY29kZXJzLlZlbG9jaXR5RmlsdGVyQ29uZmlnUnVsZSA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgdGltZW91dDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICB9O1xuICAgIHJldHVybiBkZWNvZGUodHlwZU1hcHBpbmdzLCBpbnB1dCk7XG59O1xuZGVjb2RlcnMuV1NFdmVudCA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IHR5cGVNYXBwaW5ncyA9IHtcbiAgICAgICAgY3JlYXRlZF9hdDogeyB0eXBlOiAnRGF0ZXRpbWVUeXBlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgY2hhbm5lbDogeyB0eXBlOiAnQ2hhbm5lbFJlc3BvbnNlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgY3JlYXRlZF9ieTogeyB0eXBlOiAnVXNlck9iamVjdCcsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIG1lOiB7IHR5cGU6ICdPd25Vc2VyJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbWVtYmVyOiB7IHR5cGU6ICdDaGFubmVsTWVtYmVyJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnTWVzc2FnZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHBvbGw6IHsgdHlwZTogJ1BvbGwnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgICAgICBwb2xsX3ZvdGU6IHsgdHlwZTogJ1BvbGxWb3RlJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgcmVhY3Rpb246IHsgdHlwZTogJ1JlYWN0aW9uJywgaXNTaW5nbGU6IHRydWUgfSxcbiAgICAgICAgdGhyZWFkOiB7IHR5cGU6ICdUaHJlYWRSZXNwb25zZScsIGlzU2luZ2xlOiB0cnVlIH0sXG4gICAgICAgIHVzZXI6IHsgdHlwZTogJ1VzZXJPYmplY3QnLCBpc1NpbmdsZTogdHJ1ZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5kZWNvZGVycy5XcmFwcGVkVW5yZWFkQ291bnRzUmVzcG9uc2UgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB0eXBlTWFwcGluZ3MgPSB7XG4gICAgICAgIGNoYW5uZWxzOiB7IHR5cGU6ICdVbnJlYWRDb3VudHNDaGFubmVsJywgaXNTaW5nbGU6IGZhbHNlIH0sXG4gICAgICAgIHRocmVhZHM6IHsgdHlwZTogJ1VucmVhZENvdW50c1RocmVhZCcsIGlzU2luZ2xlOiBmYWxzZSB9LFxuICAgIH07XG4gICAgcmV0dXJuIGRlY29kZSh0eXBlTWFwcGluZ3MsIGlucHV0KTtcbn07XG5cbmNsYXNzIENvbW1vbkFwaSBleHRlbmRzIEJhc2VBcGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmdldEFwcCA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvYXBwJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9hID0gZGVjb2RlcnMuR2V0QXBwbGljYXRpb25SZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVBcHAgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9iO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBhc3luY191cmxfZW5yaWNoX2VuYWJsZWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hc3luY191cmxfZW5yaWNoX2VuYWJsZWQsXG4gICAgICAgICAgICAgICAgYXV0b190cmFuc2xhdGlvbl9lbmFibGVkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXV0b190cmFuc2xhdGlvbl9lbmFibGVkLFxuICAgICAgICAgICAgICAgIGJlZm9yZV9tZXNzYWdlX3NlbmRfaG9va191cmw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5iZWZvcmVfbWVzc2FnZV9zZW5kX2hvb2tfdXJsLFxuICAgICAgICAgICAgICAgIGNkbl9leHBpcmF0aW9uX3NlY29uZHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jZG5fZXhwaXJhdGlvbl9zZWNvbmRzLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfaGlkZV9tZW1iZXJzX29ubHk6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jaGFubmVsX2hpZGVfbWVtYmVyc19vbmx5LFxuICAgICAgICAgICAgICAgIGN1c3RvbV9hY3Rpb25faGFuZGxlcl91cmw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jdXN0b21fYWN0aW9uX2hhbmRsZXJfdXJsLFxuICAgICAgICAgICAgICAgIGRpc2FibGVfYXV0aF9jaGVja3M6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kaXNhYmxlX2F1dGhfY2hlY2tzLFxuICAgICAgICAgICAgICAgIGRpc2FibGVfcGVybWlzc2lvbnNfY2hlY2tzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZGlzYWJsZV9wZXJtaXNzaW9uc19jaGVja3MsXG4gICAgICAgICAgICAgICAgZW5mb3JjZV91bmlxdWVfdXNlcm5hbWVzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZW5mb3JjZV91bmlxdWVfdXNlcm5hbWVzLFxuICAgICAgICAgICAgICAgIGZlZWRzX21vZGVyYXRpb25fZW5hYmxlZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmZlZWRzX21vZGVyYXRpb25fZW5hYmxlZCxcbiAgICAgICAgICAgICAgICBmZWVkc192Ml9yZWdpb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5mZWVkc192Ml9yZWdpb24sXG4gICAgICAgICAgICAgICAgaW1hZ2VfbW9kZXJhdGlvbl9lbmFibGVkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaW1hZ2VfbW9kZXJhdGlvbl9lbmFibGVkLFxuICAgICAgICAgICAgICAgIG1pZ3JhdGVfcGVybWlzc2lvbnNfdG9fdjI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5taWdyYXRlX3Blcm1pc3Npb25zX3RvX3YyLFxuICAgICAgICAgICAgICAgIG1vZGVyYXRpb25fZW5hYmxlZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1vZGVyYXRpb25fZW5hYmxlZCxcbiAgICAgICAgICAgICAgICBtb2RlcmF0aW9uX3dlYmhvb2tfdXJsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubW9kZXJhdGlvbl93ZWJob29rX3VybCxcbiAgICAgICAgICAgICAgICBtdWx0aV90ZW5hbnRfZW5hYmxlZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm11bHRpX3RlbmFudF9lbmFibGVkLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25fdmVyc2lvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBlcm1pc3Npb25fdmVyc2lvbixcbiAgICAgICAgICAgICAgICByZW1pbmRlcnNfaW50ZXJ2YWw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZW1pbmRlcnNfaW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgcmVtaW5kZXJzX21heF9tZW1iZXJzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVtaW5kZXJzX21heF9tZW1iZXJzLFxuICAgICAgICAgICAgICAgIHJldm9rZV90b2tlbnNfaXNzdWVkX2JlZm9yZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJldm9rZV90b2tlbnNfaXNzdWVkX2JlZm9yZSxcbiAgICAgICAgICAgICAgICBzbnNfa2V5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc25zX2tleSxcbiAgICAgICAgICAgICAgICBzbnNfc2VjcmV0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc25zX3NlY3JldCxcbiAgICAgICAgICAgICAgICBzbnNfdG9waWNfYXJuOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc25zX3RvcGljX2FybixcbiAgICAgICAgICAgICAgICBzcXNfa2V5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3FzX2tleSxcbiAgICAgICAgICAgICAgICBzcXNfc2VjcmV0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3FzX3NlY3JldCxcbiAgICAgICAgICAgICAgICBzcXNfdXJsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3FzX3VybCxcbiAgICAgICAgICAgICAgICB2aWRlb19wcm92aWRlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnZpZGVvX3Byb3ZpZGVyLFxuICAgICAgICAgICAgICAgIHdlYmhvb2tfdXJsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qud2ViaG9va191cmwsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF9mbGFnX3JlYXNvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hbGxvd2VkX2ZsYWdfcmVhc29ucyxcbiAgICAgICAgICAgICAgICBpbWFnZV9tb2RlcmF0aW9uX2Jsb2NrX2xhYmVsczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmltYWdlX21vZGVyYXRpb25fYmxvY2tfbGFiZWxzLFxuICAgICAgICAgICAgICAgIGltYWdlX21vZGVyYXRpb25fbGFiZWxzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaW1hZ2VfbW9kZXJhdGlvbl9sYWJlbHMsXG4gICAgICAgICAgICAgICAgdXNlcl9zZWFyY2hfZGlzYWxsb3dlZF9yb2xlczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfc2VhcmNoX2Rpc2FsbG93ZWRfcm9sZXMsXG4gICAgICAgICAgICAgICAgd2ViaG9va19ldmVudHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC53ZWJob29rX2V2ZW50cyxcbiAgICAgICAgICAgICAgICBhZ29yYV9vcHRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYWdvcmFfb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBhcG5fY29uZmlnOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXBuX2NvbmZpZyxcbiAgICAgICAgICAgICAgICBhc3luY19tb2RlcmF0aW9uX2NvbmZpZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmFzeW5jX21vZGVyYXRpb25fY29uZmlnLFxuICAgICAgICAgICAgICAgIGRhdGFkb2dfaW5mbzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmRhdGFkb2dfaW5mbyxcbiAgICAgICAgICAgICAgICBmaWxlX3VwbG9hZF9jb25maWc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5maWxlX3VwbG9hZF9jb25maWcsXG4gICAgICAgICAgICAgICAgZmlyZWJhc2VfY29uZmlnOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlyZWJhc2VfY29uZmlnLFxuICAgICAgICAgICAgICAgIGdyYW50czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmdyYW50cyxcbiAgICAgICAgICAgICAgICBobXNfb3B0aW9uczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lmhtc19vcHRpb25zLFxuICAgICAgICAgICAgICAgIGh1YXdlaV9jb25maWc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5odWF3ZWlfY29uZmlnLFxuICAgICAgICAgICAgICAgIGltYWdlX3VwbG9hZF9jb25maWc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pbWFnZV91cGxvYWRfY29uZmlnLFxuICAgICAgICAgICAgICAgIHB1c2hfY29uZmlnOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucHVzaF9jb25maWcsXG4gICAgICAgICAgICAgICAgeGlhb21pX2NvbmZpZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnhpYW9taV9jb25maWcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQQVRDSCcsICcvYXBpL3YyL2FwcCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfYiA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxpc3RCbG9ja0xpc3RzID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9jO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9ibG9ja2xpc3RzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9jID0gZGVjb2RlcnMuTGlzdEJsb2NrTGlzdFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZUJsb2NrTGlzdCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2Q7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgICAgIHdvcmRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qud29yZHMsXG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvYmxvY2tsaXN0cycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfZCA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZUJsb2NrTGlzdCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2U7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnREVMRVRFJywgJy9hcGkvdjIvYmxvY2tsaXN0cy97bmFtZX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9lID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0QmxvY2tMaXN0ID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9ibG9ja2xpc3RzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX2YgPSBkZWNvZGVycy5HZXRCbG9ja0xpc3RSZXNwb25zZSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVCbG9ja0xpc3QgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9nO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHdvcmRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qud29yZHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQVVQnLCAnL2FwaS92Mi9ibG9ja2xpc3RzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2cgPSBkZWNvZGVycy5SZXNwb25zZSkgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jaGVja1B1c2ggPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9oO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBhcG5fdGVtcGxhdGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hcG5fdGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgZmlyZWJhc2VfZGF0YV90ZW1wbGF0ZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmZpcmViYXNlX2RhdGFfdGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgZmlyZWJhc2VfdGVtcGxhdGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5maXJlYmFzZV90ZW1wbGF0ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZV9pZCxcbiAgICAgICAgICAgICAgICBwdXNoX3Byb3ZpZGVyX25hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wdXNoX3Byb3ZpZGVyX25hbWUsXG4gICAgICAgICAgICAgICAgcHVzaF9wcm92aWRlcl90eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucHVzaF9wcm92aWRlcl90eXBlLFxuICAgICAgICAgICAgICAgIHNraXBfZGV2aWNlczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNraXBfZGV2aWNlcyxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGVja19wdXNoJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9oID0gZGVjb2RlcnMuQ2hlY2tQdXNoUmVzcG9uc2UpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2hlY2tTTlMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9qO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBzbnNfa2V5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc25zX2tleSxcbiAgICAgICAgICAgICAgICBzbnNfc2VjcmV0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc25zX3NlY3JldCxcbiAgICAgICAgICAgICAgICBzbnNfdG9waWNfYXJuOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc25zX3RvcGljX2FybixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGVja19zbnMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2ogPSBkZWNvZGVycy5DaGVja1NOU1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoZWNrU1FTID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfaztcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgc3FzX2tleTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNxc19rZXksXG4gICAgICAgICAgICAgICAgc3FzX3NlY3JldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNxc19zZWNyZXQsXG4gICAgICAgICAgICAgICAgc3FzX3VybDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNxc191cmwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hlY2tfc3FzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9rID0gZGVjb2RlcnMuQ2hlY2tTUVNSZXNwb25zZSkgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVEZXZpY2UgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9sO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL2RldmljZXMnLCB1bmRlZmluZWQsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfbCA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2wuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxpc3REZXZpY2VzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfbTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvZGV2aWNlcycsIHVuZGVmaW5lZCwgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF9tID0gZGVjb2RlcnMuTGlzdERldmljZXNSZXNwb25zZSkgPT09IG51bGwgfHwgX20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVEZXZpY2UgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9vO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgICAgIHB1c2hfcHJvdmlkZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wdXNoX3Byb3ZpZGVyLFxuICAgICAgICAgICAgICAgIHB1c2hfcHJvdmlkZXJfbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnB1c2hfcHJvdmlkZXJfbmFtZSxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB2b2lwX3Rva2VuOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qudm9pcF90b2tlbixcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9kZXZpY2VzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9vID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF9vID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfby5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhwb3J0VXNlcnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9wO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2V4cG9ydC91c2VycycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfcCA9IGRlY29kZXJzLkV4cG9ydFVzZXJzUmVzcG9uc2UpID09PSBudWxsIHx8IF9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdEV4dGVybmFsU3RvcmFnZSA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfcTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvZXh0ZXJuYWxfc3RvcmFnZScsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfcSA9IGRlY29kZXJzLkxpc3RFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSkgPT09IG51bGwgfHwgX3EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9xLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVFeHRlcm5hbFN0b3JhZ2UgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9yO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBidWNrZXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5idWNrZXQsXG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgc3RvcmFnZV90eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3RvcmFnZV90eXBlLFxuICAgICAgICAgICAgICAgIGdjc19jcmVkZW50aWFsczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lmdjc19jcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBwYXRoOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGF0aCxcbiAgICAgICAgICAgICAgICBhd3NfczM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hd3NfczMsXG4gICAgICAgICAgICAgICAgYXp1cmVfYmxvYjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmF6dXJlX2Jsb2IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvZXh0ZXJuYWxfc3RvcmFnZScsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfciA9IGRlY29kZXJzLkNyZWF0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3IuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZUV4dGVybmFsU3RvcmFnZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3M7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnREVMRVRFJywgJy9hcGkvdjIvZXh0ZXJuYWxfc3RvcmFnZS97bmFtZX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9zID0gZGVjb2RlcnMuRGVsZXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2UpID09PSBudWxsIHx8IF9zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlRXh0ZXJuYWxTdG9yYWdlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfdDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBidWNrZXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5idWNrZXQsXG4gICAgICAgICAgICAgICAgc3RvcmFnZV90eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3RvcmFnZV90eXBlLFxuICAgICAgICAgICAgICAgIGdjc19jcmVkZW50aWFsczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lmdjc19jcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBwYXRoOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGF0aCxcbiAgICAgICAgICAgICAgICBhd3NfczM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hd3NfczMsXG4gICAgICAgICAgICAgICAgYXp1cmVfYmxvYjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmF6dXJlX2Jsb2IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQVVQnLCAnL2FwaS92Mi9leHRlcm5hbF9zdG9yYWdlL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX3QgPSBkZWNvZGVycy5VcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSkgPT09IG51bGwgfHwgX3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jaGVja0V4dGVybmFsU3RvcmFnZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3U7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvZXh0ZXJuYWxfc3RvcmFnZS97bmFtZX0vY2hlY2snLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF91ID0gZGVjb2RlcnMuQ2hlY2tFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSkgPT09IG51bGwgfHwgX3UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF91LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVHdWVzdCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3Y7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2d1ZXN0JywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF92ID0gZGVjb2RlcnMuQ3JlYXRlR3Vlc3RSZXNwb25zZSkgPT09IG51bGwgfHwgX3YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVJbXBvcnRVUkwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF93O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmZpbGVuYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2ltcG9ydF91cmxzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF93ID0gZGVjb2RlcnMuQ3JlYXRlSW1wb3J0VVJMUmVzcG9uc2UpID09PSBudWxsIHx8IF93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdEltcG9ydHMgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3g7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL2ltcG9ydHMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX3ggPSBkZWNvZGVycy5MaXN0SW1wb3J0c1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfeCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3guY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZUltcG9ydCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3k7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG1vZGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tb2RlLFxuICAgICAgICAgICAgICAgIHBhdGg6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2ltcG9ydHMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX3kgPSBkZWNvZGVycy5DcmVhdGVJbXBvcnRSZXNwb25zZSkgPT09IG51bGwgfHwgX3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF95LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRJbXBvcnQgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF96O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvaW1wb3J0cy97aWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfeiA9IGRlY29kZXJzLkdldEltcG9ydFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfeiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ouY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldE9HID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMDtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVybDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVybCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL29nJywgdW5kZWZpbmVkLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzAgPSBkZWNvZGVycy5HZXRPR1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzAuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxpc3RQZXJtaXNzaW9ucyA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvcGVybWlzc2lvbnMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzEgPSBkZWNvZGVycy5MaXN0UGVybWlzc2lvbnNSZXNwb25zZSkgPT09IG51bGwgfHwgXzEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRQZXJtaXNzaW9uID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL3Blcm1pc3Npb25zL3tpZH0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF8yID0gZGVjb2RlcnMuR2V0Q3VzdG9tUGVybWlzc2lvblJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzIuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxpc3RQdXNoUHJvdmlkZXJzID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9wdXNoX3Byb3ZpZGVycycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfMyA9IGRlY29kZXJzLkxpc3RQdXNoUHJvdmlkZXJzUmVzcG9uc2UpID09PSBudWxsIHx8IF8zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBzZXJ0UHVzaFByb3ZpZGVyID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfNDtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgcHVzaF9wcm92aWRlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnB1c2hfcHJvdmlkZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvcHVzaF9wcm92aWRlcnMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzQgPSBkZWNvZGVycy5VcHNlcnRQdXNoUHJvdmlkZXJSZXNwb25zZSkgPT09IG51bGwgfHwgXzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF80LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVQdXNoUHJvdmlkZXIgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF81O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL3B1c2hfcHJvdmlkZXJzL3t0eXBlfS97bmFtZX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF81ID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF81ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0UmF0ZUxpbWl0cyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzY7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfc2lkZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNlcnZlcl9zaWRlLFxuICAgICAgICAgICAgICAgIGFuZHJvaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hbmRyb2lkLFxuICAgICAgICAgICAgICAgIGlvczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlvcyxcbiAgICAgICAgICAgICAgICB3ZWI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC53ZWIsXG4gICAgICAgICAgICAgICAgZW5kcG9pbnRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZW5kcG9pbnRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvcmF0ZV9saW1pdHMnLCB1bmRlZmluZWQsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfNiA9IGRlY29kZXJzLkdldFJhdGVMaW1pdHNSZXNwb25zZSkgPT09IG51bGwgfHwgXzYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF82LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5saXN0Um9sZXMgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzc7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL3JvbGVzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF83ID0gZGVjb2RlcnMuTGlzdFJvbGVzUmVzcG9uc2UpID09PSBudWxsIHx8IF83ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY3JlYXRlUm9sZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzg7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3JvbGVzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF84ID0gZGVjb2RlcnMuQ3JlYXRlUm9sZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzguY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZVJvbGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF85O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL3JvbGVzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzkgPSBkZWNvZGVycy5SZXNwb25zZSkgPT09IG51bGwgfHwgXzkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF85LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRUYXNrID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTA7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi90YXNrcy97aWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfMTAgPSBkZWNvZGVycy5HZXRUYXNrUmVzcG9uc2UpID09PSBudWxsIHx8IF8xMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzEwLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeVVzZXJzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTE7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGF5bG9hZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL3VzZXJzJywgdW5kZWZpbmVkLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzExID0gZGVjb2RlcnMuUXVlcnlVc2Vyc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xMS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlVXNlcnNQYXJ0aWFsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTI7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQQVRDSCcsICcvYXBpL3YyL3VzZXJzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8xMiA9IGRlY29kZXJzLlVwZGF0ZVVzZXJzUmVzcG9uc2UpID09PSBudWxsIHx8IF8xMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzEyLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVVc2VycyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzEzO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3VzZXJzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8xMyA9IGRlY29kZXJzLlVwZGF0ZVVzZXJzUmVzcG9uc2UpID09PSBudWxsIHx8IF8xMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzEzLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRCbG9ja2VkVXNlcnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xNDtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdXNlcnMvYmxvY2snLCB1bmRlZmluZWQsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfMTQgPSBkZWNvZGVycy5HZXRCbG9ja2VkVXNlcnNSZXNwb25zZSkgPT09IG51bGwgfHwgXzE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTQuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJsb2NrVXNlcnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xNTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgYmxvY2tlZF91c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmxvY2tlZF91c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3VzZXJzL2Jsb2NrJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8xNSA9IGRlY29kZXJzLkJsb2NrVXNlcnNSZXNwb25zZSkgPT09IG51bGwgfHwgXzE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTUuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlYWN0aXZhdGVVc2VycyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzE2O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWRzLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYnlfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jcmVhdGVkX2J5X2lkLFxuICAgICAgICAgICAgICAgIG1hcmtfY2hhbm5lbHNfZGVsZXRlZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1hcmtfY2hhbm5lbHNfZGVsZXRlZCxcbiAgICAgICAgICAgICAgICBtYXJrX21lc3NhZ2VzX2RlbGV0ZWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tYXJrX21lc3NhZ2VzX2RlbGV0ZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdXNlcnMvZGVhY3RpdmF0ZScsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMTYgPSBkZWNvZGVycy5EZWFjdGl2YXRlVXNlcnNSZXNwb25zZSkgPT09IG51bGwgfHwgXzE2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTYuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZVVzZXJzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTc7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZHMsXG4gICAgICAgICAgICAgICAgY2FsbHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jYWxscyxcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY29udmVyc2F0aW9ucyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgIG5ld19jYWxsX293bmVyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmV3X2NhbGxfb3duZXJfaWQsXG4gICAgICAgICAgICAgICAgbmV3X2NoYW5uZWxfb3duZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uZXdfY2hhbm5lbF9vd25lcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi91c2Vycy9kZWxldGUnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzE3ID0gZGVjb2RlcnMuRGVsZXRlVXNlcnNSZXNwb25zZSkgPT09IG51bGwgfHwgXzE3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTcuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlYWN0aXZhdGVVc2VycyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzE4O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWRzLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYnlfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jcmVhdGVkX2J5X2lkLFxuICAgICAgICAgICAgICAgIHJlc3RvcmVfY2hhbm5lbHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZXN0b3JlX2NoYW5uZWxzLFxuICAgICAgICAgICAgICAgIHJlc3RvcmVfbWVzc2FnZXM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZXN0b3JlX21lc3NhZ2VzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3VzZXJzL3JlYWN0aXZhdGUnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzE4ID0gZGVjb2RlcnMuUmVhY3RpdmF0ZVVzZXJzUmVzcG9uc2UpID09PSBudWxsIHx8IF8xOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzE4LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZXN0b3JlVXNlcnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xOTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi91c2Vycy9yZXN0b3JlJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8xOSA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMTkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xOS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudW5ibG9ja1VzZXJzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjA7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGJsb2NrZWRfdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmJsb2NrZWRfdXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi91c2Vycy91bmJsb2NrJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yMCA9IGRlY29kZXJzLlVuYmxvY2tVc2Vyc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMjAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8yMC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVhY3RpdmF0ZVVzZXIgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8yMTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2J5X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY3JlYXRlZF9ieV9pZCxcbiAgICAgICAgICAgICAgICBtYXJrX21lc3NhZ2VzX2RlbGV0ZWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tYXJrX21lc3NhZ2VzX2RlbGV0ZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdXNlcnMve3VzZXJfaWR9L2RlYWN0aXZhdGUnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yMSA9IGRlY29kZXJzLkRlYWN0aXZhdGVVc2VyUmVzcG9uc2UpID09PSBudWxsIHx8IF8yMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzIxLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leHBvcnRVc2VyID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjI7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdXNlcnMve3VzZXJfaWR9L2V4cG9ydCcsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzIyID0gZGVjb2RlcnMuRXhwb3J0VXNlclJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8yMi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVhY3RpdmF0ZVVzZXIgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8yMztcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2J5X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY3JlYXRlZF9ieV9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgICAgICByZXN0b3JlX21lc3NhZ2VzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVzdG9yZV9tZXNzYWdlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi91c2Vycy97dXNlcl9pZH0vcmVhY3RpdmF0ZScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzIzID0gZGVjb2RlcnMuUmVhY3RpdmF0ZVVzZXJSZXNwb25zZSkgPT09IG51bGwgfHwgXzIzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMjMuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuY2xhc3MgVmlkZW9BcGkgZXh0ZW5kcyBCYXNlQXBpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5xdWVyeUNhbGxNZW1iZXJzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBsaW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmxpbWl0LFxuICAgICAgICAgICAgICAgIG5leHQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uZXh0LFxuICAgICAgICAgICAgICAgIHByZXY6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wcmV2LFxuICAgICAgICAgICAgICAgIHNvcnQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zb3J0LFxuICAgICAgICAgICAgICAgIGZpbHRlcl9jb25kaXRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyX2NvbmRpdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC9tZW1iZXJzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9hID0gZGVjb2RlcnMuUXVlcnlDYWxsTWVtYmVyc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5Q2FsbFN0YXRzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5saW1pdCxcbiAgICAgICAgICAgICAgICBuZXh0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmV4dCxcbiAgICAgICAgICAgICAgICBwcmV2OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucHJldixcbiAgICAgICAgICAgICAgICBzb3J0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc29ydCxcbiAgICAgICAgICAgICAgICBmaWx0ZXJfY29uZGl0aW9uczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmZpbHRlcl9jb25kaXRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwvc3RhdHMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2IgPSBkZWNvZGVycy5RdWVyeUNhbGxTdGF0c1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldENhbGwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9jO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbWVtYmVyc19saW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lbWJlcnNfbGltaXQsXG4gICAgICAgICAgICAgICAgcmluZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJpbmcsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qubm90aWZ5LFxuICAgICAgICAgICAgICAgIHZpZGVvOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudmlkZW8sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfScsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfYyA9IGRlY29kZXJzLkdldENhbGxSZXNwb25zZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVDYWxsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHN0YXJ0c19hdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnN0YXJ0c19hdCxcbiAgICAgICAgICAgICAgICBjdXN0b206IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jdXN0b20sXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Nfb3ZlcnJpZGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zZXR0aW5nc19vdmVycmlkZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BBVENIJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2QgPSBkZWNvZGVycy5VcGRhdGVDYWxsUmVzcG9uc2UpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0T3JDcmVhdGVDYWxsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG1lbWJlcnNfbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZW1iZXJzX2xpbWl0LFxuICAgICAgICAgICAgICAgIG5vdGlmeTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5vdGlmeSxcbiAgICAgICAgICAgICAgICByaW5nOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmluZyxcbiAgICAgICAgICAgICAgICB2aWRlbzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnZpZGVvLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9lID0gZGVjb2RlcnMuR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2UpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYmxvY2tVc2VyID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vYmxvY2snLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9mID0gZGVjb2RlcnMuQmxvY2tVc2VyUmVzcG9uc2UpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FsbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2c7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBoYXJkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaGFyZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L2RlbGV0ZScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2cgPSBkZWNvZGVycy5EZWxldGVDYWxsUmVzcG9uc2UpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZENhbGxFdmVudCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2g7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICBjdXN0b206IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jdXN0b20sXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9ldmVudCcsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2ggPSBkZWNvZGVycy5TZW5kQ2FsbEV2ZW50UmVzcG9uc2UpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29sbGVjdFVzZXJGZWVkYmFjayA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2o7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNlc3Npb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICByYXRpbmc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yYXRpbmcsXG4gICAgICAgICAgICAgICAgc2RrOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2RrLFxuICAgICAgICAgICAgICAgIHNka192ZXJzaW9uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2RrX3ZlcnNpb24sXG4gICAgICAgICAgICAgICAgdXNlcl9zZXNzaW9uX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9zZXNzaW9uX2lkLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJlYXNvbixcbiAgICAgICAgICAgICAgICBjdXN0b206IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jdXN0b20sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9mZWVkYmFjay97c2Vzc2lvbn0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9qID0gZGVjb2RlcnMuQ29sbGVjdFVzZXJGZWVkYmFja1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdvTGl2ZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2s7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICByZWNvcmRpbmdfc3RvcmFnZV9uYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVjb3JkaW5nX3N0b3JhZ2VfbmFtZSxcbiAgICAgICAgICAgICAgICBzdGFydF9obHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zdGFydF9obHMsXG4gICAgICAgICAgICAgICAgc3RhcnRfcmVjb3JkaW5nOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3RhcnRfcmVjb3JkaW5nLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3J0bXBfYnJvYWRjYXN0czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnN0YXJ0X3J0bXBfYnJvYWRjYXN0cyxcbiAgICAgICAgICAgICAgICBzdGFydF90cmFuc2NyaXB0aW9uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3RhcnRfdHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uX3N0b3JhZ2VfbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnRyYW5zY3JpcHRpb25fc3RvcmFnZV9uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vZ29fbGl2ZScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2sgPSBkZWNvZGVycy5Hb0xpdmVSZXNwb25zZSkgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbmRDYWxsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfbDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L21hcmtfZW5kZWQnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9sID0gZGVjb2RlcnMuRW5kQ2FsbFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2wuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxNZW1iZXJzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfbTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHJlbW92ZV9tZW1iZXJzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVtb3ZlX21lbWJlcnMsXG4gICAgICAgICAgICAgICAgdXBkYXRlX21lbWJlcnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51cGRhdGVfbWVtYmVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L21lbWJlcnMnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9tID0gZGVjb2RlcnMuVXBkYXRlQ2FsbE1lbWJlcnNSZXNwb25zZSkgPT09IG51bGwgfHwgX20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tdXRlVXNlcnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9vO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgYXVkaW86IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hdWRpbyxcbiAgICAgICAgICAgICAgICBtdXRlX2FsbF91c2VyczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm11dGVfYWxsX3VzZXJzLFxuICAgICAgICAgICAgICAgIG11dGVkX2J5X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubXV0ZWRfYnlfaWQsXG4gICAgICAgICAgICAgICAgc2NyZWVuc2hhcmU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zY3JlZW5zaGFyZSxcbiAgICAgICAgICAgICAgICBzY3JlZW5zaGFyZV9hdWRpbzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNjcmVlbnNoYXJlX2F1ZGlvLFxuICAgICAgICAgICAgICAgIHZpZGVvOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudmlkZW8sXG4gICAgICAgICAgICAgICAgdXNlcl9pZHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkcyxcbiAgICAgICAgICAgICAgICBtdXRlZF9ieTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm11dGVkX2J5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vbXV0ZV91c2VycycsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX28gPSBkZWNvZGVycy5NdXRlVXNlcnNSZXNwb25zZSkgPT09IG51bGwgfHwgX28gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52aWRlb1BpbiA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3A7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2Vzc2lvbl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L3BpbicsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX3AgPSBkZWNvZGVycy5QaW5SZXNwb25zZSkgPT09IG51bGwgfHwgX3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5saXN0UmVjb3JkaW5ncyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3E7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L3JlY29yZGluZ3MnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9xID0gZGVjb2RlcnMuTGlzdFJlY29yZGluZ3NSZXNwb25zZSkgPT09IG51bGwgfHwgX3EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9xLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGFydFJUTVBCcm9hZGNhc3RzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfcjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5icm9hZGNhc3RzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vcnRtcF9icm9hZGNhc3RzJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfciA9IGRlY29kZXJzLlN0YXJ0UlRNUEJyb2FkY2FzdHNSZXNwb25zZSkgPT09IG51bGwgfHwgX3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdG9wQWxsUlRNUEJyb2FkY2FzdHMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9zO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vcnRtcF9icm9hZGNhc3RzL3N0b3AnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9zID0gZGVjb2RlcnMuU3RvcEFsbFJUTVBCcm9hZGNhc3RzUmVzcG9uc2UpID09PSBudWxsIHx8IF9zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcFJUTVBCcm9hZGNhc3QgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF90O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vcnRtcF9icm9hZGNhc3RzL3tuYW1lfS9zdG9wJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfdCA9IGRlY29kZXJzLlN0b3BSVE1QQnJvYWRjYXN0c1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3QuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXJ0SExTQnJvYWRjYXN0aW5nID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfdTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L3N0YXJ0X2Jyb2FkY2FzdGluZycsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX3UgPSBkZWNvZGVycy5TdGFydEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfdSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3UuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXJ0UmVjb3JkaW5nID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfdjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHJlY29yZGluZ19leHRlcm5hbF9zdG9yYWdlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVjb3JkaW5nX2V4dGVybmFsX3N0b3JhZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9zdGFydF9yZWNvcmRpbmcnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF92ID0gZGVjb2RlcnMuU3RhcnRSZWNvcmRpbmdSZXNwb25zZSkgPT09IG51bGwgfHwgX3YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGFydFRyYW5zY3JpcHRpb24gPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF93O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdGlvbl9leHRlcm5hbF9zdG9yYWdlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHJhbnNjcmlwdGlvbl9leHRlcm5hbF9zdG9yYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RhcnRfdHJhbnNjcmlwdGlvbicsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX3cgPSBkZWNvZGVycy5TdGFydFRyYW5zY3JpcHRpb25SZXNwb25zZSkgPT09IG51bGwgfHwgX3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRDYWxsU3RhdHMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF94O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zZXNzaW9uLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9zdGF0cy97c2Vzc2lvbn0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF94ID0gZGVjb2RlcnMuR2V0Q2FsbFN0YXRzUmVzcG9uc2UpID09PSBudWxsIHx8IF94ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfeC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcEhMU0Jyb2FkY2FzdGluZyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3k7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9zdG9wX2Jyb2FkY2FzdGluZycsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX3kgPSBkZWNvZGVycy5TdG9wSExTQnJvYWRjYXN0aW5nUmVzcG9uc2UpID09PSBudWxsIHx8IF95ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfeS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcExpdmUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF96O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RvcF9saXZlJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfeiA9IGRlY29kZXJzLlN0b3BMaXZlUmVzcG9uc2UpID09PSBudWxsIHx8IF96ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfei5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcFJlY29yZGluZyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzA7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9zdG9wX3JlY29yZGluZycsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzAgPSBkZWNvZGVycy5TdG9wUmVjb3JkaW5nUmVzcG9uc2UpID09PSBudWxsIHx8IF8wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcFRyYW5zY3JpcHRpb24gPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RvcF90cmFuc2NyaXB0aW9uJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfMSA9IGRlY29kZXJzLlN0b3BUcmFuc2NyaXB0aW9uUmVzcG9uc2UpID09PSBudWxsIHx8IF8xID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdFRyYW5zY3JpcHRpb25zID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vdHJhbnNjcmlwdGlvbnMnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF8yID0gZGVjb2RlcnMuTGlzdFRyYW5zY3JpcHRpb25zUmVzcG9uc2UpID09PSBudWxsIHx8IF8yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudW5ibG9ja1VzZXIgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS91bmJsb2NrJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMyA9IGRlY29kZXJzLlVuYmxvY2tVc2VyUmVzcG9uc2UpID09PSBudWxsIHx8IF8zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmlkZW9VbnBpbiA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzQ7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2Vzc2lvbl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L3VucGluJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfNCA9IGRlY29kZXJzLlVucGluUmVzcG9uc2UpID09PSBudWxsIHx8IF80ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlVXNlclBlcm1pc3Npb25zID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfNTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIGdyYW50X3Blcm1pc3Npb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZ3JhbnRfcGVybWlzc2lvbnMsXG4gICAgICAgICAgICAgICAgcmV2b2tlX3Blcm1pc3Npb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmV2b2tlX3Blcm1pc3Npb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vdXNlcl9wZXJtaXNzaW9ucycsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzUgPSBkZWNvZGVycy5VcGRhdGVVc2VyUGVybWlzc2lvbnNSZXNwb25zZSkgPT09IG51bGwgfHwgXzUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF81LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVSZWNvcmRpbmcgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF82O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zZXNzaW9uLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsZW5hbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2FwaS92Mi92aWRlby9jYWxsL3t0eXBlfS97aWR9L3tzZXNzaW9ufS9yZWNvcmRpbmdzL3tmaWxlbmFtZX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF82ID0gZGVjb2RlcnMuRGVsZXRlUmVjb3JkaW5nUmVzcG9uc2UpID09PSBudWxsIHx8IF82ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVsZXRlVHJhbnNjcmlwdGlvbiA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzc7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNlc3Npb24sXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5maWxlbmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0ve3Nlc3Npb259L3RyYW5zY3JpcHRpb25zL3tmaWxlbmFtZX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF83ID0gZGVjb2RlcnMuRGVsZXRlVHJhbnNjcmlwdGlvblJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzcuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5Q2FsbHMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF84O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBsaW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmxpbWl0LFxuICAgICAgICAgICAgICAgIG5leHQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uZXh0LFxuICAgICAgICAgICAgICAgIHByZXY6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wcmV2LFxuICAgICAgICAgICAgICAgIHNvcnQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zb3J0LFxuICAgICAgICAgICAgICAgIGZpbHRlcl9jb25kaXRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyX2NvbmRpdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvdmlkZW8vY2FsbHMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzggPSBkZWNvZGVycy5RdWVyeUNhbGxzUmVzcG9uc2UpID09PSBudWxsIHx8IF84ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfOC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdENhbGxUeXBlcyA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfOTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdmlkZW8vY2FsbHR5cGVzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF85ID0gZGVjb2RlcnMuTGlzdENhbGxUeXBlUmVzcG9uc2UpID09PSBudWxsIHx8IF85ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfOS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2FsbFR5cGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xMDtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxfc3RvcmFnZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmV4dGVybmFsX3N0b3JhZ2UsXG4gICAgICAgICAgICAgICAgZ3JhbnRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZ3JhbnRzLFxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbl9zZXR0aW5nczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5vdGlmaWNhdGlvbl9zZXR0aW5ncyxcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNldHRpbmdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL3ZpZGVvL2NhbGx0eXBlcycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMTAgPSBkZWNvZGVycy5DcmVhdGVDYWxsVHlwZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xMC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVsZXRlQ2FsbFR5cGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xMTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2FwaS92Mi92aWRlby9jYWxsdHlwZXMve25hbWV9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfMTEgPSBkZWNvZGVycy5SZXNwb25zZSkgPT09IG51bGwgfHwgXzExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTEuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldENhbGxUeXBlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTI7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdmlkZW8vY2FsbHR5cGVzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzEyID0gZGVjb2RlcnMuR2V0Q2FsbFR5cGVSZXNwb25zZSkgPT09IG51bGwgfHwgXzEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTIuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxUeXBlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTM7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxfc3RvcmFnZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmV4dGVybmFsX3N0b3JhZ2UsXG4gICAgICAgICAgICAgICAgZ3JhbnRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZ3JhbnRzLFxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbl9zZXR0aW5nczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5vdGlmaWNhdGlvbl9zZXR0aW5ncyxcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNldHRpbmdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUFVUJywgJy9hcGkvdjIvdmlkZW8vY2FsbHR5cGVzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzEzID0gZGVjb2RlcnMuVXBkYXRlQ2FsbFR5cGVSZXNwb25zZSkgPT09IG51bGwgfHwgXzEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTMuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldEVkZ2VzID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xNDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvdmlkZW8vZWRnZXMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzE0ID0gZGVjb2RlcnMuR2V0RWRnZXNSZXNwb25zZSkgPT09IG51bGwgfHwgXzE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTQuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuY2xhc3MgQ2FsbEFwaSB7XG4gICAgY29uc3RydWN0b3IodmlkZW9BcGksIHR5cGUsIGlkKSB7XG4gICAgICAgIHRoaXMudmlkZW9BcGkgPSB2aWRlb0FwaTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmdldCA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5nZXRDYWxsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkudXBkYXRlQ2FsbChPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0T3JDcmVhdGUgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkuZ2V0T3JDcmVhdGVDYWxsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ibG9ja1VzZXIgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkuYmxvY2tVc2VyKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGUgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkuZGVsZXRlQ2FsbChPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZENhbGxFdmVudCA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5zZW5kQ2FsbEV2ZW50KE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb2xsZWN0VXNlckZlZWRiYWNrID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLmNvbGxlY3RVc2VyRmVlZGJhY2soT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdvTGl2ZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5nb0xpdmUoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLmVuZENhbGwoeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxNZW1iZXJzID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnVwZGF0ZUNhbGxNZW1iZXJzKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tdXRlVXNlcnMgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkubXV0ZVVzZXJzKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy52aWRlb1BpbiA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS52aWRlb1BpbihPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubGlzdFJlY29yZGluZ3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5saXN0UmVjb3JkaW5ncyh7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhcnRSVE1QQnJvYWRjYXN0cyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5zdGFydFJUTVBCcm9hZGNhc3RzKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9wQWxsUlRNUEJyb2FkY2FzdHMgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5zdG9wQWxsUlRNUEJyb2FkY2FzdHMoe1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3BSVE1QQnJvYWRjYXN0ID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnN0b3BSVE1QQnJvYWRjYXN0KE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGFydEhMU0Jyb2FkY2FzdGluZyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnN0YXJ0SExTQnJvYWRjYXN0aW5nKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZGluZyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5zdGFydFJlY29yZGluZyhPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhcnRUcmFuc2NyaXB0aW9uID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnN0YXJ0VHJhbnNjcmlwdGlvbihPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q2FsbFN0YXRzID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLmdldENhbGxTdGF0cyhPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcEhMU0Jyb2FkY2FzdGluZyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnN0b3BITFNCcm9hZGNhc3RpbmcoeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3BMaXZlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkuc3RvcExpdmUoeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3BSZWNvcmRpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5zdG9wUmVjb3JkaW5nKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9wVHJhbnNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnN0b3BUcmFuc2NyaXB0aW9uKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0VHJhbnNjcmlwdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5saXN0VHJhbnNjcmlwdGlvbnMoeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVuYmxvY2tVc2VyID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnVuYmxvY2tVc2VyKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy52aWRlb1VucGluID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvQXBpLnZpZGVvVW5waW4oT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVVzZXJQZXJtaXNzaW9ucyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS51cGRhdGVVc2VyUGVybWlzc2lvbnMoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZVJlY29yZGluZyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb0FwaS5kZWxldGVSZWNvcmRpbmcoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZVRyYW5zY3JpcHRpb24gPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkuZGVsZXRlVHJhbnNjcmlwdGlvbihPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBTdHJlYW1DYWxsIGV4dGVuZHMgQ2FsbEFwaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gdGhpcy5nZXRPckNyZWF0ZTtcbiAgICAgICAgdGhpcy5xdWVyeU1lbWJlcnMgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9BcGkucXVlcnlDYWxsTWVtYmVycyhPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCAocmVxdWVzdCAhPT0gbnVsbCAmJiByZXF1ZXN0ICE9PSB2b2lkIDAgPyByZXF1ZXN0IDoge30pKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjaWQoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnR5cGV9OiR7dGhpcy5pZH1gO1xuICAgIH1cbn1cblxuY2xhc3MgU3RyZWFtVmlkZW9DbGllbnQgZXh0ZW5kcyBWaWRlb0FwaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuY2FsbCA9ICh0eXBlLCBpZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJlYW1DYWxsKHRoaXMsIHR5cGUsIGlkKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIENoYXRBcGkgZXh0ZW5kcyBCYXNlQXBpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5xdWVyeUNoYW5uZWxzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5saW1pdCxcbiAgICAgICAgICAgICAgICBtZW1iZXJfbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZW1iZXJfbGltaXQsXG4gICAgICAgICAgICAgICAgbWVzc2FnZV9saW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lc3NhZ2VfbGltaXQsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qub2Zmc2V0LFxuICAgICAgICAgICAgICAgIHN0YXRlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc3RhdGUsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgc29ydDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNvcnQsXG4gICAgICAgICAgICAgICAgZmlsdGVyX2NvbmRpdGlvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5maWx0ZXJfY29uZGl0aW9ucyxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9hID0gZGVjb2RlcnMuUXVlcnlDaGFubmVsc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZUNoYW5uZWxzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNpZHMsXG4gICAgICAgICAgICAgICAgaGFyZF9kZWxldGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5oYXJkX2RlbGV0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL2RlbGV0ZScsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfYiA9IGRlY29kZXJzLkRlbGV0ZUNoYW5uZWxzUmVzcG9uc2UpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFya0NoYW5uZWxzUmVhZCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2M7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHJlYWRfYnlfY2hhbm5lbDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJlYWRfYnlfY2hhbm5lbCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3JlYWQnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2MgPSBkZWNvZGVycy5NYXJrUmVhZFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldE9yQ3JlYXRlRGlzdGluY3RDaGFubmVsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBoaWRlX2Zvcl9jcmVhdG9yOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaGlkZV9mb3JfY3JlYXRvcixcbiAgICAgICAgICAgICAgICBzdGF0ZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnN0YXRlLFxuICAgICAgICAgICAgICAgIHRocmVhZF91bnJlYWRfY291bnRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGhyZWFkX3VucmVhZF9jb3VudHMsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmRhdGEsXG4gICAgICAgICAgICAgICAgbWVtYmVyczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lbWJlcnMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB3YXRjaGVyczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LndhdGNoZXJzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvY2hhbm5lbHMve3R5cGV9L3F1ZXJ5JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfZCA9IGRlY29kZXJzLkNoYW5uZWxTdGF0ZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZUNoYW5uZWwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9lO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaGFyZF9kZWxldGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5oYXJkX2RlbGV0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9JywgcGF0aFBhcmFtcywgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF9lID0gZGVjb2RlcnMuRGVsZXRlQ2hhbm5lbFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUNoYW5uZWxQYXJ0aWFsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVuc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudW5zZXQsXG4gICAgICAgICAgICAgICAgc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2V0LFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUEFUQ0gnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfZiA9IGRlY29kZXJzLlVwZGF0ZUNoYW5uZWxQYXJ0aWFsUmVzcG9uc2UpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2hhbm5lbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2c7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBhY2NlcHRfaW52aXRlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYWNjZXB0X2ludml0ZSxcbiAgICAgICAgICAgICAgICBjb29sZG93bjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNvb2xkb3duLFxuICAgICAgICAgICAgICAgIGhpZGVfaGlzdG9yeTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmhpZGVfaGlzdG9yeSxcbiAgICAgICAgICAgICAgICByZWplY3RfaW52aXRlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVqZWN0X2ludml0ZSxcbiAgICAgICAgICAgICAgICBza2lwX3B1c2g6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5za2lwX3B1c2gsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgYWRkX21lbWJlcnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hZGRfbWVtYmVycyxcbiAgICAgICAgICAgICAgICBhZGRfbW9kZXJhdG9yczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmFkZF9tb2RlcmF0b3JzLFxuICAgICAgICAgICAgICAgIGFzc2lnbl9yb2xlczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmFzc2lnbl9yb2xlcyxcbiAgICAgICAgICAgICAgICBkZW1vdGVfbW9kZXJhdG9yczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmRlbW90ZV9tb2RlcmF0b3JzLFxuICAgICAgICAgICAgICAgIGludml0ZXM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pbnZpdGVzLFxuICAgICAgICAgICAgICAgIHJlbW92ZV9tZW1iZXJzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVtb3ZlX21lbWJlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmRhdGEsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9jaGFubmVscy97dHlwZX0ve2lkfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2cgPSBkZWNvZGVycy5VcGRhdGVDaGFubmVsUmVzcG9uc2UpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50ID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfaDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZXZlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9jaGFubmVscy97dHlwZX0ve2lkfS9ldmVudCcsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2ggPSBkZWNvZGVycy5FdmVudFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZUZpbGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9qO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdXJsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXJsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL2NoYXQvY2hhbm5lbHMve3R5cGV9L3tpZH0vZmlsZScsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfaiA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwbG9hZEZpbGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9rO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZmlsZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmZpbGUsXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9jaGFubmVscy97dHlwZX0ve2lkfS9maWxlJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfayA9IGRlY29kZXJzLkZpbGVVcGxvYWRSZXNwb25zZSkgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oaWRlQ2hhbm5lbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2w7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjbGVhcl9oaXN0b3J5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY2xlYXJfaGlzdG9yeSxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9L2hpZGUnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9sID0gZGVjb2RlcnMuSGlkZUNoYW5uZWxSZXNwb25zZSkgPT09IG51bGwgfHwgX2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVJbWFnZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX207XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51cmwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnREVMRVRFJywgJy9hcGkvdjIvY2hhdC9jaGFubmVscy97dHlwZX0ve2lkfS9pbWFnZScsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfbSA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX20uY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwbG9hZEltYWdlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfbztcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGZpbGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5maWxlLFxuICAgICAgICAgICAgICAgIHVwbG9hZF9zaXplczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVwbG9hZF9zaXplcyxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9L2ltYWdlJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfbyA9IGRlY29kZXJzLkltYWdlVXBsb2FkUmVzcG9uc2UpID09PSBudWxsIHx8IF9vID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfby5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlTWVtYmVyUGFydGlhbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3A7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1bnNldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVuc2V0LFxuICAgICAgICAgICAgICAgIHNldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNldCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BBVENIJywgJy9hcGkvdjIvY2hhdC9jaGFubmVscy97dHlwZX0ve2lkfS9tZW1iZXIve3VzZXJfaWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfcCA9IGRlY29kZXJzLlVwZGF0ZU1lbWJlclBhcnRpYWxSZXNwb25zZSkgPT09IG51bGwgfHwgX3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3E7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBmb3JjZV9tb2RlcmF0aW9uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZm9yY2VfbW9kZXJhdGlvbixcbiAgICAgICAgICAgICAgICBrZWVwX2NoYW5uZWxfaGlkZGVuOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qua2VlcF9jaGFubmVsX2hpZGRlbixcbiAgICAgICAgICAgICAgICBwZW5kaW5nOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGVuZGluZyxcbiAgICAgICAgICAgICAgICBza2lwX2VucmljaF91cmw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5za2lwX2VucmljaF91cmwsXG4gICAgICAgICAgICAgICAgc2tpcF9wdXNoOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2tpcF9wdXNoLFxuICAgICAgICAgICAgICAgIHBlbmRpbmdfbWVzc2FnZV9tZXRhZGF0YTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBlbmRpbmdfbWVzc2FnZV9tZXRhZGF0YSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9L21lc3NhZ2UnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9xID0gZGVjb2RlcnMuU2VuZE1lc3NhZ2VSZXNwb25zZSkgPT09IG51bGwgfHwgX3EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9xLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRNYW55TWVzc2FnZXMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9yO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL2NoYXQvY2hhbm5lbHMve3R5cGV9L3tpZH0vbWVzc2FnZXMnLCBwYXRoUGFyYW1zLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoX3IgPSBkZWNvZGVycy5HZXRNYW55TWVzc2FnZXNSZXNwb25zZSkgPT09IG51bGwgfHwgX3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRPckNyZWF0ZUNoYW5uZWwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9zO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgaGlkZV9mb3JfY3JlYXRvcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmhpZGVfZm9yX2NyZWF0b3IsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zdGF0ZSxcbiAgICAgICAgICAgICAgICB0aHJlYWRfdW5yZWFkX2NvdW50czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnRocmVhZF91bnJlYWRfY291bnRzLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kYXRhLFxuICAgICAgICAgICAgICAgIG1lbWJlcnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZW1iZXJzLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgd2F0Y2hlcnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC53YXRjaGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9L3F1ZXJ5JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfcyA9IGRlY29kZXJzLkNoYW5uZWxTdGF0ZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3MuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1hcmtSZWFkID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfdDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIHRocmVhZF9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnRocmVhZF9pZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9L3JlYWQnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF90ID0gZGVjb2RlcnMuTWFya1JlYWRSZXNwb25zZSkgPT09IG51bGwgfHwgX3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zaG93Q2hhbm5lbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3U7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWxzL3t0eXBlfS97aWR9L3Nob3cnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF91ID0gZGVjb2RlcnMuU2hvd0NoYW5uZWxSZXNwb25zZSkgPT09IG51bGwgfHwgX3UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF91LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50cnVuY2F0ZUNoYW5uZWwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF92O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHlwZSxcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgaGFyZF9kZWxldGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5oYXJkX2RlbGV0ZSxcbiAgICAgICAgICAgICAgICBza2lwX3B1c2g6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5za2lwX3B1c2gsXG4gICAgICAgICAgICAgICAgdHJ1bmNhdGVkX2F0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudHJ1bmNhdGVkX2F0LFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvY2hhbm5lbHMve3R5cGV9L3tpZH0vdHJ1bmNhdGUnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF92ID0gZGVjb2RlcnMuVHJ1bmNhdGVDaGFubmVsUmVzcG9uc2UpID09PSBudWxsIHx8IF92ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFya1VucmVhZCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3c7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBlLFxuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZV9pZCxcbiAgICAgICAgICAgICAgICB0aHJlYWRfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50aHJlYWRfaWQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9jaGFubmVscy97dHlwZX0ve2lkfS91bnJlYWQnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF93ID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdENoYW5uZWxUeXBlcyA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfeDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9jaGFubmVsdHlwZXMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX3ggPSBkZWNvZGVycy5MaXN0Q2hhbm5lbFR5cGVzUmVzcG9uc2UpID09PSBudWxsIHx8IF94ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfeC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hhbm5lbFR5cGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF95O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBhdXRvbW9kOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXV0b21vZCxcbiAgICAgICAgICAgICAgICBhdXRvbW9kX2JlaGF2aW9yOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXV0b21vZF9iZWhhdmlvcixcbiAgICAgICAgICAgICAgICBtYXhfbWVzc2FnZV9sZW5ndGg6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tYXhfbWVzc2FnZV9sZW5ndGgsXG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgYmxvY2tsaXN0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmxvY2tsaXN0LFxuICAgICAgICAgICAgICAgIGJsb2NrbGlzdF9iZWhhdmlvcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmJsb2NrbGlzdF9iZWhhdmlvcixcbiAgICAgICAgICAgICAgICBjb25uZWN0X2V2ZW50czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNvbm5lY3RfZXZlbnRzLFxuICAgICAgICAgICAgICAgIGN1c3RvbV9ldmVudHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jdXN0b21fZXZlbnRzLFxuICAgICAgICAgICAgICAgIG1hcmtfbWVzc2FnZXNfcGVuZGluZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1hcmtfbWVzc2FnZXNfcGVuZGluZyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlX3JldGVudGlvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lc3NhZ2VfcmV0ZW50aW9uLFxuICAgICAgICAgICAgICAgIG11dGVzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubXV0ZXMsXG4gICAgICAgICAgICAgICAgcGFydGl0aW9uX3NpemU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wYXJ0aXRpb25fc2l6ZSxcbiAgICAgICAgICAgICAgICBwYXJ0aXRpb25fdHRsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGFydGl0aW9uX3R0bCxcbiAgICAgICAgICAgICAgICBwb2xsczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBvbGxzLFxuICAgICAgICAgICAgICAgIHB1c2hfbm90aWZpY2F0aW9uczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnB1c2hfbm90aWZpY2F0aW9ucyxcbiAgICAgICAgICAgICAgICByZWFjdGlvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZWFjdGlvbnMsXG4gICAgICAgICAgICAgICAgcmVhZF9ldmVudHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZWFkX2V2ZW50cyxcbiAgICAgICAgICAgICAgICByZXBsaWVzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVwbGllcyxcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zZWFyY2gsXG4gICAgICAgICAgICAgICAgdHlwaW5nX2V2ZW50czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGluZ19ldmVudHMsXG4gICAgICAgICAgICAgICAgdXBsb2FkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVwbG9hZHMsXG4gICAgICAgICAgICAgICAgdXJsX2VucmljaG1lbnQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51cmxfZW5yaWNobWVudCxcbiAgICAgICAgICAgICAgICBibG9ja2xpc3RzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmxvY2tsaXN0cyxcbiAgICAgICAgICAgICAgICBjb21tYW5kczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNvbW1hbmRzLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGVybWlzc2lvbnMsXG4gICAgICAgICAgICAgICAgZ3JhbnRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZ3JhbnRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvY2hhbm5lbHR5cGVzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF95ID0gZGVjb2RlcnMuQ3JlYXRlQ2hhbm5lbFR5cGVSZXNwb25zZSkgPT09IG51bGwgfHwgX3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF95LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVDaGFubmVsVHlwZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3o7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnREVMRVRFJywgJy9hcGkvdjIvY2hhdC9jaGFubmVsdHlwZXMve25hbWV9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfeiA9IGRlY29kZXJzLlJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfeiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ouY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldENoYW5uZWxUeXBlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9jaGF0L2NoYW5uZWx0eXBlcy97bmFtZX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF8wID0gZGVjb2RlcnMuR2V0Q2hhbm5lbFR5cGVSZXNwb25zZSkgPT09IG51bGwgfHwgXzAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8wLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGFubmVsVHlwZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzE7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgYXV0b21vZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmF1dG9tb2QsXG4gICAgICAgICAgICAgICAgYXV0b21vZF9iZWhhdmlvcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmF1dG9tb2RfYmVoYXZpb3IsXG4gICAgICAgICAgICAgICAgbWF4X21lc3NhZ2VfbGVuZ3RoOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWF4X21lc3NhZ2VfbGVuZ3RoLFxuICAgICAgICAgICAgICAgIGJsb2NrbGlzdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmJsb2NrbGlzdCxcbiAgICAgICAgICAgICAgICBibG9ja2xpc3RfYmVoYXZpb3I6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5ibG9ja2xpc3RfYmVoYXZpb3IsXG4gICAgICAgICAgICAgICAgY29ubmVjdF9ldmVudHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jb25uZWN0X2V2ZW50cyxcbiAgICAgICAgICAgICAgICBjdXN0b21fZXZlbnRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY3VzdG9tX2V2ZW50cyxcbiAgICAgICAgICAgICAgICBtYXJrX21lc3NhZ2VzX3BlbmRpbmc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tYXJrX21lc3NhZ2VzX3BlbmRpbmcsXG4gICAgICAgICAgICAgICAgbXV0ZXM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tdXRlcyxcbiAgICAgICAgICAgICAgICBwYXJ0aXRpb25fc2l6ZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBhcnRpdGlvbl9zaXplLFxuICAgICAgICAgICAgICAgIHBhcnRpdGlvbl90dGw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wYXJ0aXRpb25fdHRsLFxuICAgICAgICAgICAgICAgIHBvbGxzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucG9sbHMsXG4gICAgICAgICAgICAgICAgcHVzaF9ub3RpZmljYXRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucHVzaF9ub3RpZmljYXRpb25zLFxuICAgICAgICAgICAgICAgIHF1b3RlczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnF1b3RlcyxcbiAgICAgICAgICAgICAgICByZWFjdGlvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZWFjdGlvbnMsXG4gICAgICAgICAgICAgICAgcmVhZF9ldmVudHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZWFkX2V2ZW50cyxcbiAgICAgICAgICAgICAgICByZW1pbmRlcnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZW1pbmRlcnMsXG4gICAgICAgICAgICAgICAgcmVwbGllczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJlcGxpZXMsXG4gICAgICAgICAgICAgICAgc2VhcmNoOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2VhcmNoLFxuICAgICAgICAgICAgICAgIHR5cGluZ19ldmVudHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50eXBpbmdfZXZlbnRzLFxuICAgICAgICAgICAgICAgIHVwbG9hZHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51cGxvYWRzLFxuICAgICAgICAgICAgICAgIHVybF9lbnJpY2htZW50OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXJsX2VucmljaG1lbnQsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF9mbGFnX3JlYXNvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hbGxvd2VkX2ZsYWdfcmVhc29ucyxcbiAgICAgICAgICAgICAgICBibG9ja2xpc3RzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmxvY2tsaXN0cyxcbiAgICAgICAgICAgICAgICBjb21tYW5kczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNvbW1hbmRzLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGVybWlzc2lvbnMsXG4gICAgICAgICAgICAgICAgYXV0b21vZF90aHJlc2hvbGRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXV0b21vZF90aHJlc2hvbGRzLFxuICAgICAgICAgICAgICAgIGdyYW50czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmdyYW50cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BVVCcsICcvYXBpL3YyL2NoYXQvY2hhbm5lbHR5cGVzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzEgPSBkZWNvZGVycy5VcGRhdGVDaGFubmVsVHlwZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzEuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxpc3RDb21tYW5kcyA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9jb21tYW5kcycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfMiA9IGRlY29kZXJzLkxpc3RDb21tYW5kc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzIuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbW1hbmQgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgICAgIGFyZ3M6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hcmdzLFxuICAgICAgICAgICAgICAgIHNldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNldCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2NvbW1hbmRzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8zID0gZGVjb2RlcnMuQ3JlYXRlQ29tbWFuZFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzMuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZUNvbW1hbmQgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF80O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL2NoYXQvY29tbWFuZHMve25hbWV9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfNCA9IGRlY29kZXJzLkRlbGV0ZUNvbW1hbmRSZXNwb25zZSkgPT09IG51bGwgfHwgXzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF80LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRDb21tYW5kID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfNTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9jaGF0L2NvbW1hbmRzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzUgPSBkZWNvZGVycy5HZXRDb21tYW5kUmVzcG9uc2UpID09PSBudWxsIHx8IF81ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29tbWFuZCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzY7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBhcmdzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXJncyxcbiAgICAgICAgICAgICAgICBzZXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zZXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQVVQnLCAnL2FwaS92Mi9jaGF0L2NvbW1hbmRzL3tuYW1lfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzYgPSBkZWNvZGVycy5VcGRhdGVDb21tYW5kUmVzcG9uc2UpID09PSBudWxsIHx8IF82ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhwb3J0Q2hhbm5lbHMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF83O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjaGFubmVsczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIGNsZWFyX2RlbGV0ZWRfbWVzc2FnZV90ZXh0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY2xlYXJfZGVsZXRlZF9tZXNzYWdlX3RleHQsXG4gICAgICAgICAgICAgICAgZXhwb3J0X3VzZXJzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZXhwb3J0X3VzZXJzLFxuICAgICAgICAgICAgICAgIGluY2x1ZGVfc29mdF9kZWxldGVkX2NoYW5uZWxzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaW5jbHVkZV9zb2Z0X2RlbGV0ZWRfY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgaW5jbHVkZV90cnVuY2F0ZWRfbWVzc2FnZXM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pbmNsdWRlX3RydW5jYXRlZF9tZXNzYWdlcyxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudmVyc2lvbixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L2V4cG9ydF9jaGFubmVscycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfNyA9IGRlY29kZXJzLkV4cG9ydENoYW5uZWxzUmVzcG9uc2UpID09PSBudWxsIHx8IF83ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0RXhwb3J0Q2hhbm5lbHNTdGF0dXMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF84O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9leHBvcnRfY2hhbm5lbHMve2lkfScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoXzggPSBkZWNvZGVycy5HZXRFeHBvcnRDaGFubmVsc1N0YXR1c1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzguY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5TWVtYmVycyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzk7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGF5bG9hZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL2NoYXQvbWVtYmVycycsIHVuZGVmaW5lZCwgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF85ID0gZGVjb2RlcnMuTWVtYmVyc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzkuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5TWVzc2FnZUhpc3RvcnkgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xMDtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyLFxuICAgICAgICAgICAgICAgIGxpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubGltaXQsXG4gICAgICAgICAgICAgICAgbmV4dDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5leHQsXG4gICAgICAgICAgICAgICAgcHJldjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnByZXYsXG4gICAgICAgICAgICAgICAgc29ydDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNvcnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9tZXNzYWdlcy9oaXN0b3J5JywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8xMCA9IGRlY29kZXJzLlF1ZXJ5TWVzc2FnZUhpc3RvcnlSZXNwb25zZSkgPT09IG51bGwgfHwgXzEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTAuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZU1lc3NhZ2UgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xMTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGhhcmQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5oYXJkLFxuICAgICAgICAgICAgICAgIGRlbGV0ZWRfYnk6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kZWxldGVkX2J5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve2lkfScsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfMTEgPSBkZWNvZGVycy5EZWxldGVNZXNzYWdlUmVzcG9uc2UpID09PSBudWxsIHx8IF8xMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzExLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRNZXNzYWdlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTI7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBzaG93X2RlbGV0ZWRfbWVzc2FnZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNob3dfZGVsZXRlZF9tZXNzYWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve2lkfScsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfMTIgPSBkZWNvZGVycy5HZXRNZXNzYWdlUmVzcG9uc2UpID09PSBudWxsIHx8IF8xMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzEyLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTM7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBza2lwX2VucmljaF91cmw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5za2lwX2VucmljaF91cmwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9tZXNzYWdlcy97aWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMTMgPSBkZWNvZGVycy5VcGRhdGVNZXNzYWdlUmVzcG9uc2UpID09PSBudWxsIHx8IF8xMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzEzLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlUGFydGlhbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzE0O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgc2tpcF9lbnJpY2hfdXJsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2tpcF9lbnJpY2hfdXJsLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVuc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudW5zZXQsXG4gICAgICAgICAgICAgICAgc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2V0LFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUFVUJywgJy9hcGkvdjIvY2hhdC9tZXNzYWdlcy97aWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMTQgPSBkZWNvZGVycy5VcGRhdGVNZXNzYWdlUGFydGlhbFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xNC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucnVuTWVzc2FnZUFjdGlvbiA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzE1O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZm9ybV9kYXRhOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZm9ybV9kYXRhLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve2lkfS9hY3Rpb24nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8xNSA9IGRlY29kZXJzLk1lc3NhZ2VSZXNwb25zZSkgPT09IG51bGwgfHwgXzE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTUuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbW1pdE1lc3NhZ2UgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xNjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge307XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L21lc3NhZ2VzL3tpZH0vY29tbWl0JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMTYgPSBkZWNvZGVycy5NZXNzYWdlUmVzcG9uc2UpID09PSBudWxsIHx8IF8xNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzE2LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kUmVhY3Rpb24gPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8xNztcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHJlYWN0aW9uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVhY3Rpb24sXG4gICAgICAgICAgICAgICAgZW5mb3JjZV91bmlxdWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5lbmZvcmNlX3VuaXF1ZSxcbiAgICAgICAgICAgICAgICBza2lwX3B1c2g6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5za2lwX3B1c2gsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9tZXNzYWdlcy97aWR9L3JlYWN0aW9uJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMTcgPSBkZWNvZGVycy5TZW5kUmVhY3Rpb25SZXNwb25zZSkgPT09IG51bGwgfHwgXzE3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMTcuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZVJlYWN0aW9uID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTg7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnR5cGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2FwaS92Mi9jaGF0L21lc3NhZ2VzL3tpZH0vcmVhY3Rpb24ve3R5cGV9JywgcGF0aFBhcmFtcywgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF8xOCA9IGRlY29kZXJzLlJlYWN0aW9uUmVtb3ZhbFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMTggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xOC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0UmVhY3Rpb25zID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMTk7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBsaW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmxpbWl0LFxuICAgICAgICAgICAgICAgIG9mZnNldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm9mZnNldCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9jaGF0L21lc3NhZ2VzL3tpZH0vcmVhY3Rpb25zJywgcGF0aFBhcmFtcywgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF8xOSA9IGRlY29kZXJzLkdldFJlYWN0aW9uc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMTkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8xOS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVlcnlSZWFjdGlvbnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8yMDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGxpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubGltaXQsXG4gICAgICAgICAgICAgICAgbmV4dDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5leHQsXG4gICAgICAgICAgICAgICAgcHJldjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnByZXYsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgc29ydDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNvcnQsXG4gICAgICAgICAgICAgICAgZmlsdGVyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve2lkfS9yZWFjdGlvbnMnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yMCA9IGRlY29kZXJzLlF1ZXJ5UmVhY3Rpb25zUmVzcG9uc2UpID09PSBudWxsIHx8IF8yMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzIwLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVNZXNzYWdlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjE7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBsYW5ndWFnZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lmxhbmd1YWdlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve2lkfS90cmFuc2xhdGUnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yMSA9IGRlY29kZXJzLk1lc3NhZ2VSZXNwb25zZSkgPT09IG51bGwgfHwgXzIxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMjEuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVuZGVsZXRlTWVzc2FnZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzIyO1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBpZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgc2tpcF9lbnJpY2hfdXJsOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2tpcF9lbnJpY2hfdXJsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve2lkfS91bmRlbGV0ZScsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzIyID0gZGVjb2RlcnMuVXBkYXRlTWVzc2FnZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8yMi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FzdFBvbGxWb3RlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjM7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIHBvbGxfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wb2xsX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICAgICAgdm90ZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnZvdGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC9tZXNzYWdlcy97bWVzc2FnZV9pZH0vcG9sbHMve3BvbGxfaWR9L3ZvdGUnLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yMyA9IGRlY29kZXJzLlBvbGxWb3RlUmVzcG9uc2UpID09PSBudWxsIHx8IF8yMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzIzLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZW1vdmVQb2xsVm90ZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzI0O1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZV9pZCxcbiAgICAgICAgICAgICAgICBwb2xsX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucG9sbF9pZCxcbiAgICAgICAgICAgICAgICB2b3RlX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qudm90ZV9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL2NoYXQvbWVzc2FnZXMve21lc3NhZ2VfaWR9L3BvbGxzL3twb2xsX2lkfS92b3RlL3t2b3RlX2lkfScsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfMjQgPSBkZWNvZGVycy5Qb2xsVm90ZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8yNC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0UmVwbGllcyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzI1O1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5saW1pdCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5vZmZzZXQsXG4gICAgICAgICAgICAgICAgaWRfZ3RlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWRfZ3RlLFxuICAgICAgICAgICAgICAgIGlkX2d0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWRfZ3QsXG4gICAgICAgICAgICAgICAgaWRfbHRlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWRfbHRlLFxuICAgICAgICAgICAgICAgIGlkX2x0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWRfbHQsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdF9hZnRlcl9vcl9lcXVhbDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNyZWF0ZWRfYXRfYWZ0ZXJfb3JfZXF1YWwsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdF9hZnRlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNyZWF0ZWRfYXRfYWZ0ZXIsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdF9iZWZvcmVfb3JfZXF1YWw6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jcmVhdGVkX2F0X2JlZm9yZV9vcl9lcXVhbCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0X2JlZm9yZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNyZWF0ZWRfYXRfYmVmb3JlLFxuICAgICAgICAgICAgICAgIGlkX2Fyb3VuZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlkX2Fyb3VuZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0X2Fyb3VuZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNyZWF0ZWRfYXRfYXJvdW5kLFxuICAgICAgICAgICAgICAgIHNvcnQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zb3J0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgcGFyZW50X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGFyZW50X2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9tZXNzYWdlcy97cGFyZW50X2lkfS9yZXBsaWVzJywgcGF0aFBhcmFtcywgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF8yNSA9IGRlY29kZXJzLkdldFJlcGxpZXNSZXNwb25zZSkgPT09IG51bGwgfHwgXzI1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMjUuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5TWVzc2FnZUZsYWdzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjY7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGF5bG9hZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL2NoYXQvbW9kZXJhdGlvbi9mbGFncy9tZXNzYWdlJywgdW5kZWZpbmVkLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzI2ID0gZGVjb2RlcnMuUXVlcnlNZXNzYWdlRmxhZ3NSZXNwb25zZSkgPT09IG51bGwgfHwgXzI2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMjYuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm11dGVDaGFubmVsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjc7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGV4cGlyYXRpb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5leHBpcmF0aW9uLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfY2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNoYW5uZWxfY2lkcyxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L21vZGVyYXRpb24vbXV0ZS9jaGFubmVsJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yNyA9IGRlY29kZXJzLk11dGVDaGFubmVsUmVzcG9uc2UpID09PSBudWxsIHx8IF8yNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzI3LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51bm11dGVDaGFubmVsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjg7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGV4cGlyYXRpb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5leHBpcmF0aW9uLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfY2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNoYW5uZWxfY2lkcyxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L21vZGVyYXRpb24vdW5tdXRlL2NoYW5uZWwnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzI4ID0gZGVjb2RlcnMuVW5tdXRlUmVzcG9uc2UpID09PSBudWxsIHx8IF8yOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzI4LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVQb2xsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMjk7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgICAgIGFsbG93X2Fuc3dlcnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hbGxvd19hbnN3ZXJzLFxuICAgICAgICAgICAgICAgIGFsbG93X3VzZXJfc3VnZ2VzdGVkX29wdGlvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hbGxvd191c2VyX3N1Z2dlc3RlZF9vcHRpb25zLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgZW5mb3JjZV91bmlxdWVfdm90ZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVuZm9yY2VfdW5pcXVlX3ZvdGUsXG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICBpc19jbG9zZWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pc19jbG9zZWQsXG4gICAgICAgICAgICAgICAgbWF4X3ZvdGVzX2FsbG93ZWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5tYXhfdm90ZXNfYWxsb3dlZCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB2b3RpbmdfdmlzaWJpbGl0eTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnZvdGluZ192aXNpYmlsaXR5LFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGN1c3RvbTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmN1c3RvbSxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L3BvbGxzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8yOSA9IGRlY29kZXJzLlBvbGxSZXNwb25zZSkgPT09IG51bGwgfHwgXzI5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMjkuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZVBvbGwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zMDtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmFtZSxcbiAgICAgICAgICAgICAgICBhbGxvd19hbnN3ZXJzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYWxsb3dfYW5zd2VycyxcbiAgICAgICAgICAgICAgICBhbGxvd191c2VyX3N1Z2dlc3RlZF9vcHRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYWxsb3dfdXNlcl9zdWdnZXN0ZWRfb3B0aW9ucyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGVuZm9yY2VfdW5pcXVlX3ZvdGU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5lbmZvcmNlX3VuaXF1ZV92b3RlLFxuICAgICAgICAgICAgICAgIGlzX2Nsb3NlZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmlzX2Nsb3NlZCxcbiAgICAgICAgICAgICAgICBtYXhfdm90ZXNfYWxsb3dlZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1heF92b3Rlc19hbGxvd2VkLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHZvdGluZ192aXNpYmlsaXR5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qudm90aW5nX3Zpc2liaWxpdHksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgY3VzdG9tOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY3VzdG9tLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUFVUJywgJy9hcGkvdjIvY2hhdC9wb2xscycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMzAgPSBkZWNvZGVycy5Qb2xsUmVzcG9uc2UpID09PSBudWxsIHx8IF8zMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzMwLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeVBvbGxzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMzE7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGxpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubGltaXQsXG4gICAgICAgICAgICAgICAgbmV4dDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5leHQsXG4gICAgICAgICAgICAgICAgcHJldjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnByZXYsXG4gICAgICAgICAgICAgICAgc29ydDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNvcnQsXG4gICAgICAgICAgICAgICAgZmlsdGVyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvcG9sbHMvcXVlcnknLCB1bmRlZmluZWQsIHF1ZXJ5UGFyYW1zLCBib2R5KTtcbiAgICAgICAgICAgIChfMzEgPSBkZWNvZGVycy5RdWVyeVBvbGxzUmVzcG9uc2UpID09PSBudWxsIHx8IF8zMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzMxLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVQb2xsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMzI7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBvbGxfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wb2xsX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnREVMRVRFJywgJy9hcGkvdjIvY2hhdC9wb2xscy97cG9sbF9pZH0nLCBwYXRoUGFyYW1zLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzMyID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF8zMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzMyLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRQb2xsID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMzM7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBvbGxfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wb2xsX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9wb2xscy97cG9sbF9pZH0nLCBwYXRoUGFyYW1zLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzMzID0gZGVjb2RlcnMuUG9sbFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8zMy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlUG9sbFBhcnRpYWwgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zNDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgcG9sbF9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBvbGxfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1bnNldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVuc2V0LFxuICAgICAgICAgICAgICAgIHNldDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNldCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BBVENIJywgJy9hcGkvdjIvY2hhdC9wb2xscy97cG9sbF9pZH0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF8zNCA9IGRlY29kZXJzLlBvbGxSZXNwb25zZSkgPT09IG51bGwgfHwgXzM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMzQuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZVBvbGxPcHRpb24gPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zNTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgcG9sbF9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBvbGxfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB0ZXh0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGV4dCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIGN1c3RvbTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmN1c3RvbSxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L3BvbGxzL3twb2xsX2lkfS9vcHRpb25zJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMzUgPSBkZWNvZGVycy5Qb2xsT3B0aW9uUmVzcG9uc2UpID09PSBudWxsIHx8IF8zNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzM1LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVQb2xsT3B0aW9uID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMzY7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBvbGxfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wb2xsX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pZCxcbiAgICAgICAgICAgICAgICB0ZXh0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGV4dCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICBjdXN0b206IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jdXN0b20sXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQVVQnLCAnL2FwaS92Mi9jaGF0L3BvbGxzL3twb2xsX2lkfS9vcHRpb25zJywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfMzYgPSBkZWNvZGVycy5Qb2xsT3B0aW9uUmVzcG9uc2UpID09PSBudWxsIHx8IF8zNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzM2LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVQb2xsT3B0aW9uID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMzc7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBvbGxfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wb2xsX2lkLFxuICAgICAgICAgICAgICAgIG9wdGlvbl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm9wdGlvbl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsICcvYXBpL3YyL2NoYXQvcG9sbHMve3BvbGxfaWR9L29wdGlvbnMve29wdGlvbl9pZH0nLCBwYXRoUGFyYW1zLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzM3ID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF8zNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzM3LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRQb2xsT3B0aW9uID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfMzg7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBvbGxfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wb2xsX2lkLFxuICAgICAgICAgICAgICAgIG9wdGlvbl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm9wdGlvbl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsICcvYXBpL3YyL2NoYXQvcG9sbHMve3BvbGxfaWR9L29wdGlvbnMve29wdGlvbl9pZH0nLCBwYXRoUGFyYW1zLCBxdWVyeVBhcmFtcyk7XG4gICAgICAgICAgICAoXzM4ID0gZGVjb2RlcnMuUG9sbE9wdGlvblJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfMzggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF8zOC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVlcnlQb2xsVm90ZXMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF8zOTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgcG9sbF9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBvbGxfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBsaW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmxpbWl0LFxuICAgICAgICAgICAgICAgIG5leHQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uZXh0LFxuICAgICAgICAgICAgICAgIHByZXY6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wcmV2LFxuICAgICAgICAgICAgICAgIHNvcnQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zb3J0LFxuICAgICAgICAgICAgICAgIGZpbHRlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmZpbHRlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L3BvbGxzL3twb2xsX2lkfS92b3RlcycsIHBhdGhQYXJhbXMsIHF1ZXJ5UGFyYW1zLCBib2R5KTtcbiAgICAgICAgICAgIChfMzkgPSBkZWNvZGVycy5Qb2xsVm90ZXNSZXNwb25zZSkgPT09IG51bGwgfHwgXzM5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfMzkuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5QmFubmVkVXNlcnMgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF80MDtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wYXlsb2FkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9xdWVyeV9iYW5uZWRfdXNlcnMnLCB1bmRlZmluZWQsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfNDAgPSBkZWNvZGVycy5RdWVyeUJhbm5lZFVzZXJzUmVzcG9uc2UpID09PSBudWxsIHx8IF80MCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzQwLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF80MTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wYXlsb2FkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvY2hhdC9zZWFyY2gnLCB1bmRlZmluZWQsIHF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgICAgIChfNDEgPSBkZWNvZGVycy5TZWFyY2hSZXNwb25zZSkgPT09IG51bGwgfHwgXzQxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfNDEuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnF1ZXJ5VGhyZWFkcyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzQyO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBsaW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmxpbWl0LFxuICAgICAgICAgICAgICAgIG1lbWJlcl9saW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lbWJlcl9saW1pdCxcbiAgICAgICAgICAgICAgICBuZXh0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmV4dCxcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudF9saW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnBhcnRpY2lwYW50X2xpbWl0LFxuICAgICAgICAgICAgICAgIHByZXY6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5wcmV2LFxuICAgICAgICAgICAgICAgIHJlcGx5X2xpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVwbHlfbGltaXQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvY2hhdC90aHJlYWRzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF80MiA9IGRlY29kZXJzLlF1ZXJ5VGhyZWFkc1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfNDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF80Mi5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0VGhyZWFkID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfNDM7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY29ubmVjdGlvbl9pZCxcbiAgICAgICAgICAgICAgICByZXBseV9saW1pdDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJlcGx5X2xpbWl0LFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50X2xpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGFydGljaXBhbnRfbGltaXQsXG4gICAgICAgICAgICAgICAgbWVtYmVyX2xpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVtYmVyX2xpbWl0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZV9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9jaGF0L3RocmVhZHMve21lc3NhZ2VfaWR9JywgcGF0aFBhcmFtcywgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF80MyA9IGRlY29kZXJzLkdldFRocmVhZFJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfNDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF80My5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGhyZWFkUGFydGlhbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzQ0O1xuICAgICAgICAgICAgY29uc3QgcGF0aFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubWVzc2FnZV9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVuc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudW5zZXQsXG4gICAgICAgICAgICAgICAgc2V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc2V0LFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUEFUQ0gnLCAnL2FwaS92Mi9jaGF0L3RocmVhZHMve21lc3NhZ2VfaWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfNDQgPSBkZWNvZGVycy5VcGRhdGVUaHJlYWRQYXJ0aWFsUmVzcG9uc2UpID09PSBudWxsIHx8IF80NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzQ0LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51bnJlYWRDb3VudHMgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzQ1O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9jaGF0L3VucmVhZCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfNDUgPSBkZWNvZGVycy5XcmFwcGVkVW5yZWFkQ291bnRzUmVzcG9uc2UpID09PSBudWxsIHx8IF80NSA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzQ1LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51bnJlYWRDb3VudHNCYXRjaCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgXzQ2O1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkczogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL2NoYXQvdW5yZWFkX2JhdGNoJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF80NiA9IGRlY29kZXJzLlVucmVhZENvdW50c0JhdGNoUmVzcG9uc2UpID09PSBudWxsIHx8IF80NiA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzQ2LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kVXNlckN1c3RvbUV2ZW50ID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfNDc7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5ldmVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9jaGF0L3VzZXJzL3t1c2VyX2lkfS9ldmVudCcsIHBhdGhQYXJhbXMsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoXzQ3ID0gZGVjb2RlcnMuUmVzcG9uc2UpID09PSBudWxsIHx8IF80NyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXzQ3LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNsYXNzIENoYW5uZWxBcGkge1xuICAgIGNvbnN0cnVjdG9yKGNoYXRBcGksIHR5cGUsIGlkKSB7XG4gICAgICAgIHRoaXMuY2hhdEFwaSA9IGNoYXRBcGk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5kZWxldGUgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGFubmVsIGlzbid0IHlldCBjcmVhdGVkLCBjYWxsIGdldE9yQ3JlYXRlRGlzdGluY3RDaGFubmVsKCkgYmVmb3JlIHRoaXMgb3BlcmF0aW9uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGF0QXBpLmRlbGV0ZUNoYW5uZWwoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZUNoYW5uZWxQYXJ0aWFsID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCBpc24ndCB5ZXQgY3JlYXRlZCwgY2FsbCBnZXRPckNyZWF0ZURpc3RpbmN0Q2hhbm5lbCgpIGJlZm9yZSB0aGlzIG9wZXJhdGlvbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdEFwaS51cGRhdGVDaGFubmVsUGFydGlhbChPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCBpc24ndCB5ZXQgY3JlYXRlZCwgY2FsbCBnZXRPckNyZWF0ZURpc3RpbmN0Q2hhbm5lbCgpIGJlZm9yZSB0aGlzIG9wZXJhdGlvbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdEFwaS51cGRhdGVDaGFubmVsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGFubmVsIGlzbid0IHlldCBjcmVhdGVkLCBjYWxsIGdldE9yQ3JlYXRlRGlzdGluY3RDaGFubmVsKCkgYmVmb3JlIHRoaXMgb3BlcmF0aW9uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGF0QXBpLnNlbmRFdmVudChPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVsZXRlRmlsZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkuZGVsZXRlRmlsZShPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkudXBsb2FkRmlsZShPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlkZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkuaGlkZUNoYW5uZWwoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZUltYWdlID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCBpc24ndCB5ZXQgY3JlYXRlZCwgY2FsbCBnZXRPckNyZWF0ZURpc3RpbmN0Q2hhbm5lbCgpIGJlZm9yZSB0aGlzIG9wZXJhdGlvbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdEFwaS5kZWxldGVJbWFnZShPYmplY3QuYXNzaWduKHsgaWQ6IHRoaXMuaWQsIHR5cGU6IHRoaXMudHlwZSB9LCByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBsb2FkSW1hZ2UgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGFubmVsIGlzbid0IHlldCBjcmVhdGVkLCBjYWxsIGdldE9yQ3JlYXRlRGlzdGluY3RDaGFubmVsKCkgYmVmb3JlIHRoaXMgb3BlcmF0aW9uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGF0QXBpLnVwbG9hZEltYWdlKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVNZW1iZXJQYXJ0aWFsID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCBpc24ndCB5ZXQgY3JlYXRlZCwgY2FsbCBnZXRPckNyZWF0ZURpc3RpbmN0Q2hhbm5lbCgpIGJlZm9yZSB0aGlzIG9wZXJhdGlvbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdEFwaS51cGRhdGVNZW1iZXJQYXJ0aWFsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkuc2VuZE1lc3NhZ2UoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE1hbnlNZXNzYWdlcyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkuZ2V0TWFueU1lc3NhZ2VzKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRPckNyZWF0ZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkuZ2V0T3JDcmVhdGVDaGFubmVsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYXJrUmVhZCA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkubWFya1JlYWQoT2JqZWN0LmFzc2lnbih7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfSwgcmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNob3cgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaGFubmVsIGlzbid0IHlldCBjcmVhdGVkLCBjYWxsIGdldE9yQ3JlYXRlRGlzdGluY3RDaGFubmVsKCkgYmVmb3JlIHRoaXMgb3BlcmF0aW9uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGF0QXBpLnNob3dDaGFubmVsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cnVuY2F0ZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYW5uZWwgaXNuJ3QgeWV0IGNyZWF0ZWQsIGNhbGwgZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoKSBiZWZvcmUgdGhpcyBvcGVyYXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkudHJ1bmNhdGVDaGFubmVsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYXJrVW5yZWFkID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhbm5lbCBpc24ndCB5ZXQgY3JlYXRlZCwgY2FsbCBnZXRPckNyZWF0ZURpc3RpbmN0Q2hhbm5lbCgpIGJlZm9yZSB0aGlzIG9wZXJhdGlvbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdEFwaS5tYXJrVW5yZWFkKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIHJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIFN0cmVhbUNoYW5uZWwgZXh0ZW5kcyBDaGFubmVsQXBpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5nZXRPckNyZWF0ZSA9IChjaGFubmVsX2dldF9vcl9jcmVhdGVfcmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhdEFwaVxuICAgICAgICAgICAgICAgICAgICAuZ2V0T3JDcmVhdGVEaXN0aW5jdENoYW5uZWwoT2JqZWN0LmFzc2lnbih7IHR5cGU6IHRoaXMudHlwZSB9LCBjaGFubmVsX2dldF9vcl9jcmVhdGVfcmVxdWVzdCkpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWQgPSAoX2EgPSByZXNwb25zZS5jaGFubmVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkuZ2V0T3JDcmVhdGVDaGFubmVsKE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sIGNoYW5uZWxfZ2V0X29yX2NyZWF0ZV9yZXF1ZXN0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjaWQoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnR5cGV9OiR7dGhpcy5pZH1gO1xuICAgIH1cbiAgICBxdWVyeU1lbWJlcnMocmVxdWVzdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXRBcGkucXVlcnlNZW1iZXJzKHtcbiAgICAgICAgICAgIHBheWxvYWQ6IE9iamVjdC5hc3NpZ24oeyBpZDogdGhpcy5pZCwgdHlwZTogdGhpcy50eXBlIH0sICgoX2EgPSByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucGF5bG9hZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogeyBmaWx0ZXJfY29uZGl0aW9uczoge30gfSkpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNsYXNzIFN0cmVhbUNoYXRDbGllbnQgZXh0ZW5kcyBDaGF0QXBpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jaGFubmVsID0gKHR5cGUsIGlkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmVhbUNoYW5uZWwodGhpcywgdHlwZSwgaWQpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgTW9kZXJhdGlvbkFwaSBleHRlbmRzIEJhc2VBcGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmJhbiA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHRhcmdldF91c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGFyZ2V0X3VzZXJfaWQsXG4gICAgICAgICAgICAgICAgYmFubmVkX2J5X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmFubmVkX2J5X2lkLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfY2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY2hhbm5lbF9jaWQsXG4gICAgICAgICAgICAgICAgaXBfYmFuOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaXBfYmFuLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJlYXNvbixcbiAgICAgICAgICAgICAgICBzaGFkb3c6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5zaGFkb3csXG4gICAgICAgICAgICAgICAgdGltZW91dDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgYmFubmVkX2J5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmFubmVkX2J5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vYmFuJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9hID0gZGVjb2RlcnMuQmFuUmVzcG9uc2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2hlY2sgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9iO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb25maWdfa2V5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY29uZmlnX2tleSxcbiAgICAgICAgICAgICAgICBlbnRpdHlfY3JlYXRvcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVudGl0eV9jcmVhdG9yX2lkLFxuICAgICAgICAgICAgICAgIGVudGl0eV9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVudGl0eV9pZCxcbiAgICAgICAgICAgICAgICBlbnRpdHlfdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVudGl0eV90eXBlLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIG1vZGVyYXRpb25fcGF5bG9hZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1vZGVyYXRpb25fcGF5bG9hZCxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qub3B0aW9ucyxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL2NoZWNrJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9iID0gZGVjb2RlcnMuQ2hlY2tSZXNwb25zZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cHNlcnRDb25maWcgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9jO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5rZXksXG4gICAgICAgICAgICAgICAgYXN5bmM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5hc3luYyxcbiAgICAgICAgICAgICAgICBhdXRvbW9kX3BsYXRmb3JtX2NpcmN1bXZlbnRpb25fY29uZmlnOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXV0b21vZF9wbGF0Zm9ybV9jaXJjdW12ZW50aW9uX2NvbmZpZyxcbiAgICAgICAgICAgICAgICBhdXRvbW9kX3NlbWFudGljX2ZpbHRlcnNfY29uZmlnOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYXV0b21vZF9zZW1hbnRpY19maWx0ZXJzX2NvbmZpZyxcbiAgICAgICAgICAgICAgICBhdXRvbW9kX3RveGljaXR5X2NvbmZpZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmF1dG9tb2RfdG94aWNpdHlfY29uZmlnLFxuICAgICAgICAgICAgICAgIGF3c19yZWtfb2dfbml0aW9uX2NvbmZpZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmF3c19yZWtfb2dfbml0aW9uX2NvbmZpZyxcbiAgICAgICAgICAgICAgICBibG9ja19saXN0X2NvbmZpZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmJsb2NrX2xpc3RfY29uZmlnLFxuICAgICAgICAgICAgICAgIGJvZHlndWFyZF9jb25maWc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5ib2R5Z3VhcmRfY29uZmlnLFxuICAgICAgICAgICAgICAgIGdvX29nX2xlX3Zpc2lvbl9jb25maWc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5nb19vZ19sZV92aXNpb25fY29uZmlnLFxuICAgICAgICAgICAgICAgIHZlbG9jaXR5X2ZpbHRlcl9jb25maWc6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC52ZWxvY2l0eV9maWx0ZXJfY29uZmlnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vY29uZmlnJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9jID0gZGVjb2RlcnMuVXBzZXJ0Q29uZmlnUmVzcG9uc2UpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0Q29uZmlnID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZDtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAga2V5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Qua2V5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvbW9kZXJhdGlvbi9jb25maWcve2tleX0nLCBwYXRoUGFyYW1zLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgKF9kID0gZGVjb2RlcnMuR2V0Q29uZmlnUmVzcG9uc2UpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY3VzdG9tQ2hlY2sgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9lO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICBlbnRpdHlfY3JlYXRvcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVudGl0eV9jcmVhdG9yX2lkLFxuICAgICAgICAgICAgICAgIGVudGl0eV9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVudGl0eV9pZCxcbiAgICAgICAgICAgICAgICBlbnRpdHlfdHlwZTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmVudGl0eV90eXBlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnJlYXNvbixcbiAgICAgICAgICAgICAgICByZWNvbW1lbmRlZF9hY3Rpb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5yZWNvbW1lbmRlZF9hY3Rpb24sXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgbW9kZXJhdGlvbl9wYXlsb2FkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubW9kZXJhdGlvbl9wYXlsb2FkLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vY3VzdG9tX2NoZWNrJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9lID0gZGVjb2RlcnMuQ3VzdG9tQ2hlY2tSZXNwb25zZSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52MkRlbGV0ZVRlbXBsYXRlID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9mO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL2ZlZWRzX21vZGVyYXRpb25fdGVtcGxhdGUnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX2YgPSBkZWNvZGVycy5EZWxldGVNb2RlcmF0aW9uVGVtcGxhdGVSZXNwb25zZSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52MlF1ZXJ5VGVtcGxhdGVzID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9nO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL2ZlZWRzX21vZGVyYXRpb25fdGVtcGxhdGUnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX2cgPSBkZWNvZGVycy5RdWVyeUZlZWRNb2RlcmF0aW9uVGVtcGxhdGVzUmVzcG9uc2UpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudjJVcHNlcnRUZW1wbGF0ZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2g7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5uYW1lLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNvbmZpZyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL2ZlZWRzX21vZGVyYXRpb25fdGVtcGxhdGUnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2ggPSBkZWNvZGVycy5VcHNlcnRNb2RlcmF0aW9uVGVtcGxhdGVSZXNwb25zZSkgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mbGFnID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfajtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgZW50aXR5X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZW50aXR5X2lkLFxuICAgICAgICAgICAgICAgIGVudGl0eV90eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZW50aXR5X3R5cGUsXG4gICAgICAgICAgICAgICAgcmVhc29uOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucmVhc29uLFxuICAgICAgICAgICAgICAgIGVudGl0eV9jcmVhdG9yX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZW50aXR5X2NyZWF0b3JfaWQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgY3VzdG9tOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY3VzdG9tLFxuICAgICAgICAgICAgICAgIG1vZGVyYXRpb25fcGF5bG9hZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm1vZGVyYXRpb25fcGF5bG9hZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL2ZsYWcnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX2ogPSBkZWNvZGVycy5GbGFnUmVzcG9uc2UpID09PSBudWxsIHx8IF9qID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfai5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVlcnlNb2RlcmF0aW9uTG9ncyA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2s7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGxpbWl0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubGltaXQsXG4gICAgICAgICAgICAgICAgbmV4dDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5leHQsXG4gICAgICAgICAgICAgICAgcHJldjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnByZXYsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgc29ydDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNvcnQsXG4gICAgICAgICAgICAgICAgZmlsdGVyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vbG9ncycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfayA9IGRlY29kZXJzLlF1ZXJ5TW9kZXJhdGlvbkxvZ3NSZXNwb25zZSkgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRNb2RlcmF0b3JTdGF0cyA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfbDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvbW9kZXJhdGlvbi9tb2RlcmF0b3Jfc3RhdHMnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAoX2wgPSBkZWNvZGVycy5Nb2RlcmF0b3JTdGF0c1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2wuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm11dGUgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9tO1xuICAgICAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRfaWRzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGFyZ2V0X2lkcyxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGltZW91dCxcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICB1c2VyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL211dGUnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYm9keSk7XG4gICAgICAgICAgICAoX20gPSBkZWNvZGVycy5NdXRlUmVzcG9uc2UpID09PSBudWxsIHx8IF9tID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbS5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2V0UXVldWVTdGF0cyA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfbztcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvbW9kZXJhdGlvbi9xdWV1ZV9zdGF0cycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfbyA9IGRlY29kZXJzLlF1ZXVlU3RhdHNSZXNwb25zZSkgPT09IG51bGwgfHwgX28gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vLmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeVJldmlld1F1ZXVlID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfcDtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5saW1pdCxcbiAgICAgICAgICAgICAgICBsb2NrX21vZGVyYXRvcl9kdXJhdGlvbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmxvY2tfbW9kZXJhdG9yX2R1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGxvY2tfbW9kZXJhdG9yX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubG9ja19tb2RlcmF0b3JfaWQsXG4gICAgICAgICAgICAgICAgbmV4dDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lm5leHQsXG4gICAgICAgICAgICAgICAgcHJldjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnByZXYsXG4gICAgICAgICAgICAgICAgc3RhdHNfb25seTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnN0YXRzX29ubHksXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgc29ydDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnNvcnQsXG4gICAgICAgICAgICAgICAgZmlsdGVyOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuZmlsdGVyLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vcmV2aWV3X3F1ZXVlJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF9wID0gZGVjb2RlcnMuUXVlcnlSZXZpZXdRdWV1ZVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3AuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldFJldmlld1F1ZXVlSXRlbSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3E7XG4gICAgICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL3Jldmlld19xdWV1ZS97aWR9JywgcGF0aFBhcmFtcywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIChfcSA9IGRlY29kZXJzLkdldFJldmlld1F1ZXVlSXRlbVJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfcSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3EuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN1Ym1pdEFjdGlvbiA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3I7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIGFjdGlvbl90eXBlOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYWN0aW9uX3R5cGUsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0Lml0ZW1faWQsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgYmFuOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYmFuLFxuICAgICAgICAgICAgICAgIGN1c3RvbTogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmN1c3RvbSxcbiAgICAgICAgICAgICAgICBkZWxldGVfYWN0aXZpdHk6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kZWxldGVfYWN0aXZpdHksXG4gICAgICAgICAgICAgICAgZGVsZXRlX21lc3NhZ2U6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kZWxldGVfbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBkZWxldGVfcmVhY3Rpb246IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kZWxldGVfcmVhY3Rpb24sXG4gICAgICAgICAgICAgICAgZGVsZXRlX3VzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5kZWxldGVfdXNlcixcbiAgICAgICAgICAgICAgICB1bmJhbjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVuYmFuLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vc3VibWl0X2FjdGlvbicsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfciA9IGRlY29kZXJzLlN1Ym1pdEFjdGlvblJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3IuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVuYmFuID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfcztcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHRhcmdldF91c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudGFyZ2V0X3VzZXJfaWQsXG4gICAgICAgICAgICAgICAgY2hhbm5lbF9jaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5jaGFubmVsX2NpZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2J5OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuY3JlYXRlZF9ieSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHVuYmFubmVkX2J5X2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudW5iYW5uZWRfYnlfaWQsXG4gICAgICAgICAgICAgICAgdW5iYW5uZWRfYnk6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51bmJhbm5lZF9ieSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2FwaS92Mi9tb2RlcmF0aW9uL3VuYmFuJywgdW5kZWZpbmVkLCBxdWVyeVBhcmFtcywgYm9keSk7XG4gICAgICAgICAgICAoX3MgPSBkZWNvZGVycy5VbmJhblJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3MuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVubXV0ZSA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX3Q7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgICAgIHRhcmdldF9pZHM6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC50YXJnZXRfaWRzLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHVzZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC51c2VyLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsICcvYXBpL3YyL21vZGVyYXRpb24vdW5tdXRlJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGJvZHkpO1xuICAgICAgICAgICAgKF90ID0gZGVjb2RlcnMuVW5tdXRlUmVzcG9uc2UpID09PSBudWxsIHx8IF90ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdC5jYWxsKGRlY29kZXJzLCByZXNwb25zZS5ib2R5KTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmJvZHkpLCB7IG1ldGFkYXRhOiByZXNwb25zZS5tZXRhZGF0YSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVlcnlVc2FnZVN0YXRzID0gKHJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfdTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbGltaXQ6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5saW1pdCxcbiAgICAgICAgICAgICAgICBuZXh0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QubmV4dCxcbiAgICAgICAgICAgICAgICBwcmV2OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QucHJldixcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QudXNlcl9pZCxcbiAgICAgICAgICAgICAgICBzb3J0OiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3Quc29ydCxcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5maWx0ZXIsXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRSZXF1ZXN0KCdQT1NUJywgJy9hcGkvdjIvbW9kZXJhdGlvbi91c2FnZV9zdGF0cycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBib2R5KTtcbiAgICAgICAgICAgIChfdSA9IGRlY29kZXJzLlF1ZXJ5VXNhZ2VTdGF0c1Jlc3BvbnNlKSA9PT0gbnVsbCB8fCBfdSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3UuY2FsbChkZWNvZGVycywgcmVzcG9uc2UuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5ib2R5KSwgeyBtZXRhZGF0YTogcmVzcG9uc2UubWV0YWRhdGEgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldFVzZXJSZXBvcnQgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF92O1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlX3VzZXJfaWZfbm90X2V4aXN0czogcmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0LmNyZWF0ZV91c2VyX2lmX25vdF9leGlzdHMsXG4gICAgICAgICAgICAgICAgaW5jbHVkZV91c2VyX211dGVzOiByZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuaW5jbHVkZV91c2VyX211dGVzLFxuICAgICAgICAgICAgICAgIGluY2x1ZGVfdXNlcl9ibG9ja3M6IHJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdC5pbmNsdWRlX3VzZXJfYmxvY2tzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVxdWVzdCgnR0VUJywgJy9hcGkvdjIvbW9kZXJhdGlvbi91c2VyX3JlcG9ydCcsIHVuZGVmaW5lZCwgcXVlcnlQYXJhbXMpO1xuICAgICAgICAgICAgKF92ID0gZGVjb2RlcnMuR2V0VXNlck1vZGVyYXRpb25SZXBvcnRSZXNwb25zZSkgPT09IG51bGwgfHwgX3YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92LmNhbGwoZGVjb2RlcnMsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzcG9uc2UuYm9keSksIHsgbWV0YWRhdGE6IHJlc3BvbnNlLm1ldGFkYXRhIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNsYXNzIFN0cmVhbU1vZGVyYXRpb25DbGllbnQgZXh0ZW5kcyBNb2RlcmF0aW9uQXBpIHtcbn1cblxuY2xhc3MgU3RyZWFtQ2xpZW50IGV4dGVuZHMgQ29tbW9uQXBpIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcGlLZXlcbiAgICAgKiBAcGFyYW0gc2VjcmV0XG4gICAgICogQHBhcmFtIGNvbmZpZyBjb25maWcgb2JqZWN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBzZWNyZXQsIGNvbmZpZykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc3QgdG9rZW4gPSBKV1RTZXJ2ZXJUb2tlbihzZWNyZXQpO1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gKF9hID0gY29uZmlnID09PSBudWxsIHx8IGNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlnLnRpbWVvdXQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFN0cmVhbUNsaWVudC5ERUZBVUxUX1RJTUVPVVQ7XG4gICAgICAgIGNvbnN0IGNoYXRCYXNlVXJsID0gKF9iID0gY29uZmlnID09PSBudWxsIHx8IGNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlnLmJhc2VQYXRoKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnaHR0cHM6Ly9jaGF0LnN0cmVhbS1pby1hcGkuY29tJztcbiAgICAgICAgY29uc3QgdmlkZW9CYXNlVXJsID0gKF9jID0gY29uZmlnID09PSBudWxsIHx8IGNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlnLmJhc2VQYXRoKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAnaHR0cHM6Ly92aWRlby5zdHJlYW0taW8tYXBpLmNvbSc7XG4gICAgICAgIHN1cGVyKHsgYXBpS2V5LCB0b2tlbiwgdGltZW91dCwgYmFzZVVybDogY2hhdEJhc2VVcmwgfSk7XG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgICB0aGlzLnNlY3JldCA9IHNlY3JldDtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnVwc2VydFVzZXJzID0gKHVzZXJzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0ge307XG4gICAgICAgICAgICB1c2Vycy5mb3JFYWNoKCh1KSA9PiB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFt1LmlkXSA9IHU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVVzZXJzKHsgdXNlcnM6IHBheWxvYWQgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucXVlcnlCYW5uZWRVc2VycyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGF0LnF1ZXJ5QmFubmVkVXNlcnMocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gcGF5bG9hZFxuICAgICAgICAgKiAtIHVzZXJfaWQgLSB0aGUgaWQgb2YgdGhlIHVzZXIgdGhlIHRva2VuIGlzIGZvclxuICAgICAgICAgKiAtIHZhbGlkaXR5X2luX3NlY29uZHMgLSBob3cgbWFueSBzZWNvbmRzIGlzIHRoZSB0b2tlbiB2YWxpZCBmb3IgKHN0YXJ0aW5nIGZyb20gaXNzdWVkIGF0KSwgYnkgZGVmYXVsdCBpdCdzIDEgaG91ciwgZGljYXJkZWQgaWYgZXhwIGlzIHByb3ZpZGVkXG4gICAgICAgICAqIC0gZXhwIC0gd2hlbiB0aGUgdG9rZW4gZXhwaXJlcywgdW5peCB0aW1lc3RhbXAgaW4gc2Vjb25kc1xuICAgICAgICAgKiAtIGlhdCAtIGlzc3VlZCBhdCBkYXRlIG9mIHRoZSB0b2tlbiwgdW5peCB0aW1lc3RhbXAgaW4gc2Vjb25kcywgYnkgZGVmYXVsdCBpdCdzIG5vd1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nZW5lcmF0ZVVzZXJUb2tlbiA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRJYXQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gMTAwMCkgLyAxMDAwKTtcbiAgICAgICAgICAgIHBheWxvYWQuaWF0ID0gKF9hID0gcGF5bG9hZC5pYXQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGRlZmF1bHRJYXQ7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGl0eUluU2Vjb25kcyA9IChfYiA9IHBheWxvYWQudmFsaWRpdHlfaW5fc2Vjb25kcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNjAgKiA2MDtcbiAgICAgICAgICAgIHBheWxvYWQuZXhwID0gKF9jID0gcGF5bG9hZC5leHApICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHBheWxvYWQuaWF0ICsgdmFsaWRpdHlJblNlY29uZHM7XG4gICAgICAgICAgICByZXR1cm4gSldUVXNlclRva2VuKHRoaXMuc2VjcmV0LCBwYXlsb2FkKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBwYXlsb2FkXG4gICAgICAgICAqIC0gdXNlcl9pZCAtIHRoZSBpZCBvZiB0aGUgdXNlciB0aGUgdG9rZW4gaXMgZm9yXG4gICAgICAgICAqIC0gdmFsaWRpdHlfaW5fc2Vjb25kcyAtIGhvdyBtYW55IHNlY29uZHMgaXMgdGhlIHRva2VuIHZhbGlkIGZvciAoc3RhcnRpbmcgZnJvbSBpc3N1ZWQgYXQpLCBieSBkZWZhdWx0IGl0J3MgMSBob3VyLCBkaWNhcmRlZCBpZiBleHAgaXMgcHJvdmlkZWRcbiAgICAgICAgICogLSBleHAgLSB3aGVuIHRoZSB0b2tlbiBleHBpcmVzLCB1bml4IHRpbWVzdGFtcCBpbiBzZWNvbmRzXG4gICAgICAgICAqIC0gaWF0IC0gaXNzdWVkIGF0IGRhdGUgb2YgdGhlIHRva2VuLCB1bml4IHRpbWVzdGFtcCBpbiBzZWNvbmRzLCBieSBkZWZhdWx0IGl0J3Mgbm93XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsbFRva2VuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlVXNlclRva2VuKHBheWxvYWQpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHVzZXJJRFxuICAgICAgICAgKiBAcGFyYW0gZXhwXG4gICAgICAgICAqIEBwYXJhbSBpYXQgZGVwcmVjYXRlZCwgdGhlIGRlZmF1bHQgZGF0ZSB3aWxsIGJlIHNldCBpbnRlcm5hbGx5XG4gICAgICAgICAqIEByZXR1cm5zXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXByZWNhdGVkIHVzZSBnZW5lcmF0ZVVzZXJUb2tlbiBpbnN0ZWFkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNyZWF0ZVRva2VuID0gKHVzZXJJRCwgZXhwID0gTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gMTAwMCkgKyA2MCAqIDYwLCBpYXQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gMTAwMCkgLyAxMDAwKSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySUQsXG4gICAgICAgICAgICAgICAgZXhwLFxuICAgICAgICAgICAgICAgIGlhdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gSldUVXNlclRva2VuKHRoaXMuc2VjcmV0LCBwYXlsb2FkKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB1c2VySURcbiAgICAgICAgICogQHBhcmFtIGNhbGxfY2lkc1xuICAgICAgICAgKiBAcGFyYW0gZXhwXG4gICAgICAgICAqIEBwYXJhbSBpYXQgdGhpcyBpcyBkZXByZWNhdGVkLCB0aGUgY3VycmVudCBkYXRlIHdpbGwgYmUgc2V0IGludGVybmFsbHlcbiAgICAgICAgICogQHJldHVybnNcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgdXNlIGdlbmVyYXRlQ2FsbFRva2VuIGluc3RlYWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3JlYXRlQ2FsbFRva2VuID0gKHVzZXJJZE9yT2JqZWN0LCBjYWxsX2NpZHMsIGV4cCA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAvIDEwMDApICsgNjAgKiA2MCwgaWF0ID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIDEwMDApIC8gMTAwMCkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgZXhwLFxuICAgICAgICAgICAgICAgIGlhdCxcbiAgICAgICAgICAgICAgICBjYWxsX2NpZHMsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdHlwZW9mIHVzZXJJZE9yT2JqZWN0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/IHVzZXJJZE9yT2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIDogdXNlcklkT3JPYmplY3QudXNlcl9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVzZXJJZE9yT2JqZWN0ID09PSAnb2JqZWN0JyAmJiB1c2VySWRPck9iamVjdC5yb2xlKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5yb2xlID0gdXNlcklkT3JPYmplY3Qucm9sZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBKV1RVc2VyVG9rZW4odGhpcy5zZWNyZXQsIHBheWxvYWQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnZlcmlmeVdlYmhvb2sgPSAocmVxdWVzdEJvZHksIHhTaWduYXR1cmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IEJ1ZmZlci5mcm9tKHRoaXMuc2VjcmV0LCAndXRmOCcpO1xuICAgICAgICAgICAgY29uc3QgaGFzaCA9IGNyeXB0b1xuICAgICAgICAgICAgICAgIC5jcmVhdGVIbWFjKCdzaGEyNTYnLCBrZXkpXG4gICAgICAgICAgICAgICAgLnVwZGF0ZShyZXF1ZXN0Qm9keSlcbiAgICAgICAgICAgICAgICAuZGlnZXN0KCdoZXgnKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyeXB0by50aW1pbmdTYWZlRXF1YWwoQnVmZmVyLmZyb20oaGFzaCksIEJ1ZmZlci5mcm9tKHhTaWduYXR1cmUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudmlkZW8gPSBuZXcgU3RyZWFtVmlkZW9DbGllbnQoe1xuICAgICAgICAgICAgYXBpS2V5LFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICB0aW1lb3V0LFxuICAgICAgICAgICAgYmFzZVVybDogdmlkZW9CYXNlVXJsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jaGF0ID0gbmV3IFN0cmVhbUNoYXRDbGllbnQoe1xuICAgICAgICAgICAgYXBpS2V5LFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICB0aW1lb3V0LFxuICAgICAgICAgICAgYmFzZVVybDogY2hhdEJhc2VVcmwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1vZGVyYXRpb24gPSBuZXcgU3RyZWFtTW9kZXJhdGlvbkNsaWVudCh7XG4gICAgICAgICAgICBhcGlLZXksXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIHRpbWVvdXQsXG4gICAgICAgICAgICBiYXNlVXJsOiBjaGF0QmFzZVVybCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuU3RyZWFtQ2xpZW50LkRFRkFVTFRfVElNRU9VVCA9IDMwMDA7XG5cbmV4cG9ydCB7IE93bkNhcGFiaWxpdHksIFN0cmVhbUNhbGwsIFN0cmVhbUNoYW5uZWwsIFN0cmVhbUNoYXRDbGllbnQsIFN0cmVhbUNsaWVudCwgU3RyZWFtVmlkZW9DbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@stream-io/node-sdk/dist/index.es.js\n");

/***/ })

};
;